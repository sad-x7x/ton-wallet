/*! For license information please see 941.2fdddae7403cbdef81d1.js.LICENSE.txt */
(()=>{var t,e,n={61995:(t,e,n)=>{"use strict";n.d(e,{Hc:()=>o,Hx:()=>r,xT:()=>a});const r={GET_STATIC_DATA:801842850,REPORT_STATIC_DATA:2339837749,GET_STORAGE_DATA:1535698380,REPORT_STORAGE_DATA:2863966447,EXCESSES:3576854235,TRANSFER_JETTON:260734629,INTERNAL_TRANSFER:395134233,TRANSFER_NOTIFICATION:1935855772,PROVIDE_WALLET_ADDRESS:745978227,TAKE_WALLET_ADDRESS:3513996288,BURN_JETTON:1499400124,STAKE_JETTONS:3818940809,ADD_REWARDS:3675696277,SEND_CLAIMED_REWARDS:1153179619,SEND_UNSTAKED_JETTONS:4213386179,APPROVE_STAKE:2443044737,CANCEL_STAKE:2662179289,ADD_REWARD_JETTONS:275213031,CLAIM_COMMISSIONS:3165188199,REQUEST_UPDATE_REWARDS:4123376291,CLAIM_REWARDS:2027548937,RECEIVE_JETTONS:3599387329,UNSTAKE_JETTONS:1234866786,UNSTAKE_REQUEST:23647415,CANCEL_UNSTAKE_REQUEST:2760970010,UPDATE_REWARDS:2928871374,CONFIRM_TRANSFER:3162893073,DEPLOY_NEW_POOL:3666222871,SEND_COMMISSIONS:3110787818,SET_CODE:3805467153,CHANGE_CREATION_FEE:1725256331,CHANGE_CONTENT:247632384,UPDATE_CODES:2244551631},a={MIN_RESERVE:20000000n,DEPLOY_POOL:340000000n,NOTIFICATION:340000000n,JETTON_TRANSFER:55000000n,BURN_JETTONS:340000000n,STAKE_JETTONS:300000000n,UNSTAKE_JETTONS:340000000n,CANCEL_UNSTAKE:340000000n,SEND_COMMISSIONS:340000000n,SIMPLE_UPDATE_REQUEST:340000000n,ADD_REWARDS:340000000n,APPROVE_TRANSFER:340000000n,SAVE_UPDATED_REWARDS:340000000n,MIN_EXCESS:10000000n,SEND_STAKED_JETTONS:630000000n},o={COMMISSION_DIVIDER:10000n,REWARDS_DIVIDER:1e3,DISTRIBUTION_SPEED_DIVIDER:BigInt(86400),DISTRIBUTED_REWARDS_DIVIDER:100000000000000000000000000000000000000n}},39989:(t,e,n)=>{"use strict";n.d(e,{K$:()=>s,KB:()=>o,QS:()=>c,Ww:()=>i,aU:()=>a});var r=n(23174);class a extends Error{constructor(t,e){super(t),this.displayError=e,this.name=this.constructor.name}}class o extends a{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Canceled by the user")}}class s extends a{constructor(t,e){super(t,r.QD.ServerError),this.statusCode=e}}class i extends a{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Abort operation")}}function c(t){if(t instanceof s)return{error:t.displayError};throw t}},31284:(t,e,n)=>{"use strict";var r={};n.r(r),n.d(r,{Workchain:()=>Gt,buildWallet:()=>za,checkApiAvailability:()=>pi,checkMultiTransactionDraft:()=>Ps,checkNftOwnership:()=>Hs,checkNftTransferDraft:()=>Vs,checkStakeDraft:()=>ni,checkTransactionDraft:()=>ks,checkUnstakeDraft:()=>ri,decryptComment:()=>Ks,fetchActivityDetails:()=>ns,fetchActivitySlice:()=>es,fetchEstimateDiesel:()=>js,fetchPrivateKey:()=>so,fetchToken:()=>hs,generateMnemonic:()=>ro,getAccountBalance:()=>Va,getAccountNewestActionId:()=>xs,getAccountNfts:()=>zs,getAccountTokenBalances:()=>ds,getBackendStakingState:()=>di,getContractInfo:()=>Ja,getNftUpdates:()=>Js,getStakingStates:()=>ii,getTokenBalances:()=>ls,getTonWallet:()=>eo,getToncoinAmountForTransfer:()=>ys,getWalletBalance:()=>$a,getWalletFromBip39Mnemonic:()=>uo,getWalletFromMnemonic:()=>lo,getWalletFromPrivateKey:()=>fo,getWalletInfo:()=>Ha,getWalletSeqno:()=>Qa,getWalletStateInit:()=>Ya,getWalletVersionInfos:()=>Za,getWalletVersions:()=>Xa,importNewWalletVersion:()=>wo,insertMintlessPayload:()=>fs,isActiveSmartContract:()=>qa,isAddressInitialized:()=>ja,normalizeAddress:()=>us,oneCellFromBoc:()=>Te,packPayloadToBoc:()=>mi,parsePayloadBase64:()=>da,pickBestWallet:()=>Ga,pickWalletByAddress:()=>to,publicKeyToAddress:()=>La,rawSign:()=>co,resolveTokenAddress:()=>Be,resolveTokenWalletAddress:()=>ke,resolveWalletVersion:()=>no,sendSignedMessage:()=>Ms,sendSignedMessages:()=>Ws,setupInactiveAccountsBalancePolling:()=>Gi,setupPolling:()=>Vi,submitMultiTransfer:()=>Os,submitNftTransfers:()=>$s,submitStake:()=>ai,submitStakingClaim:()=>li,submitTransfer:()=>Ds,submitTransferWithDiesel:()=>_s,submitUnstake:()=>oi,validateDexSwapTransfers:()=>vi,validateMnemonic:()=>ao});var a={};n.r(a),n.d(a,{checkApiAvailability:()=>Ic,checkTransactionDraft:()=>bc,getAllTransactionSlice:()=>ac,getTokenTransactionSlice:()=>rc,getWalletBalance:()=>sc,getWalletFromBip39Mnemonic:()=>Sc,setupInactiveAccountsBalancePolling:()=>pc,setupPolling:()=>mc,submitTransfer:()=>Ec});var o={};n.r(o),n.d(o,{connect:()=>Ml,deactivate:()=>zl,disconnect:()=>jl,fetchDappMetadata:()=>$l,initTonConnect:()=>Fl,reconnect:()=>Wl,sendTransaction:()=>ql,signData:()=>Ll});var s={};n.r(s),n.d(s,{activateAccount:()=>Ed,buildTokenSlug:()=>ta,cancelDappRequest:()=>Yd,cancelPendingTransfer:()=>gu,changePassword:()=>Wd,checkApiAvailability:()=>Ou,checkNftOwnership:()=>dl,checkNftTransferDraft:()=>cl,checkStakeDraft:()=>Iu,checkTransactionDraft:()=>mu,checkUnstakeDraft:()=>ku,confirmDappRequest:()=>Zd,confirmDappRequestConnect:()=>Xd,createAccountWithSecondNetwork:()=>Od,createLocalTransaction:()=>vu,createWallet:()=>Rd,deactivateAllAccounts:()=>Id,deactivateCurrentAccount:()=>kd,deactivateDapp:()=>Oc,decryptComment:()=>yu,deleteAllDapps:()=>jc,deleteDapp:()=>Kc,fetchAccountConfigForDebugPurposesOnly:()=>Nu,fetchActivitySlice:()=>lu,fetchAddress:()=>el,fetchAllActivitySlice:()=>fu,fetchBackendStakingState:()=>Cu,fetchEstimateDiesel:()=>Au,fetchLedgerAccount:()=>Dd,fetchMnemonic:()=>$d,fetchNfts:()=>il,fetchPriceHistory:()=>df,fetchPrivateKey:()=>Vd,fetchSwaps:()=>Ju,fetchToken:()=>eu,fetchTokenBalances:()=>au,fetchTokenBalancesByAddress:()=>ou,fetchTonActivityDetails:()=>bu,fetchTonWallet:()=>Bd,generateMnemonic:()=>Cd,getActiveDapp:()=>Pc,getAmountForTokenTransfer:()=>su,getBackendAuthToken:()=>Uu,getBaseCurrency:()=>Qc,getContractInfo:()=>al,getDapps:()=>qc,getDappsByOrigin:()=>Lc,getLogs:()=>C.ao,getMnemonicWordList:()=>Qd,getMoonpayOnrampUrl:()=>Wu,getStakingHistory:()=>_u,getTokenBySlug:()=>Zr,getWalletBalance:()=>rl,getWalletInfo:()=>ol,getWalletSeqno:()=>tl,importLedgerWallet:()=>Ud,importMnemonic:()=>Pd,importNewWalletVersion:()=>wo,initAccounts:()=>bd,initDapps:()=>Rc,initPolling:()=>dd,initStaking:()=>Su,initSwap:()=>qu,initTransactions:()=>du,isWalletInitialized:()=>nl,loadExploreSites:()=>$c,ping:()=>Fu,removeAccount:()=>Md,removeNetworkAccounts:()=>Nd,resetAccounts:()=>Fd,resolveDataPreloadPromise:()=>Xc,resolveTokenAddress:()=>ru,resolveTokenWalletAddress:()=>nu,sendSignedTransferMessage:()=>hu,setBaseCurrency:()=>Gc,setIsAppFocused:()=>Si,setupAccountConfigPolling:()=>gd,setupBackendPolling:()=>ld,setupLongBackendPolling:()=>fd,startSseConnection:()=>sf,submitNftTransfers:()=>ul,submitStake:()=>Bu,submitStakingClaim:()=>Ru,submitTransfer:()=>pu,submitUnstake:()=>Du,subscribeNotifications:()=>lf,swapBuild:()=>$u,swapBuildTransfer:()=>Lu,swapCexCreateTransaction:()=>td,swapCexEstimate:()=>Xu,swapCexSubmit:()=>ed,swapCexValidateAddress:()=>Yu,swapEstimate:()=>Vu,swapGetAssets:()=>Qu,swapGetPairs:()=>Zu,swapGetTonCurrencies:()=>Gu,swapSubmit:()=>zu,tryUpdateConfig:()=>hd,tryUpdatePrices:()=>md,tryUpdateStakingCommonData:()=>Tu,tryUpdateSwapTokens:()=>wd,tryUpdateTokens:()=>pd,unsubscribeNotifications:()=>ff,updateAccountMemoryCache:()=>Mu,validateMnemonic:()=>xd,verifyPassword:()=>Gd,waitAndCreateTonPendingTransfer:()=>wu,waitDataPreload:()=>Yc});var i=n(31481),c=1e6,u="[big.js] ",d=u+"Invalid ",l=d+"decimal places",f=d+"rounding mode",m=u+"Division by zero",p={},w=void 0,h=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function g(t,e,n,r){var a=t.c;if(n===w&&(n=t.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(f);if(e<1)r=3===n&&(r||!!a[0])||0===e&&(1===n&&a[0]>=5||2===n&&(a[0]>5||5===a[0]&&(r||a[1]!==w))),a.length=1,r?(t.e=t.e-e+1,a[0]=1):a[0]=t.e=0;else if(e<a.length){if(r=1===n&&a[e]>=5||2===n&&(a[e]>5||5===a[e]&&(r||a[e+1]!==w||1&a[e-1]))||3===n&&(r||!!a[0]),a.length=e,r)for(;++a[--e]>9;)if(a[e]=0,0===e){++t.e,a.unshift(1);break}for(e=a.length;!a[--e];)a.pop()}return t}function y(t,e,n){var r=t.e,a=t.c.join(""),o=a.length;if(e)a=a.charAt(0)+(o>1?"."+a.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)a="0"+a;a="0."+a}else if(r>0)if(++r>o)for(r-=o;r--;)a+="0";else r<o&&(a=a.slice(0,r)+"."+a.slice(r));else o>1&&(a=a.charAt(0)+"."+a.slice(1));return t.s<0&&n?"-"+a:a}p.abs=function(){var t=new this.constructor(this);return t.s=1,t},p.cmp=function(t){var e,n=this,r=n.c,a=(t=new n.constructor(t)).c,o=n.s,s=t.s,i=n.e,c=t.e;if(!r[0]||!a[0])return r[0]?o:a[0]?-s:0;if(o!=s)return o;if(e=o<0,i!=c)return i>c^e?1:-1;for(s=(i=r.length)<(c=a.length)?i:c,o=-1;++o<s;)if(r[o]!=a[o])return r[o]>a[o]^e?1:-1;return i==c?0:i>c^e?1:-1},p.div=function(t){var e=this,n=e.constructor,r=e.c,a=(t=new n(t)).c,o=e.s==t.s?1:-1,s=n.DP;if(s!==~~s||s<0||s>c)throw Error(l);if(!a[0])throw Error(m);if(!r[0])return t.s=o,t.c=[t.e=0],t;var i,u,d,f,p,h=a.slice(),y=i=a.length,v=r.length,A=r.slice(0,i),b=A.length,E=t,S=E.c=[],I=0,k=s+(E.e=e.e-t.e)+1;for(E.s=o,o=k<0?0:k,h.unshift(0);b++<i;)A.push(0);do{for(d=0;d<10;d++){if(i!=(b=A.length))f=i>b?1:-1;else for(p=-1,f=0;++p<i;)if(a[p]!=A[p]){f=a[p]>A[p]?1:-1;break}if(!(f<0))break;for(u=b==i?a:h;b;){if(A[--b]<u[b]){for(p=b;p&&!A[--p];)A[p]=9;--A[p],A[b]+=10}A[b]-=u[b]}for(;!A[0];)A.shift()}S[I++]=f?d:++d,A[0]&&f?A[b]=r[y]||0:A=[r[y]]}while((y++<v||A[0]!==w)&&o--);return S[0]||1==I||(S.shift(),E.e--,k--),I>k&&g(E,k,n.RM,A[0]!==w),E},p.eq=function(t){return 0===this.cmp(t)},p.gt=function(t){return this.cmp(t)>0},p.gte=function(t){return this.cmp(t)>-1},p.lt=function(t){return this.cmp(t)<0},p.lte=function(t){return this.cmp(t)<1},p.minus=p.sub=function(t){var e,n,r,a,o=this,s=o.constructor,i=o.s,c=(t=new s(t)).s;if(i!=c)return t.s=-c,o.plus(t);var u=o.c.slice(),d=o.e,l=t.c,f=t.e;if(!u[0]||!l[0])return l[0]?t.s=-c:u[0]?t=new s(o):t.s=1,t;if(i=d-f){for((a=i<0)?(i=-i,r=u):(f=d,r=l),r.reverse(),c=i;c--;)r.push(0);r.reverse()}else for(n=((a=u.length<l.length)?u:l).length,i=c=0;c<n;c++)if(u[c]!=l[c]){a=u[c]<l[c];break}if(a&&(r=u,u=l,l=r,t.s=-t.s),(c=(n=l.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;n>i;){if(u[--n]<l[n]){for(e=n;e&&!u[--e];)u[e]=9;--u[e],u[n]+=10}u[n]-=l[n]}for(;0===u[--c];)u.pop();for(;0===u[0];)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t},p.mod=function(t){var e,n=this,r=n.constructor,a=n.s,o=(t=new r(t)).s;if(!t.c[0])throw Error(m);return n.s=t.s=1,e=1==t.cmp(n),n.s=a,t.s=o,e?new r(n):(a=r.DP,o=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=a,r.RM=o,this.minus(n.times(t)))},p.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},p.plus=p.add=function(t){var e,n,r,a=this,o=a.constructor;if(t=new o(t),a.s!=t.s)return t.s=-t.s,a.minus(t);var s=a.e,i=a.c,c=t.e,u=t.c;if(!i[0]||!u[0])return u[0]||(i[0]?t=new o(a):t.s=a.s),t;if(i=i.slice(),e=s-c){for(e>0?(c=s,r=u):(e=-e,r=i),r.reverse();e--;)r.push(0);r.reverse()}for(i.length-u.length<0&&(r=u,u=i,i=r),e=u.length,n=0;e;i[e]%=10)n=(i[--e]=i[e]+u[e]+n)/10|0;for(n&&(i.unshift(n),++c),e=i.length;0===i[--e];)i.pop();return t.c=i,t.e=c,t},p.pow=function(t){var e=this,n=new e.constructor("1"),r=n,a=t<0;if(t!==~~t||t<-1e6||t>1e6)throw Error(d+"exponent");for(a&&(t=-t);1&t&&(r=r.times(e)),t>>=1;)e=e.times(e);return a?n.div(r):r},p.prec=function(t,e){if(t!==~~t||t<1||t>c)throw Error(d+"precision");return g(new this.constructor(this),t,e)},p.round=function(t,e){if(t===w)t=0;else if(t!==~~t||t<-c||t>c)throw Error(l);return g(new this.constructor(this),t+this.e+1,e)},p.sqrt=function(){var t,e,n,r=this,a=r.constructor,o=r.s,s=r.e,i=new a("0.5");if(!r.c[0])return new a(r);if(o<0)throw Error(u+"No square root");0===(o=Math.sqrt(r+""))||o===1/0?((e=r.c.join("")).length+s&1||(e+="0"),s=((s+1)/2|0)-(s<0||1&s),t=new a(((o=Math.sqrt(e))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):t=new a(o+""),s=t.e+(a.DP+=4);do{n=t,t=i.times(n.plus(r.div(n)))}while(n.c.slice(0,s).join("")!==t.c.slice(0,s).join(""));return g(t,(a.DP-=4)+t.e+1,a.RM)},p.times=p.mul=function(t){var e,n=this,r=n.constructor,a=n.c,o=(t=new r(t)).c,s=a.length,i=o.length,c=n.e,u=t.e;if(t.s=n.s==t.s?1:-1,!a[0]||!o[0])return t.c=[t.e=0],t;for(t.e=c+u,s<i&&(e=a,a=o,o=e,u=s,s=i,i=u),e=new Array(u=s+i);u--;)e[u]=0;for(c=i;c--;){for(i=0,u=s+c;u>c;)i=e[u]+o[c]*a[u-c-1]+i,e[u--]=i%10,i=i/10|0;e[u]=i}for(i?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},p.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==w){if(t!==~~t||t<0||t>c)throw Error(l);for(n=g(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return y(n,!0,!!r)},p.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==w){if(t!==~~t||t<0||t>c)throw Error(l);for(t=t+(n=g(new n.constructor(n),t+n.e+1,e)).e+1;n.c.length<t;)n.c.push(0)}return y(n,!1,!!r)},p[Symbol.for("nodejs.util.inspect.custom")]=p.toJSON=p.toString=function(){var t=this,e=t.constructor;return y(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},p.toNumber=function(){var t=Number(y(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(t.toString()))throw Error(u+"Imprecise conversion");return t},p.toPrecision=function(t,e){var n=this,r=n.constructor,a=n.c[0];if(t!==w){if(t!==~~t||t<1||t>c)throw Error(d+"precision");for(n=g(new r(n),t,e);n.c.length<t;)n.c.push(0)}return y(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!a)},p.valueOf=function(){var t=this,e=t.constructor;if(!0===e.strict)throw Error(u+"valueOf disallowed");return y(t,t.e<=e.NE||t.e>=e.PE,!0)};var v=function t(){function e(n){var r=this;if(!(r instanceof e))return n===w?t():new e(n);if(n instanceof e)r.s=n.s,r.e=n.e,r.c=n.c.slice();else{if("string"!=typeof n){if(!0===e.strict&&"bigint"!=typeof n)throw TypeError(d+"value");n=0===n&&1/n<0?"-0":String(n)}!function(t,e){var n,r,a;if(!h.test(e))throw Error(d+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),a=e.length,r=0;r<a&&"0"==e.charAt(r);)++r;if(r==a)t.c=[t.e=0];else{for(;a>0&&"0"==e.charAt(--a););for(t.e=n-r-1,t.c=[],n=0;r<=a;)t.c[n++]=+e.charAt(r++)}}(r,n)}r.constructor=e}return e.prototype=p,e.DP=20,e.RM=1,e.NE=-7,e.PE=21,e.strict=!1,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}();v.RM=0,v.NE=-1e5,v.PE=1e5;const A=v(10);function b(t,e){return BigInt(v(t).mul(A.pow(null!=e?e:i.Tu9.decimals)).round().toString())}function E(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return S(t,null!=e?e:i.Tu9.decimals,n).toString()}function S(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Tu9.decimals,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return v(t.toString()).div(A.pow(e)).round(e,n?v.roundHalfUp:void 0)}function I(t){return self.crypto.getRandomValues(new Uint8Array(t))}const k="bigint:";function B(t,e){return"string"==typeof e&&e.startsWith(k)?BigInt(e.slice(7)):e}function D(t){return-0n===t||t<0n?-t:t}function _(t,e){return t*i.X1K/b(e)}function T(t,e){return t*b(e)/i.X1K}var C=n(55029);const R=new Map;BigInt.prototype.toJSON=function(){return`${k}${this}`};var x=n(23174);function P(t){const e=t.split("-"),[n,r="mainnet"]=3===e.length?[e[0],e[2]]:e;return{id:Number(n),network:r}}function O(t){const{id:e,network:n}=t;return`${e}-${n}`}function U(t){return 1===t.length&&t[0].length===i.PcM}var N=n(98629),F=n(90749),M=n(88947),W=n.n(M),K=n(83507),j=n.n(K),q=n(48287).Buffer;const L=/^m(\/[0-9]+')+$/;function z(t){return t.replace("'","")}const H=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2147483648;if(!(t=>!!L.test(t)&&!t.split("/").slice(1).map(z).some(isNaN))(t))throw new Error("Invalid derivation path");const{key:r,chainCode:a}=(t=>{const e=j()("sha512","ed25519 seed").update(q.from(t,"hex")).digest();return{key:e.slice(0,32),chainCode:e.slice(32)}})(e);return t.split("/").slice(1).map(z).map((t=>parseInt(t,10))).reduce(((t,e)=>((t,e)=>{let{key:n,chainCode:r}=t;const a=q.allocUnsafe(4);a.writeUInt32BE(e,0);const o=q.concat([q.alloc(1,0),n,a]),s=j()("sha512",r).update(o).digest();return{key:s.slice(0,32),chainCode:s.slice(32)}})(t,e+n)),{key:r,chainCode:a})};var J=n(1307),V=n(94471),$=n(90746),Q=n(3273),G=n(71902),Z=n(99579),X=n(79145),Y=n(28784),tt=n(7941),et=n(8387);function nt(t){for(const e of i.gs5){const{suffixes:n,baseFormat:r,isUnofficial:a}=e;if(!i.TI6||!a)for(let a=n.length-1;a>=0;a--){const o=n[a];if(!t.endsWith(`.${o}`))continue;const s=t.slice(0,-o.length-1);if(r.test(s))return{base:s,zone:e}}}}function rt(t,e){return t.reduce(((t,n)=>(t[n[e]]=n,t)),{})}function at(t,e){return t.reduce(((t,n)=>{const r=n[e];return t[r]?t[r].push(n):t[r]=[n],t}),{})}function ot(t,e){return Object.keys(t).reduce(((n,r,a)=>(n[r]=e(t[r],r,a,t),n)),{})}function st(t,e){return e.reduce(((e,n)=>(e[n]=t[n],e)),{})}function it(t,e){const n=new Set(e.map(String));return st(t,Object.keys(t).filter((t=>!n.has(t))))}function ct(t){return Object.keys(t).reduce(((e,n)=>{const r=n;return void 0!==t[r]&&(e[r]=t[r]),e}),{})}function ut(t){return t.filter(Boolean)}function dt(t,e){const n=[];for(let r=t;r<e;)n.push(r++);return n}function lt(t,e){return t.reduce(((t,n,r)=>(t[n]=Array.isArray(e)?e[r]:e,t)),{})}function ft(t,e){return t.map((t=>t[e]))}var mt=n(69780);class pt{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new pt(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={code:e,data:(0,J.beginCell)().endCell()};return new pt((0,J.contractAddress)(n,r),r)}async getDomain(t){return(await t.get("get_domain",[])).stack.readString()}async getTelemintDomain(t){const e=(await t.get("get_domain_full",[])).stack.readString().replace(/\\u0000/g,".").replace(/\.$/,"").split(".");return e.reverse(),e.join(".")}async getNftData(t){const e=await t.get("get_nft_data",[]);return{index:e.stack.readBigNumber(),collectionAddress:e.stack.readAddress(),owner:e.stack.readAddressOpt()}}}var wt=n(97935),ht=n(61995),gt=n(84752),yt=n(86972),vt=n(67132),At=n(48287).Buffer;function bt(t){return crypto.subtle.digest("SHA-256",t)}function Et(t){return At.from(t).toString("hex")}function St(t){return Uint8Array.from(At.from(t,"hex"))}function It(t){return Uint8Array.from(At.from(t,"base64"))}let kt;function Bt(t){var e;return kt={...t,isDappSupported:i.hL1||i.UMQ||t.isElectron,isSseSupported:t.isElectron||i.UMQ&&!t.isNativeBottomSheet,apiHeaders:{"X-App-Origin":t.isElectron?"file://":null===(e=self)||void 0===e?void 0:e.origin},toncenterMainnetKey:t.isElectron?i.xlJ:i.Irq,toncenterTestnetKey:t.isElectron?i.Q$0:i.HGV},kt}function Dt(){return kt}const _t="m/44'/607'/0'",Tt=1000000000n,Ct=50000000n,Rt=18000000n,xt=32100000n,Pt=8000000n,Ot=3000000n,Ut=1n,Nt=20000000n,Ft=100000000n,Mt=5000000n,Wt=1n,Kt=112,jt={stakeNominators:Tt,unstakeNominators:Tt,stakeLiquid:Tt,unstakeLiquid:Tt,stakeJettonsForward:ht.xT.STAKE_JETTONS,stakeJettons:ht.xT.STAKE_JETTONS+Ct,unstakeJettons:ht.xT.UNSTAKE_JETTONS,claimJettons:ht.xT.JETTON_TRANSFER+ht.xT.SIMPLE_UPDATE_REQUEST,changeDns:50000000n},qt="d",Lt="w",zt=5,Ht=9,Jt=!0,Vt=1.05,$t=["simpleR1","simpleR2","simpleR3","v2R1","v2R2","v3R1","v3R2","v4R2","W5"],Qt="te6cckEBAQEABgAACE0jhUPUcYAL";let Gt=function(t){return t[t.MasterChain=-1]="MasterChain",t[t.BaseChain=0]="BaseChain",t}({});const Zt=Gt.BaseChain,Xt=600,Yt=4,te=4,ee=255;let ne=function(t){return t[t.Comment=0]="Comment",t[t.Encrypted=560454219]="Encrypted",t[t.OurFee=1294173507]="OurFee",t}({}),re=function(t){return t[t.Transfer=260734629]="Transfer",t[t.TransferNotification=1935855772]="TransferNotification",t[t.InternalTransfer=395134233]="InternalTransfer",t[t.Excesses=3576854235]="Excesses",t[t.Burn=1499400124]="Burn",t[t.BurnNotification=2078119902]="BurnNotification",t}({}),ae=function(t){return t[t.TransferOwnership=1607220500]="TransferOwnership",t[t.OwnershipAssigned=85167505]="OwnershipAssigned",t[t.Excesses=3576854235]="Excesses",t}({}),oe=function(t){return t[t.RequestLoan=3863136613]="RequestLoan",t[t.LoanRepayment=3755778683]="LoanRepayment",t[t.Deposit=1205158801]="Deposit",t[t.Withdraw=832244956]="Withdraw",t[t.Withdrawal=175592284]="Withdrawal",t[t.DeployController=2994658477]="DeployController",t[t.Touch=1271382751]="Touch",t[t.Donate=1940913697]="Donate",t[t.DistributedAsset=3678112445]="DistributedAsset",t[t.Vote=1778069612]="Vote",t}({}),se=function(t){return t[t.UnstakeRequest=1234866786]="UnstakeRequest",t[t.ClaimRewards=2027548937]="ClaimRewards",t}({}),ie=function(t){return t[t.AddWhitelist=1918412443]="AddWhitelist",t}({}),ce=function(t){return t[t.Withdraw=4096]="Withdraw",t[t.ChangeValidator=4097]="ChangeValidator",t}({}),ue=function(t){return t[t.ChangeRecord=1320284409]="ChangeRecord",t}({}),de=function(t){return t[t.Ok=2742684035]="Ok",t}({}),le=function(t){return t[t.TokenBridgePaySwap=8]="TokenBridgePaySwap",t}({}),fe=function(t){return t.Wallet="wallet",t.Staking="staking",t}({}),me=function(t){return t.DnsNextResolver="dns_next_resolver",t.Wallet="wallet",t.Site="site",t.BagId="storage",t.Unknown="unknown",t}({});const pe=[re.Excesses,de.Ok],we={dns_next_resolver:"19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff",wallet:"e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b",site:"fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe",storage:"49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7"},he={simpleR1:{name:"simpleR1",hash:"3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd",type:fe.Wallet},simpleR2:{name:"simpleR2",hash:"672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df",type:fe.Wallet},simpleR3:{name:"simpleR3",hash:"d95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52",type:fe.Wallet},v2R1:{name:"v2R1",hash:"fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029",type:fe.Wallet},v2R2:{name:"v2R2",hash:"b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983",type:fe.Wallet},v3R1:{name:"v3R1",hash:"11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6",type:fe.Wallet},v3R2:{name:"v3R2",hash:"df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14",type:fe.Wallet},v4R1:{name:"v4R1",hash:"1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf",type:fe.Wallet},v4R2:{name:"v4R2",hash:"5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1",type:fe.Wallet},W5:{name:"W5",hash:"7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5",type:fe.Wallet},highloadV2:{name:"highloadV2",hash:"fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e",type:fe.Wallet},nominatorPool:{name:"nominatorPool",hash:"26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff",type:fe.Staking},multisig:{name:"multisig",hash:"45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2",type:fe.Wallet},multisigV2:{name:"multisigV2",hash:"eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97",type:fe.Wallet},vesting:{name:"vesting",hash:"69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83",type:fe.Wallet},multisigNew:{name:"multisigNew",hash:"7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f",type:fe.Wallet},dedustPool:{name:"dedustPool",hash:"f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62",isSwapAllowed:!0},dedustVaultNative:{name:"dedustVaultNative",hash:"64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb",isSwapAllowed:!0},dedustVaultJetton:{name:"dedustVaultJetton",hash:"5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307",isSwapAllowed:!0},stonPtonWallet:{name:"stonPtonWallet",hash:"6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880",isSwapAllowed:!0},stonRouter:{name:"stonRouter",hash:"14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da",isSwapAllowed:!0},stonRouterV2_1:{name:"stonRouterV2_1",hash:"d61cb7fb7bee0cc414286a482fccdec53c3f8717e4aae4fc362d98ab6254e6cd",isSwapAllowed:!0},stonPoolV2_1:{name:"stonPoolV2_1",hash:"16cc513c380e329f45d54f294787e2030e289799eca138961c1cd7e26e882c7c",isSwapAllowed:!0},stonRouterV2_2:{name:"stonRouterV2_2",hash:"094b5084111addda1b6fac7007c8a8f85ff4ccc63475815ab3dfa3b5b4c6b102",isSwapAllowed:!0},stonPoolV2_2:{name:"stonPoolV2_2",hash:"11eaf6db706e63adf9327897aaa845c77a631856abfc14375837f19b617cacb4",isSwapAllowed:!0},stonPtonWalletV2:{name:"stonPtonWalletV2",hash:"2761042202032258de9eb1b672e1ec2e4f13b2af00700195801ada33f7ced1b6",isSwapAllowed:!0}};function ge(){return function(){let t=BigInt(0);for(const e of I(8)){const n=BigInt(e);t=(t<<BigInt(8))+n}return t}()}var ye=n(77744),ve=n(48287).Buffer;const Ae=127;let be;const Ee={simpleR1:V.m,simpleR2:$.t,simpleR3:Q.A,v2R1:G.H,v2R2:Z.a,v3R1:X.G,v3R2:Y.N,v4R2:tt.U,W5:et.WalletContractV5R1};function Se(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mainnet";return be||(be={mainnet:new ye.x({endpoint:`${i._J8}/api/v2/jsonRPC`,timeout:i.cSq,apiKey:i.Irq,headers:Dt().apiHeaders}),testnet:new ye.x({endpoint:`${i.pyR}/api/v2/jsonRPC`,timeout:i.cSq,apiKey:i.HGV,headers:Dt().apiHeaders})}),be[t]}function Ie(t,e){const n=Ee[e];if(!n)throw new Error("Unsupported wallet contract version");const r=ve.from(St(t));return n.create({workchain:Zt,publicKey:r})}const ke=(0,mt.A)((async(t,e,n)=>{const r=Se(t).open(new wt.Sr(J.Address.parse(n)));return Ce(await r.getWalletAddress(J.Address.parse(e)),!0,t)})),Be=(0,mt.A)((async(t,e)=>{const n=Se(t).open(new vt.K(J.Address.parse(e)));return Ce((await n.getWalletData()).minter,!0,t)})),De=(0,mt.A)((async(t,e)=>{try{return St((await Se(t).callGetMethod(J.Address.parse(e),"get_public_key")).stack.readBigNumber().toString(16).padStart(64,"0"))}catch(t){return void(0,C.SJ)("getWalletPublicKey",t)}})),_e=(0,mt.A)((async(t,e,n,r)=>{const a=Se(t),o=a.open(yt.Ml.createFromAddress(J.Address.parse(e))),s=await o.getWalletAddress(J.Address.parse(r),n);return a.open(gt.sH.createFromAddress(s))}));function Te(t){return J.Cell.fromBoc(ve.from(t))}function Ce(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt,n=arguments.length>2?arguments[2]:void 0;return"string"==typeof t&&(t=J.Address.parse(t)),t.toString({urlSafe:!0,bounceable:e,testOnly:"testnet"===n})}function Re(t){return"string"==typeof t&&(t=J.Address.parse(t)),t.toRawString()}function xe(t){const{queryId:e,tokenAmount:n,toAddress:r,responseAddress:a,forwardAmount:o,customPayload:s}=t;let i=t.forwardPayload,c=(new J.Builder).storeUint(re.Transfer,32).storeUint(e||ge(),64).storeCoins(n).storeAddress(J.Address.parse(r)).storeAddress(J.Address.parse(a)).storeMaybeRef(s).storeCoins(null!=o?o:0n);return i instanceof Uint8Array&&(i=Oe(i,Math.round(c.availableBits/8))),i?c="string"==typeof i?c.storeBit(!1).storeUint(0,32).storeBuffer(ve.from(i)):i instanceof Uint8Array?c.storeBit(!1).storeBuffer(ve.from(i)):c.storeBit(!0).storeRef(i):c.storeBit(!1),c.endCell()}function Pe(t){const e=ve.from(t),n=new Uint8Array(e.length+4),r=ve.alloc(4);return r.writeUInt32BE(ne.Comment),n.set(r,0),n.set(e,4),n}function Oe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae;return ve.from(t).length<=e?t:Ue(t)}function Ue(t){var e;const n=Ae;let r;for(let e=Math.ceil(t.length/n)-1;e>=0;e--){const a=e*n,o=Math.min(n,t.length-a),s=ve.from(t.buffer,t.byteOffset+a,o),i=(new J.Builder).storeBuffer(s);r&&i.storeRef(r),r=i.endCell()}return null!==(e=r)&&void 0!==e?e:J.Cell.EMPTY}function Ne(t){if(t.length>39+16*Ae)throw new Error("Input text is too long");return(new J.Builder).storeBuffer(ve.from(t.subarray(0,39))).storeRef(Ue(t.subarray(39))).endCell()}function Fe(t){return(new J.Builder).storeUint(oe.Deposit,32).storeUint(t||0,64).asCell()}function Me(t,e){return Se(t).open(new vt.K(J.Address.parse(e))).getJettonBalance()}function We(t){try{if(J.Address.isRaw(t))return{address:J.Address.parseRaw(t),isRaw:!0,isValid:!0};if(J.Address.isFriendly(t))return{...J.Address.parseFriendly(t),isUserFriendly:!0,isValid:!0}}catch(t){}return{isValid:!1}}function Ke(t){return Boolean(We(t).isRaw)}function je(t,e,n){return(0,J.beginCell)().storeUint(ht.Hx.UNSTAKE_JETTONS,32).storeUint(null!=n?n:0,64).storeCoins(t).storeBit(null!=e&&e).endCell()}function qe(t,e){const n=J.Dictionary.empty(J.Dictionary.Keys.Address(),J.Dictionary.Values.Bool());for(const e of t)n.set(J.Address.parse(e),!0);return(0,J.beginCell)().storeUint(ht.Hx.CLAIM_REWARDS,32).storeUint(null!=e?e:0,64).storeDict(n,J.Dictionary.Keys.Address(),J.Dictionary.Values.Bool()).endCell()}function Le(t){return ze(t)?ot(t,(t=>t instanceof J.Dictionary?Le(lt(t.keys(),t.values())):ze(t)?Le(t):t)):t}function ze(t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===Object.prototype}let He,Je=function(t){return t[t.IndexedDb=0]="IndexedDb",t[t.LocalStorage=1]="LocalStorage",t[t.ExtensionLocal=2]="ExtensionLocal",t[t.CapacitorStorage=3]="CapacitorStorage",t}({});function Ve(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}function $e(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Qe{constructor(t,e,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"*";this.target=t,this.onUpdate=e,this.channel=n,this.shouldUseJson=r,this.targetOrigin=a,$e(this,"requestStates",new Map),$e(this,"requestStatesByCallback",new Map)}destroy(){}init(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.postMessage({type:"init",args:e})}request(t){const{requestStates:e,requestStatesByCallback:n}=this,r=Ve(),a={type:"callMethod",messageId:r,...t},o={messageId:r},s=new Promise(((t,e)=>{Object.assign(o,{resolve:t,reject:e})}));if("function"==typeof a.args[a.args.length-1]){a.withCallback=!0;const t=a.args.pop();o.callback=t,n.set(t,o)}return e.set(r,o),s.catch((()=>{})).finally((()=>{e.delete(r),o.callback&&n.delete(o.callback)})),this.postMessage(a),s}cancelCallback(t){t.isCanceled=!0;const{messageId:e}=this.requestStatesByCallback.get(t)||{};e&&this.postMessage({type:"cancelProgress",messageId:e})}onMessage(t){if("string"==typeof t)try{t=JSON.parse(t,B)}catch(t){return void(0,C.SJ)("PostMessageConnector: Failed to parse message",t)}const{requestStates:e,channel:n}=this;if(t.channel===n)if("update"===t.type&&this.onUpdate&&this.onUpdate(t.update),"methodResponse"===t.type){const n=e.get(t.messageId);n&&(t.error?n.reject(t.error):n.resolve(t.response))}else if("methodCallback"===t.type){var r;const n=e.get(t.messageId);null==n||null===(r=n.callback)||void 0===r||r.call(n,...t.callbackArgs)}else if("unhandledError"===t.type){var a,o;const e=new Error(null===(a=t.error)||void 0===a?void 0:a.message);throw null!==(o=t.error)&&void 0!==o&&o.stack&&(e.stack=t.error.stack),e}}postMessage(t){t.channel=this.channel;let e=t;this.shouldUseJson&&(e=JSON.stringify(t)),"open"in this.target?this.target.postMessage(e,this.targetOrigin):this.target.postMessage(e)}}function Ge(t){if(!He)throw new Error("API is not initialized");for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return He.request({name:t,args:n})}let Ze={};const Xe={async getItem(t,e){if(Dt().isAndroidApp&&t in Ze&&!e)return Ze[t];const n=await Ge("capacitorStorageGetItem",t),r=n?JSON.parse(n,B):void 0;return Dt().isAndroidApp&&(void 0===r?delete Ze[t]:Ze[t]=r),r},async setItem(t,e){await Ge("capacitorStorageSetItem",t,JSON.stringify(e)),Dt().isAndroidApp&&(Ze[t]=e)},async removeItem(t){await Ge("capacitorStorageRemoveItem",t),Dt().isAndroidApp&&delete Ze[t]},async clear(){await Ge("capacitorStorageClear"),Dt().isAndroidApp&&(Ze={})},async getKeys(){const t=await Ge("capacitorStorageKeys");return null==t?void 0:t.value}},Ye=i.hL1?self.chrome.storage.local:void 0,tn=Ye&&{getItem:async t=>{var e;return null===(e=await Ye.get(t))||void 0===e?void 0:e[t]},setItem:(t,e)=>Ye.set({[t]:e}),removeItem:Ye.remove.bind(Ye),clear:Ye.clear.bind(Ye),getAll:Ye.get.bind(Ye),setMany:Ye.set.bind(Ye),getMany:Ye.get.bind(Ye)}||{};var en=n(77783);const nn=en.y$(i.vPi,i.rQT),rn={getItem:t=>en.Jt(t,nn),setItem:(t,e)=>en.hZ(t,e,nn),removeItem:t=>en.yH(t,nn),clear:()=>en.IU(nn),getAll:async()=>{const t=await en.HP(nn);return lt(t,await en.qy(t,nn))},getMany:async t=>lt(t,await en.qy(t,nn)),setMany:t=>en._y(Object.entries(t),nn)};function an(t){return function(){return Promise.resolve(t(...arguments))}}const on="object"==typeof localStorage?{getItem:an(localStorage.getItem),setItem:an(localStorage.setItem),removeItem:an(localStorage.removeItem),clear:an(localStorage.clear),getAll:an((()=>({...localStorage}))),getMany:an((t=>st(localStorage,t))),setMany:an((t=>{Object.assign(localStorage,t)}))}:{getItem:t=>Ge("localStorageGetItem",t),setItem:(t,e)=>Ge("localStorageSetItem",t,e),removeItem:t=>Ge("localStorageRemoveItem",t),clear:()=>Ge("localStorageClear"),getAll:()=>Ge("localStorageGetAll"),getMany:t=>Ge("localStorageGetMany",t),setMany:t=>Ge("localStorageSetMany",t)},sn=i.hL1?tn:i.UMQ?Xe:rn,cn=(Je.IndexedDb,Je.LocalStorage,Je.ExtensionLocal,Je.CapacitorStorage,0);let un;const dn=new Promise((t=>{un=t}));let ln;function fn(){return ln}function mn(t){ln=t}async function pn(t){const e=(await async function(){return Object.keys(await sn.getItem("accounts")||{})}()).map((t=>P(t).id));return O({id:0===e.length?cn:Math.max(...e)+1,network:t})}async function wn(t,e){return(await yn(t))[e].address}async function hn(t){return(await yn(t)).ton}async function gn(t){return(await yn(t)).tron}function yn(t){return En(t,"accounts")}function vn(){return sn.getItem("accounts")}async function An(t,e){return In(t,"accounts",{...await yn(t),...e})}async function bn(t,e){return An(t,{ton:{...await hn(t),...e}})}async function En(t,e){var n;return null===(n=await sn.getItem(e))||void 0===n?void 0:n[t]}async function Sn(t,e){const n=await sn.getItem(e);if(!n)return;const{[t]:r,...a}=n;await sn.setItem(e,a)}async function In(t,e,n){const r=await sn.getItem(e);await sn.setItem(e,{...r,[t]:n})}async function kn(t,e){const n=await sn.getItem(e);if(n){for(const e of Object.keys(n))P(e).network===t&&delete n[e];await sn.setItem(e,n)}}async function Bn(){const t=await Dn();if(t)return P(t).network}function Dn(){return sn.getItem("currentAccountId")}const _n=[{name:"PBKDF2"},!1,["deriveBits","deriveKey"]],Tn={name:"PBKDF2",iterations:1e5,hash:"SHA-256"},Cn={name:"AES-GCM",length:256};function Rn(t){return F.JB(t.join(" "))}async function xn(t,e){const n=t.join(","),r=crypto.getRandomValues(new Uint8Array(16)),a=await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),..._n),o=await crypto.subtle.deriveKey({salt:r,...Tn},a,Cn,!1,["encrypt"]),s=crypto.getRandomValues(new Uint8Array(12)),i=(new TextEncoder).encode(n),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},o,i),u=Array.from(new Uint8Array(c)),d=btoa(String.fromCharCode(...u)),l=Array.from(s).map((t=>`00${t.toString(16)}`.slice(-2))).join("");return`${Array.from(r).map((t=>`00${t.toString(16)}`.slice(-2))).join("")}:${l}:${d}`}async function Pn(t,e){if(!t.includes(":"))return async function(t,e){const n=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",n),a=t.slice(0,24).match(/.{2}/g).map((t=>parseInt(t,16))),o={name:"AES-GCM",iv:new Uint8Array(a)},s=await crypto.subtle.importKey("raw",r,o,!1,["decrypt"]),i=atob(t.slice(24)),c=new Uint8Array(i.match(/[\s\S]/g).map((t=>t.charCodeAt(0)))),u=await crypto.subtle.decrypt(o,s,c);return(new TextDecoder).decode(u).split(",")}(t,e);const[n,r,a]=t.split(":"),o=new Uint8Array(n.match(/.{2}/g).map((t=>parseInt(t,16)))),s=new Uint8Array(r.match(/.{2}/g).map((t=>parseInt(t,16)))),i=await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),..._n),c=await crypto.subtle.deriveKey({salt:o,...Tn},i,Cn,!1,["decrypt"]),u=atob(a),d=new Uint8Array(u.match(/[\s\S]/g).map((t=>t.charCodeAt(0)))),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},c,d);return(new TextDecoder).decode(l).split(",")}async function On(t,e,n){try{const{mnemonicEncrypted:r}=n,a=await Pn(r,e);return r.includes(":")||await async function(t,e,n){try{const r=await xn(e,n),a=await Pn(r,n).catch((()=>{}));if(!n||!a)return{error:x.QD.DebugError};await An(t,{mnemonicEncrypted:r})}catch(t){console.error(t)}}(t,a,e),a}catch(t){return void console.error(t)}}function Un(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.timestamp-e.timestamp;return 0===r&&(r=t.id>e.id?1:t.id<e.id?-1:0),n?r:-r}function Nn(t){const[e,n,r]=t.split(":");return{hash:e,type:r,subId:n}}function Fn(t,e){return Mn(t,e,"local")}function Mn(t,e,n){return n||void 0!==e?void 0===n?`${t}:${e}`:`${t}:${null!=e?e:""}:${n}`:t}function Wn(t){switch(t.kind){case"transaction":return[t.slug];case"swap":return[t.from,t.to]}}(0,n(19314).A)((function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(t)return t.length<=e+n+3?t:`${t.slice(0,e)}...${t.slice(-n)}`})),new Map,new Set(["stake","unstake","unstakeRequest"]),new Set(["dnsChangeAddress","dnsChangeSite","dnsChangeStorage","dnsChangeSubdomains","dnsDelete","dnsRenew"]);var Kn=n(68354),jn=n(45232);const qn=500,Ln=100;let zn;function Hn(t){if(!zn){const t={...Dt().apiHeaders,"Content-Type":"application/json"};zn={mainnet:new Kn.jI(new Kn.Qq({baseUrl:i.lHX,baseApiParams:{headers:t},customFetch:jn.J5})),testnet:new Kn.jI(new Kn.Qq({baseUrl:i.SKs,baseApiParams:{headers:t},customFetch:jn.J5}))}}return zn[t]}async function Jn(t,e){return(await Hn(t).accounts.getAccountJettonsBalances(e,{supported_extensions:["custom_payload"]})).balances}async function Vn(t,e){return(await Hn(t).nft.getNftItemsByAddresses({account_ids:e})).nft_items}function $n(t){return 1e3*t}function Qn(t){return Math.floor(t/1e3)}const Gn="https://ipfs.io/ipfs/";function Zn(t){t=Xn(t);const e=`${i.HUv}/utils/download-json?url=${t}`;return i.UMQ?Yn(e):Yn(t).catch((()=>Yn(e)))}function Xn(t){return t.replace("ipfs://",Gn)}async function Yn(t){const e=await fetch(t);if(!e.ok)throw Error(`Http error ${e.status}`);return e.json()}var tr=n(50110),er=n(53528),nr=n(62386),rr=n(65871),ar=n(66902),or=n(56906),sr=n(97590);const ir=function(t){for(const e in t)if(t.hasOwnProperty(e))return!1;return!0},cr=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,ur=/[\0-\x08\x0E-\x1F\x7F-\x84\x86-\x9F\u0300-\u034E\u0350-\u035B\u0363-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u200C\u200E\u200F\u202A-\u202E\u2066-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3035\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFFF9-\uFFFB]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDCA-\uDDCC\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E\uDCA0-\uDCA3]|\uD834[\uDD65-\uDD69\uDD6D-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDC01\uDC20-\uDC7F\uDD00-\uDDEF]/g,dr=/[\n\r]/g,lr=/[\u0702\u0701\u2024\u00B7\u02D9\u0971\u1427\u18DF\u22C5\u2027]/g,fr=/[\u200B-\u200D\uFEFF\u2063]/g,mr=/^(?:[~`!@#%^&*(){}[\];:"'<,.>?/\\|_+=-]|[a-zA-Z0-9\s])+$/,pr=new Map([[" "," "],["0","â“¿"],["1","11â“µâŠâ‘´Â¹ğŸğŸ™ï¼‘ğŸ·ğŸ£â’ˆğŸ­1â€â‚â‘ â¶â¥ "],["2","â“¶â’‰â‘µâ‹Æ»Â²á’¿ğŸšï¼’ğŸ®ğŸ¤á’¾ğŸ¸Æ§ğŸâ‘¡á´¤â‚‚ââ·á˜Æ¨"],["3","Â³Èáƒ³â³Œê«ğŸ‘â„¨ğŸ›ğŸ¯ğŸ¥êªâŒĞ—Èœâ“·Ó Æ·ï¼“ğŸ¹â‘¶â’ŠÊ’Ê“Ç¯Ç®Æºğ•´á¶¾Ğ·á¦¡â‚â‘¢â‚ƒá¶šá´£á´Ÿâ¸Ò˜Ò™Ó¬Ó¡Ó­ÓŸÓ"],["4","ğŸ°ğŸºğŸ¦ğŸ’âÒ¶áğŸœÒ·â“¸Ò¸Ò¹Ó´Óµá¶£ï¼”Ñ‡ã„©â´âƒâ‚„â‘£â¹Ó‹â‘·â’‹"],["5","ğŸ±â“¹âÆ¼ğŸ“ğŸ»ğŸğŸ§ï¼•â„â‚…â‘¤âµâºÆ½â‘¸â’Œ"],["6","â³’ğŸ„‡ğŸ¼á®ğŸ²ğŸğŸ¨ğŸ”ââ“ºÏ¬Ï­â¶Ğ±ï¼–á§ˆâ‘¥â…â‚†â»â‘¹â’"],["7","ğŸ•ğŸŸğŸ©ğŸ³ğŸ½ğŸ„ˆâ“»ğ“’âï¼—â·â‘¦â‚‡â¼â†â‘ºâ’"],["8","ğŒšğŸ„‰â‘â“¼ï¼˜ğŸ ğŸªà§ªâ¸â‚ˆğŸ´â‡â‘§â½ğŸ¾ğŸ–â‘»â’"],["9","àµ­ê®ğ‘ğ‹ğŸ…ğŸ„ŠğŸ¡ğŸµâ³Šâ“½â’à©§à§­à­¨ï¼™ğŸ«ğŸ¿ğŸ—â¹â‚‰Ô³âˆâ‘¨â¾â‘¼â’"],["10","â“¾â¿â‰â“ğŸ”Ÿâ‘©â‘½â’‘"],["11","â‘ªâ‘¾â’’â“«"],["12","â‘«â‘¿â’“â“¬"],["13","â‘¬â’€â’”â“­"],["14","â‘­â’â’•â“®"],["15","â‘®â’‚â’–â“¯"],["16","â‘¯â’ƒâ’—â“°"],["17","â‘°â’„â’˜â“±"],["18","â‘±â’…â’™â“²"],["19","â‘²â’†â’šâ“³"],["20","â‘³â’‡â’›â“´"],["ae","Ã¦"],["OE","Å’"],["oe","Å“"],["pi","á’†"],["Nj","Ç‹"],["AE","á´"],["A","ğ‘¨ğ”„á—„ğ– ğ—”ê“¯ğğŸ„ğŸ„°á¯ğŠ ğ•¬ğœœğ´ê“®áªğš¨ê­ºğ–ğŸ…â„«âˆ€ğŸ‡¦â‚³ğŸ…°ğ’œğ˜ˆğ€ğ”¸Ğ´Çºá—…â’¶ï¼¡Î‘á¾‹á—©Ä‚ÃƒÃ…ÇÈ€È‚Ä€ÈºÄ„ÊŒÎ›Î»Æ›á´€á´¬Ğ”ĞáˆÃ„â‚á•±ÂªÇÓ’Î†áº áº¢áº¦áº¨áº¬áº®áº°áº²áº´áº¶á¾¸á¾¹á¾ºá¾»á¾¼á¾ˆá¾‰á¾Šá¾Œá¾á¾á¾á¼ˆá¼‰á¼Šá¼‹á¼Œá¼á¼á¼á¸€È¦Ç ÓÃ€ÃÃ‚áº¤áºªğ›¢ğ“ğ™°ğ˜¼á—©"],["a","âˆ‚âºâ“Õ±ÇŸáµƒá¶â’œĞ°É’ï½Î±ÈƒÈà¸„Çáƒ›Ã¤É‘ÄÉÄ…á¾„áºšáº¡áº£Ç¡áº§áºµá¸È§Ó‘Ó“Ã£Ã¥Î¬á½°á½±Äƒáº©áº±áº³áº·á¾€á¾á¾‚á¾ƒá¾…á¾†á¾°á¾±á¾²á¾³á¾´á¶á¾¶á¾·á¼€á¼á¼‚á¼ƒá¼„á¼…á¼†á¼‡á¾‡áº­áº¯Ã Ã¡Ã¢áº¥áº«Ç»â±¥ğšğ‘ğ’‚ğ’¶ğ“ªğ”ğ•’ğ–†ğ–ºğ—®ğ˜¢ğ™–ğšŠğ›‚ğ›¼ğœ¶ğ°ğªâ¶"],["B","ğŸ„‘ğ”™ğ–êµğ›ƒğ›½ğœ·ğ±ğ«á°ğŒğ‘©ğ•­ğŸ„±ğŠ¡ğ–¡ğ˜½ê“ğ—•ğ˜‰ğœğŠ‚ğš©ğğ›£ğ—ğµğ™±ğ”¹á´á¼ğ‘ê´ğ”…ğŸ…‘à¸¿ğ“‘á—¿á—¾á—½ğŸ…±â’·ï¼¢Ğ²Ïá—·Æä¹ƒÃŸáƒªáƒ©à¹–Î²É®Ğ‘Õ…à¹’á™–Ê™á´®áµ‡áŒŒá¸„â„¬Î’Ğ’áºá¸‚á¸†Éƒà´¦á—¹á—¸áµá™á™Ÿá™á›’á™—á™˜á´ƒğŸ‡§"],["b","ê®Ÿáğ›ğ˜£ğ’·ğ”Ÿğ“«ğ–‡ğ–»ğ‘ğ™—ğ•“ğ’ƒğ—¯ğš‹â™­á‘³á’ˆï½‚á–šá•¹á•ºâ“‘á¸ƒá¸…ÒÑŠá¸‡ÆƒÉ“Æ…á–¯Æ„Ğ¬á‘²Ã¾Æ‚â’Ğªá¶€á‘¿á’€á’‚á’á‘¾ÑŒÆ€ÒŒÑ¢Ñ£á”"],["C","ê†á‚ â„ƒğŸ„’áŸâ²¤ğŸ„²ê“šğŠ¢ğŒ‚ğŸ…²ğ•ğŸ…’â˜¾ÄŒÃ‡â’¸ï¼£â†ƒÆ‡á‘•ã„ˆÂ¢à¥®â†»ÄˆÏ¾Õ‡È»á™…á¶œâ’Ä†Ò€ÄŠÂ©à¤ŸÆ†â„‚â„­Ï¹Ğ¡åŒšá¸ˆÒªÊ—á‘–á‘¡á‘¢á‘£á‘¤á‘¥â…­ğ‚ğ¶ğ‘ªğ’ğ“’ğ•®ğ–¢ğ—–ğ˜Šğ˜¾á”"],["c","ğŸŒï½ƒâ…½ğœğ‘ğ’„ğ’¸ğ“¬ğ” ğ•”ğ–ˆğ–¼ğ—°ğ˜¤ğ™˜ğšŒá´„Ï²â²¥Ñê®¯ğ½â²¥ğ½ê®¯Ä‰ï½ƒâ“’Ä‡ÄÄ‹Ã§ÒÆˆá¸‰È¼â†„Ñáˆ­á´„Ï²Ò«ê’Ï‚É½Ï›ğ™²á‘¦á§šğœğ‘ğ’„ğ’¸ğ“¬ğ” ğ•”ğ–ˆğ–¼ğ—°ğ˜¤ğ™˜ğšŒâ‚µğŸ‡¨á¥´á’¼â…½"],["D","ğŸ„“á ğŸ„³ğ”¡ğ–‰ğ”»ğ——ğ˜‹ğ™³ğ·ğ““ğƒğ‘«ğ•¯ğ–£ğ”‡ğ˜¿ê­°â……ğ’Ÿê““ğŸ…³ğŸ…“â’¹ï¼¤Æ‰á—ªÆŠÃÔºá´…á´°â†á¸ŠÄÃâ…®á—á‘¯Äá¸Œá¸á¸’á¸á—«á—¬á—Ÿá— á¶›á´†ğŸ‡©"],["d","á§ğ”¡ğ–‰á‘¯ê“’ğ“­áµ­â‚«Ôƒâ““ï½„á¸‹Äá¸á¸‘á¸“á¸Ä‘ÆŒÉ–É—áµˆâ’ŸÔâ…¾á¶Ô€á‘ºá‘»á‘¼á‘½á’„á‘°á‘±á¶‘ğ••ğ–½ğ‘‘ğ˜¥ğ’…ğ™™ğğ—±ğšâ…†ğ’¹Ê Õª"],["E","Â£á™“â‹¿âˆƒâ´ºê“±ğ„ğ¸ğ”ˆğ•°ğ–¤ğ˜Œğ™´ğ›¦ğœ ê­¼ğŸ„”ğŸ„´ğ™€ğ”¼ğŠ†ğš¬ê“°ğšğ”ğ“”ğ‘¬ğ—˜ğŸ…´ğŸ…”â’ºÎˆï¼¥Æá¼á•®Æãƒ¢Ğ„á´‡á´±áµ‰Ã‰ä¹‡ĞÉ†ê‚…â‚¬Ãˆâ„°Î•Ğ•â´¹á¬Ä’Ä”Ä–Ä˜ÄšÃŠÃ‹Ôá»€áº¾á»„á»‚áº¼á¸”á¸–áººÈ„È†áº¸á»†È¨á¸œá¸˜á¸šá¼˜á¼™á¼šá¼›á¼œá¿ˆá¿‰Ó–á½²á½³Ğ€ÏµğŸ‡ª"],["e","É™Ó™â…‡ê¬²ê“â‹´ğ›†ğ›œğœ€ğœ–ğœºğğ´ğŠğ®ğŸ„â²‰ê®›ğ©ê’â²ˆâ·ğ‘’ğ“®ğ•–ğ–Šğ˜¦ğ—²ğšğ™šğ’†ğ”¢ğ–¾ğÒ¾Ò¿â“”ï½…â’ Ã¨á§‰Ã©á¶’ÃªÉ˜á¼”á»áº¿á»…à«¯ÇÑ”ÎµÄ“Ò½É›á»ƒáº½á¸•á¸—Ä•Ä—Ã«áº»Ä›È…È‡áº¹á»‡È©É‡â‚‘Ä™á¸á¸™á¸›â„®ĞµÔ‘ÑÓ—á¥±Ñ‘á¼á¼‘á¼’á¼“á¼•â„¯"],["F","á–µê˜˜ê“êŸ»á–·ğ…ğ¹ğ‘­ğ”½ğ•±ğ–¥ğ—™ğ™ğ™µğŸŠâ„‰ğŸ„•ğŸ„µğŠ‡ğ”‰ğ˜ğŠ¥ê“ê˜ğŸ…µğŸ…•ğ“•â’»ï¼¦Ò“Ò’á–´Æ‘Ô²Ïá‰»á¸â„±Ïœâ‚£ğŸ‡«â„²"],["f","ğŸáµ®ğ‘“ğ’‡ğ’»ğ“¯ğ”£ğ•—ğ–¿ğ—³ğ™›ğšê¬µê™áºğ–‹â“•ï½†Æ’á¸ŸÊƒÕ¢á¶ â’¡Å¿êŠ°Ê„âˆ±á¶‚ğ˜§"],["G","ğ—šğ˜ğŸ„–ê“–á³ğŸ„¶á€á»ğ”¾ğ“–ğ‘®ğ•²ê®ğ’¢ğ™‚ğ–¦ğ™¶ğ”Šğºğ†ğŸ…¶ğŸ…–â’¼ï¼§É¢Æ“Ê›Ä¢á˜œá´³Ç´Ä ÔŒÄœá¸ ÄÇ¦Ç¤Ôâ‚²ğŸ‡¬â…"],["g","á¶ƒá¶¢â“–ï½‡ÇµÄá¸¡ÄŸÄ¡Ç§Ä£Öà«­Ç¥É ï»­ï»®áµâ’¢â„ŠÉ¡á§ğ ğ‘”ğ’ˆğ“°ğ”¤ğ•˜ğ–Œğ—€ğ—´ğ˜¨ğ™œğš"],["H","á¼¬ğŸ„—ğ†¦ğŸ„·ğœ¢ê“§ğ˜ğ»ğœğ–§ğ‹ğ—›ê®‹â„á»â„Œâ²ğ‘¯ğ–ğŸ…·ğŸ…—á‹Ç¶Ô‹â’½ï¼¨Ä¤ášºá¸¢á¸¦Èá¸¤á¸¨á¸ªÄ¦â±§Ò¢Ò£Ò¤á¿Šá¿‹á¿Œá¼¨á¼©á¼ªá¼«á¼­á¼®á¼¯á¾˜á¾™á¾šá¾›á¾œá¾á¾á¾ŸÓ‰ÓˆÒ¥Î‰Ğ½å„â™“ğ“—â„‹Ğğ‡ğ™ƒğ™·Êœğ›¨Î—ğš®á•¼Ó‡á´´áµ¸ğŸ‡­"],["h","ê•à§¸ğ•³êš•á²â„ÓŠÔŠêœ§á‚Òºâ’£Ñ’â“—ï½ˆÄ¥á¸£á¸§ÈŸá¸¥á¸©á¸«áº–Ä§â±¨Õ°Ò»áŠ¨áŠ©áŠªáŠ«É¦â„ğ¡ğ’‰ğ’½ğ“±ğ”¥ğ•™ğ–ğ—ğ—µğ˜©ğ™ğš‘Õ«Ê°á‘‹á—É§ã‚“É¥"],["I","â²’á¼¿ğŸ„˜ğŸ„¸Ğ‡ê€¤á†ğŸ…¸ğŸ…˜Ø¥ïº‡Ù³Ø£ïºƒÙ²Ùµâ’¾ï¼©áŸ¸ÃŒÃÃÄ¨ÄªÄ¬Ä°Ãá¸®á»ˆÇÈˆÈŠá»ŠÄ®á¸¬Æ—ã‚§ã‚¨á¿˜á¿™á¿šá¿›á¼¸á¼¹á¼ºá¼»á¼¼á¼½á¼¾â… ÎªÎŠÉªá¶¦á‘Šá¥£ğ›ªğˆğ™„ğ™¸ğ“µğ™¡ğ¼á´µğš°ğ‘°ğŸ‡®"],["i","â³â„¹â…ˆğ‘–ğ’Šğ’¾Ä±ğš¤É©Î¹á¾¾Íºğ›Šğœ„ğœ¾ğ²ê™‡Óê­µá¥â“˜ï½‰Ã¬Ã­Ã®Ä©Ä«Ä­Ã¯á¸¯á»‰ÇÈ‰È‹á»‹á¸­á¿á¿‘á¿’á¿“á¿–á¿—á¼°á¼±á¼²â…°â…¼âˆ£âµï¿¨×€Ø§Ù¡Û±ßŠá›á¼³á¼´á¼µÉ¨Ñ–á½¶á½·á¶–ğ”¦ğš’ğ¸ğ—‚ğ¢ğ•šğ–ğ—¶ğ˜ªğ™Î¯â±áµ¢ğ“²â’¤"],["J","ğ‰ğ½ğ‘±ğ’¥ğ“™ğ”ğ•ğ•µğ–©ğ—ğ˜‘ğ™…ğ™¹ê²Í¿ê“™ğŸ„™ğŸ„¹ğŸ…¹ğŸ…™â’¿ï¼ªĞˆÊá’× ï¾ŒÄ´Ê†à¸§Ù„ÕµÊ–á´Šá´¶ï»áŒ‹Éˆâ±¼Õ‚à¹…á‚±Ä¯á«È·ä¸¿â„â„‘á’˜á’™á’šá’›á’´á’µá’á’ğŸ‡¯"],["j","ğš¥ê­»â…‰â“™ï½ŠÏ³Ê²â’¥É‰ÄµÇ°Ñ˜Ú¶á¶¨ğ’¿ğ˜«ğ—·ğ‘—ğ™Ÿğ”§ğ’‹ğ—ƒğ“³ğ•›ğš“ğ–ğ£"],["K","ğŠê„ê€ğ¾ğ‘²ğ“šğ•¶ğ–ªğ™ºğš±ğŸğŸ„šğ—ğŸ„ºğœ¥ğ˜’ê“—ğ™†ğ•‚â²”ğ”ğ›«á¦ğ™ğ’¦ğŸ…ºğŸ…šâ‚­â“€ï¼«Ä¸á¸°ÑœÆ˜ĞºÒ ÎºÒ›ÒŸÓ„ÊÒšĞšÒ¡á´‹á´·áµâ’¦á›•ĞŒáŒ•á¸²Îšâ„ªÒœÒÒÄ¶á¸´Ç¨â±©Ï—ÓƒğŸ‡°"],["k","â“šêï½‹á¸±Ç©á¸³Ä·á¸µÆ™â±ªá¶„ğ¤ğ˜¬ğ—„ğ•œğœ…ğœ˜ğœ¿ğ’ğ¹ğŒğ³ğ™ ğš”ğ‘˜ğ’ŒÏ°ğ›‹ğ›ğŸ†ğ—¸ğ“´ğ“€"],["L","ğ‹ğ¿ğ”ğ•ƒğ•·ğ–«ğ—Ÿğ˜“ğ™‡ï´¼ğŸ„›ğŸ„»ğ›â³ğ‘³ğ™»ğ‘ƒğ“›â³‘ê®®áê“¡ğŸ…»ğŸ…›ïºˆâ””â“Ö‚ï¼¬Ä¿á’ªä¹šÕ†ÊŸê“¶Î¹Ô¼á´¸Ë¡Ä¹áˆ¨á¸¶â‚—Î“Õ¬Ä»á„‚â…¬â„’â±¢á¥§á¥¨á’»á’¶á’·á¶«ïºá’ºá’¹á’¸á’«â³ã„¥Åâ± ïº„È½ğŸ‡±"],["l","â“›ï½ŒÅ€ÄºÄ¾á¸·á¸¹Ä¼Ó€â„“á¸½á¸»Å‚ï¾šÉ­ÆšÉ«â±¡|Æ–â’§Ê…Ç€×•×ŸÎ™Ğ†ï½œá¶©Óğ“˜ğ•€ğ–¨ğ—œğ˜ğ¥ğ‘™ğ’ğ“ğ”©ğ•ğ–‘ğ—…ğ—¹ğ˜­ğš•ğœ¤ğÄ±ğš¤É©á¾¾ğ›Šğœ„ğœ¾ğ²"],["M","ê®‡ğŸ„œğŸ„¼ğŒ‘ğŠ°ê“Ÿâ²˜á·ğŸ…¼ğŸ…œâ“‚ï¼­Ğ¼á¹‚àµ±á—°å·á˜»áƒà¹“â™Êá™á´á´¹áµâ’¨á¸¾Ğœá¹€à¯±â…¯â„³ÎœÏºá›–ÓÓğŒğ‘€ğ‘´ğ“œğ”ğ•„ğ•¸ğ–¬ğ— ğ˜”ğ™ˆğ™¼ğš³ğ›­ğœ§ğ¡ğ›ğŸ‡²"],["m","â‚¥áµ¯ğ–’ğ¦ğ—†ğ”ªğ•ğ“‚â“œï½à´¨á™¢àµ©á¸¿á¹â…¿Ï»á¹ƒáŒ É±áŸ³á¶†ğ™¢ğ“¶ğš–ğ‘šğ—ºá§•á§—"],["N","ğ‡™ğ‡šğ‡œğŸ„ğ†§ğ™‰ğŸ„½â„•ê“ ğ›®ğ¢ğ™½ğš´ğ‘µğ‘â²šğğ’©ğœğ—¡ğ˜•ğœ¨ğ“ğ–­ğŸ…½â‚¦ğŸ…Ğ™Ğâ“ƒÒ‹áŸ·ï¼®á´É´Æá‘å‡ Ğ¸ÕˆÕ¼Ğ˜×”Ğ›Ï€á´ºá¶°Åƒåˆ€áŠ­á¹„â¿Ã‘ĞŸÎá´¨Õ¸Ï–Ç¸Å‡á¹†Å…á¹Šá¹ˆà¸—ÅŠÓ¢Ó£Ó¤Ó¥Ñ›ÑĞ¹á¥¢ÒŠá´»ğŸ‡³"],["n","Õ¸Õ¼×—ğ’ğ“·ğ™£ğ‘›ğ–“ğ”«ğ—‡ğš—ğ—»á¥’â“Î®ï½Ç¹á´’Å„Ã±á¾—Î·á¹…Åˆá¹‡É²Å†á¹‹á¹‰Õ²àº–ÕŒÆÅ‹â’©à¸ à¸É³Ğ¿Å‰Ğ»Ô‰È á¼ á¼¡á¿ƒÕ¤á¾á¾‘á¾’á¾“á¾”á¾•á¾–á¿„á¿†á¿‡á¿‚á¼¢á¼£á¼¤á¼¥á¼¦á¼§á½´á½µá‰ á‰¡á‰¢á‰£á‰¤á‰¥á‰¦Èµğ›ˆğœ‚ğœ¼ğ¶ğ°ğ•Ÿğ˜¯ğ§ğ“ƒá¶‡áµ°á¥¥âˆ©"],["O","ğœ½â­˜ğŸ”¿ê­´â­•âºğŸ„ğŸ„€á¤ğš¯ğš¹ğ›©ğ›³ğœ£ğœ­ğğ§ğ—ğ¡â´±á¾á«â¬ğ±ğ·ğ›‰ğŸğœƒÎ¸ğŸ˜ğ‘‚ğ‘¶ğ“ğ”’ğ•†ğ•ºğ—¢ğ˜–ğ™Šğ›°ãˆ‡ê„²ğŸ„ğŸ”¾ğŸ„¾ğŠ’ğŸ¬ê“³â²ğ„ğŠ«ğ“‚ğğŸ…â¥â—¯âµâŠ–ï¼âŠğ¤Ñ²Ï´ğš¶ğœªÑºÓ¦Ó¨ÓªÎŒÊ˜ğÇ‘Ã’ÅÃ“Ã”Ã•ÈŒÈã‡¿ââ“„ï¼¯á½‹ãƒ­â¤à«¦âŠ•Ã˜Ğ¤Ô¾Î˜Æ á´¼áµ’â’ªÅÃ–â‚’Â¤â—ŠÎ¦ã€‡ÎŸĞÕ•à¬ à´ à¯¦×¡á»’á»á»–á»”á¹ŒÈ¬á¹ÅŒá¹á¹’È®È°Èªá»á»œá»šá» á»á»¢á»Œá»˜ÇªÇ¬Ç¾ÆŸâµ”ß€áŸ°âœâ”â•â¦°â¦±â¦²â¦³â¦´â¦µâ¦¶â¦·â¦¸â¦¹â¦ºâ¦»â¦¼â¦½â¦¾â¦¿â§€â§â§‚â§ƒá½ˆá½‰á½Šá½Œá½"],["o","à°‚à²‚à´‚à¶‚à«¦à¯¦Ûµâ„´ğ‘œğ’ğ–”ê¬½ğ„ğ›”ğœğˆğ‚áƒ¿ğš˜à§¦à­¦á‹ğ›ğ—ˆğ¼á€â²Ÿğ™¤á€ğ¬ğ”¬ğ“ªğ“¸ğŸ‡´â¤â—‹Ï™ğŸ…¾ğ’ªğ–®ğŸ¢ğŸ¶ğ™¾ğ˜°ğ—¼ğ• ğœŠğ¨ğ¾ğ¸á¤â“Ñ³á§á¥²Ã°ï½à° á¦Õ“Ã²Ó©Ó§Ã³ÂºÅÃ´Ç’ÈÅá»“á»‘Èá»—á»•ÃµÏƒá¹È­á¹á½„á¹‘á¹“È¯È«à¹á´Å‘Ã¶Ñ»Ğ¾á‹Ç­È±à§¦à­¦Ù¥à±¦à³¦àµ¦à¹à»Î¿Ö…á´‘à¥¦à©¦á»Æ¡á»á»›á»¡á»Ÿá»£á»á»™Ç«Ã¸Ç¿ÉµÕ®á½€á½ÏŒá½¸á½¹á½‚á½ƒá½…"],["P","ğŸ„ŸğŸ„¿ê“‘ğš¸ğ™¿ğ ğ™‹ê®²â²¢ğ’«ğ¦ğ‘ƒğ‘·ğ—£ğğŠ•ğœ¬ğ˜—ğ“Ÿğ–¯ğ›²á¢ğŸ…ŸÒğŸ…¿â“…ï¼°Æ¤á‘­å°¸á¹–Ö€Ï†Ö„á´˜á´¾áµ–â’«á¹”ï½±×§Ğ á‹¨á´©â±£â„™Î¡á¿¬á‘¸á‘¶á‘·á‘¹á‘¬á‘®ğŸ‡µâ‚±"],["p","â²£Òâ„—â“Ÿï½á¹•á¹—Æ¥áµ½á¿¥ÏÑ€Æ¿Ç·á¿¤â´ğ“¹ğ“…ğ©ğ‘ğ’‘ğ”­ğ•¡ğ–•ğ—‰ğ—½ğ˜±ğ™¥ğš™ğ›’ğ†ğºğœŒğ€"],["Q","ğŸ…€ğŸ„ ê–ğŸ†€ğŸ… â“†ï¼±â„šâµ•Ôšğğ‘„ğ‘¸ğ’¬ğ“ ğš€ğ˜˜ğ™Œğ–°ğ•¼ğ””ğ—¤ğŸ‡¶"],["q","ğ“†ê—ğ—¾â“ ï½‘Õ£â’¬Û¹Õ¦á‘«É‹ÉŠÔ›ğ—Šğ‘ğ˜²ğ•¢ğššğ’’ğ––ğªğ”®ğ“ºğ™¦"],["R","â„ğŸ„¡â„Ÿê­±á’ğ’´ê®¢á¡ê“£ğŸ†ğŸ…¡â“‡ï¼²á´™È’Ê€á–‡Ñå°ºÅ”Ğ¯àª°Æ¦á´¿á‹ªá¹šÉŒÊâ„›â„œâ„á¹˜Å˜Èá¹œÅ–á¹â±¤ğ‘ğ‘…ğ‘¹ğ“¡ğ•½ğ–±ğ—¥ğ˜™ğ™ğšáš±ğŸ‡·á´š"],["r","ğš›ê­‡á£´â„¾ğšªğ›¤ğœğ˜ğ’â²„Ğ“á±á’¥ê­ˆâ²…ê®â“¡ï½’Å•á¹™Å™È‘È“á¹›á¹Å—Ğ³ÕÉ¾á¥¬á¹ŸÉÊ³â’­É¼Ñ“á´¦á¶‰ğ«ğ‘Ÿğ’“ğ“‡ğ“»ğ”¯ğ•£ğ–—ğ—‹ğ—¿ğ˜³ğ™§áµ²Ò‘áµ£"],["S","ğŸ…‚ğŸ„ªğŸ„¢ê‡™ğ“¢ğ—¦ášğ’®á•ğš‚ğ’ê“¢ğ–²ğ”–ğ™ğŠ–ğ•¾ğ ğ˜šğ•Šğ‘†ğ‘ºğŸ†‚ğŸ…¢â“ˆï¼³á¹¨ÅÖ†ÕÈ˜Ë¢â’®Ğ…á¹ Å Åšá¹¤Åœá¹¦á¹¢à´Ÿá”•á”–á”¢á”¡á”£á”¤"],["s","á£µâ“¢êœ±ğ‘ˆê®ªï½“Å›á¹¥Åá¹¡Å¡á¹§Ê‚á¹£á¹©Ñ•ÅŸÈ™È¿á¶Šà°•ğ¬ğ‘ ğ’”ğ“ˆğ“¼ğ”°ğ•¤ğ–˜ğ—Œğ˜€ğ˜´ğ™¨ğšœŞğŸ‡¸"],["T","ğŸ…ƒğŸ„£ä¸ƒá’ğœ¯ğŸ†ƒğŒ•ğš»ğ›µğ•‹ğ•¿ğ‘»ğŠ±ğŠ—ğ–³ğ™ğŸ¨ğ©ğ£ğšƒğ˜›ğ‘‡ê“”âŸ™ğ“â²¦ğ—§âŠ¤ğ”—á¢ê­²ğ’¯ğŸ…£â‡â‰â“‰ï¼´Ñ‚Ò¬Ò­Æ¬ã‚¤Å¦ÔµÏ„á´›áµ€ï½²á•Ï®Å¤âŠ¥Æ®Î¤Ğ¢ä¸‹á¹ªá¹¬ÈšÅ¢á¹°á¹®ä¸…ä¸áªğ›•ğœğ‰ğƒğ½ğ“£ã„’ğŸ‡¹áŒ¥"],["t","â“£ï½”á¹«áº—Å¥á¹­È›È¶à©®Õ§Ê‡â€ Å£á¹±á¹¯Æ­Å§áµ—â’¯ÊˆÕ¥Æ«ğ­ğ‘¡ğ’•ğ“‰ğ“½ğ”±ğ•¥ğ–™ğ—ğ˜ğ˜µğ™©ğšãƒŠ"],["U","ğŸ…„ĞğŸ„¤áˆ€ê“´ğ“ê’¤ğŸ†„ğŸ…¤Å¨Å¬Å®á‘—á‘˜Ç“Ç•Ç—Ç™â“Šï¼µÈ–á‘Œå‡µÆ±Õ´Ô±ê“µĞ¦ÅªÕ„Æ²á™€áµáµ˜â’°Å°àªªÃœÕÃ™ÃšÃ›á¹¸á¹ºÇ›á»¦È”Æ¯á»ªá»¨á»®á»¬á»°á»¤á¹²Å²á¹¶á¹´É„á¥©á‘§âˆªá˜®â‹ƒğ”ğ‘ˆğ‘¼ğ’°ğ“¤ğ”˜ğ•Œğ–€ğ–´ğ—¨ğ˜œğ™ğš„ğŸ‡º"],["u","ğ˜‚ğ˜¶ğ™ªğšêŸê­ê­’ğ›–ğœğŠğ„ğ¾ğ“¶á½ºá½»â“¤ï½•Ã¹Å©Å«á»«á¹·á¹¹Å­Ç–á»¯á¥™ÇšÇœá½—Ï…Î°à¸™Õ½ÊŠÇ˜Ç”ÃºÅ¯á´œÅ±Å³à¸¢Ã»á¹»Ñ†áˆÃ¼áµ¾áµ¤ÂµÊ‹á»§È•È—Æ°á»©á»­á»±á»¥á¹³á¹µÊ‰á¿ á¿¡á¿¢á¿£á¿¦á¿§á½á½‘Ï‹Ïá½’á½“á½”á½•á½–á¥”ğ®ğ‘¢ğ’–ğ“Šğ“¾ğ”²ğ•¦ğ–šğ—á¶™"],["V","ğ‘‰ğ’±ğ•ğ—©ğŸ„¥ğŸ……ê“¦ğ‘½ğ–µğ˜á™ğš…ğ™‘ğ•ğŸ†…ğŸ…¥â“‹ï¼¶á¯Ñ´áµ›â’±Û·á¹¾â…´â…¤á¹¼Ù§â´¸Ñ¶áºá»ğŸ‡»ğ“¥"],["v","âˆ¨âŒ„â‹â…´ğ¯ğ‘£ğ’—ğ“‹ğ”³ğ•§ğ–›ğ—ê®©áˆ€â“¥ï½–ğœğŠá¹½á¹¿à±®à¸‡Ñµ×¢á´ Î½×˜áµ¥Ñ·áŸ´á˜ğ™«ğšŸğ›ğœˆğ‚ğ¼ğ¶ğ˜·ğ˜ƒğ“¿"],["W","ğ–ğ‘Šğ“¦ğ”šğ•ğ–‚ğ–¶ğ—ªğ™’ğš†ğŸ„¦ğŸ…†á”á³ğ‘¾ê“ªğ’²ğ˜ğŸ††â“ŒğŸ…¦ï½—ï¼·áº‚á¾§á—¯á¥•å±±Ñ àºŸà°šÕ¡Ğ©Ğ¨ÏÑ‰à¸¬Ñˆá™áµ‚Ê·â’²à¸áˆ áº„Ôœáº€Å´áº†áºˆà´§á˜ºÑ¿á™¡Æœâ‚©ğŸ‡¼"],["w","ğ°ê¡ğ‘¤ğ’˜ğ“Œğ”€ğ”´ğ•¨ğ–œğ—ğ˜„ğ˜¸ğ™¬ğš Õ¡áºê®ƒáºƒâ“¦âµÅµáº‡áº…áº˜áº‰â±³á½¼á½ á½¡á½¢á½£Ï‰á½¤á½¥á½¦á½§á¿²á¿³á¿´á¿¶á¿·â±²Ñ¡Ôá´¡á½½á¾ á¾¡á¾¢á¾£á¾¤á¾¥á¾¦É¯ğ•ğŸ‰ğ"],["X","ê­“ê­•ğ›˜ğœ’ğŒğ†ğŸ€â²­ğŸ¨ğ‘¿ğ›¸ğŸ„§ğŸ©ğŸªğŸ…‡ğŸ«ğŸ¬ğŒ—â²¬ê“«ğ–ƒğ¦ğ˜ŸğŠğš¾ğ¬ğœ²ê³ğŒ¢ğ–·ğ‘‹ğ•ğ”›ğŠ´ğ—«ğŸ†‡ğŸ…§âŒâ“ğ“§ï¼¸áºŠá™­Ï‡ã„¨ğ’³Ó¾áƒ¯Ó¼Ò³Ğ–Î§Ò²áµ¡Ë£â’³×áˆ¸áºŒêŠ¼â…©Ğ¥â•³á™®á•á•½â…¹áš·âµğ™“ğš‡ä¹‚ğ—ğŸ‡½"],["x","á™®â…¹ğ‘¥ğ’™ğ“ğ”µğ•©ğ–ğ—‘ğ˜…á•á•½â“§ï½˜Ñ…áº‹Ã—â‚“â¤«â¤¬â¨¯áºá¶ğ™­Ó½ğ˜¹ğ±ğš¡â¨°ï¾’ğ”"],["Y","ğ’´ğŸ„¨ğ“¨ğ”œğ–„ğ–¸ğ˜ ğ™”ğš¼ğ›¶ğªğ¤Ğ£á©á½â²¨ğšˆğ‘Œğ—¬ğ˜ê“¬ğ’€ğœ°ğŠ²ğŸ†ˆğŸ…¨â“ï¼¹á½›Æ³ã„šÊâ…„Ï”ï¿¥Â¥ÕÏ“Î³×¥Ó²Ğ§ĞáˆƒÅ¸ÉÏ¤Î¥Ï’Ò®á»²ÃÅ¶á»¸È²áºá»¶á»´á¿¨á¿©á¿ªá¿«á½™á½á½ŸÎ«ÎÓ®Ó°Ò°Ò±ğ•ğŸ‡¾"],["y","ğ²ğ‘¦ğ’šğ“ğ”‚ğ”¶ğ•ªğ–ğ—’ğ˜†ğ˜ºğ™®ğš¢Êá»¿ê­šÎ³â„½ğ›„ğ›¾ğœ¸ğ²ğ¬ğŸ…ˆá½á©â“¨ï½™á»³Ã½Å·á»¹È³áºÃ¿á»·Ñƒáƒ§áº™á»µÆ´ÉáµÉ£Ê¸á¶ŒÒ¯â’´Ó³Ó±Ó¯ÑĞ£Ê"],["Z","ğŸ„©ğŸ…‰ê“œğ—­ğ™â˜¡áƒğ˜¡ğŸ†‰ğŸ…©â“ï¼ºáº”Æµä¹™áºÈ¤á¶»â’µÅ¹â„¤Î–Å»Å½áº’â±«ğŸ‡¿"],["z","ğ‘ğ’ğ’µğ“©ğ–¹ğ™•ğš‰ğš­ğ›§ğœ¡ğ›ğ•áµ¶ê®“ğ³ğ‘§ğ’›ğ“ğ”ƒğ”·ğ•«ğ–Ÿğ—“ğ˜‡ğ˜»ğ™¯ğš£â“©ï½šÅºáº‘Å¼Å¾áº“áº•Æ¶È¥É€á´¢áŒŠÊâ±¬á¶Ê‘á™†"]]),wr=new Map,hr=new Map;for(const[t,e]of pr.entries()){wr.set(t,[...e]);for(const n of e)hr.set(n,t)}function gr(t){if(function(t){return mr.test(t)}(t))return t;let e="";for(const n of function(t){return t.replace(ur,"").replace(cr,"$1").replace(dr," ").replace(lr,".").replace(fr,"")}(t))e+=hr.get(n)||n;return e}const yr=400;async function vr(t,e,n){const{authToken:r,isAllowBadRequest:a,method:o,shouldRetry:s,retries:c,timeouts:u}=null!=n?n:{},d=new URL(`${i.HUv}${t}`),l={method:null!=o?o:"POST",headers:{"Content-Type":"application/json",...br(),...r&&{"X-Auth-Token":r}},body:JSON.stringify(e)},f=s?await(0,jn.J5)(d,l,{retries:c,timeouts:u,shouldSkipRetryFn:t=>!(null!=t&&t.includes("signal is aborted"))}):await fetch(d.toString(),l);return await(0,jn.EQ)(f,a?[yr]:void 0),f.json()}function Ar(t,e,n){const r=new URL(`${i.HUv}${t}`);return(0,jn.x6)(r,e,{headers:{...n,...br()}})}function br(){return{...Dt().apiHeaders,"X-App-Version":i.hl5,"X-App-Env":i.Guj}}let Er={},Sr=[],Ir=new Set,kr=new Set;async function Br(){try{const t=await Ar("/known-addresses");Er=t.knownAddresses,Sr=t.scamMarkers.map((t=>new RegExp(t,"i"))),Ir=new Set(t.trustedSites),kr=new Set(t.trustedCollections)}catch(t){(0,C.SJ)("tryUpdateKnownAddresses",t)}}function Dr(){return Er}function _r(t){return Er[t]}function Tr(t){return kr.has(t)}function Cr(t){const e=gr(t).matchAll(i.kNZ);for(const t of e){var n;const e=null===(n=t.groups)||void 0===n?void 0:n.host;if(e&&(r=e,!Ir.has(r.toLowerCase())))return!0}var r;return!1}var Rr=n(64143);const xr=new Set(["AbortError","BulkError","UnknownError"]);async function Pr(t){try{return await t()}catch(t){if(xr.has(null==t?void 0:t.name))return;throw t}}class Or{constructor(t){var e,n,r;e=this,r=void 0,(n=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(n="table"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this.table=t}all(){return this.table.toArray()}find(t){return Pr((()=>this.table.where(t).toArray()))}put(t){return Pr((()=>this.table.put(t)))}bulkPut(t){return Pr((()=>this.table.bulkPut(t)))}update(t,e){return Pr((()=>this.table.update(t,e)))}delete(t){return Pr((()=>this.table.delete(t)))}deleteWhere(t){return Pr((()=>this.table.where(t).delete()))}clear(){return Pr((()=>this.table.clear()))}}function Ur(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Nr extends Rr.Ay{constructor(){super("tables"),Ur(this,"nfts",void 0),Ur(this,"tokens",void 0),this.version(1).stores({nfts:"[accountId+address], accountId, address, collectionAddress"}),this.version(2).stores({sseConnections:"&clientId"}),this.version(3).stores({tokens:"tokenAddress, chain, &slug"})}}const Fr=new Nr,Mr=new Or(Fr.nfts),Wr=new Or(Fr.tokens);let Kr;const jr={},qr={baseCurrency:i.wOb,bySlug:{}};function Lr(t,e){var n;return null!==(n=jr[`${t}:${e}`])&&void 0!==n?n:{}}function zr(t,e,n){const r=`${t}:${e}`;jr[r]={...jr[r],...n}}function Hr(){return Kr}function Jr(){return qr}const Vr={...i.lfO};async function $r(t,e,n){const r=[];for(let e=0;e<t.length;e++){const n=t[e],a=Qr(n);n.slug in Vr||r.push(a),Vr[n.slug]=a,t[e]=a}await Wr.bulkPut(t),(n||r.length)&&e&&Yr(e)}function Qr(t){return{...Vr[t.slug]||{},...t}}function Gr(){return Vr}function Zr(t){return Gr()[t]}function Xr(t){return Zr(ta("ton",t))}function Yr(t){const e=Gr(),n=Jr(),r=Object.values(e).map((t=>{var e;return[t.slug,{...t,quote:null!==(e=n.bySlug[t.slug])&&void 0!==e?e:{slug:t.slug,price:0,priceUsd:0,percentChange24h:0}}]}));t({type:"updateTokens",tokens:Object.fromEntries(r),baseCurrency:n.baseCurrency})}function ta(t,e){return`${t}-${e.replace(/[^a-z\d]/gi,"").slice(0,10)}`.toLowerCase()}const ea=128,na={"wallet v1 r1":"simpleR1","wallet v1 r2":"simpleR2","wallet v1 r3":"simpleR3","wallet v2 r1":"v2R1","wallet v2 r2":"v2R2","wallet v3 r1":"v3R1","wallet v3 r2":"v3R2","wallet v4 r2":"v4R2","wallet v5 r1":"W5"};async function ra(t,e){return(await aa(t,"/addressBook",{address:e})).address_book[e]}function aa(t,e,n){const{apiHeaders:r,toncenterMainnetKey:a,toncenterTestnetKey:o}=Dt(),s=`${"testnet"===t?i.pyR:i._J8}/api/v3${e}`,c="testnet"===t?o:a;return(0,jn.x6)(s,n,{headers:{...c&&{"X-Api-Key":c},...r}})}var oa=n(48287).Buffer;const sa=1;const ia={parse:t=>{const e=oa.from(""),n=(t,e,r)=>{if(r&&0!==t.loadUint(8))throw new Error("Only snake format is supported");return e=oa.concat([e,t.loadBuffer(t.remainingBits/8)]),1===t.remainingRefs&&(e=n(t.loadRef().beginParse(),e,!1)),e};return n(t.loadRef().beginParse(),e,!0)},serialize:()=>{}},ca={uri:"ascii",name:"utf8",description:"utf8",image:"ascii",symbol:"utf8",decimals:"utf8",custom_payload_api_uri:"ascii"};async function ua(t){return st(await Zn(t),["name","description","symbol","decimals","image","image_data","custom_payload_api_uri"])}async function da(t,e,n){var r;const a=function(t){let e;e="string"==typeof t?oa.from(t,"base64"):t instanceof oa?t:oa.from(t);try{return ar.Cell.fromBoc(e)[0].beginParse()}catch(t){if("Invalid magic"!==(null==t?void 0:t.message))throw t}return new or.Slice(new er.BitReader(new nr.BitString(e,0,8*e.length)),[])}(n),o={type:"unknown",base64:n};return a&&null!==(r=await async function(t,e,n,r,a){let o;try{if(o=n.loadUint(32),o===ne.Comment){return{type:"comment",comment:ma(n).toString("utf-8")}}if(o===ne.Encrypted){return{type:"encrypted-comment",encryptedComment:ma(n).toString("base64")}}if(n.remainingBits<64)return;const r=n.loadUintBig(64);switch(o){case re.Transfer:{var s;const a=ta("ton",await Be(t,e).catch((()=>""))),o=n.loadCoins(),i=n.loadAddress(),c=n.loadMaybeAddress();if(!c)return{type:"tokens:transfer-non-standard",queryId:r,destination:Ce(i,void 0,t),amount:o,slug:a};const u=n.loadMaybeRef(),d=n.loadCoins();let l,f=n.loadMaybeRef();if(!f&&n.remainingBits){const t=(new rr.Builder).storeBits(n.loadBits(n.remainingBits));dt(0,n.remainingRefs).forEach((()=>{t.storeRef(n.loadRef())})),f=t.endCell()}if(f){const t=f.beginParse();t.remainingBits>32&&(l=t.loadUint(32))}return{type:"tokens:transfer",queryId:r,amount:o,destination:Ce(i,void 0,t),responseDestination:Ce(c,void 0,t),customPayload:null==u?void 0:u.toBoc().toString("base64"),forwardAmount:d,forwardPayload:null===(s=f)||void 0===s?void 0:s.toBoc().toString("base64"),forwardPayloadOpCode:l,slug:a}}case ae.TransferOwnership:{var c;const a=n.loadAddress(),o=n.loadAddress(),s=n.loadMaybeRef(),i=n.loadCoins(),u=fa(n),d=u?la(u.asSlice()):void 0;let l;{const[n]=await Vn(t,[e]);n&&(l=wa(t,n))}return{type:"nft:transfer",queryId:r,newOwner:Ce(a,void 0,t),responseDestination:Ce(o,void 0,t),customPayload:null==s?void 0:s.toBoc().toString("base64"),forwardAmount:i,forwardPayload:null==u?void 0:u.toBoc().toString("base64"),nftAddress:e,nftName:null===(c=l)||void 0===c?void 0:c.name,nft:l,comment:d}}case ae.OwnershipAssigned:{const a=n.loadAddress(),o=fa(n),s=o?la(o.asSlice()):void 0;let i;{const[n]=await Vn(t,[e]);n&&(i=wa(t,n))}return{type:"nft:ownership-assigned",queryId:r,prevOwner:Ce(a,void 0,t),comment:s,nftAddress:e,nft:i}}case re.Burn:{const a=await Be(t,e),o=ta("ton",a),s=n.loadCoins(),c=n.loadAddress(),u=n.loadMaybeRef(),d=a===i.Kzb;return{type:"tokens:burn",queryId:r,amount:s,address:Ce(c,void 0,t),customPayload:null==u?void 0:u.toBoc().toString("base64"),slug:o,isLiquidUnstakeRequest:d}}case oe.DistributedAsset:return{type:"liquid-staking:withdrawal-nft",queryId:r};case oe.Withdrawal:return{type:"liquid-staking:withdrawal",queryId:r};case oe.Deposit:{let t;return n.remainingBits>0&&(t=n.loadUintBig(64)),{type:"liquid-staking:deposit",queryId:r,appId:t}}case ie.AddWhitelist:{const e=n.loadAddress();return{type:"vesting:add-whitelist",queryId:r,address:await ra(t,e.toRawString())}}case ce.Withdraw:return{type:"single-nominator:withdraw",queryId:r,amount:n.loadCoins()};case ce.ChangeValidator:{const e=n.loadAddress();return{type:"single-nominator:change-validator",queryId:r,address:await ra(t,e.toRawString())}}case oe.Vote:{const t=n.loadAddress(),e=n.loadUint(48),a=n.loadBit(),o=n.loadBit();return{type:"liquid-staking:vote",queryId:r,votingAddress:Ce(t,!0),expirationDate:e,vote:a,needConfirmation:o}}case ue.ChangeRecord:{var u,d;const e=n.loadBuffer(32).toString("hex"),a=null!==(u=null===(d=Object.entries(we).find((t=>{let[,n]=t;return e===n})))||void 0===d?void 0:d[0])&&void 0!==u?u:"unknown",o=n.loadAddress(),s=await async function(t,e){"string"==typeof e&&(e=J.Address.parse(e));const n=Se(t).open(new pt(e)),r=(a=Ce((await n.getNftData()).collectionAddress,!0),i.TI6?i.gs5.find((t=>t.resolver===a&&!t.isUnofficial)):i.gs5.find((t=>t.resolver===a)));var a;return`${null!=r&&r.isTelemint?await n.getTelemintDomain():await n.getDomain()}.${null==r?void 0:r.suffixes[0]}`}(t,o);if("wallet"===a){if(n.remainingRefs>0){const e=n.loadRef().beginParse();n.endParse();const a=e.loadAddress(),o=e.loadUint(8);return{type:"dns:change-record",queryId:r,record:{type:"wallet",value:await ra(t,a.toRawString()),flags:o},domain:s}}return{type:"dns:change-record",queryId:r,record:{type:"wallet",value:void 0},domain:s}}if(n.remainingRefs>0){const t=n.loadRef();return{type:"dns:change-record",queryId:r,record:"unknown"===a?{type:"unknown",key:e,value:t.toBoc().toString("base64")}:{type:a,value:t.toBoc().toString("base64")},domain:s}}return{type:"dns:change-record",queryId:r,record:"unknown"===a?{type:"unknown",key:e}:{type:a},domain:s}}case le.TokenBridgePaySwap:return{type:"token-bridge:pay-swap",queryId:r,swapId:n.loadBuffer(32).toString("hex")};case ht.Hx.UNSTAKE_JETTONS:return{type:"jetton-staking:unstake",queryId:r,amount:n.loadCoins(),isForce:n.loadBoolean()}}}catch(t){if(i.Oig){var l;const e=a,n=`0x${null===(l=o)||void 0===l?void 0:l.toString(16).padStart(8,"0")}`;(0,C.SJ)("parsePayload",n,e,"\n",t)}}}(t,e,a))&&void 0!==r?r:o}function la(t){if(!(t.remainingBits<32)&&t.loadUint(32)===ne.Comment&&(t.remainingBits||t.remainingRefs))return ma(t).toString("utf-8")}function fa(t){var e;let n=t.loadBit()&&t.remainingRefs?t.loadRef():void 0;if(!n&&t.remainingBits){const e=(new rr.Builder).storeBits(t.loadBits(t.remainingBits));dt(0,t.remainingRefs).forEach((()=>{e.storeRef(t.loadRef())})),n=e.endCell()}return null!==(e=n)&&void 0!==e?e:void 0}function ma(t){let e=oa.alloc(0);for(;t.remainingBits>=8&&(e=oa.concat([e,t.loadBuffer(t.remainingBits/8)]),t.remainingRefs);)t=t.loadRef().beginParse();return e}function pa(t){const{image:e,id:n}=t;let r,a,o={};var s,i,c;(e&&(o.imageUrl=e),void 0!==n&&(o.mtwCardId=n),"attributes"in t&&Array.isArray(t.attributes)&&t.attributes.length&&(r=null===(s=t.attributes.find((t=>"Card Type"===t.trait_type)))||void 0===s?void 0:s.value.replace(/[^\x20-\x7E]/g,"").trim().toLowerCase(),r))&&(a=null===(i=t.attributes.find((t=>"Text"===t.trait_type)))||void 0===i?void 0:i.value.toLowerCase(),o.mtwCardType=r,"standard"===r&&(o.mtwCardBorderShineType=null===(c=t.attributes.find((t=>"Shine"===t.trait_type)))||void 0===c?void 0:c.value.toLowerCase()),o.mtwCardTextType="dark"===a||"silver"===r?"dark":"light",o=ct(o));return ir(o)?void 0:o}function wa(t,e){if(e.metadata)try{const{address:n,index:r,collection:a,metadata:o,previews:s,sale:c,trust:u,owner:d}=e,{name:l,image:f,description:m,render_type:p,lottie:w}=o,h=a&&Ce(a.address,!0,t);let g=!1;if(!h||!Tr(h))for(const t of[l,m].filter(Boolean))Cr(t)&&(g=!0);const y="whitelist"===u,v=g||"SCAM"===m||"blacklist"===u,A="hidden"===p||v,b=s.find((t=>"1500x1500"===t.resolution)).url,E=null==f?void 0:f.startsWith(i._Qu),S={...y&&{lottie:w},...h===i.qL&&pa(o),...E&&{fragmentUrl:f.replace(i.Pjb,"https://$1")}};return ct({index:r,name:l,ownerAddress:d?Ce(d.address,!1,t):void 0,address:Ce(n,!0,t),image:Xn(b||f||""),thumbnail:s.find((t=>"500x500"===t.resolution)).url,isOnSale:Boolean(c),isHidden:A,isScam:v,description:m,...a&&{collectionAddress:h,collectionName:a.name,isOnFragment:E||i.q5n.has(a.address)},metadata:S})}catch(t){return void(0,C.SJ)("buildNft",t)}}const ha="0000000000000000000000000000000000000000000000";async function ga(t){const{network:e,address:n,limit:r,toTimestamp:a,fromTimestamp:o,shouldIncludeFrom:s,shouldIncludeTo:i,walletAddress:c,includeTypes:u,excludeTypes:d}=t,{actions:l,address_book:f,metadata:m={}}=await aa(e,"/actions",{account:n,limit:r,start_utime:o&&Qn(o)+(s?0:1),end_utime:a&&Qn(a)-(i?0:1),sort:"desc",...(null==u?void 0:u.length)&&{action_type:u.join(",")},...(null==d?void 0:d.length)&&{exclude_action_type:d.join(",")}}),p=[];for(const t of l){const n=await ya(t,{network:e,action:t,addressBook:f,walletAddress:c,metadata:m});for(const t of n)p.push(t)}return p}function ya(t,e){const n=Fa(t),r={kind:"transaction",id:n,txId:n,timestamp:$n(t.end_utime),externalMsgHash:t.trace_external_hash,fee:0n};let a=[];switch(t.type){case"ton_transfer":a=[va(t,e,r)];break;case"call_contract":a=[Aa(t,e,r)];break;case"contract_deploy":a=[ba(t,e,r)];break;case"nft_transfer":a=[ka(t,e,r)];break;case"nft_mint":a=[Ba(t,e,r)];break;case"jetton_transfer":a=[Ea(t,e,r)];break;case"jetton_mint":a=[Sa(t,e,r)];break;case"jetton_burn":a=[Ia(t,e,r)];break;case"stake_deposit":a=[Da(t,e,r)];break;case"stake_withdrawal":a=[_a(t,e,r)];break;case"stake_withdrawal_request":a=[Ta(t,e,r)];break;case"jetton_swap":a=[Ca(t,e)];break;case"change_dns":case"delete_dns":case"renew_dns":a=[Ra(t,e,r)];break;case"auction_bid":a=[xa(t,e,r)];break;case"dex_deposit_liquidity":a=function(t,e,n){const{network:r,addressBook:a}=e,{details:o}=t,s={...n,fromAddress:a[o.source].user_friendly,toAddress:a[o.pool].user_friendly,normalizedAddress:Ce(o.pool,!0,r),isIncoming:!1,type:"liquidityDeposit"},i=[{...s,amount:-BigInt(o.amount_1),slug:Pa(a,o.asset_1)}];if(o.lp_tokens_minted){const e=Fa(t,"additional");i.push({...s,id:e,txId:e,amount:-BigInt(o.amount_2),slug:Pa(a,o.asset_2)})}return i}(t,e,r);break;case"dex_withdraw_liquidity":a=function(t,e,n){const{network:r,addressBook:a}=e,{details:o}=t,s={...n,fromAddress:a[o.pool].user_friendly,toAddress:a[o.source].user_friendly,normalizedAddress:Ce(o.pool,!0,r),isIncoming:!0,type:"liquidityWithdraw"},i=Fa(t,"additional");return[{...s,amount:BigInt(o.amount_1),slug:Pa(a,o.asset_1)},{...s,id:i,txId:i,amount:BigInt(o.amount_2),slug:Pa(a,o.asset_2)}]}(t,e,r)}for(const t of a){var o,s;t&&("nft"in t&&null!==(o=t.nft)&&void 0!==o&&o.isHidden&&(t.shouldHide=!0),"transaction"!==t.kind||t.isIncoming||null!==(s=t.shouldLoadDetails)&&void 0!==s||(t.shouldLoadDetails=!0))}return a.filter(Boolean)}function va(t,e,n){const{network:r,addressBook:a,walletAddress:o}=e,{details:s}=t,{encrypted:c}=s,u=a[s.source].user_friendly,d=a[s.destination].user_friendly,l=d===o,f=l?BigInt(s.value):-BigInt(s.value),m=Ce(l?u:d,!0,r),p=!c&&s.comment||void 0,w=c&&s.comment||void 0;return{...n,slug:i.Tu9.slug,amount:f,isIncoming:l,fromAddress:u,toAddress:d,normalizedAddress:m,comment:p,encryptedComment:w}}function Aa(t,e,n){const{network:r,addressBook:a,walletAddress:o}=e,{details:s}=t,c=a[s.source].user_friendly,u=a[s.destination].user_friendly,d=u===o,l=d?BigInt(s.value):-BigInt(s.value),f=Ce(d?c:u,!0,r),m=Number(s.opcode),p=!d&&[ne.OurFee,de.Ok].includes(m);let w;return pe.includes(m)?w="excess":4294967295===m?w="bounced":[se.UnstakeRequest,se.ClaimRewards].includes(m)?w="unstakeRequest":u!==o&&(w="callContract"),{...n,slug:i.Tu9.slug,amount:l,isIncoming:d,fromAddress:c,toAddress:u,normalizedAddress:f,type:w,shouldHide:p}}function ba(t,e,n){const{network:r,addressBook:a,walletAddress:o}=e,{details:s}=t;if(!s.source)return;const c=a[s.source].user_friendly,u=a[s.destination].user_friendly;return c===o?{...n,slug:i.Tu9.slug,amount:-0n,isIncoming:!1,fromAddress:c,toAddress:u,normalizedAddress:Ce(u,!0,r),type:"contractDeploy",shouldLoadDetails:!1,fee:0n}:void 0}function Ea(t,e,n){const{details:r}=t,{network:a,walletAddress:o,addressBook:s}=e,{is_encrypted_comment:c,forward_payload:u}=r,d=s[r.sender].user_friendly,l=s[r.receiver].user_friendly,f=l===o,m=f?BigInt(r.amount):-BigInt(r.amount),p=Ce(f?d:l,!0,a),w=!c&&r.comment||void 0,h=c&&r.comment||void 0,g=ta("ton",Ce(r.asset,!0,a)),y=!f&&u===Qt;let v;return l===i.pV9?v="burn":l===i.xrY?v="stake":d===i.xrY&&(v="unstake"),{...n,slug:g,amount:m,isIncoming:f,fromAddress:d,toAddress:l,normalizedAddress:p,comment:w,encryptedComment:h,shouldHide:y,type:v}}function Sa(t,e,n){const{details:r}=t,{network:a,walletAddress:o,addressBook:s}=e,i=s[r.receiver_jetton_wallet].user_friendly,c=s[r.receiver].user_friendly,u=c===o,d=u?BigInt(r.amount):-BigInt(r.amount),l=Ce(u?i:c,!0,a);return{...n,slug:ta("ton",Ce(r.asset,!0,a)),amount:d,isIncoming:u,fromAddress:i,toAddress:c,normalizedAddress:l,type:"mint"}}function Ia(t,e,n){const{details:r}=t,{network:a,addressBook:o}=e,s=o[r.owner].user_friendly,i=o[r.owner_jetton_wallet].user_friendly,c=-BigInt(r.amount),u=Ce(s,!0,a);return{...n,slug:ta("ton",Ce(r.asset,!0,a)),amount:c,isIncoming:!1,fromAddress:s,toAddress:i,normalizedAddress:u,type:"burn"}}function ka(t,e,n){const{network:r,addressBook:a,metadata:o,walletAddress:s}=e,{nft_item_index:c,nft_item:u,nft_collection:d,new_owner:l,old_owner:f,forward_payload:m}=t.details,p=Oa(o,u,null!=d?d:void 0,null!=c?c:void 0),w=a[null!=f?f:u].user_friendly,h=a[l].user_friendly,g=h===s,y=Ce(g?w:h,!0,r);if(w!==s&&h!==s)return;const v=m&&(A=J.Cell.fromBase64(m).asSlice(),(0,tr.A)((()=>la(A))))||void 0;var A;const b=h===i.pV9?"burn":void 0;return{...n,slug:i.Tu9.slug,amount:0n,isIncoming:g,fromAddress:w,toAddress:h,normalizedAddress:y,nft:p,type:b,comment:v}}function Ba(t,e,n){const{network:r,addressBook:a,metadata:o}=e,{owner:s,nft_item_index:c,nft_item:u,nft_collection:d}=t.details,l=Oa(o,u,null!=d?d:void 0,null!=c?c:void 0),f=a[s].user_friendly,m=a[u].user_friendly,p=Ce(f,!0,r);return{...n,slug:i.Tu9.slug,amount:0n,isIncoming:!1,fromAddress:f,toAddress:m,normalizedAddress:p,nft:l,type:"mint"}}function Da(t,e,n){const{network:r,addressBook:a}=e,{details:o}=t;return{...n,slug:i.Tu9.slug,amount:-BigInt(o.amount),isIncoming:!1,fromAddress:a[o.stake_holder].user_friendly,toAddress:a[o.pool].user_friendly,normalizedAddress:Ce(o.pool,!0,r),type:"stake"}}function _a(t,e,n){const{network:r,addressBook:a}=e,{details:o}=t;return{...n,slug:i.Tu9.slug,amount:BigInt(o.amount),isIncoming:!0,fromAddress:o.pool?a[o.pool].user_friendly:i.qMf,toAddress:a[o.stake_holder].user_friendly,normalizedAddress:o.pool?Ce(o.pool,!0,r):i.qMf,type:"unstake",shouldLoadDetails:"tonstakers"===o.provider&&!o.payout_nft}}function Ta(t,e,n){const{network:r,addressBook:a}=e,{details:o}=t;return{...n,slug:i.Tu9.slug,amount:0n,isIncoming:!1,fromAddress:a[o.pool].user_friendly,toAddress:a[o.stake_holder].user_friendly,normalizedAddress:Ce(o.pool,!0,r),type:"unstakeRequest"}}function Ca(t,e){var n,r;const{metadata:a}=e,{end_utime:o,success:s,details:{dex_incoming_transfer:{amount:c,asset:u},dex_outgoing_transfer:{amount:d,asset:l}}}=t,f=u&&(null===(n=Ua(u,a))||void 0===n?void 0:n.decimals)||i.Tu9.decimals,m=l&&(null===(r=Ua(l,a))||void 0===r?void 0:r.decimals)||i.Tu9.decimals,p=u?Ce(u,!0):void 0,w=l?Ce(l,!0):void 0,h=p&&p!==i.oWZ?ta("ton",p):i.Tu9.slug,g=w&&w!==i.oWZ?ta("ton",w):i.Tu9.slug;return{kind:"swap",id:Fa(t),timestamp:$n(o),from:h,fromAmount:E(BigInt(c),f),to:g,toAmount:E(BigInt(d),m),networkFee:"0",swapFee:"0",ourFee:"0",status:s?"completed":"failed",hashes:[],externalMsgHash:t.trace_external_hash,shouldLoadDetails:!0}}function Ra(t,e,n){const{network:r,addressBook:a,metadata:o}=e,{details:s}=t,c=a[s.source].user_friendly,u=a[s.asset].user_friendly,d=Ce(u,!0,r),l=Oa(o,s.asset);let f;if("change_dns"===t.type){const{sum_type:e}=t.details.value;"DNSSmcAddress"===e?f="dnsChangeAddress":"DNSAdnlAddress"===e?f="dnsChangeSite":"DNSStorageAddress"===e?f="dnsChangeStorage":"DNSNextResolver"===e&&(f="dnsChangeSubdomains")}else f="renew_dns"===t.type||"delete_dns"===t.type&&t.details.hash.endsWith(ha)?"dnsRenew":"dnsDelete";return{...n,slug:i.Tu9.slug,amount:0n,isIncoming:!1,fromAddress:c,toAddress:u,normalizedAddress:d,type:f,nft:l}}function xa(t,e,n){const{network:r,addressBook:a,metadata:o,walletAddress:s}=e,{details:c}=t,{bidder:u,auction:d,nft_item_index:l,nft_item:f,nft_collection:m}=c,p=a[u].user_friendly,w=a[d].user_friendly,h=w===s,g=h?BigInt(c.amount):-BigInt(c.amount),y=Ce(h?p:w,!0,r),v=Oa(o,null!=f?f:void 0,null!=m?m:void 0,null!=l?l:void 0);return{...n,slug:i.Tu9.slug,amount:g,isIncoming:h,fromAddress:p,toAddress:w,normalizedAddress:y,type:"auctionBid",nft:v}}function Pa(t,e){return e?ta("ton",t[e].user_friendly):i.Tu9.slug}function Oa(t,e,n,r){try{var a,o,s,c,u;const l=Na(e,t,"nft_items");if(!l)return;const{name:f,description:m,extra:p}=l;let{image:w}=l;const h=Ce(e,!0),g=n?Na(n,t,"nft_collections"):void 0,y=n?Ce(n,!0):void 0,v=null!==(a=null!==(o=null==p?void 0:p.domain)&&void 0!==o?o:f)&&void 0!==a?a:"",A=null===(s=nt(v))||void 0===s?void 0:s.zone;var d;if(A&&(!y||!w))return"ton"===A.suffixes[0]&&(w=`${i.X7L}${p.domain}`),ct({index:Number(r),name:v,address:h,thumbnail:null!==(d=null==p?void 0:p._image_medium)&&void 0!==d?d:w,image:w,description:m,isOnSale:!1,collectionAddress:null!=y?y:A.resolver,collectionName:A.collectionName,metadata:{}});let b=!1;if(!y||!Tr(y))for(const t of[f,m].filter(Boolean))Cr(t)&&(b=!0);const E=b,S="hidden"===(null==p?void 0:p.render_type)||E,I=null===(c=w)||void 0===c?void 0:c.startsWith(i._Qu),k=w?Xn(w):void 0,B=null!==(u=null==p?void 0:p._image_medium)&&void 0!==u?u:k;return ct({index:Number(r),name:f,address:h,thumbnail:B,image:k,description:m,isOnSale:!1,isHidden:S,metadata:{...I&&{fragmentUrl:w.replace(i.Pjb,"https://$1")}},...y&&{collectionAddress:y,collectionName:null==g?void 0:g.name,isOnFragment:I||i.q5n.has(n)}})}catch(t){return}}function Ua(t,e){const n=Ce(t,!0),r=ta("ton",n),a=Zr(r);if(a)return a;const o=Na(t,e,"jetton_masters");return o?{tokenAddress:n,slug:r,chain:"ton",name:o.name,symbol:o.symbol,image:o.image,decimals:Number(o.extra.decimals)}:void 0}function Na(t,e,n){var r;const a=e[t];if(a&&a.is_indexed)return null===(r=a.token_info)||void 0===r?void 0:r.find((t=>t.type===n))}function Fa(t,e){const n=`${t.start_lt}-${t.action_id}`;return Mn(t.trace_id,n,e)}async function Ma(t){const{network:e,address:n,limit:r,toTimestamp:a,fromTimestamp:o,shouldIncludeFrom:s,shouldIncludeTo:i}=t,c=await aa(e,"/transactions",{account:n,limit:r,start_utime:o&&Qn(o)+(s?0:1),end_utime:a&&Qn(a)-(i?0:1),sort:"desc"}),{transactions:u,address_book:d}=c;return u.length?u.map((t=>Wa(e,t,d))).flat():[]}function Wa(t,e,n){const{now:r,hash:a,total_fees:o,description:{compute_ph:{exit_code:s}}}=e,c=1e3*r,u=!!e.in_msg.source&&!e.out_msgs.length,d=e.in_msg.hash,l=u?[e.in_msg]:e.out_msgs;if(!l.length)return[];const f=BigInt(o)/BigInt(l.length),m=[];return l.forEach(((e,r)=>{const{source:o,destination:p,value:w,fwd_fee:h,opcode:g,hash:y}=e;if(!p)return;const v=n[o].user_friendly,A=n[p].user_friendly,b=Ce(u?o:p,!0,t),E=f+BigInt(null!=h?h:0),S=ct({txId:l.length>1?Mn(a,r):Mn(a),timestamp:c,isIncoming:u,fromAddress:v,toAddress:A,amount:u?BigInt(w):-BigInt(w),slug:i.Tu9.slug,fee:E,externalMsgHash:u?void 0:d,normalizedAddress:b,shouldHide:!!s||void 0,hash:a,opCode:Number(g)||void 0,msgHash:y});m.push(S)})),m}var Ka=n(48287).Buffer;const ja=(0,mt.A)((async(t,e)=>(await Ha(t,e)).isInitialized)),qa=(0,mt.A)((async(t,e)=>{const{isInitialized:n,isWallet:r}=await Ha(t,e);return n?!r:void 0}),(t=>void 0!==t));function La(t,e,n){return Ce(za(t,e,n).address,!1,t)}function za(t,e,n){"string"==typeof e&&(e=St(e));const r=Se(t),a=Ee[n];return r.open(a.create({publicKey:Ka.from(e),workchain:Zt}))}async function Ha(t,e){const n="string"==typeof e?e:Ce(e.address,void 0,t),{account_state:r,wallet:a,seqno:o=0,balance:s,last_transaction_id:{lt:i,hash:c}}=await Se(t).getWalletInfo(n);return{isInitialized:"active"===r,isWallet:a,seqno:o,balance:BigInt(s||"0"),lastTxId:"0"===i?void 0:Mn(c)}}async function Ja(t,e){const n=await Se(t).getAddressInfo(e),{code:r,state:a}=n,o=Ka.from(await bt(It(r))).toString("hex"),s=Object.values(he).find((t=>t.hash===o)),i=r&&J.Cell.fromBase64(r).hash().toString("hex");return{isInitialized:"active"===a,isWallet:"active"===a?"wallet"===(null==s?void 0:s.type):void 0,isSwapAllowed:null==s?void 0:s.isSwapAllowed,contractInfo:s,codeHash:i}}async function Va(t){const{network:e}=P(t),{address:n}=await hn(t);return $a(e,n)}async function $a(t,e){return(await Ha(t,e)).balance}async function Qa(t,e){const{seqno:n}=await Ha(t,e);return n||0}async function Ga(t,e){const n=await Za(t,e),r=n.filter((t=>{let{version:e}=t;return e===i.RoE}))[0];if(r.lastTxId)return r;const a=n.reduce(((t,e)=>{var n;return e.balance>(null!==(n=null==t?void 0:t.balance)&&void 0!==n?n:0n)?e:t}),void 0);if(a)return a;const o=function(t,e){let n=t.length;for(;n--;)if(e(t[n]))return t[n]}(n,(t=>{let{lastTxId:e}=t;return!!e}));if(o)return o;const s=n.find((t=>{let{version:e}=t;return"v4R2"===e}));return(await Jn(t,s.address)).length>0?s:r}async function Za(t,e){const n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:$t).map((n=>{const r=za(t,e,n);return{wallet:r,address:Ce(r.address,!1,t),version:n}})),r=await async function(t,e){const n=await async function(t,e){const{wallets:n}=await aa(t,"/walletStates",{address:e.join(",")}),r=Object.fromEntries(e.map((t=>[Re(t).toUpperCase(),t])));for(const t of n)t.address=r[t.address];return rt(n,"address")}(t,e);return ot(n,(t=>({address:Ce(t.address,!1),version:na[t.wallet_type],balance:BigInt(t.balance),isInitialized:"active"===t.status,lastTxId:t.last_transaction_hash?Mn(t.last_transaction_hash):void 0})))}(t,ft(n,"address"));return n.map((t=>{var e;return{...null!==(e=r[t.address])&&void 0!==e?e:{balance:0n,isInitialized:!1},...t}}))}function Xa(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:$t).map((n=>{const r=za(t,e,n);return{wallet:r,address:Ce(r.address,!1,t),version:n}}))}async function Ya(t,e){const n=await eo(t,e);return(0,J.beginCell)().storeWritable((0,J.storeStateInit)(n.init)).endCell()}function to(t,e,n){return n=Ce(n,!1,t),Xa(t,e).find((t=>t.address===n))}async function eo(t,e){const{network:n}=P(t),{publicKey:r,version:a}=null!=e?e:await hn(t);return za(n,St(r),a)}function no(t){var e;return null===(e=Object.entries(Ee).find((e=>{let[,n]=e;return t instanceof n})))||void 0===e?void 0:e[0]}function ro(){return N.generateMnemonic()}function ao(t){return N.validateMnemonic(t)}function oo(t){return W().sign.keyPair.fromSeed(St(t))}async function so(t,e,n){try{const{secretKey:r}=await io(t,e,n)||{};return r}catch(t){return void console.error(t)}}async function io(t,e,n){try{var r;n=null!==(r=n)&&void 0!==r?r:await yn(t);const a=await On(t,e,n);if(!a)return;return U(a)?oo(a[0]):"bip39"===n.type?po(a):await N.mnemonicToKeyPair(a)}catch(t){return void(0,C.SJ)("fetchKeyPair",t)}}async function co(t,e,n){const r=await so(t,e);if(r)return Et(W().sign.detached(St(n),r))}function uo(t,e,n){const{publicKey:r}=po(e);return mo(r,t,n)}async function lo(t,e,n){const{publicKey:r}=await N.mnemonicToKeyPair(t);return mo(r,e,n)}function fo(t,e,n){const{publicKey:r}=oo(t);return mo(r,e,n)}async function mo(t,e,n){let r,a;n?r=za(e,t,n):({wallet:r,version:n,lastTxId:a}=await Ga(e,t));const o=Ce(r.address,!1,e);return{type:"ton",publicKey:Et(t),address:o,version:n,index:0,lastTxId:a}}function po(t){const e=F.kw(t.join(" ")),{key:n}=H(_t,e.toString("hex"));return W().sign.keyPair.fromSeed(n)}async function wo(t,e){const{network:n}=P(t),r=await yn(t),a=La(n,St(r.ton.publicKey),e),o=await pn(n),s={...r,ton:{type:"ton",address:a,publicKey:r.ton.publicKey,version:e,index:r.ton.index}},i="ledger"===r.type?{index:r.ton.index,driver:r.driver}:void 0;return await In(o,"accounts",s),{accountId:o,address:a,ledger:i}}function ho(t){return i.zll[t]}function go(t){var e;return"stars-fee"===t.status?0n:null!==(e=t.amount)&&void 0!==e?e:0n}Object.fromEntries(Object.entries(i.zll).map((t=>{let[e,{nativeToken:n}]=t;return[n.slug,e]})));var yo=n(37836);var vo=n(48287).Buffer;const Ao=n(52598),bo=n(87963);function Eo(t){if(t.length<48)throw new Error;const e=t.slice(0,32),n=t.slice(32,48);return new bo.ModeOfOperation.cbc(e,n)}function So(t,e){return async function(t,e){const n={name:"HMAC",hash:"SHA-512"},r=await crypto.subtle.importKey("raw",t,n,!1,["sign"]),a=await crypto.subtle.sign(n,r,e),o=new Uint8Array(a);if(64!==o.length)throw new Error;return o}(t,e)}async function Io(t,e,n,r,a){if(!t||!t.length)throw new Error("empty comment");64===r.length&&(r=r.slice(0,32));const o=(new TextEncoder).encode(t),s=(new TextEncoder).encode(Ce(a,!0)),i=await async function(t,e,n,r,a){const o=await Ao.getSharedSecret(r,n),s=await async function(t,e,n){const r=await function(t){const e=(31+t&-16)-t,n=crypto.getRandomValues(new Uint8Array(e));if(n[0]=e,(e+t)%16!=0)throw new Error;return n}(t.length),a=new Uint8Array(r.length+t.length);return a.set(r,0),a.set(t,r.length),async function(t,e,n){if(t.length%16!=0)throw new Error;const r=(await So(n,t)).slice(0,16),a=new Uint8Array(t.length+16);a.set(r,0);const o=await So(e,r),s=(await Eo(o)).encrypt(t);return a.set(s,16),a}(a,e,n)}(t,o,a),i=new Uint8Array(e.length+s.length);for(let t=0;t<e.length;t++)i[t]=n[t]^e[t];return i.set(s,e.length),i}(o,e,n,r,s),c=new Uint8Array(i.length+4),u=vo.alloc(4);return u.writeUInt32BE(ne.Encrypted),c.set(u,0),c.set(i,4),c}async function ko(t,e,n,r){64===n.length&&(n=n.slice(0,32));const a=(new TextEncoder).encode(Ce(r,!0)),o=await async function(t,e,n,r){if(t.length<e.length)throw new Error("Failed to decrypt: data is too small");const a=new Uint8Array(e.length);for(let n=0;n<e.length;n++)a[n]=t[n]^e[n];const o=await Ao.getSharedSecret(n,a);return await async function(t,e,n){if(t.length<16)throw new Error("Failed to decrypt: data is too small");if(t.length%16!=0)throw new Error("Failed to decrypt: data size is not divisible by 16");const r=t.slice(0,16),a=t.slice(16),o=await So(e,r),s=await async function(t,e,n,r){const a=(await Eo(t)).decrypt(n),o=(await So(r,a)).slice(0,16);if(e.join(",")!==o.join(","))throw new Error("Failed to decrypt: hash mismatch");const s=a[0];if(s>a.length||s<16)throw new Error("Failed to decrypt: invalid prefix size");return a.slice(s)}(o,r,a,n);return s}(t.slice(e.length),o,r)}(t,e,n,a);return(new TextDecoder).decode(o)}const Bo="/diesel",Do="/diesel";async function _o(t,e,n,r){const{address:a,init:o}=e;let s;o&&!await t.isContractDeployed(a)&&(s=o);const i=(0,J.external)({to:a,init:s?{code:s.code,data:s.data}:void 0,body:n}),c=(0,J.beginCell)().store((0,J.storeMessage)(i)).endCell(),u="w5"===r,d=c.hash().toString("base64"),l=n.hash().toString("base64"),f=c.toBoc().toString("base64");let m;if(u){const t=await function(t){return vr(`${Do}/w5/sendBoc`,{boc:t,isAddition:!0},{shouldRetry:!0})}(f);m=t.paymentLink}else if("diesel"===r){const t=await function(t){return vr(`${Bo}/sendBoc`,{boc:t,isAddition:!0},{shouldRetry:!0})}(f);m=t.paymentLink}else await t.sendFile(f);return{boc:f,msgHash:u?l:d,paymentLink:m}}function To(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Co{constructor(){To(this,"promise",void 0),To(this,"reject",void 0),To(this,"resolve",void 0),this.promise=new Promise(((t,e)=>{this.reject=e,this.resolve=t}))}static resolved(t){const e=new Co;return e.resolve(t),e}}const Ro={},xo={};async function Po(t,e){const n=`${t}:${e}`,r=xo[n],a=Ve(),o=new Co;return xo[n]=o,Ro[a]=o,r&&await r.promise,{id:a,pendingTransfer:o}}function Oo(t){return Ro[t]}const Uo=365,No=50;var Fo=n(39989),Mo=n(75269);const Wo={action_send_msg:247711853,action_set_code:2907562126,action_extended_set_data:536406539,action_extended_add_extension:2,action_extended_remove_extension:3,action_extended_set_signature_auth_allowed:4,auth_extension:1702392942,auth_signed:1936287598,auth_signed_internal:1936289396};function Ko(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class jo{constructor(t,e){this.mode=t,this.outMsg=e,Ko(this,"tag",jo.tag)}serialize(){return(0,J.beginCell)().storeUint(this.tag,32).storeUint(this.mode||J.SendMode.IGNORE_ERRORS,8).storeRef((0,J.beginCell)().store((0,J.storeMessageRelaxed)(this.outMsg)).endCell()).endCell()}}function qo(t){if(0===t.length)return(0,J.beginCell)().endCell();const[e,...n]=t;return(0,J.beginCell)().storeRef(qo(n)).storeSlice(e.serialize().beginParse()).endCell()}function Lo(t){const e=t;let n=(0,J.beginCell)();return n=0===e.length?n.storeUint(0,1):n.storeMaybeRef(qo(e.slice().reverse())),n=n.storeUint(0,1),n.endCell()}function zo(t,e){const n=typeof t;if(n!==typeof e)return!1;if("object"!==n||null===t||null===e)return t===e;const r=Array.isArray(t);if(r!==Array.isArray(e))return!1;if(r){const n=t,r=e;return n.length===r.length&&n.every(((t,e)=>zo(t,r[e])))}const a=t,o=e,s=Object.keys(a),i=Object.keys(o);return!!s.every((t=>o.hasOwnProperty(t)))&&!!i.every((t=>a.hasOwnProperty(t)))&&s.every((t=>zo(a[t],o[t])))}Ko(jo,"tag",247711853);var Ho=n(59288);let Jo,Vo;function $o(t){if("transaction"!==t.kind)return t;const{normalizedAddress:e,comment:n,isIncoming:r,nft:a}=t;let{metadata:o={}}=t;const s=Boolean(a),c=Dr(),u=!!n&&Sr.some((t=>t.test(n))),d=!(u||!n||!r||!s&&!n.toLowerCase().includes("claim"))&&(Cr(n)||(l=n,i.rcB.test(gr(l))));var l;return e in c&&(o={...o,...c[e]}),(u||d)&&(o.isScam=!0),{...t,metadata:o}}function Qo(t,e){return Go(t)&&function(t){return ln===t}(e)}function Go(t){return Vo===t}function Zo(t){const{id:e,network:n}=t;return`${e}-ton-${n}`}async function Xo(){const t=await Xe.getKeys();if(null!=t&&t.length){const e=[];for(const n of t){if(n.startsWith("backup_"))continue;const t=`backup_${n}`,r=await Xe.getItem(n,!0);(0,Ho.v)(void 0!==r,"Empty value!"),await Xe.setItem(t,r);const a=await Xe.getItem(t);(0,Ho.v)(zo(r,a),"Data has not been saved!"),e.push([n,r])}for(const[t,n]of e){let e=!1;await Xe.setItem(t,n).catch((()=>{e=!0})),e&&(await Xe.removeItem(t),await Xe.setItem(t,n))}}}const Yo=128,ts=(0,mt.A)((async(t,e)=>{const n=await Ma({network:t,address:e,limit:1});return Boolean(n.length)}));async function es(t,e,n,r,a,o){const{network:s}=P(t),{address:i}=await hn(t);let c;if(e){const t=Zr(e),u=await ke(s,i,t.tokenAddress);c=await ga({network:s,address:u,walletAddress:i,limit:null!=a?a:Yo,fromTimestamp:r,toTimestamp:n,shouldIncludeFrom:o}),c=c.filter((t=>Wn(t).includes(e)))}else c=await ga({network:s,address:i,walletAddress:i,limit:null!=a?a:Yo,fromTimestamp:r,toTimestamp:n,shouldIncludeFrom:o});return c.map($o)}async function ns(t,e){const{network:n}=P(t),{address:r}=await hn(t),{id:a}=e,{hash:o,subId:s}=Nn(a),{actionId:i}=function(t){const[e,n]=t.split("-");return{startLt:e,actionId:n}}(s),c=await async function(t,e,n){const{trace:r,addressBook:a}=await async function(t){const{network:e,traceId:n}=t,r=await aa(e,"/traces",{trace_id:n,include_actions:!0});return{trace:r.traces[0],addressBook:r.address_book}}({network:t,traceId:n}),o=at(Object.values(r.transactions).map((e=>Wa(t,e,a))).flat(),"hash");let s=0n,i=0n,c=0n;const u=[];let d=!1;return function t(n,r){const a=n.tx_hash,l=o[a];if(d||(d=l.some((t=>{let{fromAddress:n,isIncoming:r}=t;return n===e&&!r})),d))for(const[o,d]of l.entries()){const{fromAddress:l,toAddress:f,amount:m,isIncoming:p,fee:w,msgHash:h}=d,g=null!=r?r:o;g in u?u[g].hashes.add(a):u.push({hashes:new Set,inputTxs:[],sent:0n,received:0n,networkFee:0n}),l!==e||p?f===e&&p&&(u[g].received+=D(m),u[g].inputTxs.push(d),i+=D(m)):(u[g].sent+=D(m),u[g].networkFee=w,s+=D(m),c+=w);const y=n.children.find((t=>{let{in_msg_hash:e}=t;return e===h}));y&&t(y,g)}else n.children.forEach(t)}(r.trace),{trace:r,addressBook:a,byTransactionIndex:u,totalSent:s,totalReceived:i,totalNetworkFee:c}}(n,r,o),{trace:u,byTransactionIndex:d}=c,l=u.actions.find((t=>{let{action_id:e}=t;return e===i})),f=new Set(l.transactions),{sent:m,received:p,networkFee:w}=d.find((t=>function(t,e){const n=new Set;for(const r of e)t.has(r)&&n.add(r);return n}(t.hashes,f).size));let h=w;return"swap"===e.kind?({realFee:h,activity:e}=function(t){const{action:e,received:n,sent:r,parsedTrace:{trace:a}}=t;let{realFee:o,activity:s}=t;const{details:i}=e;let c;if(i.asset_in?i.asset_out?o+=r-n:o+=r-n+BigInt(i.dex_outgoing_transfer.amount):o+=r-BigInt(i.dex_incoming_transfer.amount)-n,s={...s,networkFee:E(o)},delete s.shouldLoadDetails,i.asset_in){const t=a.actions.find((t=>"jetton_transfer"===t.type&&t.details.forward_payload===Qt));t&&(c=BigInt(t.details.amount))}else{const t=a.actions.find((t=>"call_contract"===t.type&&Number(t.details.opcode)===ne.OurFee));t&&(c=BigInt(t.details.value))}if(c){const t=Zr(s.from);s.ourFee=E(c,null==t?void 0:t.decimals)}return{realFee:o,activity:s}}({parsedTrace:c,activity:e,action:l,sent:m,received:p,realFee:h})):({realFee:h,activity:e}=function(t){const{action:e,received:n,sent:r,parsedTrace:{byTransactionIndex:a,totalSent:o,totalReceived:s,totalNetworkFee:i}}=t;let{realFee:c,activity:u}=t;switch(e.type){case"jetton_transfer":case"jetton_mint":case"jetton_burn":case"nft_mint":case"nft_transfer":case"stake_withdrawal_request":case"change_dns":case"delete_dns":case"renew_dns":c+=r-n;break;case"stake_deposit":c+=r-n-BigInt(e.details.amount);break;case"stake_withdrawal":c+=r-n+BigInt(e.details.amount);break;case"dex_deposit_liquidity":a.length>1?c=i+o-s:c+=r-n,e.details.asset_1?e.details.lp_tokens_minted&&!e.details.asset_2&&(c-=BigInt(e.details.amount_2)):c-=BigInt(e.details.amount_1),a.length>1&&(c/=2n);break;case"dex_withdraw_liquidity":c+=r-n,e.details.asset_1?e.details.asset_2||(c+=BigInt(e.details.amount_2)):c+=BigInt(e.details.amount_1),c/=2n}return u={...u,fee:c},delete u.shouldLoadDetails,{activity:u,realFee:c}}({parsedTrace:c,activity:e,action:l,sent:m,received:p,realFee:h})),(0,C.MD)("Calculation of fee for action",{actionId:l.action_id,traceId:o,sent:E(m),networkFee:E(w),returned:E(p),change:E(-m+p),realFee:E(h),details:l.details}),e}var rs=n(48287).Buffer;function as(t,e,n){const r=t.asSlice(),a=r.loadUint(8),o=r.loadUint(8);if(a!==e||o!==n)throw new Error("Invalid dns record value prefix");return function(t){t.loadUint(3);let e=t.loadUintBig(8);e>127n&&(e-=256n);const n=t.loadUintBig(256);if("0:0"==`${e.toString(10)}:${n.toString(16)}`)return;const r=`${e.toString(10)}:${n.toString(16).padStart(64,"0")}`;return J.Address.parse(r)}(r)}function os(t){return as(t,186,147)}function ss(t){const e=t.asSlice(),n=e.loadUint(8),r=e.loadUint(8);if(116!==n||115!==r)throw new Error("Invalid dns record value prefix");return e.loadBuffer(4).toString("hex")}async function is(t,e,n,r,a){const o=8*n.length,s=(new J.Builder).storeBuffer(rs.from(n)).asCell(),i=await async function(t){if(!t)return 0n;const e=(new TextEncoder).encode(t),n=rs.from(await bt(e)).toString("hex");return BigInt(`0x${n}`)}(r),{stack:c}=await t.callGetMethod(J.Address.parse(e),"dnsresolve",[{type:"slice",cell:s},{type:"int",value:BigInt(i.toString())}]),u=c.readNumber();let d;try{d=c.readCell()}catch(t){}if(0!==u){if(u%8!=0)throw new Error("domain split not at a component boundary");if(u>o)throw new Error(`invalid response ${u}/${o}`);if(u===o)return r===me.DnsNextResolver?d?os(d):void 0:r===me.Wallet?d?function(t){return as(t,159,211)}(d):void 0:r===me.Site?d?function(t){const e=t.asSlice(),n=e.loadUint(8),r=e.loadUint(8);return 173===n||1===r?function(t){const e=t.asSlice(),n=e.loadUint(8),r=e.loadUint(8);if(173!==n||1!==r)throw new Error("Invalid dns record value prefix");return e.loadBuffer(4).toString("hex")}(t):ss(t)}(d):void 0:r===me.BagId?d?ss(d):void 0:d;if(d){const e=os(d);return a?r===me.DnsNextResolver?e:void 0:is(t,e.toString(),n.slice(u/8),r,!1)}}}async function cs(t,e){let n;if(void 0!==nt(e)){const r=await async function(t,e){try{const n=nt(e);if(!n)return;const r=await function(t,e,n,r,a){const o=function(t){if(!t||!t.length)throw new Error("empty domain");if("."===t)return new Uint8Array([0]);t=t.toLowerCase();for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<=32)throw new Error("bytes in range 0..32 are not allowed in domain names");for(let e=0;e<t.length;e++){const n=t.substring(e,e+1);for(let t=127;t<=159;t++)if(n===String.fromCharCode(t))throw new Error("bytes in range 127..159 are not allowed in domain names")}const e=t.split(".");e.forEach((t=>{if(!t.length)throw new Error("domain name cannot have an empty component")}));let n=`${e.reverse().join("\0")}\0`;return n.length<126&&(n=`\0${n}`),(new TextEncoder).encode(n)}(n);return is(t,e,o,r,a)}(Se(t),n.zone.resolver,n.base,me.Wallet);if(!(r instanceof J.Address))return;return Ce(r,void 0,t)}catch(t){var n;if(null===(n=t.message)||void 0===n||!n.includes("exit_code"))throw t;return}}(t,e);if(!r)return;const a=await async function(t,e){const n=function(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}(e,ea);return(await Promise.all(n.map((e=>aa(t,"/addressBook",{address:e}))))).reduce(((t,e)=>Object.assign(t,e)),{})}(t,[r]);n=e,e=a[r].user_friendly}const r=_r(us(e));var a;return r?{address:e,...r,name:null!==(a=n)&&void 0!==a?a:r.name}:{address:e,name:n}}function us(t,e){return Ce(t,!0,e)}async function ds(t){const{network:e}=P(t),{address:n}=await hn(t);return ls(e,n)}async function ls(t,e){return(await Jn(t,e)).map((e=>function(t,e){if(e.jetton)try{const{balance:n,jetton:r,wallet_address:a}=e,o=gs(Ce(r.address,!0,t),r);return{slug:o.slug,balance:BigInt(n),token:o,jettonWallet:Ce(a.address,void 0,t)}}catch(t){return void(0,C.SJ)("parseTokenBalance",t)}}(t,e))).filter(Boolean)}async function fs(t,e,n,r){const{toAddress:a,payload:o}=r,s=Xr(n);if("string"!=typeof o||null==s||!s.customPayloadApiUrl)return r;const i=await da(t,a,o);if("tokens:transfer"!==i.type)throw new Error("Invalid payload");const{mintlessTokenBalance:c,isMintlessClaimed:u,stateInit:d,customPayload:l}=await ws({network:t,token:s,fromAddress:e,tokenWalletAddress:r.toAddress});if(!c||u)return r;const f=xe({toAddress:i.destination,queryId:i.queryId,tokenAmount:i.amount,forwardAmount:i.forwardAmount,forwardPayload:J.Cell.fromBase64(i.forwardPayload),responseAddress:i.responseDestination,customPayload:J.Cell.fromBase64(l)});return{...r,stateInit:d?J.Cell.fromBase64(d):void 0,payload:f,isBase64Payload:!1}}async function ms(t){const{network:e,tokenAddress:n,fromAddress:r,toAddress:a,amount:o,shouldSkipMintless:s,forwardAmount:i=Ut}=t;let{payload:c}=t;const u=await ke(e,r,n),d=Xr(n),{isTokenWalletDeployed:l=!!await qa(e,u),isMintlessClaimed:f,mintlessTokenBalance:m,customPayload:p,stateInit:w}=await ws({network:e,fromAddress:r,token:d,tokenWalletAddress:u,shouldSkipMintless:s});if(l&&n!==await Be(e,u))throw new Error("Invalid contract");c=xe({tokenAmount:o,toAddress:a,forwardAmount:i,forwardPayload:c,responseAddress:r,customPayload:p?J.Cell.fromBase64(p):void 0});let{amount:h,realAmount:g}=ys(d,Boolean(m)&&!f);return i>Ut&&(h+=i),{amount:h,realAmount:g,toAddress:u,payload:c,stateInit:w?J.Cell.fromBase64(w):void 0,mintlessTokenBalance:m,isTokenWalletDeployed:l}}async function ps(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0n,a=0n;return n&&(a+=await Me(t,e)),r&&(a+=r),a}async function ws(t){const{network:e,fromAddress:n,token:r,tokenWalletAddress:a,shouldSkipMintless:o}=t;let s,i,c,u,d;if(r.customPayloadApiUrl&&!o&&(s=!!await qa(e,a),u=s&&await async function(t,e){return(await Se(t).runMethod(J.Address.parse(e),"is_claimed")).stack.readBoolean()}(e,a),!u)){const t=await async function(t,e){const n=Re(e);return await(0,jn.x3)(`${t}/wallet/${n}`).catch((()=>{}))}(r.customPayloadApiUrl,n),e=!t||Date.now()>new Date(1e3*Number(t.compressed_info.expired_at)).getTime();t&&!e&&(i=t.custom_payload,d=BigInt(t.compressed_info.amount),s||(c=t.state_init))}return{isTokenWalletDeployed:s,isMintlessClaimed:u,mintlessTokenBalance:d,customPayload:i,stateInit:c}}async function hs(t,e){return gs(e,await async function(t,e){const{content:n}=await function(t,e){return Se(t).open(new wt.Sr(J.Address.parse(e))).getJettonData()}(t,e);let r;const a=n.asSlice();if(a.loadUint(8)===sa){const t=ma(a).toString("utf-8");r=await ua(t)}else r=await async function(t){const e=t.loadDict(sr.Dictionary.Keys.Buffer(32),ia),n={};for(const[t,a]of Object.entries(ca)){var r;const o=oa.from(await bt(oa.from(t,"ascii"))),s=null===(r=e.get(o))||void 0===r?void 0:r.toString(a);s&&(n[t]=s)}return n}(a),r.uri&&(r={...await ua(r.uri),...r});return r}(t,e))}function gs(t,e){const{name:n,symbol:r,image:a,image_data:o,decimals:s,custom_payload_api_uri:i}=e;return{slug:ta("ton",t),name:n,symbol:r,decimals:void 0===s?Ht:Number(s),chain:"ton",tokenAddress:t,image:a&&Xn(a)||o&&(c=o,(u=c,At.from(u,"base64").toString("utf-8")).includes("<svg")?`data:image/svg+xml;base64,${c}`:`data:image/png;base64,${c}`)||void 0,customPayloadApiUrl:i};var c,u}function ys(t,e){let n=0n,r=0n;return t.slug===i.rUK?(n+=Rt,r+=Ot):t.isTiny?(n+=Rt,r+=Pt):(n+=Ct,r+=xt),e&&(n+=Nt,r+=Nt),{amount:n,realAmount:r}}var vs=n(48287).Buffer;const As=6e4,bs=1e3,Es=100000000n,Ss=9e5,Is={status:"not-available",nativeAmount:0n,remainingFee:0n,realFee:0n};async function ks(t){const{accountId:e,amount:n=0n,tokenAddress:r,shouldEncrypt:a,isBase64Data:o,stateInit:s,forwardAmount:i,allowGasless:c}=t;let{toAddress:u,data:d}=t;const{network:l}=P(e);let f={};try{if(f=await Bs(l,u),"error"in f)return f;u=f.resolvedAddress;const{isInitialized:t}=await Ja(l,u);if(s&&!o)return{...f,error:x.KL.StateInitWithoutBin};let p;if(s)try{p=J.Cell.fromBase64(s)}catch{return{...f,error:x.KL.InvalidStateInit}}if(f.isBounceable&&!t&&!p)return f.isToAddressNew=!await ts(l,u),{...f,error:x.KL.InactiveContract};if(f.resolvedAddress=u,n<0n)return{...f,error:x.KL.InvalidAmount};const w=await eo(e);if("string"==typeof d&&o&&(d=It(d)),d&&"string"==typeof d&&a&&!await De(l,u))return{...f,error:x.KL.WalletNotInitialized};const{address:h,isInitialized:g}=await hn(e);d&&"string"==typeof d&&!o&&(d=Pe(d));const y=await $a(l,w);let v,A,b,E;if(r){const t=await ms({network:l,tokenAddress:r,fromAddress:h,toAddress:u,amount:n,payload:d,forwardAmount:i});({amount:A,toAddress:u,payload:d}=t);const{realAmount:e,isTokenWalletDeployed:a,mintlessTokenBalance:o}=t;b=A,E=e;const s=u;v=await ps(l,s,a,o)}else v=y,A=n,b=0n,E=0n,d instanceof Uint8Array&&(d=a?Ne(d):Oe(d));const S=!r&&y===n,{transaction:I}=await Rs({network:l,wallet:w,toAddress:u,amount:A,payload:d,stateInit:p,isFullBalance:S,shouldEncrypt:a}),k=await Fs(l,w,I,g),B=T(k,Vt);let D;if(b+=B,E+=B,f.fee=b,f.realFee=E,f.diesel=Is,r){const t=y>=b;c&&(f.diesel=await qs({accountId:e,tokenAddress:r,canTransferGasfully:t,toncoinBalance:y,tokenBalance:v})),D="not-available"!==(m=f.diesel).status&&void 0!==m.amount?n+go(f.diesel)<=v:t&&n<=v}else D=S?y>k:y>=b+n;return D?f:{...f,error:x.KL.InsufficientBalance}}catch(t){return{...(0,Fo.QS)(t),...f}}var m}async function Bs(t,e){const n={},r=await cs(t,e);if(!r)return{...n,error:x.KL.DomainNotResolved};n.addressName=r.name,n.resolvedAddress=r.address,n.isMemoRequired=r.isMemoRequired,n.isScam=r.isScam,e=r.address;const{isValid:a,isUserFriendly:o,isTestOnly:s,isBounceable:i}=We(e);if(n.isBounceable=i,!a)return{...n,error:x.KL.InvalidToAddress};const c=!/[+=/]/.test(e);return!o||!c||"mainnet"===t&&s?{...n,error:x.KL.InvalidAddressFormat}:n}async function Ds(t){const{accountId:e,password:n,amount:r,tokenAddress:a,shouldEncrypt:o,isBase64Data:s,forwardAmount:i}=t;let{stateInit:c}=t,{toAddress:u,data:d}=t;const{network:l}=P(e);try{const t=await yn(e),{address:f,isInitialized:m}=t.ton,p=await eo(e,t.ton),{publicKey:w,secretKey:h}=await io(e,n,t);let g,y;"string"==typeof d&&({payload:d,encryptedComment:g}=await Ts({network:l,toAddress:u,fromAddress:f,data:d,secretKey:h,publicKey:w,shouldEncrypt:o,isBase64Data:s})),a?({amount:y,toAddress:u,payload:d,stateInit:c}=await ms({network:l,tokenAddress:a,fromAddress:f,toAddress:u,amount:r,payload:d,forwardAmount:i})):(y=r,d instanceof Uint8Array&&(d=o?Ne(d):Oe(d)));const{pendingTransfer:v}=await Po(l,f),A=await $a(l,p),b=!a&&A===r,{seqno:E,transaction:S}=await Rs({network:l,wallet:p,toAddress:u,amount:y,payload:d,stateInit:c,privateKey:h,isFullBalance:b,shouldEncrypt:o}),I=await Fs(l,p,S,m);if(!(b?A>I:A>=y+I))return{error:x.jf.InsufficientBalance};const k=Se(l),{msgHash:B,boc:D}=await _o(k,p,S);return Ns(l,f,D,E,v),{amount:r,seqno:E,encryptedComment:g,toAddress:u,msgHash:B}}catch(t){return(0,C.SJ)("submitTransfer",t),{error:Cs(t)}}}async function _s(t){try{const{toAddress:e,amount:n,accountId:r,password:a,tokenAddress:o,shouldEncrypt:s,dieselAmount:c,isGaslessWithStars:u}=t;let{data:d}=t;const{network:l}=P(r),[{address:f,version:m},p]=await Promise.all([hn(r),io(r,a)]),{publicKey:w,secretKey:h}=p;let g;"string"==typeof d&&({payload:d,encryptedComment:g}=await Ts({network:l,toAddress:e,fromAddress:f,data:d,secretKey:h,publicKey:w,shouldEncrypt:s}));const y=[await ms({network:l,tokenAddress:o,fromAddress:f,toAddress:e,amount:n,payload:d})];return u||y.push(await ms({network:l,tokenAddress:o,fromAddress:f,toAddress:i.InW,amount:c,shouldSkipMintless:!0,payload:(new J.Builder).storeUint(ne.OurFee,32).endCell()})),{...await Os({accountId:r,password:a,messages:y,isGasless:!0}),encryptedComment:g,withW5Gasless:"W5"===m}}catch(t){return(0,C.SJ)("submitTransferWithDiesel",t),{error:Cs(t)}}}async function Ts(t){let e,n,{network:r,toAddress:a,data:o,shouldEncrypt:s,publicKey:i,secretKey:c,fromAddress:u,isBase64Data:d}=t;if(o)if(d)e=function(t){try{return J.Cell.fromBase64(t)}catch(e){return(0,C.SJ)("parseBase64",e),Uint8Array.from(ve.from(t,"base64"))}}(o);else if(s){const t=await De(r,a);e=await Io(o,i,t,c,u),n=vs.from(e.slice(4)).toString("base64")}else e=Pe(o);else e=void 0;return{payload:e,encryptedComment:n}}function Cs(t){if(t instanceof Fo.K$){if(t.message.includes("exitcode=35,"))return x.jf.IncorrectDeviceTime;if(400===t.statusCode)return t.message;if(t.displayError)return t.displayError}return x.jf.UnsuccesfulTransfer}async function Rs(t){let{network:e,wallet:n,toAddress:r,amount:a,payload:o,stateInit:s,privateKey:i,isFullBalance:c,expireAt:u,shouldEncrypt:d}=t;const{seqno:l}=await Ha(e,n);i?(0,C.MD)("Signing transactions",{seqno:l,toAddress:r,amount:a}):i=new Uint8Array(64),u||(u=Math.round(Date.now()/1e3)+Xt),o instanceof Uint8Array&&(o=d?Ne(o):Oe(o,0));const f=s?(0,J.loadStateInit)(s.asSlice()):void 0,m=c?J.SendMode.CARRY_ALL_REMAINING_BALANCE:J.SendMode.PAY_GAS_SEPARATELY+(o?0:J.SendMode.IGNORE_ERRORS);return{seqno:l,transaction:n.createTransfer({seqno:l,secretKey:vs.from(i),messages:[(0,J.internal)({value:a,to:r,body:o,init:f,bounce:We(r).isBounceable})],sendMode:m,timeout:u})}}async function xs(t){const{network:e}=P(t),{address:n}=await hn(t);return async function(t,e){const n=await Ma({network:t,address:e,limit:1});if(n.length)return n[0].txId}(e,n)}async function Ps(t,e,n,r){const a={};let o=0n;const{network:s}=P(t),{isInitialized:c,version:u,address:d}=await hn(t);try{var l,f,m;for(const{toAddress:t,amount:n}of e){if(n<0n)return{...a,error:x.KL.InvalidAmount};const e="mainnet"===s,{isValid:r,isTestOnly:i}=We(t);if(!r||e&&i)return{...a,error:x.KL.InvalidToAddress};o+=n}const p=await eo(t),{balance:w}=await Ha(s,p),{transaction:h}=await Us({network:s,wallet:p,messages:e,version:u});if(r&&(a.emulation=await(0,tr.T)((async()=>{const t=await function(t,e,n,r){const a=function(t,e,n){const r=(0,J.external)({to:t.address,init:n?void 0:{code:t.init.code,data:t.init.data},body:e});return(0,J.beginCell)().store((0,J.storeMessage)(r)).endCell().toBoc().toString("base64")}(e,n,r);return async function(t,e){const n="testnet"===t?i.pyR:i._J8;return(await(0,jn.J5)(`${n}/api/emulate/v1/emulateTrace`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({boc:e,ignore_chksig:!0,include_code_data:!1,with_actions:!1})})).json()}(t,a)}(s,p,h,c);return t&&function(t,e,n){const r=Re(e).toUpperCase(),a=Object.entries(n.transactions).map((e=>{let[n,r]=e;return function(t,e,n){const{now:r,total_fees:a,description:{compute_ph:{exit_code:o}}}=n,s=1e3*r,c=!!n.in_msg.source,u=n.in_msg.hash,d=c?[n.in_msg]:n.out_msgs;if(!d.length)return[];const l=BigInt(a)/BigInt(d.length);return d.map(((n,r)=>{const{source:a,destination:f,value:m,fwd_fee:p,opcode:w,hash:h}=n,g=Ce(c?a:f,!0,t),y=l+BigInt(null!=p?p:0);return ct({txId:d.length>1?Mn(e,r):Mn(e),timestamp:s,isIncoming:c,fromAddress:a,toAddress:f,amount:BigInt(null!=m?m:0),slug:i.Tu9.slug,fee:y,inMsgHash:u,normalizedAddress:g,shouldHide:!!o||void 0,hash:e,opCode:Number(w)||void 0,msgHash:h})}))}(t,n,r)})).flat(),o=at(a,"hash"),s=[];return function t(e,n){const a=o[e.tx_hash]||[];for(const[t,{toAddress:e,amount:o,fee:i,isIncoming:c}]of a.entries()){const a=null!=n?n:t;a in s||s.push({received:0n,fee:T(i,Vt)}),e===r&&c&&(s[a].received+=D(o))}for(const[r,a]of e.children.entries())t(a,null!=n?n:r)}(n.trace),{totalFee:s.reduce(((t,e)=>{let{fee:n}=e;return t+n}),0n),totalReceived:s.reduce(((t,e)=>{let{received:n}=e;return t+n}),0n),byTransactionIndex:s}}(s,d,t)}))),!a.emulation){const t=await Fs(s,p,h,c);a.fee=T(t,Vt)}const g=null!==(l=null!==(f=null===(m=a.emulation)||void 0===m?void 0:m.totalFee)&&void 0!==f?f:a.fee)&&void 0!==l?l:0n;return!n&&w<o+g?{...a,error:x.KL.InsufficientBalance}:a}catch(t){return(0,Fo.QS)(t)}}async function Os(t){let{accountId:e,password:n,messages:r,expireAt:a,isGasless:o}=t;const{network:s}=P(e),i=await yn(e),{address:c,isInitialized:u,version:d}=i.ton,{pendingTransfer:l}=await Po(s,c);try{const t=await eo(e,i.ton),f=await so(e,n,i);let m=0n;r.forEach((t=>{m+=BigInt(t.amount)}));const{balance:p}=await Ha(s,t),w=o?"W5"===d?"w5":"diesel":void 0,h="w5"===w,{seqno:g,transaction:y}=await Us({network:s,wallet:t,messages:r,version:d,privateKey:f,expireAt:a,withW5Gasless:h});if(!o){const e=await Fs(s,t,y,u);if(p<m+e)return{error:x.jf.InsufficientBalance}}const v=Se(s),{msgHash:A,boc:b,paymentLink:E}=await _o(v,t,y,w);o?l.resolve():Ns(s,c,b,g,l);const S=r.map((t=>"string"!=typeof t.payload&&void 0!==t.payload?it(t,["payload"]):t));return{seqno:g,amount:m.toString(),messages:S,boc:b,msgHash:A,paymentLink:E,withW5Gasless:h}}catch(t){return l.resolve(),(0,C.SJ)("submitMultiTransfer",t),{error:Cs(t)}}}async function Us(t){let{network:e,wallet:n,messages:r,version:a,privateKey:o,expireAt:s,withW5Gasless:i}=t;const{seqno:c}=await Ha(e,n);o?(0,C.MD)("Signing transaction",{seqno:c,messages:r.map((t=>st(t,["toAddress","amount"])))}):o=new Uint8Array(64),s||(s=Math.round(Date.now()/1e3)+Xt);let u=!1;const d=r.map((t=>{const{amount:e,toAddress:n,stateInit:r,isBase64Payload:a}=t;let{payload:o}=t;a&&"string"==typeof o&&(o=J.Cell.fromBase64(o));const s=r?(0,J.loadStateInit)(r.asSlice()):void 0;return!u&&o&&(u=!0),(0,J.internal)({value:e,to:n,body:o,bounce:We(n).isBounceable,init:s})}));let l;"W5"!==a||i||d.reverse(),l=i?function(t,e,n,r){const a=(0,J.beginCell)().storeUint(Wo.auth_signed_internal,32).storeUint(2147483409n,32).storeUint(Math.floor((Date.now()+r)/1e3),32).storeUint(e,32).storeSlice(t.beginParse()).endCell(),o=(0,Mo.sign)(a.hash(),n);return(0,J.beginCell)().storeSlice(a.beginParse()).storeUint((s=o,BigInt(`0x${s.toString("hex")}`)),512).endCell();var s}(Lo(d.map((t=>new jo(J.SendMode.PAY_GAS_SEPARATELY,t)))),c,vs.from(o),Ss):n.createTransfer({seqno:c,secretKey:vs.from(o),messages:d,sendMode:J.SendMode.PAY_GAS_SEPARATELY+(u?0:J.SendMode.IGNORE_ERRORS),timeout:s});const f=function(t,e,n){return(0,J.beginCell)().storeWritable((0,J.storeMessage)((0,J.external)({to:t.address,init:0===e?t.init:void 0,body:n}))).endCell()}(n,c,l);return{seqno:c,transaction:l,externalMessage:f}}async function Ns(t,e,n,r,a){const o=Se(t),s=Date.now()+As;for(;Date.now()<s;){const[a,s]=await Promise.all([o.sendFile(n).catch((t=>String(t))),Ha(t,e).catch((()=>{}))]);if(null!=a&&a.match(/(exitcode=33|exitcode=133|inbound external message rejected by account)/))break;if(s&&s.seqno>r)break;await(0,yo.v7)(bs)}null==a||a.resolve()}async function Fs(t,e,n,r){const{code:a=null,data:o=null}=r?{}:e.init,{source_fees:s}=await Se(t).estimateExternalMessageFee(e.address,{body:n,initCode:a,initData:o,ignoreSignature:!0});return BigInt(s.in_fwd_fee+s.storage_fee+s.gas_fee+s.fwd_fee)}async function Ms(t,e,n){const{network:r}=P(t),{address:a,publicKey:o,version:s}=await hn(t),i=Se(r),c=i.open(Ie(o,s)),{base64:u,seqno:d}=e,l=n?Oo(n):void 0;try{const{msgHash:t,boc:e}=await _o(i,c,J.Cell.fromBase64(u));return Ns(r,a,e,d,l),{boc:e,msgHash:t}}catch(t){throw null==l||l.resolve(),t}}async function Ws(t,e){const{network:n}=P(t),{address:r,publicKey:a,version:o}=await hn(t),s=Se(n),i=s.open(Ie(a,o)),c=zt+e.length;let u,d=0,l=0;const f=[];let m;for(;d<e.length&&l<c;){const{base64:t,seqno:a}=e[d];try{({pendingTransfer:m}=await Po(n,r));const{msgHash:e,boc:o}=await _o(s,i,J.Cell.fromBase64(t));f.push(e),0===d&&(u=o),Ns(n,r,o,a,m),d++}catch(t){var p;null===(p=m)||void 0===p||p.resolve(),(0,C.SJ)("sendSignedMessages",t)}l++}return{successNumber:d,firstBoc:u,msgHashes:f}}async function Ks(t,e,n,r){const a=await io(t,r);if(!a)return;const{secretKey:o,publicKey:s}=a;return ko(vs.from(e,"base64"),s,o,n)}function js(t,e){return qs({accountId:t,tokenAddress:e,canTransferGasfully:!1})}async function qs(t){var e,n;let{accountId:r,tokenAddress:a,canTransferGasfully:o,toncoinBalance:s,tokenBalance:c}=t;const{network:u}=P(r);if("mainnet"!==u)return Is;const d=await hn(r),l=await eo(r,d),f=Xr(a);if(!f.isGaslessEnabled&&!f.isStarsEnabled)return Is;const{address:m,version:p}=d;null!==(e=s)&&void 0!==e||(s=await $a(u,l));const w=function(t){const e=!t.isGaslessEnabled&&t.isStarsEnabled;let{amount:n,realAmount:r}=ys(t,!1);return e||(n*=2n,r*=2n),n+=i.dqR,r+=i.dqR,{amount:n,realFee:r,isStars:e}}(f),h=w.amount-s;if(s>=Es||h<=0n)return Is;const g=await function(t,e,n,r,a){return Ar("/diesel/estimate",{address:t,tokenAddress:e,toncoinAmount:n,isW5:r,isStars:a})}(m,a,E(h),"W5"===p,w.isStars),y={status:g.status,amount:void 0===g.amount?void 0:b(g.amount,"stars-fee"===g.status?0:f.decimals),nativeAmount:h,remainingFee:s,realFee:w.realFee},v=go(y);if(0n===v)return y;null!==(n=c)&&void 0!==n||(c=await async function(t,e,n){const r=await ke(t,e,n),a=Xr(n),{isTokenWalletDeployed:o=!!await qa(t,r),mintlessTokenBalance:s}=await ws({network:t,fromAddress:e,token:a,tokenWalletAddress:r});return ps(t,r,o,s)}(u,m,a));const A=c>=v,S=Boolean(g.pendingCreatedAt&&Date.now()-new Date(g.pendingCreatedAt).getTime()<Ss);return!o&&A||S?y:Is}var Ls=n(48287).Buffer;async function zs(t,e,n){const{network:r}=P(t),{address:a}=await hn(t),o=await async function(t,e,n){const{collection:r,offset:a,limit:o}=null!=n?n:{};return(await Hn(t).accounts.getAccountNftItems(e,{offset:null!=a?a:0,limit:null!=o?o:qn,indirect_ownership:!0,collection:r})).nft_items}(r,a,{offset:e,limit:n});return ut(o.map((t=>wa(r,t))))}async function Hs(t,e){const{network:n}=P(t),{address:r}=await hn(t),a=await function(t,e){return Hn(t).nft.getNftItemByAddress(e)}(n,e),o=wa(n,a);return r===(null==o?void 0:o.ownerAddress)}async function Js(t,e){var n,r;const{network:a}=P(t),{address:o}=await hn(t),s=await async function(t,e,n){return(await Hn(t).accounts.getAccountEvents(e,{limit:Ln,start_date:n})).events}(a,o,e);e=null!==(n=null===(r=s[0])||void 0===r?void 0:r.timestamp)&&void 0!==n?n:e,s.reverse();const i=[];for(const e of s)for(const n of e.actions){let e,r,s;const c=!!n.NftPurchase;if(n.NftItemTransfer){const{sender:t,recipient:o,nft:s}=n.NftItemTransfer;if(!t||!o)continue;e=Ce(o.address,void 0,a),r=Ce(s,!0,a)}else{if(!n.NftPurchase)continue;{const{buyer:t}=n.NftPurchase;if(e=Ce(t.address,void 0,a),s=n.NftPurchase.nft,!s)continue;r=Ce(s.address,!0,a)}}if(e===o){if(s||([s]=await Vn(a,[r])),s){const e=wa(a,s);e&&i.push({type:"nftReceived",accountId:t,nftAddress:r,nft:e})}}else!c&&await qa(a,e)?i.push({type:"nftPutUpForSale",accountId:t,nftAddress:r}):i.push({type:"nftSent",accountId:t,nftAddress:r,newOwnerAddress:e})}return[e,i]}async function Vs(t){const{accountId:e,nfts:n,comment:r}=t;let{toAddress:a}=t;const{network:o}=P(e),{address:s}=await hn(e),c=await Bs(o,a);if("error"in c)return c;a=c.resolvedAddress;const u=n.slice(0,i.gR8).map((t=>Qs(t,s,a,r))),d=await Ps(e,u);if(void 0!==d.fee){const t=d.fee;c.fee=Zs(n.length,u.length,t,Ft),c.realFee=Zs(n.length,u.length,t,Mt)}return"error"in d&&(c.error=d.error),c}async function $s(t){const{accountId:e,password:n,nfts:r,toAddress:a,comment:o}=t,{address:s}=await hn(e);return Os({accountId:e,password:n,messages:r.map((t=>Qs(t,s,a,o)))})}function Qs(t,e,n,r){return{payload:t.collectionAddress!==i.KmP||n!==i.pV9&&!i.WVU.includes(n)?Gs(e,n,r):function(t,e,n){const r=J.Address.parse(e).hash.readUint8()>>4;return Gs(t,i.WVU[r],(new J.Builder).storeUint(1609328194,32).storeUint(n,64).endCell(),i.APY)}(e,t.address,t.index),amount:Ft,toAddress:t.address}}function Gs(t,e,n){let r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wt,o=(new J.Builder).storeUint(ae.TransferOwnership,32).storeUint(ge(),64).storeAddress(J.Address.parse(e)).storeAddress(J.Address.parse(t)).storeBit(!1).storeCoins(a);return n&&(r="string"==typeof n?Oe(Pe(n),Math.floor((o.availableBits-Kt)/8)):n),r instanceof Uint8Array?(o.storeBit(0),o=o.storeBuffer(Ls.from(r))):o=o.storeMaybeRef(r),o.endCell()}function Zs(t,e,n,r){let a=t%e;return a>0&&a<e&&(a+=1),T(n,(Math.floor(t/e)*e+a)/e)+BigInt(t)*r}class Xs{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new Xs(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={code:e,data:(0,J.beginCell)().endCell()};return new Xs((0,J.contractAddress)(n,r),r)}async getListNominators(t){return(await t.get("list_nominators",[])).stack.readTuple().items.map((t=>{const e=t.map((t=>({type:"int",value:t}))),n=new J.TupleReader(e),r=n.readBigNumber().toString(16).padStart(64,"0");return{address:J.Address.parse(`0:${r}`),amount:n.readBigNumber(),pendingDepositAmount:n.readBigNumber(),withdrawRequested:Boolean(n.readNumber())}}))}}var Ys=n(48287).Buffer;let ti;async function ei(){if(ti=await sn.getItem("clientId"),!ti){ti=Ys.from(I(10)).toString("hex");const t=await sn.getItem("referrer");t&&(ti=`${ti}:${t}`),await sn.setItem("clientId",ti)}return ti}async function ni(t,e,n){let r;switch(n.type){case"nominators":if(e<jt.stakeNominators)return{error:x.KL.InvalidAmount};r=await ks({accountId:t,toAddress:n.pool,amount:e+jt.stakeNominators,data:qt}),"fee"in r&&r.fee&&(r.fee=jt.stakeNominators+r.fee);break;case"liquid":r=await ks({accountId:t,toAddress:i.qMf,amount:e+jt.stakeLiquid,data:Fe()}),"fee"in r&&r.fee&&(r.fee=jt.stakeLiquid+r.fee);break;case"jetton":{const{tokenSlug:a,pool:o,period:s}=n,{tokenAddress:i}=Zr(a);r=await ks({accountId:t,toAddress:o,tokenAddress:i,amount:e,data:yt.Ml.stakePayload(s),forwardAmount:jt.stakeJettonsForward});break}}return r}async function ri(t,e,n){const{network:r}=P(t),{address:a}=await hn(t),o=Hr();let s,i;switch(n.type){case"nominators":s=await ks({accountId:t,toAddress:n.pool,amount:jt.unstakeNominators,data:Lt});break;case"liquid":{if(e>n.balance)return{error:x.KL.InsufficientBalance};i=e===n.balance?n.tokenBalance:_(e,o.liquid.currentRate);const c=await si(r,a,i);s=await ks({accountId:t,toAddress:c.toAddress,amount:c.amount,data:c.payload});break}case"jetton":i=e,s=await ks({accountId:t,toAddress:n.stakeWalletAddress,amount:jt.unstakeJettons,data:je(e,!0)})}return{...s,type:n.type,tokenAmount:i}}async function ai(t,e,n,r){let a;const{network:o}=P(t),{address:s}=await hn(t);switch(r.type){case"nominators":a=await Ds({accountId:t,password:e,toAddress:Ce(r.pool,!0,o),amount:n+jt.stakeNominators,data:qt});break;case"liquid":a=await Ds({accountId:t,password:e,toAddress:i.qMf,amount:n+jt.stakeLiquid,data:Fe()});break;case"jetton":{const{tokenSlug:o,pool:s,period:i}=r,{tokenAddress:c}=Zr(o);a=await Ds({accountId:t,password:e,toAddress:s,tokenAddress:c,amount:n,data:yt.Ml.stakePayload(i),forwardAmount:jt.stakeJettonsForward}),"error"in a||(a.toAddress=s);break}}return"error"in a||zr(t,s,{stakedAt:Date.now()}),a}async function oi(t,e,n,r){const{network:a}=P(t),{address:o}=await hn(t);let s;switch(r.type){case"nominators":s=await Ds({accountId:t,password:e,toAddress:Ce(r.pool,!0,a),amount:jt.unstakeNominators,data:Lt});break;case"liquid":{const i=r.instantAvailable?x.Dn.Default:x.Dn.BestRate,c=await si(a,o,n,i);s=await Ds({accountId:t,password:e,toAddress:c.toAddress,amount:c.amount,data:c.payload});break}case"jetton":s=await Ds({accountId:t,password:e,toAddress:r.stakeWalletAddress,amount:jt.unstakeJettons,data:je(n,!0)})}return s}async function si(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.Dn.Default;const a=await ke(t,e,i.Kzb),o=function(t){const{queryId:e,amount:n,responseAddress:r,waitTillRoundEnd:a,fillOrKill:o}=t,s=function(t,e){return(new J.Builder).storeUint(Number(t),1).storeUint(Number(e),1).asCell()}(a,o);return(new J.Builder).storeUint(re.Burn,32).storeUint(null!=e?e:0,64).storeCoins(n).storeAddress(J.Address.parse(r)).storeBit(1).storeRef(s).asCell()}({amount:n,responseAddress:e,fillOrKill:r===x.Dn.Instant,waitTillRoundEnd:r===x.Dn.BestRate});return{amount:jt.unstakeLiquid,toAddress:a,payload:o}}async function ii(t,e,n){const{network:r}=P(t),{address:a}=await hn(t),{loyaltyType:o,shouldUseNominators:s,type:c}=n,u={accountId:t,backendState:n,commonData:e,address:a,loyaltyType:o,network:r},d=[ci(u)];for(const t of e.jettonPools)d.push(ui(u,t));return(s||"nominators"===c)&&d.push(async function(t){var e,n,r,a;let{network:o,address:s,backendState:c,commonData:u}=t;const d=c.balance,{address:l,apy:f}=c.nominatorsPool,m=Date.now()>u.prevRound.unlock,p=m?u.round.start:u.prevRound.start,w=m?u.round.unlock:u.prevRound.unlock;let h;if("nominators"===c.type){const t=Se(o).open(new Xs(J.Address.parse(l))),e=await t.getListNominators(),n=J.Address.parse(s);h=e.find((t=>t.address.equals(n)))}return{type:"nominators",id:"nominators",tokenSlug:i.Tu9.slug,balance:h?d:0n,annualYield:f,yieldType:"APY",pool:l,start:p,end:w,pendingDepositAmount:null!==(e=null===(n=h)||void 0===n?void 0:n.pendingDepositAmount)&&void 0!==e?e:0n,isUnstakeRequested:null!==(r=null===(a=h)||void 0===a?void 0:a.withdrawRequested)&&void 0!==r&&r}}(u)),Promise.all(d)}async function ci(t){var e,n;let{accountId:r,address:a,backendState:o,commonData:s,loyaltyType:c}=t;const{currentRate:u,collection:d}=s.liquid,l=await async function(t){const{network:e}=P(t);if("mainnet"!==e)return 0n;const{address:n}=await hn(t),r=await ke(e,n,i.Kzb);return await ja(e,r)?Me(e,r):0n}(r);let f=0n;if(d){const t=await Mr.find({accountId:r,collectionAddress:d});for(const e of null!=t?t:[]){var m;const t=null===(m=e.name)||void 0===m||null===(m=m.match(/Bill for (?<amount>[\d.]+) Pool Jetton/))||void 0===m||null===(m=m.groups)||void 0===m?void 0:m.amount;t&&(f+=b(t))}}const p=Lr(r,a),w=Math.max(null!==(e=p.stakedAt)&&void 0!==e?e:0,null!==(n=o.stakedAt)&&void 0!==n?n:0),h=Date.now()-w>i.NFS?s.liquid.available:0n;let g=s.liquid.apy;c&&c in s.liquid.loyaltyApy&&(g=s.liquid.loyaltyApy[c]);const y=T(l+f,u);return{type:"liquid",id:"liquid",tokenSlug:i.Tu9.slug,pool:i.qMf,balance:y,annualYield:g,yieldType:"APY",tokenBalance:l,isUnstakeRequested:f>0n,unstakeRequestAmount:f,instantAvailable:h}}async function ui(t,e){const{network:n}=t,{pool:r,token:a}=e,{decimals:o,slug:s}=Xr(a),i=Se(n).open(yt.Ml.createFromAddress(J.Address.parse(r))),c=await i.getStorageData(),{tvl:u,rewardJettons:d}=Le(c),{rewardsDeposits:l}=Object.values(d)[0],f=Math.floor(Date.now()/1e3);let m=0n;for(const{startTime:t,endTime:e,distributionSpeed:n}of Object.values(l))t<f&&e>f&&(m+=n);const p=function(t){let{tvl:e,dailyReward:n,decimals:r}=t;if(!e)return 0;const a=S(n,r).div(S(e,r)).mul(Uo).mul(100).toFixed(2);return Number(a)}({tvl:u,dailyReward:m,decimals:o}),{address:w}=t,h=e.periods[0],g=await _e(n,r,h.period,w),y=await g.getStorageData().catch((()=>{}));let v,A=0n,b=0n;if(y){var E;const t=await ke(n,r,a),e=y&&gt.sH.getAvailableRewards(y,c);A=null!==(E=e&&e[t])&&void 0!==E?E:0n,b=y.jettonBalance,v=Object.keys(e)}return{type:"jetton",id:r,pool:r,tokenAddress:a,tokenSlug:s,annualYield:p,yieldType:"APR",balance:b,unclaimedRewards:A,poolWallets:v,stakeWalletAddress:Ce(g.address,!0),tokenAmount:0n,tvl:u,dailyReward:m,period:h.period}}async function di(t){const{address:e}=await hn(t),n=await async function(t){const e=await ei(),n=await Ar(`/staking/state/${t}`,void 0,{"X-App-ClientID":e});if(n.balance=b(n.balance),n.totalProfit=b(n.totalProfit),!function(t){return i.aPk.some((e=>t.endsWith(e)))}(n.nominatorsPool.address))throw Error("Unexpected pool address, likely a malicious activity");return n}(e);return{...n,nominatorsPool:{...n.nominatorsPool,start:1e3*n.nominatorsPool.start,end:1e3*n.nominatorsPool.end}}}function li(t,e,n){return Ds({accountId:t,password:e,toAddress:n.stakeWalletAddress,amount:jt.claimJettons,data:qe(n.poolWallets)})}var fi=n(48287).Buffer;function mi(t){let e=new J.Cell;return t&&(t instanceof J.Cell?e=t:"string"==typeof t?t.length>0&&(e=(new J.Builder).storeUint(0,32).storeStringTail(t).asCell()):e=(new J.Builder).storeBuffer(fi.from(t)).asCell()),e.toBoc().toString("base64")}async function pi(t){try{return await Se(t).getMasterchainInfo(),!0}catch(t){return!1}}function wi(t){return"nft:transfer"===(null==t?void 0:t.type)}function hi(t){return"tokens:transfer"===(null==t?void 0:t.type)||"tokens:transfer-non-standard"===(null==t?void 0:t.type)}const gi=[i.yTE,i.InW],yi=1000000000n;async function vi(t,e,n,r){const a=(a,o)=>{(0,Ho.v)(a,o,{network:t,address:e,request:n,transfers:r})};a(r.length<=2,"Too many transfers");const[o,s]=r;if(n.from===i.Tu9.symbol){const e=b(n.fromAmount)+b(n.ourFee)+yi,{isSwapAllowed:r,codeHash:i}=await Ja(t,o.toAddress);a(!!r,`Not allowed swap contract: ${i}`),a(o.amount<=e,"Main transfer amount is too big"),s&&(a(s.amount<=o.amount,"Fee transfer amount is too big"),a(s.amount+o.amount<e,"Total amount is too big"),a(gi.includes(Ce(s.toAddress,!1)),"Unexpected fee transfer address"))}else{var c,u;const r=Xr(n.from);a(!!r,'Unknown "from" token');const i=b(n.fromAmount,r.decimals)+b(null!==(c=n.ourFee)&&void 0!==c?c:0,r.decimals)+b(null!==(u=n.dieselFee)&&void 0!==u?u:0,r.decimals),d=yi,l=await ke(t,e,r.tokenAddress),f=await da(t,o.toAddress,o.payload);a(o.toAddress===l,"Main transfer address is not the token wallet address"),a(hi(f),"Main transfer payload is not a token transfer");const{amount:m,destination:p}=f;a(m<=i,"Main transfer token amount is too big"),a(o.amount<d,"Main transfer TON amount is too big");const{isSwapAllowed:w}=await Ja(t,p);if(a(!!w,"Main transfer destination is not a swap smart contract"),s){const e=await da(t,s.toAddress,s.payload);a(s.amount+o.amount<d,"Total TON amount is too big"),a(s.toAddress===l,"Fee transfer address is not the token wallet address"),a(hi(e),"Fee transfer payload is not a token transfer");const{amount:n,destination:r}=e;a(m+n<=i,"Total token amount is too big"),a(gi.includes(Ce(r,!1)),"Unexpected fee transfer destination")}}}const Ai=new Set;let bi=!0;function Ei(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;const n=new Co;return Ai.add(n),n.promise.then((()=>{Ai.delete(n)})),(0,yo.v7)(bi?t:e).then(n.resolve),n.promise}function Si(t){bi=t,t&&Ai.forEach((t=>t.resolve()))}function Ii(t,e){var n;return{...e,collectionAddress:null!==(n=e.collectionAddress)&&void 0!==n?n:"",accountId:t}}function ki(t){return{...t,id:(e=t.id,Mn(e,void 0,"backend-swap")),kind:"swap",from:Bi(t,t.from),to:Bi(t,t.to),shouldLoadDetails:!t.cex};var e}function Bi(t,e){return e===i.Tu9.symbol?i.Tu9.slug:t.cex?null!==(n=null===(r=Xr(e))||void 0===r?void 0:r.slug)&&void 0!==n?n:e:ta("ton",e);var n,r}async function Di(t){const{address:e,swapId:n,authToken:r,msgHash:a,error:o}=t;await vr(`/swap/history/${e}/${n}/update`,{swapVersion:i.AuB,msgHash:a,error:o},{method:"PATCH",authToken:r})}async function _i(t,e,n,r){if(!e.length||"testnet"===P(t).network)return e;try{var a;const{address:o}=await hn(t),s=e[0].timestamp,c=e[e.length-1].timestamp,[u,d]=s<c?[s,r?Date.now():c]:[c,r?Date.now():s],l=e.map((t=>{let{id:e}=t;return Nn(e).hash})),f=await function(t,e){return vr(`/swap/history/${t}`,{...e,swapVersion:i.AuB})}(o,{fromTimestamp:u,toTimestamp:d,asset:n?null!==(a=Zr(n).tokenAddress)&&void 0!==a?a:i.Tu9.symbol:void 0,hashes:l,isCex:!0});if(!f.length)return e;const m=[],p=new Set;for(const t of f)t.hashes.forEach((t=>p.add(t))),t.timestamp>u&&t.timestamp<d&&m.push(ki(t));for(const t of e)"transaction"===t.kind&&p.has(Nn(t.id).hash)?m.push({...t,shouldHide:!0}):m.push(t);return m.sort(Un),m}catch(t){return(0,C.SJ)("swapReplaceCexActivities",t),e}}const Ti=function(){const t=new Set;function e(e){t.delete(e)}return{runCallbacks:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((t=>{t(...n)}))},addCallback:function(n){return t.add(n),()=>{e(n)}},removeCallback:e,hasCallbacks:function(){return Boolean(t.size)}}}();var Ci=n(48287).Buffer;async function Ri(t,e,n){const r=e.filter((t=>"ton"===t.chain&&!t.codeHash&&["LP","STAKED","POOL"].some((e=>t.symbol.toUpperCase().includes(e)))));if(!r.length)return;const a=rt(r,"tokenAddress");try{const e=await async function(t,e){const{accounts:n}=await aa(t,"/accountStates",{address:e.join(",")}),r=Object.fromEntries(e.map((t=>[Re(t),t])));for(const t of n)t.address=r[t.address.toLowerCase()];return rt(n,"address")}(t,r.map((t=>t.tokenAddress)));for(const t of Object.keys(e))a[t]&&(a[t].codeHash=Ci.from(e[t].code_hash,"base64").toString("hex"));await $r(Object.values(a).filter((t=>t.codeHash)),n,!0)}catch(t){(0,C.SJ)("Failed to fetch contract code hashes for tokens",t)}}async function xi(t){const{network:e}=P(t),n="testnet"===e,{address:r}=await hn(t);return Ar(`/vesting/${r}`,{isTestnet:n})}const Pi=1100,Oi=1e4,Ui=3e4,Ni=1e4,Fi=6e4,Mi=5e3,Wi=1e4,Ki=3e5,ji=9e5,qi=1e4,Li=6e4,zi=3e4,Hi=6e4,Ji={};function Vi(t,e,n){!async function(t,e,n){delete Ji[t];const{network:r}=P(t);let a,o,s,{address:c,isInitialized:u}=await hn(t),d=Math.round(Date.now()/1e3),l=0;async function f(t,e,n){const{balance:a,lastTxId:o}=await Ha(r,c),s=void 0!==a&&a!==t[i.Tu9.slug];return e[i.Tu9.slug]=a,s&&n.push(i.Tu9.slug),{lastTxId:o,isToncoinBalanceChanged:s}}async function m(n){if(Date.now()-l<Fi){if(n){const n=await Js(t,d).catch(Qi);$i(e,t),n&&([d,a]=n,async function(t,e,n){e.filter((t=>!("nftReceived"===t.type&&t.nft.isHidden))).forEach(n);for(const n of e)if("nftSent"===n.type){const e=[t,n.nftAddress];await Mr.delete(e)}else if("nftReceived"===n.type){const e=Ii(t,n.nft);await Mr.put(e)}else if("nftPutUpForSale"===n.type){const e=[t,n.nftAddress];await Mr.update(e,{isOnSale:!0})}}(t,a,e))}}else{const n=await zs(t).catch(Qi);l=Date.now(),$i(e,t),n&&(d=Math.round(Date.now()/1e3),async function(t,e,n){n({type:"updateNfts",accountId:t,nfts:e});const r=e.map((e=>Ii(t,e)));await Mr.deleteWhere({accountId:t}),await Mr.bulkPut(r)}(t,n,e))}}async function p(n,a,s,i){let c=[];if(n||o&&o<Date.now()){o=n?Date.now()+Ui:void 0,c=await ds(t),$i(e,t);const u=c.filter(Boolean).map((t=>{let{token:e}=t;return e}));await $r(u,e),await Ri(r,u,e),c.forEach((t=>{let{slug:e,balance:n}=t;s[e]=n,a[e]!==n&&i.push(e)}))}return c}async function w(r,a){(r||s&&!(s>Date.now()))&&(s=r?Date.now()+Ni:void 0,n=n?await async function(t,e,n){let r=await es(t,void 0,void 0,e,No);return r.length&&(e=r[0].timestamp),r=await _i(t,r,void 0,!0),r.slice().reverse().forEach((t=>{Ti.runCallbacks(t)})),n({type:"newActivities",chain:"ton",activities:r,accountId:t}),e}(t,n,e):await async function(t,e,n){const r={};let a,o=[];return await Promise.all(e.map((async e=>{const n=e!==i.Tu9.slug?e:void 0;let s=await es(t,n,void 0,No);i.dGN.has(e)&&(s=await _i(t,s,e,!0)),e===i.Tu9.slug&&s.length&&(a=s[0].timestamp,o=s,s=s.filter((t=>Wn(t).includes(i.Tu9.slug)))),r[e]=s}))),n({type:"initialActivities",chain:"ton",accountId:t,mainActivities:o,bySlug:r}),a}(t,Object.keys(a),e))}for(;Qo(e,t);){try{var h;e({type:"updatingStatus",kind:"activities",isUpdating:!0}),e({type:"updatingStatus",kind:"balance",isUpdating:!0});const n={},a=[],o=null!==(h=Ji[t])&&void 0!==h?h:{},{isToncoinBalanceChanged:s}=await f(o,n,a);$i(e,t),await p(s,o,n,a),Ji[t]=n,a.length&&e({type:"updateBalances",accountId:t,chain:"ton",balances:n}),e({type:"updatingStatus",kind:"balance",isUpdating:!1}),await Promise.all([w(s,n),m(s)]),e({type:"updatingStatus",kind:"activities",isUpdating:!1}),s&&!u&&await ja(r,c)&&(u=!0,await bn(t,{isInitialized:u}))}catch(t){if(t instanceof Fo.Ww)return;(0,C.SJ)("setupBalanceBasedPolling",t)}await Ei(Pi,Oi)}}(t,e,n),async function(t,e){const n=await yn(t);if("bip39"===n.type)return;const r="ledger"===n.type,{publicKey:a,version:o}=n.ton,s=St(a),{network:c}=P(t),u=(r?i.iQn:i.eZ2).filter((t=>t!==o));let d;for(;Qo(e,t);){try{const n=(await Za(c,s,u)).filter((t=>!!t.lastTxId||"W5"===t.version)),r=n.map((t=>{let{wallet:e,...n}=t;return n}));if(!Qo(e,t))return;zo(n,d)||(d=n,e({type:"updateWalletVersions",accountId:t,currentVersion:o,versions:r}))}catch(t){(0,C.SJ)("setupWalletVersionsPolling",t)}await Ei(Ki,ji)}}(t,e),i.TI6||(async function(t,e){const{network:n}=P(t);if("mainnet"!==n)return;let r;for(;Qo(e,t);){try{const n=Hr(),a=await di(t),{shouldUseNominators:o,totalProfit:s}=a,i=await ii(t,n,a);if(!Qo(e,t))return;zo(i,r)||(r=i,e({type:"updateStaking",accountId:t,states:i,common:n,totalProfit:s,shouldUseNominators:o}))}catch(t){(0,C.SJ)("setupStakingPolling",t)}await Ei(Mi,Wi)}}(t,e),async function(t,e){let n;for(;Qo(e,t);){try{const r=await xi(t);if(!Qo(e,t))return;zo(n,r)||(n=r,e({type:"updateVesting",accountId:t,vestingInfo:r}))}catch(t){(0,C.SJ)("setupVestingPolling",t)}await Ei(qi,Li)}}(t,e))}function $i(t,e){if(!Qo(t,e))throw new Fo.Ww}function Qi(t){(0,C.SJ)("Polling error",t)}async function Gi(t){let e,n={};const r=t;async function a(){const t=await vn();n={},Object.entries(t).filter((t=>{let[n]=t;return n!==e})).forEach((t=>{let[e,r]=t;const{network:a}=P(e),{address:o}=r.ton,s={id:e,network:a,address:o};n[o]||(n[o]=[]),n[o].push(s)}))}async function o(t,e,n,r){const{balance:a,lastTxId:o}=await Ha(t.network,t.address),s=void 0!==a&&a!==e[i.Tu9.slug];return n[i.Tu9.slug]=a,s&&r.push(i.Tu9.slug),{lastTxId:o,isToncoinBalanceChanged:s}}async function s(n,a,o,s){const i=await ds(n.id);if(!e)throw new Fo.Ww;if($i(r,e),!i)return;const c=i.filter(Boolean).map((t=>{let{token:e}=t;return e}));await $r(c,t),await Ri(n.network,c,t),i.forEach((t=>{let{slug:e,balance:n}=t;o[e]=n,a[e]!==n&&s.push(e)}))}for(;Go(r);){try{e=fn(),await a();for(const e of Object.keys(n)){var c;const a=n[e][0],i=null!==(c=Ji[a.id])&&void 0!==c?c:{},u={},d=[],{isToncoinBalanceChanged:l}=await o(a,i,u,d);Go(r)&&l&&(await s(a,i,u,d),Ji[a.id]=u,d.length&&n[a.address].forEach((e=>{t({type:"updateBalances",accountId:e.id,chain:"ton",balances:u})})))}}catch(t){if(t instanceof Fo.Ww)break;(0,C.SJ)("setupBalancesPolling",t)}await Ei(zi,Hi)}}var Zi=n(17718);let Xi;const Yi={},tc=ho("tron");function ec(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mainnet";return Xi||(Xi={mainnet:new Zi.TronWeb({fullHost:tc.mainnet.apiUrl}),testnet:new Zi.TronWeb({fullHost:tc.testnet.apiUrl})}),Xi[t]}async function nc(t){if(!(t in Yi)){const e=await ec(t).trx.getChainParameters(),n=e.find((t=>"getEnergyFee"===t.key)).value,r=e.find((t=>"getTransactionFee"===t.key)).value;Yi[t]={energyUnitFee:n,bandwidthUnitFee:r}}return Yi[t]}async function rc(t,e,n,r,a){const{network:o}=P(t),{address:s}=await gn(t);if(e===i.X7T.slug){const t=await async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=ho("tron")[t].apiUrl,a=new URL(`${r}/v1/accounts/${e}/transactions`);return(await(0,jn.x6)(a.toString(),n)).data}(o,s,{min_timestamp:r?r+1e3:void 0,max_timestamp:n?n-1e3:void 0,limit:a});return t.map((t=>function(t,e){var n;const{raw_data:r,txID:a,energy_fee:o,net_fee:s,block_timestamp:c}=e,u=BigInt(null!==(n=r.contract[0].parameter.value.amount)&&void 0!==n?n:0),d=Zi.TronWeb.address.fromHex(r.contract[0].parameter.value.owner_address),l=Zi.TronWeb.address.fromHex(r.contract[0].parameter.value.to_address),f=l===t;return{id:a,kind:"transaction",txId:a,timestamp:c,fromAddress:d,toAddress:l,amount:f?u:-u,slug:i.X7T.slug,isIncoming:f,normalizedAddress:f?d:l,fee:BigInt(o+s),shouldHide:"TransferAssetContract"===r.contract[0].type}}(s,t))).filter(Boolean)}{const{tokenAddress:t}=Zr(e),c=await async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=ho("tron")[t].apiUrl,a=new URL(`${r}/v1/accounts/${e}/transactions/trc20`);return(await(0,jn.x6)(a.toString(),n)).data}(o,s,{contract_address:t,min_timestamp:r?r+1e3:void 0,max_timestamp:n?n-1e3:void 0,limit:a});return c.map((t=>function(t,e){const{transaction_id:n,block_timestamp:r,from:a,to:o,value:s,token_info:c}=e,u=BigInt(s),d=o===t;return{id:n,kind:"transaction",txId:n,timestamp:r,fromAddress:a,toAddress:o,amount:d?u:-u,slug:ta(i.X7T.chain,c.address),isIncoming:d,normalizedAddress:d?a:o,fee:0n}}(s,t)))}}async function ac(t,e,n,r){const a=(await Promise.all([rc(t,i.X7T.slug,e,void 0,n),...r.map((r=>rc(t,r,e,void 0,n)))])).filter((t=>t.length));if(!a.length)return[];const o=a.reduce(((t,e)=>t.length>e.length?t:t.length<e.length||t[t.length-1].timestamp<e[e.length-1].timestamp?e:t),[]),s=o[o.length-1].timestamp,[c,...u]=a;return oc(c,u.flat()).flat().filter((t=>{let{timestamp:e}=t;return e>=s})).sort(Un)}function oc(t,e){const n=rt(e,"id"),r=[];for(const e of t){const t=n[e.id];e.toAddress?r.push(e):t&&(t.fee=e.fee)}return[r,e]}async function sc(t,e){const n=ec(t);return BigInt(await n.trx.getBalance(e))}async function ic(t,e,n){const r=await async function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0;try{const o=await t.transactionBuilder.triggerSmartContract(e,n,{_isConstant:!0},r,a);return o&&o.result?o.constant_result:[]}catch(t){return(0,C.SJ)("callContract",t),[]}}(ec(t),e,"balanceOf(address)",[{type:"address",value:n}],n);return r.length?BigInt(`0x${r[0]}`):0n}const cc=1100,uc=1e4,dc=3e4,lc=6e4,fc={};async function mc(t,e,n){const{network:r}=P(t),{address:a}=await gn(t),{usdtAddress:o}=ho("tron")[r],s=ta("tron",o),c=[i.X7T.slug,s];for(;Qo(e,t);){try{fc[t]||(fc[t]={});const u=fc[t],[d,l]=await Promise.all([sc(r,a),ic(r,o,a)]);d===u[i.X7T.slug]&&l===u[o]||(e({type:"updateBalances",accountId:t,chain:"tron",balances:{[i.X7T.slug]:d,[s]:l}}),n=ir(n)?await wc(t,c,e):await hc(t,n,c,e),u[i.X7T.slug]=d,u[o]=l)}catch(t){(0,C.SJ)("tron:setupPolling",t)}await Ei(cc,uc)}}async function pc(t){for(;Go(t);){try{const e=await vn(),n=fn();for(const[r]of Object.entries(e).filter((t=>{let[e,r]=t;return"bip39"===r.type&&e!==n}))){const{network:e}=P(r),{address:n}=await gn(r),{usdtAddress:a}=ho("tron")[e],o=ta("tron",a),[s,c]=await Promise.all([sc(e,n),ic(e,a,n)]);fc[r]||(fc[r]={});const u=fc[r];s===u[i.X7T.slug]&&c===u[o]||(t({type:"updateBalances",accountId:r,chain:"tron",balances:{[i.X7T.slug]:s,[o]:c}}),u[i.X7T.slug]=s,u[o]=c)}}catch(t){(0,C.SJ)("tron:setupPolling",t)}await Ei(dc,lc)}}async function wc(t,e,n){const r={},a={},o=await Promise.all(e.map((async e=>{var n;const o=await rc(t,e,void 0,void 0,No);return r[e]=null===(n=o[0])||void 0===n?void 0:n.timestamp,a[e]=o,o}))),[s,...i]=o,c=oc(s,i.flat()).flat().sort(Un);return c.slice().reverse().forEach((t=>{Ti.runCallbacks(t)})),n({type:"initialActivities",chain:"tron",accountId:t,mainActivities:c,bySlug:a}),r}async function hc(t,e,n,r){const a={},o=await Promise.all(n.map((async n=>{var r,o;let s=e[n];const i=await rc(t,n,void 0,s,No);return s=null!==(r=null===(o=i[0])||void 0===o?void 0:o.timestamp)&&void 0!==r?r:s,a[n]=s,i}))),[s,...i]=o,c=oc(s,i.flat()).flat().sort(Un);return c.slice().reverse().forEach((t=>{Ti.runCallbacks(t)})),r({type:"newActivities",chain:"tron",activities:c,accountId:t}),a}const gc={transferTrc20Estimated:28214970n},yc=1000000n;var vc=n(48287).Buffer;const Ac=65;async function bc(t){const{accountId:e,amount:n,toAddress:r,tokenAddress:a}=t,{network:o}=P(e),s=ec(o),i={};try{if(!s.isAddress(r))return{error:x.KL.InvalidToAddress};i.resolvedAddress=r;const{address:t}=await gn(e),[c,u,{energyUnitFee:d,bandwidthUnitFee:l}]=await Promise.all([sc(o,t),s.trx.getBandwidth(t),nc(o)]);let f;if(a)f=await async function(t,e){const{network:n,tokenAddress:r,toAddress:a,energyUnitFee:o,fromAddress:s}=e;let{amount:i}=e;const c=await ic(n,r,s);if(!c)return gc.transferTrc20Estimated;(void 0===i||i>c)&&(i=1n);const{energy_required:u}=await t.transactionBuilder.estimateEnergy(r,"transfer(address,uint256)",{},[{type:"address",value:a},{type:"uint256",value:Number(i)}],s);return BigInt(o*u)}(s,{network:o,toAddress:r,tokenAddress:a,amount:n,energyUnitFee:d,fromAddress:t});else{const[e,a]=await Promise.all([s.transactionBuilder.sendTrx(r,Number(null!=n?n:1),t),s.trx.getAccount(r)]),o=69+vc.from(e.raw_data_hex,"hex").byteLength+Ac;f=u>o?0n:BigInt(o)*BigInt(l),void 0===a.balance&&(f+=yc)}return i.fee=f,i.realFee=f,c>=(a?f:(null!=n?n:0n)+f)||(i.error=x.KL.InsufficientBalance),i}catch(t){return(0,C.SJ)("tron:checkTransactionDraft",t),{...(0,Fo.QS)(t),...i}}}async function Ec(t){const{accountId:e,password:n,toAddress:r,amount:a,fee:o=0n,tokenAddress:s}=t,{network:i}=P(e);try{const t=ec(i),c=await yn(e),{address:u}=c.tron;if(!(await sc(i,u)>=(s?o:o+a)))return{error:x.jf.InsufficientBalance};const d=await On(e,n,c),l=t.fromMnemonic(d.join(" ")).privateKey.slice(2);if(s){const{transaction:e}=await async function(t,e){const{amount:n,tokenAddress:r,toAddress:a,feeLimit:o,fromAddress:s}=e,{transaction:i}=await t.transactionBuilder.triggerSmartContract(r,"transfer(address,uint256)",{feeLimit:Number(o)},[{type:"address",value:a},{type:"uint256",value:Number(n)}],s);return{transaction:i}}(t,{toAddress:r,tokenAddress:s,amount:a,feeLimit:o,fromAddress:u}),n=await t.trx.sign(e,l);return{amount:a,toAddress:r,txId:(await t.trx.sendRawTransaction(n)).transaction.txID}}{const e=await t.trx.sendTransaction(r,Number(a),{privateKey:l});if("code"in e&&(!("result"in e)||!e.result)){const t="message"in e&&e.message?function(t){let e="";for(let n=0;n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.slice(n,n+2),16));return e}(e.message):e.code.toString();return(0,C.SJ)("submitTransfer",{error:t,result:e}),{error:t}}return{amount:a,toAddress:r,txId:e.transaction.txID}}}catch(t){return(0,C.SJ)("submitTransfer",t),{error:x.jf.UnsuccesfulTransfer}}}function Sc(t,e){const{address:n,publicKey:r}=ec(t).fromMnemonic(e.join(" "));return{type:"tron",address:n,publicKey:r,index:0}}function Ic(t){const e=ec(t).isConnected();return Boolean(e)}const kc={ton:r,tron:a},Bc={};async function Dc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(const e of null!==(a=Bc[t])&&void 0!==a?a:[]){var a;try{await e(...n)}catch(e){(0,C.SJ)(`callHooks:${t}`,e)}}}const _c={};let Tc,Cc;function Rc(t){Tc=t}function xc(t,e){const n=Uc(e);_c[t]=e,Tc&&Go(Tc)&&(n&&Tc({type:"updateActiveDapp",accountId:n}),Tc({type:"updateActiveDapp",accountId:t,origin:e}))}function Pc(t){return _c[t]}function Oc(t){const e=Uc(t);return!!e&&(Nc(e),!0)}function Uc(t){return Object.keys(_c).find((e=>t===_c[e]))}function Nc(t){return!!_c[t]&&(delete _c[t],Tc&&Go(Tc)&&Tc({type:"updateActiveDapp",accountId:t}),!0)}function Fc(){for(const[t,e]of Object.entries(_c))e&&(delete _c[t],Tc({type:"updateActiveDapp",accountId:t}))}async function Mc(t,e){var n;return null===(n=await En(t,"dapps"))||void 0===n?void 0:n[e]}async function Wc(t,e){const n=await Lc(t);n[e.origin]=e,await In(t,"dapps",n)}async function Kc(t,e,n){const r=await Lc(t);return e in r&&(function(t,e){return _c[t]===e}(t,e)&&Nc(t),delete r[e],await In(t,"dapps",r),Tc&&Go(Tc)&&Tc({type:"dappDisconnect",accountId:t,origin:e}),n||await Dc("onDappDisconnected",t,e),await Dc("onDappsChanged"),!0)}async function jc(t){Nc(t);const e=Object.keys(await Lc(t));await In(t,"dapps",{}),e.forEach((e=>{Tc({type:"dappDisconnect",accountId:t,origin:e}),Dc("onDappDisconnected",t,e)})),await Dc("onDappsChanged")}async function qc(t){return Object.values(await Lc(t))}async function Lc(t){return await En(t,"dapps")||{}}function zc(){return sn.getItem("dapps")}async function Hc(t){await Sn(t,"dapps"),Dc("onDappsChanged")}async function Jc(){await sn.removeItem("dapps"),await Dc("onDappsChanged")}function Vc(t){return kn(t,"dapps")}function $c(t){let{isLandscape:e}=t;return Ar("/v2/dapp/catalog",{isLandscape:e})}async function Qc(){var t;return null!==(t=await sn.getItem("baseCurrency"))&&void 0!==t?t:i.wOb}function Gc(t){return sn.setItem("baseCurrency",t)}const Zc=new Promise((t=>{Cc=t}));function Xc(){Cc()}async function Yc(){await Zc}const{ton:tu}=kc;function eu(t,e){const{network:n}=P(t);return tu.fetchToken(n,e)}function nu(t,e,n){return kc.ton.resolveTokenWalletAddress(t,e,n)}function ru(t,e){return kc.ton.resolveTokenAddress(t,e)}function au(t){return kc.ton.getAccountTokenBalances(t)}function ou(t,e){return kc.ton.getTokenBalances(e,t)}function su(t,e){const n=kc.ton,r=Xr(t);return n.getToncoinAmountForTransfer(r,e)}let iu;const{ton:cu,tron:uu}=kc;function du(t){iu=t}async function lu(t,e,n,r,a){let o;try{return o="ton"===e?await kc[e].fetchActivitySlice(t,n,r,void 0,a):await kc[e].getTokenTransactionSlice(t,n,r,void 0,a),o=await _i(t,o,n),o}catch(t){return(0,C.SJ)("fetchActivitySlice",t),(0,Fo.QS)(t)}}async function fu(t,e,n,r){try{const{type:a}=await yn(t);let o=await cu.fetchActivitySlice(t,void 0,n,void 0,e);if("bip39"!==a)return o=await _i(t,o),o;const s=function(t,e){if(!t.length&&!e.length)return[];if(!t.length&&e.length)return e;if(!e.length&&t.length)return t;const n=Math.max(t[t.length-1].timestamp,e[e.length-1].timestamp);return[...t,...e].filter((t=>{let{timestamp:e}=t;return e>=n})).sort(Un)}(o,await uu.getAllTransactionSlice(t,n,e,r));return await _i(t,s)}catch(t){return(0,C.SJ)("fetchAllActivitySlice",t),(0,Fo.QS)(t)}}function mu(t,e){return kc[t].checkTransactionDraft(e)}async function pu(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{accountId:r,password:a,toAddress:o,amount:s,tokenAddress:i,comment:c,fee:u,realFee:d,shouldEncrypt:l,isBase64Data:f,withDiesel:m,dieselAmount:p,isGaslessWithStars:w}=e,h="string"==typeof e.stateInit?J.Cell.fromBase64(e.stateInit):e.stateInit,g=await wn(r,t);let y;if(y=m&&"ton"===t?await cu.submitTransferWithDiesel({accountId:r,password:a,toAddress:o,amount:s,tokenAddress:i,data:c,shouldEncrypt:l,dieselAmount:p,isGaslessWithStars:w}):await kc[t].submitTransfer({accountId:r,password:a,toAddress:o,amount:s,tokenAddress:i,data:c,shouldEncrypt:l,isBase64Data:f,stateInit:h,fee:u}),"error"in y)return y;if(!n)return y;const v=i?ta(t,i):ho(t).nativeToken.slug;let A;if("msgHash"in y){const{encryptedComment:e,msgHash:n}=y;A=vu(r,t,{amount:s,fromAddress:g,toAddress:o,comment:l?void 0:c,encryptedComment:e,fee:null!=d?d:0n,slug:v,externalMsgHash:n,extra:{..."withW5Gasless"in y&&{withW5Gasless:y.withW5Gasless}}}),"paymentLink"in y&&y.paymentLink&&iu({type:"openUrl",url:y.paymentLink,isExternal:!0})}else{const{txId:e}=y;A=vu(r,t,{txId:e,amount:s,fromAddress:g,toAddress:o,comment:c,fee:null!=d?d:0n,slug:v})}return{...y,txId:A.txId}}async function wu(t){const{network:e}=P(t),{address:n}=await hn(t);return(await Po(e,n)).id}async function hu(t,e,n){const{msgHash:r}=await cu.sendSignedMessage(t,e,n);return vu(t,"ton",{...e.localActivity,externalMsgHash:r}).txId}function gu(t){var e;null===(e=Oo(t))||void 0===e||e.resolve()}function yu(t,e,n,r){return kc.ton.decryptComment(t,e,n,r)}function vu(t,e,n,r){const{network:a}=P(t),{toAddress:o}=n;let s;s=n.normalizedAddress?n.normalizedAddress:"ton"===e?cu.normalizeAddress(o,a):o;const i=function(t,e,n){var r;const{amount:a,...o}=t,s=Fn(null!==(r=t.txId)&&void 0!==r?r:t.externalMsgHash,n);return $o({...o,id:s,kind:"transaction",txId:s,timestamp:Date.now(),isIncoming:!1,amount:-a,normalizedAddress:e})}(n,s,r);return iu({type:"newLocalActivity",activity:i,accountId:t}),i}function Au(t,e){return kc.ton.fetchEstimateDiesel(t,e)}function bu(t,e){return kc.ton.fetchActivityDetails(t,e)}const{ton:Eu}=kc;function Su(){}function Iu(t,e,n){return Eu.checkStakeDraft(t,e,n)}function ku(t,e,n){return Eu.checkUnstakeDraft(t,e,n)}async function Bu(t,e,n,r,a){const{address:o}=await hn(t),s=await Eu.submitStake(t,e,n,r);if("error"in s)return!1;let c;return r.tokenSlug,i.Tu9.slug,c=vu(t,"ton",{amount:n,fromAddress:o,toAddress:s.toAddress,fee:null!=a?a:0n,type:"stake",slug:r.tokenSlug,externalMsgHash:s.msgHash}),{...s,txId:c.txId}}async function Du(t,e,n,r,a){const{address:o}=await hn(t),s=await Eu.submitUnstake(t,e,n,r);if("error"in s)return!1;const c=vu(t,"ton",{amount:s.amount,fromAddress:o,toAddress:s.toAddress,fee:null!=a?a:0n,type:"unstakeRequest",slug:i.Tu9.slug,externalMsgHash:s.msgHash});return{...s,txId:c.txId}}async function _u(t,e,n){const{address:r}=await hn(t);return Ar(`/staking/profits/${r}`,{limit:e,offset:n})}async function Tu(){try{const t=await Ar("/staking/common");t.round.start*=1e3,t.round.end*=1e3,t.round.unlock*=1e3,t.prevRound.start*=1e3,t.prevRound.end*=1e3,t.prevRound.unlock*=1e3,t.liquid.available=b(t.liquid.available),function(t){Kr=t}(t)}catch(t){(0,C.SJ)("tryUpdateLiquidStakingState",t)}}function Cu(t){return Eu.getBackendStakingState(t)}async function Ru(t,e,n,r){const{address:a}=await hn(t),o=await Eu.submitStakingClaim(t,e,n);if("error"in o)return o;const s=vu(t,"ton",{amount:o.amount,fromAddress:a,toAddress:o.toAddress,fee:null!=r?r:0n,slug:i.Tu9.slug,externalMsgHash:o.msgHash});return{...o,txId:s.txId}}var xu=n(48287).Buffer;const Pu=xu.from("MyTonWallet_AuthToken_n6i0k4w8pb");function Ou(t,e){return kc[t].checkApiAvailability(e)}async function Uu(t,e){const n=await hn(t);let{authToken:r}=n;const{publicKey:a,isInitialized:o}=n;if(!r){const a=await kc.ton.fetchPrivateKey(t,e),o=W().sign.detached(Pu,a);r=xu.from(o).toString("base64"),await An(t,{ton:{...n,authToken:r}})}return o||(r+=`:${a}`),r}async function Nu(){try{const[t,e,n]=await Promise.all([vn(),sn.getItem("stateVersion"),sn.getItem("mnemonicsEncrypted")]);return JSON.stringify({accounts:t,stateVersion:e,mnemonicsEncrypted:n})}catch(t){return void(0,C.SJ)("fetchAccountConfigForDebugPurposesOnly",t)}}function Fu(){return!0}function Mu(t,e,n){zr(t,e,n)}async function Wu(t,e,n){try{return await Ar("/onramp-url",{chain:t,address:e,theme:n})}catch(t){return(0,C.SJ)("getMoonpayOnrampUrl",t),(0,Fo.QS)(t)}}const Ku=kc.ton;let ju;function qu(t){ju=t}async function Lu(t,e,n){const{network:r}=P(t),a=await Uu(t,e),{address:o,version:s}=await hn(t);n.walletVersion=s;const{id:i,transfers:c}=await $u(a,n),u=c.map((t=>({...t,amount:BigInt(t.amount),isBase64Payload:!0})));try{await Ku.validateDexSwapTransfers(r,o,n,u);const e=await Ku.checkMultiTransactionDraft(t,u,n.shouldTryDiesel);return"error"in e?(await Di({address:o,swapId:i,authToken:a,error:e.error}),e):{...e,id:i,transfers:c}}catch(t){throw await Di({address:o,swapId:i,authToken:a,error:Hu(t)}),t}}async function zu(t,e,n,r,a){var o;const s=r.id,c=await yn(t),{ton:{address:u}}=c,d=null!==(o=c.ton.authToken)&&void 0!==o?o:await Uu(t,e);try{const o=n.map((t=>({...t,amount:BigInt(t.amount),isBase64Payload:!0})));r.from!==i.Tu9.symbol&&(o[0]=await Ku.insertMintlessPayload("mainnet",u,r.from,o[0]));const c=await Ku.submitMultiTransfer({accountId:t,password:e,messages:o,isGasless:a});if("error"in c)return await Di({address:u,swapId:s,authToken:d,error:c.error}),c;delete c.messages[0].stateInit;const l=Bi(r,r.from),f=Bi(r,r.to),m={...r,id:Fn(c.msgHash),from:l,to:f,kind:"swap",externalMsgHash:c.msgHash,extra:ct({withW5Gasless:c.withW5Gasless})};return ju({type:"newLocalActivity",accountId:t,activity:m}),await Di({address:u,swapId:s,authToken:d,msgHash:c.msgHash}),Dc("onSwapCreated",t,m.timestamp-1),c}catch(t){throw await Di({address:u,swapId:s,authToken:d,error:Hu(t)}),t}}function Hu(t){return"string"==typeof t?t:t.stack}async function Ju(t,e){const{address:n}=await hn(t),r=await Promise.allSettled(e.map((t=>function(t,e){return Ar(`/swap/history/${t}/${e}`,{swapVersion:i.AuB})}(n,t.replace("swap:",""))))),a=[],o=r.map(((t,n)=>{if("rejected"!==t.status)return ki(t.value);t.reason instanceof Fo.K$&&404===t.reason.statusCode&&a.push(e[n])})).filter(Boolean);return{nonExistentIds:a,swaps:o}}async function Vu(t,e){const n=(await hn(t)).version;return vr("/swap/ton/estimate",{...e,swapVersion:i.AuB,walletVersion:n},{isAllowBadRequest:!0})}function $u(t,e){return vr("/swap/ton/build",{...e,swapVersion:i.AuB,isMsgHashMode:!0},{authToken:t})}function Qu(){return Ar("/swap/assets")}function Gu(){return Ar("/swap/ton/tokens")}function Zu(t){return Ar("/swap/pairs",{asset:t})}function Xu(t){return vr("/swap/cex/estimate",t,{isAllowBadRequest:!0})}function Yu(t){return Ar("/swap/cex/validate-address",t)}async function td(t,e,n){const r=await Uu(t,e),{swap:a}=await vr("/swap/cex/createTransaction",{...n,swapVersion:i.AuB},{authToken:r}),o=ki(a);return ju({type:"newActivities",accountId:t,activities:[o]}),Dc("onSwapCreated",t,a.timestamp-1),{swap:a,activity:o}}async function ed(t,e,n){const r=await pu(t,e,!1);if("ton"===t&&"msgHash"in r){const{accountId:t,password:a}=e,{address:o}=await hn(t),s=await Uu(t,a);await Di({address:o,authToken:s,msgHash:r.msgHash,swapId:n})}return r}const nd=3e4,rd=6e4,ad=3e4,od=6e4,sd=6e5,{ton:id,tron:cd}=kc;let ud;async function dd(t){ud=t,await md(),Promise.allSettled([Br(),pd(t,!0),wd(t),Tu()]).then((()=>Xc())),hd(t),ld(),fd(),i.gmk&&(id.setupInactiveAccountsBalancePolling(ud),cd.setupInactiveAccountsBalancePolling(ud))}async function ld(){const t=ud;for(;Go(t);){if(await Ei(nd),!Go(t))return;try{await md(t),await pd(t)}catch(t){(0,C.SJ)("setupBackendPolling",t)}}}async function fd(){const t=ud;for(;Go(t);)await Ei(rd),await Promise.all([Br(),Tu(),hd(t),wd(t)])}async function md(t){t||(t=ud);try{const e=await Qc(),n=await Ar("/prices/current",{base:e});if(!Go(t))return;const r=Jr();r.bySlug=rt(Object.values(n),"slug"),r.baseCurrency=e}catch(t){(0,C.SJ)("tryUpdatePrices",t)}}async function pd(t,e){t||(t=ud),e&&await async function(){return $r(await Wr.all())}();try{let e=await Ar("/known-tokens");if(e=e.map((t=>({...it(t,["minterAddress"]),tokenAddress:t.minterAddress,chain:"ton"}))),!Go(t))return;await $r(e,ud,!0)}catch(t){(0,C.SJ)("tryUpdateTokens",t)}}async function wd(t){t||(t=ud);try{const e=await Qu();if(!Go(t))return;const n=Jr(),r=e.reduce(((t,e)=>{var r,a;return t[e.slug]={...it(e,["blockchain"]),chain:"blockchain"in e?e.blockchain:e.chain,tokenAddress:"contract"in e&&e.contract!==i.Tu9.symbol?e.contract:e.tokenAddress,price:null!==(r=null===(a=n.bySlug[e.slug])||void 0===a?void 0:a.price)&&void 0!==r?r:0},t}),{});ud({type:"updateSwapTokens",tokens:r})}catch(t){(0,C.SJ)("tryUpdateSwapTokens",t)}}async function hd(t){try{const{isLimited:e,isCopyStorageEnabled:n=!1,supportAccountsCount:r=1,now:a,country:o,isUpdateRequired:s}=await Ar("/utils/get-config");if(!Go(t))return;ud({type:"updateConfig",isLimited:e,isCopyStorageEnabled:n,supportAccountsCount:r,countryCode:o,isAppUpdateRequired:s});const i=(new Date).getTime();Math.abs(a-i)>ad&&ud({type:"incorrectTime"})}catch(t){(0,C.SJ)("tryUpdateRegion",t)}}async function gd(t,e){let n;const r=it(e,["mnemonicEncrypted"]);for(;Qo(ud,t);){try{const e=await vr("/account-config",r);if(!Qo(ud,t))return;zo(e,n)||(n=e,ud({type:"updateAccountConfig",accountId:t,accountConfig:e}))}catch(t){(0,C.SJ)("setupBackendAccountPolling",t)}await Ei(od,sd)}}const{ton:yd,tron:vd}=kc;let Ad;function bd(t){Ad=t}async function Ed(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await Jo;const n=fn(),r=!n;mn(t),await sn.setItem("currentAccountId",t),un(),i.hL1&&(n&&P(n).network!==P(t).network&&Fc(),Dc("onFirstLogin"),function(t){const e=Pc(t);Tc({type:"updateActiveDapp",accountId:t,origin:e})}(t)),r&&Yr(Ad);const a=await yn(t);if(i.TI6||gd(t,a),"ton"in a){const n=ut(Object.values(Sd(e,"ton"))),r=n.length?Math.max(...n):void 0;yd.setupPolling(t,Ad,r)}"tron"in a&&vd.setupPolling(t,Ad,Sd(e,"tron"))}function Sd(t,e){const{slug:n}=ho(e).nativeToken;return Object.entries(t).reduce(((t,r)=>{let[a,o]=r;return(a===n||a.startsWith(`${e}-`))&&(t[a]=o),t}),{})}function Id(){kd(),mn(void 0),i.hL1&&(Fc(),Dc("onFullLogout"))}function kd(){i.hL1&&Nc(fn())}function Bd(t){return hn(t)}function Dd(t){return yn(t)}const{ton:_d,tron:Td}=kc;function Cd(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.iAh)?F.we(256).split(" "):_d.generateMnemonic()}function Rd(t,e,n,r){return r||(r=i.RoE),Pd(t,e,n,r)}function xd(t){return Rn(t)&&i.iAh||kc.ton.validateMnemonic(t)}async function Pd(t,e,n,r){const a=U(e);let o=Rn(e);const s=await _d.validateMnemonic(e);if(!(a||s||o&&i.iAh))throw new Error("Invalid mnemonic");const c=await pn(t),u=await xn(e,n),d=await Pn(u,n).catch((()=>{}));if(!n||!d)return{error:x.QD.DebugError};let l,f,m,p;try{if(o&&s&&(f=await _d.getWalletFromMnemonic(e,t,r),f.lastTxId&&(o=!1)),o){const n=Td.getWalletFromBip39Mnemonic(t,e);f=await _d.getWalletFromBip39Mnemonic(t,e),m=f.address,p=n.address,l={type:"bip39",mnemonicEncrypted:u,tron:n,ton:f}}else f||(f=a?await _d.getWalletFromPrivateKey(e[0],t,r):await _d.getWalletFromMnemonic(e,t,r)),l={type:"ton",mnemonicEncrypted:u,ton:f},m=f.address;await In(c,"accounts",l);const n=i.TI6?await Od({accountId:c,network:t,mnemonic:e,mnemonicEncrypted:u,version:r}):void 0;return Ed(c),{accountId:c,tonAddress:m,tronAddress:p,secondNetworkAccount:n}}catch(t){return(0,Fo.QS)(t)}}async function Od(t){const{mnemonic:e,version:n,mnemonicEncrypted:r}=t,{network:a,accountId:o}=t,s=await _d.getWalletFromMnemonic(e,a,n),i="testnet"===a?"mainnet":"testnet",c=O({...P(o),network:i});s.address=Ce(s.address,!1,i);const u={type:"ton",mnemonicEncrypted:r,ton:s};return await In(c,"accounts",u),{accountId:c,addressByChain:{ton:s.address},network:i}}async function Ud(t,e){const n=await pn(t),{publicKey:r,address:a,index:o,driver:s,deviceId:i,deviceName:c,version:u}=e;return await function(t,e){return In(t,"accounts",e)}(n,{type:"ledger",ton:{type:"ton",address:a,publicKey:r,version:u,index:o},driver:s,deviceId:i,deviceName:c}),{accountId:n,address:a,walletInfo:e}}async function Nd(t){Id(),await Promise.all([kn(t,"accounts"),Dt().isDappSupported&&Vc(t)])}async function Fd(){Id(),await Promise.all([sn.removeItem("accounts"),sn.removeItem("currentAccountId"),Dt().isDappSupported&&Jc(),Mr.clear()])}async function Md(t,e,n){await Promise.all([Sn(t,"accounts"),Dt().isDappSupported&&Hc(t),Mr.deleteWhere({accountId:t})]),kd(),await Ed(e,n)}async function Wd(t,e){for(const[n,r]of Object.entries(await vn())){if(!("mnemonicEncrypted"in r))continue;const a=await Pn(r.mnemonicEncrypted,t),o=await xn(a,e);await An(n,{mnemonicEncrypted:o})}}function Kd(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const jd=new Map;class qd{constructor(){Kd(this,"resolve",void 0),Kd(this,"reject",void 0),Kd(this,"promise",new Promise(((t,e)=>{this.resolve=t,this.reject=e})))}}function Ld(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();const e=new qd;jd.set(t,e);const{promise:n}=e;return{promiseId:t,promise:n}}function zd(t,e){const n=jd.get(t);n&&(n.resolve(e),jd.delete(t))}var Hd=n(48287).Buffer;const Jd=kc.ton;async function Vd(t,e){const n=await yn(t),r=await so(t,e,n);return Hd.from(r).toString("hex")}async function $d(t,e){return On(t,e,await yn(t))}function Qd(){return N.wordlists.default}async function Gd(t){var e;const[n,r]=null!==(e=await async function(){const t=await vn();return Object.entries(t).find((t=>{let[,{type:e}]=t;return"ledger"!==e}))}())&&void 0!==e?e:[];if(!n||!r)throw new Error("The user is not authorized in the wallet");return Boolean(await On(n,t,r))}function Zd(t,e){zd(t,e)}function Xd(t,e){zd(t,e)}function Yd(t,e){!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown rejection reason";const n=jd.get(t);n&&(n.reject(new Fo.KB(e)),jd.delete(t))}(t,e)}async function tl(t,e){const{network:n}=P(t);return e||({address:e}=await hn(t)),Jd.getWalletSeqno(n,e)}function el(t,e){return wn(t,e)}function nl(t,e){return kc.ton.isAddressInitialized(t,e)}function rl(t,e,n){return kc[t].getWalletBalance(e,n)}function al(t,e){return kc.ton.getContractInfo(t,e)}function ol(t,e){return kc.ton.getWalletInfo(t,e)}const{ton:sl}=kc;function il(t){return sl.getAccountNfts(t)}function cl(t){return sl.checkNftTransferDraft(t)}async function ul(t,e,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0n;const{address:s}=await hn(t),c=await sl.submitNftTransfers({accountId:t,password:e,nfts:n,toAddress:r,comment:a});if("error"in c)return c;const u=_(o,Object.keys(c.messages).length);for(const[e,o]of c.messages.entries())vu(t,"ton",{amount:0n,fromAddress:s,toAddress:r,comment:a,fee:u,normalizedAddress:o.toAddress,slug:i.Tu9.slug,externalMsgHash:c.msgHash,nft:null==n?void 0:n[e]},e);return c}function dl(t,e){return sl.checkNftOwnership(t,e)}var ll=n(55861);let fl=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",t[t.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({}),ml=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({}),pl=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({});const wl={rE:"3.5.6"};function hl(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;return{platform:gl(),appName:i.C39,appVersion:wl.rE,maxProtocolVersion:i.gY_,features:["SendTransaction",{name:"SendTransaction",maxMessages:t}]}}function gl(){var t;const{userAgent:e}=navigator,n=navigator.platform||(null===(t=navigator)||void 0===t||null===(t=t.userAgentData)||void 0===t?void 0:t.platform)||"";let r;return r=i.hL1||i.tKX?"browser":/Android/.test(e)?"android":-1!==["iPhone"].indexOf(n)?"iphone":-1!==["iPad","iPod"].indexOf(n)?"ipad":-1!==["macOS","Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(n)?"mac":-1!==["Win32","Win64","Windows","WinCE"].indexOf(n)?"windows":/Linux/.test(n)?"linux":"browser",r}class yl extends Fo.aU{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;var r,a,o;super(t),r=this,o=void 0,(a=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(a="code"))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,this.code=e,this.displayError=n}}class vl extends yl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Manifest content error",fl.MANIFEST_CONTENT_ERROR)}}class Al extends yl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown error.",0)}}class bl extends yl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Bad request",1,arguments.length>1?arguments[1]:void 0)}}class El extends yl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown app error",100)}}const Sl=1000000000n,Il=3000000000n,kl=2e3;function Bl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return"string"==typeof t&&t.length<=e}function Dl(t){if(!Bl(t,kl))return!1;try{return new URL(t),!0}catch(t){return!1}}function _l(t,e){return wi(e)?e.newOwner:hi(e)?e.destination:t}function Tl(t){return"unknown"===(null==t?void 0:t.type)}function Cl(t){let{amount:e,payload:n}=t;return e<=Sl&&(wi(n)||hi(n))}var Rl=n(48287).Buffer;const xl="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Pl=kc.ton;let Ol;const Ul=new Promise((t=>{Ol=t}));let Nl;function Fl(t){Nl=t,Ol()}async function Ml(t,e,n){try{await Gl(!0),Nl({type:"dappLoading",connectionType:"connect",isSse:t&&"sseOptions"in t});const r=await $l(e.manifestUrl);i.hL1||(t.origin=r.origin);const{origin:a}=await Ql(t,!0),o=e.items.find((t=>{let{name:e}=t;return"ton_addr"===e})),s=e.items.find((t=>{let{name:e}=t;return"ton_proof"===e})),c=s?{timestamp:Math.round(Date.now()/1e3),domain:new URL(a).host,payload:s.payload}:void 0;if(!o)throw new bl("Missing 'ton_addr'");if(c&&!c.domain.includes("."))throw new bl("Invalid domain");let u=await async function(){const t=await Dn();if(!t)throw new bl("The user is not authorized in the wallet");return t}();const{promiseId:d,promise:l}=Ld(),f={...r,origin:a,connectedAt:Date.now(),..."sseOptions"in t&&{sse:t.sseOptions}};Nl({type:"dappConnect",identifier:"identifier"in t?t.identifier:void 0,promiseId:d,accountId:u,dapp:f,permissions:{address:!0,proof:!!c},proof:c});const m=await l;u=m.accountId,t.accountId=u,await Wc(u,f),xc(u,a);const p=await yn(u),{address:w}=p.ton,h=hl(Kl(p)),g=[await Jl(u,p.ton)];if(c){const{password:t,signature:e}=m;let n;n=t?await async function(t,e,n,r,a){const o=await io(t,n,e),{timestamp:s,domain:i,payload:c}=a,u=Rl.allocUnsafe(8);u.writeBigInt64LE(BigInt(s));const d=Rl.from(i),l=Rl.allocUnsafe(4);l.writeInt32LE(d.byteLength);const f=J.Address.parse(r),m=Rl.allocUnsafe(4);m.writeInt32BE(f.workChain);const p=Rl.concat([m,f.hash]),w=Rl.concat([Rl.from("ton-proof-item-v2/","utf8"),p,l,d,u,Rl.from(c)]),h=Rl.concat([Rl.from("ffff","hex"),Rl.from("ton-connect","utf8"),Rl.from(await bt(w))]);return Vl(a,(g=W().sign.detached(Rl.from(await bt(h)),o.secretKey),At.from(g).toString("base64")));var g}(u,p,t,w,c):Vl(c,e),g.push(n)}return Nl({type:"updateDapps"}),Nl({type:"dappConnectComplete"}),{event:"connect",id:n,payload:{items:g,device:h}}}catch(t){return(0,C.SJ)("tonConnect:connect",t),(0,tr.A)((()=>{Nl({type:"dappCloseLoading"})})),Hl(n,t)}}async function Wl(t,e){try{const{origin:n,accountId:r}=await Ql(t);if(xc(r,n),!await Mc(r,n))throw new El;await async function(t,e,n){const r=await Mc(t,e);await Wc(t,{...r,...n})}(r,n,{connectedAt:Date.now()});const a=await yn(r),o=hl(Kl(a));return{event:"connect",id:e,payload:{items:[await Jl(r,a.ton)],device:o}}}catch(t){return(0,C.SJ)("tonConnect:reconnect",t),Hl(e,t)}}function Kl(t){const{type:e,ton:{version:n}}=t;return"ledger"===e?te:"W5"===n?ee:Yt}async function jl(t,e){try{const{origin:e,accountId:n}=await Ql(t);await Kc(n,e,!0),Nc(n),Nl({type:"updateDapps"})}catch(t){(0,C.SJ)("tonConnect:disconnect",t)}return{id:e.id,result:{}}}async function ql(t,e){try{const{origin:n,accountId:r}=await Ql(t),{network:a}=P(r),o=JSON.parse(e.params[0]),{messages:s,network:c}=o,u=await yn(r),{type:d,ton:{address:l,publicKey:f}}=u,m=Kl(u);if(s.length>m)throw new bl(`Payload contains more than ${m} messages, which exceeds limit`);const p=c?c===ll.S5.MAINNET?"mainnet":"testnet":void 0;let w=o.valid_until;w&&w>10**10&&(w=Math.round(w/1e3));const h="ledger"===d;let g;if(o.from&&Ce(o.from)!==Ce(l)){const t=St(f);if(!h||!await async function(t,e,n){var r;const[a,o]=await Promise.all([Ja(t,n),De(t,n)]);return"vesting"===(null===(r=a.contractInfo)||void 0===r?void 0:r.name)&&zo(e,o)}(a,t,o.from))throw new bl(void 0,x.jf.WrongAddress);g=o.from}if(p&&a!==p)throw new bl(void 0,x.jf.WrongNetwork);await Gl(!0),Nl({type:"dappLoading",connectionType:"sendTransaction",accountId:r,isSse:Boolean("sseOptions"in t&&t.sseOptions)});const{preparedMessages:y,checkResult:v}=await async function(t,e,n){const r=e.map((t=>{const{address:e,amount:r,payload:a,stateInit:o}=t;return{toAddress:Ke(e)?Ce(e,!0,n):e,amount:BigInt(r),payload:a?J.Cell.fromBase64(a):void 0,stateInit:o?J.Cell.fromBase64(o):void 0}}));return{preparedMessages:r,checkResult:await Pl.checkMultiTransactionDraft(t,r,!1,!0)}}(r,s,a);if("error"in v)throw new bl(v.error,v.error);const A=(await Lc(r))[n],b=await async function(t,e,n){if(!n.emulation&&void 0===n.fee)throw new Error("Both `emulation` and `fee` miss in the check result");const r=await Promise.all(e.map((async(r,a)=>{var o,s,i;let{address:c,amount:u,payload:d,stateInit:l}=r;const f=BigInt(u),m=Ke(c)?Ce(c,!0,t):c,p=Ce(c,void 0,t),w=d?await da(t,m,d):void 0,{isScam:h}=_r(p)||{},g=null===(o=n.emulation)||void 0===o?void 0:o.byTransactionIndex[a];return{toAddress:m,amount:f,rawPayload:d,payload:w,stateInit:l,normalizedAddress:p,isScam:h,isDangerous:Tl(w),displayedToAddress:_l(m,w),displayedAmount:f,fullFee:null!==(s=null==g?void 0:g.fee)&&void 0!==s?s:_(n.fee,e.length),received:null!==(i=null==g?void 0:g.received)&&void 0!==i?i:0n}})));return function(t){const e=t.reduce(((t,e)=>t+(Cl(e)?e.displayedAmount:0n)),0n);return 0n===e||e>Il?t:t.map((t=>Cl(t)?{...t,displayedAmount:0n,fullFee:t.fullFee+t.displayedAmount}:t))}(r)}(a,s,v),{promiseId:E,promise:S}=Ld();Nl({type:"dappSendTransactions",promiseId:E,accountId:r,dapp:A,transactions:b,vestingAddress:g});const I=await S;if(w&&w<Date.now()/1e3)throw new bl("The confirmation timeout has expired");let k,B,D;if(h){const t=I,e=await Pl.sendSignedMessages(r,t);k=e.firstBoc,D=e.msgHashes[0],e.successNumber>0?e.successNumber<s.length&&Nl({type:"showError",error:x.jf.PartialTransactionFailure}):B="Failed transfers"}else{const t=I,e=await Pl.submitMultiTransfer({accountId:r,password:t,messages:y,expireAt:w});"error"in e?B=e.error:({boc:k,msgHash:D}=e)}if(B)throw new Al(B);return b.forEach(((t,e)=>{let{amount:n,normalizedAddress:a,payload:o}=t;const s="comment"===(null==o?void 0:o.type)?o.comment:void 0;vu(r,"ton",{amount:n,fromAddress:l,toAddress:a,comment:s,fee:v.fee,slug:i.Tu9.slug,externalMsgHash:D},e)})),{result:k,id:e.id}}catch(t){(0,C.SJ)("tonConnect:sendTransaction",t),(0,tr.A)((()=>{Nl({type:"dappCloseLoading"})}));let n,r=ml.UNKNOWN_ERROR,a="Unhandled error";return t instanceof Fo.KB?(r=ml.USER_REJECTS_ERROR,a=t.message):t instanceof yl?(r=t.code,a=t.message,n=t.displayError):n=t instanceof Fo.K$?t.displayError:x.QD.Unexpected,Nl&&Go(Nl)&&n&&Nl({type:"showError",error:n}),{error:{code:r,message:a},id:e.id}}}function Ll(t,e){return{error:{code:pl.METHOD_NOT_SUPPORTED,message:"Method not supported"},id:e.id}}async function zl(t){try{const{origin:e}=await Ql(t,!0);Oc(e)}catch(t){(0,C.SJ)("tonConnect:deactivate",t)}}function Hl(t,e){let n=fl.UNKNOWN_ERROR,r="Unhandled error";return e instanceof Fo.KB?(n=fl.USER_REJECTS_ERROR,r=e.message):e instanceof yl&&(n=e.code,r=e.message),{id:t,event:"connect_error",payload:{code:n,message:r}}}async function Jl(t,e){const{network:n}=P(t),{publicKey:r,address:a}=e,o=await Pl.getWalletStateInit(t,e);return{name:"ton_addr",address:Re(a),network:"mainnet"===n?ll.S5.MAINNET:ll.S5.TESTNET,publicKey:r,walletStateInit:o.toBoc({idx:!0,crc32:!0}).toString("base64")}}function Vl(t,e){const{timestamp:n,domain:r,payload:a}=t,o=Rl.from(r);return{name:"ton_proof",proof:{timestamp:n,domain:{lengthBytes:o.byteLength,value:o.toString("utf8")},signature:e,payload:a}}}async function $l(t,e){try{const n=await Zn(t),{url:r,name:a,iconUrl:o}=await n,s=o.startsWith("data:")||""===o?xl:o;if(!Dl(r)||!Bl(a)||!Dl(s))throw new Error("Invalid data");return{origin:null!=e?e:new URL(r).origin,url:r,name:a,iconUrl:s,manifestUrl:t}}catch(t){throw(0,C.SJ)("fetchDapp",t),new vl}}async function Ql(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{origin:n}=t;if(!n)throw new bl("Invalid origin");let r="";if(t.accountId)r=t.accountId;else if(!e){const{network:t}=P(await async function(){const t=await Dn();if(!t)throw new Error("The user is not authorized in the wallet");return t}()),e=await async function(t,e){const n=await zc()||{};let r,a=0;return Object.entries(n).forEach((n=>{let[o,s]=n;e in s&&P(o).network===t&&s[e].connectedAt>a&&(a=s[e].connectedAt,r=o)})),r}(t,n);if(!e)throw new bl("The connection is outdated, try relogin");r=e}return{origin:n,accountId:r}}async function Gl(t){return!(!i.hL1||!t&&Nl&&Go(Nl)||(await Dc("onWindowNeeded"),await Ul,0))}var Zl=n(48287).Buffer;const Xl="https://tonconnectbridge.mytonwallet.org/bridge",Yl=300,tf=24,ef=6e4;let nf,rf,af,of=[];async function sf(t){let{url:e,isFromInAppBrowser:n,identifier:r}=t;const{searchParams:a,origin:o}=new URL(e),s=a.get("ret")||"back",i=Number(a.get("v")),c=a.get("id"),u="back"!==s&&"none"!==s,d=a.get("r");if(!d)return void(u&&(rf={validUntil:Date.now()+ef,url:s,isFromInAppBrowser:n}));const l=(0,tr.A)((()=>JSON.parse(d)))||JSON.parse(decodeURIComponent(d));(0,C.MD)("SSE Start connection:",{version:i,appClientId:c,connectRequest:l,ret:s,origin:o,identifier:r});const{secretKey:f,publicKey:m}=W().box.keyPair(),p=Et(f),w=Et(m),h={identifier:r,sseOptions:{clientId:w,appClientId:c,secretKey:p,lastOutputId:0}};if(await dn,!l)return void af({type:"showError",error:"Invalid TON Connect link"});const g=await Ml(h,l,0);return await uf(g,p,w,c),"connect_error"!==g.event&&await cf(),u?s:void 0}async function cf(){const[t,e,n]=await Promise.all([sn.getItem("sseLastEventId"),zc(),Bn()]);if(!e||!n)return;of=Object.entries(e).reduce(((t,e)=>{let[r,a]=e;if(P(r).network===n)for(const e of Object.values(a)){var o;null!==(o=e.sse)&&void 0!==o&&o.clientId&&t.push({...e.sse,accountId:r,origin:e.origin})}return t}),[]);const r=ft(of,"clientId").filter(Boolean);r.length&&(nf&&((0,tr.A)((()=>{nf.close()})),nf=void 0),nf=function(t,e){const n=new URL(`${Xl}/events`);return n.searchParams.set("client_id",t.join(",")),e&&n.searchParams.set("last_event_id",e),new EventSource(n)}(r,t),nf.onopen=()=>{(0,C.MD)("EventSource opened")},nf.onerror=t=>{(0,C.SJ)("EventSource",t.type)},nf.onmessage=async t=>{const{from:e,message:n}=JSON.parse(t.data),r=of.find((t=>{let{appClientId:n}=t;return n===e}));if(!r)return void(0,C.MD)(`Dapp with clientId ${e} not found`);const{accountId:a,clientId:s,appClientId:i,secretKey:c,origin:u,lastOutputId:d}=r,l=function(t,e,n){const r=Zl.from(t,"base64"),a=r.subarray(0,tf),o=r.subarray(tf),s=W().box.open(o,a,Zl.from(e,"hex"),Zl.from(n,"hex")),i=new TextDecoder("utf-8").decode(s);return JSON.parse(i)}(n,i,c);(0,C.MD)("SSE Event:",l),await function(t){return sn.setItem("sseLastEventId",t)}(t.lastEventId);const f={clientId:s,appClientId:i,secretKey:c,lastOutputId:d},m=await o[l.method]({origin:u,accountId:a,sseOptions:f},l);if(await uf(m,c,s,i),rf){const{validUntil:t,url:e,isFromInAppBrowser:n}=rf;t>Date.now()&&af({type:"openUrl",url:e,isExternal:!n}),rf=void 0}})}function uf(t,e,n,r,a){const o=function(t,e,n){const r=(0,M.randomBytes)(tf),a=W().box(t,r,Zl.from(e,"hex"),Zl.from(n,"hex"));return Zl.concat([r,a]).toString("base64")}(Zl.from(JSON.stringify(t)),r,e);return async function(t,e,n,r){const a=new URL(`${Xl}/message`);a.searchParams.set("client_id",e),a.searchParams.set("to",n),a.searchParams.set("ttl",Yl.toString()),r&&a.searchParams.set("topic",r);const o=await fetch(a,{method:"POST",body:t});await(0,jn.EQ)(o)}(o,n,r,a)}async function df(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.wOb;await Yc();const r=Zr(t);return r?Ar(`/prices/chart/${r.chain===i.Tu9.chain&&r.tokenAddress?r.tokenAddress:r.symbol}`,{base:n,period:e}):[]}async function lf(t){try{return await vr("/notifications/subscribe",t,{shouldRetry:!0})}catch(t){return(0,C.SJ)("subscribeNotifications",t),(0,Fo.QS)(t)}}async function ff(t){try{return await vr("/notifications/unsubscribe",t,{shouldRetry:!0})}catch(t){return(0,C.SJ)("unsubscribeNotifications",t),(0,Fo.QS)(t)}}async function mf(t,e){!function(t){Vo=t}(t);const n=Bt(e);i.hL1||He||(He=function(t,e,n){const r=new Qe(t,void 0,n,void 0,void 0);function a(t){let{data:e}=t;r.onMessage(e)}return t.addEventListener("message",a),r.destroy=()=>{t.removeEventListener("message",a)},r}(self,0,i.Pcx),He.init()),bd(t),dd(t),du(t),qu(t),n.isDappSupported&&(Rc(t),Fl(t)),n.isSseSupported&&(af=t),await function(t,e){return Jo=async function(t,e){let n=Number(await sn.getItem("stateVersion",!0));if(17===n)return;if(i.TI6&&!n&&await async function(t){const e=i.hL1?sn:on,[n="v3R2",r,a,o,s,c,u]=await Promise.all([e.getItem("walletVersion"),e.getItem("isTestnet"),e.getItem("address"),e.getItem("words"),e.getItem("publicKey"),e.getItem("proxy"),e.getItem("magic")]);r&&t({type:"updateSettings",settings:{isTestnet:!0}});const d=r?"testnet":"mainnet",l=`0-ton-${d}`;if(a&&o&&s){const i="mainnet"===d?"testnet":"mainnet",f=`0-ton-${i}`,m=Ce(a,!1,i),p={};p[l]={type:"ton",mnemonicEncrypted:o,ton:{type:"ton",address:a,version:n,publicKey:s,index:0}},p[f]={type:"ton",mnemonicEncrypted:o,ton:{type:"ton",address:m,version:n,publicKey:s,index:0}},await sn.setItem("accounts",p),t({type:"migrateCoreApplication",isTestnet:r,accountId:l,address:a,secondAccountId:f,secondAddress:m,isTonProxyEnabled:c,isTonMagicEnabled:u}),["walletVersion","isTestnet","words","address","publicKey","magic","proxy","isLedger","ledgerTransportType","__time","isDebug"].forEach((t=>{e.removeItem(t)}))}}(t),i.UMQ&&!n)if(await sn.getItem("accounts",!0))n=10;else{const t=await rn.getItem("stateVersion");t&&(n=Number(t))}if(i.hL1&&!n&&!await sn.getItem("addresses")&&(n=await rn.getItem("stateVersion"),n)){const t=await rn.getAll();await sn.setMany(t)}if(!n)return void await sn.setItem("stateVersion",17);if(!n){const t=await sn.getItem("mnemonicEncrypted");if(t&&(await sn.setItem("mnemonicsEncrypted",JSON.stringify({[i.Kih]:t})),await sn.removeItem("mnemonicEncrypted")),!t)for(const t of["mnemonicsEncrypted","addresses","publicKeys"]){const e=await sn.getItem(t);if(!e)continue;const n=JSON.parse(e),r=Object.entries(n).reduce(((t,e)=>{let[n,r]=e;const[a,o="ton"]=n.split("-");return t[[a,o].join("-")]=r,t}),{});await sn.setItem(t,JSON.stringify(r))}n=1,await sn.setItem("stateVersion",n)}if(1===n){const t=await sn.getItem("addresses");if(t&&t.includes("-undefined"))for(const t of["mnemonicsEncrypted","addresses","publicKeys"]){const e=(await sn.getItem(t)).replace("-undefined","-ton");await sn.setItem(t,e)}n=2,await sn.setItem("stateVersion",n)}if(n>=2&&n<=4){for(const t of["addresses","mnemonicsEncrypted","publicKeys","dapps"]){const e=await sn.getItem(t);"string"==typeof e&&await sn.setItem(t,JSON.parse(e))}n=5,await sn.setItem("stateVersion",n)}if(5===n){const t=await sn.getItem("dapps");if(t){for(const e of Object.values(t))for(const t of Object.values(e))t.connectedAt=1;await sn.setItem("dapps",t)}n=6,await sn.setItem("stateVersion",n)}if(6===n){for(const t of["addresses","mnemonicsEncrypted","publicKeys","accounts","dapps"]){let e=await sn.getItem(t);e&&(e=Object.entries(e).reduce(((t,e)=>{let[n,r]=e;const a=P(n),o=Zo({...a,network:"mainnet"}),s=Zo({...a,network:"testnet"});return{...t,[o]:r,[s]:r}}),{}),await sn.setItem(t,e))}n=7,await sn.setItem("stateVersion",n)}if(7===n){const e=await sn.getItem("addresses");if(e){var r;const n=await sn.getItem("publicKeys"),a=null!==(r=await sn.getItem("accounts"))&&void 0!==r?r:{};for(const[r,o]of Object.entries(e)){const e=Ce(o,!1);a[r]={...a[r],address:e,publicKey:n[r]},t({type:"updateAccount",accountId:r,partial:{address:e}})}await sn.setItem("accounts",a),await sn.removeItem("addresses"),await sn.removeItem("publicKeys")}n=8,await sn.setItem("stateVersion",n)}if(8===n){if(Dt().isSseSupported){const t=await sn.getItem("dapps");if(t){const e=[];for(const n of Object.values(t))for(const t of Object.values(n)){var a,o;null!==(a=t.sse)&&void 0!==a&&a.appClientId&&e.push({clientId:null===(o=t.sse)||void 0===o?void 0:o.appClientId})}}}n=9,await sn.setItem("stateVersion",n)}if(9===n){if(i.UMQ){const t=await rn.getAll();for(const[e,n]of Object.entries(t))if(await Xe.setItem(e,n),!zo(n,await Xe.getItem(e,!0)))throw new Error("Migration error!");await rn.clear()}n=10,await sn.setItem("stateVersion",n)}let s=!1;if(Dt().isIosApp&&n>=10&&n<=13&&(await Xo(),s=!0),10===n||11===n||12===n){const t=await sn.getItem("accounts",!0);if(t){for(const n of Object.values(t)){const{publicKey:t,address:r,version:a}=n;if(a||!t)continue;const o=St(t),s=e.pickWalletByAddress("mainnet",o,r);n.version=s.version}await sn.setItem("accounts",t)}n=13,await sn.setItem("stateVersion",n)}if(13===n){const e=await sn.getItem("accounts",!0);if(e){for(const[n,r]of Object.entries(e)){const{network:e}=P(n);"testnet"===e&&(r.address=Ce(r.address,!1,e),t({type:"updateAccount",accountId:n,partial:{address:r.address}}))}n=14,await sn.setItem("accounts",e)}}14!==n&&15!==n||(Dt().isIosApp&&!s&&await Xo(),n=16,await sn.setItem("stateVersion",n)),16===n&&(await async function(){const t=await sn.getItem("accounts");if(!t)return;const e=await sn.getItem("mnemonicsEncrypted"),n={};for(const[a,o]of Object.entries(t)){var r;const{address:t,version:s,publicKey:i,authToken:c,ledger:u,isInitialized:d}=o,l={type:"ton",address:t,version:s,publicKey:i,authToken:c,isInitialized:d,index:null!==(r=null==u?void 0:u.index)&&void 0!==r?r:0};n[a]=u?{type:"ledger",ton:l,driver:u.driver,deviceId:u.deviceId,deviceName:u.deviceName}:{type:"ton",mnemonicEncrypted:e[a],ton:l}}await sn.setItem("accounts",n)}(),n=17,await sn.setItem("stateVersion",n))}(t,e).catch((t=>{var e;(0,C.SJ)("Migration error",t),null===(e=Vo)||void 0===e||e({type:"showError",error:"Migration error"})})),Jo}(t,kc.ton),n.isSseSupported&&cf(),async function(t){var e;let n=await sn.getItem("referrer");void 0===n&&(t.referrer?n=t.referrer:({referrer:n}=await Ar("/referrer/get")),await sn.setItem("referrer",null!==(e=n)&&void 0!==e?e:""))}(e)}!function(t){for(const[n,r]of Object.entries(t)){var e;Bc[n]=(null!==(e=Bc[n])&&void 0!==e?e:[]).concat([r])}}({onDappDisconnected:async function(t,e){const n=of.find((n=>n.origin===e&&n.accountId===t));if(!n)return;const{secretKey:r,clientId:a,appClientId:o}=n,s={event:"disconnect",id:n.lastOutputId+1,payload:{}};await uf(s,r,a,o)},onDappsChanged:cf}),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:self;function r(t,r){t.channel=e,r?n.postMessage(t,r):n.postMessage(t)}(arguments.length>3?arguments[3]:void 0)||function(t){self.onerror=e=>{var n,r;const a=(null===(n=e.error)||void 0===n?void 0:n.message)||"Uncaught exception in worker";(0,C.SJ)(a,e.error),t({type:"unhandledError",error:{message:a,stack:null===(r=e.error)||void 0===r?void 0:r.stack}})},self.addEventListener("unhandledrejection",(e=>{var n,r;const a=(null===(n=e.reason)||void 0===n?void 0:n.message)||"Unhandled rejection in worker";(0,C.SJ)(a,e.reason),t({type:"unhandledError",error:{message:a,stack:null===(r=e.reason)||void 0===r?void 0:r.stack}})}))}(r),n.addEventListener("message",(n=>{var a;(null===(a=n.data)||void 0===a?void 0:a.channel)===e&&async function(t,e,n,r,a){switch(r||(r=t=>{n({type:"update",update:t})}),e.type){case"init":{var o;const{args:n}=e,s="function"==typeof t?t("init",a,r,...n):null===(o=t.init)||void 0===o?void 0:o.call(t,r,...n);await s;break}case"callMethod":{const{messageId:r,name:o,args:s,withCallback:i}=e;try{if("function"!=typeof t&&!t[o])return;if(r&&i){const t=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];const o=e[e.length-1];var s;n({type:"methodCallback",messageId:r,callbackArgs:e},(s=o)instanceof ArrayBuffer||s instanceof ImageBitmap?[o]:void 0)};R.set(r,t),s.push(t)}const e="function"==typeof t?await t(o,a,...s):await t[o](...s),{arrayBuffer:c}="object"==typeof e&&e&&"arrayBuffer"in e||{};r&&n({type:"methodResponse",messageId:r,response:e},c?[c]:void 0)}catch(t){(0,C.SJ)(o,t),r&&n({type:"methodResponse",messageId:r,error:{message:t.message}})}r&&R.delete(r);break}case"cancelProgress":{const t=R.get(e.messageId);t&&(t.isCanceled=!0);break}}}(t,n.data,r)}))}((function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return"init"===t?mf(r[0],r[1]):t.startsWith("tonConnect_")?(t=t.replace("tonConnect_",""),(0,o[t])(...r)):(0,s[t])(...r)}))},56051:(t,e,n)=>{"use strict";n.d(e,{KL:()=>a,QD:()=>r,jf:()=>o});let r=function(t){return t.Unexpected="Unexpected",t.ServerError="ServerError",t.DebugError="DebugError",t.UnsupportedVersion="UnsupportedVersion",t}({}),a=function(t){return t.InvalidAmount="InvalidAmount",t.InvalidToAddress="InvalidToAddress",t.InsufficientBalance="InsufficientBalance",t.InvalidStateInit="InvalidStateInit",t.StateInitWithoutBin="StateInitWithoutBin",t.DomainNotResolved="DomainNotResolved",t.WalletNotInitialized="WalletNotInitialized",t.InvalidAddressFormat="InvalidAddressFormat",t.InactiveContract="InactiveContract",t}({}),o=function(t){return t.PartialTransactionFailure="PartialTransactionFailure",t.IncorrectDeviceTime="IncorrectDeviceTime",t.InsufficientBalance="InsufficientBalance",t.UnsuccesfulTransfer="UnsuccesfulTransfer",t.NotSupportedHardwareOperation="NotSupportedHardwareOperation",t.HardwareBlindSigningNotEnabled="HardwareBlindSigningNotEnabled",t.WrongAddress="WrongAddress",t.WrongNetwork="WrongNetwork",t}({})},23174:(t,e,n)=>{"use strict";n.d(e,{Dn:()=>r.D,KL:()=>a.KL,QD:()=>a.QD,jf:()=>a.jf});var r=n(10428),a=n(56051)},10428:(t,e,n)=>{"use strict";n.d(e,{D:()=>r});let r=function(t){return t[t.Default=0]="Default",t[t.Instant=1]="Instant",t[t.BestRate=2]="BestRate",t}({})},31481:(t,e,n)=>{"use strict";n.d(e,{APY:()=>mt,AuB:()=>gt,C39:()=>s,FHx:()=>h,Guj:()=>a,HGV:()=>k,HUv:()=>_,InW:()=>w,Irq:()=>b,Kih:()=>v,KmP:()=>ft,Kzb:()=>O,MVx:()=>u,NFS:()=>T,Oig:()=>c,PcM:()=>y,Pcx:()=>nt,Pjb:()=>M,Q$0:()=>B,RoE:()=>ot,SKs:()=>D,TI6:()=>o,TUC:()=>ut,Tu9:()=>K,UMQ:()=>l,WRE:()=>dt,WVU:()=>pt,X1K:()=>C,X7L:()=>G,X7T:()=>j,_J8:()=>A,_Qu:()=>F,aPk:()=>x,cSq:()=>ct,dGN:()=>$,dqR:()=>R,eZ2:()=>st,gR8:()=>lt,gY_:()=>U,gmk:()=>f,gs5:()=>yt,hL1:()=>d,hl5:()=>i,iAh:()=>g,iQn:()=>it,kNZ:()=>wt,lHX:()=>S,lfO:()=>Y,oWZ:()=>Q,pV9:()=>at,pyR:()=>I,q5n:()=>N,qL:()=>W,qMf:()=>P,rQT:()=>et,rUK:()=>J,rcB:()=>ht,tKX:()=>m,vPi:()=>tt,wOb:()=>rt,xlJ:()=>E,xrY:()=>V,yTE:()=>p,zll:()=>L});var r=n(65606);const a="production",o=!0,s=o?"TON Wallet":"MyTonWallet",i="3.5.6",c="production"!==a&&"perf"!==a&&"test"!==a,u=!1,d=!1,l=(r.env.IS_OPERA_EXTENSION,!1),f=!1,m=!1,p="UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp",w="UQC9lQOaEHC6YASiJJ2NrKEOlITMMQmc8j0_iZEHy-4sl3tG",h="Shoot!\nSomething went wrong, please see the error details in Dev Tools Console.",g=!o,y=64,v="0-ton-mainnet",A="https://toncenter.mytonwallet.org",b="",E="",S="https://tonapiio.mytonwallet.org",I="https://toncenter-testnet.mytonwallet.org",k="",B="",D="https://tonapiio-testnet.mytonwallet.org",_="https://api.mytonwallet.org",T=65536e3,C=1000000000n,R=15000000n,x=[],P="EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o",O="EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE",U=2,N=new Set(["0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2","0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2"]),F="https://nft.fragment.com/gift/",M=/^https?:\/\/nft\.(fragment\.com\/gift\/[\w-]+-\d+)\.\w+$/i,W="EQCQE2L9hfwx1V8sgmF9keraHx1rNK9VmgR1ctVvINBGykyM",K={name:"Toncoin",symbol:"TON",slug:"toncoin",decimals:9,chain:"ton",cmcSlug:"toncoin"},j={name:"TRON",symbol:"TRX",slug:"trx",decimals:6,chain:"tron",cmcSlug:"tron"},q={name:"MyTonWallet Coin",symbol:"MY",slug:"ton-eqcfvnlrbn",decimals:9,chain:"ton",minterAddress:"EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w"},L={ton:{isMemoSupported:!0,isDnsSupported:!0,addressRegex:/^([-\w_]{48}|0:[\da-h]{64})$/i,addressPrefixRegex:/^([-\w_]{1,48}|0:[\da-h]{0,64})$/i,nativeToken:K},tron:{isMemoSupported:!1,isDnsSupported:!1,addressRegex:/^T[1-9A-HJ-NP-Za-km-z]{33}$/,addressPrefixRegex:/^T[1-9A-HJ-NP-Za-km-z]{0,33}$/,nativeToken:j,mainnet:{apiUrl:"https://tronapi.mytonwallet.org",usdtAddress:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"},testnet:{apiUrl:"https://api.shasta.trongrid.io",usdtAddress:"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs"}}},z="tron-tr7nhqjekq",H="tron-tg3xxyexbk",J="ton-eqcxe6mutq",V="EQC3roTiRRsoLzfYVK7yVVoIZjTEqAjQU3ju7aQ7HWTVL5o5",$=new Set([K.slug,J,j.slug,z]),Q="EQCM3B12QK1e4yZSf8GtBRT0aLMNyEsBc_DhVfRRtOEffLez",G="https://dns-image.mytonwallet.org/img?d=",Z={name:"Tether USD",symbol:"USDT",decimals:6,chain:"tron"},X={name:"Tether USD",symbol:"USDâ‚®",chain:"ton",slug:J,decimals:6,tokenAddress:"EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs"},Y=(K.slug,j.slug,K.slug,j.slug,{toncoin:{...K,quote:{slug:K.slug,price:1.95,priceUsd:1.95,percentChange24h:0}},trx:{...j,quote:{slug:j.slug,price:0,priceUsd:0,percentChange24h:0}},[z]:{...Z,slug:z,tokenAddress:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",quote:{slug:z,price:0,priceUsd:0,percentChange24h:0}},[H]:{...Z,slug:H,tokenAddress:"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs",quote:{slug:H,price:0,priceUsd:0,percentChange24h:0}},[J]:{...X,image:"https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp",quote:{slug:J,price:0,priceUsd:0,percentChange24h:0}},[q.slug]:{...q,image:"https://cache.tonapi.io/imgproxy/Qy038wCBKISofJ0hYMlj6COWma330cx3Ju1ZSPM2LRU/rs:fill:200:200:1/g:no/aHR0cHM6Ly9teXRvbndhbGxldC5pby9sb2dvLTI1Ni1ibHVlLnBuZw.webp",quote:{slug:q.slug,price:0,priceUsd:0,percentChange24h:0}}}),tt=(K.symbol,K.chain,K.slug,K.decimals,K.slug,K.slug,K.slug,"keyval-store"),et="keyval",nt="windowProvider",rt="USD",at=(K.symbol,"UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ"),ot="W5",st=["v3R1","v3R2","v4R2","W5"],it=["v3R2","v4R2"],ct=1e4,ut=3,dt=500,lt=4,ft="EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW",mt=30000000n,pt=["EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2","EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ","EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s","EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm","EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd","EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD","EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p","EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO","EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe","EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-","EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu","EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH","EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy","EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT","EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu","EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw"],wt=/((ftp|https?):\/\/)?(?<host>(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z][-a-zA-Z0-9]{1,62})\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g,ht=/telegram[:\s-]*((@[a-z0-9_]+)|(https:\/\/)?(t\.me|telegram\.me|telegram\.dog)\/[a-z0-9_]+)/gim,gt=(new Set(["82566ad72b6568fe7276437d3b0c911aab65ed701c13601941b2917305e81c11","ec614ea4aaea3f7768606f1c1632b3374d3de096a1e7c4ba43c8009c487fee9d","c0f9d14fbc8e14f0d72cba2214165eee35836ab174130912baf9dbfa43ead562","1275095b6da3911292406f4f4386f9e780099b854c6dee9ee2895ddce70927c1","5d01684bdf1d5c9be2682c4e36074202432628bd3477d77518d66b0976b78cca","173e31eee054cb0c76f77edc7956bed766bf48a1f63bd062d87040dcd3df700f","5226dd4e6db9af26b24d5ca822bc4053b7e08152f923932abf25030c7e38bb42","fea2c08a704e5192b7f37434927170440d445b87aab865c3ea2a68abe7168204","e691cf9081a8aeb22ed4d94829f6626c9d822752e035800b5543c43f83d134b5","301ce25925830d713b326824e552e962925c4ff45b1e3ea21fc363a459a49b43","02250f83fbb8624d859c2c045ac70ee2b3b959688c3d843aec773be9b36dbfc3","dba3adb2c917db80fd71a6a68c1fc9e12976491a8309d5910f9722efc084ce4d","7da9223b90984d6a144e71611a8d7c65a6298cad734faed79438dc0f7a8e53d1"]),new Set(["ton-eqcqc6ehrj","ton-eqcbzvsfwq"]),K.slug,K.slug,2),yt=[{suffixes:["ton"],baseFormat:/^([-\da-z]+\.){0,2}[-\da-z]{4,126}$/i,resolver:"EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz",collectionName:"TON DNS Domains"},{suffixes:["t.me"],baseFormat:/^([-\da-z]+\.){0,2}[-_\da-z]{4,32}$/i,resolver:"EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi",isTelemint:!0,collectionName:"Telegram Usernames"},{suffixes:["vip","ton.vip","vip.ton"],baseFormat:/^([-\da-z]+\.){0,2}?[\da-z]{1,24}$/i,resolver:"EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS",collectionName:"VIP DNS Domains",isUnofficial:!0},{suffixes:["gram"],baseFormat:/^([-\da-z]+\.){0,2}[\da-z]{1,127}$/i,resolver:"EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ",collectionName:"GRAM DNS Domains",isUnofficial:!0}]},87963:function(t){!function(){"use strict";function e(t){return parseInt(t)===t}function n(t){if(!e(t.length))return!1;for(var n=0;n<t.length;n++)if(!e(t[n])||t[n]<0||t[n]>255)return!1;return!0}function r(t,r){if(t.buffer&&"Uint8Array"===t.name)return r&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!n(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(e(t.length)&&n(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function a(t){return new Uint8Array(t)}function o(t,e,n,r,a){null==r&&null==a||(t=t.slice?t.slice(r,a):Array.prototype.slice.call(t,r,a)),e.set(t,n)}var s,i={toBytes:function(t){var e=[],n=0;for(t=encodeURI(t);n<t.length;){var a=t.charCodeAt(n++);37===a?(e.push(parseInt(t.substr(n,2),16)),n+=2):e.push(a)}return r(e)},fromBytes:function(t){for(var e=[],n=0;n<t.length;){var r=t[n];r<128?(e.push(String.fromCharCode(r)),n++):r>191&&r<224?(e.push(String.fromCharCode((31&r)<<6|63&t[n+1])),n+=2):(e.push(String.fromCharCode((15&r)<<12|(63&t[n+1])<<6|63&t[n+2])),n+=3)}return e.join("")}},c=(s="0123456789abcdef",{toBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},fromBytes:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(s[(240&r)>>4]+s[15&r])}return e.join("")}}),u={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],m=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],w=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],h=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],g=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],y=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],A=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],b=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],E=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],S=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],I=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function k(t){for(var e=[],n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}var B=function(t){if(!(this instanceof B))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:r(t,!0)}),this._prepare()};B.prototype._prepare=function(){var t=u[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,r=4*(t+1),a=this.key.length/4,o=k(this.key);for(e=0;e<a;e++)n=e>>2,this._Ke[n][e%4]=o[e],this._Kd[t-n][e%4]=o[e];for(var s,i=0,c=a;c<r;){if(s=o[a-1],o[0]^=l[s>>16&255]<<24^l[s>>8&255]<<16^l[255&s]<<8^l[s>>24&255]^d[i]<<24,i+=1,8!=a)for(e=1;e<a;e++)o[e]^=o[e-1];else{for(e=1;e<a/2;e++)o[e]^=o[e-1];for(s=o[a/2-1],o[a/2]^=l[255&s]^l[s>>8&255]<<8^l[s>>16&255]<<16^l[s>>24&255]<<24,e=a/2+1;e<a;e++)o[e]^=o[e-1]}for(e=0;e<a&&c<r;)f=c>>2,m=c%4,this._Ke[f][m]=o[e],this._Kd[t-f][m]=o[e++],c++}for(var f=1;f<t;f++)for(var m=0;m<4;m++)s=this._Kd[f][m],this._Kd[f][m]=b[s>>24&255]^E[s>>16&255]^S[s>>8&255]^I[255&s]},B.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,n=[0,0,0,0],r=k(t),o=0;o<4;o++)r[o]^=this._Ke[0][o];for(var s=1;s<e;s++){for(o=0;o<4;o++)n[o]=m[r[o]>>24&255]^p[r[(o+1)%4]>>16&255]^w[r[(o+2)%4]>>8&255]^h[255&r[(o+3)%4]]^this._Ke[s][o];r=n.slice()}var i,c=a(16);for(o=0;o<4;o++)i=this._Ke[e][o],c[4*o]=255&(l[r[o]>>24&255]^i>>24),c[4*o+1]=255&(l[r[(o+1)%4]>>16&255]^i>>16),c[4*o+2]=255&(l[r[(o+2)%4]>>8&255]^i>>8),c[4*o+3]=255&(l[255&r[(o+3)%4]]^i);return c},B.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,n=[0,0,0,0],r=k(t),o=0;o<4;o++)r[o]^=this._Kd[0][o];for(var s=1;s<e;s++){for(o=0;o<4;o++)n[o]=g[r[o]>>24&255]^y[r[(o+3)%4]>>16&255]^v[r[(o+2)%4]>>8&255]^A[255&r[(o+1)%4]]^this._Kd[s][o];r=n.slice()}var i,c=a(16);for(o=0;o<4;o++)i=this._Kd[e][o],c[4*o]=255&(f[r[o]>>24&255]^i>>24),c[4*o+1]=255&(f[r[(o+3)%4]>>16&255]^i>>16),c[4*o+2]=255&(f[r[(o+2)%4]>>8&255]^i>>8),c[4*o+3]=255&(f[255&r[(o+1)%4]]^i);return c};var D=function(t){if(!(this instanceof D))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new B(t)};D.prototype.encrypt=function(t){if((t=r(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),s=0;s<t.length;s+=16)o(t,n,0,s,s+16),o(n=this._aes.encrypt(n),e,s);return e},D.prototype.decrypt=function(t){if((t=r(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),s=0;s<t.length;s+=16)o(t,n,0,s,s+16),o(n=this._aes.decrypt(n),e,s);return e};var _=function(t,e){if(!(this instanceof _))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=a(16);this._lastCipherblock=r(e,!0),this._aes=new B(t)};_.prototype.encrypt=function(t){if((t=r(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),s=0;s<t.length;s+=16){o(t,n,0,s,s+16);for(var i=0;i<16;i++)n[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(n),o(this._lastCipherblock,e,s)}return e},_.prototype.decrypt=function(t){if((t=r(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),s=0;s<t.length;s+=16){o(t,n,0,s,s+16),n=this._aes.decrypt(n);for(var i=0;i<16;i++)e[s+i]=n[i]^this._lastCipherblock[i];o(t,this._lastCipherblock,0,s,s+16)}return e};var T=function(t,e,n){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=a(16);n||(n=1),this.segmentSize=n,this._shiftRegister=r(e,!0),this._aes=new B(t)};T.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,n=r(t,!0),a=0;a<n.length;a+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)n[a+s]^=e[s];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(n,this._shiftRegister,16-this.segmentSize,a,a+this.segmentSize)}return n},T.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,n=r(t,!0),a=0;a<n.length;a+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)n[a+s]^=e[s];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(t,this._shiftRegister,16-this.segmentSize,a,a+this.segmentSize)}return n};var C=function(t,e){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=a(16);this._lastPrecipher=r(e,!0),this._lastPrecipherIndex=16,this._aes=new B(t)};C.prototype.encrypt=function(t){for(var e=r(t,!0),n=0;n<e.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},C.prototype.decrypt=C.prototype.encrypt;var R=function(t){if(!(this instanceof R))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"==typeof t?(this._counter=a(16),this.setValue(t)):this.setBytes(t)};R.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");if(t>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var e=15;e>=0;--e)this._counter[e]=t%256,t=parseInt(t/256)},R.prototype.setBytes=function(t){if(16!=(t=r(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},R.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var x=function(t,e){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof R||(e=new R(e)),this._counter=e,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new B(t)};x.prototype.encrypt=function(t){for(var e=r(t,!0),n=0;n<e.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[n]^=this._remainingCounter[this._remainingCounterIndex++];return e},x.prototype.decrypt=x.prototype.encrypt;var P={AES:B,Counter:R,ModeOfOperation:{ecb:D,cbc:_,cfb:T,ofb:C,ctr:x},utils:{hex:c,utf8:i},padding:{pkcs7:{pad:function(t){var e=16-(t=r(t,!0)).length%16,n=a(t.length+e);o(t,n);for(var s=t.length;s<n.length;s++)n[s]=e;return n},strip:function(t){if((t=r(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var n=t.length-e,s=0;s<e;s++)if(t[n+s]!==e)throw new Error("PKCS#7 invalid padding byte");var i=a(n);return o(t,i,0,0,n),i}}},_arrayTest:{coerceArray:r,createArray:a,copyArray:o}};t.exports=P}()},52598:function(t,e){!function(t){"use strict";const e=Object.freeze({__proto__:null,default:{}}),n=BigInt(0),r=BigInt(1),a=BigInt(2),o=BigInt(8),s=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),i=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:s,n:s,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),c=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),u=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const d=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),l=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),f=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),m=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class p{constructor(t,e,n,r){this.x=t,this.y=e,this.z=n,this.t=r}static fromAffine(t){if(!(t instanceof b))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(b.ZERO)?p.ZERO:new p(t.x,t.y,r,P(t.x*t.y))}static toAffineBatch(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;const a=new Array(t.length),o=O(t.reduce(((t,r,o)=>r===n?t:(a[o]=t,P(t*r,e))),r),e);return t.reduceRight(((t,r,o)=>r===n?t:(a[o]=P(t*a[o],e),P(t*r,e))),o),a}(t.map((t=>t.z)));return t.map(((t,n)=>t.toAffine(e[n])))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){h(t);const{x:e,y:n,z:r}=this,{x:a,y:o,z:s}=t,i=P(e*s),c=P(a*r),u=P(n*s),d=P(o*r);return i===c&&u===d}negate(){return new p(P(-this.x),this.y,this.z,P(-this.t))}double(){const{x:t,y:e,z:n}=this,{a:r}=i,o=P(t*t),s=P(e*e),c=P(a*P(n*n)),u=P(r*o),d=t+e,l=P(P(d*d)-o-s),f=u+s,m=f-c,w=u-s,h=P(l*m),g=P(f*w),y=P(l*w),v=P(m*f);return new p(h,g,v,y)}add(t){h(t);const{x:e,y:r,z:o,t:s}=this,{x:i,y:c,z:u,t:d}=t,l=P((r-e)*(c+i)),f=P((r+e)*(c-i)),m=P(f-l);if(m===n)return this.double();const w=P(o*a*d),g=P(s*a*u),y=g+w,v=f+l,A=g-w,b=P(y*m),E=P(v*A),S=P(y*A),I=P(m*v);return new p(b,E,I,S)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,n=[];let r=this,a=r;for(let o=0;o<e;o++){a=r,n.push(a);for(let e=1;e<2**(t-1);e++)a=a.add(r),n.push(a);r=a.double()}return n}wNAF(t,e){!e&&this.equals(p.BASE)&&(e=b.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let a=e&&A.get(e);a||(a=this.precomputeWindow(n),e&&1!==n&&(a=p.normalizeZ(a),A.set(e,a)));let o=p.ZERO,s=p.BASE;const i=1+256/n,c=2**(n-1),u=BigInt(2**n-1),d=2**n,l=BigInt(n);for(let e=0;e<i;e++){const n=e*c;let i=Number(t&u);t>>=l,i>c&&(i-=d,t+=r);const f=n,m=n+Math.abs(i)-1,p=e%2!=0,h=i<0;0===i?s=s.add(w(p,a[f])):o=o.add(w(h,a[m]))}return p.normalizeZ([o,s])[0]}multiply(t,e){return this.wNAF(j(t,i.l),e)}multiplyUnsafe(t){let e=j(t,i.l,!1);const a=p.BASE,o=p.ZERO;if(e===n)return o;if(this.equals(o)||e===r)return this;if(this.equals(a))return this.wNAF(e);let s=o,c=this;for(;e>n;)e&r&&(s=s.add(c)),c=c.double(),e>>=r;return s}isSmallOrder(){return this.multiplyUnsafe(i.h).equals(p.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(i.l/a).double();return i.l%a&&(t=t.add(this)),t.equals(p.ZERO)}toAffine(t){const{x:e,y:n,z:a}=this,s=this.equals(p.ZERO);null==t&&(t=s?o:O(a));const i=P(e*t),c=P(n*t),u=P(a*t);if(s)return b.ZERO;if(u!==r)throw new Error("invZ was invalid");return new b(i,c)}fromRistrettoBytes(){y()}toRistrettoBytes(){y()}fromRistrettoHash(){y()}}function w(t,e){const n=e.negate();return t?n:e}function h(t){if(!(t instanceof p))throw new TypeError("ExtendedPoint expected")}function g(t){if(!(t instanceof v))throw new TypeError("RistrettoPoint expected")}function y(){throw new Error("Legacy method: switch to RistrettoPoint")}p.BASE=new p(i.Gx,i.Gy,r,P(i.Gx*i.Gy)),p.ZERO=new p(n,r,r,n);class v{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=i,n=P(u*t*t),a=P((n+r)*f);let o=BigInt(-1);const s=P((o-e*n)*P(n+e));let{isValid:c,value:l}=F(a,s),w=P(l*t);T(w)||(w=P(-w)),c||(l=w),c||(o=n);const h=P(o*(n-r)*m-s),g=l*l,y=P((l+l)*s),v=P(h*d),A=P(r-g),b=P(r+g);return new p(P(y*b),P(A*v),P(v*b),P(y*A))}static hashToCurve(t){const e=x((t=K(t,64)).slice(0,32)),n=this.calcElligatorRistrettoMap(e),r=x(t.slice(32,64)),a=this.calcElligatorRistrettoMap(r);return new v(n.add(a))}static fromHex(t){t=K(t,32);const{a:e,d:a}=i,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",s=x(t);if(!function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(_(s),t)||T(s))throw new Error(o);const c=P(s*s),u=P(r+e*c),d=P(r-e*c),l=P(u*u),f=P(d*d),m=P(e*a*l-f),{isValid:w,value:h}=M(P(m*f)),g=P(h*d),y=P(h*g*m);let A=P((s+s)*g);T(A)&&(A=P(-A));const b=P(u*y),E=P(A*b);if(!w||T(E)||b===n)throw new Error(o);return new v(new p(A,b,r,E))}toRawBytes(){let{x:t,y:e,z:n,t:r}=this.ep;const a=P(P(n+e)*P(n-e)),o=P(t*e),s=P(o*o),{value:i}=M(P(a*s)),c=P(i*a),d=P(i*o),f=P(c*d*r);let m;if(T(r*f)){let n=P(e*u),r=P(t*u);t=n,e=r,m=P(c*l)}else m=d;T(t*f)&&(e=P(-e));let p=P((n-e)*m);return T(p)&&(p=P(-p)),_(p)}toHex(){return k(this.toRawBytes())}toString(){return this.toHex()}equals(t){g(t);const e=this.ep,n=t.ep,r=P(e.x*n.y)===P(e.y*n.x),a=P(e.y*n.y)===P(e.x*n.x);return r||a}add(t){return g(t),new v(this.ep.add(t.ep))}subtract(t){return g(t),new v(this.ep.subtract(t.ep))}multiply(t){return new v(this.ep.multiply(t))}multiplyUnsafe(t){return new v(this.ep.multiplyUnsafe(t))}}v.BASE=new v(p.BASE),v.ZERO=new v(p.ZERO);const A=new WeakMap;class b{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,A.delete(this)}static fromHex(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{d:n,P:a}=i,o=(t=K(t,32)).slice();o[31]=-129&t[31];const s=C(o);if(e&&s>=a)throw new Error("Expected 0 < hex < P");if(!e&&s>=c)throw new Error("Expected 0 < hex < 2**256");const u=P(s*s),d=P(u-r),l=P(n*u+r);let{isValid:f,value:m}=F(d,l);if(!f)throw new Error("Point.fromHex: invalid y coordinate");const p=(m&r)===r;return!!(128&t[31])!==p&&(m=P(-m)),new b(m,s)}static async fromPrivateKey(t){return(await V(t)).point}toRawBytes(){const t=_(this.y);return t[31]|=this.x&r?128:0,t}toHex(){return k(this.toRawBytes())}toX25519(){const{y:t}=this;return _(P((r+t)*O(r-t)))}isTorsionFree(){return p.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new b(P(-this.x),this.y)}add(t){return p.fromAffine(this).add(p.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return p.fromAffine(this).multiply(t,this).toAffine()}}b.BASE=new b(i.Gx,i.Gy),b.ZERO=new b(n,r);class E{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=K(t,64),n=b.fromHex(e.slice(0,32),!1),r=C(e.slice(32,64));return new E(n,r)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof b))throw new Error("Expected Point instance");return j(e,i.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(_(this.s),32),t}toHex(){return k(this.toRawBytes())}}function S(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.every((t=>t instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const r=e.reduce(((t,e)=>t+e.length),0),a=new Uint8Array(r);for(let t=0,n=0;t<e.length;t++){const r=e[t];a.set(r,n),n+=r.length}return a}const I=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function k(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=I[t[n]];return e}function B(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=2*n,a=t.slice(r,r+2),o=Number.parseInt(a,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[n]=o}return e}function D(t){return B(t.toString(16).padStart(64,"0"))}function _(t){return D(t).reverse()}function T(t){return(P(t)&r)===r}function C(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+k(Uint8Array.from(t).reverse()))}const R=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function x(t){return P(C(t)&R)}function P(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;const r=t%e;return r>=n?r:e+r}function O(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;if(t===n||e<=n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let a=P(t,e),o=e,s=n,c=r;for(;a!==n;){const t=o%a,e=s-c*(o/a);o=a,a=t,s=c,c=e}if(o!==r)throw new Error("invert: does not exist");return P(s,e)}function U(t,e){const{P:r}=i;let a=t;for(;e-- >n;)a*=a,a%=r;return a}function N(t){const{P:e}=i,n=BigInt(5),o=BigInt(10),s=BigInt(20),c=BigInt(40),u=BigInt(80),d=t*t%e*t%e,l=U(d,a)*d%e,f=U(l,r)*t%e,m=U(f,n)*f%e,p=U(m,o)*m%e,w=U(p,s)*p%e,h=U(w,c)*w%e,g=U(h,u)*h%e,y=U(g,u)*h%e,v=U(y,o)*m%e;return{pow_p_5_8:U(v,a)*t%e,b2:d}}function F(t,e){const n=P(e*e*e),r=P(n*n*e);let a=P(t*n*N(t*r).pow_p_5_8);const o=P(e*a*a),s=a,i=P(a*u),c=o===t,d=o===P(-t),l=o===P(-t*u);return c&&(a=s),(d||l)&&(a=i),T(a)&&(a=P(-a)),{isValid:c||d,value:a}}function M(t){return F(r,t)}function W(t){return P(C(t),i.l)}function K(t,e){const n=t instanceof Uint8Array?Uint8Array.from(t):B(t);if("number"==typeof e&&n.length!==e)throw new Error(`Expected ${e} bytes`);return n}function j(t,e){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)throw new TypeError("Specify max value");if("number"==typeof t&&Number.isSafeInteger(t)&&(t=BigInt(t)),"bigint"==typeof t&&t<e)if(r){if(n<t)return t}else if(n<=t)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function q(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function L(t){if(32!==(t="bigint"==typeof t||"number"==typeof t?D(j(t,c)):K(t)).length)throw new Error("Expected 32 bytes");return t}function z(t){const e=q(t.slice(0,32)),n=t.slice(32,64),r=W(e),a=b.BASE.multiply(r),o=a.toRawBytes();return{head:e,prefix:n,scalar:r,point:a,pointBytes:o}}let H;function J(){if("function"!=typeof H)throw new Error("utils.sha512Sync must be set to use sync methods");return H(...arguments)}async function V(t){return z(await et.sha512(L(t)))}function $(t){return z(J(L(t)))}function Q(t,e,n){e=K(e),n instanceof b||(n=b.fromHex(n,!1));const{r,s:a}=t instanceof E?t.assertValidity():E.fromHex(t);return{r,s:a,SB:p.BASE.multiplyUnsafe(a),pub:n,msg:e}}function G(t,e,n,r){const a=W(r),o=p.fromAffine(t).multiplyUnsafe(a);return p.fromAffine(e).add(o).subtract(n).multiplyUnsafe(i.h).equals(p.ZERO)}const Z={getExtendedPublicKey:$,getPublicKey:function(t){return $(t).pointBytes},sign:function(t,e){t=K(t);const{prefix:n,scalar:r,pointBytes:a}=$(e),o=W(J(n,t)),s=b.BASE.multiply(o),c=P(o+W(J(s.toRawBytes(),a,t))*r,i.l);return new E(s,c).toRawBytes()},verify:function(t,e,n){const{r,SB:a,msg:o,pub:s}=Q(t,e,n),i=J(r.toRawBytes(),s.toRawBytes(),o);return G(s,r,a,i)}};function X(t,e,n){const r=P(t*(e-n));return[e=P(e-r),n=P(n+r)]}b.BASE._setWindowSize(8);const Y={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(t,e){const a=function(t,e){const{P:a}=i,o=j(t,a),s=j(e,a),c=BigInt(121665),u=o;let d,l=r,f=n,m=o,p=r,w=n;for(let t=BigInt(254);t>=n;t--){const e=s>>t&r;w^=e,d=X(w,l,m),l=d[0],m=d[1],d=X(w,f,p),f=d[0],p=d[1],w=e;const n=l+f,a=P(n*n),o=l-f,i=P(o*o),h=a-i,g=m+p,y=P((m-p)*n),v=P(g*o),A=y+v,b=y-v;m=P(A*A),p=P(u*P(b*b)),l=P(a*i),f=P(h*(a+P(c*h)))}d=X(w,l,m),l=d[0],m=d[1],d=X(w,f,p),f=d[0],p=d[1];const{pow_p_5_8:h,b2:g}=N(f),y=P(U(h,BigInt(3))*g);return P(l*y)}(function(t){const e=K(t,32);return e[31]&=127,C(e)}(e),C(q(K(t,32))));if(a===n)throw new Error("Invalid private or public key received");return _(P(a,i.P))},scalarMultBase:t=>Y.scalarMult(t,Y.BASE_POINT_U)},tt={node:e,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},et={bytesToHex:k,hexToBytes:B,concatBytes:S,getExtendedPublicKey:V,mod:P,invert:O,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if((t=K(t)).length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return P(C(t),i.l-r)+r},randomBytes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(tt.web)return tt.web.getRandomValues(new Uint8Array(t));if(tt.node){const{randomBytes:e}=tt.node;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>et.randomBytes(32),sha512:async function(){const t=S(...arguments);if(tt.web){const e=await tt.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(tt.node)return Uint8Array.from(tt.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.BASE;const n=e.equals(b.BASE)?e:new b(e.x,e.y);return n._setWindowSize(t),n.multiply(a),n},sha512Sync:void 0};Object.defineProperties(et,{sha512Sync:{configurable:!1,get:()=>H,set(t){H||(H=t)}}}),t.CURVE=i,t.ExtendedPoint=p,t.Point=b,t.RistrettoPoint=v,t.Signature=E,t.curve25519=Y,t.getPublicKey=async function(t){return(await V(t)).pointBytes},t.getSharedSecret=async function(t,e){const{head:n}=await V(t),r=b.fromHex(e).toX25519();return Y.scalarMult(n,r)},t.sign=async function(t,e){t=K(t);const{prefix:n,scalar:r,pointBytes:a}=await V(e),o=W(await et.sha512(n,t)),s=b.BASE.multiply(o),c=P(o+W(await et.sha512(s.toRawBytes(),a,t))*r,i.l);return new E(s,c).toRawBytes()},t.sync=Z,t.utils=et,t.verify=async function(t,e,n){const{r,SB:a,msg:o,pub:s}=Q(t,e,n),i=await et.sha512(r.toRawBytes(),s.toRawBytes(),o);return G(s,r,a,i)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},59288:(t,e,n)=>{"use strict";n.d(e,{p:()=>r,v:()=>a});class r extends Error{constructor(t,e){super(t),this.metadata=e}}function a(t,e,n){if(!t)throw new r(e,n)}},10309:(t,e,n)=>{"use strict";n.d(e,{Z2:()=>a});var r=n(19314);const a=1e3;(0,r.A)((function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"short",a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return new Date(e).toLocaleString(t,{year:n?void 0:"numeric",month:r||void 0,day:a?void 0:"numeric",hour:o?"numeric":void 0,minute:o?"numeric":void 0,hourCycle:"h23"})}))},1689:(t,e,n)=>{"use strict";n.d(e,{B:()=>r});const r=n(31481).hL1&&!["chrome-extension:","moz-extension:"].includes(self.location.protocol)},45232:(t,e,n)=>{"use strict";n.d(e,{EQ:()=>f,J5:()=>d,x3:()=>c,x6:()=>u});var r=n(31481),a=n(39989),o=n(55029),s=n(37836);const i=3e4;async function c(t,e,n){try{return await u(t,e,n)}catch(o){if(o instanceof a.K$&&(!o.statusCode||403===o.statusCode))return u(`${r.HUv}/proxy/?url=${t.toString()}`,e,n);throw o}}async function u(t,e,n){const r=new URL(t);return e&&Object.entries(e).forEach((t=>{let[e,n]=t;void 0!==n&&(Array.isArray(n)?n.forEach((t=>{r.searchParams.append(e,t.toString())})):r.searchParams.set(e,n.toString()))})),(await d(r,n)).json()}async function d(t,e,n){const{retries:c=r.TUC,timeouts:u=r.cSq,shouldSkipRetryFn:d=m}=null!=n?n:{};let f,p="Unknown error.";for(let n=1;n<=c;n++)try{var w;n>1&&(0,o.MD)(`Retry request #${n}:`,t.toString(),f);const r=Array.isArray(u)?null!==(w=u[n-1])&&void 0!==w?w:u[u.length-1]:Math.min(u*n,i),a=await l(t,e,r);if(f=a.status,f>=400){const{error:t}=await a.json().catch((()=>{}));throw new Error(null!=t?t:`HTTP Error ${f}`)}return a}catch(t){var h;if(p="string"==typeof t?t:null!==(h=t.message)&&void 0!==h?h:p,d(p,f))throw new a.K$(p,f);n<c&&await(0,s.v7)(r.WRE*n)}throw new a.K$(p)}async function l(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.cSq;const a=new AbortController,o=setTimeout((()=>{a.abort()}),n);try{return await fetch(t,{...e,signal:a.signal,cache:"no-cache"})}finally{clearTimeout(o)}}async function f(t,e){if(!(t.ok||null!=e&&e.includes(t.status))){var n;let{error:e,errors:o}=await t.json().catch((()=>{}));var r;throw!e&&o&&o.length&&(e=null===(r=o[0])||void 0===r?void 0:r.msg),new a.K$(null!==(n=e)&&void 0!==n?n:`HTTP Error ${t.status}`,t.status)}return t}function m(t,e){return e&&[400,404].includes(e)}},2188:(t,e,n)=>{"use strict";n.d(e,{H:()=>l});var r=n(31481),a=n(10309),o=n(1689),s=n(55029),i=n(37836);const c=("development"===r.Guj||"staging"===r.Guj)&&"object"==typeof window&&!o.B,u=(0,i.nF)((t=>window.alert(t)),10*a.Z2);function d(t){t instanceof ErrorEvent&&"ResizeObserver loop limit exceeded"===t.message||(t.preventDefault(),l(t instanceof ErrorEvent?t.error||t.message:t.reason))}function l(t){(0,s.SJ)("handleError",t);const e="string"==typeof t?t:t.message,n="object"==typeof t?t.stack:void 0;e.endsWith("Failed to import rlottie-wasm.js")||c&&u(`${r.FHx}\n\n${e||t}\n${n}`)}self.addEventListener("error",d),self.addEventListener("unhandledrejection",d)},55029:(t,e,n)=>{"use strict";n.d(e,{MD:()=>l,SJ:()=>d,ao:()=>u});var r=n(31481),a=n(59288);const o=999,s=[];function i(t,e){return e instanceof Error?{name:e.name,message:e.message,stack:e.stack,metadata:e instanceof a.p?e.metadata:void 0}:e}function c(t){s.length>o&&s.shift(),s.push({...t,args:t.args.map((t=>JSON.stringify(t,i))),time:new Date})}function u(){return s}function d(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];c({message:t,level:"debugError",args:n}),r.Oig&&console.error(`[DEBUG][${t}]`,...n)}function l(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];c({message:t,level:"debug",args:n}),r.Oig&&console.log(`[DEBUG] ${t}`,...n)}},50110:(t,e,n)=>{"use strict";n.d(e,{A:()=>i,T:()=>s});var r=n(31481),a=n(2188);const o=!r.MVx;async function s(t,e){if(!o)return t();const{rescue:n,always:r,shouldIgnoreError:s}=null!=e?e:{};try{return await t()}catch(t){return null==n||n(t),void(s||(0,a.H)(t))}finally{null==r||r()}}function i(t,e){if(!o)return t();const{rescue:n,always:r,shouldIgnoreError:s}=null!=e?e:{};try{return t()}catch(t){return null==n||n(t),void(s||(0,a.H)(t))}finally{null==r||r()}}},37836:(t,e,n)=>{"use strict";function r(t,e){let n,r,a,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){r=!0;for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];a=i,n||(o&&(r=!1,t(...a)),n=self.setInterval((()=>{if(!r)return self.clearInterval(n),void(n=void 0);r=!1,t(...a)}),e))}}n.d(e,{nF:()=>r,v7:()=>a});const a=t=>new Promise((e=>{setTimeout((()=>e()),t)}))},19314:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});const r=new WeakMap;function a(t){return function(){let e=r.get(t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];const s=a.map(String).join("_");if(e){const t=e.get(s);if(t)return t}else e=new Map,r.set(t,e);const i=t(...a);return e.set(s,i),i}}},15340:()=>{},79838:()=>{},66443:()=>{}},r={};function a(t){var e=r[t];if(void 0!==e)return e.exports;var o=r[t]={exports:{}};return n[t].call(o.exports,o,o.exports,a),o.exports}a.m=n,a.x=()=>{var t=a.O(void 0,[494,362,776],(()=>a(31284)));return a.O(t)},t=[],a.O=(e,n,r,o)=>{if(!n){var s=1/0;for(d=0;d<t.length;d++){for(var[n,r,o]=t[d],i=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((t=>a.O[t](n[c])))?n.splice(c--,1):(i=!1,o<s&&(s=o));if(i){t.splice(d--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[n,r,o]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce(((e,n)=>(a.f[n](t,e),e)),[])),a.u=t=>t+"."+{362:"1dbe55c972e9075fe06c",494:"2a76b4246c2b484142fb",776:"45feed3695ebbd842676"}[t]+".js",a.miniCssF=t=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{var t={941:1};a.f.i=(e,n)=>{t[e]||importScripts(a.p+a.u(e))};var e=self.webpackChunkmytonwallet=self.webpackChunkmytonwallet||[],n=e.push.bind(e);e.push=e=>{var[r,o,s]=e;for(var i in o)a.o(o,i)&&(a.m[i]=o[i]);for(s&&s(a);r.length;)t[r.pop()]=1;n(e)}})(),e=a.x,a.x=()=>Promise.all([494,362,776].map(a.e,a)).then(e),a.x()})();
//# sourceMappingURL=941.2fdddae7403cbdef81d1.js.map