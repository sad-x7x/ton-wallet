{"version":3,"file":"main.e2948c84e72540ee91ef.js","mappings":"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","sources":["webpack://mytonwallet/webpack/runtime/create fake namespace object","webpack://mytonwallet/webpack/runtime/load script","webpack://mytonwallet/./node_modules/@capacitor/core/dist/index.js","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/definitions.js","webpack://mytonwallet/./src/api/chains/ton/constants.ts","webpack://mytonwallet/./src/api/chains/ton/contracts/JettonStaking/imports/constants.ts","webpack://mytonwallet/./src/api/errors.ts","webpack://mytonwallet/./src/util/createPostMessageInterface.ts","webpack://mytonwallet/./src/util/windowProvider/index.ts","webpack://mytonwallet/./src/api/providers/worker/connector.ts","webpack://mytonwallet/./src/api/types/errors.ts","webpack://mytonwallet/./src/api/types/misc.ts","webpack://mytonwallet/./src/config.ts","webpack://mytonwallet/./src/lib/big.js/index.js","webpack://mytonwallet/./src/lib/fasterdom/fasterdom.ts","webpack://mytonwallet/./src/lib/fasterdom/layoutCauses.ts","webpack://mytonwallet/./src/lib/fasterdom/stricterdom.ts","webpack://mytonwallet/./src/util/Deferred.ts","webpack://mytonwallet/./src/util/PostMessageConnector.ts","webpack://mytonwallet/./src/util/account.ts","webpack://mytonwallet/./src/util/animation.ts","webpack://mytonwallet/./src/util/assert.ts","webpack://mytonwallet/./src/util/bigint.ts","webpack://mytonwallet/./src/util/dateFormat.ts","webpack://mytonwallet/./src/util/decimals.ts","webpack://mytonwallet/./src/util/dns.ts","webpack://mytonwallet/./src/util/environment.ts","webpack://mytonwallet/./src/util/generateUniqueId.ts","webpack://mytonwallet/./src/util/getPlatform.ts","webpack://mytonwallet/./src/util/handleError.ts","webpack://mytonwallet/./src/util/iteratees.ts","webpack://mytonwallet/./src/util/launchMediaWorkers.ts","webpack://mytonwallet/./src/util/ledger/utils.ts","webpack://mytonwallet/./src/util/stringFormat.ts","webpack://mytonwallet/./src/util/logs.ts","webpack://mytonwallet/./src/util/safeExec.ts","webpack://mytonwallet/./src/util/schedulers.ts","webpack://mytonwallet/./src/util/windowEnvironment.ts","webpack://mytonwallet/./src/util/windowProvider/methods/capacitorStorage.ts","webpack://mytonwallet/./src/util/windowProvider/methods/localStorage.ts","webpack://mytonwallet/./src/util/withCache.ts","webpack://mytonwallet/./node_modules/base64-js/index.js","webpack://mytonwallet/./node_modules/buffer/index.js","webpack://mytonwallet/./node_modules/ieee754/index.js","webpack://mytonwallet/./node_modules/process/browser.js","webpack://mytonwallet/webpack/bootstrap","webpack://mytonwallet/webpack/runtime/compat get default export","webpack://mytonwallet/webpack/runtime/define property getters","webpack://mytonwallet/webpack/runtime/ensure chunk","webpack://mytonwallet/webpack/runtime/get javascript chunk filename","webpack://mytonwallet/webpack/runtime/get mini-css chunk filename","webpack://mytonwallet/webpack/runtime/global","webpack://mytonwallet/webpack/runtime/hasOwnProperty shorthand","webpack://mytonwallet/webpack/runtime/make namespace object","webpack://mytonwallet/webpack/runtime/publicPath","webpack://mytonwallet/webpack/runtime/jsonp chunk loading","webpack://mytonwallet/./src/util/arePropsShallowEqual.ts","webpack://mytonwallet/./src/util/debugOverlay.ts","webpack://mytonwallet/./src/util/callbacks.ts","webpack://mytonwallet/./src/util/signals.ts","webpack://mytonwallet/./src/lib/teact/heavyAnimation.ts","webpack://mytonwallet/./src/lib/teact/teact.ts","webpack://mytonwallet/./src/hooks/useForceUpdate.ts","webpack://mytonwallet/./src/hooks/useUniqueId.ts","webpack://mytonwallet/./src/lib/teact/teactn.tsx","webpack://mytonwallet/./src/global/index.ts","webpack://mytonwallet/./src/util/memoize.ts","webpack://mytonwallet/./src/global/selectors/accounts.ts","webpack://mytonwallet/./src/util/ton/transfer.ts","webpack://mytonwallet/./src/global/selectors/dapp.ts","webpack://mytonwallet/./src/util/round.ts","webpack://mytonwallet/./src/global/selectors/tokens.ts","webpack://mytonwallet/./src/util/compareActivities.ts","webpack://mytonwallet/./src/util/shortenAddress.ts","webpack://mytonwallet/./src/util/poisoningHash.ts","webpack://mytonwallet/./src/util/activities/index.ts","webpack://mytonwallet/./src/global/selectors/activities.ts","webpack://mytonwallet/./src/global/types.ts","webpack://mytonwallet/./src/util/chain.ts","webpack://mytonwallet/./src/util/tokens.ts","webpack://mytonwallet/./src/global/selectors/swap.ts","webpack://mytonwallet/./src/util/fee/transferFee.ts","webpack://mytonwallet/./src/util/isValidAddressOrDomain.ts","webpack://mytonwallet/./src/global/selectors/transfer.ts","webpack://mytonwallet/./src/global/selectors/staking.ts","webpack://mytonwallet/./src/global/actions/api/initial.ts","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/index.js","webpack://mytonwallet/./src/util/random.ts","webpack://mytonwallet/./src/util/windowSize.ts","webpack://mytonwallet/./src/util/telegram/index.ts","webpack://mytonwallet/./src/util/authApi/telegram.ts","webpack://mytonwallet/./src/util/authApi/webAuthn.ts","webpack://mytonwallet/./src/util/authApi/index.ts","webpack://mytonwallet/./node_modules/@capacitor/app/dist/esm/index.js","webpack://mytonwallet/./node_modules/@sina_kh/mtw-capacitor-splash-screen/dist/esm/index.js","webpack://mytonwallet/./node_modules/capacitor-plugin-safe-area/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/app-launcher/dist/esm/index.js","webpack://mytonwallet/./src/util/url.ts","webpack://mytonwallet/./src/util/base64toHex.ts","webpack://mytonwallet/./src/util/openUrl.ts","webpack://mytonwallet/./src/util/renderPromise.ts","webpack://mytonwallet/./src/util/deeplink/constants.ts","webpack://mytonwallet/./src/hooks/useMediaQuery.ts","webpack://mytonwallet/./src/hooks/useDeviceScreen.ts","webpack://mytonwallet/./src/util/deeplink/index.ts","webpack://mytonwallet/./node_modules/@capacitor/push-notifications/dist/esm/index.js","webpack://mytonwallet/./src/global/selectors/notifications.ts","webpack://mytonwallet/./src/util/capacitor/platform.ts","webpack://mytonwallet/./src/util/capacitor/notifications.ts","webpack://mytonwallet/./src/util/capacitor/index.ts","webpack://mytonwallet/./src/util/biometrics.ts","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/web.js","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/index.js","webpack://mytonwallet/./src/util/haptics.ts","webpack://mytonwallet/./src/util/clipboard.ts","webpack://mytonwallet/./src/util/isEmptyObject.ts","webpack://mytonwallet/./src/util/isMnemonicPrivateKey.ts","webpack://mytonwallet/./src/global/helpers/renderText.tsx","webpack://mytonwallet/./src/util/cacheApi.ts","webpack://mytonwallet/./src/util/formatNumber.ts","webpack://mytonwallet/./src/util/langProvider.ts","webpack://mytonwallet/./src/util/deepDiff.ts","webpack://mytonwallet/./src/util/deepMerge.ts","webpack://mytonwallet/./src/hooks/useStateRef.ts","webpack://mytonwallet/./src/hooks/useLastCallback.ts","webpack://mytonwallet/./src/hooks/useBackgroundMode.ts","webpack://mytonwallet/./src/util/multitab.ts","webpack://mytonwallet/./src/global/initialState.ts","webpack://mytonwallet/./src/util/areDeepEqual.ts","webpack://mytonwallet/./src/util/isPartialDeepEqual.ts","webpack://mytonwallet/./src/global/reducers/misc.ts","webpack://mytonwallet/./src/global/helpers/swap.ts","webpack://mytonwallet/./src/global/reducers/swap.ts","webpack://mytonwallet/./src/global/reducers/transfer.ts","webpack://mytonwallet/./src/global/reducers/wallet.ts","webpack://mytonwallet/./src/global/reducers/staking.ts","webpack://mytonwallet/./src/global/reducers/dapp.ts","webpack://mytonwallet/./src/global/reducers/activities.ts","webpack://mytonwallet/./src/global/reducers/nfts.ts","webpack://mytonwallet/./src/global/reducers/vesting.ts","webpack://mytonwallet/./src/global/reducers/cards.ts","webpack://mytonwallet/./src/global/actions/api/auth.ts","webpack://mytonwallet/./src/global/helpers/index.ts","webpack://mytonwallet/./src/global/reducers/tokens.ts","webpack://mytonwallet/./src/global/actions/api/wallet.ts","webpack://mytonwallet/./src/util/fee/getTonOperationFees.ts","webpack://mytonwallet/../../src/index.ts","webpack://mytonwallet/./src/util/buildClassName.ts","webpack://mytonwallet/./src/util/domEvents.ts","webpack://mytonwallet/./src/hooks/useEffectOnce.ts","webpack://mytonwallet/./src/hooks/useLang.ts","webpack://mytonwallet/./src/hooks/useShowTransition.ts","webpack://mytonwallet/./src/api/tonConnect/types/index.ts","webpack://mytonwallet/./src/util/tonConnectEnvironment.ts","webpack://mytonwallet/./src/components/explore/helpers.ts","webpack://mytonwallet/./src/components/explore/hooks/useDappBridge.ts","webpack://mytonwallet/./src/components/explore/hooks/useWebViewBridge.ts","webpack://mytonwallet/./src/components/ui/InAppBrowser.tsx","webpack://mytonwallet/./src/components/ui/InAppBrowser.module.scss?a7be","webpack://mytonwallet/./src/global/helpers/misc.ts","webpack://mytonwallet/./src/components/ui/helpers/assetLogos.ts","webpack://mytonwallet/./src/global/helpers/staking.ts","webpack://mytonwallet/./src/global/actions/api/staking.ts","webpack://mytonwallet/./src/util/math.ts","webpack://mytonwallet/./src/util/captureEvents.ts","webpack://mytonwallet/./src/util/lethargy.ts","webpack://mytonwallet/./src/util/captureKeyboardListeners.ts","webpack://mytonwallet/./src/util/modalSwipeManager.ts","webpack://mytonwallet/./src/util/trapFocus.ts","webpack://mytonwallet/./src/util/cssColorToHex.ts","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/navigationbar.events.js","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/index.js","webpack://mytonwallet/./node_modules/@sina_kh/mtw-capacitor-status-bar/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@sina_kh/mtw-capacitor-status-bar/dist/esm/index.js","webpack://mytonwallet/./src/util/switchTheme.ts","webpack://mytonwallet/./src/util/capacitor/switchStatusBar.ts","webpack://mytonwallet/./src/hooks/useEffectWithPrevDeps.ts","webpack://mytonwallet/./src/hooks/useDelegatedBottomSheet.ts","webpack://mytonwallet/./src/hooks/useDelegatingBottomSheet.ts","webpack://mytonwallet/./src/hooks/usePrevious.ts","webpack://mytonwallet/./src/hooks/useSyncEffect.ts","webpack://mytonwallet/./src/util/telegram/backButtonManager.ts","webpack://mytonwallet/./src/hooks/useHistoryBack.ts","webpack://mytonwallet/./src/components/ui/LoadingDots.module.scss?6dd6","webpack://mytonwallet/./src/components/ui/LoadingDots.tsx","webpack://mytonwallet/./src/components/ui/Button.module.scss?78d5","webpack://mytonwallet/./src/components/ui/Button.tsx","webpack://mytonwallet/./src/lib/teact/dom-events.ts","webpack://mytonwallet/./src/lib/teact/teact-dom.ts","webpack://mytonwallet/./src/components/ui/Portal.ts","webpack://mytonwallet/./src/components/ui/Modal.module.scss?b689","webpack://mytonwallet/./src/components/ui/Modal.tsx","webpack://mytonwallet/./src/hooks/freezeWhenClosed.ts","webpack://mytonwallet/./src/hooks/useHideBrowser.ts","webpack://mytonwallet/./src/util/fee/swapFee.ts","webpack://mytonwallet/./src/util/bigNumber.ts","webpack://mytonwallet/./src/global/actions/api/dapps.ts","webpack://mytonwallet/./src/global/actions/api/swap.ts","webpack://mytonwallet/./src/global/actions/api/tokens.ts","webpack://mytonwallet/./src/global/actions/api/transfer.ts","webpack://mytonwallet/./src/global/actions/api/nfts.ts","webpack://mytonwallet/./src/global/actions/api/cards.ts","webpack://mytonwallet/./src/global/actions/api/vesting.ts","webpack://mytonwallet/./src/util/createAbortableFunction.ts","webpack://mytonwallet/./src/global/reducers/notifications.ts","webpack://mytonwallet/./src/global/actions/api/notifications.ts","webpack://mytonwallet/./src/global/actions/api/activity.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/initial.ts","webpack://mytonwallet/./node_modules/@capgo/native-audio/dist/esm/index.js","webpack://mytonwallet/./src/util/notificationSound.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/activities.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/dapp.ts","webpack://mytonwallet/./src/util/switchAnimationLevel.ts","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/definitions.js","webpack://mytonwallet/./src/global/actions/ui/initial.ts","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/index.js","webpack://mytonwallet/./src/util/getIsAppUpdateNeeded.ts","webpack://mytonwallet/./src/util/ledger/tab.ts","webpack://mytonwallet/./src/hooks/useAppTheme.ts","webpack://mytonwallet/./src/hooks/useFlag.ts","webpack://mytonwallet/./src/hooks/useHotkeys.ts","webpack://mytonwallet/./src/util/parseHotkey.ts","webpack://mytonwallet/./src/hooks/useThrottledCallback.ts","webpack://mytonwallet/./src/util/preloadImage.ts","webpack://mytonwallet/./src/hooks/useMediaTransition.ts","webpack://mytonwallet/./src/components/ui/Image.tsx","webpack://mytonwallet/./src/components/ui/helpers/animatedAssets.ts","webpack://mytonwallet/./src/hooks/useFocusAfterAnimation.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.module.scss?e839","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.tsx","webpack://mytonwallet/./src/hooks/useHideBottomBar.ts","webpack://mytonwallet/./src/util/buildStyle.ts","webpack://mytonwallet/./src/lib/rlottie/RLottie.async.ts","webpack://mytonwallet/./src/util/colors.ts","webpack://mytonwallet/./src/hooks/useHeavyAnimation.ts","webpack://mytonwallet/./src/hooks/usePriorityPlaybackCheck.ts","webpack://mytonwallet/./src/hooks/useSharedIntersectionObserver.ts","webpack://mytonwallet/./src/components/ui/AnimatedSticker.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIcon.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.module.scss?9243","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.tsx","webpack://mytonwallet/./src/components/ui/Input.module.scss?4fb9","webpack://mytonwallet/./src/components/ui/Input.tsx","webpack://mytonwallet/./src/util/cssAnimationEndListeners.ts","webpack://mytonwallet/./src/util/swipeController.ts","webpack://mytonwallet/./src/components/ui/PinPad.module.scss?228e","webpack://mytonwallet/./src/components/ui/PinPadButton.tsx","webpack://mytonwallet/./src/components/ui/PinPad.tsx","webpack://mytonwallet/./src/components/ui/PasswordForm.tsx","webpack://mytonwallet/./src/components/ui/PasswordForm.module.scss?0d24","webpack://mytonwallet/./src/util/forceReflow.ts","webpack://mytonwallet/./src/components/ui/Transition.tsx","webpack://mytonwallet/./src/components/AppLocked.module.scss?13ef","webpack://mytonwallet/./src/components/AppLocked.tsx","webpack://mytonwallet/./src/global/actions/ui/misc.ts","webpack://mytonwallet/./src/global/actions/ui/settings.ts","webpack://mytonwallet/./src/global/actions/ui/dapps.ts","webpack://mytonwallet/./src/global/actions/ui/nfts.ts","webpack://mytonwallet/./src/global/actions/ui/vesting.ts","webpack://mytonwallet/./src/global/actions/ui/tokens.ts","webpack://mytonwallet/./src/global/actions/ui/transfer.ts","webpack://mytonwallet/./src/global/actions/ui/shared.ts","webpack://mytonwallet/./src/global/actions/ui/notifications.ts","webpack://mytonwallet/./src/util/accentColor/constants.ts","webpack://mytonwallet/./src/util/accentColor/index.ts","webpack://mytonwallet/./src/global/actions/ui/cards.ts","webpack://mytonwallet/./src/global/cache.ts","webpack://mytonwallet/./src/global/init.ts","webpack://mytonwallet/./src/util/bigintPatch.ts","webpack://mytonwallet/./src/util/betterView.ts","webpack://mytonwallet/./src/electron/types.ts","webpack://mytonwallet/./src/util/focusScroll.ts","webpack://mytonwallet/./src/util/activeTabMonitor.ts","webpack://mytonwallet/./src/hooks/useSignalEffect.ts","webpack://mytonwallet/./src/hooks/useDerivedState.ts","webpack://mytonwallet/./src/hooks/useIntersectionObserver.ts","webpack://mytonwallet/./src/hooks/useAppIntersectionObserver.ts","webpack://mytonwallet/./src/hooks/useInterval.ts","webpack://mytonwallet/./src/hooks/useTimeout.ts","webpack://mytonwallet/./src/components/AppInactive.module.scss?fa93","webpack://mytonwallet/./src/components/AppInactive.tsx","webpack://mytonwallet/./src/hooks/useCurrentOrPrev.ts","webpack://mytonwallet/./src/hooks/useScrolledState.ts","webpack://mytonwallet/./src/components/ui/Emoji.module.scss?1c66","webpack://mytonwallet/./src/components/ui/Emoji.tsx","webpack://mytonwallet/./src/components/ui/ModalHeader.tsx","webpack://mytonwallet/./src/components/settings/Settings.module.scss?98b7","webpack://mytonwallet/./src/components/settings/SettingsAbout.tsx","webpack://mytonwallet/./src/components/auth/Auth.module.scss?dc00","webpack://mytonwallet/./src/components/auth/AuthCheckPassword.tsx","webpack://mytonwallet/./src/components/ui/SuggestionList.module.scss?e7a6","webpack://mytonwallet/./src/components/ui/SuggestionList.tsx","webpack://mytonwallet/./src/components/common/InputMnemonic.module.scss?8c11","webpack://mytonwallet/./src/components/common/InputMnemonic.tsx","webpack://mytonwallet/./src/components/common/backup/BackUpContent.module.scss?30c9","webpack://mytonwallet/./src/components/common/backup/CheckWordsForm.tsx","webpack://mytonwallet/./src/components/common/backup/CheckWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthCheckWords.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmPin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBackup.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateNativeBiometrics.tsx","webpack://mytonwallet/./src/hooks/usePasswordValidation.ts","webpack://mytonwallet/./src/components/ui/CreatePasswordForm.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePassword.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatingWallet.tsx","webpack://mytonwallet/./src/components/ui/Checkbox.tsx","webpack://mytonwallet/./src/components/ui/Checkbox.module.scss?4964","webpack://mytonwallet/./src/components/auth/AuthBackupWarning.tsx","webpack://mytonwallet/./src/components/auth/AuthDisclaimer.tsx","webpack://mytonwallet/./src/components/auth/AuthImportMnemonic.tsx","webpack://mytonwallet/./src/hooks/useClipboardPaste.ts","webpack://mytonwallet/./src/components/common/backup/SafetyRulesContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSafetyRules.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsList.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSecretWords.tsx","webpack://mytonwallet/./src/components/auth/AuthStart.tsx","webpack://mytonwallet/./src/components/auth/Auth.tsx","webpack://mytonwallet/./src/util/resolveSlideTransitionName.ts","webpack://mytonwallet/./src/hooks/useModalTransitionKeys.ts","webpack://mytonwallet/./src/hooks/useCardCustomization.ts","webpack://mytonwallet/./src/components/main/sections/Card/AccountSelector.module.scss?68a8","webpack://mytonwallet/./src/components/main/sections/Card/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButton.module.scss?29d1","webpack://mytonwallet/./src/components/common/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButtonWrapper.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.module.scss?bcee","webpack://mytonwallet/./src/components/ledger/LedgerConfirmOperation.tsx","webpack://mytonwallet/./src/hooks/usePrevDuringAnimationSimple.ts","webpack://mytonwallet/./src/util/captureEscKeyListener.ts","webpack://mytonwallet/./src/components/ui/Menu.module.scss?ed87","webpack://mytonwallet/./src/components/ui/Menu.tsx","webpack://mytonwallet/./src/hooks/useVirtualBackdrop.ts","webpack://mytonwallet/./src/components/ui/Dropdown.module.scss?3afe","webpack://mytonwallet/./src/components/ui/DropdownMenu.tsx","webpack://mytonwallet/./src/components/ui/Spinner.module.scss?099b","webpack://mytonwallet/./src/components/ui/Spinner.tsx","webpack://mytonwallet/./src/components/ui/Dropdown.tsx","webpack://mytonwallet/./src/components/ledger/LedgerConnect.tsx","webpack://mytonwallet/./src/components/dapps/Dapp.module.scss?bf14","webpack://mytonwallet/./src/components/dapps/DappInfo.tsx","webpack://mytonwallet/./src/components/dapps/DappPassword.tsx","webpack://mytonwallet/./src/components/dapps/DappConnectModal.tsx","webpack://mytonwallet/./src/components/dapps/DappLedgerWarning.tsx","webpack://mytonwallet/./src/components/transfer/NftInfo.module.scss?aa0a","webpack://mytonwallet/./src/components/transfer/NftInfo.tsx","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/share/dist/esm/index.js","webpack://mytonwallet/./src/util/share.ts","webpack://mytonwallet/./src/hooks/useLongPress.ts","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.module.scss?f4ba","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.tsx","webpack://mytonwallet/./src/components/ui/InteractiveTextField.module.scss?844c","webpack://mytonwallet/./src/components/ui/InteractiveTextField.tsx","webpack://mytonwallet/./src/components/dapps/DappAmountField.tsx","webpack://mytonwallet/./src/components/ui/Fee.tsx","webpack://mytonwallet/./src/components/ui/Fee.module.scss?5335","webpack://mytonwallet/./src/components/common/FeeDetailsModal.module.scss?8cde","webpack://mytonwallet/./src/components/common/FeeDetailsModal.tsx","webpack://mytonwallet/./src/components/ui/FeeLine.module.scss?c0f3","webpack://mytonwallet/./src/components/ui/FeeLine.tsx","webpack://mytonwallet/./src/components/dapps/DappReturnedDetailsModal.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferFee.tsx","webpack://mytonwallet/./src/components/dapps/DappTransfer.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferInitial.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferModal.tsx","webpack://mytonwallet/./src/components/Dialogs.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.module.scss?0ba5","webpack://mytonwallet/./src/components/electron/ElectronHeader.module.scss?adc9","webpack://mytonwallet/./src/components/electron/ElectronHeader.tsx","webpack://mytonwallet/./src/hooks/useElectronDrag.ts","webpack://mytonwallet/./src/util/telegram/hooks/useTelegramMiniAppSwipeToClose.ts","webpack://mytonwallet/./src/hooks/useHorizontalScroll.ts","webpack://mytonwallet/./src/hooks/usePrevious2.ts","webpack://mytonwallet/./src/components/ui/MenuItem.module.scss?fd35","webpack://mytonwallet/./src/components/ui/MenuItem.tsx","webpack://mytonwallet/./src/components/explore/Category.module.scss?4c23","webpack://mytonwallet/./src/components/explore/Category.tsx","webpack://mytonwallet/./src/util/memo.ts","webpack://mytonwallet/./src/components/explore/DappFeed.module.scss?4d73","webpack://mytonwallet/./src/components/explore/DappFeedItem.tsx","webpack://mytonwallet/./src/components/explore/Explore.module.scss?3005","webpack://mytonwallet/./src/components/explore/DappFeed.tsx","webpack://mytonwallet/./src/components/explore/Site.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.module.scss?9a46","webpack://mytonwallet/./src/components/explore/SiteList.tsx","webpack://mytonwallet/./src/components/explore/SiteList.module.scss?5590","webpack://mytonwallet/./src/components/explore/Explore.tsx","webpack://mytonwallet/./src/components/ledger/LedgerSelectWallets.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.tsx","webpack://mytonwallet/./src/hooks/usePreventPinchZoomGesture.ts","webpack://mytonwallet/./src/util/ton/formatTransferUrl.ts","webpack://mytonwallet/./src/util/swap/getChainNetworkIcon.ts","webpack://mytonwallet/./src/components/common/TokenIcon.module.scss?68c8","webpack://mytonwallet/./src/components/common/TokenIcon.tsx","webpack://mytonwallet/./src/components/common/SelectTokenButton.tsx","webpack://mytonwallet/./src/components/common/SelectTokenButton.module.scss?97ef","webpack://mytonwallet/./src/util/getPseudoRandomNumber.ts","webpack://mytonwallet/./src/util/swap/getChainNetworkName.ts","webpack://mytonwallet/./src/hooks/useSignal.ts","webpack://mytonwallet/./src/hooks/useDerivedSignal.ts","webpack://mytonwallet/./src/components/common/SensitiveDataMask.tsx","webpack://mytonwallet/./src/components/common/SensitiveDataMask.module.scss?6696","webpack://mytonwallet/./src/components/ui/SensitiveData.module.scss?5be5","webpack://mytonwallet/./src/components/ui/SensitiveData.tsx","webpack://mytonwallet/./src/components/common/TokenSelector.module.scss?759b","webpack://mytonwallet/./src/components/common/TokenSelector.tsx","webpack://mytonwallet/./src/components/ui/helpers/buildContentHtml.ts","webpack://mytonwallet/./src/hooks/useFontScale.ts","webpack://mytonwallet/./src/components/ui/RichNumberInput.tsx","webpack://mytonwallet/./src/util/saveCaretPosition.ts","webpack://mytonwallet/./src/components/receive/ReceiveModal.module.scss?beea","webpack://mytonwallet/./src/components/receive/InvoiceModal.tsx","webpack://mytonwallet/./src/util/animateHorizontalScroll.ts","webpack://mytonwallet/./src/hooks/useMenuPosition.ts","webpack://mytonwallet/./src/components/ui/Tab.module.scss?eb4d","webpack://mytonwallet/./src/components/ui/Tab.tsx","webpack://mytonwallet/./src/components/ui/TabList.tsx","webpack://mytonwallet/./src/components/ui/TabList.module.scss?8978","webpack://mytonwallet/./src/components/receive/content/TonActions.module.scss?fcb4","webpack://mytonwallet/./src/components/receive/content/TonActions.tsx","webpack://mytonwallet/./src/hooks/useQrCode.ts","webpack://mytonwallet/./src/components/receive/content/TonContent.tsx","webpack://mytonwallet/./src/components/receive/content/TronActions.tsx","webpack://mytonwallet/./src/components/receive/content/TronContent.tsx","webpack://mytonwallet/./src/components/receive/Content.tsx","webpack://mytonwallet/./src/components/receive/ReceiveModal.tsx","webpack://mytonwallet/./src/components/common/TransactionBanner.module.scss?99c4","webpack://mytonwallet/./src/components/common/TransactionBanner.tsx","webpack://mytonwallet/./src/components/common/TransferResult.module.scss?a52a","webpack://mytonwallet/./src/components/common/TransferResult.tsx","webpack://mytonwallet/./src/hooks/useTransitionActiveKey.ts","webpack://mytonwallet/./src/components/ui/AmountFieldMaxButton.module.scss?29e5","webpack://mytonwallet/./src/components/ui/AmountFieldMaxButton.tsx","webpack://mytonwallet/./src/global/helpers/number.ts","webpack://mytonwallet/./src/components/ui/RichNumberField.tsx","webpack://mytonwallet/./src/components/staking/Staking.module.scss?5f25","webpack://mytonwallet/./src/components/staking/StakingInitial.tsx","webpack://mytonwallet/./src/util/ton/calcJettonStakingApr.ts","webpack://mytonwallet/./src/api/constants.ts","webpack://mytonwallet/./src/components/staking/StakeModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.module.scss?734c","webpack://mytonwallet/./src/hooks/useDebouncedCallback.ts","webpack://mytonwallet/./src/hooks/useWindowSize.ts","webpack://mytonwallet/./src/components/staking/StakingProfileItem.module.scss?092e","webpack://mytonwallet/./src/components/staking/StakingProfitItem.tsx","webpack://mytonwallet/./src/components/staking/StakingInfoContent.tsx","webpack://mytonwallet/./src/components/staking/StakingInfoModal.tsx","webpack://mytonwallet/./src/components/staking/UnstakeModal.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.module.scss?8e42","webpack://mytonwallet/./src/components/main/helpers/calcVestingAmountByStatus.ts","webpack://mytonwallet/./src/components/vesting/VestingModal.module.scss?2a82","webpack://mytonwallet/./src/components/vesting/VestingModal.tsx","webpack://mytonwallet/./src/components/vesting/VestingPasswordModal.tsx","webpack://mytonwallet/./src/components/swap/Swap.module.scss?9ed7","webpack://mytonwallet/./src/components/swap/components/SwapSubmitButton.tsx","webpack://mytonwallet/./src/hooks/useAsyncResolvers.ts","webpack://mytonwallet/./src/util/swap/getSwapRate.ts","webpack://mytonwallet/./src/components/swap/SwapDexChooser.module.scss?b649","webpack://mytonwallet/./src/components/swap/SwapDexChooser.tsx","webpack://mytonwallet/./src/components/ui/IconWithTooltip.module.scss?91f0","webpack://mytonwallet/./src/components/ui/IconWithTooltip.tsx","webpack://mytonwallet/./src/components/swap/SwapSettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapInitial.tsx","webpack://mytonwallet/./src/hooks/useQrScannerSupport.ts","webpack://mytonwallet/./src/components/transfer/NftChips.module.scss?1471","webpack://mytonwallet/./src/components/transfer/NftChips.tsx","webpack://mytonwallet/./src/components/transfer/Transfer.module.scss?40cb","webpack://mytonwallet/./src/components/transfer/TransferInitial.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.module.scss?b2d4","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.module.scss?a3a8","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.tsx","webpack://mytonwallet/./src/components/main/sections/Card/Card.module.scss?fdf3","webpack://mytonwallet/./src/components/main/sections/Card/helpers/calculateFullBalance.ts","webpack://mytonwallet/./src/util/calcChangeValue.ts","webpack://mytonwallet/./src/components/main/sections/Card/helpers/getSensitiveDataMaskSkinFromCardNft.ts","webpack://mytonwallet/./src/hooks/useUpdateIndicator.ts","webpack://mytonwallet/./src/components/mintCard/MintCardButton.module.scss?f674","webpack://mytonwallet/./src/components/mintCard/MintCardButton.tsx","webpack://mytonwallet/./src/components/ui/AnimatedCounter.tsx","webpack://mytonwallet/./src/components/ui/AnimatedCounter.module.scss?5cb5","webpack://mytonwallet/./src/components/main/sections/Card/AccountSelector.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CardAddress.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CurrencySwitcher.tsx","webpack://mytonwallet/./src/hooks/useCachedImage.ts","webpack://mytonwallet/./src/hooks/useAsync.ts","webpack://mytonwallet/./src/util/getCachedImageUrl.ts","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.module.scss?8b12","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardManager.tsx","webpack://mytonwallet/./src/hooks/useSyncEffectWithPrevDeps.ts","webpack://mytonwallet/./src/components/main/helpers/cardColors.ts","webpack://mytonwallet/./src/components/common/TokenPriceChart.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.module.scss?014e","webpack://mytonwallet/./src/components/main/sections/Card/TokenCard.tsx","webpack://mytonwallet/./src/components/main/sections/Card/Card.tsx","webpack://mytonwallet/./src/components/main/sections/Card/StickyCard.module.scss?f113","webpack://mytonwallet/./src/components/main/sections/Card/StickyCard.tsx","webpack://mytonwallet/./src/components/main/modals/HideNftModal.tsx","webpack://mytonwallet/./src/hooks/useInfiniteScroll.ts","webpack://mytonwallet/./src/components/ui/InfiniteScroll.tsx","webpack://mytonwallet/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://mytonwallet/./src/util/resetScroll.ts","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.module.scss?1d3d","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Transaction.module.scss?ffe8","webpack://mytonwallet/./src/components/main/sections/Content/Swap.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Transaction.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activities.module.scss?215b","webpack://mytonwallet/./src/components/main/sections/Content/Activities.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Token.module.scss?2972","webpack://mytonwallet/./src/components/main/sections/Content/Token.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Assets.module.scss?2b3b","webpack://mytonwallet/./src/components/main/sections/Content/Assets.tsx","webpack://mytonwallet/./src/hooks/useVesting.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.module.scss?fecc","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.tsx","webpack://mytonwallet/./src/components/ui/Radio.tsx","webpack://mytonwallet/./src/components/ui/Radio.module.scss?1611","webpack://mytonwallet/./src/components/mediaViewer/hooks/useNftMenu.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.module.scss?7d45","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Nft.module.scss?a2fa","webpack://mytonwallet/./src/components/main/sections/Content/Nft.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Nfts.tsx","webpack://mytonwallet/./src/components/main/sections/Content/NftSelectionHeader.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Content.module.scss?df0c","webpack://mytonwallet/./src/components/main/sections/Content/Content.tsx","webpack://mytonwallet/./src/hooks/useBrowserUiColor.ts","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.module.scss?104f","webpack://mytonwallet/./src/components/main/sections/Warnings/BackupWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/SecurityWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.tsx","webpack://mytonwallet/./src/components/main/Main.tsx","webpack://mytonwallet/./src/components/main/Main.module.scss?6d95","webpack://mytonwallet/./src/components/main/modals/AddAccountPasswordModal.tsx","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.module.scss?8d66","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.tsx","webpack://mytonwallet/./src/components/auth/MnemonicCheck.tsx","webpack://mytonwallet/./src/components/auth/MnemonicList.tsx","webpack://mytonwallet/./src/components/auth/MnemonicPrivateKey.tsx","webpack://mytonwallet/./src/components/auth/SafetyRules.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.module.scss?7942","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.tsx","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.module.scss?8236","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.module.scss?87fb","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.module.scss?77a6","webpack://mytonwallet/./src/hooks/usePrevDuringAnimation.ts","webpack://mytonwallet/./src/components/common/Countdown.module.scss?d513","webpack://mytonwallet/./src/components/common/Countdown.tsx","webpack://mytonwallet/./src/components/common/SwapTokensInfo.module.scss?7d2b","webpack://mytonwallet/./src/components/common/SwapTokensInfo.tsx","webpack://mytonwallet/./src/components/common/TransactionFee.tsx","webpack://mytonwallet/./src/components/common/TransactionFee.module.scss?5d5d","webpack://mytonwallet/./src/components/main/modals/TransactionModal.module.scss?6dca","webpack://mytonwallet/./src/components/main/modals/SwapActivityModal.tsx","webpack://mytonwallet/./src/components/common/TransactionAmount.module.scss?8894","webpack://mytonwallet/./src/components/common/TransactionAmount.tsx","webpack://mytonwallet/./src/components/main/modals/TransactionModal.tsx","webpack://mytonwallet/./src/components/main/modals/UnhideNftModal.tsx","webpack://mytonwallet/./src/components/ui/Notification.tsx","webpack://mytonwallet/./src/components/ui/Notification.module.scss?743a","webpack://mytonwallet/./src/components/main/Notifications.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.module.scss?afa2","webpack://mytonwallet/./src/components/mediaViewer/helpers/ghostAnimation.ts","webpack://mytonwallet/./src/components/ui/ShowTransition.tsx","webpack://mytonwallet/./src/components/mediaViewer/Actions.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaInfo.tsx","webpack://mytonwallet/./src/hooks/useSignalRef.ts","webpack://mytonwallet/./src/components/mediaViewer/hooks/useZoomChangeSignal.ts","webpack://mytonwallet/./src/components/mediaViewer/Media.tsx","webpack://mytonwallet/./src/components/mediaViewer/Slides.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.tsx","webpack://mytonwallet/./src/util/isElementInViewport.ts","webpack://mytonwallet/./src/components/mintCard/CardPros.module.scss?2970","webpack://mytonwallet/./src/components/mintCard/CardPros.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardModal.module.scss?777c","webpack://mytonwallet/./src/components/mintCard/CardRoster.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardModal.tsx","webpack://mytonwallet/./src/components/main/modals/LogOutModal.module.scss?5651","webpack://mytonwallet/./src/components/main/modals/LogOutModal.tsx","webpack://mytonwallet/./src/components/ui/Switcher.tsx","webpack://mytonwallet/./src/components/ui/Switcher.module.scss?8b13","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.module.scss?14ce","webpack://mytonwallet/./src/components/settings/biometrics/TurnOff.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOffWarning.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOn.tsx","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsTurnOn.tsx","webpack://mytonwallet/./src/components/settings/SettingsAppearance.tsx","webpack://mytonwallet/./src/util/getAccentColorsFromNfts.ts","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.tsx","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.module.scss?34ea","webpack://mytonwallet/./src/components/ui/Draggable.tsx","webpack://mytonwallet/./src/components/ui/Draggable.module.scss?804f","webpack://mytonwallet/./src/components/settings/SettingsTokens.tsx","webpack://mytonwallet/./src/components/settings/SettingsAssets.tsx","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.module.scss?141f","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.tsx","webpack://mytonwallet/./src/components/settings/SettingsDapps.tsx","webpack://mytonwallet/./src/util/getBuildPlatform.ts","webpack://mytonwallet/./src/components/settings/SettingsDeveloperOptions.tsx","webpack://mytonwallet/./src/components/settings/SettingsDisclaimer.tsx","webpack://mytonwallet/./src/components/settings/nfts/HiddenByUserNft.tsx","webpack://mytonwallet/./src/components/settings/nfts/ProbablyScamNft.tsx","webpack://mytonwallet/./src/components/settings/SettingsHiddenNfts.tsx","webpack://mytonwallet/./src/components/settings/SettingsLanguage.tsx","webpack://mytonwallet/./src/components/settings/SettingsPushNotifications.tsx","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/index.js","webpack://mytonwallet/./src/components/ui/Collapsible.tsx","webpack://mytonwallet/./src/components/settings/backup/Backup.tsx","webpack://mytonwallet/./src/components/common/backup/PrivateKeyContent.tsx","webpack://mytonwallet/./src/components/settings/backup/Backup.module.scss?612f","webpack://mytonwallet/./src/components/settings/backup/BackupPrivateKey.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSafetyRules.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSecretWords.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsToggle.tsx","webpack://mytonwallet/./src/components/settings/SettingsSecurity.tsx","webpack://mytonwallet/./src/components/settings/SettingsTokenList.tsx","webpack://mytonwallet/./src/components/settings/SettingsWalletVersion.tsx","webpack://mytonwallet/./src/components/settings/Settings.tsx","webpack://mytonwallet/./src/components/settings/SettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapBlockchain.tsx","webpack://mytonwallet/./src/components/common/SwapResult.module.scss?5045","webpack://mytonwallet/./src/components/common/SwapResult.tsx","webpack://mytonwallet/./src/components/swap/SwapComplete.tsx","webpack://mytonwallet/./src/components/swap/SwapPassword.tsx","webpack://mytonwallet/./src/components/swap/SwapWaitTokens.tsx","webpack://mytonwallet/./src/components/swap/SwapModal.tsx","webpack://mytonwallet/./src/components/transfer/TransferComplete.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.module.scss?aa7f","webpack://mytonwallet/./src/components/transfer/TransferConfirm.tsx","webpack://mytonwallet/./src/components/transfer/TransferMultiNftProcess.tsx","webpack://mytonwallet/./src/components/transfer/TransferPassword.tsx","webpack://mytonwallet/./src/components/transfer/TransferModal.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.module.scss?8c12","webpack://mytonwallet/./src/components/ui/LoadingOverlay.tsx","webpack://mytonwallet/./src/components/ui/LoadingOverlay.module.scss?7efd","webpack://mytonwallet/./src/components/App.module.scss?a9d3","webpack://mytonwallet/./src/components/App.tsx","webpack://mytonwallet/./src/util/electron.ts","webpack://mytonwallet/./src/index.tsx","webpack://mytonwallet/./src/util/fonts.ts"],"sourcesContent":["var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"mytonwallet:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/*! Capacitor: https://capacitorjs.com/ - MIT License */\nconst createCapacitorPlatforms = (win) => {\n    const defaultPlatformMap = new Map();\n    defaultPlatformMap.set('web', { name: 'web' });\n    const capPlatforms = win.CapacitorPlatforms || {\n        currentPlatform: { name: 'web' },\n        platforms: defaultPlatformMap,\n    };\n    const addPlatform = (name, platform) => {\n        capPlatforms.platforms.set(name, platform);\n    };\n    const setPlatform = (name) => {\n        if (capPlatforms.platforms.has(name)) {\n            capPlatforms.currentPlatform = capPlatforms.platforms.get(name);\n        }\n    };\n    capPlatforms.addPlatform = addPlatform;\n    capPlatforms.setPlatform = setPlatform;\n    return capPlatforms;\n};\nconst initPlatforms = (win) => (win.CapacitorPlatforms = createCapacitorPlatforms(win));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst CapacitorPlatforms = /*#__PURE__*/ initPlatforms((typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {}));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst addPlatform = CapacitorPlatforms.addPlatform;\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst setPlatform = CapacitorPlatforms.setPlatform;\n\nconst legacyRegisterWebPlugin = (cap, webPlugin) => {\n    var _a;\n    const config = webPlugin.config;\n    const Plugins = cap.Plugins;\n    if (!(config === null || config === void 0 ? void 0 : config.name)) {\n        // TODO: add link to upgrade guide\n        throw new Error(`Capacitor WebPlugin is using the deprecated \"registerWebPlugin()\" function, but without the config. Please use \"registerPlugin()\" instead to register this web plugin.\"`);\n    }\n    // TODO: add link to upgrade guide\n    console.warn(`Capacitor plugin \"${config.name}\" is using the deprecated \"registerWebPlugin()\" function`);\n    if (!Plugins[config.name] || ((_a = config === null || config === void 0 ? void 0 : config.platforms) === null || _a === void 0 ? void 0 : _a.includes(cap.getPlatform()))) {\n        // Add the web plugin into the plugins registry if there already isn't\n        // an existing one. If it doesn't already exist, that means\n        // there's no existing native implementation for it.\n        // - OR -\n        // If we already have a plugin registered (meaning it was defined in the native layer),\n        // then we should only overwrite it if the corresponding web plugin activates on\n        // a certain platform. For example: Geolocation uses the WebPlugin on Android but not iOS\n        Plugins[config.name] = webPlugin;\n    }\n};\n\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    var _a, _b, _c, _d, _e;\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    /**\n     * @deprecated Use `capCustomPlatform` instead, default functions like registerPlugin will function with the new object.\n     */\n    const capPlatforms = win.CapacitorPlatforms;\n    const defaultGetPlatform = () => {\n        return capCustomPlatform !== null\n            ? capCustomPlatform.name\n            : getPlatformId(win);\n    };\n    const getPlatform = ((_a = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _a === void 0 ? void 0 : _a.getPlatform) || defaultGetPlatform;\n    const defaultIsNativePlatform = () => getPlatform() !== 'web';\n    const isNativePlatform = ((_b = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _b === void 0 ? void 0 : _b.isNativePlatform) || defaultIsNativePlatform;\n    const defaultIsPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const isPluginAvailable = ((_c = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _c === void 0 ? void 0 : _c.isPluginAvailable) ||\n        defaultIsPluginAvailable;\n    const defaultGetPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find(h => h.name === pluginName); };\n    const getPluginHeader = ((_d = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _d === void 0 ? void 0 : _d.getPluginHeader) || defaultGetPluginHeader;\n    const handleError = (err) => win.console.error(err);\n    const pluginMethodNoop = (_target, prop, pluginName) => {\n        return Promise.reject(`${pluginName} does not have an implementation of \"${prop}\".`);\n    };\n    const registeredPlugins = new Map();\n    const defaultRegisterPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null &&\n                !jsImplementation &&\n                'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find(m => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then(impl => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair \n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise(resolve => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([\n                ...Object.keys(jsImplementations),\n                ...(pluginHeader ? [platform] : []),\n            ]),\n        });\n        return proxy;\n    };\n    const registerPlugin = ((_e = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _e === void 0 ? void 0 : _e.registerPlugin) || defaultRegisterPlugin;\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = filePath => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.pluginMethodNoop = pluginMethodNoop;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    // Deprecated props\n    cap.platform = cap.getPlatform();\n    cap.isNative = cap.isNativePlatform();\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n/**\n * @deprecated Provided for backwards compatibility for Capacitor v2 plugins.\n * Capacitor v3 plugins should import the plugin directly. This \"Plugins\"\n * export is deprecated in v3, and will be removed in v4.\n */\nconst Plugins = Capacitor.Plugins;\n/**\n * Provided for backwards compatibility. Use the registerPlugin() API\n * instead, and provide the web plugin as the \"web\" implmenetation.\n * For example\n *\n * export const Example = registerPlugin('Example', {\n *   web: () => import('./web').then(m => new m.Example())\n * })\n *\n * @deprecated Deprecated in v3, will be removed from v4.\n */\nconst registerWebPlugin = (plugin) => legacyRegisterWebPlugin(Capacitor, plugin);\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor(config) {\n        this.listeners = {};\n        this.retainedEventArguments = {};\n        this.windowListeners = {};\n        if (config) {\n            // TODO: add link to upgrade guide\n            console.warn(`Capacitor WebPlugin \"${config.name}\" config object was deprecated in v3 and will be removed in v4.`);\n            this.config = config;\n        }\n    }\n    addListener(eventName, listenerFunc) {\n        let firstListener = false;\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n            firstListener = true;\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        if (firstListener) {\n            this.sendRetainedArgumentsForEvent(eventName);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data, retainUntilConsumed) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            if (retainUntilConsumed) {\n                let args = this.retainedEventArguments[eventName];\n                if (!args) {\n                    args = [];\n                }\n                args.push(data);\n                this.retainedEventArguments[eventName] = args;\n            }\n            return;\n        }\n        listeners.forEach(listener => listener(data));\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: event => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n    sendRetainedArgumentsForEvent(eventName) {\n        const args = this.retainedEventArguments[eventName];\n        if (!args) {\n            return;\n        }\n        delete this.retainedEventArguments[eventName];\n        args.forEach(arg => {\n            this.notifyListeners(eventName, arg);\n        });\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach(cookie => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0\n                ? `domain=${options.url}`\n                : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie\n                    .replace(/^ +/, '')\n                    .replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0\n            ? base64String.split(',')[1]\n            : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map(k => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach(str => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') ||\n        options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') ||\n        typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, CapacitorPlatforms, ExceptionCode, Plugins, WebPlugin, WebView, addPlatform, buildRequestInit, registerPlugin, registerWebPlugin, setPlatform };\n//# sourceMappingURL=index.js.map\n","export var Directory;\n(function (Directory) {\n    /**\n     * The Documents directory.\n     * On iOS it's the app's documents directory.\n     * Use this directory to store user-generated content.\n     * On Android it's the Public Documents folder, so it's accessible from other apps.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * On Android 11 or newer the app can only access the files/folders the app created.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Documents\"] = \"DOCUMENTS\";\n    /**\n     * The Data directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Data\"] = \"DATA\";\n    /**\n     * The Library directory.\n     * On iOS it will use the Library directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.1.0\n     */\n    Directory[\"Library\"] = \"LIBRARY\";\n    /**\n     * The Cache directory.\n     * Can be deleted in cases of low memory, so use this directory to write app-specific files.\n     * that your app can re-create easily.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Cache\"] = \"CACHE\";\n    /**\n     * The external directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory on the primary shared/external\n     * storage device where the application can place persistent files it owns.\n     * These files are internal to the applications, and not typically visible\n     * to the user as media.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"External\"] = \"EXTERNAL\";\n    /**\n     * The external storage directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the primary shared/external storage directory.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * It's not accesible on Android 11 or newer.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"ExternalStorage\"] = \"EXTERNAL_STORAGE\";\n})(Directory || (Directory = {}));\nexport var Encoding;\n(function (Encoding) {\n    /**\n     * Eight-bit UCS Transformation Format\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF8\"] = \"utf8\";\n    /**\n     * Seven-bit ASCII, a.k.a. ISO646-US, a.k.a. the Basic Latin block of the\n     * Unicode character set\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"ASCII\"] = \"ascii\";\n    /**\n     * Sixteen-bit UCS Transformation Format, byte order identified by an\n     * optional byte-order mark\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF16\"] = \"utf16\";\n})(Encoding || (Encoding = {}));\n/**\n * @deprecated Use `Directory`.\n * @since 1.0.0\n */\nexport const FilesystemDirectory = Directory;\n/**\n * @deprecated Use `Encoding`.\n * @since 1.0.0\n */\nexport const FilesystemEncoding = Encoding;\n//# sourceMappingURL=definitions.js.map","export var ImpactStyle;\n(function (ImpactStyle) {\n    /**\n     * A collision between large, heavy user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Heavy\"] = \"HEAVY\";\n    /**\n     * A collision between moderately sized user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Medium\"] = \"MEDIUM\";\n    /**\n     * A collision between small, light user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Light\"] = \"LIGHT\";\n})(ImpactStyle || (ImpactStyle = {}));\nexport var NotificationType;\n(function (NotificationType) {\n    /**\n     * A notification feedback type indicating that a task has completed successfully\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Success\"] = \"SUCCESS\";\n    /**\n     * A notification feedback type indicating that a task has produced a warning\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Warning\"] = \"WARNING\";\n    /**\n     * A notification feedback type indicating that a task has failed\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Error\"] = \"ERROR\";\n})(NotificationType || (NotificationType = {}));\n/**\n * @deprecated Use `NotificationType`.\n * @since 1.0.0\n */\nexport const HapticsNotificationType = NotificationType;\n/**\n * @deprecated Use `ImpactStyle`.\n * @since 1.0.0\n */\nexport const HapticsImpactStyle = ImpactStyle;\n//# sourceMappingURL=definitions.js.map","import type { ApiTonWalletVersion, ContractInfo, ContractName } from './types';\n\nimport { JettonStakingGas } from './contracts/JettonStaking/imports/constants';\n\nexport const TON_BIP39_PATH = \"m/44'/607'/0'\";\n\nexport const ONE_TON = 1_000_000_000n;\nexport const TOKEN_TRANSFER_AMOUNT = 50000000n; // 0.05 TON\nexport const TINY_TOKEN_TRANSFER_AMOUNT = 18000000n; // 0.018 TON\nexport const TOKEN_TRANSFER_REAL_AMOUNT = 32100000n; // 0.0321 TON\nexport const TINY_TOKEN_TRANSFER_REAL_AMOUNT = 8000000n; // 0.008 TON\nexport const TINIEST_TOKEN_TRANSFER_REAL_AMOUNT = 3000000n; // 0.003 TON\nexport const TOKEN_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\nexport const CLAIM_MINTLESS_AMOUNT = 20000000n; // 0.02 TON\n\n/** The amount that MyTonWallet attaches to NFT transfers */\nexport const NFT_TRANSFER_AMOUNT = 100000000n; // 0.1 TON\nexport const NFT_TRANSFER_REAL_AMOUNT = 5000000n; // 0.005 TON\nexport const NFT_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\n/**\n * When the NFT contract handles the payload we send, it simply adds its data to the payload. If the resulting payload\n * size becomes greater than the cell capacity, the contract fails to send the NFT. To avoid that, we keep some free\n * space in the payload cell we send. This constant is the size of the free space in bits.\n */\nexport const NFT_PAYLOAD_SAFE_MARGIN = 14 * 8;\n\nexport const TON_GAS = {\n  stakeNominators: ONE_TON,\n  unstakeNominators: ONE_TON,\n  stakeLiquid: ONE_TON,\n  unstakeLiquid: ONE_TON,\n  stakeJettonsForward: JettonStakingGas.STAKE_JETTONS,\n  stakeJettons: JettonStakingGas.STAKE_JETTONS + TOKEN_TRANSFER_AMOUNT,\n  unstakeJettons: JettonStakingGas.UNSTAKE_JETTONS,\n  claimJettons: JettonStakingGas.JETTON_TRANSFER + JettonStakingGas.SIMPLE_UPDATE_REQUEST,\n  changeDns: 50_000_000n, // 0.05 TON\n} as const;\n\nexport const TON_GAS_REAL = {\n  stakeNominators: 1_000_052_853n,\n  unstakeNominators: 148_337_433n,\n  stakeLiquid: 20_251_387n,\n  unstakeLiquid: 18_625_604n,\n  stakeJettons: 74_879_996n,\n  unstakeJettons: 59_971_662n,\n  claimJettons: 57_053_859n,\n};\n\nexport const STAKE_COMMENT = 'd';\nexport const UNSTAKE_COMMENT = 'w';\n\nexport const ATTEMPTS = 5;\n\nexport const DEFAULT_DECIMALS = 9;\nexport const DEFAULT_IS_BOUNCEABLE = true;\nexport const WALLET_IS_BOUNCEABLE = false;\n\n// Fee may change, so we add 5% for more reliability. This is only safe for low-fee blockchains such as TON.\nexport const FEE_FACTOR = 1.05;\n\nexport const ALL_WALLET_VERSIONS: ApiTonWalletVersion[] = [\n  'simpleR1', 'simpleR2', 'simpleR3', 'v2R1', 'v2R2', 'v3R1', 'v3R2', 'v4R2', 'W5',\n];\n\nexport const OUR_FEE_PAYLOAD_BOC = 'te6cckEBAQEABgAACE0jhUPUcYAL';\n\nexport enum Workchain {\n  MasterChain = -1,\n  BaseChain = 0,\n}\n\nexport const WORKCHAIN = Workchain.BaseChain;\nexport const TRANSFER_TIMEOUT_SEC = 600; // 10 min.\n\nexport const DEFAULT_MAX_MESSAGES = 4;\nexport const LEDGER_MAX_MESSAGES = 4; // TODO Replace to 1 after DEX support\nexport const W5_MAX_MESSAGES = 255;\n\nexport enum OpCode {\n  Comment = 0,\n  Encrypted = 0x2167da4b,\n  OurFee = 0x4d238543,\n}\n\nexport enum JettonOpCode {\n  Transfer = 0xf8a7ea5,\n  TransferNotification = 0x7362d09c,\n  InternalTransfer = 0x178d4519,\n  Excesses = 0xd53276db,\n  Burn = 0x595f07bc,\n  BurnNotification = 0x7bdd97de,\n}\n\nexport enum NftOpCode {\n  TransferOwnership = 0x5fcc3d14,\n  OwnershipAssigned = 0x05138d91,\n  Excesses = 0xd53276db,\n}\n\nexport enum LiquidStakingOpCode {\n  // Pool\n  RequestLoan = 0xe642c965,\n  LoanRepayment = 0xdfdca27b,\n  Deposit = 0x47d54391,\n  Withdraw = 0x319B0CDC,\n  Withdrawal = 0x0a77535c,\n  DeployController = 0xb27edcad,\n  Touch = 0x4bc7c2df,\n  Donate = 0x73affe21,\n  // NFT\n  DistributedAsset = 0xdb3b8abd,\n  // Jetton\n  Vote = 0x69fb306c,\n}\n\nexport enum JettonStakingOpCode {\n  UnstakeRequest = 0x499a9262,\n  ClaimRewards = 0x78d9f109,\n}\n\nexport enum VestingV1OpCode {\n  AddWhitelist = 0x7258a69b,\n}\n\nexport enum SingleNominatorOpCode {\n  Withdraw = 0x1000,\n  ChangeValidator = 0x1001,\n}\n\nexport enum DnsOpCode {\n  ChangeRecord = 0x4eb1f0f9,\n}\n\nexport enum TeleitemOpCode {\n  Ok = 0xa37a0983,\n}\n\nexport enum OtherOpCode {\n  TokenBridgePaySwap = 0x8,\n}\n\nexport enum ContractType {\n  Wallet = 'wallet',\n  Staking = 'staking',\n}\n\nexport enum DnsCategory {\n  DnsNextResolver = 'dns_next_resolver',\n  Wallet = 'wallet',\n  Site = 'site',\n  BagId = 'storage',\n  Unknown = 'unknown',\n}\n\nexport const EXCESS_OP_CODES = [\n  JettonOpCode.Excesses,\n  TeleitemOpCode.Ok,\n];\n\nexport const DNS_CATEGORY_HASH_MAP = {\n  dns_next_resolver: '19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff',\n  wallet: 'e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b',\n  site: 'fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe',\n  storage: '49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7',\n} as const;\n\nexport const KnownContracts: Record<ContractName, ContractInfo> = {\n  simpleR1: {\n    name: 'simpleR1',\n    hash: '3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd',\n    type: ContractType.Wallet,\n  },\n  simpleR2: {\n    name: 'simpleR2',\n    hash: '672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df',\n    type: ContractType.Wallet,\n  },\n  simpleR3: {\n    name: 'simpleR3',\n    hash: 'd95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52',\n    type: ContractType.Wallet,\n  },\n  v2R1: {\n    name: 'v2R1',\n    hash: 'fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029',\n    type: ContractType.Wallet,\n  },\n  v2R2: {\n    name: 'v2R2',\n    hash: 'b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983',\n    type: ContractType.Wallet,\n  },\n  v3R1: {\n    name: 'v3R1',\n    hash: '11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6',\n    type: ContractType.Wallet,\n  },\n  v3R2: {\n    name: 'v3R2',\n    hash: 'df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14',\n    type: ContractType.Wallet,\n  },\n  v4R1: {\n    name: 'v4R1',\n    hash: '1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf',\n    type: ContractType.Wallet,\n  },\n  v4R2: {\n    name: 'v4R2',\n    hash: '5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1',\n    type: ContractType.Wallet,\n  },\n  W5: {\n    name: 'W5',\n    hash: '7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5',\n    type: ContractType.Wallet,\n  },\n  highloadV2: {\n    name: 'highloadV2',\n    hash: 'fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e',\n    type: ContractType.Wallet,\n  },\n  nominatorPool: {\n    name: 'nominatorPool',\n    hash: '26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff',\n    type: ContractType.Staking,\n  },\n  multisig: {\n    name: 'multisig',\n    hash: '45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2',\n    type: ContractType.Wallet,\n  },\n  multisigV2: {\n    name: 'multisigV2',\n    hash: 'eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97',\n    type: ContractType.Wallet,\n  },\n  vesting: {\n    name: 'vesting',\n    hash: '69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83',\n    type: ContractType.Wallet,\n  },\n  multisigNew: {\n    name: 'multisigNew',\n    hash: '7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f',\n    type: ContractType.Wallet,\n  },\n  dedustPool: {\n    name: 'dedustPool',\n    hash: 'f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62',\n    isSwapAllowed: true,\n  },\n  dedustVaultNative: {\n    name: 'dedustVaultNative',\n    hash: '64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb',\n    isSwapAllowed: true,\n  },\n  dedustVaultJetton: {\n    name: 'dedustVaultJetton',\n    hash: '5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307',\n    isSwapAllowed: true,\n  },\n  stonPtonWallet: {\n    name: 'stonPtonWallet',\n    hash: '6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880',\n    isSwapAllowed: true,\n  },\n  stonRouter: {\n    name: 'stonRouter',\n    hash: '14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da',\n    isSwapAllowed: true,\n  },\n  stonRouterV2_1: {\n    name: 'stonRouterV2_1',\n    hash: 'd61cb7fb7bee0cc414286a482fccdec53c3f8717e4aae4fc362d98ab6254e6cd',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_1: {\n    name: 'stonPoolV2_1',\n    hash: '16cc513c380e329f45d54f294787e2030e289799eca138961c1cd7e26e882c7c',\n    isSwapAllowed: true,\n  },\n  stonRouterV2_2: {\n    name: 'stonRouterV2_2',\n    hash: '094b5084111addda1b6fac7007c8a8f85ff4ccc63475815ab3dfa3b5b4c6b102',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_2: {\n    name: 'stonPoolV2_2',\n    hash: '11eaf6db706e63adf9327897aaa845c77a631856abfc14375837f19b617cacb4',\n    isSwapAllowed: true,\n  },\n  stonPtonWalletV2: {\n    name: 'stonPtonWalletV2',\n    hash: '2761042202032258de9eb1b672e1ec2e4f13b2af00700195801ada33f7ced1b6',\n    isSwapAllowed: true,\n  },\n};\n","import type { Address, Dictionary } from '@ton/core';\n\nexport type AddrList = Dictionary<Address, Boolean>;\n\nexport const JettonStakingOpCodes = {\n  GET_STATIC_DATA: 0X2FCB26A2,\n  REPORT_STATIC_DATA: 0X8B771735,\n  GET_STORAGE_DATA: 0X5B88E5CC,\n  REPORT_STORAGE_DATA: 0XAAB4A8EF,\n  EXCESSES: 0XD53276DB,\n\n  // Jettons,\n  TRANSFER_JETTON: 0X0F8A7EA5,\n  INTERNAL_TRANSFER: 0X178D4519,\n  TRANSFER_NOTIFICATION: 0X7362D09C,\n  PROVIDE_WALLET_ADDRESS: 0X2C76B973,\n  TAKE_WALLET_ADDRESS: 0XD1735400,\n  BURN_JETTON: 0X595F07BC,\n\n  // Staking pool,\n  STAKE_JETTONS: 0XE3A06989,\n  ADD_REWARDS: 0XDB16AC95,\n  SEND_CLAIMED_REWARDS: 0X44BC1FE3,\n  SEND_UNSTAKED_JETTONS: 0XFB232BC3,\n  APPROVE_STAKE: 0X919DE781,\n  CANCEL_STAKE: 0X9EADA1D9,\n  ADD_REWARD_JETTONS: 0X10676AE7,\n  CLAIM_COMMISSIONS: 0XBCA8F067,\n  REQUEST_UPDATE_REWARDS: 0XF5C5BAA3,\n\n  // Staked jetton wallet,\n  CLAIM_REWARDS: 0X78D9F109,\n  RECEIVE_JETTONS: 0XD68A4AC1,\n  UNSTAKE_JETTONS: 0X499A9262,\n  UNSTAKE_REQUEST: 0X0168D4B7,\n  CANCEL_UNSTAKE_REQUEST: 0XA4910F1A,\n  UPDATE_REWARDS: 0XAE9307CE,\n  CONFIRM_TRANSFER: 0XBC85EB11,\n\n  // Pools admin,\n  DEPLOY_NEW_POOL: 0XDA861F17,\n  SEND_COMMISSIONS: 0XB96ADAEA,\n  SET_CODE: 0xe2d2d211,\n  CHANGE_CREATION_FEE: 0x66D5528B,\n  CHANGE_CONTENT: 0x0ec29200,\n  UPDATE_CODES: 0x85c923cf,\n};\n\nexport const JettonStakingGas = {\n  MIN_RESERVE: 20_000_000n,\n  DEPLOY_POOL: 340_000_000n,\n  NOTIFICATION: 340_000_000n,\n  JETTON_TRANSFER: 55_000_000n,\n  BURN_JETTONS: 340_000_000n,\n  STAKE_JETTONS: 300_000_000n, // It was 340000000n\n  UNSTAKE_JETTONS: 340_000_000n,\n  CANCEL_UNSTAKE: 340_000_000n,\n  SEND_COMMISSIONS: 340_000_000n,\n  SIMPLE_UPDATE_REQUEST: 340_000_000n,\n  ADD_REWARDS: 340_000_000n,\n  APPROVE_TRANSFER: 340_000_000n,\n  SAVE_UPDATED_REWARDS: 340_000_000n,\n  MIN_EXCESS: 10_000_000n,\n  SEND_STAKED_JETTONS: 630_000_000n,\n};\n\nexport const Dividers = {\n  COMMISSION_DIVIDER: 10000n,\n  REWARDS_DIVIDER: 1000,\n  DISTRIBUTION_SPEED_DIVIDER: BigInt(24 * 60 * 60),\n  DISTRIBUTED_REWARDS_DIVIDER: 100000000000000000000000000000000000000n,\n};\n","// eslint-disable-next-line max-classes-per-file\nimport type { ApiAnyDisplayError } from './types';\nimport { ApiCommonError, ApiTransactionError } from './types';\n\nexport class ApiBaseError extends Error {\n  constructor(message?: string, public displayError?: ApiAnyDisplayError) {\n    super(message);\n    this.name = this.constructor.name;\n  }\n}\n\nexport class ApiUserRejectsError extends ApiBaseError {\n  constructor(message: string = 'Canceled by the user') {\n    super(message);\n  }\n}\n\nexport class ApiServerError extends ApiBaseError {\n  constructor(message: string, public statusCode?: number) {\n    super(message, ApiCommonError.ServerError);\n  }\n}\n\nexport class ApiUnsupportedVersionError extends ApiBaseError {\n  constructor(message: string) {\n    super(message, ApiCommonError.UnsupportedVersion);\n  }\n}\n\nexport class ApiHardwareBlindSigningNotEnabled extends ApiBaseError {\n  constructor(message: string = 'Blind signing not enabled') {\n    super(message, ApiTransactionError.HardwareBlindSigningNotEnabled);\n  }\n}\n\nexport class AbortOperationError extends ApiBaseError {\n  constructor(message: string = 'Abort operation') {\n    super(message);\n  }\n}\n\nexport class NotImplemented extends ApiBaseError {\n  constructor(message: string = 'Not implemented') {\n    super(message);\n  }\n}\n\nexport function maybeApiErrors(fn: AnyAsyncFunction) {\n  return async (...args: any) => {\n    try {\n      return await fn(...args);\n    } catch (err) {\n      return handleServerError(err);\n    }\n  };\n}\n\nexport function handleServerError(err: any) {\n  if (err instanceof ApiServerError) {\n    return { error: err.displayError! };\n  }\n  throw err;\n}\n","import type {\n  ApiUpdate,\n  CancellableCallback, OriginMessageData, OriginMessageEvent, WorkerMessageData,\n} from './PostMessageConnector';\n\nimport { DETACHED_TAB_URL } from './ledger/tab';\nimport { bigintReviver } from './bigint';\nimport { logDebugError } from './logs';\n\ndeclare const self: WorkerGlobalScope;\n\nconst callbackState = new Map<string, CancellableCallback>();\n\ntype ApiConfig =\n  ((name: string, ...args: any[]) => any | [any, ArrayBuffer[]])\n  | Record<string, Function>;\ntype SendToOrigin = (data: WorkerMessageData, transferables?: Transferable[]) => void;\n\nexport function createPostMessageInterface(\n  api: ApiConfig,\n  channel?: string,\n  target: DedicatedWorkerGlobalScope | Worker = self as DedicatedWorkerGlobalScope,\n  shouldIgnoreErrors?: boolean,\n) {\n  function sendToOrigin(data: WorkerMessageData, transferables?: Transferable[]) {\n    data.channel = channel;\n\n    if (transferables) {\n      target.postMessage(data, transferables);\n    } else {\n      target.postMessage(data);\n    }\n  }\n\n  if (!shouldIgnoreErrors) {\n    handleErrors(sendToOrigin);\n  }\n\n  (target as DedicatedWorkerGlobalScope).addEventListener('message', (message: OriginMessageEvent) => {\n    if (message.data?.channel === channel) {\n      void onMessage(api, message.data, sendToOrigin);\n    }\n  });\n}\n\nexport function createExtensionInterface(\n  portName: string,\n  api: ApiConfig,\n  channel?: string,\n  cleanUpdater?: (onUpdate: (update: ApiUpdate) => void) => void,\n  withAutoInit = false,\n) {\n  chrome.runtime.onConnect.addListener((port) => {\n    if (port.name !== portName) {\n      return;\n    }\n\n    /**\n     * If the sender's URL includes the DETACHED_TAB_URL, we skip further processing\n     * This condition ensures that we don't interact with tabs that have already been closed.\n     */\n    const url = port.sender?.url;\n    if (url?.includes(DETACHED_TAB_URL)) {\n      return;\n    }\n\n    const origin = url ? new URL(url).origin : undefined;\n\n    const dAppUpdater = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n\n    function sendToOrigin(data: WorkerMessageData) {\n      data.channel = channel;\n      const json = JSON.stringify(data);\n      port.postMessage(json);\n    }\n\n    handleErrors(sendToOrigin);\n\n    port.onMessage.addListener((data: OriginMessageData | string) => {\n      if (typeof data === 'string') {\n        data = JSON.parse(data, bigintReviver) as OriginMessageData;\n      }\n      if (data.channel === channel) {\n        void onMessage(api, data, sendToOrigin, dAppUpdater, origin);\n      }\n    });\n\n    port.onDisconnect.addListener(() => {\n      cleanUpdater?.(dAppUpdater);\n    });\n\n    if (withAutoInit) {\n      void onMessage(api, { type: 'init', name: 'init', args: [] }, sendToOrigin, dAppUpdater);\n    }\n  });\n}\n\nasync function onMessage(\n  api: ApiConfig,\n  data: OriginMessageData,\n  sendToOrigin: SendToOrigin,\n  onUpdate?: (update: ApiUpdate) => void,\n  origin?: string,\n) {\n  if (!onUpdate) {\n    onUpdate = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n  }\n\n  switch (data.type) {\n    case 'init': {\n      const { args } = data;\n      const promise = typeof api === 'function'\n        ? api('init', origin, onUpdate, ...args)\n        : api.init?.(onUpdate, ...args);\n      await promise;\n\n      break;\n    }\n    case 'callMethod': {\n      const {\n        messageId, name, args, withCallback,\n      } = data;\n      try {\n        // This method is probably from another worker\n        if (typeof api !== 'function' && !api[name]) return;\n\n        if (messageId && withCallback) {\n          const callback = (...callbackArgs: any[]) => {\n            const lastArg = callbackArgs[callbackArgs.length - 1];\n\n            sendToOrigin({\n              type: 'methodCallback',\n              messageId,\n              callbackArgs,\n            }, isTransferable(lastArg) ? [lastArg] : undefined);\n          };\n\n          callbackState.set(messageId, callback);\n\n          args.push(callback as never);\n        }\n\n        const response = typeof api === 'function'\n          ? await api(name, origin, ...args)\n          : await api[name](...args);\n        const { arrayBuffer } = (typeof response === 'object' && response && 'arrayBuffer' in response) || {};\n\n        if (messageId) {\n          sendToOrigin(\n            {\n              type: 'methodResponse',\n              messageId,\n              response,\n            },\n            arrayBuffer ? [arrayBuffer] : undefined,\n          );\n        }\n      } catch (err: any) {\n        logDebugError(name, err);\n\n        if (messageId) {\n          sendToOrigin({\n            type: 'methodResponse',\n            messageId,\n            error: { message: err.message },\n          });\n        }\n      }\n\n      if (messageId) {\n        callbackState.delete(messageId);\n      }\n\n      break;\n    }\n    case 'cancelProgress': {\n      const callback = callbackState.get(data.messageId);\n      if (callback) {\n        callback.isCanceled = true;\n      }\n\n      break;\n    }\n  }\n}\n\nfunction isTransferable(obj: any) {\n  return obj instanceof ArrayBuffer || obj instanceof ImageBitmap;\n}\n\nfunction handleErrors(sendToOrigin: SendToOrigin) {\n  self.onerror = (e) => {\n    const message = e.error?.message || 'Uncaught exception in worker';\n    logDebugError(message, e.error);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.error?.stack,\n      },\n    });\n  };\n\n  self.addEventListener('unhandledrejection', (e) => {\n    const message = e.reason?.message || 'Unhandled rejection in worker';\n    logDebugError(message, e.reason);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.reason?.stack,\n      },\n    });\n  });\n}\n","import type { WindowMethods } from './types';\n\nimport { WINDOW_PROVIDER_CHANNEL } from '../../config';\nimport { createPostMessageInterface } from '../createPostMessageInterface';\nimport * as windowMethods from './methods';\n\nexport function createWindowProvider(worker: Worker) {\n  createPostMessageInterface((name: string, origin?: string, ...args: any[]) => {\n    const method = windowMethods[name as keyof WindowMethods];\n\n    // @ts-ignore\n    return method(...args as WindowMethodArgs<keyof WindowMethods>);\n  }, WINDOW_PROVIDER_CHANNEL, worker, true);\n}\n","import type { Connector } from '../../../util/PostMessageConnector';\nimport type { ApiInitArgs, OnApiUpdate } from '../../types';\nimport type { AllMethodArgs, AllMethodResponse, AllMethods } from '../../types/methods';\n\nimport { logDebugApi, logDebugError } from '../../../util/logs';\nimport { createConnector } from '../../../util/PostMessageConnector';\nimport { pause } from '../../../util/schedulers';\nimport { IS_IOS } from '../../../util/windowEnvironment';\nimport { createWindowProvider } from '../../../util/windowProvider';\n\nconst HEALTH_CHECK_TIMEOUT = 150;\nconst HEALTH_CHECK_MIN_DELAY = 5000; // 5 sec\n\nlet updateCallback: OnApiUpdate;\nlet worker: Worker | undefined;\nlet connector: Connector | undefined;\nlet isInitialized = false;\n\nexport function initApi(onUpdate: OnApiUpdate, initArgs: ApiInitArgs | (() => ApiInitArgs)) {\n  updateCallback = onUpdate;\n\n  if (!connector) {\n    worker = new Worker(\n      /* webpackChunkName: \"worker\" */ new URL('./provider.ts', import.meta.url),\n    );\n    connector = createConnector(worker, onUpdate);\n\n    createWindowProvider(worker!);\n  }\n\n  if (!isInitialized) {\n    if (IS_IOS) {\n      setupIosHealthCheck();\n    }\n    isInitialized = true;\n  }\n\n  const args = typeof initArgs === 'function' ? initArgs() : initArgs;\n  return connector.init(args);\n}\n\nexport async function callApi<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  if (!connector) {\n    logDebugError('API is not initialized');\n    return undefined;\n  }\n\n  try {\n    const result = await (connector.request({\n      name: fnName,\n      args,\n    }) as AllMethodResponse<T>);\n\n    logDebugApi(`callApi: ${fnName}`, args, result);\n\n    return result;\n  } catch (err) {\n    return undefined;\n  }\n}\n\nexport function callApiWithThrow<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  return (connector!.request({\n    name: fnName,\n    args,\n  }) as AllMethodResponse<T>);\n}\n\nconst startedAt = Date.now();\n\n// Workaround for iOS sometimes stops interacting with worker\nfunction setupIosHealthCheck() {\n  window.addEventListener('focus', () => {\n    void ensureWorkerPing();\n    // Sometimes a single check is not enough\n    setTimeout(() => ensureWorkerPing(), 1000);\n  });\n}\n\nasync function ensureWorkerPing() {\n  let isResolved = false;\n\n  try {\n    await Promise.race([\n      callApiWithThrow('ping'),\n      pause(HEALTH_CHECK_TIMEOUT)\n        .then(() => (isResolved ? undefined : Promise.reject(new Error('HEALTH_CHECK_TIMEOUT')))),\n    ]);\n  } catch (err) {\n    logDebugError('ensureWorkerPing', err);\n\n    if (Date.now() - startedAt >= HEALTH_CHECK_MIN_DELAY) {\n      worker?.terminate();\n      worker = undefined;\n      connector = undefined;\n      updateCallback({ type: 'requestReconnectApi' });\n    }\n  } finally {\n    isResolved = true;\n  }\n}\n","export enum ApiCommonError {\n  Unexpected = 'Unexpected',\n  ServerError = 'ServerError',\n  DebugError = 'DebugError',\n  UnsupportedVersion = 'UnsupportedVersion',\n}\n\nexport enum ApiAuthError {\n  InvalidMnemonic = 'InvalidMnemonic',\n}\n\nexport enum ApiTransactionDraftError {\n  InvalidAmount = 'InvalidAmount',\n  InvalidToAddress = 'InvalidToAddress',\n  InsufficientBalance = 'InsufficientBalance',\n  InvalidStateInit = 'InvalidStateInit',\n  StateInitWithoutBin = 'StateInitWithoutBin',\n  DomainNotResolved = 'DomainNotResolved',\n  WalletNotInitialized = 'WalletNotInitialized',\n  InvalidAddressFormat = 'InvalidAddressFormat',\n  InactiveContract = 'InactiveContract',\n}\n\nexport enum ApiTransactionError {\n  PartialTransactionFailure = 'PartialTransactionFailure',\n  IncorrectDeviceTime = 'IncorrectDeviceTime',\n  InsufficientBalance = 'InsufficientBalance',\n  UnsuccesfulTransfer = 'UnsuccesfulTransfer',\n  NotSupportedHardwareOperation = 'NotSupportedHardwareOperation',\n  HardwareBlindSigningNotEnabled = 'HardwareBlindSigningNotEnabled',\n  WrongAddress = 'WrongAddress',\n  WrongNetwork = 'WrongNetwork',\n}\n\nexport type ApiAnyDisplayError = ApiCommonError | ApiAuthError | ApiTransactionDraftError | ApiTransactionError;\n","import type { ApiTonWalletVersion } from '../chains/ton/types';\nimport type { ApiTransactionActivity } from './activity';\nimport type { ApiParsedPayload } from './payload';\nimport type { ApiSseOptions } from './storage';\n\nexport type ApiChain = 'ton' | 'tron';\nexport type ApiNetwork = 'mainnet' | 'testnet';\nexport type ApiLedgerDriver = 'HID' | 'USB';\n\nexport interface AccountIdParsed {\n  id: number;\n  network: ApiNetwork;\n}\n\nexport interface ApiInitArgs {\n  isElectron: boolean;\n  isNativeBottomSheet: boolean;\n  isIosApp: boolean;\n  isAndroidApp: boolean;\n  referrer?: string;\n}\n\nexport interface ApiToken {\n  name: string;\n  symbol: string;\n  slug: string;\n  decimals: number;\n  chain: ApiChain;\n  tokenAddress?: string;\n  image?: string;\n  isPopular?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  color?: string;\n  isGaslessEnabled?: boolean;\n  isStarsEnabled?: boolean;\n  isTiny?: boolean;\n  customPayloadApiUrl?: string;\n  codeHash?: string;\n}\n\nexport interface ApiTokenWithPrice extends ApiToken {\n  quote: ApiTokenPrice;\n}\n\nexport interface ApiTokenPrice {\n  slug: string;\n  price: number;\n  priceUsd: number;\n  percentChange24h: number;\n}\n\nexport type ApiKnownAddresses = Record<string, ApiAddressInfo>;\n\nexport interface ApiAddressInfo {\n  name?: string;\n  isScam?: boolean;\n  isMemoRequired?: boolean;\n}\n\nexport type ApiActivityTimestamps = Record<string, number | undefined>;\nexport type ApiTransactionType = 'stake' | 'unstake' | 'unstakeRequest'\n| 'callContract' | 'excess' | 'contractDeploy' | 'bounced'\n| 'mint' | 'burn' | 'auctionBid'\n| 'dnsChangeAddress' | 'dnsChangeSite' | 'dnsChangeSubdomains' | 'dnsChangeStorage' | 'dnsDelete' | 'dnsRenew'\n| 'liquidityDeposit' | 'liquidityWithdraw'\n| undefined;\n\nexport interface ApiTransaction {\n  txId: string;\n  timestamp: number;\n  /** The amount to show in the UI (may mismatch the actual attached TON amount) */\n  amount: bigint;\n  fromAddress: string;\n  toAddress: string;\n  comment?: string;\n  encryptedComment?: string;\n  /** The fee to show in the UI (not the same as the network fee) */\n  fee: bigint;\n  slug: string;\n  isIncoming: boolean;\n  normalizedAddress: string; // Only for TON now\n  externalMsgHash?: string; // Only for TON\n  shouldHide?: boolean;\n  type?: ApiTransactionType;\n  metadata?: ApiTransactionMetadata;\n  nft?: ApiNft;\n}\n\nexport interface ApiTransactionMetadata extends ApiAddressInfo {\n}\n\nexport type ApiMtwCardType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\nexport type ApiMtwCardTextType = 'light' | 'dark';\nexport type ApiMtwCardBorderShineType = 'up' | 'down' | 'left' | 'right' | 'radioactive';\n\nexport interface ApiNftMetadata {\n  lottie?: string;\n  imageUrl?: string;\n  fragmentUrl?: string;\n  mtwCardId?: number;\n  mtwCardType?: ApiMtwCardType;\n  mtwCardTextType?: ApiMtwCardTextType;\n  mtwCardBorderShineType?: ApiMtwCardBorderShineType;\n}\n\nexport interface ApiNft {\n  index: number;\n  ownerAddress?: string;\n  name?: string;\n  address: string;\n  thumbnail: string;\n  image: string;\n  description?: string;\n  collectionName?: string;\n  collectionAddress?: string;\n  isOnSale: boolean;\n  isHidden?: boolean;\n  isOnFragment?: boolean;\n  isScam?: boolean;\n  metadata: ApiNftMetadata;\n}\n\nexport type ApiHistoryList = Array<[number, number]>;\n\nexport type ApiStakingType = 'nominators' | 'liquid' | 'jetton';\n\ntype BaseStakingState = {\n  id: string;\n  tokenSlug: string;\n  annualYield: number;\n  yieldType: ApiYieldType;\n  balance: bigint;\n  pool: string;\n  isUnstakeRequested?: boolean;\n};\n\nexport type ApiNominatorsStakingState = BaseStakingState & {\n  type: 'nominators';\n  start: number;\n  end: number;\n  pendingDepositAmount: bigint;\n};\n\nexport type ApiLiquidStakingState = BaseStakingState & {\n  type: 'liquid';\n  tokenBalance: bigint;\n  unstakeRequestAmount: bigint;\n  instantAvailable: bigint;\n};\n\nexport type ApiJettonStakingState = BaseStakingState & {\n  type: 'jetton';\n  tokenAddress: string;\n  unclaimedRewards: bigint;\n  stakeWalletAddress: string;\n  tokenAmount: bigint;\n  period: number;\n  tvl: bigint;\n  dailyReward: bigint;\n  poolWallets?: string[];\n};\n\nexport type ApiYieldType = 'APY' | 'APR';\nexport type ApiStakingState = ApiNominatorsStakingState | ApiLiquidStakingState | ApiJettonStakingState;\nexport type ApiToncoinStakingState = ApiNominatorsStakingState | ApiLiquidStakingState;\n\nexport interface ApiNominatorsPool {\n  address: string;\n  apy: number;\n  start: number;\n  end: number;\n}\n\nexport interface ApiBackendStakingState {\n  balance: bigint;\n  totalProfit: bigint;\n  type?: ApiStakingType;\n  nominatorsPool: ApiNominatorsPool;\n  loyaltyType?: ApiLoyaltyType;\n  shouldUseNominators?: boolean;\n  stakedAt?: number;\n}\n\nexport type ApiStakingHistory = {\n  timestamp: number;\n  profit: string;\n}[];\n\nexport interface ApiDappPermissions {\n  isAddressRequired?: boolean;\n  isPasswordRequired?: boolean;\n}\n\nexport type ApiDappRequest = {\n  origin?: string;\n  accountId?: string;\n  identifier?: string;\n  sseOptions?: ApiSseOptions;\n} | {\n  origin: string;\n  accountId: string;\n};\n\nexport interface ApiTransferToSign {\n  toAddress: string;\n  amount: bigint;\n  rawPayload?: string;\n  payload?: ApiParsedPayload;\n  stateInit?: string;\n}\n\nexport interface ApiDappTransfer extends ApiTransferToSign {\n  isScam?: boolean;\n  /** Whether the transfer should be treated with cautiousness, because its payload is unclear */\n  isDangerous: boolean;\n  normalizedAddress: string;\n  /** The transfer address to show in the UI */\n  displayedToAddress: string;\n  /**\n   * The transaction TON amount that should be shown in the UI.\n   * It may be less than `amount` because the difference is added to `fullFee`.\n   */\n  displayedAmount: bigint;\n  /** The transaction full fee to show in the UI. Includes the network fee and the TON amount used as a fee. */\n  fullFee: bigint;\n  /**\n   * The TON amount that will be returned back as a result of the transaction.\n   * - If `fullFee`  `excess`, the UI should show the difference as the real fee;\n   * - Otherwise, the UI should show the difference as the returned amount.\n   */\n  received: bigint;\n}\n\nexport interface ApiSignedTransfer {\n  base64: string;\n  seqno: number;\n  /** Will be used to create a local activity in the global state after the transfer is sent */\n  localActivity: Omit<ApiLocalTransactionParams, 'externalMsgHash'>;\n}\n\n/**\n * The `fee` field should contain the final (real) fee, because we want to show the real fee in local transactions\n */\nexport type ApiLocalTransactionParams = Omit<\nApiTransactionActivity, 'id' | 'txId' | 'timestamp' | 'isIncoming' | 'normalizedAddress' | 'kind' | 'shouldLoadDetails'\n> & {\n  txId?: string;\n  normalizedAddress?: string;\n};\n\nexport type ApiBaseCurrency = 'USD' | 'EUR' | 'RUB' | 'CNY' | 'BTC' | 'TON';\n\nexport enum ApiLiquidUnstakeMode {\n  Default,\n  Instant,\n  BestRate,\n}\n\nexport type ApiLoyaltyType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\n\nexport type ApiBalanceBySlug = Record<string, bigint>;\n\nexport type ApiWalletInfo = {\n  address: string;\n  version: ApiTonWalletVersion;\n  balance: bigint;\n  isInitialized: boolean;\n  lastTxId?: string;\n};\n\n// Country codes from ISO-3166-1 spec\nexport type ApiCountryCode = 'AF' | 'AX' | 'AL' | 'DZ' | 'AS' | 'AD' | 'AO' | 'AI' | 'AQ' | 'AG' | 'AR'\n| 'AM' | 'AW' | 'AU' | 'AT' | 'AZ' | 'BS' | 'BH' | 'BD' | 'BB' | 'BY' | 'BE' | 'BZ' | 'BJ' | 'BM'\n| 'BT' | 'BO' | 'BQ' | 'BA' | 'BW' | 'BV' | 'BR' | 'IO' | 'BN' | 'BG' | 'BF' | 'BI' | 'CV' | 'KH'\n| 'CM' | 'CA' | 'KY' | 'CF' | 'TD' | 'CL' | 'CN' | 'CX' | 'CC' | 'CO' | 'KM' | 'CG' | 'CD' | 'CK'\n| 'CR' | 'CI' | 'HR' | 'CU' | 'CW' | 'CY' | 'CZ' | 'DK' | 'DJ' | 'DM' | 'DO' | 'EC' | 'EG' | 'SV'\n| 'GQ' | 'ER' | 'EE' | 'SZ' | 'ET' | 'FK' | 'FO' | 'FJ' | 'FI' | 'FR' | 'GF' | 'PF' | 'TF' | 'GA'\n| 'GM' | 'GE' | 'DE' | 'GH' | 'GI' | 'GR' | 'GL' | 'GD' | 'GP' | 'GU' | 'GT' | 'GG' | 'GN' | 'GW'\n| 'GY' | 'HT' | 'HM' | 'VA' | 'HN' | 'HK' | 'HU' | 'IS' | 'IN' | 'ID' | 'IR' | 'IQ' | 'IE' | 'IM'\n| 'IL' | 'IT' | 'JM' | 'JP' | 'JE' | 'JO' | 'KZ' | 'KE' | 'KI' | 'KP' | 'KR' | 'KW' | 'KG' | 'LA'\n| 'LV' | 'LB' | 'LS' | 'LR' | 'LY' | 'LI' | 'LT' | 'LU' | 'MO' | 'MG' | 'MW' | 'MY' | 'MV' | 'ML'\n| 'MT' | 'MH' | 'MQ' | 'MR' | 'MU' | 'YT' | 'MX' | 'FM' | 'MD' | 'MC' | 'MN' | 'ME' | 'MS' | 'MA'\n| 'MZ' | 'MM' | 'NA' | 'NR' | 'NP' | 'NL' | 'NC' | 'NZ' | 'NI' | 'NE' | 'NG' | 'NU' | 'NF' | 'MP'\n| 'NO' | 'OM' | 'PK' | 'PW' | 'PS' | 'PA' | 'PG' | 'PY' | 'PE' | 'PH' | 'PN' | 'PL' | 'PT' | 'PR'\n| 'QA' | 'MK' | 'RO' | 'RU' | 'RW' | 'RE' | 'BL' | 'SH' | 'KN' | 'LC' | 'MF' | 'PM' | 'VC' | 'WS'\n| 'SM' | 'ST' | 'SA' | 'SN' | 'RS' | 'SC' | 'SL' | 'SG' | 'SX' | 'SK' | 'SI' | 'SB' | 'SO' | 'ZA'\n| 'GS' | 'SS' | 'ES' | 'LK' | 'SD' | 'SR' | 'SJ' | 'SE' | 'CH' | 'SY' | 'TW' | 'TJ' | 'TZ' | 'TH'\n| 'TL' | 'TG' | 'TK' | 'TO' | 'TT' | 'TN' | 'TR' | 'TM' | 'TC' | 'TV' | 'UG' | 'UA' | 'AE' | 'GB'\n| 'US' | 'UM' | 'UY' | 'UZ' | 'VU' | 'VE' | 'VN' | 'VG' | 'VI' | 'WF' | 'EH' | 'YE' | 'ZM' | 'ZW';\n","import type { ApiTonWalletVersion } from './api/chains/ton/types';\nimport type {\n  ApiBaseCurrency,\n  ApiLiquidStakingState,\n  ApiNominatorsStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n} from './api/types';\nimport type { LangItem, TokenPeriod } from './global/types';\n\nexport const APP_ENV = process.env.APP_ENV;\n\nexport const IS_CORE_WALLET = process.env.IS_CORE_WALLET === '1';\nexport const APP_NAME = process.env.APP_NAME || (IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet');\nexport const APP_VERSION = process.env.APP_VERSION!;\nexport const APP_ENV_MARKER = APP_ENV === 'staging' ? 'Beta' : APP_ENV === 'development' ? 'Dev' : undefined;\nexport const EXTENSION_NAME = IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet  My TON Wallet';\nexport const EXTENSION_DESCRIPTION = IS_CORE_WALLET\n  ? 'Set up your own TON Wallet on The Open Network'\n  // eslint-disable-next-line max-len\n  : 'The most feature-rich TON extension  with support of multi-accounts, tokens, NFT, TON DNS, TON Sites, TON Proxy, and TON Magic.';\n\nexport const DEBUG = APP_ENV !== 'production' && APP_ENV !== 'perf' && APP_ENV !== 'test';\nexport const DEBUG_MORE = false;\nexport const DEBUG_API = false;\n\nexport const IS_PRODUCTION = APP_ENV === 'production';\nexport const IS_TEST = APP_ENV === 'test';\nexport const IS_PERF = APP_ENV === 'perf';\nexport const IS_EXTENSION = process.env.IS_EXTENSION === '1';\nexport const IS_FIREFOX_EXTENSION = process.env.IS_FIREFOX_EXTENSION === '1';\nexport const IS_OPERA_EXTENSION = process.env.IS_OPERA_EXTENSION === '1';\nexport const IS_PACKAGED_ELECTRON = process.env.IS_PACKAGED_ELECTRON === '1';\nexport const IS_CAPACITOR = process.env.IS_CAPACITOR === '1';\nexport const IS_ANDROID_DIRECT = process.env.IS_ANDROID_DIRECT === '1';\nexport const IS_AIR_APP = process.env.IS_AIR_APP === '1';\nexport const IS_TELEGRAM_APP = process.env.IS_TELEGRAM_APP === '1';\n\nexport const ELECTRON_HOST_URL = 'https://dumb-host';\nexport const INACTIVE_MARKER = '[Inactive]';\nexport const PRODUCTION_URL = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\nexport const BETA_URL = IS_CORE_WALLET ? 'https://beta.wallet.ton.org' : 'https://beta.mytonwallet.app';\nexport const APP_INSTALL_URL = 'https://get.mytonwallet.io/';\nexport const APP_REPO_URL = 'https://github.com/mytonwalletorg/mytonwallet';\nexport const BASE_URL = process.env.BASE_URL;\n\nexport const BOT_USERNAME = process.env.BOT_USERNAME || 'MyTonWalletBot';\n\nexport const SWAP_FEE_ADDRESS = process.env.SWAP_FEE_ADDRESS || 'UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp';\nexport const DIESEL_ADDRESS = process.env.DIESEL_ADDRESS || 'UQC9lQOaEHC6YASiJJ2NrKEOlITMMQmc8j0_iZEHy-4sl3tG';\n\nexport const STRICTERDOM_ENABLED = DEBUG && !IS_PACKAGED_ELECTRON;\n\nexport const DEBUG_ALERT_MSG = 'Shoot!\\nSomething went wrong, please see the error details in Dev Tools Console.';\n\nexport const PIN_LENGTH = 4;\nexport const NATIVE_BIOMETRICS_USERNAME = IS_CORE_WALLET ? 'TonWallet' : 'MyTonWallet';\nexport const NATIVE_BIOMETRICS_SERVER = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\n\nexport const IS_BIP39_MNEMONIC_ENABLED = !IS_CORE_WALLET;\nexport const MNEMONIC_COUNT = 24;\nexport const MNEMONIC_COUNTS = IS_BIP39_MNEMONIC_ENABLED ? [12, 24] : [24];\n\nexport const PRIVATE_KEY_HEX_LENGTH = 64;\nexport const MNEMONIC_CHECK_COUNT = 3;\n\nexport const MOBILE_SCREEN_MAX_WIDTH = 700; // px\n\nexport const ANIMATION_END_DELAY = 50;\n\nexport const ANIMATED_STICKER_TINY_ICON_PX = 16;\nexport const ANIMATED_STICKER_ICON_PX = 30;\nexport const ANIMATED_STICKER_TINY_SIZE_PX = 70;\nexport const ANIMATED_STICKER_SMALL_SIZE_PX = 110;\nexport const ANIMATED_STICKER_MIDDLE_SIZE_PX = 120;\nexport const ANIMATED_STICKER_DEFAULT_PX = 150;\nexport const ANIMATED_STICKER_BIG_SIZE_PX = 156;\nexport const ANIMATED_STICKER_HUGE_SIZE_PX = 192;\n\nexport const DEFAULT_LANDSCAPE_ACTION_TAB_ID = 0;\nexport const TRANSACTION_ADDRESS_SHIFT = 4;\n\nexport const WHOLE_PART_DELIMITER = ''; // https://www.compart.com/en/unicode/U+202F\n\nexport const DEFAULT_SLIPPAGE_VALUE = 5;\n\nexport const GLOBAL_STATE_CACHE_DISABLED = false;\nexport const GLOBAL_STATE_CACHE_KEY = IS_CORE_WALLET ? 'tonwallet-global-state' : 'mytonwallet-global-state';\n\nexport const ANIMATION_LEVEL_MIN = 0;\nexport const ANIMATION_LEVEL_MED = 1;\nexport const ANIMATION_LEVEL_MAX = 2;\nexport const ANIMATION_LEVEL_DEFAULT = ANIMATION_LEVEL_MAX;\nexport const THEME_DEFAULT = 'system';\n\nexport const MAIN_ACCOUNT_ID = '0-ton-mainnet';\n\nexport const TONCENTER_MAINNET_URL = process.env.TONCENTER_MAINNET_URL || 'https://toncenter.mytonwallet.org';\nexport const TONCENTER_MAINNET_KEY = process.env.TONCENTER_MAINNET_KEY;\nexport const ELECTRON_TONCENTER_MAINNET_KEY = process.env.ELECTRON_TONCENTER_MAINNET_KEY;\nexport const TONAPIIO_MAINNET_URL = process.env.TONAPIIO_MAINNET_URL || 'https://tonapiio.mytonwallet.org';\n\nexport const TONCENTER_TESTNET_URL = process.env.TONCENTER_TESTNET_URL || 'https://toncenter-testnet.mytonwallet.org';\nexport const TONCENTER_TESTNET_KEY = process.env.TONCENTER_TESTNET_KEY;\nexport const ELECTRON_TONCENTER_TESTNET_KEY = process.env.ELECTRON_TONCENTER_TESTNET_KEY;\nexport const TONAPIIO_TESTNET_URL = process.env.TONAPIIO_TESTNET_URL || 'https://tonapiio-testnet.mytonwallet.org';\n\nexport const BRILLIANT_API_BASE_URL = process.env.BRILLIANT_API_BASE_URL || 'https://api.mytonwallet.org';\n\nexport const TRON_MAINNET_API_URL = process.env.TRON_MAINNET_API_URL || 'https://tronapi.mytonwallet.org';\nexport const TRON_TESTNET_API_URL = process.env.TRON_TESTNET_API_URL || 'https://api.shasta.trongrid.io';\n\nexport const FRACTION_DIGITS = 9;\nexport const SHORT_FRACTION_DIGITS = 2;\n\nexport const MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT = 3;\n\nexport const SUPPORT_USERNAME = 'mysupport';\nexport const MTW_TIPS_CHANNEL_NAME = { en: 'MyTonWalletTips', ru: 'MyTonWalletTipsRu' };\nexport const MTW_CARDS_BASE_URL = 'https://static.mytonwallet.org/cards/';\nexport const MTW_CARDS_MINT_BASE_URL = 'https://static.mytonwallet.org/mint-cards/';\nexport const MYTONWALLET_PROMO_URL = 'https://mytonwallet.io/';\nexport const TELEGRAM_WEB_URL = 'https://web.telegram.org/a/';\nexport const NFT_MARKETPLACE_URL = 'https://getgems.io/';\nexport const NFT_MARKETPLACE_TITLE = 'GetGems';\nexport const GETGEMS_BASE_MAINNET_URL = 'https://getgems.io/';\nexport const GETGEMS_BASE_TESTNET_URL = 'https://testnet.getgems.io/';\nexport const HELPCENTER_URL = { en: 'https://help.mytonwallet.io/', ru: 'https://help.mytonwallet.io/ru' };\nexport const EMPTY_HASH_VALUE = 'NOHASH';\n\nexport const CHANGELLY_SUPPORT_EMAIL = 'support@changelly.com';\nexport const CHANGELLY_LIVE_CHAT_URL = 'https://changelly.com/';\nexport const CHANGELLY_SECURITY_EMAIL = 'security@changelly.com';\nexport const CHANGELLY_TERMS_OF_USE = 'https://changelly.com/terms-of-use';\nexport const CHANGELLY_PRIVACY_POLICY = 'https://changelly.com/privacy-policy';\nexport const CHANGELLY_AML_KYC = 'https://changelly.com/aml-kyc';\nexport const CHANGELLY_WAITING_DEADLINE = 3 * 60 * 60 * 1000; // 3 hour\n\nexport const PROXY_HOSTS = process.env.PROXY_HOSTS;\n\nexport const TINY_TRANSFER_MAX_COST = 0.01;\n\nexport const IMAGE_CACHE_NAME = 'mtw-image';\nexport const LANG_CACHE_NAME = 'mtw-lang-182';\n\nexport const LANG_LIST: LangItem[] = [{\n  langCode: 'en',\n  name: 'English',\n  nativeName: 'English',\n  rtl: false,\n}, {\n  langCode: 'es',\n  name: 'Spanish',\n  nativeName: 'Espaol',\n  rtl: false,\n}, {\n  langCode: 'ru',\n  name: 'Russian',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'zh-Hans',\n  name: 'Chinese (Simplified)',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'zh-Hant',\n  name: 'Chinese (Traditional)',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'tr',\n  name: 'Turkish',\n  nativeName: 'Trke',\n  rtl: false,\n}, {\n  langCode: 'de',\n  name: 'German',\n  nativeName: 'Deutsch',\n  rtl: false,\n}, {\n  langCode: 'th',\n  name: 'Thai',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'uk',\n  name: 'Ukrainian',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'pl',\n  name: 'Polish',\n  nativeName: 'Polski',\n  rtl: false,\n}];\n\nexport const IS_STAKING_DISABLED = IS_CORE_WALLET;\nexport const STAKING_CYCLE_DURATION_MS = 131_072_000; // 36.4 hours\nexport const VALIDATION_PERIOD_MS = 65_536_000; // 18.2 h.\nexport const ONE_TON = 1_000_000_000n;\nexport const DEFAULT_FEE = 15_000_000n; // 0.015 TON\n\nexport const STAKING_POOLS = process.env.STAKING_POOLS ? process.env.STAKING_POOLS.split(' ') : [];\nexport const LIQUID_POOL = process.env.LIQUID_POOL || 'EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o';\nexport const LIQUID_JETTON = process.env.LIQUID_JETTON || 'EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE';\nexport const STAKING_MIN_AMOUNT = ONE_TON;\nexport const NOMINATORS_STAKING_MIN_AMOUNT = 10_000n * ONE_TON;\nexport const MIN_ACTIVE_STAKING_REWARDS = 100_000_000n; // 0.1 MY\n\nexport const TONCONNECT_PROTOCOL_VERSION = 2;\nexport const TONCONNECT_WALLET_JSBRIDGE_KEY = IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet';\n\nexport const NFT_FRAGMENT_COLLECTIONS = new Set([\n  '0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2', // Anonymous Telegram Numbers\n  '0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2', // Telegram Usernames\n]);\nexport const NFT_FRAGMENT_GIFT_IMAGE_URL_PREFIX = 'https://nft.fragment.com/gift/';\nexport const NFT_FRAGMENT_GIFT_IMAGE_TO_URL_REGEX = /^https?:\\/\\/nft\\.(fragment\\.com\\/gift\\/[\\w-]+-\\d+)\\.\\w+$/i;\n\nexport const MTW_CARDS_WEBSITE = 'https://cards.mytonwallet.io';\nexport const MTW_CARDS_COLLECTION = 'EQCQE2L9hfwx1V8sgmF9keraHx1rNK9VmgR1ctVvINBGykyM';\nexport const TON_DNS_COLLECTION = 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz';\n\nexport const TONCOIN = {\n  name: 'Toncoin',\n  symbol: 'TON',\n  slug: 'toncoin',\n  decimals: 9,\n  chain: 'ton',\n  cmcSlug: 'toncoin',\n} as const;\n\nexport const TRX = {\n  name: 'TRON',\n  symbol: 'TRX',\n  slug: 'trx',\n  decimals: 6,\n  chain: 'tron',\n  cmcSlug: 'tron',\n} as const;\n\nexport const MYCOIN = {\n  name: 'MyTonWallet Coin',\n  symbol: 'MY',\n  slug: 'ton-eqcfvnlrbn',\n  decimals: 9,\n  chain: 'ton',\n  minterAddress: 'EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w',\n} as const;\n\nexport const MYCOIN_TESTNET = {\n  ...MYCOIN,\n  slug: 'ton-kqawlxpebw',\n  minterAddress: 'kQAWlxpEbwhCDFX9gp824ee2xVBhAh5VRSGWfbNFDddAbQoQ',\n} as const;\n\nexport const CHAIN_CONFIG = {\n  ton: {\n    isMemoSupported: true,\n    isDnsSupported: true,\n    addressRegex: /^([-\\w_]{48}|0:[\\da-h]{64})$/i,\n    addressPrefixRegex: /^([-\\w_]{1,48}|0:[\\da-h]{0,64})$/i,\n    nativeToken: TONCOIN,\n  },\n  tron: {\n    isMemoSupported: false,\n    isDnsSupported: false,\n    addressRegex: /^T[1-9A-HJ-NP-Za-km-z]{33}$/,\n    addressPrefixRegex: /^T[1-9A-HJ-NP-Za-km-z]{0,33}$/,\n    nativeToken: TRX,\n    mainnet: {\n      apiUrl: TRON_MAINNET_API_URL,\n      usdtAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    },\n    testnet: {\n      apiUrl: TRON_TESTNET_API_URL,\n      usdtAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    },\n  },\n} as const;\n\nexport const TRC20_USDT_MAINNET_SLUG = 'tron-tr7nhqjekq';\nexport const TRC20_USDT_TESTNET_SLUG = 'tron-tg3xxyexbk';\nexport const TON_USDT_SLUG = 'ton-eqcxe6mutq';\nexport const STAKED_TON_SLUG = 'ton-eqcqc6ehrj';\nexport const STAKED_MYCOIN_SLUG = 'ton-eqcbzvsfwq';\nexport const TRX_SWAP_COUNT_FEE_ADDRESS = 'TW2LXSebZ7Br1zHaiA2W1zRojDkDwjGmpw';\nexport const MYCOIN_STAKING_POOL = 'EQC3roTiRRsoLzfYVK7yVVoIZjTEqAjQU3ju7aQ7HWTVL5o5';\n\n// In cross-chain swaps, only a few TON/TRON tokens are available.\n// Its not optimal to request swap history for all the others.\nexport const SWAP_CROSSCHAIN_SLUGS = new Set([\n  TONCOIN.slug,\n  TON_USDT_SLUG,\n  TRX.slug,\n  TRC20_USDT_MAINNET_SLUG,\n]);\n\nexport const STON_PTON_ADDRESS = 'EQCM3B12QK1e4yZSf8GtBRT0aLMNyEsBc_DhVfRRtOEffLez';\n\nexport const DNS_IMAGE_GEN_URL = 'https://dns-image.mytonwallet.org/img?d=';\n\nconst TRC20_USDT = {\n  name: 'Tether USD',\n  symbol: 'USDT',\n  decimals: 6,\n  chain: 'tron',\n} as const;\n\nconst TON_USDT = {\n  name: 'Tether USD',\n  symbol: 'USD',\n  chain: 'ton',\n  slug: TON_USDT_SLUG,\n  decimals: 6,\n  tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n} as const;\n\nexport const DEFAULT_ENABLED_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug, TRC20_USDT_TESTNET_SLUG, TRC20_USDT_MAINNET_SLUG,\n] as string[];\n\n// Toncoin, USDT TON, TRX, USDT TRC20\nexport const DEFAULT_ENABLED_TOKEN_COUNT = 4;\n\nexport const PRIORITY_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug,\n] as string[];\n\nexport const TOKEN_INFO = {\n  toncoin: {\n    ...TONCOIN,\n    quote: {\n      slug: TONCOIN.slug,\n      price: 1.95,\n      priceUsd: 1.95,\n      percentChange24h: 0,\n    },\n  },\n  trx: {\n    ...TRX,\n    quote: {\n      slug: TRX.slug,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [TRC20_USDT_MAINNET_SLUG]: { // mainnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_MAINNET_SLUG,\n    tokenAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    quote: {\n      slug: TRC20_USDT_MAINNET_SLUG,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [TRC20_USDT_TESTNET_SLUG]: { // testnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_TESTNET_SLUG,\n    tokenAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    quote: {\n      slug: TRC20_USDT_TESTNET_SLUG,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [TON_USDT_SLUG]: {\n    ...TON_USDT,\n    // eslint-disable-next-line max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    quote: {\n      slug: TON_USDT_SLUG,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [MYCOIN.slug]: {\n    ...MYCOIN,\n    // eslint-disable-next-line max-len\n    image: 'https://cache.tonapi.io/imgproxy/Qy038wCBKISofJ0hYMlj6COWma330cx3Ju1ZSPM2LRU/rs:fill:200:200:1/g:no/aHR0cHM6Ly9teXRvbndhbGxldC5pby9sb2dvLTI1Ni1ibHVlLnBuZw.webp',\n    quote: {\n      slug: MYCOIN.slug,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n};\n\nexport const TOKEN_WITH_LABEL: Record<string, string> = {\n  [TRC20_USDT_MAINNET_SLUG]: 'TRC-20',\n  [TRC20_USDT_TESTNET_SLUG]: 'TRC-20',\n  [TON_USDT_SLUG]: 'TON',\n};\n\nexport const INIT_SWAP_ASSETS: Record<string, ApiSwapAsset> = {\n  toncoin: {\n    name: 'Toncoin',\n    symbol: TONCOIN.symbol,\n    chain: TONCOIN.chain,\n    slug: TONCOIN.slug,\n    decimals: TONCOIN.decimals,\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n  [TON_USDT_SLUG]: {\n    name: 'Tether USD',\n    symbol: 'USD',\n    chain: 'ton',\n    slug: TON_USDT_SLUG,\n    decimals: 9,\n    // eslint-disable-next-line max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n};\n\nexport const DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_FISRT_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_SECOND_TOKEN_SLUG = TON_USDT_SLUG;\nexport const DEFAULT_TRANSFER_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG = TRC20_USDT_MAINNET_SLUG;\nexport const SWAP_DEX_LABELS: Record<ApiSwapDexLabel, string> = {\n  dedust: 'DeDust',\n  ston: 'STON.fi',\n};\n\nexport const MULTITAB_DATA_CHANNEL_NAME = IS_CORE_WALLET ? 'tw-multitab' : 'mtw-multitab';\nexport const ACTIVE_TAB_STORAGE_KEY = IS_CORE_WALLET ? 'tw-active-tab' : 'mtw-active-tab';\n\nexport const INDEXED_DB_NAME = 'keyval-store';\nexport const INDEXED_DB_STORE_NAME = 'keyval';\n\nexport const WINDOW_PROVIDER_CHANNEL = 'windowProvider';\n\nexport const SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY = IS_CORE_WALLET;\nexport const PORTRAIT_MIN_ASSETS_TAB_VIEW = 4;\nexport const LANDSCAPE_MIN_ASSETS_TAB_VIEW = 6;\n\nexport const DEFAULT_PRICE_CURRENCY = 'USD';\nexport const SHORT_CURRENCY_SYMBOL_MAP = {\n  USD: '$',\n  EUR: '',\n  RUB: '',\n  CNY: '',\n};\nexport const CURRENCY_LIST: { value: ApiBaseCurrency; name: string }[] = [\n  {\n    value: 'USD',\n    name: 'US Dollar',\n  }, {\n    value: 'EUR',\n    name: 'Euro',\n  }, {\n    value: 'RUB',\n    name: 'Ruble',\n  }, {\n    value: 'CNY',\n    name: 'Yuan',\n  }, {\n    value: 'BTC',\n    name: 'Bitcoin',\n  }, {\n    value: TONCOIN.symbol,\n    name: 'Toncoin',\n  },\n];\n\nexport const BURN_ADDRESS = 'UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ';\n\nexport const DEFAULT_WALLET_VERSION: ApiTonWalletVersion = 'W5';\nexport const POPULAR_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R1', 'v3R2', 'v4R2', 'W5'];\nexport const LEDGER_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R2', 'v4R2'];\n\nexport const DEFAULT_TIMEOUT = 10000;\nexport const DEFAULT_RETRIES = 3;\nexport const DEFAULT_ERROR_PAUSE = 500;\n\nexport const HISTORY_PERIODS: TokenPeriod[] = ['1D', '7D', '1M', '3M', '1Y', 'ALL'];\n\nexport const BROWSER_HISTORY_LIMIT = 10;\n\nexport const NFT_BATCH_SIZE = 4;\nexport const NOTCOIN_VOUCHERS_ADDRESS = 'EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW';\nexport const BURN_CHUNK_DURATION_APPROX_SEC = 30;\nexport const NOTCOIN_FORWARD_TON_AMOUNT = 30000000n; // 0.03 TON\nexport const NOTCOIN_EXCHANGERS = [\n  'EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2',\n  'EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ',\n  'EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s',\n  'EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm',\n  'EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd',\n  'EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD',\n  'EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p',\n  'EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO',\n  'EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe',\n  'EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-',\n  'EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu',\n  'EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH',\n  'EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy',\n  'EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT',\n  'EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu',\n  'EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw',\n] as const;\n\nexport const CLAIM_ADDRESS = 'EQB3zOTvPi1PmwdcTpqSfFKZnhi1GNKEVJM-LdoAirdLtash';\nexport const CLAIM_AMOUNT = 30000000n; // 0.03 TON\nexport const CLAIM_COMMENT = 'claim';\n\nexport const MINT_CARD_ADDRESS = 'UQBpst3ZWJ9Dqq5gE2YH-yPsFK_BqMOmgi7Z_qK6v7WbrKhq';\nexport const MINT_CARD_COMMENT = 'Mint card';\n\n// eslint-disable-next-line max-len\nexport const RE_LINK_TEMPLATE = /((ftp|https?):\\/\\/)?(?<host>(www\\\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z][-a-zA-Z0-9]{1,62})\\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g;\n// eslint-disable-next-line max-len\nexport const RE_TG_BOT_MENTION = /telegram[:\\s-]*((@[a-z0-9_]+)|(https:\\/\\/)?(t\\.me|telegram\\.me|telegram\\.dog)\\/[a-z0-9_]+)/mig;\n\nexport const STARS_SYMBOL = '';\n\nexport const GIVEAWAY_CHECKIN_URL = process.env.GIVEAWAY_CHECKIN_URL || 'https://giveaway.mytonwallet.io';\n\nexport const AUTOLOCK_OPTIONS_LIST = [\n  {\n    value: 'never',\n    name: 'Disabled',\n    selectedName: 'Disabled',\n    period: 0,\n  },\n  {\n    value: '1',\n    name: '30 seconds',\n    selectedName: 'If away for 30 sec',\n    period: 30_000,\n  },\n  {\n    value: '2',\n    name: '3 minutes',\n    selectedName: 'If away for 3 min',\n    period: 60_000 * 3,\n  },\n  {\n    value: '3',\n    name: '10 minutes',\n    selectedName: 'If away for 10 min',\n    period: 60_000 * 10,\n  },\n] as const;\n\nexport const PRICELESS_TOKEN_HASHES = new Set([\n  '82566ad72b6568fe7276437d3b0c911aab65ed701c13601941b2917305e81c11', // Stonfi V1\n  'ec614ea4aaea3f7768606f1c1632b3374d3de096a1e7c4ba43c8009c487fee9d', // Stonfi V2\n  'c0f9d14fbc8e14f0d72cba2214165eee35836ab174130912baf9dbfa43ead562', // Dedust (for example, EQBkh7Mc411WTYF0o085MtwJpYpvGhZOMBphhIFzEpzlVODp)\n  '1275095b6da3911292406f4f4386f9e780099b854c6dee9ee2895ddce70927c1', // Dedust (for example, EQCm92zFBkLe_qcFDp7WBvI6JFSDsm4WbDPvZ7xNd7nPL_6M)\n  '5d01684bdf1d5c9be2682c4e36074202432628bd3477d77518d66b0976b78cca', // USDT Storm LP (for example, EQAzm06UMMsnFQrNKEubV1myIR-mm2ZOCnoic36frCgD8MLR)\n  '173e31eee054cb0c76f77edc7956bed766bf48a1f63bd062d87040dcd3df700f', // FIVA SY tsTON EQAxGi9Al7hamLAORroxGkvfap6knGyzI50ThkP3CLPLTtOZ\n  '5226dd4e6db9af26b24d5ca822bc4053b7e08152f923932abf25030c7e38bb42', // FIVA PT tsTON EQAkxIRGXgs2vD2zjt334MBjD3mXg2GsyEZHfzuYX_trQkFL\n  'fea2c08a704e5192b7f37434927170440d445b87aab865c3ea2a68abe7168204', // FIVA YT tsTON EQAcy60qg22RCq87A_qgYK8hooEgjCZ44yxhdnKYdlWIfKXL\n  'e691cf9081a8aeb22ed4d94829f6626c9d822752e035800b5543c43f83d134b5', // FIVA LP tsTON EQD3BjCjxuf8mu5kvxajVbe-Ila1ScZZlAi03oS7lMmAJjM3\n  '301ce25925830d713b326824e552e962925c4ff45b1e3ea21fc363a459a49b43', // FIVA SY eUSDT EQDi9blCcyT-k8iMpFMYY0t7mHVyiCB50ZsRgyUECJDuGvIl\n  '02250f83fbb8624d859c2c045ac70ee2b3b959688c3d843aec773be9b36dbfc3', // FIVA PT eUSDT EQBzVrYkYPHx8D_HPfQacm1xONa4XSRxl826vHkx_laP2HOe\n  'dba3adb2c917db80fd71a6a68c1fc9e12976491a8309d5910f9722efc084ce4d', // FIVA YT eUSDT EQCwUSc2qrY5rn9BfFBG9ARAHePTUvITDl97UD0zOreWzLru\n  '7da9223b90984d6a144e71611a8d7c65a6298cad734faed79438dc0f7a8e53d1', // FIVA LP eUSDT EQBNlIZxIbQGQ78cXgG3VRcyl8A0kLn_6BM9kabiHHhWC4qY\n]);\n\nexport const STAKED_TOKEN_SLUGS = new Set([\n  STAKED_TON_SLUG,\n  STAKED_MYCOIN_SLUG,\n]);\n\nexport const DEFAULT_OUR_SWAP_FEE = 0.875;\n\nexport const DEFAULT_STAKING_STATE: ApiLiquidStakingState = {\n  type: 'liquid',\n  id: 'liquid',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: LIQUID_POOL,\n  tokenBalance: 0n,\n  unstakeRequestAmount: 0n,\n  instantAvailable: 0n,\n};\n\nexport const DEFAULT_NOMINATORS_STAKING_STATE: ApiNominatorsStakingState = {\n  type: 'nominators',\n  id: 'nominators',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: 'Ef8dgIOIRyCLU0NEvF8TD6Me3wrbrkS1z3Gpjk3ppd8m8-s_',\n  start: 0,\n  end: 0,\n  pendingDepositAmount: 0n,\n};\n\nexport const SWAP_API_VERSION = 2;\n\nexport const JVAULT_URL = 'https://jvault.xyz';\n\nexport const TON_DNS_ZONES = [\n  {\n    suffixes: ['ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-\\da-z]{4,126}$/i,\n    resolver: 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz',\n    collectionName: 'TON DNS Domains',\n  },\n  {\n    suffixes: ['t.me'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-_\\da-z]{4,32}$/i,\n    resolver: 'EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi',\n    isTelemint: true,\n    collectionName: 'Telegram Usernames',\n  },\n  {\n    suffixes: ['vip', 'ton.vip', 'vip.ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}?[\\da-z]{1,24}$/i,\n    resolver: 'EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS',\n    collectionName: 'VIP DNS Domains',\n    isUnofficial: true,\n  },\n  {\n    suffixes: ['gram'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[\\da-z]{1,127}$/i,\n    resolver: 'EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ',\n    collectionName: 'GRAM DNS Domains',\n    isUnofficial: true,\n  },\n];\n","/*\n *  big.js v6.2.1\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\n *  Copyright (c) 2022 Michael Mclaughlin\n *  https://github.com/MikeMcl/big.js/LICENCE.md\n */\n\n\n/************************************** EDITABLE DEFAULTS *****************************************/\n\n\n  // The default values below must be integers within the stated ranges.\n\n  /*\n   * The maximum number of decimal places (DP) of the results of operations involving division:\n   * div and sqrt, and pow with negative exponents.\n   */\nvar DP = 20,          // 0 to MAX_DP\n\n  /*\n   * The rounding mode (RM) used when rounding to the above decimal places.\n   *\n   *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\n   *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\n   *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\n   *  3  Away from zero.                                  (ROUND_UP)\n   */\n  RM = 1,             // 0, 1, 2 or 3\n\n  // The maximum value of DP and Big.DP.\n  MAX_DP = 1E6,       // 0 to 1000000\n\n  // The maximum magnitude of the exponent argument to the pow method.\n  MAX_POWER = 1E6,    // 1 to 1000000\n\n  /*\n   * The negative exponent (NE) at and beneath which toString returns exponential notation.\n   * (JavaScript numbers: -7)\n   * -1000000 is the minimum recommended exponent value of a Big.\n   */\n  NE = -7,            // 0 to -1000000\n\n  /*\n   * The positive exponent (PE) at and above which toString returns exponential notation.\n   * (JavaScript numbers: 21)\n   * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\n   */\n  PE = 21,            // 0 to 1000000\n\n  /*\n   * When true, an error will be thrown if a primitive number is passed to the Big constructor,\n   * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\n   * primitive number without a loss of precision.\n   */\n  STRICT = false,     // true or false\n\n\n/**************************************************************************************************/\n\n\n  // Error messages.\n  NAME = '[big.js] ',\n  INVALID = NAME + 'Invalid ',\n  INVALID_DP = INVALID + 'decimal places',\n  INVALID_RM = INVALID + 'rounding mode',\n  DIV_BY_ZERO = NAME + 'Division by zero',\n\n  // The shared prototype object.\n  P = {},\n  UNDEFINED = void 0,\n  NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\n\n\n/*\n * Create and return a Big constructor.\n */\nfunction _Big_() {\n\n  /*\n   * The Big constructor and exported function.\n   * Create and return a new instance of a Big number object.\n   *\n   * n {number|string|Big} A numeric value.\n   */\n  function Big(n) {\n    var x = this;\n\n    // Enable constructor usage without new.\n    if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n);\n\n    // Duplicate.\n    if (n instanceof Big) {\n      x.s = n.s;\n      x.e = n.e;\n      x.c = n.c.slice();\n    } else {\n      if (typeof n !== 'string') {\n        if (Big.strict === true && typeof n !== 'bigint') {\n          throw TypeError(INVALID + 'value');\n        }\n\n        // Minus zero?\n        n = n === 0 && 1 / n < 0 ? '-0' : String(n);\n      }\n\n      parse(x, n);\n    }\n\n    // Retain a reference to this Big constructor.\n    // Shadow Big.prototype.constructor which points to Object.\n    x.constructor = Big;\n  }\n\n  Big.prototype = P;\n  Big.DP = DP;\n  Big.RM = RM;\n  Big.NE = NE;\n  Big.PE = PE;\n  Big.strict = STRICT;\n  Big.roundDown = 0;\n  Big.roundHalfUp = 1;\n  Big.roundHalfEven = 2;\n  Big.roundUp = 3;\n\n  return Big;\n}\n\n\n/*\n * Parse the number or string value passed to a Big constructor.\n *\n * x {Big} A Big number instance.\n * n {number|string} A numeric value.\n */\nfunction parse(x, n) {\n  var e, i, nl;\n\n  if (!NUMERIC.test(n)) {\n    throw Error(INVALID + 'number');\n  }\n\n  // Determine sign.\n  x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\n\n  // Decimal point?\n  if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\n\n  // Exponential form?\n  if ((i = n.search(/e/i)) > 0) {\n\n    // Determine exponent.\n    if (e < 0) e = i;\n    e += +n.slice(i + 1);\n    n = n.substring(0, i);\n  } else if (e < 0) {\n\n    // Integer.\n    e = n.length;\n  }\n\n  nl = n.length;\n\n  // Determine leading zeros.\n  for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\n\n  if (i == nl) {\n\n    // Zero.\n    x.c = [x.e = 0];\n  } else {\n\n    // Determine trailing zeros.\n    for (; nl > 0 && n.charAt(--nl) == '0';);\n    x.e = e - i - 1;\n    x.c = [];\n\n    // Convert string to array of digits without leading/trailing zeros.\n    for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\n  }\n\n  return x;\n}\n\n\n/*\n * Round Big x to a maximum of sd significant digits using rounding mode rm.\n *\n * x {Big} The Big to round.\n * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\n * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n * [more] {boolean} Whether the result of division was truncated.\n */\nfunction round(x, sd, rm, more) {\n  var xc = x.c;\n\n  if (rm === UNDEFINED) rm = x.constructor.RM;\n  if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\n    throw Error(INVALID_RM);\n  }\n\n  if (sd < 1) {\n    more =\n      rm === 3 && (more || !!xc[0]) || sd === 0 && (\n      rm === 1 && xc[0] >= 5 ||\n      rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\n    );\n\n    xc.length = 1;\n\n    if (more) {\n\n      // 1, 0.1, 0.01, 0.001, 0.0001 etc.\n      x.e = x.e - sd + 1;\n      xc[0] = 1;\n    } else {\n\n      // Zero.\n      xc[0] = x.e = 0;\n    }\n  } else if (sd < xc.length) {\n\n    // xc[sd] is the digit after the digit that may be rounded up.\n    more =\n      rm === 1 && xc[sd] >= 5 ||\n      rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\n        (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\n      rm === 3 && (more || !!xc[0]);\n\n    // Remove any digits after the required precision.\n    xc.length = sd;\n\n    // Round up?\n    if (more) {\n\n      // Rounding up may mean the previous digit has to be rounded up.\n      for (; ++xc[--sd] > 9;) {\n        xc[sd] = 0;\n        if (sd === 0) {\n          ++x.e;\n          xc.unshift(1);\n          break;\n        }\n      }\n    }\n\n    // Remove trailing zeros.\n    for (sd = xc.length; !xc[--sd];) xc.pop();\n  }\n\n  return x;\n}\n\n\n/*\n * Return a string representing the value of Big x in normal or exponential notation.\n * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\n */\nfunction stringify(x, doExponential, isNonzero) {\n  var e = x.e,\n    s = x.c.join(''),\n    n = s.length;\n\n  // Exponential notation?\n  if (doExponential) {\n    s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\n\n  // Normal notation.\n  } else if (e < 0) {\n    for (; ++e;) s = '0' + s;\n    s = '0.' + s;\n  } else if (e > 0) {\n    if (++e > n) {\n      for (e -= n; e--;) s += '0';\n    } else if (e < n) {\n      s = s.slice(0, e) + '.' + s.slice(e);\n    }\n  } else if (n > 1) {\n    s = s.charAt(0) + '.' + s.slice(1);\n  }\n\n  return x.s < 0 && isNonzero ? '-' + s : s;\n}\n\n\n// Prototype/instance methods\n\n\n/*\n * Return a new Big whose value is the absolute value of this Big.\n */\nP.abs = function () {\n  var x = new this.constructor(this);\n  x.s = 1;\n  return x;\n};\n\n\n/*\n * Return 1 if the value of this Big is greater than the value of Big y,\n *       -1 if the value of this Big is less than the value of Big y, or\n *        0 if they have the same value.\n */\nP.cmp = function (y) {\n  var isneg,\n    x = this,\n    xc = x.c,\n    yc = (y = new x.constructor(y)).c,\n    i = x.s,\n    j = y.s,\n    k = x.e,\n    l = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\n\n  // Signs differ?\n  if (i != j) return i;\n\n  isneg = i < 0;\n\n  // Compare exponents.\n  if (k != l) return k > l ^ isneg ? 1 : -1;\n\n  j = (k = xc.length) < (l = yc.length) ? k : l;\n\n  // Compare digit by digit.\n  for (i = -1; ++i < j;) {\n    if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\n  }\n\n  // Compare lengths.\n  return k == l ? 0 : k > l ^ isneg ? 1 : -1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\n * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.div = function (y) {\n  var x = this,\n    Big = x.constructor,\n    a = x.c,                  // dividend\n    b = (y = new Big(y)).c,   // divisor\n    k = x.s == y.s ? 1 : -1,\n    dp = Big.DP;\n\n  if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n\n  // Divisor is zero?\n  if (!b[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  // Dividend is 0? Return +-0.\n  if (!a[0]) {\n    y.s = k;\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  var bl, bt, n, cmp, ri,\n    bz = b.slice(),\n    ai = bl = b.length,\n    al = a.length,\n    r = a.slice(0, bl),   // remainder\n    rl = r.length,\n    q = y,                // quotient\n    qc = q.c = [],\n    qi = 0,\n    p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\n\n  q.s = k;\n  k = p < 0 ? 0 : p;\n\n  // Create version of divisor with leading zero.\n  bz.unshift(0);\n\n  // Add zeros to make remainder as long as divisor.\n  for (; rl++ < bl;) r.push(0);\n\n  do {\n\n    // n is how many times the divisor goes into current remainder.\n    for (n = 0; n < 10; n++) {\n\n      // Compare divisor and remainder.\n      if (bl != (rl = r.length)) {\n        cmp = bl > rl ? 1 : -1;\n      } else {\n        for (ri = -1, cmp = 0; ++ri < bl;) {\n          if (b[ri] != r[ri]) {\n            cmp = b[ri] > r[ri] ? 1 : -1;\n            break;\n          }\n        }\n      }\n\n      // If divisor < remainder, subtract divisor from remainder.\n      if (cmp < 0) {\n\n        // Remainder can't be more than 1 digit longer than divisor.\n        // Equalise lengths using divisor with extra leading zero?\n        for (bt = rl == bl ? b : bz; rl;) {\n          if (r[--rl] < bt[rl]) {\n            ri = rl;\n            for (; ri && !r[--ri];) r[ri] = 9;\n            --r[ri];\n            r[rl] += 10;\n          }\n          r[rl] -= bt[rl];\n        }\n\n        for (; !r[0];) r.shift();\n      } else {\n        break;\n      }\n    }\n\n    // Add the digit n to the result array.\n    qc[qi++] = cmp ? n : ++n;\n\n    // Update the remainder.\n    if (r[0] && cmp) r[rl] = a[ai] || 0;\n    else r = [a[ai]];\n\n  } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\n\n  // Leading zero? Do not remove if result is simply zero (qi == 1).\n  if (!qc[0] && qi != 1) {\n\n    // There can't be more than one zero.\n    qc.shift();\n    q.e--;\n    p--;\n  }\n\n  // Round?\n  if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\n\n  return q;\n};\n\n\n/*\n * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\n */\nP.eq = function (y) {\n  return this.cmp(y) === 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than the value of Big y, otherwise return\n * false.\n */\nP.gt = function (y) {\n  return this.cmp(y) > 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\n * return false.\n */\nP.gte = function (y) {\n  return this.cmp(y) > -1;\n};\n\n\n/*\n * Return true if the value of this Big is less than the value of Big y, otherwise return false.\n */\nP.lt = function (y) {\n  return this.cmp(y) < 0;\n};\n\n\n/*\n * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\n * return false.\n */\nP.lte = function (y) {\n  return this.cmp(y) < 1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big minus the value of Big y.\n */\nP.minus = P.sub = function (y) {\n  var i, j, t, xlty,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  // Signs differ?\n  if (a != b) {\n    y.s = -b;\n    return x.plus(y);\n  }\n\n  var xc = x.c.slice(),\n    xe = x.e,\n    yc = y.c,\n    ye = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (yc[0]) {\n      y.s = -b;\n    } else if (xc[0]) {\n      y = new Big(x);\n    } else {\n      y.s = 1;\n    }\n    return y;\n  }\n\n  // Determine which is the bigger number. Prepend zeros to equalise exponents.\n  if (a = xe - ye) {\n\n    if (xlty = a < 0) {\n      a = -a;\n      t = xc;\n    } else {\n      ye = xe;\n      t = yc;\n    }\n\n    t.reverse();\n    for (b = a; b--;) t.push(0);\n    t.reverse();\n  } else {\n\n    // Exponents equal. Check digit by digit.\n    j = ((xlty = xc.length < yc.length) ? xc : yc).length;\n\n    for (a = b = 0; b < j; b++) {\n      if (xc[b] != yc[b]) {\n        xlty = xc[b] < yc[b];\n        break;\n      }\n    }\n  }\n\n  // x < y? Point xc to the array of the bigger number.\n  if (xlty) {\n    t = xc;\n    xc = yc;\n    yc = t;\n    y.s = -y.s;\n  }\n\n  /*\n   * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\n   * needs to start at yc.length.\n   */\n  if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\n\n  // Subtract yc from xc.\n  for (b = i; j > a;) {\n    if (xc[--j] < yc[j]) {\n      for (i = j; i && !xc[--i];) xc[i] = 9;\n      --xc[i];\n      xc[j] += 10;\n    }\n\n    xc[j] -= yc[j];\n  }\n\n  // Remove trailing zeros.\n  for (; xc[--b] === 0;) xc.pop();\n\n  // Remove leading zeros and adjust exponent accordingly.\n  for (; xc[0] === 0;) {\n    xc.shift();\n    --ye;\n  }\n\n  if (!xc[0]) {\n\n    // n - n = +0\n    y.s = 1;\n\n    // Result must be zero.\n    xc = [ye = 0];\n  }\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big modulo the value of Big y.\n */\nP.mod = function (y) {\n  var ygtx,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  if (!y.c[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  x.s = y.s = 1;\n  ygtx = y.cmp(x) == 1;\n  x.s = a;\n  y.s = b;\n\n  if (ygtx) return new Big(x);\n\n  a = Big.DP;\n  b = Big.RM;\n  Big.DP = Big.RM = 0;\n  x = x.div(y);\n  Big.DP = a;\n  Big.RM = b;\n\n  return this.minus(x.times(y));\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big negated.\n */\nP.neg = function () {\n  var x = new this.constructor(this);\n  x.s = -x.s;\n  return x;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big plus the value of Big y.\n */\nP.plus = P.add = function (y) {\n  var e, k, t,\n    x = this,\n    Big = x.constructor;\n\n  y = new Big(y);\n\n  // Signs differ?\n  if (x.s != y.s) {\n    y.s = -y.s;\n    return x.minus(y);\n  }\n\n  var xe = x.e,\n    xc = x.c,\n    ye = y.e,\n    yc = y.c;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (!yc[0]) {\n      if (xc[0]) {\n        y = new Big(x);\n      } else {\n        y.s = x.s;\n      }\n    }\n    return y;\n  }\n\n  xc = xc.slice();\n\n  // Prepend zeros to equalise exponents.\n  // Note: reverse faster than unshifts.\n  if (e = xe - ye) {\n    if (e > 0) {\n      ye = xe;\n      t = yc;\n    } else {\n      e = -e;\n      t = xc;\n    }\n\n    t.reverse();\n    for (; e--;) t.push(0);\n    t.reverse();\n  }\n\n  // Point xc to the longer array.\n  if (xc.length - yc.length < 0) {\n    t = yc;\n    yc = xc;\n    xc = t;\n  }\n\n  e = yc.length;\n\n  // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\n  for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\n\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\n\n  if (k) {\n    xc.unshift(k);\n    ++ye;\n  }\n\n  // Remove trailing zeros.\n  for (e = xc.length; xc[--e] === 0;) xc.pop();\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a Big whose value is the value of this Big raised to the power n.\n * If n is negative, round to a maximum of Big.DP decimal places using rounding\n * mode Big.RM.\n *\n * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\n */\nP.pow = function (n) {\n  var x = this,\n    one = new x.constructor('1'),\n    y = one,\n    isneg = n < 0;\n\n  if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\n    throw Error(INVALID + 'exponent');\n  }\n\n  if (isneg) n = -n;\n\n  for (;;) {\n    if (n & 1) y = y.times(x);\n    n >>= 1;\n    if (!n) break;\n    x = x.times(x);\n  }\n\n  return isneg ? one.div(y) : y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\n * significant digits using rounding mode rm, or Big.RM if rm is not specified.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.prec = function (sd, rm) {\n  if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n    throw Error(INVALID + 'precision');\n  }\n  return round(new this.constructor(this), sd, rm);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\n * using rounding mode rm, or Big.RM if rm is not specified.\n * If dp is negative, round to an integer which is a multiple of 10**-dp.\n * If dp is not specified, round to 0 decimal places.\n *\n * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.round = function (dp, rm) {\n  if (dp === UNDEFINED) dp = 0;\n  else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n  return round(new this.constructor(this), dp + this.e + 1, rm);\n};\n\n\n/*\n * Return a new Big whose value is the square root of the value of this Big, rounded, if\n * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.sqrt = function () {\n  var r, c, t,\n    x = this,\n    Big = x.constructor,\n    s = x.s,\n    e = x.e,\n    half = new Big('0.5');\n\n  // Zero?\n  if (!x.c[0]) return new Big(x);\n\n  // Negative?\n  if (s < 0) {\n    throw Error(NAME + 'No square root');\n  }\n\n  // Estimate.\n  s = Math.sqrt(x + '');\n\n  // Math.sqrt underflow/overflow?\n  // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\n  if (s === 0 || s === 1 / 0) {\n    c = x.c.join('');\n    if (!(c.length + e & 1)) c += '0';\n    s = Math.sqrt(c);\n    e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\n    r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\n  } else {\n    r = new Big(s + '');\n  }\n\n  e = r.e + (Big.DP += 4);\n\n  // Newton-Raphson iteration.\n  do {\n    t = r;\n    r = half.times(t.plus(x.div(t)));\n  } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\n\n  return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big times the value of Big y.\n */\nP.times = P.mul = function (y) {\n  var c,\n    x = this,\n    Big = x.constructor,\n    xc = x.c,\n    yc = (y = new Big(y)).c,\n    a = xc.length,\n    b = yc.length,\n    i = x.e,\n    j = y.e;\n\n  // Determine sign of result.\n  y.s = x.s == y.s ? 1 : -1;\n\n  // Return signed 0 if either 0.\n  if (!xc[0] || !yc[0]) {\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  // Initialise exponent of result as x.e + y.e.\n  y.e = i + j;\n\n  // If array xc has fewer digits than yc, swap xc and yc, and lengths.\n  if (a < b) {\n    c = xc;\n    xc = yc;\n    yc = c;\n    j = a;\n    a = b;\n    b = j;\n  }\n\n  // Initialise coefficient array of result with zeros.\n  for (c = new Array(j = a + b); j--;) c[j] = 0;\n\n  // Multiply.\n\n  // i is initially xc.length.\n  for (i = b; i--;) {\n    b = 0;\n\n    // a is yc.length.\n    for (j = a + i; j > i;) {\n\n      // Current sum of products at this digit position, plus carry.\n      b = c[j] + yc[i] * xc[j - i - 1] + b;\n      c[j--] = b % 10;\n\n      // carry\n      b = b / 10 | 0;\n    }\n\n    c[j] = b;\n  }\n\n  // Increment result exponent if there is a final carry, otherwise remove leading zero.\n  if (b) ++y.e;\n  else c.shift();\n\n  // Remove trailing zeros.\n  for (i = c.length; !c[--i];) c.pop();\n  y.c = c;\n\n  return y;\n};\n\n\n/*\n * Return a string representing the value of this Big in exponential notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toExponential = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), ++dp, rm);\n    for (; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, true, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big in normal notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n *\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\n */\nP.toFixed = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), dp + x.e + 1, rm);\n\n    // x.e may have changed if the value is rounded up.\n    for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, false, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Omit the sign for negative zero.\n */\nP[Symbol.for('nodejs.util.inspect.custom')] = P.toJSON = P.toString = function () {\n  var x = this,\n    Big = x.constructor;\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\n};\n\n\n/*\n * Return the value of this Big as a primitve number.\n */\nP.toNumber = function () {\n  var n = Number(stringify(this, true, true));\n  if (this.constructor.strict === true && !this.eq(n.toString())) {\n    throw Error(NAME + 'Imprecise conversion');\n  }\n  return n;\n};\n\n\n/*\n * Return a string representing the value of this Big rounded to sd significant digits using\n * rounding mode rm, or Big.RM if rm is not specified.\n * Use exponential notation if sd is less than the number of digits necessary to represent\n * the integer part of the value in normal notation.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toPrecision = function (sd, rm) {\n  var x = this,\n    Big = x.constructor,\n    n = x.c[0];\n\n  if (sd !== UNDEFINED) {\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n      throw Error(INVALID + 'precision');\n    }\n    x = round(new Big(x), sd, rm);\n    for (; x.c.length < sd;) x.c.push(0);\n  }\n\n  return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Include the sign for negative zero.\n */\nP.valueOf = function () {\n  var x = this,\n    Big = x.constructor;\n  if (Big.strict === true) {\n    throw Error(NAME + 'valueOf disallowed');\n  }\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\n};\n\n\n// Export\n\n\nexport var Big = _Big_();\n\n/// <reference types=\"https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/big.js/index.d.ts\" />\nexport default Big;\n","import safeExec from '../../util/safeExec';\nimport { fastRaf, throttleWith } from '../../util/schedulers';\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  void Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","// https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n\nexport default {\n  Element: {\n    props: [\n      'clientLeft', 'clientTop', 'clientWidth', 'clientHeight',\n      'scrollWidth', 'scrollHeight', 'scrollLeft', 'scrollTop',\n    ] as const,\n    methods: [\n      'getClientRects', 'getBoundingClientRect',\n      'scrollBy', 'scrollTo', 'scrollIntoView', 'scrollIntoViewIfNeeded',\n    ] as const,\n  },\n  HTMLElement: {\n    props: [\n      'offsetLeft', 'offsetTop', 'offsetWidth', 'offsetHeight', 'offsetParent',\n      'innerText',\n    ] as const,\n    methods: ['focus'] as const,\n  },\n  window: {\n    props: [\n      'scrollX', 'scrollY',\n      'innerHeight', 'innerWidth',\n    ] as const,\n    methods: ['getComputedStyle'] as const,\n  },\n  VisualViewport: {\n    props: [\n      'height', 'width', 'offsetTop', 'offsetLeft',\n    ] as const,\n  },\n  Document: {\n    props: ['scrollingElement'] as const,\n    methods: ['elementFromPoint'] as const,\n  },\n  HTMLInputElement: {\n    methods: ['select'] as const,\n  },\n  MouseEvent: {\n    props: ['layerX', 'layerY', 'offsetX', 'offsetY'] as const,\n  },\n  Range: {\n    methods: ['getClientRects', 'getBoundingClientRect'] as const,\n  },\n};\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nconst forcedMutationAllowedFor = new Set<Node>();\n\nexport function forceMutation(cb: () => any, nodes: Node | Node[]) {\n  if (phase !== 'measure') {\n    throw new Error('The current phase is \\'mutate\\'');\n  }\n\n  if (isStrict) {\n    if (Array.isArray(nodes)) {\n      nodes.forEach((node) => {\n        forcedMutationAllowedFor.add(node);\n      });\n    } else {\n      forcedMutationAllowedFor.add(nodes);\n    }\n  }\n\n  return cb();\n}\n\nexport function suppressStrict(cb: () => any) {\n  if (!isStrict) {\n    return cb();\n  }\n\n  disableStrict();\n  const result = cb();\n  enableStrict();\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        // eslint-disable-next-line func-names\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (forcedMutationAllowedFor.has(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        // eslint-disable-next-line no-console\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n\n    forcedMutationAllowedFor.clear();\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","export default class Deferred<T = void> {\n  promise: Promise<T>;\n\n  reject!: (reason?: any) => void;\n\n  resolve!: (value: T | PromiseLike<T>) => void;\n\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n  }\n\n  static resolved(): Deferred<void>;\n  static resolved<T>(value: T): Deferred<T>;\n  static resolved<T>(value?: T): Deferred<T | void> {\n    const deferred = new Deferred<T | void>();\n    deferred.resolve(value);\n    return deferred;\n  }\n}\n","import { bigintReviver } from './bigint';\nimport generateUniqueId from './generateUniqueId';\nimport { logDebugError } from './logs';\n\nexport interface CancellableCallback {\n  (\n    ...args: any[]\n  ): void;\n\n  isCanceled?: boolean;\n  acceptsBuffer?: boolean;\n}\n\ntype InitData = {\n  channel?: string;\n  type: 'init';\n  messageId?: string;\n  name: 'init';\n  args: any;\n};\n\ntype CallMethodData = {\n  channel?: string;\n  type: 'callMethod';\n  messageId?: string;\n  name: string;\n  args: any;\n  withCallback?: boolean;\n};\n\nexport type OriginMessageData = InitData | CallMethodData | {\n  channel?: string;\n  type: 'cancelProgress';\n  messageId: string;\n};\n\nexport interface OriginMessageEvent extends MessageEvent {\n  data: OriginMessageData;\n}\n\nexport type ApiUpdate =\n  { type: string }\n  & any;\n\nexport type WorkerMessageData = {\n  channel?: string;\n  type: 'update';\n  update: ApiUpdate;\n} | {\n  channel?: string;\n  type: 'methodResponse';\n  messageId: string;\n  response?: any;\n  error?: { message: string };\n} | {\n  channel?: string;\n  type: 'methodCallback';\n  messageId: string;\n  callbackArgs: any[];\n} | {\n  channel?: string;\n  type: 'unhandledError';\n  error?: { message: string; stack?: string };\n};\n\nexport interface WorkerMessageEvent {\n  data: WorkerMessageData;\n}\n\ninterface RequestStates {\n  messageId: string;\n  resolve: Function;\n  reject: Function;\n  callback: AnyToVoidFunction;\n}\n\ntype InputRequestTypes = Record<string, AnyFunction>;\n\ntype Values<T> = T[keyof T];\nexport type RequestTypes<T extends InputRequestTypes> = Values<{\n  [Name in keyof (T)]: {\n    name: Name & string;\n    args: Parameters<T[Name]>;\n  }\n}>;\n\nclass ConnectorClass<T extends InputRequestTypes> {\n  private requestStates = new Map<string, RequestStates>();\n\n  private requestStatesByCallback = new Map<AnyToVoidFunction, RequestStates>();\n\n  constructor(\n    public target: Worker | Window | chrome.runtime.Port | DedicatedWorkerGlobalScope,\n    private onUpdate?: (update: ApiUpdate) => void,\n    private channel?: string,\n    private shouldUseJson?: boolean,\n    private targetOrigin = '*',\n  ) {\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  public destroy() {\n  }\n\n  init(...args: any[]) {\n    this.postMessage({\n      type: 'init',\n      args,\n    });\n  }\n\n  request(messageData: RequestTypes<T>) {\n    const { requestStates, requestStatesByCallback } = this;\n\n    const messageId = generateUniqueId();\n    const payload: CallMethodData = {\n      type: 'callMethod',\n      messageId,\n      ...messageData,\n    };\n\n    const requestState = { messageId } as RequestStates;\n\n    // Re-wrap type because of `postMessage`\n    const promise: Promise<any> = new Promise((resolve, reject) => {\n      Object.assign(requestState, { resolve, reject });\n    });\n\n    if (typeof payload.args[payload.args.length - 1] === 'function') {\n      payload.withCallback = true;\n\n      const callback = payload.args.pop() as AnyToVoidFunction;\n      requestState.callback = callback;\n      requestStatesByCallback.set(callback, requestState);\n    }\n\n    requestStates.set(messageId, requestState);\n    promise\n      .catch(() => undefined)\n      .finally(() => {\n        requestStates.delete(messageId);\n\n        if (requestState.callback) {\n          requestStatesByCallback.delete(requestState.callback);\n        }\n      });\n\n    this.postMessage(payload);\n\n    return promise;\n  }\n\n  cancelCallback(progressCallback: CancellableCallback) {\n    progressCallback.isCanceled = true;\n\n    const { messageId } = this.requestStatesByCallback.get(progressCallback) || {};\n    if (!messageId) {\n      return;\n    }\n\n    this.postMessage({\n      type: 'cancelProgress',\n      messageId,\n    });\n  }\n\n  onMessage(data: WorkerMessageData | string) {\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data, bigintReviver) as WorkerMessageData;\n      } catch (err: any) {\n        logDebugError('PostMessageConnector: Failed to parse message', err);\n        return;\n      }\n    }\n\n    const { requestStates, channel } = this;\n    if (data.channel !== channel) {\n      return;\n    }\n\n    if (data.type === 'update' && this.onUpdate) {\n      this.onUpdate(data.update);\n    }\n    if (data.type === 'methodResponse') {\n      const requestState = requestStates.get(data.messageId);\n      if (requestState) {\n        if (data.error) {\n          requestState.reject(data.error);\n        } else {\n          requestState.resolve(data.response);\n        }\n      }\n    } else if (data.type === 'methodCallback') {\n      const requestState = requestStates.get(data.messageId);\n      requestState?.callback?.(...data.callbackArgs);\n    } else if (data.type === 'unhandledError') {\n      const error = new Error(data.error?.message);\n      if (data.error?.stack) {\n        error.stack = data.error.stack;\n      }\n      throw error;\n    }\n  }\n\n  private postMessage(data: AnyLiteral) {\n    data.channel = this.channel;\n\n    let rawData: AnyLiteral | string = data;\n    if (this.shouldUseJson) {\n      rawData = JSON.stringify(data);\n    }\n\n    if ('open' in this.target) { // Is Window\n      this.target.postMessage(rawData, this.targetOrigin);\n    } else {\n      this.target.postMessage(rawData);\n    }\n  }\n}\n\nexport function createConnector<T extends InputRequestTypes>(\n  worker: Worker | Window | DedicatedWorkerGlobalScope,\n  onUpdate?: (update: ApiUpdate) => void,\n  channel?: string,\n  targetOrigin?: string,\n) {\n  const connector = new ConnectorClass<T>(worker, onUpdate, channel, undefined, targetOrigin);\n\n  function handleMessage({ data }: WorkerMessageEvent | MessageEvent) {\n    connector.onMessage(data);\n  }\n\n  worker.addEventListener('message', handleMessage as any); // TS weirdly complains here\n\n  connector.destroy = () => {\n    worker.removeEventListener('message', handleMessage as any);\n  };\n\n  return connector;\n}\n\nexport function createExtensionConnector(\n  name: string,\n  onUpdate?: (update: ApiUpdate) => void,\n  getInitArgs?: () => any,\n  channel?: string,\n) {\n  const connector = new ConnectorClass(connect(), onUpdate, channel, true);\n\n  function connect() {\n    // eslint-disable-next-line no-restricted-globals\n    const port = self.chrome.runtime.connect({ name });\n\n    port.onMessage.addListener((data: string | WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connector.target = connect();\n      connector.init(getInitArgs?.());\n    });\n\n    return port;\n  }\n\n  connector.init(getInitArgs?.());\n\n  return connector;\n}\n\nexport type Connector<T extends InputRequestTypes = InputRequestTypes> = ReturnType<typeof createConnector<T>>;\n","import type { AccountIdParsed, ApiNetwork } from '../api/types';\n\nexport function parseAccountId(accountId: string): AccountIdParsed {\n  const parts = accountId.split('-');\n  const [id, network = 'mainnet'] = (parts.length === 3 ? [parts[0], parts[2]] : parts) as [string, ApiNetwork];\n  return { id: Number(id), network };\n}\n\nexport function buildAccountId(account: AccountIdParsed) {\n  const { id, network } = account;\n  return `${id}-${network}`;\n}\n","import type { Scheduler } from './schedulers';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\n\ninterface AnimationInstance {\n  isCancelled: boolean;\n}\n\nlet currentInstance: AnimationInstance | undefined;\n\nexport function animateSingle(tick: Function, schedulerFn: Scheduler, instance?: AnimationInstance) {\n  if (!instance) {\n    if (currentInstance && !currentInstance.isCancelled) {\n      currentInstance.isCancelled = true;\n    }\n\n    instance = { isCancelled: false };\n    currentInstance = instance;\n  }\n\n  if (!instance!.isCancelled && tick()) {\n    schedulerFn(() => {\n      animateSingle(tick, schedulerFn, instance);\n    });\n  }\n}\n\nexport function cancelSingleAnimation() {\n  const dumbScheduler = (cb: AnyFunction) => cb;\n  const dumbCb = () => undefined;\n\n  animateSingle(dumbCb, dumbScheduler);\n}\n\nexport function animate(tick: Function, schedulerFn: Scheduler) {\n  schedulerFn(() => {\n    if (tick()) {\n      animate(tick, schedulerFn);\n    }\n  });\n}\n\nexport function animateInstantly(tick: Function, schedulerFn: Scheduler) {\n  if (tick()) {\n    schedulerFn(() => {\n      animateInstantly(tick, schedulerFn);\n    });\n  }\n}\n\ntype TimingFn = (t: number) => number;\n\ntype AnimateNumberProps<T extends number | number[]> = {\n  to: T;\n  from: T;\n  duration: number;\n  onUpdate: (value: T) => void;\n  timing?: TimingFn;\n  onEnd?: (isCanceled?: boolean) => void;\n};\n\nexport const timingFunctions = {\n  linear: (t: number) => t,\n  easeIn: (t: number) => t ** 1.675,\n  easeOut: (t: number) => -1 * t ** 1.675,\n  easeInOut: (t: number) => 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1),\n  easeInQuad: (t: number) => t * t,\n  easeOutQuad: (t: number) => t * (2 - t),\n  easeInOutQuad: (t: number) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\n  easeInCubic: (t: number) => t ** 3,\n  easeOutCubic: (t: number) => (--t) * t * t + 1,\n  easeInOutCubic: (t: number) => (t < 0.5 ? 4 * t ** 3 : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1),\n  easeInQuart: (t: number) => t ** 4,\n  easeOutQuart: (t: number) => 1 - (--t) * t ** 3,\n  easeInOutQuart: (t: number) => (t < 0.5 ? 8 * t ** 4 : 1 - 8 * (--t) * t ** 3),\n  easeInQuint: (t: number) => t ** 5,\n  easeOutQuint: (t: number) => 1 + (--t) * t ** 4,\n  easeInOutQuint: (t: number) => (t < 0.5 ? 16 * t ** 5 : 1 + 16 * (--t) * t ** 4),\n};\n\nexport function animateNumber<T extends number | number[]>({\n  timing = timingFunctions.linear,\n  onUpdate,\n  duration,\n  onEnd,\n  from,\n  to,\n}: AnimateNumberProps<T>) {\n  const t0 = Date.now();\n\n  let isCanceled = false;\n\n  animateInstantly(() => {\n    if (isCanceled) return false;\n\n    const t1 = Date.now();\n    const t = Math.min((t1 - t0) / duration, 1);\n\n    const progress = timing(t);\n    if (typeof from === 'number' && typeof to === 'number') {\n      onUpdate((from + ((to - from) * progress)) as T);\n    } else if (Array.isArray(from) && Array.isArray(to)) {\n      const result = from.map((f, i) => f + ((to[i] - f) * progress));\n      onUpdate(result as T);\n    }\n\n    if (t === 1) {\n      onEnd?.();\n    }\n\n    return t < 1;\n  }, requestMeasure);\n\n  return () => {\n    isCanceled = true;\n    onEnd?.(true);\n  };\n}\n\nexport function applyStyles(element: HTMLElement, css: Record<string, string>) {\n  Object.assign(element.style, css);\n}\n","export class AssertionError extends Error {\n  constructor(\n    message: string,\n    // Any additional information for the error to help debug it. Don't put sensitive information here.\n    public metadata?: unknown,\n  ) {\n    super(message);\n  }\n}\n\nexport function assert(condition: boolean, message: string, metadata?: unknown) {\n  if (!condition) {\n    throw new AssertionError(message, metadata);\n  }\n}\n","import { ONE_TON } from '../config';\nimport { fromDecimal } from './decimals';\nimport { randomBytes } from './random';\n\nexport const BIGINT_PREFIX = 'bigint:';\n\nexport function bigintReviver(this: any, key: string, value: any) {\n  if (typeof value === 'string' && value.startsWith(BIGINT_PREFIX)) {\n    return BigInt(value.slice(7));\n  }\n  return value;\n}\n\nexport function bigintAbs(value: bigint) {\n  return value === -0n || value < 0n ? -value : value;\n}\n\nexport function bigintSum(values: bigint[]) {\n  let result = 0n;\n  for (const value of values) result += value;\n  return result;\n}\n\nexport function bigintDivideToNumber(value: bigint, num: number) {\n  return (value * ONE_TON) / fromDecimal(num);\n}\n\nexport function bigintMultiplyToNumber(value: bigint, num: number) {\n  return (value * fromDecimal(num)) / ONE_TON;\n}\n\nexport function bigintRandom(bytes: number) {\n  let value = BigInt(0);\n  for (const randomNumber of randomBytes(bytes)) {\n    const randomBigInt = BigInt(randomNumber);\n    // eslint-disable-next-line no-bitwise\n    value = (value << BigInt(8)) + randomBigInt;\n  }\n  return value;\n}\n\nexport function bigintCountBits(value: bigint) {\n  const binaryString = value.toString(2);\n  return binaryString.length;\n}\n\nexport function bigintMax(value0: bigint, value1: bigint) {\n  return value0 > value1 ? value0 : value1;\n}\n\nexport function bigintMin(value0: bigint, value1: bigint) {\n  return value0 < value1 ? value0 : value1;\n}\n\nexport function bigintMultiplePercent(value: bigint, percent: number) {\n  return (value * fromDecimal(percent / 100)) / ONE_TON;\n}\n","import type { LangCode } from '../global/types';\nimport type { LangFn } from './langProvider';\n\nimport withCache from './withCache';\n\nexport const SECOND = 1000;\nexport const MINUTE = SECOND * 60;\nexport const HOUR = MINUTE * 60;\nexport const DAY = HOUR * 24;\n\nconst formatDayToStringWithCache = withCache((\n  langCode: LangCode,\n  dayStartAt: number,\n  noYear?: boolean,\n  monthFormat: 'short' | 'long' | 'numeric' | false = 'short',\n  noDay?: boolean,\n  withTime = false,\n) => {\n  return new Date(dayStartAt).toLocaleString(\n    langCode,\n    {\n      year: noYear ? undefined : 'numeric',\n      month: monthFormat || undefined,\n      day: noDay ? undefined : 'numeric',\n      hour: withTime ? 'numeric' : undefined,\n      minute: withTime ? 'numeric' : undefined,\n      hourCycle: 'h23',\n    },\n  );\n});\n\nexport function formatRelativeHumanDateTime(\n  langCode: LangCode = 'en',\n  time: number,\n) {\n  const total = time - Date.now();\n  const minutes = Math.floor((total / 1000 / 60) % 60);\n  const hours = Math.floor((total / (1000 * 3600)) % 24);\n  const days = Math.floor(total / 1000 / 3600 / 24);\n\n  const rtf = new Intl.RelativeTimeFormat(langCode, {\n    localeMatcher: 'best fit',\n    numeric: 'always',\n    style: 'long',\n  });\n\n  const result: string[] = [];\n\n  if (days > 0) {\n    const [daysPlural, daysValue] = rtf.formatToParts(days, 'day').reverse();\n    result.push(`${daysValue.value}${daysPlural.value}`);\n  }\n  if (hours > 0) {\n    const [hoursPlural, hoursValue] = rtf.formatToParts(hours, 'hour').reverse();\n    result.push(`${hoursValue.value}${hoursPlural.value}`);\n  }\n  if (minutes > 0) {\n    const [minutesPlural, minutesValue] = rtf.formatToParts(minutes, 'minute').reverse();\n    result.push(`${minutesValue.value}${minutesPlural.value}`);\n  }\n\n  return result.join(' ');\n}\n\nexport function formatHumanDay(lang: LangFn, datetime: string | number) {\n  if (isToday(datetime)) {\n    return lang('Today');\n  }\n\n  if (isYesterday(datetime)) {\n    return lang('Yesterday');\n  }\n\n  return formatFullDay(lang.code!, datetime);\n}\n\nexport function formatFullDay(langCode: LangCode, datetime: string | number | Date) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const noYear = date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, dayStartAt, noYear, 'long');\n}\n\nexport function formatShortDay(langCode: LangCode, datetime: string | number | Date, withTime = false, noYear = false) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const todayStartAt = getDayStartAt(today);\n  const noDate = withTime && dayStartAt === todayStartAt;\n  const targetAt = withTime ? getMinuteStart(date).getTime() : dayStartAt;\n\n  noYear ||= date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, targetAt, noYear, !noDate && 'short', noDate, withTime);\n}\n\nexport function formatTime(datetime: string | number) {\n  const date = new Date(datetime);\n\n  return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n}\n\nexport function getCountDaysToDate(datetime: string | number | Date) {\n  const today = new Date();\n  const date = datetime instanceof Date ? datetime\n    : new Date(datetime);\n\n  return Math.ceil((date.getTime() - today.getTime()) / DAY);\n}\n\nexport function getDayStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}\n\nexport function getDayStartAt(datetime: number | Date) {\n  return getDayStart(datetime).getTime();\n}\n\nexport function getMinuteStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setSeconds(0, 0);\n  return date;\n}\n\nfunction isToday(datetime: string | number) {\n  return getDayStartAt(new Date()) === getDayStartAt(new Date(datetime));\n}\n\nfunction isYesterday(datetime: string | number) {\n  const yesterday = new Date();\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  return getDayStartAt(yesterday) === getDayStartAt(new Date(datetime));\n}\n","import { TONCOIN } from '../config';\nimport { Big } from '../lib/big.js';\n\nBig.RM = 0; // RoundDown\nBig.NE = -100000; // Disable exponential form\nBig.PE = 100000; // Disable exponential form\n\nconst ten = Big(10);\n\nexport function fromDecimal(value: string | number, decimals?: number) {\n  return BigInt(Big(value).mul(ten.pow(decimals ?? TONCOIN.decimals)).round().toString());\n}\n\nexport function toDecimal(value: bigint | number, decimals?: number, noFloor = false) {\n  return toBig(value, decimals ?? TONCOIN.decimals, noFloor).toString();\n}\n\nexport function toBig(value: bigint | number, decimals: number = TONCOIN.decimals, noFloor = false) {\n  return Big(value.toString()).div(ten.pow(decimals)).round(decimals, noFloor ? Big.roundHalfUp : undefined);\n}\n\nexport function roundDecimal(value: string, decimals: number) {\n  return Big(value).round(decimals).toString();\n}\n","import { IS_CORE_WALLET, TON_DNS_ZONES } from '../config';\n\nexport function isDnsDomain(value: string) {\n  return getDnsDomainZone(value) !== undefined;\n}\n\nexport function getDnsDomainZone(domain: string) {\n  for (const zone of TON_DNS_ZONES) {\n    const { suffixes, baseFormat, isUnofficial } = zone;\n\n    if (IS_CORE_WALLET && isUnofficial) {\n      continue;\n    }\n\n    // Iterating the zones in reverse to prioritize longer zones when multiple zones match (assuming the zones go from\n    // the shortest to the longest). For example, `test.ton.vip` matches both `vip` and `ton.vip`, and `ton.vip` must be\n    // used.\n    for (let i = suffixes.length - 1; i >= 0; i--) {\n      const suffix = suffixes[i];\n      if (!domain.endsWith(`.${suffix}`)) {\n        continue;\n      }\n\n      const base = domain.slice(0, -suffix.length - 1);\n      if (!baseFormat.test(base)) {\n        continue;\n      }\n\n      return { base, zone };\n    }\n  }\n\n  return undefined;\n}\n\nexport function getDnsZoneByCollection(collectionAddress: string) {\n  if (IS_CORE_WALLET) {\n    return TON_DNS_ZONES.find((zone) => zone.resolver === collectionAddress && !zone.isUnofficial);\n  }\n  return TON_DNS_ZONES.find((zone) => zone.resolver === collectionAddress);\n}\n","import { IS_EXTENSION } from '../config';\n\nexport const IS_EXTENSION_PAGE_SCRIPT = IS_EXTENSION\n  // eslint-disable-next-line no-restricted-globals\n  && !['chrome-extension:', 'moz-extension:'].includes(self.location.protocol);\n","export default function generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2);\n}\n","export function getPlatform() {\n  const { userAgent, platform } = window.navigator;\n\n  if (/Android/.test(userAgent)) return 'Android';\n\n  if (/Linux/.test(platform)) return 'Linux';\n\n  const iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  if (\n    iosPlatforms.indexOf(platform) !== -1\n        // For new IPads with M1 chip and IPadOS platform returns \"MacIntel\"\n        || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2))\n  ) {\n    return 'iOS';\n  }\n\n  const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  if (macosPlatforms.indexOf(platform) !== -1) return 'macOS';\n\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  if (windowsPlatforms.indexOf(platform) !== -1) return 'Windows';\n\n  return undefined;\n}\n","import { APP_ENV, DEBUG_ALERT_MSG } from '../config';\nimport { SECOND } from './dateFormat';\nimport { IS_EXTENSION_PAGE_SCRIPT } from './environment';\nimport { logDebugError } from './logs';\nimport { throttle } from './schedulers';\n\nconst shouldShowAlert = (APP_ENV === 'development' || APP_ENV === 'staging')\n  && typeof window === 'object'\n  && !IS_EXTENSION_PAGE_SCRIPT;\n\n// eslint-disable-next-line no-alert\nconst throttledAlert = throttle((message) => window.alert(message), 10 * SECOND);\n\n// eslint-disable-next-line no-restricted-globals\nself.addEventListener('error', handleErrorEvent);\n// eslint-disable-next-line no-restricted-globals\nself.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nexport function handleError(err: Error | string) {\n  logDebugError('handleError', err);\n\n  const message = typeof err === 'string' ? err : err.message;\n  const stack = typeof err === 'object' ? err.stack : undefined;\n\n  if (message.endsWith('Failed to import rlottie-wasm.js')) {\n    return;\n  }\n\n  if (shouldShowAlert) {\n    throttledAlert(`${DEBUG_ALERT_MSG}\\n\\n${(message) || err}\\n${stack}`);\n  }\n}\n","type CollectionByKey<Member> = Record<number | string, Member>;\ntype GroupedByKey<Member> = Record<number | string, Member[]>;\n\ntype OrderDirection =\n  'asc'\n  | 'desc';\n\ninterface OrderCallback<T> {\n  (member: T): any;\n}\n\nexport function buildCollectionByKey<T extends AnyLiteral>(collection: T[], key: keyof T): CollectionByKey<T> {\n  return collection.reduce((byKey: CollectionByKey<T>, member: T) => {\n    byKey[member[key]] = member;\n\n    return byKey;\n  }, {});\n}\n\nexport function groupBy<T extends AnyLiteral>(collection: T[], key: keyof T): GroupedByKey<T> {\n  return collection.reduce((byKey: GroupedByKey<T>, member: T) => {\n    const groupKey = member[key];\n\n    if (!byKey[groupKey]) {\n      byKey[groupKey] = [member];\n    } else {\n      byKey[groupKey]!.push(member);\n    }\n\n    return byKey;\n  }, {});\n}\n\nexport function mapValues<R extends any, M extends any>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => R,\n): CollectionByKey<R> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<R>, key, index) => {\n    newByKey[key] = callback(byKey[key], key, index, byKey);\n    return newByKey;\n  }, {});\n}\n\nexport function pick<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    result[key] = object[key];\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function pickTruthy<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    if (object[key]) {\n      result[key] = object[key];\n    }\n\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function omit<T extends object, K extends keyof T>(object: T, keys: K[]): Omit<T, K> {\n  const stringKeys = new Set(keys.map(String));\n  const savedKeys = Object.keys(object)\n    .filter((key) => !stringKeys.has(key)) as Array<Exclude<keyof T, K>>;\n\n  return pick(object, savedKeys);\n}\n\nexport function omitUndefined<T extends object>(object: T): T {\n  return Object.keys(object).reduce((result, stringKey) => {\n    const key = stringKey as keyof T;\n    if (object[key] !== undefined) {\n      result[key as keyof T] = object[key];\n    }\n    return result;\n  }, {} as T);\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    if (aValue === bValue) return 0;\n\n    const condition = isAsc ? aValue > bValue : aValue < bValue;\n    return condition ? 1 : -1;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T extends any>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function compact<T extends any>(array: T[]) {\n  return array.filter(Boolean);\n}\n\nexport function areSortedArraysEqual(array1: any[], array2: any[]) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => item === array2[i]);\n}\n\nexport function split<T extends any>(array: T[], chunkSize: number) {\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n\nexport function cloneDeep<T>(value: T): T {\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(cloneDeep) as typeof value;\n  }\n\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key as keyof T] = cloneDeep(value[key as keyof T]);\n    return acc;\n  }, {} as T);\n}\n\nexport function isLiteralObject(value: any): value is AnyLiteral {\n  return isObject(value) && !Array.isArray(value);\n}\n\nfunction isObject(value: any): value is object {\n  // eslint-disable-next-line no-null/no-null\n  return typeof value === 'object' && value !== null;\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): T | undefined {\n  let cursor = array.length;\n\n  while (cursor--) {\n    if (predicate(array[cursor], cursor, array)) {\n      return array[cursor];\n    }\n  }\n\n  return undefined;\n}\n\nexport function range(start: number, end: number) {\n  const arr: number[] = [];\n  for (let i = start; i < end;) {\n    arr.push(i++);\n  }\n  return arr;\n}\n\nexport function fromKeyValueArrays<T>(keys: string[], values: T[] | T) {\n  return keys.reduce((acc, key, index) => {\n    acc[key] = Array.isArray(values) ? values[index] : values;\n    return acc;\n  }, {} as Record<string, T>);\n}\n\nexport function extractKey<T, K extends keyof T>(array: T[], key: K): T[K][] {\n  return array.map((value) => value[key]);\n}\n\nexport function findDifference<T>(array1: T[], array2: T[]): T[] {\n  const set2 = new Set(array2);\n\n  return array1.filter((element) => !set2.has(element));\n}\n\nexport function filterValues<M extends any>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => boolean,\n): CollectionByKey<M> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<M>, key, index) => {\n    if (callback(byKey[key], key, index, byKey)) {\n      newByKey[key] = byKey[key];\n    }\n\n    return newByKey;\n  }, {});\n}\n\nexport function uniqueByKey<T>(array: T[], key: keyof T, shouldKeepFirst?: boolean) {\n  if (shouldKeepFirst) {\n    array = Array.from(array);\n    array.reverse();\n  }\n\n  const result = [...new Map(array.map((item) => [item[key], item])).values()];\n\n  if (shouldKeepFirst) {\n    result.reverse();\n  }\n\n  return result;\n}\n\nexport function difference<T>(x: Set<T>, y: Set<T>): Set<T> {\n  const result = new Set(x);\n  for (const elem of y) {\n    result.delete(elem);\n  }\n  return result;\n}\n\nexport function intersection<T>(x: Set<T>, y: Set<T>): Set<T> {\n  const result = new Set<T>();\n  for (const elem of y) {\n    if (x.has(elem)) {\n      result.add(elem);\n    }\n  }\n  return result;\n}\n","import type { MediaWorkerApi } from '../lib/mediaWorker/index.worker';\nimport type { Connector } from './PostMessageConnector';\n\nimport { IS_TEST } from '../config';\n\nimport { createConnector } from './PostMessageConnector';\n\nexport const MAX_WORKERS = Math.min(navigator.hardwareConcurrency || 4, 4);\n\nlet instances: {\n  worker: Worker;\n  connector: Connector<MediaWorkerApi>;\n}[] | undefined;\n\nexport default function launchMediaWorkers() {\n  if (IS_TEST) return [];\n  if (!instances) {\n    instances = new Array(MAX_WORKERS).fill(undefined).map(\n      () => {\n        const worker = new Worker(new URL('../lib/mediaWorker/index.worker.ts', import.meta.url));\n        const connector = createConnector<MediaWorkerApi>(worker);\n        return { worker, connector };\n      },\n    );\n  }\n\n  return instances;\n}\n\nexport function requestMediaWorker(payload: Parameters<Connector<MediaWorkerApi>['request']>[0], index: number) {\n  return launchMediaWorkers()[index].connector.request(payload);\n}\n","import { isAscii } from '../stringFormat';\n\nconst MAX_COMMENT_SIZE = 120;\nconst BROKEN_CONNECTION_ERRORS = new Set(['DisconnectedDeviceDuringOperation', 'TransportRaceCondition']);\n\nexport function isValidLedgerComment(comment: string) {\n  return isAscii(comment) && isLedgerCommentLengthValid(comment);\n}\n\nexport function isLedgerCommentLengthValid(comment: string) {\n  return comment.length <= MAX_COMMENT_SIZE;\n}\n\nexport function isLedgerConnectionBroken(error: string) {\n  return BROKEN_CONNECTION_ERRORS.has(error);\n}\n","export function isAscii(str: string) {\n  for (let i = 0; i < str.length; i++) {\n    if (str.charCodeAt(i) > 127) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function insertSubstring(str: string, start: number, newSubStr: string) {\n  if (start < 0) {\n    start = str.length - start;\n  }\n  return str.slice(0, start) + newSubStr + str.slice(start);\n}\n\nexport function hexToString(hex: string): string {\n  let result = '';\n  for (let i = 0; i < hex.length; i += 2) {\n    result += String.fromCharCode(parseInt(hex.slice(i, i + 2), 16));\n  }\n\n  return result;\n}\n","import { DEBUG, DEBUG_API } from '../config';\nimport { AssertionError } from './assert';\nimport { omit } from './iteratees';\n\nexport interface Log {\n  message: string;\n  args: any[];\n  time: Date;\n  level: 'debug' | 'debugError';\n}\n\nconst MAX_LOG_LENGTH = 999;\nconst logs: Log[] = [];\n\nexport function errorReplacer(_: string, value: any) {\n  if (value instanceof Error) {\n    return {\n      name: value.name,\n      message: value.message,\n      stack: value.stack,\n      metadata: value instanceof AssertionError ? value.metadata : undefined,\n    };\n  }\n  return value;\n}\n\nexport function addLog(log: Omit<Log, 'time'>) {\n  if (logs.length > MAX_LOG_LENGTH) {\n    logs.shift();\n  }\n\n  logs.push({\n    ...log,\n    args: log.args.map((arg) => JSON.stringify(arg, errorReplacer)),\n    time: new Date(),\n  });\n}\n\nexport function getLogs() {\n  return logs;\n}\n\nexport function logActionHandling(name: string, payload?: any) {\n  if (!DEBUG_API) return;\n  if (name === 'apiUpdate') {\n    if (typeof payload?.type === 'string' && payload.type !== 'updatingStatus') {\n      logDebugApi(`Update: ${payload.type}`, omit(payload, ['type']));\n    }\n  } else {\n    logDebugApi(`Action: ${name}`, payload);\n  }\n}\n\nexport function logDebugError(message: string, ...args: any[]) {\n  addLog({ message, level: 'debugError', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.error(`[DEBUG][${message}]`, ...args);\n  }\n}\n\nexport function logDebug(message: any, ...args: any[]) {\n  addLog({ message, level: 'debug', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log(`[DEBUG] ${message}`, ...args);\n  }\n}\n\nexport function logDebugApi(message: any, obj1: any, obj2?: any) {\n  if (DEBUG_API) {\n    // eslint-disable-next-line no-console\n    console.debug(`[DEBUG] ${message}`);\n    // eslint-disable-next-line no-console\n    if (obj1) console.dir(obj1);\n    // eslint-disable-next-line no-console\n    if (obj2) console.dir(obj2);\n  }\n}\n\nexport function logSelfXssWarnings() {\n  const selfXssWarnings: AnyLiteral = {\n    en: 'WARNING! This console can be a way for bad people to take over your crypto wallet through something called '\n        + 'a Self-XSS attack. So, don\\'t put in or paste code you don\\'t understand. Stay safe!',\n    ru: '!             '\n        + '  Self-XSS.       ,    .  !',\n    es: 'ADVERTENCIA! Esta consola puede ser una forma en que las personas malintencionadas se apoderen de su '\n        + 'billetera de criptomonedas mediante un ataque llamado Self-XSS. Por lo tanto, '\n        + 'no introduzca ni pegue cdigo que no comprenda. Cudese!',\n    zh: 'Self-XSS',\n  };\n\n  const langCode = navigator.language.split('-')[0];\n  const text = selfXssWarnings[langCode] || selfXssWarnings.en;\n\n  // eslint-disable-next-line no-console\n  console.log('%c%s', 'color: red; background: yellow; font-size: 18px;', text);\n}\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\ntype SafeExecOptions = {\n  rescue?: (err: Error) => void;\n  always?: NoneToVoidFunction;\n  shouldIgnoreError?: boolean;\n};\n\nexport async function safeExecAsync<T extends AnyAsyncFunction>(\n  cb: T,\n  options?: SafeExecOptions,\n): Promise<ReturnType<T> | undefined> {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return await cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n\nexport default function safeExec<T extends AnyFunction>(cb: T, options?: SafeExecOptions): ReturnType<T> | undefined {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 35; // < 30 FPS\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    void Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nconst IDLE_TIMEOUT = 500;\n\nlet onIdleCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onIdle(callback: NoneToVoidFunction) {\n  // eslint-disable-next-line no-restricted-globals\n  if (!self.requestIdleCallback) {\n    onTickEnd(callback);\n    return;\n  }\n\n  if (!onIdleCallbacks) {\n    onIdleCallbacks = [callback];\n\n    requestIdleCallback((deadline) => {\n      const currentCallbacks = onIdleCallbacks!;\n      onIdleCallbacks = undefined;\n\n      while (currentCallbacks.length) {\n        const cb = currentCallbacks.shift()!;\n        cb();\n\n        if (!deadline.timeRemaining()) break;\n      }\n\n      if (currentCallbacks.length) {\n        if (onIdleCallbacks) {\n          // Prepend the remaining callbacks if the next pass is already planned\n          onIdleCallbacks = currentCallbacks.concat(onIdleCallbacks);\n        } else {\n          currentCallbacks.forEach(onIdle);\n        }\n      }\n    }, { timeout: IDLE_TIMEOUT });\n  } else {\n    onIdleCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n\nexport async function waitFor(cb: () => boolean, interval: number, attempts: number) {\n  let i = 0;\n  let result = cb();\n\n  while (!result && i < attempts) {\n    await pause(interval);\n\n    i++;\n    result = cb();\n  }\n\n  return result;\n}\n","import type { LangCode } from '../global/types';\n\nimport {\n  IS_CAPACITOR, IS_CORE_WALLET, IS_EXTENSION, IS_FIREFOX_EXTENSION, IS_TELEGRAM_APP, LANG_LIST,\n} from '../config';\nimport { requestForcedReflow } from '../lib/fasterdom/fasterdom';\nimport { getPlatform } from './getPlatform';\n\nconst TELEGRAM_MOBILE_PLATFORM = new Set(['android', 'android_x', 'ios']);\n\nfunction isIPad() {\n  const { userAgent, platform } = window.navigator;\n  return platform === 'iPad'\n    || userAgent.includes('iPad')\n    || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2));\n}\n\nfunction getBrowserLanguage(): LangCode {\n  if (IS_CORE_WALLET) return 'en';\n\n  const { language } = navigator;\n  const lang = language.startsWith('zh')\n    ? (language.endsWith('TW') || language.endsWith('HK') ? 'zh-Hant' : 'zh-Hans')\n    : language.substring(0, 2);\n\n  return (LANG_LIST.some(({ langCode }) => langCode === lang) ? lang : 'en') as LangCode;\n}\n\nexport const IS_PWA = (\n  window.matchMedia('(display-mode: standalone)').matches\n  || (window.navigator as any).standalone\n  || document.referrer.includes('android-app://')\n);\n\nexport const PLATFORM_ENV = getPlatform();\nexport const IS_MAC_OS = PLATFORM_ENV === 'macOS';\nexport const IS_WINDOWS = PLATFORM_ENV === 'Windows';\nexport const IS_LINUX = PLATFORM_ENV === 'Linux';\nexport const IS_IOS = PLATFORM_ENV === 'iOS';\nexport const IS_ANDROID = PLATFORM_ENV === 'Android';\nexport const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nexport const IS_OPERA = navigator.userAgent.includes(' OPR/');\nexport const IS_EDGE = navigator.userAgent.includes(' Edg/');\nexport const IS_FIREFOX = navigator.userAgent.includes('Firefox/');\nexport const IS_TOUCH_ENV = window.matchMedia('(pointer: coarse)').matches;\nexport const IS_CHROME_EXTENSION = Boolean(window.chrome?.system);\nexport const IS_ELECTRON = Boolean(window.electron);\nexport const IS_WEB = !IS_CAPACITOR && !IS_ELECTRON && !IS_EXTENSION && !IS_TELEGRAM_APP;\nexport const DEFAULT_LANG_CODE = 'en';\nexport const USER_AGENT_LANG_CODE = getBrowserLanguage();\nexport const DPR = window.devicePixelRatio || 1;\nexport const IS_LEDGER_SUPPORTED = IS_CAPACITOR\n  || !(IS_CORE_WALLET || IS_IOS || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\nexport const IS_LEDGER_EXTENSION_TAB = global.location.hash.startsWith('#detached');\n// Disable biometric auth on electron for now until this issue is fixed:\n// https://github.com/electron/electron/issues/24573\nexport const IS_BIOMETRIC_AUTH_SUPPORTED = Boolean(\n  !IS_CAPACITOR && !IS_TELEGRAM_APP && window.navigator.credentials && (!IS_ELECTRON || IS_MAC_OS),\n);\nexport const IS_DELEGATED_BOTTOM_SHEET = IS_CAPACITOR && global.location.search.startsWith('?bottom-sheet');\nexport const IS_DELEGATING_BOTTOM_SHEET = IS_CAPACITOR && IS_IOS && !IS_DELEGATED_BOTTOM_SHEET && !isIPad();\nexport const IS_MULTITAB_SUPPORTED = 'BroadcastChannel' in window && !IS_LEDGER_EXTENSION_TAB;\nexport const IS_DAPP_SUPPORTED = IS_EXTENSION || IS_ELECTRON || IS_CAPACITOR;\nexport const IS_IOS_APP = IS_IOS && IS_CAPACITOR;\nexport const IS_ANDROID_APP = IS_ANDROID && IS_CAPACITOR;\n\n// Note: As of 27-11-2023, Firefox does not support readText()\n// Note: As of 22-02-2023, clipboard functionality is only available to the Telegram partners\n// https://github.com/Telegram-Mini-Apps/telegram-apps/issues/609#issuecomment-2571435311\nexport const IS_CLIPBOARDS_SUPPORTED = !(IS_FIREFOX || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\n\nexport const REM = parseInt(getComputedStyle(document.documentElement).fontSize, 10);\nexport const STICKY_CARD_INTERSECTION_THRESHOLD = -3.75 * REM;\n\nexport function setScrollbarWidthProperty() {\n  const el = document.createElement('div');\n  el.style.cssText = 'overflow-x: hidden; overflow-y: scroll; visibility:hidden; position:absolute;';\n  el.classList.add('custom-scroll');\n  document.body.appendChild(el);\n\n  requestForcedReflow(() => {\n    const width = el.offsetWidth - el.clientWidth;\n\n    return () => {\n      document.documentElement.style.setProperty('--scrollbar-width', `${width}px`);\n      el.remove();\n    };\n  });\n}\n\nexport function getIsMobileTelegramApp() {\n  return IS_TELEGRAM_APP && TELEGRAM_MOBILE_PLATFORM.has(window.Telegram?.WebApp.platform ?? '');\n}\n","import type { SecureStoragePluginPlugin } from 'capacitor-secure-storage-plugin';\n\nimport type { StorageKey } from '../../../api/storages/types';\n\nimport { IS_CAPACITOR } from '../../../config';\n\nlet SecureStoragePlugin: SecureStoragePluginPlugin | undefined;\nlet resolvePromise: AnyFunction;\n\nconst promise = new Promise((resolve) => {\n  resolvePromise = resolve;\n});\n\nexport async function init() {\n  if (IS_CAPACITOR && !SecureStoragePlugin) {\n    ({ SecureStoragePlugin } = await import(\n      /* webpackChunkName: \"capacitorSecureStorage\" */ 'capacitor-secure-storage-plugin'\n    ));\n    resolvePromise();\n  }\n}\n\nexport async function capacitorStorageGetItem(key: StorageKey) {\n  await promise;\n  return (await SecureStoragePlugin!.get({ key }).catch((err) => {\n    const message = typeof err === 'string' ? err : err.message;\n    if (message.includes('key does not exist')) {\n      return undefined;\n    } else {\n      throw err;\n    }\n  }))?.value;\n}\n\nexport async function capacitorStorageSetItem(key: StorageKey, value: string) {\n  await promise;\n  return SecureStoragePlugin!.set({ key, value });\n}\n\nexport async function capacitorStorageRemoveItem(key: StorageKey) {\n  await promise;\n  return SecureStoragePlugin!.remove({ key });\n}\n\nexport async function capacitorStorageClear() {\n  await promise;\n  return SecureStoragePlugin!.clear();\n}\n\nexport async function capacitorStorageKeys() {\n  await promise;\n  return SecureStoragePlugin!.keys();\n}\n","import { pick } from '../../iteratees';\n\nexport function localStorageGetItem(key: string) {\n  return localStorage.getItem(key);\n}\n\nexport function localStorageSetItem(key: string, value: string) {\n  return localStorage.setItem(key, value);\n}\n\nexport function localStorageRemoveItem(key: string) {\n  return localStorage.removeItem(key);\n}\n\nexport function localStorageClear() {\n  return localStorage.clear();\n}\n\nexport function localStorageGetAll() {\n  return { ...localStorage };\n}\n\nexport function localStorageGetMany(keys: string[]) {\n  return pick(localStorage, keys);\n}\n\nexport function localStorageSetMany(items: AnyLiteral) {\n  Object.assign(localStorage, items);\n}\n","const cache = new WeakMap<AnyFunction, Map<string, any>>();\n\nexport default function withCache<T extends AnyFunction>(fn: T) {\n  return (...args: Parameters<T>): ReturnType<T> => {\n    let fnCache = cache.get(fn);\n    const cacheKey = args.map(String).join('_');\n\n    if (fnCache) {\n      const cached = fnCache.get(cacheKey);\n      if (cached) {\n        return cached;\n      }\n    } else {\n      fnCache = new Map();\n      cache.set(fn, fnCache);\n    }\n\n    const newValue = fn(...args);\n\n    fnCache.set(cacheKey, newValue);\n\n    return newValue;\n  };\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"82\":\"10cb53e3e4914ed789c7\",\"88\":\"7469cde2e48fcea342fb\",\"104\":\"337a5d5347e427590af0\",\"148\":\"c93ab213da47a1c69bbc\",\"168\":\"3ef51449bff845cd930a\",\"196\":\"62cfcca245779edde795\",\"201\":\"8f9951bc8d270f397709\",\"215\":\"a3b70a2b4c9e8aab47e4\",\"232\":\"f2635cf6cd72a03137ee\",\"283\":\"56e93ec75336cca60952\",\"408\":\"d7d8d41d5dce10d243c5\",\"432\":\"20e0779b7ab1bb47c229\",\"477\":\"473346bae74b64f8b62c\",\"494\":\"2a76b4246c2b484142fb\",\"513\":\"bc27336d82f09051f2ac\",\"542\":\"2d167587e3aa4f5d2b58\",\"564\":\"308caacb4e9cac966aff\",\"580\":\"4f7727668847f6a39dfc\",\"612\":\"5f5efe45c362ef7fd524\",\"642\":\"9007550c7ebac81578d0\",\"771\":\"ae36771e22d590ba4423\",\"776\":\"45feed3695ebbd842676\",\"789\":\"293e03235c8d79348a71\",\"884\":\"ca0c5df5be9516ea7f6b\",\"895\":\"8f12ef95ea8874f9ec0b\",\"934\":\"bf9ab69d4ed2b12bef56\",\"941\":\"2fdddae7403cbdef81d1\",\"949\":\"8525865be185f1bf25b5\",\"956\":\"bc42ad757a7d6b976cd7\",\"988\":\"c70df95cb3aae0eab0d3\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmytonwallet\"] = self[\"webpackChunkmytonwallet\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function logUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral, msg: string, debugKey = '') {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    // eslint-disable-next-line no-console\n    console.log(`${msg} LENGTH`);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log(msg);\n  currentKeys.forEach((prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      // eslint-disable-next-line no-console\n      console.log(debugKey, prop, ':', currentProps[prop], '=>', newProps[prop]);\n    }\n  });\n}\n","import { animate } from './animation';\nimport { fastRaf, throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\nconst BG_GREEN = ' style=\"background: lightgreen\"';\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.innerHTML += `${dateFormatted}: ${text}<br/>`;\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .map(([key, { value, lastUpdateAt }]) => ([\n      `<div style=\"background: #ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}\">`,\n      `  <span${lastUpdateAt > halfSecondAgo ? BG_GREEN : ''}>${key}: ${Math.round(value)}</span>`,\n      '</div>',\n    ].join('\\n')))\n    .join('\\n');\n}\n\nexport function debugFps() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  let ticks: number[] = [];\n  let lastFrameAt = performance.now();\n\n  animate(() => {\n    const now = performance.now();\n    ticks.push(now - lastFrameAt);\n    lastFrameAt = now;\n\n    if (ticks.length > 100) {\n      ticks = ticks.slice(-100);\n    }\n\n    const avg = ticks.reduce((acc, t) => acc + t, 0) / ticks.length;\n    loggerEl!.innerHTML = `${Math.round(1000 / avg)} FPS`;\n    return true;\n  }, fastRaf);\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 50px; color: black;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n\nexport class EventEmitter {\n  private channels = new Map<string, CallbackManager>();\n\n  on(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).addCallback(handler);\n    return this;\n  }\n\n  removeListener(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).removeCallback(handler);\n    return this;\n  }\n\n  emit(name: string, ...args: any) {\n    this.resolveChannel(name).runCallbacks(...args);\n    return this;\n  }\n\n  private resolveChannel(name: string) {\n    let channel = this.channels.get(name);\n    if (!channel) {\n      channel = createCallbackManager();\n      this.channels.set(name, channel);\n    }\n\n    return channel;\n  }\n}\n","import type { CallbackManager } from './callbacks';\n\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = any> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: NoneToVoidFunction) => NoneToVoidFunction;\n  once: (cb: NoneToVoidFunction) => NoneToVoidFunction;\n});\n\nexport type SignalSetter = (newValue: any) => void;\n\nexport function isSignal(obj: any): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function once(effect: NoneToVoidFunction) {\n    const unsub = subscribe(() => {\n      unsub();\n      effect();\n    });\n\n    return unsub;\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n    once,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","import { onIdle, throttleWith } from '../../util/schedulers';\nimport { createSignal } from '../../util/signals';\nimport { requestMeasure } from '../fasterdom/fasterdom';\n\nconst AUTO_END_TIMEOUT = 1000;\n\nlet counter = 0;\nlet counterBlocking = 0;\n\nconst [getIsAnimating, setIsAnimating] = createSignal(false);\nconst [getIsBlockingAnimating, setIsBlockingAnimating] = createSignal(false);\n\nexport const getIsHeavyAnimating = getIsAnimating;\nexport { getIsBlockingAnimating };\n\nexport function beginHeavyAnimation(duration = AUTO_END_TIMEOUT, isBlocking = false) {\n  counter++;\n\n  if (counter === 1) {\n    setIsAnimating(true);\n  }\n\n  if (isBlocking) {\n    counterBlocking++;\n\n    if (counterBlocking === 1) {\n      setIsBlockingAnimating(true);\n    }\n  }\n\n  const timeout = window.setTimeout(onEnd, duration);\n\n  let hasEnded = false;\n\n  function onEnd() {\n    if (hasEnded) return;\n    hasEnded = true;\n\n    clearTimeout(timeout);\n\n    counter--;\n\n    if (counter === 0) {\n      setIsAnimating(false);\n    }\n\n    if (isBlocking) {\n      counterBlocking--;\n\n      if (counterBlocking === 0) {\n        setIsBlockingAnimating(false);\n      }\n    }\n  }\n\n  return onEnd;\n}\n\nexport function onFullyIdle(cb: NoneToVoidFunction) {\n  onIdle(() => {\n    if (getIsAnimating()) {\n      requestMeasure(() => {\n        onFullyIdle(cb);\n      });\n    } else {\n      cb();\n    }\n  });\n}\n\nexport function throttleWithFullyIdle<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onFullyIdle, fn);\n}\n","import type { ReactElement } from 'react';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../../util/debugOverlay';\nimport { orderBy } from '../../util/iteratees';\nimport safeExec from '../../util/safeExec';\nimport { throttleWith } from '../../util/schedulers';\nimport { createSignal, isSignal, type Signal } from '../../util/signals';\nimport { requestMeasure, requestMutation } from '../fasterdom/fasterdom';\nimport { getIsBlockingAnimating } from './heavyAnimation';\n\nexport { getIsHeavyAnimating, beginHeavyAnimation, onFullyIdle } from './heavyAnimation';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualType {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualType.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualType.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualType.Tag;\n  target?: HTMLElement | SVGElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualType.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualType.Fragment;\n  children: VirtualElementChildren;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\nexport interface RefObject<T = any> {\n  current: T;\n  onChange?: NoneToVoidFunction;\n}\n\nexport enum MountState {\n  Mounting,\n  Mounted,\n  Unmounted,\n}\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  mountState: MountState;\n  context?: Record<string, Signal<unknown>>;\n  hooks?: {\n    state?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects?: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly any[];\n        schedule?: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: any[];\n      }[];\n    };\n    refs?: {\n      cursor: number;\n      byCursor: RefObject[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nexport type Context<T> = {\n  defaultValue?: T;\n  contextId: string;\n  Provider: FC<{ value: T; children: TeactNode }>;\n};\n\nconst Fragment = Symbol('Fragment');\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet contextCounter = 0;\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return (\n    $element.type === VirtualType.Tag\n    || $element.type === VirtualType.Component\n    || $element.type === VirtualType.Fragment\n  );\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualType.Fragment,\n    children: buildChildren(children, true),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  if (children?.length) {\n    props.children = children.length === 1 ? children[0] : children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: -1,\n    $element: undefined as unknown as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props,\n    mountState: MountState.Unmounted,\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children?: VirtualElementChildren,\n): VirtualElementComponent {\n  return {\n    type: VirtualType.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: children ? buildChildren(children, true) : [],\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualType.Tag,\n    tag,\n    props,\n    children: buildChildren(children),\n  };\n}\n\nfunction buildChildren(children: any[], noEmpty = false): VirtualElement[] {\n  const cleanChildren = dropEmptyTail(children, noEmpty);\n  const newChildren = [];\n\n  for (let i = 0, l = cleanChildren.length; i < l; i++) {\n    const child = cleanChildren[i];\n    if (Array.isArray(child)) {\n      newChildren.push(...buildChildren(child, noEmpty));\n    } else {\n      newChildren.push(buildChildElement(child));\n    }\n  }\n\n  return newChildren;\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  return !child && child !== 0;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return { type: VirtualType.Empty };\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return {\n      type: VirtualType.Text,\n      value: String(child),\n    };\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_components: AnyLiteral = { TOTAL: { name: 'TOTAL', renders: 0 } };\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_memos: Record<string, { key: string; calls: number; misses: number; hitRate: number }> = {};\nconst DEBUG_MEMOS_CALLS_THRESHOLD = 20;\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(\n    Object\n      .values(DEBUG_components)\n      .map(({ avgRenderTime, ...state }) => {\n        return { ...state, ...(avgRenderTime !== undefined && { avgRenderTime: Number(avgRenderTime.toFixed(2)) }) };\n      }),\n    'renders',\n    'desc',\n  ));\n\n  // eslint-disable-next-line no-console\n  console.warn('MEMOS', orderBy(\n    Object\n      .values(DEBUG_memos)\n      .filter(({ calls }) => calls >= DEBUG_MEMOS_CALLS_THRESHOLD)\n      .map((state) => ({ ...state, hitRate: Number(state.hitRate.toFixed(2)) })),\n    'hitRate',\n    'asc',\n  ));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsCaptured = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  if (getIsBlockingAnimating()) {\n    getIsBlockingAnimating.once(runUpdatePassOnRaf);\n    return;\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate!.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    runImmediateEffects?.();\n  });\n});\n\nexport function captureImmediateEffects() {\n  if (areImmediateEffectsCaptured) {\n    return undefined;\n  }\n\n  areImmediateEffectsCaptured = true;\n  return runCapturedImmediateEffects;\n}\n\nfunction runCapturedImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n\n  areImmediateEffectsCaptured = false;\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: any;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    if (componentInstance.hooks) {\n      if (componentInstance.hooks.state) {\n        componentInstance.hooks.state.cursor = 0;\n      }\n      if (componentInstance.hooks.effects) {\n        componentInstance.hooks.effects.cursor = 0;\n      }\n      if (componentInstance.hooks.memos) {\n        componentInstance.hooks.memos.cursor = 0;\n      }\n      if (componentInstance.hooks.refs) {\n        componentInstance.hooks.refs.cursor = 0;\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          name: componentName,\n          renders: 0,\n          avgRenderTime: 0,\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n\n      const { renders, avgRenderTime } = DEBUG_components[componentName];\n      DEBUG_components[componentName].avgRenderTime = (avgRenderTime * renders + duration) / (renders + 1);\n      DEBUG_components[componentName].renders++;\n      DEBUG_components.TOTAL.renders++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error while rendering component ${componentInstance.name}`, componentInstance);\n\n      newRenderedValue = componentInstance.renderedValue;\n    },\n  });\n\n  if (componentInstance.mountState === MountState.Mounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n  componentInstance.$element = buildComponentElement(componentInstance, children);\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if ($old.type === VirtualType.Text && $new.type === VirtualType.Text) {\n    return $old.value !== $new.value;\n  } else if ($old.type === VirtualType.Tag && $new.type === VirtualType.Tag) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if ($old.type === VirtualType.Component && $new.type === VirtualType.Component) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  componentInstance.id = ++lastComponentId;\n  componentInstance.mountState = MountState.Mounting;\n  renderComponent(componentInstance);\n  componentInstance.mountState = MountState.Mounted;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  if (componentInstance.hooks?.effects) {\n    for (const effect of componentInstance.hooks.effects.byCursor) {\n      if (effect.cleanup) {\n        safeExec(effect.cleanup);\n      }\n\n      effect.cleanup = undefined;\n      effect.releaseSignals?.();\n    }\n  }\n\n  componentInstance.mountState = MountState.Unmounted;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  const {\n    effects, state, memos, refs,\n  } = componentInstance.hooks || {};\n\n  if (effects) {\n    for (const hook of effects.byCursor) {\n      hook.schedule = undefined as any;\n      hook.cleanup = undefined as any;\n      hook.releaseSignals = undefined as any;\n      hook.dependencies = undefined;\n    }\n  }\n\n  if (state) {\n    for (const hook of state.byCursor) {\n      hook.value = undefined;\n      hook.nextValue = undefined;\n      hook.setter = undefined as any;\n    }\n  }\n\n  if (memos) {\n    for (const hook of memos.byCursor) {\n      hook.value = undefined as any;\n      hook.dependencies = undefined as any;\n    }\n  }\n\n  if (refs) {\n    for (const hook of refs.byCursor) {\n      hook.current = undefined as any;\n      hook.onChange = undefined as any;\n    }\n  }\n\n  componentInstance.hooks = undefined as any;\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  if (componentInstance.hooks?.state) {\n    for (const hook of componentInstance.hooks.state.byCursor) {\n      hook.value = hook.nextValue;\n    }\n  }\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.state) {\n    renderingInstance.hooks.state = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n  const componentInstance = renderingInstance;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: (newValue: ((current: T) => T) | T) => {\n        if (componentInstance.mountState === MountState.Unmounted) {\n          return;\n        }\n\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].nextValue);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          // eslint-disable-next-line no-console\n          console.log(\n            '[Teact.useState]',\n            DEBUG_resolveComponentName(componentInstance.Component),\n            `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n            byCursor[cursor].nextValue,\n          );\n        }\n      },\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly any[],\n  debugKey?: string,\n) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const effectConfig = byCursor[cursor];\n  const componentInstance = renderingInstance;\n\n  function schedule() {\n    scheduleEffect(componentInstance, cursor, effect, isLayout);\n  }\n\n  if (dependencies && effectConfig?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== effectConfig.dependencies![i])) {\n      if (DEBUG && debugKey) {\n        const causedBy = dependencies.reduce((res, newValue, i) => {\n          const prevValue = effectConfig.dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${prevValue} => ${newValue}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal, i) => signal.subscribe(() => {\n      if (debugKey) {\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by signal #${i} new value:`, signal());\n      }\n\n      byCursor[cursor].schedule!();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      for (const cleanup of cleanups) {\n        cleanup();\n      }\n    };\n  }\n\n  if (effectConfig) effectConfig.schedule = undefined; // Help GC\n\n  byCursor[cursor] = {\n    ...effectConfig,\n    dependencies,\n    schedule,\n  };\n\n  if (!effectConfig) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nfunction scheduleEffect(\n  componentInstance: ComponentInstance,\n  cursor: number,\n  effect: Effect,\n  isLayout: boolean,\n) {\n  const { byCursor } = componentInstance.hooks!.effects!;\n  const cleanup = byCursor[cursor]?.cleanup;\n  const cleanupsContainer = isLayout ? pendingLayoutCleanups : pendingCleanups;\n  const effectsContainer = isLayout ? pendingLayoutEffects : pendingEffects;\n  const effectId = `${componentInstance.id}_${cursor}`;\n\n  if (cleanup) {\n    const runEffectCleanup = () => safeExec(() => {\n      if (componentInstance.mountState === MountState.Unmounted) {\n        return;\n      }\n\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      let DEBUG_startAt: number | undefined;\n      if (DEBUG) {\n        DEBUG_startAt = performance.now();\n      }\n\n      cleanup();\n\n      if (DEBUG) {\n        const duration = performance.now() - DEBUG_startAt!;\n        const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n        if (duration > DEBUG_EFFECT_THRESHOLD) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n          );\n        }\n      }\n    }, {\n      rescue: () => {\n        // eslint-disable-next-line no-console, max-len\n        console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`,\n          componentInstance);\n      },\n      always: () => {\n        byCursor[cursor].cleanup = undefined;\n      },\n    });\n\n    cleanupsContainer.set(effectId, runEffectCleanup);\n  }\n\n  const runEffect = () => safeExec(() => {\n    if (componentInstance.mountState === MountState.Unmounted) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`, componentInstance);\n    },\n  });\n\n  effectsContainer.set(effectId, runEffect);\n\n  runUpdatePassOnRaf();\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useUnmountCleanup(cleanup: NoneToVoidFunction) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      cleanup,\n    };\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useMemo<T extends any>(\n  resolver: () => T,\n  dependencies: any[],\n  debugKey?: string,\n  debugHitRateKey?: string,\n): T {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.memos) {\n    renderingInstance.hooks.memos = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  let DEBUG_state: typeof DEBUG_memos[string] | undefined;\n  if (DEBUG && debugHitRateKey) {\n    const instanceKey = `${debugHitRateKey}#${renderingInstance.id}`;\n\n    DEBUG_state = DEBUG_memos[instanceKey];\n    if (!DEBUG_state) {\n      DEBUG_state = {\n        key: instanceKey, calls: 0, misses: 0, hitRate: 0,\n      };\n      DEBUG_memos[instanceKey] = DEBUG_state;\n    }\n\n    DEBUG_state.calls++;\n    DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n  }\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG) {\n      if (debugKey) {\n        const msg = `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`;\n        if (!byCursor[cursor]) {\n          // eslint-disable-next-line no-console\n          console.log(`${msg} [first render]`);\n        } else {\n          logUnequalProps(byCursor[cursor].dependencies, dependencies, msg, debugKey);\n        }\n      }\n\n      if (DEBUG_state) {\n        DEBUG_state.misses++;\n        DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n\n        if (\n          DEBUG_state.calls % 10 === 0\n          && DEBUG_state.calls >= DEBUG_MEMOS_CALLS_THRESHOLD\n          && DEBUG_state.hitRate < 0.25\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            // eslint-disable-next-line max-len\n            `[Teact] ${DEBUG_state.key}: Hit rate is ${DEBUG_state.hitRate.toFixed(2)} for ${DEBUG_state.calls} calls`,\n          );\n        }\n      }\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: any[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): RefObject<T>;\nexport function useRef<T>(): RefObject<T | undefined>; // TT way (empty is `undefined`)\nexport function useRef<T>(initial: null): RefObject<T | null>; // React way (empty is `null`)\n// eslint-disable-next-line no-null/no-null\nexport function useRef<T>(initial?: T | null) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.refs) {\n    renderingInstance.hooks.refs = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function createContext<T>(defaultValue?: T): Context<T> {\n  const contextId = String(contextCounter++);\n\n  function TeactContextProvider(props: { value: T; children: TeactNode }) {\n    const [getValue, setValue] = useSignal(props.value ?? defaultValue);\n    // Create a new object to avoid mutations in the parent context\n    renderingInstance.context = { ...renderingInstance.context };\n\n    renderingInstance.context[contextId] = getValue;\n    setValue(props.value);\n    return props.children;\n  }\n\n  TeactContextProvider.DEBUG_contentComponentName = contextId;\n\n  const context = {\n    defaultValue,\n    contextId,\n    Provider: TeactContextProvider,\n  };\n\n  return context;\n}\n\nexport function useContextSignal<T>(context: Context<T>) {\n  const [getDefaultValue] = useSignal(context.defaultValue);\n\n  return renderingInstance.context?.[context.contextId] || getDefaultValue;\n}\n\nexport function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n\nexport function memo<T extends FC_withDebug>(Component: T, debugKey?: string) {\n  function TeactMemoWrapper(props: Props) {\n    return useMemo(\n      () => createElement(Component, props),\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      Object.values(props),\n      debugKey,\n      DEBUG_MORE ? DEBUG_resolveComponentName(renderingInstance.Component) : undefined,\n    );\n  }\n\n  TeactMemoWrapper.DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n  return TeactMemoWrapper as T;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport function DEBUG_resolveComponentName(Component: FC_withDebug) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const { name, DEBUG_contentComponentName } = Component;\n\n  if (name === 'TeactNContainer') {\n    return `container>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactMemoWrapper') {\n    return `memo>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactContextProvider') {\n    return `context>id${DEBUG_contentComponentName}`;\n  }\n\n  return name + (DEBUG_contentComponentName ? `>${DEBUG_contentComponentName}` : '');\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useForceUpdate = () => {\n  const [, setTrigger] = useState<boolean>(false);\n\n  return useCallback(() => {\n    setTrigger((trigger) => !trigger);\n  }, []);\n};\n\nexport default useForceUpdate;\n","import { useRef } from '../lib/teact/teact';\n\nimport generateUniqueId from '../util/generateUniqueId';\n\nexport default function useUniqueId() {\n  const idRef = useRef<string>();\n\n  if (!idRef.current) {\n    idRef.current = generateUniqueId();\n  }\n\n  return idRef.current;\n}\n","import type { FC, FC_withDebug, Props } from './teact';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport arePropsShallowEqual, { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { handleError } from '../../util/handleError';\nimport { orderBy } from '../../util/iteratees';\nimport { logActionHandling } from '../../util/logs';\nimport { throttleWithTickEnd } from '../../util/schedulers';\nimport React, { DEBUG_resolveComponentName, getIsHeavyAnimating, useUnmountCleanup } from './teact';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport default React;\n\ninterface Container {\n  mapStateToProps: MapStateToProps<any>;\n  activationFn?: ActivationFn<any>;\n  stuckTo?: any;\n  ownProps: Props;\n  mappedProps?: Props;\n  forceUpdate: Function;\n  DEBUG_updates: number;\n  DEBUG_componentName: string;\n}\n\ntype GlobalState =\n  AnyLiteral\n  & { DEBUG_randomId?: number };\ntype ActionNames = string;\ntype ActionPayload = any;\n\nexport interface ActionOptions {\n  forceOnHeavyAnimation?: boolean;\n  // Workaround for iOS gesture history navigation\n  forceSyncOnIOs?: boolean;\n  forceOutdated?: boolean;\n}\n\ntype Actions = Record<ActionNames, (payload?: ActionPayload, options?: ActionOptions) => void>;\n\ntype ActionHandler = (\n  global: GlobalState,\n  actions: Actions,\n  payload: any,\n) => GlobalState | void | Promise<void>;\n\ntype MapStateToProps<OwnProps = undefined> = (global: GlobalState, ownProps: OwnProps) => AnyLiteral;\ntype StickToFirstFn = (value: any) => boolean;\ntype ActivationFn<OwnProps = undefined> = (\n  global: GlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn,\n) => boolean;\n\nlet currentGlobal = {\n  isInited: false,\n} as GlobalState;\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet DEBUG_currentRandomId: number | undefined;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_invalidateGlobalOnTickEnd = throttleWithTickEnd(() => {\n  DEBUG_currentRandomId = Math.random();\n});\n\nconst actionHandlers: Record<string, ActionHandler[]> = {};\nconst callbacks: Function[] = [updateContainers];\nconst actions = {} as Actions;\nconst containers = new Map<string, Container>();\n\nconst runCallbacksThrottled = throttleWithTickEnd(runCallbacks);\n\nlet forceOnHeavyAnimation = true;\n\nfunction runCallbacks() {\n  if (forceOnHeavyAnimation) {\n    forceOnHeavyAnimation = false;\n  } else if (getIsHeavyAnimating()) {\n    getIsHeavyAnimating.once(runCallbacksThrottled);\n    return;\n  }\n\n  callbacks.forEach((cb) => cb(currentGlobal));\n}\n\nexport function setUntypedGlobal(newGlobal?: GlobalState, options?: ActionOptions) {\n  if (typeof newGlobal === 'object' && newGlobal !== currentGlobal) {\n    if (DEBUG) {\n      if (\n        !options?.forceOutdated\n        && newGlobal.DEBUG_randomId && newGlobal.DEBUG_randomId !== DEBUG_currentRandomId\n      ) {\n        throw new Error('[TeactN.setGlobal] Attempt to set an outdated global');\n      }\n\n      DEBUG_currentRandomId = Math.random();\n    }\n\n    currentGlobal = newGlobal;\n\n    if (options?.forceSyncOnIOs) {\n      forceOnHeavyAnimation = true;\n      runCallbacks();\n    } else {\n      if (options?.forceOnHeavyAnimation) {\n        forceOnHeavyAnimation = true;\n      }\n\n      runCallbacksThrottled();\n    }\n  }\n}\n\nexport function getUntypedGlobal() {\n  if (DEBUG) {\n    currentGlobal = {\n      ...currentGlobal,\n      DEBUG_randomId: DEBUG_currentRandomId,\n    };\n    DEBUG_invalidateGlobalOnTickEnd();\n  }\n\n  return currentGlobal;\n}\n\nexport function getUntypedActions() {\n  return actions;\n}\n\nexport function forceOnHeavyAnimationOnce() {\n  forceOnHeavyAnimation = true;\n}\n\nlet actionQueue: NoneToVoidFunction[] = [];\n\nfunction handleAction(name: string, payload?: ActionPayload, options?: ActionOptions) {\n  logActionHandling(name, payload);\n\n  actionQueue.push(() => {\n    actionHandlers[name]?.forEach((handler) => {\n      const response = handler(DEBUG ? getUntypedGlobal() : currentGlobal, actions, payload);\n      if (!response || typeof response.then === 'function') {\n        return;\n      }\n\n      setUntypedGlobal(response as GlobalState, options);\n    });\n  });\n\n  if (actionQueue.length === 1) {\n    try {\n      while (actionQueue.length) {\n        actionQueue[0]();\n        actionQueue.shift();\n      }\n    } finally {\n      actionQueue = [];\n    }\n  }\n}\n\nfunction updateContainers() {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  let DEBUG_startAt: number | undefined;\n  if (DEBUG) {\n    DEBUG_startAt = performance.now();\n  }\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const container of containers.values()) {\n    const {\n      mapStateToProps, ownProps, mappedProps, forceUpdate,\n    } = container;\n\n    if (!activateContainer(container, currentGlobal, ownProps)) {\n      continue;\n    }\n\n    let newMappedProps;\n\n    try {\n      newMappedProps = mapStateToProps(currentGlobal, ownProps);\n    } catch (err: any) {\n      handleError(err);\n\n      return;\n    }\n\n    if (DEBUG) {\n      if (Object.values(newMappedProps).some(Number.isNaN)) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          // eslint-disable-next-line max-len\n          `[TeactN] Some of \\`${container.DEBUG_componentName}\\` mappers contain NaN values. This may cause redundant updates because of incorrect equality check.`,\n        );\n      }\n    }\n\n    if (Object.keys(newMappedProps).length && !arePropsShallowEqual(mappedProps!, newMappedProps)) {\n      if (DEBUG_MORE) {\n        logUnequalProps(\n          mappedProps!,\n          newMappedProps,\n          `[TeactN] Will update ${container.DEBUG_componentName} caused by:`,\n        );\n      }\n\n      container.mappedProps = newMappedProps;\n      container.DEBUG_updates++;\n\n      forceUpdate();\n    }\n  }\n\n  if (DEBUG) {\n    const updateTime = performance.now() - DEBUG_startAt!;\n    if (updateTime > 7) {\n      // eslint-disable-next-line no-console\n      console.warn(`[TeactN] Slow containers update: ${Math.round(updateTime)} ms`);\n    }\n  }\n}\n\nexport function addUntypedActionHandler(name: ActionNames, handler: ActionHandler) {\n  if (!actionHandlers[name]) {\n    actionHandlers[name] = [];\n\n    actions[name] = (payload?: ActionPayload, options?: ActionOptions) => {\n      handleAction(name, payload, options);\n    };\n  }\n\n  actionHandlers[name].push(handler);\n}\n\nexport function addCallback(cb: Function) {\n  callbacks.push(cb);\n}\n\nexport function removeCallback(cb: Function) {\n  const index = callbacks.indexOf(cb);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n  }\n}\n\nexport function withUntypedGlobal<OwnProps extends AnyLiteral>(\n  mapStateToProps: MapStateToProps<OwnProps> = () => ({}),\n  activationFn?: ActivationFn<OwnProps>,\n) {\n  return (Component: FC) => {\n    function TeactNContainer(props: OwnProps) {\n      const id = useUniqueId();\n      const forceUpdate = useForceUpdate();\n\n      useUnmountCleanup(() => {\n        containers.delete(id);\n      });\n\n      let container = containers.get(id)!;\n      if (!container) {\n        container = {\n          mapStateToProps,\n          activationFn,\n          ownProps: props,\n          forceUpdate,\n          DEBUG_updates: 0,\n          DEBUG_componentName: Component.name,\n        };\n\n        containers.set(id, container);\n      }\n\n      if (!container.mappedProps || (\n        !arePropsShallowEqual(container.ownProps, props) && activateContainer(container, currentGlobal, props)\n      )) {\n        try {\n          container.mappedProps = mapStateToProps(currentGlobal, props);\n        } catch (err: any) {\n          handleError(err);\n        }\n      }\n\n      container.ownProps = props;\n\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      return <Component {...container.mappedProps} {...props} />;\n    }\n\n    (TeactNContainer as FC_withDebug).DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n    return TeactNContainer;\n  };\n}\n\nfunction activateContainer(container: Container, global: GlobalState, props: Props) {\n  const { activationFn, stuckTo } = container;\n  if (!activationFn) {\n    return true;\n  }\n\n  return activationFn(global, props, (stickTo: any) => {\n    if (stickTo && !stuckTo) {\n      container.stuckTo = stickTo;\n    }\n\n    return stickTo && (!stuckTo || stuckTo === stickTo);\n  });\n}\n\nexport function typify<\n  ProjectGlobalState,\n  ActionPayloads,\n>() {\n  type ProjectActionNames = keyof ActionPayloads;\n\n  // When payload is allowed to be `undefined` we consider it optional\n  type ProjectActions = {\n    [ActionName in ProjectActionNames]:\n    (undefined extends ActionPayloads[ActionName] ? (\n      (payload?: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ) : (\n      (payload: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ))\n  };\n\n  type ActionHandlers = {\n    [ActionName in keyof ActionPayloads]: (\n      global: ProjectGlobalState,\n      actions: ProjectActions,\n      payload: ActionPayloads[ActionName],\n    ) => ProjectGlobalState | void | Promise<void>;\n  };\n\n  return {\n    getGlobal: getUntypedGlobal as <T extends ProjectGlobalState>() => T,\n    setGlobal: setUntypedGlobal as (state: ProjectGlobalState, options?: ActionOptions) => void,\n    getActions: getUntypedActions as () => ProjectActions,\n    addActionHandler: addUntypedActionHandler as <ActionName extends ProjectActionNames>(\n      name: ActionName,\n      handler: ActionHandlers[ActionName],\n    ) => void,\n    withGlobal: withUntypedGlobal as <OwnProps extends AnyLiteral>(\n      mapStateToProps: (global: ProjectGlobalState, ownProps: OwnProps) => AnyLiteral,\n      activationFn?: (global: ProjectGlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn) => boolean,\n    ) => (Component: FC) => FC<OwnProps>,\n  };\n}\n\nif (DEBUG) {\n  (window as any).getGlobal = getUntypedGlobal;\n  (window as any).setGlobal = setUntypedGlobal;\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'GLOBAL CONTAINERS',\n      orderBy(\n        Array.from(containers.values())\n          .map(({ DEBUG_componentName, DEBUG_updates }) => ({ DEBUG_componentName, DEBUG_updates })),\n        'DEBUG_updates',\n        'desc',\n      ),\n    );\n  });\n}\n","import { typify } from '../lib/teact/teactn';\n\nimport type { ActionPayloads, GlobalState } from './types';\n\nconst typed = typify<GlobalState, ActionPayloads>();\n\nexport const getGlobal = typed.getGlobal;\nexport const setGlobal = typed.setGlobal;\nexport const getActions = typed.getActions;\nexport const addActionHandler = typed.addActionHandler;\nexport const withGlobal = typed.withGlobal;\n","import { areSortedArraysEqual } from './iteratees';\n\nconst cache = new WeakMap<AnyFunction, {\n  lastArgs: any[];\n  lastResult: any;\n  lastTime: number;\n  isDisabledUntil?: number;\n}>();\n\nexport default function memoize<F extends AnyFunction>(fn: F, ttlSeconds?: number) {\n  const wrapper = (...args: Parameters<F>): ReturnType<F> => {\n    const cached = cache.get(fn);\n    const now = Date.now();\n\n    if (cached) {\n      const isCacheDisabled = cached.isDisabledUntil && cached.isDisabledUntil > now;\n      const isStale = ttlSeconds && cached.lastTime + (ttlSeconds * 1000) < now;\n\n      if (!isCacheDisabled && !isStale && areSortedArraysEqual(cached.lastArgs, args)) {\n        return cached.lastResult;\n      }\n    }\n\n    const result = fn(...args);\n    cache.set(fn, {\n      ...cached,\n      lastArgs: args,\n      lastResult: result,\n      lastTime: now,\n    });\n    return result;\n  };\n\n  wrapper.disableCache = (seconds: number) => {\n    const cached = cache.get(fn);\n    if (cached) {\n      cached.isDisabledUntil = Date.now() + (seconds * 1000);\n    }\n  };\n\n  return wrapper;\n}\n","import type { ApiChain, ApiNetwork } from '../../api/types';\nimport type {\n  Account, AccountSettings, AccountState, GlobalState, UserToken,\n} from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\n\nexport function selectIsNewWallet(global: GlobalState, isFirstTransactionsLoaded: boolean) {\n  const { activities } = selectCurrentAccountState(global) ?? {};\n\n  if (activities?.idsMain?.length) {\n    return false;\n  }\n\n  return isFirstTransactionsLoaded;\n}\n\nexport function selectAccounts(global: GlobalState) {\n  return global.accounts?.byId;\n}\n\nexport const selectNetworkAccountsMemoized = memoize((network: ApiNetwork, accountsById?: Record<string, Account>) => {\n  if (!accountsById) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    Object.entries(accountsById).filter(([accountId]) => parseAccountId(accountId).network === network),\n  );\n});\n\nexport function selectNetworkAccounts(global: GlobalState) {\n  return selectNetworkAccountsMemoized(selectCurrentNetwork(global), global.accounts?.byId);\n}\n\nexport function selectCurrentNetwork(global: GlobalState) {\n  return global.settings.isTestnet ? 'testnet' : 'mainnet';\n}\n\nexport function selectCurrentAccount(global: GlobalState) {\n  return selectAccount(global, global.currentAccountId!);\n}\n\nexport function selectAccount(global: GlobalState, accountId: string) {\n  return selectAccounts(global)?.[accountId];\n}\n\nexport function selectCurrentAccountState(global: GlobalState) {\n  return selectAccountState(global, global.currentAccountId!);\n}\n\nexport function selectAccountState(global: GlobalState, accountId: string): AccountState | undefined {\n  return global.byAccountId[accountId];\n}\n\nexport function selectFirstNonHardwareAccount(global: GlobalState) {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) {\n    return undefined;\n  }\n\n  return Object.values(accounts).find((account) => !account.isHardware);\n}\n\nexport function selectAccountSettings(global: GlobalState, accountId: string): AccountSettings | undefined {\n  return global.settings.byAccountId[accountId];\n}\n\nexport function selectCurrentAccountSettings(global: GlobalState) {\n  return selectAccountSettings(global, global.currentAccountId!);\n}\n\nexport function selectIsHardwareAccount(global: GlobalState) {\n  const state = selectAccount(global, global.currentAccountId!);\n\n  return state?.isHardware;\n}\n\nexport function selectAllHardwareAccounts(global: GlobalState) {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) {\n    return undefined;\n  }\n\n  return Object.values(accounts).filter((account) => account.isHardware);\n}\n\nexport function selectIsOneAccount(global: GlobalState) {\n  return Object.keys(selectAccounts(global) || {}).length === 1;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const selectEnabledTokensCountMemoizedFor = withCache((accountId: string) => memoize((tokens?: UserToken[]) => {\n  return (tokens ?? []).filter(({ isDisabled }) => !isDisabled).length;\n}));\n\nexport function selectLedgerAccountIndexToImport(global: GlobalState) {\n  const hardwareAccounts = selectAllHardwareAccounts(global) ?? [];\n  const hardwareAccountIndexes = hardwareAccounts?.map((account) => account.ledger!.index)\n    .sort((a, b) => a - b);\n\n  if (hardwareAccountIndexes.length === 0 || hardwareAccountIndexes[0] !== 0) {\n    return -1;\n  }\n\n  if (hardwareAccountIndexes.length === 1) {\n    return 0;\n  }\n\n  for (let i = 1; i < hardwareAccountIndexes.length; i++) {\n    if (hardwareAccountIndexes[i] - hardwareAccountIndexes[i - 1] !== 1) {\n      return i - 1;\n    }\n  }\n\n  return hardwareAccountIndexes.length - 1;\n}\n\nexport function selectIsPasswordPresent(global: GlobalState) {\n  return !!selectFirstNonHardwareAccount(global);\n}\n\nexport function selectAccountIdByAddress(\n  global: GlobalState,\n  chain: ApiChain,\n  address: string,\n): string | undefined {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) return undefined;\n\n  const requiredAccount = Object.entries(accounts)\n    .find(([accountId, account]) => (account.addressByChain[chain] === address ? accountId : undefined));\n\n  return requiredAccount?.[0];\n}\n\n// Slow, not to be used in `withGlobal`\nexport function selectVestingPartsReadyToUnfreeze(global: GlobalState, accountId: string) {\n  const vesting = selectAccountState(global, accountId)?.vesting?.info || [];\n\n  return vesting.reduce((acc, currentVesting) => {\n    currentVesting.parts.forEach((part) => {\n      if (part.status === 'ready') {\n        acc.push({\n          id: currentVesting.id,\n          partId: part.id,\n        });\n      }\n    });\n\n    return acc;\n  }, [] as { id: number; partId: number }[]);\n}\n\nexport function selectCurrentAccountNftByAddress(global: GlobalState, nftAddress: string) {\n  return selectAccountNftByAddress(global, global.currentAccountId!, nftAddress);\n}\n\nexport function selectAccountNftByAddress(global: GlobalState, accountId: string, nftAddress: string) {\n  return selectAccountState(global, accountId)?.nfts?.byAddress[nftAddress];\n}\n\nexport function selectIsMultichainAccount(global: GlobalState, accountId: string) {\n  return Boolean(selectAccount(global, accountId)?.addressByChain.tron);\n}\n\nexport function selectHasSession(global: GlobalState) {\n  return Boolean(global.currentAccountId);\n}\n\nexport function selectIsBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind !== 'password';\n}\n\nexport function selectIsNativeBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind === 'native-biometrics';\n}\n","import type {\n  ApiNftTransferPayload,\n  ApiParsedPayload,\n  ApiTokensTransferNonStandardPayload,\n  ApiTokensTransferPayload,\n} from '../../api/types';\n\nexport function isNftTransferPayload(payload: ApiParsedPayload | undefined): payload is ApiNftTransferPayload {\n  return payload?.type === 'nft:transfer';\n}\n\nexport function isTokenTransferPayload(\n  payload: ApiParsedPayload | undefined,\n): payload is ApiTokensTransferPayload | ApiTokensTransferNonStandardPayload {\n  return payload?.type === 'tokens:transfer' || payload?.type === 'tokens:transfer-non-standard';\n}\n","import type { ApiDappTransfer } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { TONCOIN } from '../../config';\nimport memoize from '../../util/memoize';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nconst selectCurrentDappTransferTotalsMemoized = memoize((\n  transactions: ApiDappTransfer[] | undefined,\n) => {\n  const amountsBySlug: Record<string, bigint> = {};\n  const addSlugAmount = (tokenSlug: string, amount: bigint) => {\n    amountsBySlug[tokenSlug] = (amountsBySlug[tokenSlug] ?? 0n) + amount;\n  };\n\n  let isScam = false;\n  let isDangerous = false;\n  let fullFee = 0n;\n  let received = 0n;\n  let nftCount = 0;\n\n  for (const transaction of transactions ?? []) {\n    if (transaction.isScam) isScam = true;\n    if (transaction.isDangerous) isDangerous = true;\n    fullFee += transaction.fullFee;\n    received += transaction.received;\n\n    if (transaction.displayedAmount) {\n      addSlugAmount(TONCOIN.slug, transaction.displayedAmount);\n    }\n\n    if (isTokenTransferPayload(transaction.payload)) {\n      addSlugAmount(transaction.payload.slug, transaction.payload.amount);\n    } else if (isNftTransferPayload(transaction.payload)) {\n      nftCount++;\n    }\n  }\n\n  return {\n    amountsBySlug,\n    isScam,\n    isDangerous,\n    fullFee, // In TON\n    received, // In TON\n    nftCount,\n  };\n});\n\nexport function selectCurrentDappTransferTotals(global: GlobalState) {\n  const { transactions } = global.currentDappTransfer;\n  return selectCurrentDappTransferTotalsMemoized(transactions);\n}\n","import type { RoundingMode } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function round(value: number | string, precision = 0, roundingMode: RoundingMode = Big.roundHalfUp) {\n  const bn = new Big(value);\n\n  return bn.round(precision, roundingMode).toNumber();\n}\n\nexport function floor(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundDown);\n}\n\nexport function ceil(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundUp);\n}\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport type { ApiBalanceBySlug, ApiChain } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserToken } from '../types';\n\nimport {\n  DEFAULT_ENABLED_TOKEN_COUNT,\n  DEFAULT_ENABLED_TOKEN_SLUGS,\n  MYCOIN,\n  MYCOIN_TESTNET,\n  PRICELESS_TOKEN_HASHES,\n  PRIORITY_TOKEN_SLUGS,\n  TINY_TRANSFER_MAX_COST,\n  TONCOIN,\n} from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { round } from '../../util/round';\nimport withCache from '../../util/withCache';\nimport { selectAccountSettings, selectAccountState, selectCurrentAccountState } from './accounts';\n\nfunction getIsNewAccount(balancesBySlug: ApiBalanceBySlug, tokenInfo: GlobalState['tokenInfo']) {\n  return Object.keys(balancesBySlug).length === DEFAULT_ENABLED_TOKEN_COUNT && (\n    Object.entries(balancesBySlug).every(([slug, balance]) => {\n      const {\n        decimals, quote: {\n          priceUsd,\n        },\n      } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const hasCost = balanceBig.mul(priceUsd ?? 0).lt(TINY_TRANSFER_MAX_COST);\n\n      return hasCost;\n    })\n  );\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const selectAccountTokensMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  accountSettings: AccountSettings,\n  isSortByValueEnabled: boolean = false,\n  areTokensWithNoCostHidden: boolean = false,\n) => {\n  const isNewAccount = getIsNewAccount(balancesBySlug, tokenInfo);\n\n  return Object\n    .entries(balancesBySlug)\n    .filter(([slug]) => (slug in tokenInfo.bySlug && !accountSettings.deletedSlugs?.includes(slug)))\n    .map(([slug, balance]) => {\n      const {\n        symbol, name, image, decimals, cmcSlug, color, chain, tokenAddress, codeHash, quote: {\n          price, percentChange24h, priceUsd,\n        },\n      } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const totalValue = balanceBig.mul(price).round(decimals).toString();\n      const hasCost = balanceBig.mul(priceUsd ?? 0).gte(TINY_TRANSFER_MAX_COST);\n      const isPricelessTokenWithBalance = PRICELESS_TOKEN_HASHES.has(codeHash!) && balance > 0n;\n\n      const isEnabled = (\n        (isNewAccount && DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug))\n        || !areTokensWithNoCostHidden\n        || (areTokensWithNoCostHidden && hasCost)\n        || isPricelessTokenWithBalance\n        || accountSettings.alwaysShownSlugs?.includes(slug)\n      );\n\n      const isDisabled = !isEnabled || accountSettings.alwaysHiddenSlugs?.includes(slug);\n\n      return {\n        chain,\n        symbol,\n        slug,\n        amount: balance,\n        name,\n        image,\n        price,\n        priceUsd,\n        decimals,\n        change24h: round(percentChange24h / 100, 4),\n        isDisabled,\n        cmcSlug,\n        totalValue,\n        color,\n        tokenAddress,\n        codeHash,\n      } satisfies UserToken as UserToken;\n    })\n    .sort((tokenA, tokenB) => {\n      if (isSortByValueEnabled || !accountSettings.orderedSlugs) {\n        const priorityA = PRIORITY_TOKEN_SLUGS.indexOf(tokenA.slug);\n        const priorityB = PRIORITY_TOKEN_SLUGS.indexOf(tokenB.slug);\n\n        // If both tokens are prioritized and their balances match\n        if (priorityA !== -1 && priorityB !== -1 && tokenA.totalValue === tokenB.totalValue) {\n          return priorityA - priorityB;\n        }\n\n        // If one token is prioritized and the other is not\n        if (priorityA !== -1 && priorityB === -1) return -1;\n        if (priorityB !== -1 && priorityA === -1) return 1;\n\n        return Number(tokenB.totalValue) - Number(tokenA.totalValue);\n      }\n\n      const indexA = accountSettings.orderedSlugs.indexOf(tokenA.slug);\n      const indexB = accountSettings.orderedSlugs.indexOf(tokenB.slug);\n      return indexA - indexB;\n    });\n}));\n\nexport function selectCurrentAccountTokens(global: GlobalState) {\n  return selectAccountTokens(global, global.currentAccountId!);\n}\n\nexport function selectCurrentAccountTokenBalance(global: GlobalState, slug: string) {\n  return selectCurrentAccountState(global)?.balances?.bySlug[slug] ?? 0n;\n}\n\nexport function selectCurrentToncoinBalance(global: GlobalState) {\n  return selectCurrentAccountTokenBalance(global, TONCOIN.slug);\n}\n\nexport function selectAccountTokens(global: GlobalState, accountId: string) {\n  const balancesBySlug = selectAccountState(global, accountId)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectAccountSettings(global, accountId) ?? {};\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    global.tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectAccountTokenBySlug(global: GlobalState, slug: string) {\n  const accountTokens = selectCurrentAccountTokens(global);\n  return accountTokens?.find((token) => token.slug === slug);\n}\n\nexport function selectTokenAddress(global: GlobalState, slug: string) {\n  if (slug === TONCOIN.slug) return undefined;\n  return selectToken(global, slug).tokenAddress!;\n}\n\nexport function selectToken(global: GlobalState, slug: string) {\n  return global.tokenInfo.bySlug[slug];\n}\n\nexport function selectMycoin(global: GlobalState) {\n  const { isTestnet } = global.settings;\n  return selectToken(global, isTestnet ? MYCOIN_TESTNET.slug : MYCOIN.slug);\n}\n\nexport function selectTokenByMinterAddress(global: GlobalState, minter: string) {\n  return Object.values(global.tokenInfo.bySlug).find((token) => token.tokenAddress === minter);\n}\n\nexport function selectChainTokenWithMaxBalanceSlow(global: GlobalState, chain: ApiChain): UserToken | undefined {\n  return (selectCurrentAccountTokens(global) ?? [])\n    .filter((token) => token.chain === chain)\n    .reduce((maxToken, currentToken) => {\n      const currentBalance = currentToken.priceUsd * Number(currentToken.amount);\n      const maxBalance = maxToken ? maxToken.priceUsd * Number(maxToken.amount) : 0;\n\n      return currentBalance > maxBalance ? currentToken : maxToken;\n    });\n}\n","import type { ApiActivity } from '../api/types';\n\nexport function compareActivities(a: ApiActivity, b: ApiActivity, isAsc = false) {\n  let value = a.timestamp - b.timestamp;\n  if (value === 0) {\n    value = a.id > b.id ? 1 : a.id < b.id ? -1 : 0;\n  }\n  return isAsc ? value : -value;\n}\n","import withCache from './withCache';\n\nexport const MEANINGFUL_CHAR_LENGTH = 6;\nconst FILLER = '...';\nconst FILLER_LENGTH = FILLER.length;\n\nexport const shortenAddress = withCache((address: string, shift = MEANINGFUL_CHAR_LENGTH, fromRight = shift) => {\n  if (!address) return undefined;\n\n  if (address.length <= shift + fromRight + FILLER_LENGTH) return address;\n\n  return `${address.slice(0, shift)}${FILLER}${address.slice(-fromRight)}`;\n});\n","import type { ApiTransaction } from '../api/types';\n\nimport { TRANSACTION_ADDRESS_SHIFT } from '../config';\nimport { shortenAddress } from './shortenAddress';\n\nconst cache: Map<string, {\n  timestamp: number;\n  amount: bigint;\n  address: string;\n}> = new Map();\n\nfunction getKey(address: string) {\n  return shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)!;\n}\n\nfunction addToCache(address: string, amount: bigint, timestamp: number) {\n  const key = getKey(address);\n\n  cache.set(key, {\n    address,\n    amount,\n    timestamp,\n  });\n}\n\nfunction getFromCache(address: string) {\n  const key = getKey(address);\n\n  return cache.get(key);\n}\n\nexport function updatePoisoningCache(tx: ApiTransaction) {\n  const { fromAddress: address, amount, timestamp } = tx;\n\n  const cached = getFromCache(address);\n\n  if (!cached || cached.timestamp < timestamp || (cached.timestamp === timestamp && cached.amount > amount)) {\n    addToCache(address, amount, timestamp);\n  }\n}\n\nexport function getIsTransactionWithPoisoning(tx: ApiTransaction) {\n  const { fromAddress: address } = tx;\n\n  const cached = getFromCache(address);\n\n  return cached && cached.address !== address;\n}\n\nexport function clearPoisoningCache() {\n  cache.clear();\n}\n","import type { ApiActivity, ApiTransaction, ApiTransactionType } from '../../api/types';\nimport type { LangFn } from '../langProvider';\n\nimport { compareActivities } from '../compareActivities';\nimport { unique } from '../iteratees';\nimport { getIsTransactionWithPoisoning } from '../poisoningHash';\n\ntype UnusualTxType = 'backend-swap' | 'local' | 'additional';\n\nconst TRANSACTION_TYPE_TITLES: { [K in ApiTransactionType & keyof any]?: [complete: string, inProgress: string] } = {\n  stake: ['Staked', 'Staking'],\n  unstake: ['Unstaked', 'Unstaking'],\n  unstakeRequest: ['Unstake Requested', 'Requesting Unstake'],\n  callContract: ['Contract Called', 'Calling Contract'],\n  excess: ['Excess', 'Excess'],\n  contractDeploy: ['Contract Deployed', 'Deploying Contract'],\n  bounced: ['Bounced', 'Bouncing'],\n  mint: ['Minted', 'Minting'],\n  burn: ['Burned', 'Burning'],\n  auctionBid: ['NFT Auction Bid', 'Bidding at NFT Auction'],\n  dnsChangeAddress: ['Address Updated', 'Updating Address'],\n  dnsChangeSite: ['Site Updated', 'Updating Site'],\n  dnsChangeSubdomains: ['Subdomains Updated', 'Updating Subdomains'],\n  dnsChangeStorage: ['Storage Updated', 'Updating Storage'],\n  dnsDelete: ['Domain Record Deleted', 'Deleting Domain Record'],\n  dnsRenew: ['Domain Renewed', 'Renewing Domain'],\n  liquidityDeposit: ['Liquidity Provided', 'Providing Liquidity'],\n  liquidityWithdraw: ['Liquidity Withdrawn', 'Withdrawing Liquidity'],\n};\n\nexport const STAKING_TRANSACTION_TYPES = new Set<ApiTransactionType | undefined>([\n  'stake', 'unstake', 'unstakeRequest',\n]);\n\nexport const DNS_TRANSACTION_TYPES = new Set<ApiTransactionType | undefined>([\n  'dnsChangeAddress', 'dnsChangeSite', 'dnsChangeStorage', 'dnsChangeSubdomains', 'dnsDelete', 'dnsRenew',\n]);\n\nexport function parseTxId(txId: string): {\n  hash: string;\n  subId?: string;\n  type?: UnusualTxType;\n} {\n  const [hash, subId, type] = txId.split(':') as [string, string | undefined, UnusualTxType | undefined];\n  return { hash, type, subId };\n}\n\nexport function getIsTxIdLocal(txId: string) {\n  return txId.endsWith(':local');\n}\n\nexport function getIsBackendSwapId(id: string) {\n  return id.endsWith(':backend-swap');\n}\n\nexport function buildBackendSwapId(backendId: string) {\n  return buildTxId(backendId, undefined, 'backend-swap');\n}\n\nexport function buildLocalTxId(hash: string, subId?: number) {\n  return buildTxId(hash, subId, 'local');\n}\n\nexport function buildTxId(hash: string, subId?: number | string, type?: UnusualTxType) {\n  if (!type && subId === undefined) return hash;\n  if (type === undefined) return `${hash}:${subId}`;\n  return `${hash}:${subId ?? ''}:${type}`;\n}\n\n// eslint-disable-next-line consistent-return\nexport function getActivityTokenSlugs(activity: ApiActivity): string[] {\n  switch (activity.kind) {\n    case 'transaction': {\n      return [activity.slug];\n    }\n    case 'swap': {\n      return [activity.from, activity.to];\n    }\n  }\n}\n\nexport function getIsIdSuitableForFetchingTimestamp(id: string) {\n  return !getIsTxIdLocal(id) && !getIsBackendSwapId(id);\n}\n\nexport function getTransactionTitle(\n  { type, isIncoming }: ApiTransaction,\n  isInProgress: boolean,\n  translate: LangFn,\n) {\n  if (type) {\n    const titles = TRANSACTION_TYPE_TITLES[type];\n    if (titles) {\n      return translate(titles[isInProgress ? 1 : 0]);\n    }\n  }\n  if (isIncoming) {\n    return translate(isInProgress ? 'Receiving' : 'Received');\n  }\n  return translate(isInProgress ? 'Sending' : 'Sent');\n}\n\nexport function isScamTransaction(transaction: ApiTransaction) {\n  return Boolean(transaction.metadata?.isScam)\n    || (transaction.isIncoming && getIsTransactionWithPoisoning(transaction));\n}\n\nexport function shouldShowTransactionComment(transaction: ApiTransaction) {\n  return Boolean(transaction.comment || transaction.encryptedComment)\n    && !STAKING_TRANSACTION_TYPES.has(transaction.type)\n    && !isScamTransaction(transaction);\n}\n\nexport function getTransactionAmountDisplayMode({ type, amount, nft }: ApiTransaction) {\n  const isPlainTransfer = type === undefined && !nft;\n  if (!amount && !isPlainTransfer) {\n    return 'hide';\n  }\n  return type === 'stake' || type === 'unstake'\n    ? 'noSign'\n    : 'normal';\n}\n\nexport function shouldShowTransactionAddress({ type, isIncoming, nft, toAddress }: ApiTransaction) {\n  const shouldHide = STAKING_TRANSACTION_TYPES.has(type) || type === 'burn'\n    || (!isIncoming && nft && toAddress === nft.address);\n\n  return !shouldHide;\n}\n\nexport function mergeActivitiesToMaxTime(array1: ApiActivity[], array2: ApiActivity[]) {\n  if (!array1.length && !array2.length) {\n    return [];\n  } else if (!array1.length && array2.length) {\n    return array2;\n  } else if (!array2.length && array1.length) {\n    return array1;\n  }\n\n  const fromTimestamp = Math.max(\n    array1[array1.length - 1].timestamp,\n    array2[array2.length - 1].timestamp,\n  );\n\n  return [...array1, ...array2]\n    .filter(({ timestamp }) => timestamp >= fromTimestamp)\n    .sort(compareActivities);\n}\n\nexport function mergeActivityIdsToMaxTime(array1: string[], array2: string[], byId: Record<string, ApiActivity>) {\n  if (!array1.length && !array2.length) {\n    return [];\n  } else if (!array1.length && array2.length) {\n    return array2;\n  } else if (!array2.length && array1.length) {\n    return array1;\n  }\n\n  const fromTimestamp = Math.max(\n    byId[array1[array1.length - 1]].timestamp,\n    byId[array2[array2.length - 1]].timestamp,\n  );\n\n  return unique([...array1, ...array2])\n    .filter((id) => byId[id].timestamp >= fromTimestamp)\n    .sort((a, b) => compareActivities(byId[a], byId[b]));\n}\n","import type { ApiActivityTimestamps, ApiChain } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { getIsIdSuitableForFetchingTimestamp } from '../../util/activities';\nimport { findLast, mapValues } from '../../util/iteratees';\nimport { selectAccount, selectAccountState } from './accounts';\n\nexport function selectNewestActivityTimestamps(global: GlobalState, accountId: string): ApiActivityTimestamps {\n  return mapValues(\n    selectAccountState(global, accountId)?.activities?.newestActivitiesBySlug || {},\n    ({ timestamp }) => timestamp,\n  );\n}\n\nexport function selectLastMainTxTimestamp(global: GlobalState, accountId: string): number | undefined {\n  const activities = selectAccountState(global, accountId)?.activities;\n  if (!activities) return undefined;\n\n  const { byId, idsMain = [] } = activities;\n  const txId = findLast(idsMain, (id) => getIsIdSuitableForFetchingTimestamp(id) && Boolean(byId[id]));\n  if (!txId) return undefined;\n\n  return byId[txId].timestamp;\n}\n\nexport function selectAccountTxTokenSlugs(global: GlobalState, accountId: string, chain: ApiChain) {\n  const idsBySlug = selectAccountState(global, accountId)?.activities?.idsBySlug;\n  if (!idsBySlug) return undefined;\n\n  return Object.keys(idsBySlug).filter((slug) => slug.startsWith(`${chain}-`));\n}\n\nexport function selectLocalActivities(global: GlobalState, accountId: string) {\n  const accountState = global.byAccountId?.[accountId];\n\n  return accountState?.activities?.localActivities;\n}\n\nexport function selectIsFirstTransactionsLoaded(global: GlobalState, accountId: string) {\n  const { byChain } = selectAccountState(global, accountId) ?? {};\n  const { addressByChain } = selectAccount(global, accountId) ?? {};\n\n  if (!byChain || !addressByChain) {\n    return false;\n  }\n\n  return Object.keys(addressByChain).every((chain) => byChain[chain as ApiChain]?.isFirstTransactionsLoaded);\n}\n","import type { ApiFetchEstimateDieselResult, ApiTonWalletVersion } from '../api/chains/ton/types';\nimport type { ApiTonConnectProof } from '../api/tonConnect/types';\nimport type {\n  ApiAccountConfig,\n  ApiActivity,\n  ApiAnyDisplayError,\n  ApiBalanceBySlug,\n  ApiBaseCurrency,\n  ApiChain,\n  ApiCountryCode,\n  ApiDapp,\n  ApiDappPermissions,\n  ApiDappTransfer,\n  ApiHistoryList,\n  ApiLedgerDriver,\n  ApiMtwCardType,\n  ApiNetwork,\n  ApiNft,\n  ApiNotificationsAccountValue,\n  ApiParsedPayload,\n  ApiPriceHistoryPeriod,\n  ApiSignedTransfer,\n  ApiSite,\n  ApiSiteCategory,\n  ApiStakingCommonData,\n  ApiStakingHistory,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n  ApiSwapEstimateVariant,\n  ApiTokenWithPrice,\n  ApiUpdate,\n  ApiUpdateDappConnect,\n  ApiUpdateDappLoading,\n  ApiUpdateDappSendTransactions,\n  ApiUpdateWalletVersions,\n  ApiVestingInfo,\n  ApiWalletInfo,\n} from '../api/types';\nimport type { AUTOLOCK_OPTIONS_LIST } from '../config';\nimport type { AuthConfig } from '../util/authApi/types';\nimport type { CapacitorPlatform } from '../util/capacitor/platform';\nimport type { LedgerTransport, LedgerWalletInfo } from '../util/ledger/types';\n\nexport type IAnchorPosition = {\n  x: number;\n  y: number;\n};\n\nexport type AnimationLevel = 0 | 1 | 2;\nexport type Theme = 'light' | 'dark' | 'system';\nexport type AppTheme = 'dark' | 'light';\n\nexport type NotificationType = {\n  icon?: string;\n  message: string;\n};\nexport type DialogType = {\n  title?: string;\n  message: string;\n};\n\nexport type LangCode = 'en' | 'es' | 'ru' | 'zh-Hant' | 'zh-Hans' | 'tr' | 'de' | 'th' | 'uk' | 'pl';\n\nexport interface LangItem {\n  langCode: LangCode;\n  name: string;\n  nativeName: string;\n  rtl: boolean;\n}\n\nexport interface LangString {\n  zeroValue?: string;\n  oneValue?: string;\n  twoValue?: string;\n  fewValue?: string;\n  manyValue?: string;\n  otherValue?: string;\n}\n\nexport type LangPack = Record<string, string | LangString>;\n\nexport type StakingStatus = 'active' | 'unstakeRequested';\n\nexport type AuthMethod = 'createAccount' | 'importMnemonic' | 'importHardwareWallet';\n\ninterface AuthAccount {\n  accountId: string;\n  addressByChain: Record<ApiChain, string>;\n  network?: ApiNetwork;\n}\n\ntype SignOutLevel = 'account' | 'network' | 'all';\n\nexport enum AppState {\n  Auth,\n  Main,\n  Explore,\n  Settings,\n  Ledger,\n  Inactive,\n}\n\nexport enum AuthState {\n  none,\n  createWallet,\n  checkPassword,\n  createPin,\n  confirmPin,\n  createBiometrics,\n  confirmBiometrics,\n  createNativeBiometrics,\n  createPassword,\n  createBackup,\n  disclaimerAndBackup,\n  importWalletCheckPassword,\n  importWallet,\n  importWalletCreatePin,\n  importWalletConfirmPin,\n  importWalletCreateNativeBiometrics,\n  importWalletCreateBiometrics,\n  importWalletConfirmBiometrics,\n  importWalletCreatePassword,\n  disclaimer,\n  ready,\n  about,\n  safetyRules,\n  mnemonicPage,\n  checkWords,\n}\n\nexport enum BiometricsState {\n  None,\n  TurnOnPasswordConfirmation,\n  TurnOnRegistration,\n  TurnOnVerification,\n  TurnOnComplete,\n  TurnOffWarning,\n  TurnOffBiometricConfirmation,\n  TurnOffCreatePassword,\n  TurnOffComplete,\n}\n\nexport enum TransferState {\n  None,\n  WarningHardware,\n  Initial,\n  Confirm,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport enum SwapState {\n  None,\n  Initial,\n  Blockchain,\n  Password,\n  WaitTokens,\n  Complete,\n  SelectTokenFrom,\n  SelectTokenTo,\n}\n\nexport enum SwapInputSource {\n  In,\n  Out,\n}\n\nexport enum SwapErrorType {\n  UnexpectedError,\n  InvalidPair,\n  NotEnoughLiquidity,\n\n  ChangellyMinSwap,\n  ChangellyMaxSwap,\n  NotEnoughForFee,\n  TooSmallAmount,\n}\n\nexport enum SwapType {\n  OnChain,\n  CrosschainFromWallet,\n  CrosschainToWallet,\n}\n\nexport enum DappConnectState {\n  Info,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum HardwareConnectState {\n  Connect,\n  Connecting,\n  Failed,\n  ConnectedWithSeveralWallets,\n  ConnectedWithSingleWallet,\n  WaitingForBrowser,\n}\n\nexport enum StakingState {\n  None,\n\n  StakeInitial,\n  StakePassword,\n  StakeConnectHardware,\n  StakeConfirmHardware,\n  StakeComplete,\n\n  UnstakeInitial,\n  UnstakePassword,\n  UnstakeConnectHardware,\n  UnstakeConfirmHardware,\n  UnstakeComplete,\n\n  ClaimPassword,\n  ClaimConnectHardware,\n  ClaimConfirmHardware,\n}\n\nexport enum VestingUnfreezeState {\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum SettingsState {\n  Initial,\n  PushNotifications,\n  Appearance,\n  Assets,\n  Security,\n  Dapps,\n  Language,\n  About,\n  Disclaimer,\n  NativeBiometricsTurnOn,\n  SelectTokenList,\n  WalletVersion,\n  LedgerConnectHardware,\n  LedgerSelectWallets,\n  HiddenNfts,\n  BackupWallet,\n}\n\nexport enum MintCardState {\n  Initial,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Done,\n}\n\nexport enum ActiveTab {\n  Receive,\n  Transfer,\n  Swap,\n  Stake,\n}\n\nexport enum ContentTab {\n  Assets,\n  Activity,\n  Explore,\n  Nft,\n  NotcoinVouchers,\n}\n\nexport enum MediaType {\n  Nft,\n}\n\nexport type UserToken = {\n  amount: bigint;\n  name: string;\n  symbol: string;\n  image?: string;\n  slug: string;\n  price: number;\n  priceUsd: number;\n  decimals: number;\n  change24h: number;\n  chain: ApiChain;\n  tokenAddress?: string;\n  isDisabled?: boolean;\n  canSwap?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  totalValue: string;\n  color?: string;\n  codeHash?: string;\n};\n\nexport type UserSwapToken = Omit<UserToken, 'change24h' | 'chain'> & {\n  chain: ApiChain | string;\n  isPopular: boolean;\n};\n\nexport type TokenPeriod = '1D' | '7D' | '1M' | '3M' | '1Y' | 'ALL';\n\nexport type PriceHistoryPeriods = Partial<Record<ApiPriceHistoryPeriod, ApiHistoryList>>;\n\nexport type DieselStatus = 'not-available' | 'not-authorized' | 'pending-previous' | 'available' | 'stars-fee';\n\nexport interface Account {\n  title?: string;\n  addressByChain: Record<ApiChain, string>;\n  isHardware?: boolean;\n  ledger?: {\n    index: number;\n    driver: ApiLedgerDriver;\n  };\n}\n\nexport interface AssetPairs {\n  [slug: string]: {\n    isReverseProhibited?: boolean;\n    isMultichain?: boolean;\n  };\n}\n\nexport interface AccountState {\n  balances?: {\n    bySlug: ApiBalanceBySlug;\n  };\n  activities?: {\n    isLoading?: boolean;\n    byId: Record<string, ApiActivity>;\n    /** The array values are sorted by the activity type (newest to oldest) */\n    idsBySlug?: Record<string, string[]>;\n    /** The array values are sorted by the activity type (newest to oldest) */\n    idsMain?: string[];\n    newestActivitiesBySlug?: Record<string, ApiActivity>;\n    isMainHistoryEndReached?: boolean;\n    isHistoryEndReachedBySlug?: Record<string, boolean>;\n    localActivities?: ApiActivity[];\n  };\n  byChain?: {\n    [chain in ApiChain]?: { isFirstTransactionsLoaded?: boolean };\n  };\n  nfts?: {\n    byAddress: Record<string, ApiNft>;\n    orderedAddresses?: string[];\n    currentCollectionAddress?: string;\n    selectedAddresses?: string[];\n  };\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  isUnhideNftModalOpen?: boolean;\n  selectedNftToUnhide?: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  dappLastOpenedDatesByOrigin?: Record<string, number>;\n  isBackupRequired?: boolean;\n  activeDappOrigin?: string;\n  currentTokenSlug?: string;\n  currentActivityId?: string;\n  currentTokenPeriod?: TokenPeriod;\n  savedAddresses?: SavedAddress[];\n  activeContentTab?: ContentTab;\n  landscapeActionsActiveTabIndex?: ActiveTab;\n\n  // Staking\n  staking?: {\n    stakingId?: string;\n    stateById?: Record<string, ApiStakingState>;\n    totalProfit?: bigint;\n    shouldUseNominators?: boolean;\n  };\n\n  vesting?: {\n    info: ApiVestingInfo[];\n    isLoading?: boolean;\n    isConfirmRequested?: boolean;\n    error?: string;\n    unfreezeRequestedIds?: { id: number; partId: number }[];\n    unfreezeState?: VestingUnfreezeState;\n  };\n\n  stakingHistory?: ApiStakingHistory;\n  browserHistory?: string[];\n\n  isDieselAuthorizationStarted?: boolean;\n  isLongUnstakeRequested?: boolean;\n  isCardMinting?: boolean;\n\n  dapps?: ApiDapp[];\n  currentSiteCategoryId?: number;\n\n  config?: ApiAccountConfig;\n}\n\nexport interface AccountSettings {\n  orderedSlugs?: string[];\n  alwaysShownSlugs?: string[];\n  alwaysHiddenSlugs?: string[];\n  deletedSlugs?: string[];\n  importedSlugs?: string[];\n  // These NFTs should be saved in the settings for immediate use after launching the application,\n  // without synchronizing the wallet history or complex state caching\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  accentColorIndex?: number;\n}\n\nexport interface SavedAddress {\n  name: string;\n  address: string;\n  chain: ApiChain;\n}\n\nexport interface NftTransfer {\n  name?: string;\n  address: string;\n  thumbnail: string;\n  collectionName?: string;\n}\n\nexport type GlobalState = {\n  DEBUG_randomId?: number;\n\n  appState: AppState;\n\n  auth: {\n    state: AuthState;\n    biometricsStep?: 1 | 2;\n    method?: AuthMethod;\n    isLoading?: boolean;\n    mnemonic?: string[];\n    mnemonicCheckIndexes?: number[];\n    error?: string;\n    password?: string;\n    isBackupModalOpen?: boolean;\n    firstNetworkAccount?: AuthAccount;\n    secondNetworkAccount?: AuthAccount;\n  };\n\n  biometrics: {\n    state: BiometricsState;\n    error?: string;\n    password?: string;\n  };\n\n  nativeBiometricsError?: string;\n\n  hardware: {\n    hardwareState?: HardwareConnectState;\n    hardwareWallets?: LedgerWalletInfo[];\n    hardwareSelectedIndices?: number[];\n    isRemoteTab?: boolean;\n    isLedgerConnected?: boolean;\n    isTonAppConnected?: boolean;\n    availableTransports?: LedgerTransport[];\n    lastUsedTransport?: LedgerTransport;\n  };\n\n  currentTransfer: {\n    state: TransferState;\n    isLoading?: boolean;\n    // Should be ignored when `nfts` is defined and not empty\n    tokenSlug: string;\n    toAddress?: string;\n    toAddressName?: string;\n    resolvedAddress?: string;\n    error?: string;\n    // Should be ignored when `nfts` is defined and not empty\n    amount?: bigint;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    fee?: bigint;\n    realFee?: bigint;\n    comment?: string;\n    binPayload?: string;\n    promiseId?: string;\n    txId?: string;\n    rawPayload?: string;\n    parsedPayload?: ApiParsedPayload;\n    stateInit?: string;\n    shouldEncrypt?: boolean;\n    isToNewAddress?: boolean;\n    isScam?: boolean;\n    nfts?: ApiNft[];\n    sentNftsCount?: number;\n    isMemoRequired?: boolean;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    diesel?: ApiFetchEstimateDieselResult;\n    withDiesel?: boolean;\n    isGaslessWithStars?: boolean;\n  };\n\n  currentSwap: {\n    isMaxAmount?: boolean;\n    state: SwapState;\n    swapId?: string;\n    slippage: number;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    amountOut?: string;\n    amountOutMin?: string;\n    priceImpact?: number;\n    activityId?: string;\n    error?: string;\n    errorType?: SwapErrorType;\n    shouldResetOnClose?: boolean;\n    isLoading?: boolean;\n    /**\n     * When is `true`, does several things: shows the estimating indicator in the UI, blocks the form submission, and\n     * instructs the UI and the actions to perform an estimation regardless.\n     */\n    isEstimating?: boolean;\n    inputSource?: SwapInputSource;\n    toAddress?: string;\n    payinAddress?: string;\n    payoutAddress?: string;\n    payinExtraId?: string;\n    pairs?: {\n      bySlug: Record<string, AssetPairs>;\n    };\n    limits?: {\n      fromMin?: string;\n      fromMax?: string;\n    };\n    dieselStatus?: DieselStatus;\n    estimates?: ApiSwapEstimateVariant[];\n    // This property is necessary to ensure that when the DEX with the best rate changes,\n    // the user's selection remains unchanged\n    isDexLabelChanged?: true;\n    currentDexLabel?: ApiSwapDexLabel;\n    bestRateDexLabel?: ApiSwapDexLabel;\n    // Fees. Undefined values mean that these fields are unknown.\n    networkFee?: string;\n    realNetworkFee?: string;\n    swapFee?: string;\n    swapFeePercent?: number;\n    ourFee?: string;\n    ourFeePercent?: number;\n    dieselFee?: string;\n  };\n\n  currentSignature?: {\n    promiseId: string;\n    dataHex: string;\n    error?: string;\n    isSigned?: boolean;\n  };\n\n  exploreData?: {\n    categories: ApiSiteCategory[];\n    sites: ApiSite[];\n  };\n\n  currentDappTransfer: {\n    state: TransferState;\n    isSse?: boolean;\n    promiseId?: string;\n    isLoading?: boolean;\n    transactions?: ApiDappTransfer[];\n    vestingAddress?: string;\n    viewTransactionOnIdx?: number;\n    dapp?: ApiDapp;\n    error?: string;\n  };\n\n  dappConnectRequest?: {\n    state: DappConnectState;\n    isSse?: boolean;\n    promiseId?: string;\n    accountId?: string;\n    dapp: ApiDapp;\n    permissions?: ApiDappPermissions;\n    proof?: ApiTonConnectProof;\n    error?: string;\n  };\n\n  currentStaking: {\n    state: StakingState;\n    isLoading?: boolean;\n    isUnstaking?: boolean;\n    amount?: bigint;\n    tokenAmount?: bigint;\n    fee?: bigint;\n    error?: string;\n  };\n\n  stakingInfo?: ApiStakingCommonData;\n  stakingDefault: ApiStakingState;\n\n  accounts?: {\n    byId: Record<string, Account>;\n    isLoading?: boolean;\n    error?: string;\n  };\n\n  tokenInfo: {\n    bySlug: Record<string, ApiTokenWithPrice>;\n  };\n\n  swapTokenInfo: {\n    bySlug: Record<string, ApiSwapAsset>;\n  };\n\n  tokenPriceHistory: {\n    bySlug: Record<string, PriceHistoryPeriods>;\n  };\n\n  byAccountId: Record<string, AccountState>;\n\n  walletVersions?: {\n    currentVersion: ApiTonWalletVersion;\n    byId: Record<string, ApiWalletInfo[]>;\n  };\n\n  settings: {\n    state: SettingsState;\n    theme: Theme;\n    animationLevel: AnimationLevel;\n    langCode: LangCode;\n    byAccountId: Record<string, AccountSettings>;\n    areTinyTransfersHidden?: boolean;\n    canPlaySounds?: boolean;\n    isInvestorViewEnabled?: boolean;\n    isTonProxyEnabled?: boolean;\n    isTonMagicEnabled?: boolean;\n    isDeeplinkHookEnabled?: boolean;\n    isPasswordNumeric?: boolean; // Backwards compatibility for non-numeric passwords from older versions\n    isTestnet?: boolean;\n    isSecurityWarningHidden?: boolean;\n    areTokensWithNoCostHidden: boolean;\n    isSortByValueEnabled?: boolean;\n    importToken?: {\n      isLoading?: boolean;\n      token?: UserToken | UserSwapToken;\n    };\n    authConfig?: AuthConfig;\n    baseCurrency?: ApiBaseCurrency;\n    isAppLockEnabled?: boolean;\n    autolockValue?: AutolockValueType;\n    isSensitiveDataHidden?: true;\n  };\n\n  dialogs: DialogType[];\n  notifications: NotificationType[];\n  currentAccountId?: string;\n  isAddAccountModalOpen?: boolean;\n  isBackupWalletModalOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  areSettingsOpen?: boolean;\n  isExploreOpen?: boolean;\n  isAppUpdateAvailable?: boolean;\n  // Force show the \"Update MyTonWallet\" pop-up on all platforms\n  isAppUpdateRequired?: boolean;\n  confettiRequestedAt?: number;\n  isPinAccepted?: boolean;\n  chainForOnRampWidgetModal?: ApiChain;\n  isInvoiceModalOpen?: boolean;\n  isReceiveModalOpen?: boolean;\n  isVestingModalOpen?: boolean;\n  shouldForceAccountEdit?: boolean;\n  isIncorrectTimeNotificationReceived?: boolean;\n  currentBrowserOptions?: {\n    url: string;\n    title?: string;\n    subtitle?: string;\n    keepNBSOpen?: boolean;\n  };\n\n  currentMintCard?: {\n    type?: ApiMtwCardType;\n    state?: MintCardState;\n    error?: string;\n    isLoading?: boolean;\n  };\n\n  currentQrScan?: {\n    currentTransfer?: GlobalState['currentTransfer'];\n    currentSwap?: GlobalState['currentSwap'];\n  };\n\n  latestAppVersion?: string;\n  stateVersion: number;\n  restrictions: {\n    isLimitedRegion: boolean;\n    isSwapDisabled: boolean;\n    isOnRampDisabled: boolean;\n    isNftBuyingDisabled: boolean;\n    isCopyStorageEnabled?: boolean;\n    supportAccountsCount?: number;\n    countryCode?: ApiCountryCode;\n  };\n\n  mediaViewer: {\n    mediaId?: string;\n    mediaType?: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n\n  isLoadingOverlayOpen?: boolean;\n  activitiesUpdateStartedAt?: number;\n  balanceUpdateStartedAt?: number;\n\n  pushNotifications: {\n    isAvailable?: boolean;\n    userToken?: string;\n    platform?: CapacitorPlatform;\n    enabledAccounts: Record<string, Partial<ApiNotificationsAccountValue>>;\n  };\n\n  isManualLockActive?: boolean;\n  appLockHideBiometrics?: boolean;\n  // The app is open in fullscreen mode in Telegram MiniApp on mobile\n  isFullscreen?: boolean;\n};\n\nexport interface ActionPayloads {\n  // Initial\n  init: undefined;\n  initApi: undefined;\n  afterInit: undefined;\n  apiUpdate: ApiUpdate;\n  resetAuth: undefined;\n  startCreatingWallet: undefined;\n  afterCheckMnemonic: undefined;\n  skipCheckMnemonic: undefined;\n  restartCheckMnemonicIndexes: { worldsCount: number };\n  cancelDisclaimer: undefined;\n  afterCreatePassword: { password: string; isPasswordNumeric?: boolean };\n  startCreatingBiometrics: undefined;\n  afterCreateBiometrics: undefined;\n  skipCreateBiometrics: undefined;\n  cancelCreateBiometrics: undefined;\n  afterCreateNativeBiometrics: undefined;\n  skipCreateNativeBiometrics: undefined;\n  createPin: { pin: string; isImporting: boolean };\n  confirmPin: { isImporting: boolean };\n  cancelConfirmPin: { isImporting: boolean };\n  startImportingWallet: undefined;\n  afterImportMnemonic: { mnemonic: string[] };\n  startImportingHardwareWallet: { driver: ApiLedgerDriver };\n  confirmDisclaimer: undefined;\n  afterConfirmDisclaimer: undefined;\n  cleanAuthError: undefined;\n  openAbout: undefined;\n  closeAbout: undefined;\n  openAuthBackupWalletModal: undefined;\n  openMnemonicPage: undefined;\n  openCreateBackUpPage: undefined;\n  openCheckWordsPage: undefined;\n  closeCheckWordsPage: { isBackupCreated?: boolean } | undefined;\n  initializeHardwareWalletModal: { shouldDelegateToNative?: boolean };\n  initializeHardwareWalletConnection: { transport: LedgerTransport; shouldDelegateToNative?: boolean };\n  connectHardwareWallet: { transport?: LedgerTransport; noRetry?: boolean };\n  createHardwareAccounts: undefined;\n  addHardwareAccounts: {\n    wallets: ({ accountId: string; address: string; walletInfo: LedgerWalletInfo } | undefined)[];\n  };\n  loadMoreHardwareWallets: { lastIndex: number };\n  createAccount: { password: string; isImporting: boolean; isPasswordNumeric?: boolean; version?: ApiTonWalletVersion };\n  afterSelectHardwareWallets: { hardwareSelectedIndices: number[] };\n  resetApiSettings: { areAllDisabled?: boolean } | undefined;\n  checkAppVersion: undefined;\n  importAccountByVersion: { version: ApiTonWalletVersion };\n\n  selectToken: { slug?: string } | undefined;\n  openBackupWalletModal: undefined;\n  closeBackupWalletModal: undefined;\n  setIsBackupRequired: { isMnemonicChecked: boolean };\n  openHardwareWalletModal: undefined;\n  closeHardwareWalletModal: undefined;\n  resetHardwareWalletConnect: undefined;\n  setTransferScreen: { state: TransferState };\n  setTransferAmount: { amount?: bigint };\n  setTransferToAddress: { toAddress?: string };\n  setTransferComment: { comment?: string };\n  setTransferShouldEncrypt: { shouldEncrypt?: boolean };\n  startTransfer: {\n    isPortrait?: boolean;\n    tokenSlug?: string;\n    amount?: bigint;\n    toAddress?: string;\n    comment?: string;\n    nfts?: ApiNft[];\n    binPayload?: string;\n    stateInit?: string;\n  } | undefined;\n  changeTransferToken: { tokenSlug: string; withResetAmount?: boolean };\n  fetchTransferFee: {\n    tokenSlug: string;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    binPayload?: string;\n    stateInit?: string;\n  };\n  fetchNftFee: {\n    toAddress: string;\n    nfts: ApiNft[];\n    comment?: string;\n  };\n  submitTransferInitial: {\n    tokenSlug: string;\n    amount: bigint;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    nfts?: ApiNft[];\n    withDiesel?: boolean;\n    isBase64Data?: boolean;\n    binPayload?: string;\n    isGaslessWithStars?: boolean;\n    stateInit?: string;\n  };\n  submitTransferConfirm: undefined;\n  submitTransferPassword: { password: string };\n  submitTransferHardware: undefined;\n  clearTransferError: undefined;\n  cancelTransfer: { shouldReset?: boolean } | undefined;\n  showDialog: { title?: string; message: string };\n  dismissDialog: undefined;\n  showError: { error?: ApiAnyDisplayError | string };\n  showNotification: { message: string; icon?: string };\n  dismissNotification: undefined;\n  initLedgerPage: undefined;\n  afterSignIn: undefined;\n  signOut: { level: SignOutLevel };\n  cancelCaching: undefined;\n  afterSignOut: { shouldReset?: boolean } | undefined;\n  addAccount: { method: AuthMethod; password: string; isAuthFlow?: boolean };\n  addAccount2: { method: AuthMethod; password: string };\n  switchAccount: { accountId: string; newNetwork?: ApiNetwork };\n  renameAccount: { accountId: string; title: string };\n  clearAccountError: undefined;\n  clearAccountLoading: undefined;\n  verifyHardwareAddress: undefined;\n  authorizeDiesel: undefined;\n  fetchTransferDieselState: { tokenSlug: string };\n  setIsAuthLoading: { isLoading?: boolean };\n\n  fetchTokenTransactions: { limit: number; slug: string; shouldLoadWithBudget?: boolean };\n  fetchAllTransactions: { limit: number; shouldLoadWithBudget?: boolean };\n  resetIsHistoryEndReached: { slug: string } | undefined;\n  fetchNfts: undefined;\n  showActivityInfo: { id: string };\n  showAnyAccountTx: { txId: string; accountId: string; network: ApiNetwork };\n  showAnyAccountTokenActivity: { slug: string; accountId: string; network: ApiNetwork };\n  showTokenActivity: { slug: string };\n  closeActivityInfo: { id: string };\n  fetchActivityDetails: { id: string };\n  openNftCollection: { address: string };\n  closeNftCollection: undefined;\n  selectNfts: { addresses: string[] };\n  selectAllNfts: { collectionAddress?: string };\n  clearNftSelection: { address: string };\n  clearNftsSelection: undefined;\n  burnNfts: { nfts: ApiNft[] };\n  addNftsToBlacklist: { addresses: ApiNft['address'][] };\n  addNftsToWhitelist: { addresses: ApiNft['address'][] };\n  removeNftSpecialStatus: { address: ApiNft['address'] };\n  openUnhideNftModal: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  closeUnhideNftModal: undefined;\n  openHideNftModal: {\n    addresses: ApiNft['address'][];\n    isCollection: boolean;\n  };\n  closeHideNftModal: undefined;\n\n  openExplore: undefined;\n  closeExplore: undefined;\n\n  closeAnyModal: undefined;\n  submitSignature: { password: string };\n  clearSignatureError: undefined;\n  cancelSignature: undefined;\n\n  addSavedAddress: { address: string; name: string; chain: ApiChain };\n  removeFromSavedAddress: { address: string; chain: ApiChain };\n\n  setCurrentTokenPeriod: { period: TokenPeriod };\n  openAddAccountModal: undefined;\n  closeAddAccountModal: undefined;\n\n  setLandscapeActionsActiveTabIndex: { index: ActiveTab };\n  setActiveContentTab: { tab: ContentTab };\n\n  requestConfetti: undefined;\n  setIsPinAccepted: undefined;\n  clearIsPinAccepted: undefined;\n\n  requestOpenQrScanner: undefined;\n  closeQrScanner: undefined;\n  handleQrCode: { data: string };\n\n  // Staking\n  startStaking: undefined;\n  startUnstaking: undefined;\n  setStakingScreen: { state: StakingState };\n  submitStakingInitial: { amount?: bigint; isUnstaking?: boolean } | undefined;\n  submitStakingPassword: { password: string; isUnstaking?: boolean };\n  submitStakingHardware: { isUnstaking?: boolean } | undefined;\n  clearStakingError: undefined;\n  cancelStaking: undefined;\n  fetchStakingHistory: { limit?: number; offset?: number } | undefined;\n  fetchStakingFee: { amount: bigint };\n  openStakingInfo: undefined;\n  openAnyAccountStakingInfo: { accountId: string; network: ApiNetwork; stakingId: string };\n  closeStakingInfo: undefined;\n  changeCurrentStaking: { stakingId: string; shouldReopenModal?: boolean };\n  startStakingClaim: undefined;\n  submitStakingClaim: { password: string };\n  submitStakingClaimHardware: undefined;\n  cancelStakingClaim: undefined;\n  openStakingInfoOrStart: undefined;\n\n  // Settings\n  openSettings: undefined;\n  openSettingsWithState: { state: SettingsState };\n  setSettingsState: { state?: SettingsState };\n  closeSettings: undefined;\n  setTheme: { theme: Theme };\n  setAnimationLevel: { level: AnimationLevel };\n  toggleTinyTransfersHidden: { isEnabled?: boolean } | undefined;\n  toggleInvestorView: { isEnabled?: boolean } | undefined;\n  toggleCanPlaySounds: { isEnabled?: boolean } | undefined;\n  toggleTonProxy: { isEnabled: boolean };\n  toggleTonMagic: { isEnabled: boolean };\n  toggleDeeplinkHook: { isEnabled: boolean };\n  startChangingNetwork: { network: ApiNetwork };\n  changeNetwork: { network: ApiNetwork };\n  changeLanguage: { langCode: LangCode };\n  closeSecurityWarning: undefined;\n  toggleTokensWithNoCost: { isEnabled: boolean };\n  toggleSortByValue: { isEnabled: boolean };\n  updateOrderedSlugs: { orderedSlugs: string[] };\n  rebuildOrderedSlugs: undefined;\n  toggleTokenVisibility: { slug: string; shouldShow: boolean };\n  addToken: { token: UserToken };\n  deleteToken: { slug: string };\n  importToken: { address: string; isSwap?: boolean };\n  resetImportToken: undefined;\n  closeBiometricSettings: undefined;\n  openBiometricsTurnOn: undefined;\n  openBiometricsTurnOffWarning: undefined;\n  openBiometricsTurnOff: undefined;\n  enableBiometrics: { password: string };\n  disableBiometrics: { password: string; isPasswordNumeric?: boolean };\n  enableNativeBiometrics: { password: string };\n  disableNativeBiometrics: undefined;\n  changeBaseCurrency: { currency: ApiBaseCurrency };\n  clearNativeBiometricsError: undefined;\n  copyStorageData: undefined;\n  setAppLockValue: { value?: AutolockValueType; isEnabled: boolean };\n  setIsManualLockActive: { isActive?: boolean; shouldHideBiometrics?: boolean };\n  openSettingsHardwareWallet: undefined;\n\n  // Account Settings\n  setCardBackgroundNft: { nft: ApiNft };\n  clearCardBackgroundNft: undefined;\n  checkCardNftOwnership: undefined;\n  installAccentColorFromNft: { nft: ApiNft };\n  clearAccentColorFromNft: undefined;\n\n  // TON Connect\n  submitDappConnectRequestConfirm: { accountId: string; password?: string };\n  submitDappConnectRequestConfirmHardware: { accountId: string };\n  submitDappConnectHardware: { accountId: string; signature: string };\n  clearDappConnectRequestError: undefined;\n  cancelDappConnectRequestConfirm: undefined;\n  setDappConnectRequestState: { state: DappConnectState };\n  showDappTransfer: { transactionIdx: number };\n  setDappTransferScreen: { state: TransferState };\n  clearDappTransferError: undefined;\n  submitDappTransferConfirm: undefined;\n  submitDappTransferPassword: { password: string };\n  submitDappTransferHardware: undefined;\n  submitDappTransferHardware2: { signedMessages: ApiSignedTransfer[] };\n  cancelDappTransfer: undefined;\n  closeDappTransfer: undefined;\n\n  getDapps: undefined;\n  deleteAllDapps: undefined;\n  deleteDapp: { origin: string };\n  loadExploreSites: { isLandscape: boolean };\n  updateDappLastOpenedAt: { origin: string };\n\n  addSiteToBrowserHistory: { url: string };\n  removeSiteFromBrowserHistory: { url: string };\n  openBrowser: { url: string; title?: string; subtitle?: string; keepNBSOpen?: boolean };\n  closeBrowser: undefined;\n  openSiteCategory: { id: number };\n  closeSiteCategory: undefined;\n  switchAccountAndOpenUrl: {\n    accountId?: string;\n    network?: ApiNetwork;\n    url: string;\n    isExternal?: boolean;\n    title?: string;\n    subtitle?: string;\n  };\n\n  apiUpdateDappConnect: ApiUpdateDappConnect;\n  apiUpdateDappSendTransaction: ApiUpdateDappSendTransactions;\n  apiUpdateDappLoading: ApiUpdateDappLoading;\n  apiUpdateDappCloseLoading: undefined;\n  apiUpdateWalletVersions: ApiUpdateWalletVersions;\n\n  // Swap\n  submitSwap: { password: string };\n  startSwap: {\n    state?: SwapState;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    toAddress?: string;\n  } | undefined;\n  cancelSwap: { shouldReset?: boolean } | undefined;\n  setDefaultSwapParams: { tokenInSlug?: string; tokenOutSlug?: string; withResetAmount?: boolean } | undefined;\n  switchSwapTokens: undefined;\n  setSwapTokenIn: { tokenSlug: string };\n  setSwapTokenOut: { tokenSlug: string };\n  setSwapAmountIn: { amount?: string; isMaxAmount?: boolean };\n  setSwapAmountOut: { amount?: string };\n  setSlippage: { slippage: number };\n  loadSwapPairs: { tokenSlug: string; shouldForceUpdate?: boolean };\n  clearSwapPairsCache: undefined;\n  estimateSwap: undefined;\n  setSwapScreen: { state: SwapState };\n  clearSwapError: undefined;\n  submitSwapCex: { password: string };\n  setSwapCexAddress: { toAddress: string };\n  addSwapToken: { token: UserSwapToken };\n  toggleSwapSettingsModal: { isOpen: boolean };\n  updatePendingSwaps: undefined;\n  setSwapDex: { dexLabel: ApiSwapDexLabel };\n\n  openOnRampWidgetModal: { chain: ApiChain };\n  closeOnRampWidgetModal: undefined;\n\n  // MediaViewer\n  openMediaViewer: {\n    mediaId: string;\n    mediaType: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n  closeMediaViewer: undefined;\n\n  openReceiveModal: undefined;\n  closeReceiveModal: undefined;\n  openInvoiceModal: undefined;\n  closeInvoiceModal: undefined;\n\n  loadPriceHistory: { slug: string; period: ApiPriceHistoryPeriod; currency?: ApiBaseCurrency };\n\n  showIncorrectTimeError: undefined;\n\n  openLoadingOverlay: undefined;\n  closeLoadingOverlay: undefined;\n\n  loadMycoin: undefined;\n  openVestingModal: undefined;\n  closeVestingModal: undefined;\n  startClaimingVesting: undefined;\n  submitClaimingVesting: { password: string };\n  submitClaimingVestingHardware: undefined;\n  clearVestingError: undefined;\n  cancelClaimingVesting: undefined;\n\n  openMintCardModal: undefined;\n  closeMintCardModal: undefined;\n  startCardMinting: { type: ApiMtwCardType };\n  submitMintCard: { password: string };\n  submitMintCardHardware: undefined;\n  clearMintCardError: undefined;\n\n  submitAppLockActivityEvent: undefined;\n\n  toggleNotifications: { isEnabled: boolean };\n  renameNotificationAccount: { accountId: string };\n  toggleNotificationAccount: { accountId: string };\n  createNotificationAccount: { accountId: string; withAbort?: boolean };\n  tryAddNotificationAccount: { accountId: string };\n  deleteNotificationAccount: { accountId: string; withAbort?: boolean };\n  deleteAllNotificationAccounts: undefined | { accountIds: string[] };\n  registerNotifications: { userToken: string; platform: CapacitorPlatform };\n\n  openFullscreen: undefined;\n  closeFullscreen: undefined;\n\n  setIsSensitiveDataHidden: { isHidden: boolean };\n}\n\nexport enum LoadMoreDirection {\n  Forwards,\n  Backwards,\n}\n\nexport type AutolockValueType = (typeof AUTOLOCK_OPTIONS_LIST[number])['value'];\n","import type { ApiChain } from '../api/types';\n\nimport { CHAIN_CONFIG } from '../config';\n\nexport function getChainConfig<T extends ApiChain>(chain: T) {\n  return CHAIN_CONFIG[chain];\n}\n\nexport function findChainConfig(chain: any) {\n  return chain in CHAIN_CONFIG ? CHAIN_CONFIG[chain as ApiChain] : undefined;\n}\n","import type { ApiChain, ApiToken, ApiTokenWithPrice } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { CHAIN_CONFIG, TONCOIN } from '../config';\nimport { getChainConfig } from './chain';\nimport { pick } from './iteratees';\n\nconst chainByNativeSlug = Object.fromEntries(\n  Object.entries(CHAIN_CONFIG).map(([chain, { nativeToken }]) => [nativeToken.slug, chain]),\n) as Record<string, ApiChain>;\n\nexport function getIsNativeToken(slug?: string) {\n  return slug ? slug in chainByNativeSlug : false;\n}\n\nexport function getIsTonToken(slug: string, withNative?: boolean) {\n  return Boolean(slug.startsWith('ton-') || (withNative && slug === TONCOIN.slug));\n}\n\nexport function getNativeToken(chain: ApiChain): ApiToken {\n  return getChainConfig(chain).nativeToken;\n}\n\nexport function getChainBySlug(slug: string) {\n  const items = slug.split('-');\n  return items.length > 1 ? items[0] as ApiChain : chainByNativeSlug[slug];\n}\n\nexport function buildUserToken(token: ApiTokenWithPrice | ApiToken): UserToken {\n  return {\n    ...pick(token, [\n      'symbol',\n      'slug',\n      'name',\n      'image',\n      'decimals',\n      'keywords',\n      'chain',\n      'tokenAddress',\n    ]),\n    amount: 0n,\n    totalValue: '0',\n    price: 0,\n    priceUsd: 0,\n    change24h: 0,\n  };\n}\n","import type { ApiBalanceBySlug, ApiSwapAsset } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserSwapToken } from '../types';\nimport { SwapType } from '../types';\n\nimport { DEFAULT_SWAP_FISRT_TOKEN_SLUG, DEFAULT_SWAP_SECOND_TOKEN_SLUG } from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { getChainBySlug } from '../../util/tokens';\nimport withCache from '../../util/withCache';\nimport { selectCurrentAccount, selectCurrentAccountSettings, selectCurrentAccountState } from './accounts';\nimport { selectAccountTokensMemoizedFor } from './tokens';\n\nfunction createTokenList(\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  balancesBySlug: ApiBalanceBySlug,\n  sortFn: (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => number,\n  filterFn?: (token: ApiSwapAsset) => boolean,\n): UserSwapToken[] {\n  return Object.entries(swapTokenInfo.bySlug)\n    .filter(([, token]) => !filterFn || filterFn(token))\n    .map(([slug, {\n      symbol, name, image,\n      decimals, keywords, chain,\n      tokenAddress, isPopular, color, price = 0, priceUsd = 0,\n    }]) => {\n      const amount = balancesBySlug[slug] ?? 0n;\n      const totalValue = toBig(amount, decimals).mul(price).toString();\n\n      return {\n        symbol,\n        slug,\n        amount,\n        price,\n        priceUsd,\n        name,\n        image,\n        decimals,\n        isDisabled: false,\n        canSwap: true,\n        isPopular,\n        keywords,\n        totalValue,\n        color,\n        chain,\n        tokenAddress,\n      } satisfies UserSwapToken;\n    })\n    .sort(sortFn);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst selectPopularTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const popularTokenOrder = [\n      'TON',\n      'USD',\n      'USDT',\n      'BTC',\n      'ETH',\n      'jUSDT',\n      'jWBTC',\n    ];\n    const orderMap = new Map(popularTokenOrder.map((item, index) => [item, index]));\n\n    const filterFn = (token: ApiSwapAsset) => token.isPopular;\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => {\n      const orderIndexA = orderMap.has(tokenA.symbol) ? orderMap.get(tokenA.symbol)! : popularTokenOrder.length;\n      const orderIndexB = orderMap.has(tokenB.symbol) ? orderMap.get(tokenB.symbol)! : popularTokenOrder.length;\n\n      return orderIndexA - orderIndexB;\n    };\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn, filterFn);\n  },\n));\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst selectSwapTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => (\n      tokenA.name.trim().toLowerCase().localeCompare(tokenB.name.trim().toLowerCase())\n    );\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn);\n  },\n));\n\nconst selectAccountTokensForSwapMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  accountSettings: AccountSettings,\n  isSortByValueEnabled = false,\n  areTokensWithNoCostHidden = false,\n) => {\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  ).filter((token) => token.slug in swapTokenInfo.bySlug && !token.isDisabled);\n}));\n\nexport function selectAvailableUserForSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensForSwapMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.tokenInfo,\n    global.swapTokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectPopularTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectPopularTokensMemoizedFor(global.currentAccountId!)(balancesBySlug, global.swapTokenInfo);\n}\n\nexport function selectSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectSwapTokensMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.swapTokenInfo,\n  );\n}\n\nexport function selectCurrentSwapTokenIn(global: GlobalState) {\n  const { tokenInSlug } = global.currentSwap;\n  return tokenInSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenInSlug];\n}\n\nexport function selectCurrentSwapTokenOut(global: GlobalState) {\n  const { tokenOutSlug } = global.currentSwap;\n  return tokenOutSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenOutSlug];\n}\n\nexport function selectSwapType(global: GlobalState) {\n  const {\n    tokenInSlug = DEFAULT_SWAP_FISRT_TOKEN_SLUG,\n    tokenOutSlug = DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  } = global.currentSwap;\n  const tokenInChain = getChainBySlug(tokenInSlug);\n  const tokenOutChain = getChainBySlug(tokenOutSlug);\n\n  if (tokenInChain === 'ton' && tokenOutChain === 'ton') {\n    return SwapType.OnChain;\n  }\n\n  const { addressByChain } = selectCurrentAccount(global) ?? { addressByChain: {} };\n\n  if (tokenInChain in addressByChain) {\n    return SwapType.CrosschainFromWallet;\n  }\n\n  return SwapType.CrosschainToWallet;\n}\n","import type { ApiCheckTransactionDraftResult, ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { FeePrecision, FeeTerms } from './types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintMax, bigintMin } from '../bigint';\nimport { getIsNativeToken } from '../tokens';\n\ntype ApiFee = Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee' | 'diesel'> & {\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n};\n\nexport type ExplainedTransferFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the transfer. The wallet must have it on the balance to send the transfer.\n   * Show this in the transfer form when the input amount is  the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: bigint;\n  /**\n   * Whether the full token balance can be transferred despite the fee.\n   * If yes, the fee will be taken from the transferred amount.\n   */\n  canTransferFullBalance: boolean;\n};\n\ntype AvailableDiesel = ApiFetchEstimateDieselResult & { amount: bigint };\ntype ApiFeeWithDiesel = ApiFee & { diesel: AvailableDiesel };\n\ntype MaxTransferAmountInput = {\n  /** The wallet balance of the transferred token. Undefined means that it's unknown. */\n  tokenBalance: bigint | undefined;\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n  /** The full fee terms calculated by `explainApiTransferFee`. Undefined means that they're unknown. */\n  fullFee: FeeTerms<bigint> | undefined;\n  /** Whether the full token balance can be transferred despite the fee. */\n  canTransferFullBalance: boolean;\n};\n\ntype BalanceSufficientForTransferInput = Omit<MaxTransferAmountInput, 'tokenSlug'> & {\n  /** The wallet balance of the native token of the transfer chain. Undefined means that it's unknown. */\n  nativeTokenBalance: bigint | undefined;\n  /** The transferred amount. Use 0 for NFT transfers. Undefined means that it's unspecified. */\n  transferAmount: bigint | undefined;\n};\n\n/**\n * Converts the transfer fee data returned from API into data that is ready to be displayed in the transfer form UI.\n */\nexport function explainApiTransferFee(input: ApiFee): ExplainedTransferFee {\n  return shouldUseDiesel(input)\n    ? explainGaslessTransferFee(input)\n    : explainGasfullTransferFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the transfer.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxTransferAmount({\n  tokenBalance,\n  tokenSlug,\n  fullFee,\n  canTransferFullBalance,\n}: MaxTransferAmountInput): bigint | undefined {\n  if (tokenBalance === undefined) {\n    return undefined;\n  }\n\n  // Returning the full balance when the fee is unknown for a better UX\n  if (canTransferFullBalance || !fullFee) {\n    return tokenBalance;\n  }\n\n  let fee = fullFee.token ?? 0n;\n  if (getIsNativeToken(tokenSlug)) {\n    // When the token is native, both `token` and `native` refer to the same currency, so they should be added\n    fee += fullFee.native ?? 0n;\n  }\n\n  return bigintMax(tokenBalance - fee, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to transfer the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForTransfer({\n  tokenBalance,\n  nativeTokenBalance,\n  transferAmount,\n  fullFee,\n  canTransferFullBalance,\n}: BalanceSufficientForTransferInput) {\n  if (transferAmount === undefined || tokenBalance === undefined || nativeTokenBalance === undefined || !fullFee) {\n    return undefined;\n  }\n\n  const isFullTokenTransfer = transferAmount === tokenBalance && canTransferFullBalance;\n  const tokenRequiredAmount = (fullFee.token ?? 0n) + (isFullTokenTransfer ? 0n : transferAmount);\n  const nativeTokenRequiredAmount = fullFee.native ?? 0n;\n\n  return tokenRequiredAmount <= tokenBalance && nativeTokenRequiredAmount <= nativeTokenBalance;\n}\n\nexport function isDieselAvailable(diesel: ApiFetchEstimateDieselResult): diesel is AvailableDiesel {\n  return diesel.status !== 'not-available' && diesel.amount !== undefined;\n}\n\nexport function getDieselTokenAmount(diesel: ApiFetchEstimateDieselResult) {\n  return diesel.status === 'stars-fee' ? 0n : (diesel.amount ?? 0n);\n}\n\nfunction shouldUseDiesel(input: ApiFee): input is ApiFeeWithDiesel {\n  return input.diesel !== undefined && isDieselAvailable(input.diesel);\n}\n\n/**\n * Converts the data of a transfer not involving diesel\n */\nfunction explainGasfullTransferFee(input: ApiFee) {\n  const result: ExplainedTransferFee = {\n    isGasless: false,\n    canTransferFullBalance: input.tokenSlug === TONCOIN.slug,\n  };\n\n  if (input.fee !== undefined) {\n    result.fullFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'lessThan',\n      terms: { native: input.fee },\n      nativeSum: input.fee,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realFee !== undefined) {\n    result.realFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'approximate',\n      terms: { native: input.realFee },\n      nativeSum: input.realFee,\n    };\n  }\n\n  if (input.fee !== undefined && input.realFee !== undefined) {\n    result.excessFee = input.fee - input.realFee;\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel transfer data\n */\nfunction explainGaslessTransferFee({ diesel }: ApiFeeWithDiesel) {\n  const isStarsDiesel = diesel.status === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n  const realFeeInDiesel = convertFee(diesel.realFee, diesel.nativeAmount, diesel.amount);\n  // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n  const dieselRealFee = bigintMin(diesel.amount, realFeeInDiesel);\n  // Cover the remaining real fee with the native token.\n  const nativeRealFee = bigintMax(0n, diesel.realFee - diesel.nativeAmount);\n\n  return {\n    isGasless: true,\n    canTransferFullBalance: false,\n    fullFee: {\n      precision: 'lessThan',\n      terms: {\n        [dieselKey]: diesel.amount,\n        native: diesel.remainingFee,\n      },\n      nativeSum: diesel.nativeAmount + diesel.remainingFee,\n    },\n    realFee: {\n      precision: 'approximate',\n      terms: {\n        [dieselKey]: dieselRealFee,\n        native: nativeRealFee,\n      },\n      nativeSum: diesel.realFee,\n    },\n    excessFee: diesel.nativeAmount + diesel.remainingFee - diesel.realFee,\n  } satisfies ExplainedTransferFee;\n}\n\n/**\n * `exampleFromAmount` and `exampleToAmount` define the exchange rate used to convert `amount`.\n * `exampleFromAmount` is defined in the same currency as `amount`. Mustn't be 0.\n * `exampleToAmount` is defined in the currency you want to get.\n */\nfunction convertFee(\n  amount: bigint,\n  exampleFromAmount: bigint,\n  exampleToAmount: bigint,\n) {\n  const exchangeRate = Big(exampleToAmount.toString()).div(exampleFromAmount.toString());\n  return BigInt(Big(amount.toString()).mul(exchangeRate).round().toString());\n}\n","import type { ApiChain } from '../api/types';\n\nimport { getChainConfig } from './chain';\nimport { isDnsDomain } from './dns';\n\nexport function isValidAddressOrDomain(address: string, chain: ApiChain, allowPrefix?: boolean) {\n  const config = getChainConfig(chain);\n  return address && (\n    config[allowPrefix ? 'addressPrefixRegex' : 'addressRegex'].test(address)\n    || (config.isDnsSupported && isDnsDomain(address))\n  );\n}\n","import type { GlobalState } from '../types';\n\nimport { explainApiTransferFee, getMaxTransferAmount } from '../../util/fee/transferFee';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug } from '../../util/tokens';\nimport { selectCurrentAccount } from './accounts';\nimport { selectChainTokenWithMaxBalanceSlow, selectCurrentAccountTokenBalance } from './tokens';\n\nexport function selectCurrentTransferMaxAmount(global: GlobalState) {\n  const { currentTransfer } = global;\n  const tokenBalance = selectCurrentAccountTokenBalance(global, currentTransfer.tokenSlug);\n  const { fullFee, canTransferFullBalance } = explainApiTransferFee(currentTransfer);\n  return getMaxTransferAmount({\n    tokenBalance,\n    tokenSlug: currentTransfer.tokenSlug,\n    fullFee: fullFee?.terms,\n    canTransferFullBalance,\n  });\n}\n\n/**\n * Returns the token slug that should be set to current transfer form to keep the token in sync with the \"to\" address\n */\nexport function selectTokenMatchingCurrentTransferAddressSlow(global: GlobalState): string {\n  const { tokenSlug: currentTokenSlug, toAddress } = global.currentTransfer;\n  const currentChain = getChainBySlug(currentTokenSlug);\n\n  if (!toAddress) {\n    return currentTokenSlug;\n  }\n\n  // First try to match a chain by the full address, then by the prefix.\n  // Because a valid TRON address is a prefix of a valid TON address, and we want to match TRON in this case.\n  for (const isCheckingPrefix of [false, true]) {\n    // If the current token already matches the address, no need to change it\n    if (!toAddress || isValidAddressOrDomain(toAddress, currentChain, isCheckingPrefix)) {\n      return currentTokenSlug;\n    }\n\n    // Otherwise, find the best token of the address's chain\n    const availableChains = selectCurrentAccount(global)?.addressByChain;\n    if (availableChains) {\n      for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n        if (!isValidAddressOrDomain(toAddress, chain, isCheckingPrefix)) {\n          continue;\n        }\n\n        const token = selectChainTokenWithMaxBalanceSlow(global, chain);\n        if (token) return token.slug;\n      }\n    }\n  }\n\n  // If the address matches no available chain, don't change the selected token\n  return currentTokenSlug;\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { DEFAULT_NOMINATORS_STAKING_STATE, TONCOIN } from '../../config';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\nimport { selectAccountState } from './accounts';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst selectAccountStakingStatesMemoizedFor = withCache((accountId: string) => memoize((\n  stateDefault: ApiStakingState,\n  stateById?: Record<string, ApiStakingState>,\n) => {\n  const states = stateById ? Object.values(stateById) : undefined;\n  return states?.length ? states : [stateDefault];\n}));\n\nexport function selectAccountStakingStates(global: GlobalState, accountId: string) {\n  const { stateById } = selectAccountState(global, accountId)?.staking ?? {};\n  return selectAccountStakingStatesMemoizedFor(accountId)(global.stakingDefault, stateById);\n}\n\nexport function selectAccountStakingState(global: GlobalState, accountId: string): ApiStakingState {\n  const { stateById, stakingId, shouldUseNominators } = selectAccountState(global, accountId)?.staking ?? {};\n\n  if (!stateById || !stakingId || !(stakingId in stateById)) {\n    return shouldUseNominators ? DEFAULT_NOMINATORS_STAKING_STATE : global.stakingDefault;\n  }\n\n  return stateById[stakingId];\n}\n\nexport function selectAccountStakingHistory(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return stakingState.tokenSlug === TONCOIN.slug ? accountState?.stakingHistory : undefined;\n}\n\nexport function selectAccountStakingTotalProfit(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return (stakingState.tokenSlug === TONCOIN.slug ? accountState?.staking?.totalProfit : undefined) ?? 0n;\n}\n","import { DEFAULT_PRICE_CURRENCY, IS_EXTENSION } from '../../../config';\nimport {\n  IS_ANDROID_APP, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP,\n} from '../../../util/windowEnvironment';\nimport { callApi, initApi } from '../../../api';\nimport { addActionHandler, getGlobal } from '../../index';\nimport { selectNewestActivityTimestamps } from '../../selectors';\n\naddActionHandler('initApi', async (global, actions) => {\n  initApi(actions.apiUpdate, {\n    isElectron: IS_ELECTRON,\n    isNativeBottomSheet: IS_DELEGATED_BOTTOM_SHEET,\n    isIosApp: IS_IOS_APP,\n    isAndroidApp: IS_ANDROID_APP,\n    referrer: new URLSearchParams(window.location.search).get('r') ?? undefined,\n  });\n\n  await callApi('waitDataPreload');\n\n  const { currentAccountId } = getGlobal();\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const newestActivityTimestamps = selectNewestActivityTimestamps(global, currentAccountId);\n\n  void callApi('activateAccount', currentAccountId, newestActivityTimestamps);\n});\n\naddActionHandler('resetApiSettings', (global, actions, params) => {\n  const isDefaultEnabled = !params?.areAllDisabled;\n\n  if (IS_EXTENSION) {\n    actions.toggleTonMagic({ isEnabled: false });\n    actions.toggleTonProxy({ isEnabled: false });\n  }\n  if (IS_EXTENSION || IS_ELECTRON) {\n    actions.toggleDeeplinkHook({ isEnabled: isDefaultEnabled });\n  }\n  actions.changeBaseCurrency({ currency: DEFAULT_PRICE_CURRENCY });\n});\n","export var BiometryType;\n(function (BiometryType) {\n    // Android, iOS\n    BiometryType[BiometryType[\"NONE\"] = 0] = \"NONE\";\n    // iOS\n    BiometryType[BiometryType[\"TOUCH_ID\"] = 1] = \"TOUCH_ID\";\n    // iOS\n    BiometryType[BiometryType[\"FACE_ID\"] = 2] = \"FACE_ID\";\n    // Android\n    BiometryType[BiometryType[\"FINGERPRINT\"] = 3] = \"FINGERPRINT\";\n    // Android\n    BiometryType[BiometryType[\"FACE_AUTHENTICATION\"] = 4] = \"FACE_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"IRIS_AUTHENTICATION\"] = 5] = \"IRIS_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"MULTIPLE\"] = 6] = \"MULTIPLE\";\n})(BiometryType || (BiometryType = {}));\n/**\n * Keep this in sync with BiometricAuthError in README.md\n * Update whenever `convertToPluginErrorCode` functions are modified\n */\nexport var BiometricAuthError;\n(function (BiometricAuthError) {\n    BiometricAuthError[BiometricAuthError[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_UNAVAILABLE\"] = 1] = \"BIOMETRICS_UNAVAILABLE\";\n    BiometricAuthError[BiometricAuthError[\"USER_LOCKOUT\"] = 2] = \"USER_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_NOT_ENROLLED\"] = 3] = \"BIOMETRICS_NOT_ENROLLED\";\n    BiometricAuthError[BiometricAuthError[\"USER_TEMPORARY_LOCKOUT\"] = 4] = \"USER_TEMPORARY_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"AUTHENTICATION_FAILED\"] = 10] = \"AUTHENTICATION_FAILED\";\n    BiometricAuthError[BiometricAuthError[\"APP_CANCEL\"] = 11] = \"APP_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"INVALID_CONTEXT\"] = 12] = \"INVALID_CONTEXT\";\n    BiometricAuthError[BiometricAuthError[\"NOT_INTERACTIVE\"] = 13] = \"NOT_INTERACTIVE\";\n    BiometricAuthError[BiometricAuthError[\"PASSCODE_NOT_SET\"] = 14] = \"PASSCODE_NOT_SET\";\n    BiometricAuthError[BiometricAuthError[\"SYSTEM_CANCEL\"] = 15] = \"SYSTEM_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_CANCEL\"] = 16] = \"USER_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_FALLBACK\"] = 17] = \"USER_FALLBACK\";\n})(BiometricAuthError || (BiometricAuthError = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from \"@capacitor/core\";\nconst NativeBiometric = registerPlugin(\"NativeBiometric\", {\n    web: () => import(\"./web\").then((m) => new m.NativeBiometricWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeBiometric };\n//# sourceMappingURL=index.js.map","export function random(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport function sample<T extends any>(arr: T[]) {\n  return arr[random(0, arr.length - 1)];\n}\n\nexport function randomBytes(size: number) {\n  // eslint-disable-next-line no-restricted-globals\n  return self.crypto.getRandomValues(new Uint8Array(size));\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { applyStyles } from './animation';\nimport { SECOND } from './dateFormat';\nimport safeExec from './safeExec';\nimport { throttle } from './schedulers';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nconst WINDOW_RESIZE_THROTTLE_MS = IS_TELEGRAM_APP ? 25 : 250;\nconst WINDOW_ORIENTATION_CHANGE_THROTTLE_MS = IS_IOS ? 350 : 250;\nconst SAFE_AREA_INITIALIZATION_DELAY = SECOND;\nconst SAFE_AREA_TOLERANCE_HEIGHT_PX = 40;\n\nconst initialHeight = window.innerHeight;\nconst virtualKeyboardOpenListeners: NoneToVoidFunction[] = [];\n\nlet currentWindowSize = updateSizes();\n\nwindow.addEventListener('orientationchange', throttle(() => {\n  currentWindowSize = updateSizes();\n}, WINDOW_ORIENTATION_CHANGE_THROTTLE_MS, false));\n\nif (!IS_IOS) {\n  window.addEventListener('resize', throttle(() => {\n    currentWindowSize = updateSizes();\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nif (IS_CAPACITOR) {\n  void import('@capacitor/keyboard')\n    .then(({ Keyboard }) => {\n      void Keyboard.addListener('keyboardDidShow', async (info) => {\n        await adjustBodyPaddingForKeyboard(info.keyboardHeight);\n\n        for (const cb of virtualKeyboardOpenListeners) {\n          safeExec(cb);\n        }\n      });\n\n      void Keyboard.addListener('keyboardWillHide', () => {\n        void adjustBodyPaddingForKeyboard(0);\n      });\n    });\n}\n\nif ('visualViewport' in window && (IS_IOS || IS_ANDROID)) {\n  window.visualViewport!.addEventListener('resize', throttle((e: Event) => {\n    const target = e.target as VisualViewport;\n\n    // In the TMA application on iOS, the VisualViewport behaves incorrectly,\n    // not taking into account the height of the virtual keyboard.\n    if (IS_IOS && IS_TELEGRAM_APP) {\n      const keyboardHeight = initialHeight - target.height;\n      adjustBodyPaddingForKeyboard(keyboardHeight > SAFE_AREA_TOLERANCE_HEIGHT_PX ? keyboardHeight : 0)\n        .finally(() => {\n          requestMeasure(() => {\n            currentWindowSize = {\n              ...getWindowSize(),\n              height: target.height,\n            };\n          });\n        });\n    } else {\n      patchVh();\n      currentWindowSize = {\n        ...getWindowSize(),\n        height: target.height,\n      };\n    }\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nexport function updateSizes() {\n  patchVh();\n  patchSafeAreaProperty();\n\n  return getWindowSize();\n}\n\nfunction getWindowSize() {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    screenHeight: window.screen.height,\n    safeAreaTop: getSafeAreaTop(),\n    safeAreaBottom: getSafeAreaBottom(),\n  };\n}\n\nexport default {\n  get: () => currentWindowSize,\n  getIsKeyboardVisible: () => initialHeight > currentWindowSize.height,\n};\n\n// Registers a callback that will be fired each time the virtual keyboard is opened and the <body> size is adjusted\nexport function onVirtualKeyboardOpen(cb: NoneToVoidFunction) {\n  virtualKeyboardOpenListeners.push(cb);\n}\n\nfunction patchVh() {\n  if (!(IS_IOS || IS_ANDROID) || IS_CAPACITOR || (IS_IOS && IS_TELEGRAM_APP)) return;\n\n  const height = IS_IOS ? window.visualViewport!.height + window.visualViewport!.pageTop : window.innerHeight;\n\n  requestMutation(() => {\n    const vh = height * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n  });\n}\n\nfunction adjustBodyPaddingForKeyboard(keyboardHeight: number) {\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      applyStyles(document.body, { paddingBottom: keyboardHeight ? `${keyboardHeight}px` : '' });\n      resolve();\n    });\n  });\n}\n\nfunction patchSafeAreaProperty() {\n  toggleSafeAreaClasses();\n\n  // WebKit has issues with this property on page load\n  // https://bugs.webkit.org/show_bug.cgi?id=191872\n  setTimeout(toggleSafeAreaClasses, SAFE_AREA_INITIALIZATION_DELAY);\n}\n\nfunction getSafeAreaTop() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-top-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction getSafeAreaBottom() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-bottom-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction toggleSafeAreaClasses() {\n  const { safeAreaTop, safeAreaBottom } = getWindowSize();\n  const { documentElement } = document;\n\n  requestMutation(() => {\n    documentElement.classList.toggle('with-safe-area-top', !Number.isNaN(safeAreaTop) && safeAreaTop > 0);\n    documentElement.classList.toggle('with-safe-area-bottom', !Number.isNaN(safeAreaBottom) && safeAreaBottom > 0);\n  });\n}\n","import type { Telegram, WebApp } from '@twa-dev/types';\nimport { getActions } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { logDebugError } from '../logs';\nimport { getIsMobileTelegramApp } from '../windowEnvironment';\nimport { updateSizes } from '../windowSize';\n\ndeclare global {\n  interface Window {\n    Telegram: Telegram;\n  }\n}\n\nlet webApp: WebApp | undefined;\nlet isBiometricInited = false;\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\nlet disableSwipeRequests = 0;\n\nexport function initTelegramApp() {\n  webApp = window.Telegram?.WebApp;\n\n  if (!webApp) {\n    logDebugError('[telegram] Can\\'t initialize Telegram Mini-App');\n\n    return;\n  }\n\n  enableTelegramMiniAppSwipeToClose();\n  webApp.lockOrientation();\n  webApp.MainButton.hide();\n  webApp.SecondaryButton.hide();\n  webApp.BackButton.hide();\n  webApp.SettingsButton.hide();\n  webApp.expand();\n\n  if (getIsMobileTelegramApp()) {\n    webApp.onEvent('safeAreaChanged', updateSafeAreaProperties);\n    webApp.onEvent('contentSafeAreaChanged', updateSafeAreaProperties);\n  }\n\n  webApp.onEvent('viewportChanged', updateViewport);\n  updateSafeAreaProperties();\n  initTelegramAppBiometric();\n\n  webApp.ready();\n}\n\nexport function initTelegramWithGlobal(global: GlobalState) {\n  if (global.isFullscreen) {\n    webApp!.requestFullscreen();\n  }\n\n  webApp!.onEvent('fullscreenChanged', updateFullscreenState);\n  webApp!.onEvent('fullscreenFailed', onFullscreenFailed);\n}\n\nexport function initTelegramAppBiometric() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager || isBiometricInited) return;\n\n  isBiometricInited = true;\n  biometricManager.init(() => {\n    const {\n      isBiometricAvailable, biometricType, isAccessGranted, isAccessRequested,\n    } = biometricManager;\n\n    isNativeBiometricAuthSupported = isBiometricAvailable && (isAccessGranted || !isAccessRequested);\n    if (webApp!.platform === 'ios') {\n      isFaceIdAvailable = biometricType === 'face';\n      isTouchIdAvailable = biometricType === 'finger';\n    }\n  });\n}\n\nexport function getIsTelegramBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsTelegramFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsTelegramTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport function getIsTelegramBiometricsRestricted() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager) return undefined;\n\n  const { isBiometricAvailable, isAccessGranted, isAccessRequested } = biometricManager;\n\n  return isBiometricAvailable && isAccessRequested && !isAccessGranted;\n}\n\nexport function getTelegramApp() {\n  return webApp;\n}\n\nexport function getTelegramAppAsync(): Promise<WebApp | undefined> {\n  return new Promise((resolve) => {\n    window.addEventListener('DOMContentLoaded', () => {\n      resolve(getTelegramApp());\n    });\n  });\n}\n\nfunction updateViewport({ isStateStable }: { isStateStable: boolean }) {\n  if (isStateStable) {\n    updateSizes();\n  }\n}\n\nfunction updateSafeAreaProperties() {\n  const {\n    top, left, right, bottom,\n  } = webApp!.safeAreaInset;\n  const {\n    top: contentTop, left: contentLeft, right: contentRight, bottom: contentBottom,\n  } = webApp!.contentSafeAreaInset;\n\n  document.documentElement.style.setProperty('--safe-area-top', `${top + contentTop}px`);\n  document.documentElement.style.setProperty('--safe-area-left', `${left + contentLeft}px`);\n  document.documentElement.style.setProperty('--safe-area-right', `${right + contentRight}px`);\n  document.documentElement.style.setProperty('--safe-area-bottom', `${bottom + contentBottom}px`);\n}\n\nfunction updateFullscreenState() {\n  if (webApp!.isFullscreen) {\n    getActions().openFullscreen();\n    disableTelegramMiniAppSwipeToClose();\n  } else {\n    getActions().closeFullscreen();\n    enableTelegramMiniAppSwipeToClose();\n  }\n}\n\nfunction onFullscreenFailed(params: { error: 'UNSUPPORTED' | 'ALREADY_FULLSCREEN' }) {\n  enableTelegramMiniAppSwipeToClose();\n  // This error occurs when the user has requested fullscreen, but the application is already open fullscreen.\n  // In this case, we just mark in the global that the application is running in fullscreen mode.\n  if (params.error === 'ALREADY_FULLSCREEN') {\n    getActions().openFullscreen();\n    disableTelegramMiniAppSwipeToClose();\n  }\n}\n\nexport function disableTelegramMiniAppSwipeToClose() {\n  disableSwipeRequests += 1;\n\n  if (disableSwipeRequests === 1) {\n    webApp?.disableVerticalSwipes();\n  }\n}\n\nexport function enableTelegramMiniAppSwipeToClose() {\n  disableSwipeRequests = Math.max(0, disableSwipeRequests - 1);\n\n  if (disableSwipeRequests === 0) {\n    webApp?.enableVerticalSwipes();\n  }\n}\n","import type { BiometricRequestAccessParams } from '@twa-dev/types';\n\nimport { APP_NAME } from '../../config';\nimport { getTelegramApp } from '../telegram';\n\nfunction requestBiometricAccess(options: BiometricRequestAccessParams) {\n  return new Promise((resolve, reject) => {\n    getTelegramApp()!.BiometricManager.requestAccess(options, (accessGranted) => {\n      if (accessGranted) {\n        resolve(accessGranted);\n      } else {\n        reject(new Error('Access denied'));\n      }\n    });\n  });\n}\n\nexport async function setBiometricCredentials(password: string) {\n  const biometricManager = getTelegramApp()?.BiometricManager!;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Access to biometric data has not been granted');\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    biometricManager.updateBiometricToken(password, (updated) => {\n      if (updated) {\n        resolve(password);\n      } else {\n        reject(new Error('Failed to update or save the biometric token'));\n      }\n    });\n  });\n}\n\nexport async function verifyIdentity() {\n  const biometricManager = getTelegramApp()?.BiometricManager!;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Biometric access was denied. Please grant access to proceed.');\n    }\n  }\n\n  return new Promise<{ success: boolean; token: string }>((resolve, reject) => {\n    biometricManager.authenticate(\n      { reason: '' },\n      // @ts-ignore Wrong type signature https://github.com/twa-dev/types/pull/12\n      (success: boolean, token: string) => {\n        if (success) {\n          resolve({ success, token });\n        } else {\n          reject(new Error('Biometric authentication failed. Please try again.'));\n        }\n      },\n    );\n  });\n}\n","import type { AuthConfig, WebAuthn } from './types';\n\nimport { APP_NAME } from '../../config';\nimport { randomBytes } from '../random';\nimport { pause } from '../schedulers';\n\ndeclare global {\n  interface AuthenticationExtensionsClientInputs {\n    credBlob?: Uint8Array; // max 32 bytes\n    getCredBlob?: boolean;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { salt1: Uint8Array }; // 32-byte random data\n  }\n\n  interface AuthenticationExtensionsClientOutputs {\n    credBlob?: boolean;\n    getCredBlob?: Uint8Array;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { output1: Uint8Array };\n  }\n\n  interface AuthenticatorResponse {\n    getTransports?: () => AuthenticatorTransport[];\n  }\n}\n\nexport interface CredentialCreationResult {\n  type: 'credBlob' | 'userHandle';\n  password: {\n    credBlob: string;\n    userHandle: string;\n  };\n  credential: PublicKeyCredential;\n}\n\nenum PubkeyAlg {\n  Ed25519 = -8,\n  ES256 = -7,\n  RS256 = -257,\n}\n\nconst CREDENTIAL_SIZE = 32;\nconst RP_NAME = APP_NAME;\nconst USER_NAME = APP_NAME;\nconst PAUSE = 300;\nconst CREDENTIAL_TIMEOUT = 120000;\n\nasync function createCredential() {\n  const rpId = window.location.hostname;\n\n  const userHandle = randomBytes(CREDENTIAL_SIZE);\n  const credBlob = randomBytes(CREDENTIAL_SIZE);\n\n  const options: CredentialCreationOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      rp: {\n        name: RP_NAME,\n        id: rpId,\n      },\n      user: {\n        id: userHandle,\n        name: USER_NAME,\n        displayName: RP_NAME,\n      },\n      pubKeyCredParams: [\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.ES256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.RS256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.Ed25519,\n        },\n      ],\n      authenticatorSelection: {\n        requireResidentKey: true,\n        userVerification: 'preferred',\n      },\n      extensions: {\n        credBlob,\n        hmacCreateSecret: true,\n      },\n      timeout: CREDENTIAL_TIMEOUT,\n      excludeCredentials: [],\n    },\n  };\n\n  const credential = (await navigator.credentials.create(options)) as PublicKeyCredential;\n\n  if (!credential) {\n    throw new Error('Missing credential');\n  }\n\n  const extensions = credential.getClientExtensionResults();\n  const type = extensions.credBlob ? 'credBlob' : 'userHandle';\n\n  return {\n    type,\n    password: {\n      credBlob: Buffer.from(credBlob).toString('hex'),\n      userHandle: Buffer.from(userHandle).toString('hex'),\n    },\n    credential,\n  } as CredentialCreationResult;\n}\n\nasync function verify({ credential, password, type }: CredentialCreationResult) {\n  await pause(PAUSE);\n\n  const transports = credential.response\n    && credential.response.getTransports\n    && credential.response.getTransports();\n\n  const credentialId = Buffer.from(credential.rawId).toString('hex');\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: credential.rawId,\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (!assertion) {\n    throw new Error('Missing authentication');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n  let result: string | undefined;\n  switch (type) {\n    case 'userHandle': {\n      if (!response.userHandle) {\n        throw new Error('Missing stored userHandle');\n      }\n      if (!Buffer.from(password.userHandle, 'hex').equals(Buffer.from(response.userHandle))) {\n        throw new Error('Stored blob not equals passed blob');\n      }\n      result = password.userHandle;\n      break;\n    }\n  }\n\n  if (!result) {\n    throw new Error('Missing stored blob');\n  }\n\n  const config: WebAuthn = {\n    kind: 'webauthn',\n    type,\n    credentialId,\n    transports,\n  };\n\n  return { config, password: result };\n}\n\nasync function getPassword(config: AuthConfig) {\n  if (config.kind !== 'webauthn') {\n    throw new Error('Unexpected auth kind');\n  }\n\n  const { credentialId, transports, type } = config;\n\n  const controller = new AbortController();\n  const signal = controller.signal;\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: Buffer.from(credentialId, 'hex'),\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n    signal,\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (signal.aborted) {\n    throw new Error('Verification canceled');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n\n  const extensions = assertion.getClientExtensionResults();\n  if (type === 'userHandle') {\n    if (!response.userHandle) {\n      throw new Error('missing userHandle');\n    }\n    return Buffer.from(response.userHandle).toString('hex');\n  } else {\n    return Buffer.from(extensions.getCredBlob ?? '').toString('hex');\n  }\n}\n\nexport default {\n  createCredential,\n  verify,\n  getPassword,\n};\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { AuthConfig, BiometricsSetupResult } from './types';\nimport type { CredentialCreationResult } from './webAuthn';\n\nimport {\n  APP_NAME, IS_TELEGRAM_APP, NATIVE_BIOMETRICS_SERVER, NATIVE_BIOMETRICS_USERNAME,\n} from '../../config';\nimport { logDebugError } from '../logs';\nimport { randomBytes } from '../random';\nimport {\n  setBiometricCredentials as setTelegramBiometricCredentials,\n  verifyIdentity as verifyTelegramBiometricsIdentity,\n} from './telegram';\nimport webAuthn from './webAuthn';\n\nconst CREDENTIAL_SIZE = 32;\n\nasync function setupBiometrics({ credential }: { credential?: CredentialCreationResult }) {\n  let result: BiometricsSetupResult | undefined;\n\n  try {\n    if (!credential) {\n      const password = Buffer.from(randomBytes(CREDENTIAL_SIZE)).toString('hex');\n      const encryptedPassword = await window.electron?.encryptPassword(password);\n      if (!encryptedPassword) {\n        return result;\n      }\n\n      result = {\n        password,\n        config: {\n          kind: 'electron-safe-storage',\n          encryptedPassword,\n        },\n      };\n    } else {\n      result = await webAuthn.verify(credential);\n    }\n  } catch (err) {\n    logDebugError('setupBiometrics', err);\n  }\n\n  return result;\n}\n\nasync function setupNativeBiometrics(password: string): Promise<BiometricsSetupResult> {\n  if (IS_TELEGRAM_APP) {\n    await setTelegramBiometricCredentials(password);\n\n    return {\n      password,\n      config: { kind: 'native-biometrics' },\n    };\n  }\n\n  await NativeBiometric.setCredentials({\n    username: NATIVE_BIOMETRICS_USERNAME,\n    password,\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n\n  return {\n    password,\n    config: { kind: 'native-biometrics' },\n  };\n}\n\nfunction removeNativeBiometrics() {\n  if (IS_TELEGRAM_APP) {\n    return setTelegramBiometricCredentials('');\n  }\n\n  return NativeBiometric.deleteCredentials({\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n}\n\nasync function getPassword(config: AuthConfig) {\n  let password: string | undefined;\n\n  try {\n    if (config.kind === 'webauthn') {\n      password = await webAuthn.getPassword(config);\n    } else if (config.kind === 'electron-safe-storage') {\n      password = await window.electron?.decryptPassword(config.encryptedPassword);\n    } else if (IS_TELEGRAM_APP && config.kind === 'native-biometrics') {\n      const { success: isVerified, token } = await verifyTelegramBiometricsIdentity();\n\n      if (!isVerified) return undefined;\n      password = token;\n    } else if (config.kind === 'native-biometrics') {\n      const isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        isWeakAuthenticatorAllowed: true,\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n\n      if (!isVerified) return undefined;\n\n      const credentials = await NativeBiometric.getCredentials({\n        server: NATIVE_BIOMETRICS_SERVER,\n      });\n      password = credentials.password;\n    } else {\n      throw new Error('Unexpected auth kind');\n    }\n  } catch (err) {\n    logDebugError('submitTransferPassword', err);\n  }\n\n  return password;\n}\n\nexport default {\n  setupBiometrics,\n  setupNativeBiometrics,\n  removeNativeBiometrics,\n  getPassword,\n  webAuthn,\n};\n","import { registerPlugin } from '@capacitor/core';\nconst App = registerPlugin('App', {\n    web: () => import('./web').then(m => new m.AppWeb()),\n});\nexport * from './definitions';\nexport { App };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst SplashScreen = registerPlugin('SplashScreen', {\n    web: () => import('./web').then(m => new m.SplashScreenWeb()),\n});\nexport * from './definitions';\nexport { SplashScreen };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\r\nconst SafeArea = registerPlugin('SafeArea', {\r\n    web: () => import('./web').then(m => new m.SafeAreaWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { SafeArea };\r\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst AppLauncher = registerPlugin('AppLauncher', {\n    web: () => import('./web').then(m => new m.AppLauncherWeb()),\n});\nexport * from './definitions';\nexport { AppLauncher };\n//# sourceMappingURL=index.js.map","import type { ApiChain, ApiNft } from '../api/types';\n\nimport { EMPTY_HASH_VALUE, MTW_CARDS_BASE_URL } from '../config';\nimport { base64ToHex } from './base64toHex';\nimport { logDebugError } from './logs';\n\n// Regexp from https://stackoverflow.com/a/3809435\nconst URL_REGEX = /[-a-z0-9@:%._+~#=]{1,256}\\.[a-z0-9()]{1,6}\\b([-a-z0-9()@:%_+.~#?&/=]*)/gi;\nconst VALID_PROTOCOLS = new Set(['http:', 'https:']);\n\n// The configuration does not contain data for NFT addresses, they must be configured separately\nconst EXPLORER_CONFIGURATIONS = {\n  ton: {\n    name: 'Tonscan',\n    base: {\n      mainnet: 'https://tonscan.org/',\n      testnet: 'https://testnet.tonscan.org/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}jetton/{address}',\n    transaction: '{base}tx/{hash}',\n  },\n  tron: {\n    name: 'Tronscan',\n    base: {\n      mainnet: 'https://tronscan.org/#/',\n      testnet: 'https://shasta.tronscan.org/#/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}token20/{address}',\n    transaction: '{base}transaction/{hash}',\n  },\n};\n\nexport function isValidUrl(url: string, validProtocols = VALID_PROTOCOLS) {\n  try {\n    const match = url.match(URL_REGEX);\n    if (!match) return false;\n\n    const urlObject = new URL(url);\n\n    return validProtocols.has(urlObject.protocol);\n  } catch (e) {\n    logDebugError('isValidUrl', e);\n    return false;\n  }\n}\n\nexport function getHostnameFromUrl(url: string) {\n  try {\n    const urlObject = new URL(url);\n\n    return urlObject.hostname;\n  } catch (e) {\n    logDebugError('getHostnameFromUrl', e);\n    return url;\n  }\n}\n\nexport function getExplorerName(chain: ApiChain) {\n  return EXPLORER_CONFIGURATIONS[chain].name;\n}\n\nfunction getExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].base[isTestnet ? 'testnet' : 'mainnet'];\n}\n\nfunction getTokenExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].explorer.replace('{base}', getExplorerBaseUrl(chain, isTestnet));\n}\n\nexport function getExplorerTransactionUrl(\n  chain: ApiChain,\n  transactionHash: string | undefined,\n  isTestnet?: boolean,\n) {\n  if (!transactionHash || transactionHash === EMPTY_HASH_VALUE) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].transaction\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{hash}', chain === 'ton' ? base64ToHex(transactionHash) : transactionHash);\n}\n\nexport function getExplorerAddressUrl(chain: ApiChain, address?: string, isTestnet?: boolean) {\n  if (!address) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].address\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{address}', address);\n}\n\nexport function getExplorerNftCollectionUrl(nftCollectionAddress?: string, isTestnet?: boolean) {\n  if (!nftCollectionAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftCollectionAddress}`;\n}\n\nexport function getExplorerNftUrl(nftAddress?: string, isTestnet?: boolean) {\n  if (!nftAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftAddress}`;\n}\n\nexport function getExplorerTokenUrl(chain: ApiChain, slug?: string, address?: string, isTestnet?: boolean) {\n  if (!slug && !address) return undefined;\n\n  return address\n    ? getTokenExplorerBaseUrl(chain, isTestnet).replace('{address}', address)\n    : `https://coinmarketcap.com/currencies/${slug}/`;\n}\n\nexport function isTelegramUrl(url: string) {\n  return url.startsWith('https://t.me/');\n}\n\nexport function getCardNftImageUrl(nft: ApiNft): string | undefined {\n  return `${MTW_CARDS_BASE_URL}${nft.metadata!.mtwCardId}.webp`;\n}\n","export function base64ToHex(base64: string): string {\n  const buffer = Buffer.from(base64, 'base64');\n  return buffer.toString('hex');\n}\n","import { AppLauncher } from '@capacitor/app-launcher';\nimport { getActions } from '../global';\n\nimport { IS_CAPACITOR } from '../config';\nimport { isTelegramUrl } from './url';\n\nexport async function openUrl(\n  url: string, options?: { isExternal?: boolean; title?: string; subtitle?: string },\n) {\n  if (IS_CAPACITOR && !options?.isExternal && url.startsWith('http') && !isTelegramUrl(url)) {\n    getActions().openBrowser({\n      url,\n      title: options?.title,\n      subtitle: options?.subtitle,\n    });\n  } else {\n    const couldOpenApp = IS_CAPACITOR && await openAppSafe(url);\n    if (!couldOpenApp) {\n      window.open(url, '_blank', 'noopener');\n    }\n  }\n}\n\nexport function handleOpenUrl(\n  e: React.MouseEvent<HTMLAnchorElement, MouseEvent>,\n) {\n  e.preventDefault();\n  void openUrl(e.currentTarget.href);\n}\n\nasync function openAppSafe(url: string) {\n  try {\n    return (await AppLauncher.openUrl({ url })).completed;\n  } catch (err) {\n    return false;\n  }\n}\n","let resolveRenderPromise: Function;\nconst renderPromise = new Promise((resolve) => {\n  resolveRenderPromise = resolve;\n});\n\nexport function resolveRender() {\n  resolveRenderPromise();\n}\n\nexport function waitRender() {\n  return renderPromise;\n}\n","export const TON_PROTOCOL = 'ton://';\nexport const TONCONNECT_PROTOCOL = 'tc://';\nexport const TONCONNECT_PROTOCOL_SELF = 'mytonwallet-tc://';\nexport const SELF_PROTOCOL = 'mtw://';\nexport const SELF_UNIVERSAL_URLS = ['https://my.tt', 'https://go.mytonwallet.org'];\nexport const TONCONNECT_UNIVERSAL_URL = 'https://connect.mytonwallet.org';\nexport const CHECKIN_URL = 'https://checkin.mytonwallet.org';\n","/**\n * Pulled from @react-hookz/web library source with some edits to match the code-style and use Teact\n * See https://github.com/react-hookz/web/blob/master/src/useMediaQuery/useMediaQuery.ts\n */\n\nimport type { Dispatch } from 'react';\nimport { useEffect, useState } from '../lib/teact/teact';\n\ntype QueryStateSetter = (matches: boolean) => void;\n\n// eslint-disable-next-line max-len, no-spaced-func\nconst queriesMap = new Map<string, { mql: MediaQueryList; dispatchers: Set<Dispatch<boolean>>; listener: () => void }>();\n\nconst createQueryEntry = (query: string) => {\n  const mql = matchMedia(query);\n  const dispatchers = new Set<QueryStateSetter>();\n  const listener = () => {\n    dispatchers.forEach((d) => d(mql.matches));\n  };\n\n  if (mql.addEventListener) mql.addEventListener('change', listener, { passive: true });\n  else mql.addListener(listener);\n\n  return {\n    mql,\n    dispatchers,\n    listener,\n  };\n};\n\nconst querySubscribe = (query: string, setState: QueryStateSetter) => {\n  let entry = queriesMap.get(query);\n\n  if (!entry) {\n    entry = createQueryEntry(query);\n    queriesMap.set(query, entry);\n  }\n\n  entry.dispatchers.add(setState);\n  setState(entry.mql.matches);\n};\n\nconst queryUnsubscribe = (query: string, setState: QueryStateSetter): void => {\n  const entry = queriesMap.get(query);\n\n  if (!entry) {\n    return;\n  }\n\n  const { mql, dispatchers, listener } = entry;\n  dispatchers.delete(setState);\n\n  if (!dispatchers.size) {\n    queriesMap.delete(query);\n\n    if (mql.removeEventListener) mql.removeEventListener('change', listener);\n    else mql.removeListener(listener);\n  }\n};\n\ninterface UseMediaQueryOptions {\n  initializeWithValue?: boolean;\n}\n\n/**\n * Tracks the state of CSS media query.\n *\n * @param query CSS media query to track.\n * @param options Hook options:\n * `initializeWithValue` (default: `true`) - Determine media query match state on first render. Setting\n * this to false will make the hook yield `undefined` on first render.\n */\nexport function useMediaQuery(query: string, options?: UseMediaQueryOptions): boolean | undefined {\n  function getInitialState() {\n    if (options?.initializeWithValue ?? true) {\n      let entry = queriesMap.get(query);\n      if (!entry) {\n        entry = createQueryEntry(query);\n        queriesMap.set(query, entry);\n      }\n      return entry.mql.matches;\n    }\n\n    return undefined;\n  }\n\n  const [state, setState] = useState<boolean | undefined>(getInitialState());\n\n  useEffect(() => {\n    querySubscribe(query, setState);\n\n    return () => queryUnsubscribe(query, setState);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n\n  return state;\n}\n","import { MOBILE_SCREEN_MAX_WIDTH } from '../config';\nimport { useMediaQuery } from './useMediaQuery';\n\nlet isPortrait: boolean | undefined;\n\nexport function useDeviceScreen() {\n  isPortrait = useMediaQuery(`(max-width: ${MOBILE_SCREEN_MAX_WIDTH - 0.02}px)`);\n  const isSmallHeight = useMediaQuery('(max-height: 43.5rem)');\n\n  return {\n    isPortrait,\n    isSmallHeight,\n    isLandscape: !isPortrait,\n    screenHeight: window.screen.height,\n  };\n}\n\nexport function getIsPortrait() {\n  return isPortrait;\n}\n\nexport function getIsLandscape() {\n  return !isPortrait;\n}\n","import { getActions, getGlobal } from '../../global';\n\nimport type { ActionPayloads, GlobalState } from '../../global/types';\nimport { ActiveTab, ContentTab } from '../../global/types';\n\nimport {\n  DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  GIVEAWAY_CHECKIN_URL,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectAccountTokenBySlug,\n  selectCurrentAccount,\n  selectCurrentAccountNftByAddress,\n  selectTokenByMinterAddress,\n} from '../../global/selectors';\nimport { callApi } from '../../api';\nimport { isValidAddressOrDomain } from '../isValidAddressOrDomain';\nimport { omitUndefined } from '../iteratees';\nimport { logDebug, logDebugError } from '../logs';\nimport { openUrl } from '../openUrl';\nimport { waitRender } from '../renderPromise';\nimport { isTelegramUrl } from '../url';\nimport {\n  CHECKIN_URL,\n  SELF_PROTOCOL,\n  SELF_UNIVERSAL_URLS,\n  TON_PROTOCOL,\n  TONCONNECT_PROTOCOL,\n  TONCONNECT_PROTOCOL_SELF,\n  TONCONNECT_UNIVERSAL_URL,\n} from './constants';\n\nimport { getIsLandscape, getIsPortrait } from '../../hooks/useDeviceScreen';\n\nenum DeeplinkCommand {\n  CheckinWithR = 'r',\n  Swap = 'swap',\n  BuyWithCrypto = 'buy-with-crypto',\n  BuyWithCard = 'buy-with-card',\n  Stake = 'stake',\n  Giveaway = 'giveaway',\n  Transfer = 'transfer',\n  Explore = 'explore',\n}\n\nlet urlAfterSignIn: string | undefined;\n\nexport function processDeeplinkAfterSignIn() {\n  if (!urlAfterSignIn) return;\n\n  void processDeeplink(urlAfterSignIn);\n\n  urlAfterSignIn = undefined;\n}\n\nexport function openDeeplinkOrUrl(url: string, isExternal = false, isFromInAppBrowser = false) {\n  if (isTonDeeplink(url) || isTonConnectDeeplink(url) || isSelfDeeplink(url)) {\n    void processDeeplink(url, isFromInAppBrowser);\n  } else {\n    void openUrl(url, { isExternal });\n  }\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport function processDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!getGlobal().currentAccountId) {\n    urlAfterSignIn = url;\n  }\n\n  if (isTonConnectDeeplink(url)) {\n    return processTonConnectDeeplink(url, isFromInAppBrowser);\n  } else if (isSelfDeeplink(url)) {\n    return processSelfDeeplink(url);\n  } else {\n    return processTonDeeplink(url);\n  }\n}\n\nexport function isTonDeeplink(url: string) {\n  return url.startsWith(TON_PROTOCOL);\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonDeeplink(url: string): Promise<boolean> {\n  await waitRender();\n\n  const actions = getActions();\n  const global = getGlobal();\n  if (!global.currentAccountId) {\n    return false;\n  }\n\n  const startTransferParams = parseTonDeeplink(url, global);\n\n  if (!startTransferParams) {\n    return false;\n  }\n\n  if ('error' in startTransferParams) {\n    actions.showError({ error: startTransferParams.error });\n    return true;\n  }\n\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    ...startTransferParams,\n  });\n\n  if (getIsLandscape()) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n\n  return true;\n}\n\n/**\n * Parses a TON deeplink and checks whether the transfer can be initiated.\n * Returns `undefined` if the URL is not a TON deeplink.\n * If there is `error` in the result, there is a problem with the deeplink (the string is to translate via `lang`).\n * Otherwise, returned the parsed transfer parameters.\n */\nexport function parseTonDeeplink(url: string, global: GlobalState) {\n  const params = rawParseTonDeeplink(url);\n  if (!params) return undefined;\n\n  const {\n    toAddress,\n    amount,\n    comment,\n    binPayload,\n    jettonAddress,\n    nftAddress,\n    stateInit,\n  } = params;\n\n  const verifiedAddress = isValidAddressOrDomain(toAddress, 'ton') ? toAddress : undefined;\n\n  const transferParams: Omit<NonNullable<ActionPayloads['startTransfer']>, 'isPortrait'> & { error?: string } = {\n    toAddress: verifiedAddress,\n    tokenSlug: TONCOIN.slug,\n    amount,\n    comment,\n    binPayload,\n    stateInit,\n  };\n\n  if (jettonAddress) {\n    const globalToken = jettonAddress\n      ? selectTokenByMinterAddress(global, jettonAddress)\n      : undefined;\n\n    if (!globalToken) {\n      transferParams.error = '$unknown_token_address';\n    } else {\n      const accountToken = selectAccountTokenBySlug(global, globalToken.slug);\n\n      if (!accountToken) {\n        transferParams.error = '$dont_have_required_token';\n      } else {\n        transferParams.tokenSlug = globalToken.slug;\n      }\n    }\n  }\n\n  if (nftAddress) {\n    const accountNft = selectCurrentAccountNftByAddress(global, nftAddress);\n\n    if (!accountNft) {\n      transferParams.error = '$dont_have_required_nft';\n    } else {\n      transferParams.nfts = [accountNft];\n    }\n  }\n\n  return omitUndefined(transferParams);\n}\n\nfunction rawParseTonDeeplink(value?: string) {\n  if (typeof value !== 'string' || !isTonDeeplink(value) || !value.includes('/transfer/')) {\n    return undefined;\n  }\n\n  try {\n    // In some browsers URL module may handle non-standard protocols incorrectly\n    const adaptedDeeplink = value.replace(TON_PROTOCOL, 'https://');\n    const url = new URL(adaptedDeeplink);\n\n    const toAddress = url.pathname.replace(/\\//g, '');\n    const amount = getDeeplinkSearchParam(url, 'amount');\n    const comment = getDeeplinkSearchParam(url, 'text');\n    const binPayload = getDeeplinkSearchParam(url, 'bin');\n    const jettonAddress = getDeeplinkSearchParam(url, 'jetton');\n    const nftAddress = getDeeplinkSearchParam(url, 'nft');\n    const stateInit = getDeeplinkSearchParam(url, 'init') || getDeeplinkSearchParam(url, 'stateInit');\n\n    return {\n      toAddress,\n      amount: amount ? BigInt(amount) : undefined,\n      comment,\n      jettonAddress,\n      nftAddress,\n      binPayload: binPayload ? replaceAllSpacesWithPlus(binPayload) : undefined,\n      stateInit: stateInit ? replaceAllSpacesWithPlus(stateInit) : undefined,\n    };\n  } catch (err) {\n    return undefined;\n  }\n}\n\nfunction isTonConnectDeeplink(url: string) {\n  return url.startsWith(TONCONNECT_PROTOCOL)\n    || url.startsWith(TONCONNECT_PROTOCOL_SELF)\n    || omitProtocol(url).startsWith(omitProtocol(TONCONNECT_UNIVERSAL_URL));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonConnectDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!isTonConnectDeeplink(url)) {\n    return false;\n  }\n\n  const { openLoadingOverlay, closeLoadingOverlay } = getActions();\n\n  openLoadingOverlay();\n\n  const returnUrl = await callApi('startSseConnection', {\n    url,\n    isFromInAppBrowser,\n  });\n\n  closeLoadingOverlay();\n\n  if (returnUrl) {\n    void openUrl(returnUrl, { isExternal: !isFromInAppBrowser });\n  }\n\n  return true;\n}\n\nexport function isSelfDeeplink(url: string) {\n  url = forceHttpsProtocol(url);\n\n  return url.startsWith(SELF_PROTOCOL)\n    || SELF_UNIVERSAL_URLS.some((u) => url.startsWith(u));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport async function processSelfDeeplink(deeplink: string): Promise<boolean> {\n  try {\n    deeplink = convertSelfDeeplinkToSelfUrl(deeplink);\n\n    const { pathname, searchParams } = new URL(deeplink);\n    const command = pathname.split('/').find(Boolean);\n    const actions = getActions();\n    const global = getGlobal();\n    const { isTestnet } = global.settings;\n    const isLedger = selectCurrentAccount(global)?.ledger;\n\n    logDebug('Processing deeplink', deeplink);\n\n    switch (command) {\n      case DeeplinkCommand.CheckinWithR: {\n        const r = pathname.match(/r\\/(.*)$/)?.[1];\n        const url = `${CHECKIN_URL}${r ? `?r=${r}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Giveaway: {\n        const giveawayId = pathname.match(/giveaway\\/([^/]+)/)?.[1];\n        const url = `${GIVEAWAY_CHECKIN_URL}${giveawayId ? `?giveawayId=${giveawayId}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Swap: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || TONCOIN.slug,\n            tokenOutSlug: searchParams.get('out') || DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '10',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCrypto: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n            tokenOutSlug: searchParams.get('out') || TONCOIN.slug,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '100',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCard: {\n        if (isTestnet) {\n          actions.showError({ error: 'Buying with card is not supported in Testnet.' });\n        } else {\n          actions.openOnRampWidgetModal({ chain: 'ton' });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Stake: {\n        if (isTestnet) {\n          actions.showError({ error: 'Staking is not supported in Testnet.' });\n        } else {\n          actions.startStaking();\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Transfer: {\n        return await processTonDeeplink(convertSelfUrlToTonDeeplink(deeplink));\n      }\n\n      case DeeplinkCommand.Explore: {\n        actions.closeSettings();\n        actions.openExplore();\n        actions.setActiveContentTab({ tab: ContentTab.Explore });\n\n        const host = pathname.split('/').filter(Boolean)[1];\n        if (host) {\n          const matchingSite = getGlobal().exploreData?.sites.find(({ url }) => {\n            const siteHost = isTelegramUrl(url)\n              ? new URL(url).pathname.split('/').filter(Boolean)[0]\n              : new URL(url).hostname;\n\n            return siteHost === host;\n          });\n\n          if (matchingSite) {\n            void openUrl(matchingSite.url);\n          }\n        }\n\n        return true;\n      }\n    }\n  } catch (err) {\n    logDebugError('processSelfDeeplink', err);\n  }\n\n  return false;\n}\n\n/**\n * Parses a deeplink and checks whether the transfer can be initiated.\n * See `parseTonDeeplink` for information about the returned values.\n */\nexport function parseDeeplinkTransferParams(url: string, global: GlobalState) {\n  let tonDeeplink = url;\n\n  if (isSelfDeeplink(url)) {\n    try {\n      url = convertSelfDeeplinkToSelfUrl(url);\n      const { pathname } = new URL(url);\n      const command = pathname.split('/').find(Boolean);\n\n      if (command === DeeplinkCommand.Transfer) {\n        tonDeeplink = convertSelfUrlToTonDeeplink(url);\n      }\n    } catch (err) {\n      logDebugError('parseDeeplinkTransferParams', err);\n    }\n  }\n\n  return parseTonDeeplink(tonDeeplink, global);\n}\n\nfunction convertSelfDeeplinkToSelfUrl(deeplink: string) {\n  if (deeplink.startsWith(SELF_PROTOCOL)) {\n    return deeplink.replace(SELF_PROTOCOL, `${SELF_UNIVERSAL_URLS[0]}/`);\n  }\n  return deeplink;\n}\n\nfunction convertSelfUrlToTonDeeplink(deeplink: string) {\n  deeplink = forceHttpsProtocol(deeplink);\n\n  for (const selfUniversalUrl of SELF_UNIVERSAL_URLS) {\n    if (deeplink.startsWith(selfUniversalUrl)) {\n      return deeplink.replace(`${selfUniversalUrl}/`, TON_PROTOCOL);\n    }\n  }\n\n  return deeplink;\n}\n\nfunction omitProtocol(url: string) {\n  return url.replace(/^https?:\\/\\//, '');\n}\n\nfunction forceHttpsProtocol(url: string) {\n  return url.replace(/^http:\\/\\//, 'https://');\n}\n\nfunction toNumberOrEmptyString(input?: string | null) {\n  return String(Number(input) || '');\n}\n\nfunction replaceAllSpacesWithPlus(value: string) {\n  return value.replace(/ /g, '+');\n}\n\nfunction getDeeplinkSearchParam(url: URL, param: string) {\n  return url.searchParams.get(param) ?? undefined;\n}\n","import { registerPlugin } from '@capacitor/core';\nconst PushNotifications = registerPlugin('PushNotifications', {});\nexport * from './definitions';\nexport { PushNotifications };\n//# sourceMappingURL=index.js.map","import type { ApiChain, ApiNotificationAddress } from '../../api/types';\nimport type { GlobalState } from '../types';\n\n// This selector is not optimized for usage with React components wrapped by withGlobal\nexport function selectNotificationTonAddressesSlow(\n  global: GlobalState,\n  accountIds: string[],\n): ApiNotificationAddress[] {\n  return accountIds.map((accountId) => {\n    const account = global.accounts!.byId[accountId];\n\n    return {\n      title: account.title,\n      address: account.addressByChain.ton,\n      chain: 'ton' as ApiChain,\n    };\n  });\n}\n","export type CapacitorPlatform = 'ios' | 'android';\n\nlet platform: CapacitorPlatform | undefined;\n\nexport function setCapacitorPlatform(newPlatform: CapacitorPlatform) {\n  platform = newPlatform;\n}\n\nexport function getCapacitorPlatform() {\n  return platform;\n}\n","import { Capacitor } from '@capacitor/core';\nimport type { ActionPerformed, Token } from '@capacitor/push-notifications';\nimport { PushNotifications } from '@capacitor/push-notifications';\nimport { getActions, getGlobal, setGlobal } from '../../global';\n\nimport type { ApiStakingType } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\n\nimport { selectAccountIdByAddress } from '../../global/selectors';\nimport { selectNotificationTonAddressesSlow } from '../../global/selectors/notifications';\nimport { callApi } from '../../api';\nimport { MINUTE } from '../../api/constants';\nimport { pick } from '../iteratees';\nimport { logDebugError } from '../logs';\nimport { getCapacitorPlatform } from './platform';\n\ninterface ShowTxMessageData {\n  action: 'swap' | 'nativeTx';\n  address: string;\n  txId: string;\n}\n\ninterface StakingMessageData {\n  action: 'staking';\n  address: string;\n  stakingType: ApiStakingType;\n  stakingId: string;\n  logId: string;\n}\n\ninterface OpenActivityMessageData {\n  action: 'jettonTx';\n  address: string;\n  slug: string;\n}\n\ninterface OpenUrlMessageData {\n  action: 'openUrl';\n  // The wallet address that should be switched to before opening the URL\n  address?: string;\n  url: string;\n  // For the following parameters, see the `openUrl` options\n  isExternal?: boolean;\n  title?: string;\n  subtitle?: string;\n}\n\ntype MessageData = StakingMessageData | OpenActivityMessageData | ShowTxMessageData | OpenUrlMessageData;\n\nlet nextUpdatePushNotifications = 0;\n\nexport async function initNotificationsWithGlobal(global: GlobalState) {\n  const isPushNotificationsAvailable = Capacitor.isPluginAvailable('PushNotifications');\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      isAvailable: isPushNotificationsAvailable,\n    },\n  });\n\n  if (!isPushNotificationsAvailable) {\n    return;\n  }\n\n  await PushNotifications.addListener('pushNotificationActionPerformed', handlePushNotificationActionPerformed);\n\n  await PushNotifications.addListener('registration', handlePushNotificationRegistration);\n\n  await PushNotifications.addListener('registrationError', (err) => {\n    logDebugError('Registration error: ', err.error);\n  });\n\n  let notificationStatus = await PushNotifications.checkPermissions();\n\n  if (notificationStatus.receive === 'prompt-with-rationale') {\n    return;\n  }\n\n  if (notificationStatus.receive === 'prompt') {\n    notificationStatus = await PushNotifications.requestPermissions();\n  }\n\n  if (notificationStatus.receive !== 'granted') {\n    // For request iOS returns 'denied', but 'granted' follows immediately without new requests\n    return;\n  }\n\n  await PushNotifications.register();\n}\n\nfunction handlePushNotificationActionPerformed(notification: ActionPerformed) {\n  const {\n    showAnyAccountTx,\n    showAnyAccountTokenActivity,\n    openAnyAccountStakingInfo,\n    switchAccountAndOpenUrl,\n  } = getActions();\n  const global = getGlobal();\n  const notificationData = notification.notification.data as MessageData;\n  const { action, address } = notificationData;\n  const accountId = address === undefined ? undefined : selectAccountIdByAddress(global, 'ton', address);\n  const network = 'mainnet';\n\n  if (action === 'openUrl') {\n    switchAccountAndOpenUrl({\n      accountId,\n      network,\n      ...pick(notificationData, ['url', 'isExternal', 'title', 'subtitle']),\n    });\n    return;\n  }\n\n  if (!accountId) return;\n\n  if (action === 'nativeTx' || action === 'swap') {\n    const { txId } = notificationData;\n    showAnyAccountTx({ accountId, txId, network });\n  } else if (action === 'jettonTx') {\n    const { slug } = notificationData;\n    showAnyAccountTokenActivity({ accountId, slug, network });\n  } else if (action === 'staking') {\n    const { stakingId } = notificationData;\n    openAnyAccountStakingInfo({ accountId, network, stakingId });\n  }\n}\n\nfunction handlePushNotificationRegistration(token: Token) {\n  const userToken = token.value;\n\n  getActions().registerNotifications({ userToken, platform: getCapacitorPlatform()! });\n\n  window.addEventListener('focus', async () => {\n    const global = getGlobal();\n    const notificationAccounts = Object.keys(global.pushNotifications.enabledAccounts || []);\n    if (notificationAccounts.length && nextUpdatePushNotifications <= Date.now()) {\n      await callApi('subscribeNotifications', {\n        userToken,\n        platform: getCapacitorPlatform()!,\n        addresses: selectNotificationTonAddressesSlow(global, notificationAccounts),\n      });\n      nextUpdatePushNotifications = Date.now() + (60 * MINUTE);\n    }\n  }, { capture: true });\n}\n","import type { URLOpenListenerEvent } from '@capacitor/app';\nimport { App } from '@capacitor/app';\nimport { Capacitor } from '@capacitor/core';\nimport { BiometryType, NativeBiometric } from '@capgo/capacitor-native-biometric';\nimport { SplashScreen } from '@sina_kh/mtw-capacitor-splash-screen';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport { getGlobal } from '../../global';\n\nimport type { AuthConfig } from '../authApi/types';\nimport type { CapacitorPlatform } from './platform';\n\nimport { GLOBAL_STATE_CACHE_KEY } from '../../config';\nimport { processDeeplink } from '../deeplink';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../windowEnvironment';\nimport * as storageMethods from '../windowProvider/methods';\nimport { initNotificationsWithGlobal } from './notifications';\nimport { getCapacitorPlatform, setCapacitorPlatform } from './platform';\n\n// Full list of options can be found at https://github.com/apache/cordova-plugin-inappbrowser#cordovainappbrowseropen\nexport const INAPP_BROWSER_OPTIONS = [\n  `location=${IS_IOS ? 'no' : 'yes'}`,\n  `lefttoright=${IS_IOS ? 'no' : 'yes'}`,\n  'usewkwebview=yes',\n  'clearcache=no',\n  'clearsessioncache=no',\n  'hidden=yes',\n  'toolbarposition=top',\n  'hidenavigationbuttons=yes',\n  'hideurlbar=no',\n  'backbuttoncaption=Back',\n  'allowInlineMediaPlayback=yes',\n].join(',');\nconst IOS_SPLASH_SCREEN_HIDE_DELAY = 500;\nconst IOS_SPLASH_SCREEN_HIDE_DURATION = 600;\nexport const VIBRATE_SUCCESS_END_PAUSE_MS = 1300;\n\nlet launchUrl: string | undefined;\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\nlet statusBarHeight = 0;\n\nfunction updateSafeAreaValues(safeAreaInsets: SafeAreaInsets) {\n  for (const [key, value] of Object.entries(safeAreaInsets.insets)) {\n    document.documentElement.style.setProperty(\n      `--safe-area-${key}`,\n      `${getCapacitorPlatform() === 'android' && key === 'top' ? value + 8 : value}px`,\n    );\n  }\n}\n\nexport async function initCapacitor() {\n  setCapacitorPlatform(Capacitor.getPlatform() as CapacitorPlatform);\n\n  void SafeArea.getStatusBarHeight().then(({ statusBarHeight: height }) => {\n    statusBarHeight = height;\n    document.documentElement.style.setProperty('--status-bar-height', `${height}px`);\n  });\n\n  void SafeArea.getSafeAreaInsets().then(({ insets: { bottom } }) => {\n    document.documentElement.style.setProperty('--safe-area-bottom', `${bottom}px`);\n  });\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    void SplashScreen.hide({ fadeOutDuration: 0 });\n    return;\n  }\n\n  if (getCapacitorPlatform() === 'ios') {\n    setTimeout(() => {\n      void SplashScreen.hide({ fadeOutDuration: IOS_SPLASH_SCREEN_HIDE_DURATION });\n    }, IOS_SPLASH_SCREEN_HIDE_DELAY);\n  }\n\n  void App.addListener('appUrlOpen', (event: URLOpenListenerEvent) => {\n    void processDeeplink(event.url);\n  });\n\n  void App.addListener('backButton', ({ canGoBack }) => {\n    if (canGoBack) {\n      window.history.back();\n    } else {\n      void App.exitApp();\n    }\n  });\n\n  updateSafeAreaValues(await SafeArea.getSafeAreaInsets());\n\n  await SafeArea.addListener('safeAreaChanged', (data) => {\n    updateSafeAreaValues(data);\n  });\n\n  launchUrl = (await App.getLaunchUrl())?.url;\n\n  if (launchUrl) {\n    void processDeeplink(launchUrl);\n  }\n}\n\nexport async function initCapacitorWithGlobal(authConfig?: AuthConfig) {\n  const isNativeBiometricAuthEnabled = !!authConfig && authConfig.kind === 'native-biometrics';\n\n  const biometricsAvailableResult = await NativeBiometric.isAvailable({\n    isWeakAuthenticatorAllowed: isNativeBiometricAuthEnabled,\n    useFallback: false,\n  });\n\n  isNativeBiometricAuthSupported = biometricsAvailableResult.isAvailable;\n  isFaceIdAvailable = biometricsAvailableResult.biometryType === BiometryType.FACE_ID;\n  isTouchIdAvailable = biometricsAvailableResult.biometryType === BiometryType.TOUCH_ID;\n\n  void initNotificationsWithGlobal(getGlobal());\n}\n\nexport function getStatusBarHeight() {\n  return statusBarHeight;\n}\n\nexport function getIsCapacitorBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsCapacitorFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsCapacitorTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport async function fixIosAppStorage() {\n  await storageMethods.init();\n\n  const isLocalStorageDataExists = Boolean(window.localStorage.getItem(GLOBAL_STATE_CACHE_KEY));\n  const isApiStorageDataExists = Boolean(await storageMethods.capacitorStorageGetItem('accounts'));\n\n  if (isLocalStorageDataExists && !isApiStorageDataExists) {\n    window.localStorage.clear();\n  }\n\n  if (!isLocalStorageDataExists && isApiStorageDataExists) {\n    await storageMethods.capacitorStorageClear();\n  }\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport {\n  getIsCapacitorBiometricAuthSupported,\n  getIsCapacitorFaceIdAvailable,\n  getIsCapacitorTouchIdAvailable,\n} from './capacitor';\nimport {\n  getIsTelegramBiometricAuthSupported,\n  getIsTelegramFaceIdAvailable,\n  getIsTelegramTouchIdAvailable,\n} from './telegram';\nimport { getIsMobileTelegramApp, IS_BIOMETRIC_AUTH_SUPPORTED } from './windowEnvironment';\n\nexport function getIsBiometricAuthSupported() {\n  return IS_BIOMETRIC_AUTH_SUPPORTED || getIsNativeBiometricAuthSupported();\n}\n\nexport function getIsNativeBiometricAuthSupported() {\n  return (IS_CAPACITOR && getIsCapacitorBiometricAuthSupported())\n    || (IS_TELEGRAM_APP && getIsTelegramBiometricAuthSupported());\n}\n\nexport function getIsFaceIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorFaceIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramFaceIdAvailable());\n}\n\nexport function getIsTouchIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorTouchIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramTouchIdAvailable());\n}\n\nexport function getDoesUsePinPad() {\n  return IS_CAPACITOR || getIsMobileTelegramApp();\n}\n","import { WebPlugin } from '@capacitor/core';\nexport class ClipboardWeb extends WebPlugin {\n    async write(options) {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (options.string !== undefined) {\n            await this.writeText(options.string);\n        }\n        else if (options.url) {\n            await this.writeText(options.url);\n        }\n        else if (options.image) {\n            if (typeof ClipboardItem !== 'undefined') {\n                try {\n                    const blob = await (await fetch(options.image)).blob();\n                    const clipboardItemInput = new ClipboardItem({ [blob.type]: blob });\n                    await navigator.clipboard.write([clipboardItemInput]);\n                }\n                catch (err) {\n                    throw new Error('Failed to write image');\n                }\n            }\n            else {\n                throw this.unavailable('Writing images to the clipboard is not supported in this browser');\n            }\n        }\n        else {\n            throw new Error('Nothing to write');\n        }\n    }\n    async read() {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (typeof ClipboardItem !== 'undefined') {\n            try {\n                const clipboardItems = await navigator.clipboard.read();\n                const type = clipboardItems[0].types[0];\n                const clipboardBlob = await clipboardItems[0].getType(type);\n                const data = await this._getBlobData(clipboardBlob, type);\n                return { value: data, type };\n            }\n            catch (err) {\n                return this.readText();\n            }\n        }\n        else {\n            return this.readText();\n        }\n    }\n    async readText() {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.readText) {\n            throw this.unavailable('Reading from clipboard not supported in this browser');\n        }\n        const text = await navigator.clipboard.readText();\n        return { value: text, type: 'text/plain' };\n    }\n    async writeText(text) {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.writeText) {\n            throw this.unavailable('Writting to clipboard not supported in this browser');\n        }\n        await navigator.clipboard.writeText(text);\n    }\n    _getBlobData(clipboardBlob, type) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            if (type.includes('image')) {\n                reader.readAsDataURL(clipboardBlob);\n            }\n            else {\n                reader.readAsText(clipboardBlob);\n            }\n            reader.onloadend = () => {\n                const r = reader.result;\n                resolve(r);\n            };\n            reader.onerror = e => {\n                reject(e);\n            };\n        });\n    }\n}\n//# sourceMappingURL=web.js.map","import { registerPlugin } from '@capacitor/core';\nimport { ClipboardWeb } from './web';\nconst Clipboard = registerPlugin('Clipboard', {\n    web: () => new ClipboardWeb(),\n});\nexport * from './definitions';\nexport { Clipboard };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Haptics = registerPlugin('Haptics', {\n    web: () => import('./web').then(m => new m.HapticsWeb()),\n});\nexport * from './definitions';\nexport { Haptics };\n//# sourceMappingURL=index.js.map","import { Haptics, ImpactStyle } from '@capacitor/haptics';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { VIBRATE_SUCCESS_END_PAUSE_MS } from './capacitor';\nimport { pause } from './schedulers';\nimport { getTelegramApp } from './telegram';\n\nexport async function vibrate() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.impactOccurred('soft');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnError() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('error');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(100);\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(75);\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnSuccess(withPauseOnEnd = false) {\n  if (!IS_CAPACITOR && !IS_TELEGRAM_APP) return;\n\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('success');\n  } else {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n\n  if (withPauseOnEnd) {\n    await pause(VIBRATE_SUCCESS_END_PAUSE_MS);\n  }\n}\n","import { Clipboard } from '@capacitor/clipboard';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { vibrate } from './haptics';\nimport { getTelegramApp } from './telegram';\n\nconst textCopyEl = document.createElement('textarea');\ntextCopyEl.setAttribute('readonly', '');\ntextCopyEl.tabIndex = -1;\ntextCopyEl.className = 'visually-hidden';\n\nexport const copyTextToClipboard = (str: string): Promise<void> => {\n  void vibrate();\n\n  if (IS_CAPACITOR) {\n    return Clipboard.write({\n      string: str,\n    });\n  }\n\n  return navigator.clipboard.writeText(str);\n};\n\nexport async function readClipboardContent() {\n  if (IS_TELEGRAM_APP) {\n    return new Promise((resolve: ({ text, type }: { text: string; type: string | undefined }) => void) => {\n      getTelegramApp()?.readTextFromClipboard((text) => {\n        void vibrate();\n        resolve({ text, type: 'text/plain' });\n      });\n    });\n  } else if (IS_CAPACITOR) {\n    const { value, type } = await Clipboard.read();\n    void vibrate();\n    return { text: value, type };\n  } else {\n    const text = await navigator.clipboard.readText();\n    return { text, type: 'text/plain' };\n  }\n}\n","function isEmptyObject(obj: Object) {\n  // eslint-disable-next-line no-restricted-syntax\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default isEmptyObject;\n","import { PRIVATE_KEY_HEX_LENGTH } from '../config';\n\nexport default function isMnemonicPrivateKey(mnemonic: string[]) {\n  return mnemonic.length === 1 && mnemonic[0].length === PRIVATE_KEY_HEX_LENGTH;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport { compact } from '../../util/iteratees';\n\nexport type TextFilter = ('simple_markdown' | 'br');\n\nconst SIMPLE_MARKDOWN_REGEX = /(\\*\\*|__).+?\\1/g;\n\nexport default function renderText(\n  part: TeactNode,\n  filters: Array<TextFilter> = ['simple_markdown', 'br'],\n): TeactNode[] {\n  if (typeof part !== 'string') {\n    return [part];\n  }\n\n  return compact(filters.reduce((text, filter) => {\n    switch (filter) {\n      case 'simple_markdown':\n        return replaceSimpleMarkdown(text);\n\n      case 'br':\n        return addLineBreaks(text);\n    }\n\n    return text;\n  }, [part] as TeactNode[]));\n}\n\nfunction replaceSimpleMarkdown(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce<TeactNode[]>((result, part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const parts = part.split(SIMPLE_MARKDOWN_REGEX);\n    const entities: string[] = part.match(SIMPLE_MARKDOWN_REGEX) || [];\n    result.push(parts[0]);\n\n    return entities.reduce((entityResult: TeactNode[], entity, i) => {\n      entityResult.push(\n        entity.startsWith('**')\n          ? <b>{entity.replace(/\\*\\*/g, '')}</b>\n          : <i>{entity.replace(/__/g, '')}</i>,\n      );\n\n      const index = i * 2 + 2;\n      if (parts[index]) {\n        entityResult.push(parts[index]);\n      }\n\n      return entityResult;\n    }, result);\n  }, []);\n}\n\nfunction addLineBreaks(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce((result: TeactNode[], part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const splittenParts = part\n      .split(/\\r\\n|\\r|\\n/g)\n      .reduce((parts: TeactNode[], line: string, i, source) => {\n        // This adds non-breaking space if line was indented with spaces, to preserve the indentation\n        const trimmedLine = line.trimStart();\n        const indentLength = line.length - trimmedLine.length;\n        parts.push(String.fromCharCode(160).repeat(indentLength) + trimmedLine);\n\n        if (i !== source.length - 1) {\n          parts.push(<br />);\n        }\n\n        return parts;\n      }, []);\n\n    return [...result, ...splittenParts];\n  }, []);\n}\n","import { ELECTRON_HOST_URL, IS_PACKAGED_ELECTRON } from '../config';\n\n// eslint-disable-next-line no-restricted-globals\nconst cacheApi = self.caches;\n\nexport async function fetch(cacheName: string, key: string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const cache = await cacheApi.open(cacheName);\n    const response = await cache.match(request);\n    if (!response) {\n      return undefined;\n    }\n\n    return await response.json();\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function save(cacheName: string, key: string, data: AnyLiteral | Blob | ArrayBuffer | string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    const cacheData = typeof data === 'string' || data instanceof Blob || data instanceof ArrayBuffer\n      ? data\n      : JSON.stringify(data);\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const response = new Response(cacheData);\n\n    // To avoid the error \"Request scheme 'chrome-extension' is unsupported\"\n    // https://github.com/iamshaunjp/pwa-tutorial/issues/1\n    if (request instanceof Request && request.url.indexOf('chrome-extension') === 0) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.put(request, response);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function remove(cacheName: string, key: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.delete(key);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function clear(cacheName: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    return await cacheApi.delete(cacheName);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n","import type { ApiBaseCurrency } from '../api/types';\n\nimport {\n  DEFAULT_PRICE_CURRENCY,\n  SHORT_CURRENCY_SYMBOL_MAP,\n  WHOLE_PART_DELIMITER,\n} from '../config';\nimport { Big } from '../lib/big.js';\nimport { toDecimal } from './decimals';\nimport withCache from './withCache';\n\nconst SHORT_SYMBOLS = new Set(Object.values(SHORT_CURRENCY_SYMBOL_MAP));\n\nexport const formatNumber = withCache((\n  value: number | Big | string,\n  fractionDigits = 2,\n  noTruncate?: boolean,\n) => {\n  const bigValue = new Big(value);\n\n  if (bigValue.eq(0)) return '0';\n\n  const method = bigValue.lt(1) ? 'toPrecision' : 'round';\n  const rounded = bigValue[method](fractionDigits, noTruncate ? Big.roundHalfUp : Big.roundDown)\n    .toString()\n    // Remove extra zeros after rounding to the specified accuracy\n    .replace(/(\\.\\d*?)0+$/, '$1')\n    .replace(/\\.$/, '');\n\n  return applyThousandsGrouping(rounded);\n});\n\nexport function formatCurrency(\n  value: number | string | Big,\n  currency: string,\n  fractionDigits?: number,\n  noTruncate?: boolean,\n) {\n  const formatted = formatNumber(value, fractionDigits, noTruncate);\n  return addCurrency(formatted, currency);\n}\n\nexport function formatCurrencyExtended(\n  value: number | string, currency: string, noSign = false, fractionDigits?: number,\n) {\n  value = value.toString();\n\n  const prefix = !noSign ? (!value.startsWith('-') ? '+\\u202F' : '\\u2212\\u202F') : '';\n\n  return prefix + formatCurrency(noSign ? value : value.replace('-', ''), currency, fractionDigits);\n}\n\nexport function formatCurrencySimple(value: number | bigint | string, currency: string, decimals?: number) {\n  if (typeof value !== 'string') {\n    value = toDecimal(value, decimals);\n  }\n  return addCurrency(value, currency);\n}\n\nfunction addCurrency(value: number | string, currency: string) {\n  return SHORT_SYMBOLS.has(currency)\n    ? `${currency}${value}`.replace(`${currency}-`, `-${currency}`)\n    : `${value} ${currency}`;\n}\n\nexport function getShortCurrencySymbol(currency?: ApiBaseCurrency) {\n  if (!currency) currency = DEFAULT_PRICE_CURRENCY;\n  return SHORT_CURRENCY_SYMBOL_MAP[currency as keyof typeof SHORT_CURRENCY_SYMBOL_MAP] ?? currency;\n}\n\nfunction applyThousandsGrouping(str: string) {\n  const [wholePart, fractionPart = ''] = str.split('.');\n  const groupedWhole = wholePart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return [groupedWhole, fractionPart].filter(Boolean).join('.');\n}\n","import type { TeactNode } from '../lib/teact/teact';\n\nimport type { LangCode, LangPack, LangString } from '../global/types';\n\nimport { IS_PACKAGED_ELECTRON, LANG_CACHE_NAME, LANG_LIST } from '../config';\nimport renderText from '../global/helpers/renderText';\n// @ts-ignore this file is autogenerated\nimport defaultLangPackJson from '../i18n/en.json';\nimport * as cacheApi from './cacheApi';\nimport { createCallbackManager } from './callbacks';\nimport { formatNumber } from './formatNumber';\nimport { DEFAULT_LANG_CODE } from './windowEnvironment';\n\nconst defaultLangPack: LangPack = defaultLangPackJson;\n\nexport interface LangFn {\n  (key: string): string;\n\n  (key: string, value: any, format?: 'i', pluralValue?: number): string | TeactNode[];\n\n  isRtl?: boolean;\n  code?: LangCode;\n  langName?: string;\n}\n\nconst {\n  addCallback,\n  removeCallback,\n  runCallbacks,\n} = createCallbackManager();\n\nexport { addCallback, removeCallback };\n\nconst SUBSTITUTION_REGEX = /%\\d?\\$?[sdf@]/g;\nconst PLURAL_OPTIONS = ['value', 'zeroValue', 'oneValue', 'twoValue', 'fewValue', 'manyValue', 'otherValue'] as const;\n// Some rules edited from https://github.com/eemeli/make-plural/blob/master/packages/plurals/cardinals.js\nconst PLURAL_RULES = {\n  /* eslint-disable max-len */\n  de: (n: number) => (n !== 1 ? 6 : 2),\n  en: (n: number) => (n !== 1 ? 6 : 2),\n  es: (n: number) => (n !== 1 ? 6 : 2),\n  pl: (n: number) => (n === 1 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  ru: (n: number) => (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  th: () => 6,\n  tr: (n: number) => (n > 1 ? 6 : 2),\n  uk: (n: number) => (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  'zh-Hans': () => 6,\n  'zh-Hant': () => 6,\n  /* eslint-enable max-len */\n};\nconst cache = new Map<string, string>();\nlet langPack: LangPack | undefined;\nlet currentLangCode: string | undefined;\n\nfunction createLangFn() {\n  return ((key: string, value?: any, format?: 'i', pluralValue?: number) => {\n    if (value !== undefined && (typeof value !== 'object' || Array.isArray(value))) {\n      const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n      const cached = cache.get(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`);\n      if (cached) {\n        return cached;\n      }\n    }\n\n    if (!langPack && !defaultLangPack) {\n      return key;\n    }\n\n    const langString = (langPack?.[key]) || (defaultLangPack?.[key]) || key;\n\n    return processTranslation(langString, key, value, format, pluralValue);\n  }) as LangFn;\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let getTranslation: LangFn = createLangFn();\n\nexport async function setLanguage(langCode: LangCode, callback?: NoneToVoidFunction) {\n  if (langPack && langCode === currentLangCode) {\n    if (callback) {\n      callback();\n    }\n\n    return;\n  }\n\n  let newLangPack = await cacheApi.fetch(LANG_CACHE_NAME, langCode);\n\n  if (!newLangPack) {\n    newLangPack = await fetchRemote(langCode);\n    if (!newLangPack) {\n      return;\n    }\n  }\n\n  cache.clear();\n\n  currentLangCode = langCode;\n  langPack = newLangPack;\n  document.documentElement.lang = langCode;\n\n  const langInfo = LANG_LIST?.find((l) => l.langCode === langCode);\n  getTranslation = createLangFn();\n  getTranslation.isRtl = Boolean(langInfo?.rtl);\n  getTranslation.code = langCode.replace('-raw', '') as LangCode;\n  getTranslation.langName = langInfo?.nativeName;\n\n  if (callback) {\n    callback();\n  }\n\n  runCallbacks();\n}\n\nexport function clearPreviousLangpacks() {\n  const langCachePrefix = LANG_CACHE_NAME.replace(/\\d+$/, '');\n  const langCacheVersion = Number((LANG_CACHE_NAME.match(/\\d+$/) || [0])[0]);\n  for (let i = 0; i < langCacheVersion; i++) {\n    void cacheApi.clear(`${langCachePrefix}${i === 0 ? '' : i}`);\n  }\n}\n\nasync function fetchRemote(langCode: string): Promise<LangPack | undefined> {\n  if (langCode === DEFAULT_LANG_CODE) {\n    return defaultLangPack;\n  }\n\n  const response = await fetch(`${IS_PACKAGED_ELECTRON ? '.' : '..'}/i18n/${langCode}.json`);\n\n  if (!response.ok) {\n    const message = `An error has occured: ${response.status}`;\n    throw new Error(message);\n  }\n\n  const remote = await response.json();\n\n  if (remote) {\n    await cacheApi.save(LANG_CACHE_NAME, langCode, remote);\n    return remote;\n  }\n\n  return undefined;\n}\n\nfunction getPluralOption(amount: number) {\n  const langCode = currentLangCode || DEFAULT_LANG_CODE;\n  const optionIndex = PLURAL_RULES[langCode as keyof typeof PLURAL_RULES]\n    ? PLURAL_RULES[langCode as keyof typeof PLURAL_RULES](amount)\n    : 0;\n\n  return PLURAL_OPTIONS[optionIndex];\n}\n\nfunction processTemplate(template: string, value: any) {\n  value = Array.isArray(value) ? value : [value];\n  const translationSlices = template.split(SUBSTITUTION_REGEX);\n  const initialValue = translationSlices.shift();\n\n  return translationSlices.reduce((result, str, index) => {\n    return `${result}${String(value[index] ?? '')}${str}`;\n  }, initialValue || '');\n}\n\nfunction processTemplateJsx(template: string, value: Record<string, TeactNode>): TeactNode[] {\n  const parts = template.split('%');\n  const processedParts: TeactNode[] = [];\n  let currentString = '';\n\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n\n    // Check if the current part is a token (between % symbols)\n    if (i % 2 === 1) {\n      const valueNode = value[part];\n\n      if (valueNode) {\n        if (typeof valueNode === 'string') {\n          currentString += valueNode;\n        } else {\n          // If the value is a component, process the accumulated string and add the component\n          if (currentString) {\n            processedParts.push(...renderText(currentString));\n            currentString = '';\n          }\n          processedParts.push(valueNode);\n        }\n      } else {\n        // If the token is not found, keep it as is (e.g., %unknown_token%)\n        currentString += `%${part}%`;\n      }\n    } else {\n      // If the part is a text segment, append it to the current string\n      currentString += part;\n    }\n  }\n\n  // Process any remaining text in the current string\n  if (currentString) {\n    processedParts.push(...renderText(currentString));\n  }\n\n  return processedParts;\n}\n\nfunction processTranslation(\n  langString: LangString | string | undefined, key: string, value?: any, format?: 'i', pluralValue?: number,\n) {\n  const preferredPluralOption = typeof value === 'number' || pluralValue !== undefined\n    ? getPluralOption(pluralValue ?? value)\n    : 'value';\n\n  const template = typeof langString === 'string'\n    ? langString\n    : preferredPluralOption === 'value'\n      // Support cached older `langString` interface\n      ? (typeof langString === 'object' ? (langString as any).value : langString)\n      : typeof langString === 'object'\n        ? langString?.[preferredPluralOption] || langString.otherValue\n        : undefined;\n\n  if (!template || !template.trim() || value === undefined) {\n    return template;\n  }\n\n  const formattedValue = format === 'i' ? formatNumber(value) : value;\n  const result = typeof value === 'object' && !Array.isArray(value)\n    ? processTemplateJsx(template, formattedValue)\n    : processTemplate(template, formattedValue);\n  if (typeof value !== 'object' && typeof result === 'string') {\n    const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n    cache.set(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`, result);\n  }\n\n  return result;\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nconst EQUAL = Symbol('EQUAL');\nconst DELETE = { __delete: true };\nconst DELETE_ALL_CHILDREN = { __deleteAllChildren: true };\n\nexport function deepDiff<T extends any>(value1: T, value2: T): Partial<T> | typeof EQUAL | typeof DELETE_ALL_CHILDREN {\n  if (value1 === value2) {\n    return EQUAL;\n  }\n\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n\n  if (type1 !== type2) {\n    return value2;\n  }\n\n  if (Array.isArray(value1) && Array.isArray(value2) && areSortedArraysDeepEqual(value1, value2)) {\n    return EQUAL;\n  }\n\n  if (!isLiteralObject(value1) || !isLiteralObject(value2)) {\n    return value2;\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys2.length) {\n    return !keys1.length ? EQUAL : DELETE_ALL_CHILDREN;\n  }\n\n  const allKeys = unique(keys1.concat(keys2));\n\n  const diff = allKeys.reduce((acc: any, key) => {\n    const subValue1 = object1[key];\n    const subValue2 = object2[key];\n\n    if (!object2.hasOwnProperty(key)) {\n      acc[key] = DELETE;\n      return acc;\n    }\n\n    if (!object1!.hasOwnProperty(key)) {\n      acc[key] = subValue2;\n      return acc;\n    }\n\n    const subDiff = deepDiff(subValue1, subValue2);\n    if (subDiff !== EQUAL) {\n      acc[key] = subDiff;\n    }\n\n    return acc;\n  }, {});\n\n  if (Object.keys(diff).length === 0) {\n    return EQUAL;\n  }\n\n  return diff;\n}\n\nfunction areSortedArraysDeepEqual<T extends Array<any>>(array1: T, array2: T) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => deepDiff(item, array2[i]) === EQUAL);\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nexport function deepMerge<T extends any>(value1: T, value2: T): T {\n  if (value1 === value2) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value2)) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value1)) {\n    return reduceDiff(value2) as T;\n  }\n\n  // eslint-disable-next-line no-underscore-dangle\n  if (value2.__deleteAllChildren) {\n    return {} as T;\n  }\n\n  const allKeys = unique(Object.keys(value1).concat(Object.keys(value2)));\n\n  return allKeys.reduce((acc: AnyLiteral, key) => {\n    const oldValue = value1[key];\n\n    if (!value2.hasOwnProperty(key)) {\n      acc[key] = oldValue;\n    } else {\n      const newValue = value2[key];\n      // eslint-disable-next-line no-underscore-dangle\n      if (!newValue?.__delete) {\n        acc[key] = deepMerge(oldValue, newValue);\n      }\n    }\n\n    return acc;\n  }, {}) as T;\n}\n\nfunction reduceDiff(diff: AnyLiteral) {\n  // eslint-disable-next-line no-underscore-dangle\n  if (diff.__deleteAllChildren) {\n    return {};\n  }\n\n  return Object.entries(diff).reduce((acc: AnyLiteral, [key, value]) => {\n    // eslint-disable-next-line no-underscore-dangle\n    if (!value?.__delete) {\n      // eslint-disable-next-line no-null/no-null\n      acc[key] = isLiteralObject(value) ? reduceDiff(value) : value;\n    }\n\n    return acc;\n  }, {});\n}\n","import { useRef } from '../lib/teact/teact';\n\n// Allows to use state value as \"silent\" dependency in hooks (not causing updates).\n// Also useful for state values that update frequently (such as controlled input value).\nexport function useStateRef<T>(value: T) {\n  const ref = useRef<T>(value);\n  ref.current = value;\n  return ref;\n}\n","import { useCallback } from '../lib/teact/teact';\n\nimport { useStateRef } from './useStateRef';\n\nexport default function useLastCallback<T extends AnyFunction>(callback?: T) {\n  const ref = useStateRef(callback);\n\n  // No need for ref dependency\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useCallback((...args: Parameters<T>) => ref.current?.(...args), []) as T;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP } from '../config';\nimport { createSignal } from '../util/signals';\nimport { getTelegramAppAsync } from '../util/telegram';\nimport useLastCallback from './useLastCallback';\n\nconst [getIsInBackgroundLocal, setIsInBackground] = createSignal(!document.hasFocus());\nexport const getIsInBackground = getIsInBackgroundLocal;\n\nfunction handleBlur() {\n  setIsInBackground(true);\n}\n\nfunction handleFocus() {\n  setIsInBackground(false);\n}\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('activated', handleFocus);\n    telegramApp!.onEvent('deactivated', handleBlur);\n  });\n} else {\n  window.addEventListener('blur', handleBlur);\n  window.addEventListener('focus', handleFocus);\n}\n\nexport default function useBackgroundMode(\n  onBlur?: AnyToVoidFunction,\n  onFocus?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnBlur = useLastCallback(onBlur);\n  const lastOnFocus = useLastCallback(onFocus);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsInBackground()) {\n      lastOnBlur();\n    }\n\n    return getIsInBackground.subscribe(() => {\n      if (getIsInBackground()) {\n        lastOnBlur();\n      } else {\n        lastOnFocus();\n      }\n    });\n  }, [isDisabled, lastOnBlur, lastOnFocus]);\n}\n\nexport function isBackgroundModeActive() {\n  return getIsInBackground();\n}\n","import { addCallback as onGlobalChange } from '../lib/teact/teactn';\nimport { getActions, getGlobal, setGlobal } from '../global';\n\nimport type { ActionPayloads, GlobalState } from '../global/types';\nimport type { Log } from './logs';\n\nimport { MULTITAB_DATA_CHANNEL_NAME } from '../config';\nimport { deepDiff } from './deepDiff';\nimport { deepMerge } from './deepMerge';\nimport { omit } from './iteratees';\nimport { getLogs } from './logs';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_MULTITAB_SUPPORTED } from './windowEnvironment';\n\nimport { isBackgroundModeActive } from '../hooks/useBackgroundMode';\n\ninterface BroadcastChannelGlobalDiff {\n  type: 'globalDiffUpdate';\n  diff: any;\n}\n\ninterface BroadcastChannelCallActionInMain<K extends keyof ActionPayloads> {\n  type: 'callActionInMain';\n  name: K;\n  options?: ActionPayloads[K];\n}\n\ninterface BroadcastChannelCallActionInNative<K extends keyof ActionPayloads> {\n  type: 'callActionInNative';\n  name: K;\n  options?: ActionPayloads[K];\n}\n\ninterface BroadcastChannelNativeLogsRequest {\n  type: 'getLogsFromNative';\n}\n\ninterface BroadcastChannelNativeLogsResponse {\n  type: 'logsFromNative';\n  logs: Log[];\n}\n\ntype BroadcastChannelMessage = BroadcastChannelGlobalDiff\n| BroadcastChannelCallActionInMain<keyof ActionPayloads>\n| BroadcastChannelCallActionInNative<keyof ActionPayloads>\n| BroadcastChannelNativeLogsRequest\n| BroadcastChannelNativeLogsResponse;\ntype EventListener = (type: 'message', listener: (event: { data: BroadcastChannelMessage }) => void) => void;\n\nexport type TypedBroadcastChannel = {\n  postMessage: (message: BroadcastChannelMessage) => void;\n  addEventListener: EventListener;\n  removeEventListener: EventListener;\n};\n\nconst channel = IS_MULTITAB_SUPPORTED\n  ? new BroadcastChannel(MULTITAB_DATA_CHANNEL_NAME) as TypedBroadcastChannel\n  : undefined;\n\nlet currentGlobal = getGlobal();\n\nexport function initMultitab({ noPubGlobal }: { noPubGlobal?: boolean } = {}) {\n  if (!channel) return;\n\n  if (!noPubGlobal) {\n    onGlobalChange(handleGlobalChange);\n  }\n\n  channel.addEventListener('message', handleMultitabMessage);\n}\n\nfunction handleGlobalChange(global: GlobalState) {\n  if (global === currentGlobal) return;\n\n  if (isBackgroundModeActive()) {\n    currentGlobal = global;\n    return;\n  }\n\n  const diff = deepDiff(omitLocalOnlyKeys(currentGlobal), omitLocalOnlyKeys(global));\n\n  if (typeof diff !== 'symbol') {\n    channel!.postMessage({\n      type: 'globalDiffUpdate',\n      diff,\n    });\n  }\n\n  currentGlobal = global;\n}\n\nfunction omitLocalOnlyKeys(global: GlobalState) {\n  return omit(global, ['DEBUG_randomId']);\n}\n\nfunction handleMultitabMessage({ data }: { data: BroadcastChannelMessage }) {\n  switch (data.type) {\n    case 'globalDiffUpdate': {\n      if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n      currentGlobal = deepMerge(getGlobal(), data.diff);\n\n      setGlobal(currentGlobal);\n\n      break;\n    }\n\n    case 'callActionInMain': {\n      if (!IS_DELEGATING_BOTTOM_SHEET) return;\n\n      const { name, options } = data;\n\n      getActions()[name](options as never);\n      break;\n    }\n\n    case 'callActionInNative': {\n      if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n      const { name, options } = data;\n\n      getActions()[name](options as never);\n      break;\n    }\n\n    case 'getLogsFromNative': {\n      if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n      channel!.postMessage({ type: 'logsFromNative', logs: getLogs() });\n      break;\n    }\n  }\n}\n\nexport function callActionInMain<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callActionInMain',\n    name,\n    options,\n  });\n}\n\nexport function callActionInNative<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callActionInNative',\n    name,\n    options,\n  });\n}\n\nexport function getLogsFromNative() {\n  if (!IS_DELEGATING_BOTTOM_SHEET) return Promise.resolve([]);\n\n  return new Promise<Log[]>((resolve) => {\n    const handleMessage = ({ data }: { data: BroadcastChannelMessage }) => {\n      if (data.type === 'logsFromNative') {\n        channel!.removeEventListener('message', handleMessage);\n        resolve(data.logs);\n      }\n    };\n\n    channel!.addEventListener('message', handleMessage);\n    channel!.postMessage({ type: 'getLogsFromNative' });\n  });\n}\n","import type { GlobalState } from './types';\nimport {\n  AppState,\n  AuthState,\n  BiometricsState,\n  SettingsState,\n  StakingState,\n  SwapState,\n  TransferState,\n} from './types';\n\nimport {\n  ANIMATION_LEVEL_DEFAULT,\n  DEFAULT_SLIPPAGE_VALUE,\n  DEFAULT_STAKING_STATE,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  INIT_SWAP_ASSETS,\n  IS_CORE_WALLET,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  THEME_DEFAULT,\n  TOKEN_INFO,\n} from '../config';\nimport { IS_IOS_APP, USER_AGENT_LANG_CODE } from '../util/windowEnvironment';\n\nexport const STATE_VERSION = 36;\n\nexport const INITIAL_STATE: GlobalState = {\n  appState: AppState.Auth,\n\n  auth: {\n    state: AuthState.none,\n  },\n\n  biometrics: {\n    state: BiometricsState.None,\n  },\n\n  hardware: {},\n\n  currentTransfer: {\n    state: TransferState.None,\n    tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG,\n  },\n\n  currentSwap: {\n    state: SwapState.None,\n    slippage: DEFAULT_SLIPPAGE_VALUE,\n  },\n\n  currentDappTransfer: {\n    state: TransferState.None,\n  },\n\n  currentStaking: {\n    state: StakingState.None,\n  },\n\n  stakingDefault: DEFAULT_STAKING_STATE,\n\n  tokenInfo: {\n    bySlug: TOKEN_INFO,\n  },\n\n  swapTokenInfo: {\n    bySlug: INIT_SWAP_ASSETS,\n  },\n\n  tokenPriceHistory: {\n    bySlug: {},\n  },\n\n  settings: {\n    state: SettingsState.Initial,\n    theme: THEME_DEFAULT,\n    animationLevel: ANIMATION_LEVEL_DEFAULT,\n    areTinyTransfersHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    canPlaySounds: true,\n    langCode: USER_AGENT_LANG_CODE,\n    byAccountId: {},\n    areTokensWithNoCostHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    isSortByValueEnabled: true,\n  },\n\n  byAccountId: {},\n\n  dialogs: [],\n  notifications: [],\n\n  stateVersion: STATE_VERSION,\n  restrictions: {\n    isLimitedRegion: false,\n    isSwapDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isOnRampDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isNftBuyingDisabled: IS_IOS_APP,\n  },\n\n  mediaViewer: {},\n\n  pushNotifications: {\n    enabledAccounts: {},\n  },\n};\n","export function areDeepEqual<T extends any>(value1: T, value2: T): boolean {\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n  if (type1 !== type2) {\n    return false;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  if (type1 !== 'object' || value1 === null || value2 === null) {\n    return value1 === value2;\n  }\n\n  const isArray1 = Array.isArray(value1);\n  const isArray2 = Array.isArray(value2);\n\n  if (isArray1 !== isArray2) {\n    return false;\n  }\n\n  if (isArray1) {\n    const array1 = value1 as any[];\n    const array2 = value2 as any[];\n\n    if (array1.length !== array2.length) {\n      return false;\n    }\n\n    return array1.every((member1, i) => areDeepEqual(member1, array2[i]));\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys1.every((key1) => object2.hasOwnProperty(key1))) {\n    return false;\n  }\n  if (!keys2.every((key2) => object1.hasOwnProperty(key2))) {\n    return false;\n  }\n\n  return keys1.every((key1) => areDeepEqual(object1[key1], object2[key1]));\n}\n","import { areDeepEqual } from './areDeepEqual';\nimport { pick } from './iteratees';\n\nexport default function isPartialDeepEqual<T extends AnyLiteral>(node: T, newPartial: Partial<T>) {\n  const currentPartial = pick(node, Object.keys(newPartial) as (keyof typeof newPartial)[]);\n\n  return areDeepEqual(currentPartial, newPartial);\n}\n","import type {\n  ApiBalanceBySlug,\n  ApiChain, ApiNetwork,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../api/types';\nimport type { Account, AccountState, GlobalState } from '../types';\n\nimport {\n  APP_NAME, IS_CORE_WALLET, POPULAR_WALLET_VERSIONS, TON_USDT_SLUG, TONCOIN,\n} from '../../config';\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { getChainBySlug } from '../../util/tokens';\nimport {\n  selectAccount,\n  selectAccountSettings,\n  selectAccountState,\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n} from '../selectors';\n\nexport function updateAuth(global: GlobalState, authUpdate: Partial<GlobalState['auth']>) {\n  return {\n    ...global,\n    auth: {\n      ...global.auth,\n      ...authUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccounts(\n  global: GlobalState,\n  state: Partial<GlobalState['accounts']>,\n) {\n  return {\n    ...global,\n    accounts: {\n      ...(global.accounts || { byId: {} }),\n      ...state,\n    },\n  };\n}\n\nexport function setIsPinAccepted(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    isPinAccepted: true,\n  };\n}\n\nexport function clearIsPinAccepted(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    isPinAccepted: undefined,\n  };\n}\n\nexport function createAccount({\n  global,\n  accountId,\n  addressByChain,\n  partial,\n  titlePostfix,\n  network,\n}: {\n  global: GlobalState;\n  accountId: string;\n  addressByChain: Record<ApiChain, string>;\n  partial?: Partial<Account>;\n  titlePostfix?: string;\n  network?: ApiNetwork;\n}) {\n  let shouldForceAccountEdit = true;\n\n  if (!partial?.title) {\n    network = network || selectCurrentNetwork(global);\n    const accounts = selectNetworkAccounts(global) || {};\n    const accountAmount = Object.keys(accounts).length;\n    const isMainnet = network === 'mainnet';\n    const titlePrefix = isMainnet ? 'Wallet' : 'Testnet Wallet';\n    const postfix = titlePostfix ? ` ${titlePostfix}` : '';\n    let title = `${titlePrefix} ${accountAmount + 1}${postfix}`;\n\n    if (accountAmount === 0) {\n      title = isMainnet ? APP_NAME : `Testnet ${APP_NAME}`;\n      shouldForceAccountEdit = false;\n    }\n\n    partial = { ...partial, title };\n  } else if (titlePostfix) {\n    const title = partial.title?.replace(new RegExp(`\\\\b(${POPULAR_WALLET_VERSIONS.join('|')})\\\\b`, 'g'), '');\n    partial = { ...partial, title: `${title.trim()} ${titlePostfix}` };\n  }\n\n  if (!IS_CORE_WALLET) {\n    global = { ...global, shouldForceAccountEdit };\n  }\n\n  return updateAccount(global, accountId, { ...partial, addressByChain });\n}\n\nexport function updateAccount(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<Account>,\n) {\n  return {\n    ...global,\n    accounts: {\n      ...global.accounts,\n      byId: {\n        ...global.accounts?.byId,\n        [accountId]: {\n          ...selectAccount(global, accountId),\n          ...partial,\n        } as Account,\n      },\n    },\n  };\n}\n\nexport function renameAccount(global: GlobalState, accountId: string, title: string) {\n  return updateAccount(global, accountId, { title });\n}\n\nexport function createAccountsFromGlobal(global: GlobalState): GlobalState {\n  const { firstNetworkAccount, secondNetworkAccount } = global.auth;\n\n  global = createAccount({ global, ...firstNetworkAccount! });\n  if (secondNetworkAccount) {\n    global = createAccount({ global, ...secondNetworkAccount });\n  }\n\n  return global;\n}\n\nexport function updateBalances(\n  global: GlobalState,\n  accountId: string,\n  chain: ApiChain,\n  chainBalances: ApiBalanceBySlug,\n): GlobalState {\n  const balances: ApiBalanceBySlug = { ...chainBalances };\n  const currentBalances = selectAccountState(global, accountId)?.balances?.bySlug ?? {};\n  const importedSlugs = selectAccountSettings(global, accountId)?.importedSlugs ?? [];\n\n  for (const [slug, balance] of Object.entries(currentBalances)) {\n    if (getChainBySlug(slug) !== chain) {\n      balances[slug] = balance;\n    }\n  }\n\n  // Force balance value for USDT-TON and manual imported tokens\n  for (const slug of [...importedSlugs, TON_USDT_SLUG]) {\n    if (!(slug in balances)) {\n      balances[slug] = 0n;\n    }\n  }\n\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: balances,\n    },\n  });\n}\n\nexport function changeBalance(global: GlobalState, accountId: string, slug: string, balance: bigint) {\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: {\n        ...selectAccountState(global, accountId)?.balances?.bySlug,\n        [slug]: balance,\n      },\n    },\n  });\n}\n\nexport function updateTokens(\n  global: GlobalState,\n  partial: Record<string, ApiTokenWithPrice>,\n  withDeepCompare = false,\n): GlobalState {\n  const currentTokens = global.tokenInfo?.bySlug;\n\n  // If the backend does not work, then we won't delete the old prices\n  if (!partial[TONCOIN.slug].quote.price) {\n    partial = Object.values(partial).reduce((result, token) => {\n      result[token.slug] = {\n        ...token,\n        quote: currentTokens?.[token.slug]?.quote ?? token.quote,\n      };\n      return result;\n    }, {} as Record<string, ApiTokenWithPrice>);\n  }\n\n  if (withDeepCompare && currentTokens && isPartialDeepEqual(currentTokens, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...currentTokens,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateSwapTokens(\n  global: GlobalState,\n  partial: Record<string, ApiSwapAsset>,\n): GlobalState {\n  const currentTokens = global.swapTokenInfo?.bySlug;\n\n  return {\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...currentTokens,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateCurrentAccountState(global: GlobalState, partial: Partial<AccountState>): GlobalState {\n  return updateAccountState(global, global.currentAccountId!, partial);\n}\n\nexport function updateAccountState(\n  global: GlobalState, accountId: string, partial: Partial<AccountState>, withDeepCompare = false,\n): GlobalState {\n  const accountState = selectAccountState(global, accountId);\n\n  if (withDeepCompare && accountState && isPartialDeepEqual(accountState, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    byAccountId: {\n      ...global.byAccountId,\n      [accountId]: {\n        ...accountState,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateHardware(global: GlobalState, hardwareUpdate: Partial<GlobalState['hardware']>) {\n  return {\n    ...global,\n    hardware: {\n      ...global.hardware,\n      ...hardwareUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateSettings(global: GlobalState, settingsUpdate: Partial<GlobalState['settings']>) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      ...settingsUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccountSettings(\n  global: GlobalState,\n  accountId: string,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      byAccountId: {\n        ...global.settings.byAccountId,\n        [accountId]: {\n          ...global.settings.byAccountId[accountId],\n          ...settingsUpdate,\n        },\n      },\n    },\n  } as GlobalState;\n}\n\nexport function updateCurrentAccountSettings(\n  global: GlobalState,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  return updateAccountSettings(global, global.currentAccountId!, settingsUpdate);\n}\n\nexport function updateBiometrics(global: GlobalState, biometricsUpdate: Partial<GlobalState['biometrics']>) {\n  return {\n    ...global,\n    biometrics: {\n      ...global.biometrics,\n      ...biometricsUpdate,\n    },\n  };\n}\n\nexport function updateRestrictions(global: GlobalState, partial: Partial<GlobalState['restrictions']>) {\n  return {\n    ...global,\n    restrictions: {\n      ...global.restrictions,\n      ...partial,\n    },\n  };\n}\n\nexport function updateCurrentAccountId(global: GlobalState, accountId: string): GlobalState {\n  if (!accountId) {\n    throw Error('Empty accountId!');\n  }\n\n  return {\n    ...global,\n    currentAccountId: accountId,\n  };\n}\n","import type { GlobalState } from '../types';\nimport { SwapInputSource, SwapState } from '../types';\n\nexport function shouldAvoidSwapEstimation(global: GlobalState) {\n  // For a better UX, we should leave the fees and the other swap data intact during swap confirmation (for example,\n  // to avoid switching from/to gasless mode).\n  // `isEstimating` forces estimation, because by design it means that there was a swap parameter change that\n  // invalidates the current swap estimation.\n  return !global.currentSwap.isEstimating && (\n    global.currentSwap.state === SwapState.Blockchain\n    || global.currentSwap.state === SwapState.Password\n  );\n}\n\n/**\n * Returns true if the swap estimate prepared for the global 1 is suitable for the global 2\n */\nexport function isSwapEstimateInputEqual({ currentSwap: swap1 }: GlobalState, { currentSwap: swap2 }: GlobalState) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug === swap2.tokenInSlug\n    && swap1.tokenOutSlug === swap2.tokenOutSlug\n    && swap1.slippage === swap2.slippage\n    && swap1.inputSource === swap2.inputSource\n    && swap1.isMaxAmount === swap2.isMaxAmount\n    && (swap2.isMaxAmount || swap1[amountKey] === swap2[amountKey]);\n}\n\n/**\n * Returns true is the swap form has enough data to start estimation\n */\nexport function isSwapFormFilled({ currentSwap }: GlobalState) {\n  const amountKey = currentSwap.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return currentSwap.tokenInSlug\n    && currentSwap.tokenOutSlug\n    && Number(currentSwap[amountKey] ?? '0') > 0; // The backend fails if the amount is \"0\", \"0.0\", etc\n}\n\nexport function doesSwapChangeRequireEstimation(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return isSwapFormFilled(globalAfter) && (\n    !isSwapEstimateInputEqual(globalBefore, globalAfter)\n    || globalBefore.currentSwap.pairs !== globalAfter.currentSwap.pairs\n  );\n}\n\nexport function doesSwapChangeRequireEstimationReset(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return !isSwapFormFilled(globalAfter)\n    || globalBefore.currentSwap.tokenInSlug !== globalAfter.currentSwap.tokenInSlug\n    || globalBefore.currentSwap.tokenOutSlug !== globalAfter.currentSwap.tokenOutSlug;\n}\n\nexport function doesSwapChangeRequireDexUnselect(\n  { currentSwap: swap1 }: GlobalState,\n  { currentSwap: swap2 }: GlobalState,\n) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug !== swap2.tokenInSlug\n    || swap1.tokenOutSlug !== swap2.tokenOutSlug\n    || swap1.inputSource !== swap2.inputSource\n    || swap1[amountKey] !== swap2[amountKey];\n}\n\n/**\n * Returns the `currentSwap` parameters that should be set when it's impossible to estimate the current swap or no\n * estimation has been done.\n */\nexport function getSwapEstimateResetParams(global: GlobalState) {\n  const amountReset = global.currentSwap.inputSource === SwapInputSource.In\n    ? { amountOut: undefined }\n    : { amountIn: undefined };\n\n  return {\n    ...amountReset,\n    amountOutMin: '0',\n    priceImpact: 0,\n    errorType: undefined,\n    limits: undefined,\n    dieselStatus: undefined,\n    estimates: undefined,\n    bestRateDexLabel: undefined,\n    networkFee: undefined,\n    realNetworkFee: undefined,\n    swapFee: undefined,\n    swapFeePercent: undefined,\n    ourFee: undefined,\n    ourFeePercent: undefined,\n    dieselFee: undefined,\n  } satisfies Partial<GlobalState['currentSwap']>;\n}\n","import type { GlobalState } from '../types';\nimport { SwapState } from '../types';\n\nimport { DEFAULT_SLIPPAGE_VALUE } from '../../config';\nimport {\n  doesSwapChangeRequireDexUnselect,\n  doesSwapChangeRequireEstimation,\n  doesSwapChangeRequireEstimationReset,\n  getSwapEstimateResetParams,\n} from '../helpers/swap';\n\nfunction rawUpdateCurrentSwap(global: GlobalState, update: Partial<GlobalState['currentSwap']>) {\n  return {\n    ...global,\n    currentSwap: {\n      ...global.currentSwap,\n      ...update,\n    },\n  };\n}\n\nexport function updateCurrentSwap(\n  global: GlobalState,\n  update: Partial<GlobalState['currentSwap']>,\n  // Set to true if you want to not trigger the swap estimation, and you are sure estimation is not needed\n  doAvoidEstimation?: boolean,\n) {\n  let newGlobal = rawUpdateCurrentSwap(global, update);\n\n  if (!doAvoidEstimation) {\n    if (doesSwapChangeRequireEstimationReset(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, getSwapEstimateResetParams(newGlobal));\n    }\n\n    if (doesSwapChangeRequireEstimation(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, { isEstimating: true });\n    }\n  }\n\n  if (doesSwapChangeRequireDexUnselect(global, newGlobal)) {\n    newGlobal = rawUpdateCurrentSwap(newGlobal, {\n      isDexLabelChanged: undefined,\n    });\n  }\n\n  // Applying the update again because the input fields should have a higher priority than the above automatic updates\n  return rawUpdateCurrentSwap(newGlobal, update);\n}\n\nexport function clearCurrentSwap(global: GlobalState) {\n  return {\n    ...global,\n    currentSwap: {\n      state: SwapState.None,\n      slippage: DEFAULT_SLIPPAGE_VALUE,\n    },\n  };\n}\n","import type { ApiCheckTransactionDraftResult } from '../../api/chains/ton/types';\nimport type { GlobalState } from '../types';\n\nimport { pick } from '../../util/iteratees';\nimport { INITIAL_STATE } from '../initialState';\nimport { selectCurrentTransferMaxAmount, selectTokenMatchingCurrentTransferAddressSlow } from '../selectors';\n\nexport function updateCurrentTransferByCheckResult(global: GlobalState, result: ApiCheckTransactionDraftResult) {\n  const nextGlobal = updateCurrentTransfer(global, {\n    toAddressName: result.addressName,\n    ...pick(result, ['fee', 'realFee', 'isScam', 'isMemoRequired', 'diesel']),\n  });\n  return preserveMaxTransferAmount(global, nextGlobal);\n}\n\nexport function updateCurrentTransfer(global: GlobalState, update: Partial<GlobalState['currentTransfer']>) {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentTransfer(global: GlobalState) {\n  return {\n    ...global,\n    currentTransfer: INITIAL_STATE.currentTransfer,\n  };\n}\n\n/**\n * Preserves the maximum transfer amount, if it was selected.\n * Returns a modified version of `nextGlobal`.\n */\nexport function preserveMaxTransferAmount(prevGlobal: GlobalState, nextGlobal: GlobalState) {\n  const previousMaxAmount = selectCurrentTransferMaxAmount(prevGlobal);\n  const wasMaxAmountSelected = previousMaxAmount && prevGlobal.currentTransfer.amount === previousMaxAmount;\n  if (!wasMaxAmountSelected) {\n    return nextGlobal;\n  }\n  const nextMaxAmount = selectCurrentTransferMaxAmount(nextGlobal);\n  return updateCurrentTransfer(nextGlobal, { amount: nextMaxAmount });\n}\n\nexport function updateCurrentTransferLoading(global: GlobalState, isLoading: boolean): GlobalState {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      isLoading,\n    },\n  };\n}\n\nexport function setCurrentTransferAddress(global: GlobalState, toAddress: string | undefined) {\n  global = updateCurrentTransfer(global, { toAddress });\n\n  // Unless the user has filled the amount, the token should change to match the \"to\" address\n  if (!global.currentTransfer.amount) {\n    global = updateCurrentTransfer(global, {\n      tokenSlug: selectTokenMatchingCurrentTransferAddressSlow(global),\n    });\n  }\n\n  return global;\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentTransferId(global: GlobalState, replaceMap: Map<string, string>) {\n  const newTxId = global.currentTransfer.txId && replaceMap.get(global.currentTransfer.txId);\n  if (newTxId !== undefined) {\n    global = updateCurrentTransfer(global, { txId: newTxId });\n  }\n  return global;\n}\n","import type { GlobalState } from '../types';\n\nimport { selectAccountState, selectCurrentAccountState } from '../selectors';\nimport { updateAccountState, updateCurrentAccountId, updateCurrentAccountState } from './misc';\nimport { clearCurrentSwap } from './swap';\nimport { clearCurrentTransfer } from './transfer';\n\nexport function updateCurrentSignature(global: GlobalState, update: Partial<GlobalState['currentSignature']>) {\n  return {\n    ...global,\n    currentSignature: {\n      ...global.currentSignature,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearCurrentSignature(global: GlobalState) {\n  return {\n    ...global,\n    currentSignature: undefined,\n  };\n}\n\nexport function updateActivitiesIsLoading(global: GlobalState, isLoading: boolean) {\n  const { activities } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    activities: {\n      ...activities || { byId: {} },\n      isLoading,\n    },\n  });\n}\n\nexport function updateActivitiesIsHistoryEndReached(global: GlobalState, isReached: boolean, slug?: string) {\n  const { activities } = selectCurrentAccountState(global) || {};\n\n  if (slug) {\n    const bySlug = activities?.isHistoryEndReachedBySlug ?? {};\n\n    return updateCurrentAccountState(global, {\n      activities: {\n        ...activities || { byId: {} },\n        isHistoryEndReachedBySlug: {\n          ...bySlug,\n          [slug]: isReached,\n        },\n      },\n    });\n  }\n\n  return updateCurrentAccountState(global, {\n    activities: {\n      ...activities || { byId: {} },\n      isMainHistoryEndReached: isReached,\n    },\n  });\n}\n\nexport function updateActivitiesIsLoadingByAccount(global: GlobalState, accountId: string, isLoading: boolean) {\n  const { activities } = selectAccountState(global, accountId) || {};\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities || { byId: {} },\n      isLoading,\n    },\n  });\n}\n\nexport function switchAccountAndClearGlobal(global: GlobalState, accountId: string) {\n  let newGlobal = updateCurrentAccountId(global, accountId);\n  newGlobal = clearCurrentTransfer(newGlobal);\n\n  return clearCurrentSwap(newGlobal);\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\nimport { StakingState } from '../types';\n\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateCurrentStaking(global: GlobalState, update: Partial<GlobalState['currentStaking']>): GlobalState {\n  return {\n    ...global,\n    currentStaking: {\n      ...global.currentStaking,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentStaking(global: GlobalState) {\n  return {\n    ...global,\n    currentStaking: {\n      state: StakingState.None,\n    },\n  };\n}\n\nexport function updateAccountStaking(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<NonNullable<AccountState['staking']>>,\n  withDeepCompare = false,\n): GlobalState {\n  const currentStaking = selectAccountState(global, accountId)?.staking;\n\n  if (withDeepCompare && currentStaking && isPartialDeepEqual(currentStaking, partial)) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentStaking,\n      ...partial,\n    },\n  });\n}\n\nexport function updateAccountStakingStatePartial(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<AccountState['staking']>,\n): GlobalState {\n  const currentState = selectAccountState(global, accountId)?.staking;\n\n  if (!currentState) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentState,\n      ...partial,\n    },\n  });\n}\n\nexport function updateStakingInfo(global: GlobalState, stakingInfo: GlobalState['stakingInfo']) {\n  return {\n    ...global,\n    stakingInfo,\n  };\n}\n\nexport function updateStakingDefault(global: GlobalState, state: ApiStakingState) {\n  return {\n    ...global,\n    stakingDefault: state,\n  };\n}\n","import type { AccountState, GlobalState } from '../types';\nimport { TransferState } from '../types';\n\nimport { selectCurrentAccountState } from '../selectors';\nimport { updateCurrentAccountState } from './misc';\n\nexport function updateDappConnectRequest(global: GlobalState, update: Partial<GlobalState['dappConnectRequest']>) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequestError(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      error: undefined,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequest(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: undefined,\n  } as GlobalState;\n}\n\nexport function updateCurrentDappTransfer(global: GlobalState, update: Partial<GlobalState['currentDappTransfer']>) {\n  return {\n    ...global,\n    currentDappTransfer: {\n      ...global.currentDappTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentDappTransfer(global: GlobalState) {\n  return {\n    ...global,\n    currentDappTransfer: {\n      state: TransferState.None,\n    },\n  };\n}\n\nexport function updateConnectedDapps(global: GlobalState, update: AccountState['dapps']) {\n  return updateCurrentAccountState(global, { dapps: update });\n}\n\nexport function clearConnectedDapps(global: GlobalState) {\n  return updateCurrentAccountState(global, { dapps: undefined, dappLastOpenedDatesByOrigin: undefined });\n}\n\nexport function removeConnectedDapp(global: GlobalState, origin: string) {\n  const { dapps: connectedDapps, dappLastOpenedDatesByOrigin } = selectCurrentAccountState(global) || {};\n  if (dappLastOpenedDatesByOrigin) delete dappLastOpenedDatesByOrigin[origin];\n  return updateCurrentAccountState(global, {\n    dapps: connectedDapps!.filter((d) => d.origin !== origin),\n    dappLastOpenedDatesByOrigin,\n  });\n}\n","import type { ApiActivity, ApiChain } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\n\nimport {\n  getActivityTokenSlugs,\n  getIsIdSuitableForFetchingTimestamp,\n  getIsTxIdLocal,\n  mergeActivityIdsToMaxTime,\n} from '../../util/activities';\nimport { compareActivities } from '../../util/compareActivities';\nimport {\n  buildCollectionByKey, extractKey, mapValues, unique, uniqueByKey,\n} from '../../util/iteratees';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\nimport { updateCurrentSwap } from './swap';\n\n/*\n  Used for the initial activities insertion into `global`.\n  Token activity IDs will just be replaced.\n */\nexport function putInitialActivities(\n  global: GlobalState,\n  accountId: string,\n  mainActivities: ApiActivity[],\n  bySlug: Record<string, ApiActivity[]>,\n) {\n  const allActivities = [...mainActivities, ...Object.values(bySlug).flat()];\n\n  const { activities } = selectAccountState(global, accountId) || {};\n  let { byId, idsBySlug, idsMain, newestActivitiesBySlug } = activities || {};\n\n  byId = { ...byId, ...buildCollectionByKey(allActivities, 'id') };\n\n  // Activities from different blockchains arrive separately, which causes the order to be disrupted\n  idsMain = mergeActivityIdsToMaxTime(extractKey(mainActivities, 'id'), idsMain ?? [], byId);\n\n  const newIdsBySlug = mapValues(bySlug, (_activities) => extractKey(_activities, 'id'));\n\n  idsBySlug = { ...idsBySlug, ...newIdsBySlug };\n\n  newestActivitiesBySlug = getNewestActivitiesBySlug(\n    { byId, idsBySlug, newestActivitiesBySlug },\n    Object.keys(newIdsBySlug),\n  );\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId,\n      idsBySlug,\n      newestActivitiesBySlug,\n    },\n  });\n}\n\nexport function addNewActivities(\n  global: GlobalState,\n  accountId: string,\n  newActivities: ApiActivity[],\n  lastMainListTimestamp?: number,\n) {\n  if (newActivities.length === 0) {\n    return global;\n  }\n\n  const { activities } = selectAccountState(global, accountId) || {};\n  let { byId, idsBySlug, idsMain, newestActivitiesBySlug, localActivities } = activities || {};\n\n  byId = { ...byId, ...buildCollectionByKey(newActivities, 'id') };\n\n  let forMain = newActivities;\n  if (lastMainListTimestamp) {\n    forMain = newActivities.filter(({ timestamp }) => timestamp >= lastMainListTimestamp);\n  }\n\n  // Activities from different blockchains arrive separately, which causes the order to be disrupted\n  idsMain = mergeSortedActivityIds(extractKey(forMain, 'id'), idsMain ?? [], byId);\n\n  const newIdsBySlug = buildActivityIdsBySlug(newActivities);\n  const replacedIdsBySlug = mapValues(newIdsBySlug, (newIds, slug) => {\n    // There may be newer local transactions in `idsBySlug`, so a sorting is needed\n    return mergeSortedActivityIds(newIds, idsBySlug?.[slug] ?? [], byId);\n  });\n  idsBySlug = { ...activities?.idsBySlug, ...replacedIdsBySlug };\n\n  newestActivitiesBySlug = getNewestActivitiesBySlug(\n    { byId, idsBySlug, newestActivitiesBySlug },\n    Object.keys(replacedIdsBySlug),\n  );\n\n  localActivities = uniqueByKey([\n    ...(localActivities ?? []),\n    ...newActivities.filter((activity) => getIsTxIdLocal(activity.id)),\n  ], 'id');\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId,\n      idsBySlug,\n      newestActivitiesBySlug,\n      localActivities,\n    },\n  });\n}\n\nfunction buildActivityIdsBySlug(activities: ApiActivity[]) {\n  return activities.reduce<Record<string, string[]>>((acc, activity) => {\n    for (const slug of getActivityTokenSlugs(activity)) {\n      acc[slug] ??= [];\n      acc[slug].push(activity.id);\n    }\n\n    return acc;\n  }, {});\n}\n\nexport function removeActivities(\n  global: GlobalState,\n  accountId: string,\n  _ids: Iterable<string>,\n) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  if (!activities) {\n    return global;\n  }\n\n  const ids = new Set(_ids); // Don't use `_ids` again, because the iterable may be disposable\n  if (ids.size === 0) {\n    return global;\n  }\n\n  let { byId, idsBySlug, idsMain, newestActivitiesBySlug, localActivities } = activities;\n  const affectedTokenSlugs = getActivityListTokenSlugs(ids, byId);\n\n  idsBySlug = { ...idsBySlug };\n  for (const tokenSlug of affectedTokenSlugs) {\n    if (tokenSlug in idsBySlug) {\n      idsBySlug[tokenSlug] = idsBySlug[tokenSlug].filter((id) => !ids.has(id));\n\n      if (!idsBySlug[tokenSlug].length) {\n        delete idsBySlug[tokenSlug];\n      }\n    }\n  }\n\n  newestActivitiesBySlug = getNewestActivitiesBySlug({ byId, idsBySlug, newestActivitiesBySlug }, affectedTokenSlugs);\n\n  idsMain = idsMain?.filter((id) => !ids.has(id));\n\n  byId = { ...byId };\n  for (const id of ids) {\n    delete byId[id];\n  }\n\n  localActivities = localActivities?.filter((activity) => !ids.has(activity.id));\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId,\n      idsBySlug,\n      idsMain,\n      newestActivitiesBySlug,\n      localActivities,\n    },\n  });\n}\n\nexport function setIsInitialActivitiesLoadedTrue(global: GlobalState, accountId: string, chain: ApiChain) {\n  const { byChain } = selectAccountState(global, accountId) ?? {};\n\n  if (byChain && byChain[chain]?.isFirstTransactionsLoaded) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    byChain: {\n      ...byChain,\n      [chain]: {\n        ...byChain?.[chain],\n        isFirstTransactionsLoaded: true,\n      },\n    },\n  });\n}\n\nexport function updateActivity(global: GlobalState, accountId: string, activity: ApiActivity) {\n  const { id } = activity;\n\n  const { activities } = selectAccountState(global, accountId) || {};\n  const { byId } = activities ?? {};\n\n  if (!byId || !(id in byId)) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: {\n        ...byId,\n        [id]: activity,\n      },\n    },\n  });\n}\n\nfunction mergeSortedActivityIds(ids0: string[], ids1: string[], byId: Record<string, ApiActivity>) {\n  // Not the best performance, but ok for now\n  return unique([...ids0, ...ids1]).sort((id0, id1) => compareActivities(byId[id0], byId[id1]));\n}\n\nfunction getNewestActivitiesBySlug(\n  {\n    byId, idsBySlug, newestActivitiesBySlug,\n  }: Pick<Exclude<AccountState['activities'], undefined>, 'byId' | 'idsBySlug' | 'newestActivitiesBySlug'>,\n  tokenSlugs: Iterable<string>,\n) {\n  newestActivitiesBySlug = { ...newestActivitiesBySlug };\n\n  for (const tokenSlug of tokenSlugs) {\n    // The `idsBySlug` arrays must be sorted from the newest to the oldest\n    const ids = idsBySlug?.[tokenSlug] ?? [];\n    const newestActivityId = ids.find((id) => getIsIdSuitableForFetchingTimestamp(id) && byId[id]);\n    if (newestActivityId) {\n      newestActivitiesBySlug[tokenSlug] = byId[newestActivityId];\n    } else {\n      delete newestActivitiesBySlug[tokenSlug];\n    }\n  }\n\n  return newestActivitiesBySlug;\n}\n\nfunction getActivityListTokenSlugs(activityIds: Iterable<string>, byId: Record<string, ApiActivity>) {\n  const tokenSlugs = new Set<string>();\n\n  for (const id of activityIds) {\n    const activity = byId[id];\n    if (activity) {\n      for (const tokenSlug of getActivityTokenSlugs(activity)) {\n        tokenSlugs.add(tokenSlug);\n      }\n    }\n  }\n\n  return tokenSlugs;\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentActivityId(global: GlobalState, accountId: string, replaceMap: Map<string, string>) {\n  const { currentActivityId } = selectAccountState(global, accountId) || {};\n  const newActivityId = currentActivityId && replaceMap.get(currentActivityId);\n  if (newActivityId) {\n    global = updateAccountState(global, accountId, { currentActivityId: newActivityId });\n  }\n  return global;\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentSwapId(global: GlobalState, replaceMap: Map<string, string>) {\n  const newSwapId = global.currentSwap.activityId && replaceMap.get(global.currentSwap.activityId);\n  if (newSwapId !== undefined) {\n    global = updateCurrentSwap(global, { activityId: newSwapId });\n  }\n  return global;\n}\n","import type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { selectAccountState } from '../selectors';\nimport { updateAccountSettings, updateAccountState } from './misc';\n\nexport function addNft(global: GlobalState, accountId: string, nft: ApiNft) {\n  const nftAddress = nft.address;\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: { ...nfts?.byAddress, [nftAddress]: nft },\n      orderedAddresses: [nftAddress, ...orderedAddresses],\n    },\n  });\n}\n\nexport function removeNft(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n  const { [nftAddress]: removedNft, ...byAddress } = nfts?.byAddress ?? {};\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress,\n      orderedAddresses,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function updateNft(global: GlobalState, accountId: string, nftAddress: string, partial: Partial<ApiNft>) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const nft = nfts?.byAddress[nftAddress];\n  if (!nfts || !nft) return global;\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: {\n        ...nfts.byAddress,\n        [nftAddress]: { ...nft, ...partial },\n      },\n    },\n  });\n}\n\nexport function addToSelectedAddresses(global: GlobalState, accountId: string, nftAddresses: string[]) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = [...(nfts?.selectedAddresses ?? []), ...nftAddresses];\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function removeFromSelectedAddresses(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses: selectedAddresses.length ? selectedAddresses : undefined,\n    },\n  });\n}\n\n// Updates the account settings to ensure the specified NFT is up-to-date.\nexport function updateAccountSettingsBackgroundNft(global: GlobalState, nft: ApiNft) {\n  Object.entries(global.settings.byAccountId).forEach(([accountId, settings]) => {\n    if (settings.cardBackgroundNft?.address === nft.address) {\n      global = updateAccountSettings(global, accountId, {\n        ...settings,\n        cardBackgroundNft: nft,\n      });\n    }\n  });\n\n  return global;\n}\n","import type { ApiVestingInfo } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\n\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateVestingInfo(global: GlobalState, accountId: string, update: ApiVestingInfo[]): GlobalState {\n  return updateVesting(global, accountId, {\n    info: update,\n  });\n}\n\nexport function updateVesting(\n  global: GlobalState,\n  accountId: string,\n  update: Partial<AccountState['vesting']>,\n): GlobalState {\n  return updateAccountState(global, accountId, {\n    vesting: {\n      ...selectAccountState(global, accountId)?.vesting || { info: [] },\n      ...update,\n    },\n  });\n}\n","import type { GlobalState } from '../types';\n\nexport function updateMintCards(\n  global: GlobalState,\n  update: Partial<GlobalState['currentMintCard']>,\n): GlobalState {\n  return {\n    ...global,\n    currentMintCard: {\n      ...global.currentMintCard,\n      ...update,\n    },\n  };\n}\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { ApiChain, ApiNetwork } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { ApiAuthError, ApiCommonError } from '../../../api/types';\nimport {\n  AppState, AuthState, BiometricsState, HardwareConnectState,\n} from '../../types';\n\nimport {\n  APP_NAME, IS_TELEGRAM_APP, MNEMONIC_CHECK_COUNT, MNEMONIC_COUNT,\n} from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { verifyIdentity as verifyTelegramBiometricIdentity } from '../../../util/authApi/telegram';\nimport webAuthn from '../../../util/authApi/webAuthn';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../../util/biometrics';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isEmptyObject from '../../../util/isEmptyObject';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport { cloneDeep, compact, omitUndefined } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { isLedgerConnectionBroken } from '../../../util/ledger/utils';\nimport { logDebugError } from '../../../util/logs';\nimport { callActionInMain } from '../../../util/multitab';\nimport { clearPoisoningCache } from '../../../util/poisoningHash';\nimport { pause } from '../../../util/schedulers';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  addActionHandler, getActions, getGlobal, setGlobal,\n} from '../..';\nimport { INITIAL_STATE } from '../../initialState';\nimport {\n  clearIsPinAccepted,\n  createAccount,\n  createAccountsFromGlobal,\n  setIsPinAccepted,\n  switchAccountAndClearGlobal,\n  updateAuth,\n  updateBiometrics,\n  updateCurrentAccountId,\n  updateCurrentAccountState,\n  updateHardware,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectAccountIdByAddress,\n  selectAccounts,\n  selectAllHardwareAccounts,\n  selectCurrentNetwork,\n  selectFirstNonHardwareAccount,\n  selectIsOneAccount,\n  selectLedgerAccountIndexToImport,\n  selectNetworkAccountsMemoized,\n  selectNewestActivityTimestamps,\n} from '../../selectors';\n\nconst CREATING_DURATION = 3300;\nconst NATIVE_BIOMETRICS_PAUSE_MS = 750;\n\nexport async function switchAccount(global: GlobalState, accountId: string, newNetwork?: ApiNetwork) {\n  if (accountId === global.currentAccountId) {\n    return;\n  }\n\n  const actions = getActions();\n\n  const newestActivityTimestamps = selectNewestActivityTimestamps(global, accountId);\n  await callApi('activateAccount', accountId, newestActivityTimestamps);\n\n  global = getGlobal();\n  setGlobal(switchAccountAndClearGlobal(global, accountId));\n\n  actions.clearSwapPairsCache();\n  clearPoisoningCache();\n\n  if (newNetwork) {\n    actions.changeNetwork({ network: newNetwork });\n  }\n}\n\naddActionHandler('resetAuth', (global) => {\n  if (global.currentAccountId) {\n    global = { ...global, appState: AppState.Main };\n\n    // Restore the network when refreshing the page during the switching networks\n    global = updateSettings(global, {\n      isTestnet: parseAccountId(global.currentAccountId!).network === 'testnet',\n    });\n  }\n\n  global = { ...global, auth: cloneDeep(INITIAL_STATE.auth) };\n\n  setGlobal(global);\n});\n\naddActionHandler('startCreatingWallet', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const nextAuthState = firstNonHardwareAccount\n    ? AuthState.createBackup\n    : (isFirstAccount\n      ? AuthState.createWallet\n      // The app only has hardware wallets accounts, which means we need to create a password or biometrics\n      : getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  global = getGlobal();\n\n  if (Boolean(firstNonHardwareAccount) && !global.auth.password) {\n    setGlobal(updateAuth(global, {\n      state: AuthState.checkPassword,\n      error: undefined,\n    }));\n    return;\n  }\n\n  const promiseCalls = [\n    callApi('generateMnemonic'),\n    ...(!firstNonHardwareAccount ? [pause(CREATING_DURATION)] : []),\n  ] as [Promise<Promise<string[]> | undefined>, Promise<void> | undefined];\n\n  setGlobal(\n    updateAuth(global, {\n      state: nextAuthState,\n      method: 'createAccount',\n      error: undefined,\n    }),\n  );\n\n  const [mnemonic] = await Promise.all(promiseCalls);\n\n  global = updateAuth(getGlobal(), {\n    mnemonic,\n    mnemonicCheckIndexes: selectMnemonicForCheck(mnemonic?.length ?? MNEMONIC_COUNT),\n  });\n\n  if (firstNonHardwareAccount) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n\n  if (isFirstAccount) {\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('startCreatingBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: global.auth.method !== 'createAccount'\n      ? AuthState.importWalletConfirmBiometrics\n      : AuthState.confirmBiometrics,\n    biometricsStep: 1,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelCreateBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: AuthState.createBiometrics,\n    biometricsStep: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('createPin', (global, actions, { pin, isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletConfirmPin : AuthState.confirmPin,\n    password: pin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('confirmPin', (global, actions, { isImporting }) => {\n  if (getIsNativeBiometricAuthSupported()) {\n    global = updateAuth(global, {\n      state: isImporting ? AuthState.importWalletCreateNativeBiometrics : AuthState.createNativeBiometrics,\n    });\n    setGlobal(global);\n  } else {\n    actions.skipCreateNativeBiometrics();\n  }\n});\n\naddActionHandler('cancelConfirmPin', (global, actions, { isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletCreatePin : AuthState.createPin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelDisclaimer', (global) => {\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n});\n\naddActionHandler('afterCreatePassword', (global, actions, { password, isPasswordNumeric }) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { method } = getGlobal().auth;\n\n  const isImporting = method !== 'createAccount';\n  const isHardware = method === 'importHardwareWallet';\n\n  if (isHardware) {\n    actions.createHardwareAccounts();\n    return;\n  }\n\n  actions.createAccount({ password, isImporting, isPasswordNumeric });\n});\n\naddActionHandler('afterCreateBiometrics', async (global, actions) => {\n  const withCredential = !IS_ELECTRON;\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n    biometricsStep: withCredential ? 1 : undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const credential = withCredential\n      ? await webAuthn.createCredential()\n      : undefined;\n    global = getGlobal();\n    global = updateAuth(global, { biometricsStep: withCredential ? 2 : undefined });\n    setGlobal(global);\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      biometricsStep: undefined,\n    });\n\n    if (!result) {\n      global = updateAuth(global, { error: 'Biometric setup failed.' });\n      setGlobal(global);\n\n      return;\n    }\n\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: result.password });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n      biometricsStep: undefined,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateBiometrics', (global) => {\n  global = updateAuth(global, { state: AuthState.createPassword });\n  setGlobal(global);\n});\n\naddActionHandler('afterCreateNativeBiometrics', async (global, actions) => {\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const { password } = global.auth;\n    const result = await authApi.setupNativeBiometrics(password!);\n\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: false });\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateNativeBiometrics', (global, actions) => {\n  const { password } = global.auth;\n\n  global = updateAuth(global, { isLoading: false, error: undefined });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n\n  actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n});\n\naddActionHandler('createAccount', async (global, actions, {\n  password, isImporting, isPasswordNumeric, version,\n}) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const network = selectCurrentNetwork(getGlobal());\n\n  const result = await callApi(\n    isImporting ? 'importMnemonic' : 'createWallet',\n    network,\n    global.auth.mnemonic!,\n    password,\n    version,\n  );\n\n  global = getGlobal();\n\n  if (!result || 'error' in result) {\n    setGlobal(updateAuth(global, { isLoading: undefined }));\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  const {\n    accountId, tonAddress, tronAddress, secondNetworkAccount,\n  } = result;\n\n  const addressByChain = omitUndefined({\n    ton: tonAddress,\n    tron: tronAddress,\n  }) as Record<ApiChain, string>;\n\n  if (!isImporting) {\n    global = { ...global, appState: AppState.Auth, isAddAccountModalOpen: undefined };\n  }\n  global = updateAuth(global, {\n    isLoading: undefined,\n    password: undefined,\n    firstNetworkAccount: {\n      addressByChain,\n      accountId,\n    },\n    secondNetworkAccount,\n    ...(isPasswordNumeric && { isPasswordNumeric: true }),\n  });\n  global = clearIsPinAccepted(global);\n\n  if (isImporting) {\n    const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n    if (hasAccounts) {\n      setGlobal(global);\n      actions.afterConfirmDisclaimer();\n\n      return;\n    } else {\n      global = updateAuth(global, { state: AuthState.disclaimer });\n    }\n  } else {\n    const accounts = selectAccounts(global) ?? {};\n    const isFirstAccount = isEmptyObject(accounts);\n    global = updateAuth(global, {\n      state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('createHardwareAccounts', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { hardwareSelectedIndices = [] } = getGlobal().hardware;\n  const network = selectCurrentNetwork(getGlobal());\n\n  const ledgerApi = await import('../../../util/ledger');\n  const wallets = await Promise.all(\n    hardwareSelectedIndices.map(\n      (wallet) => ledgerApi.importLedgerWallet(network, wallet),\n    ),\n  );\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isFirstAccount) {\n    callActionInMain('addHardwareAccounts', { wallets });\n    return;\n  }\n\n  actions.addHardwareAccounts({ wallets });\n});\n\naddActionHandler('addHardwareAccounts', (global, actions, { wallets }) => {\n  const isFirstAccount = !global.currentAccountId;\n  const nextActiveAccountId = wallets[0]?.accountId;\n  if (nextActiveAccountId) {\n    void callApi('activateAccount', nextActiveAccountId);\n  }\n\n  const updatedGlobal = wallets.reduce((currentGlobal, wallet) => {\n    if (!wallet) {\n      return currentGlobal;\n    }\n    const { accountId, address, walletInfo } = wallet;\n    const addressByChain = { ton: address } as Record<ApiChain, string>;\n\n    currentGlobal = updateCurrentAccountId(currentGlobal, accountId);\n    currentGlobal = createAccount({\n      global: currentGlobal,\n      accountId,\n      addressByChain,\n      partial: {\n        isHardware: true,\n        ...(walletInfo && {\n          ledger: {\n            driver: walletInfo.driver,\n            index: walletInfo.index,\n          },\n        }),\n      },\n    });\n\n    return currentGlobal;\n  }, getGlobal());\n\n  if (nextActiveAccountId) {\n    global = updateCurrentAccountId(updatedGlobal, nextActiveAccountId);\n  }\n  global = updateAuth(global, { isLoading: false });\n  global = {\n    ...global,\n    shouldForceAccountEdit: true,\n  };\n  setGlobal(global);\n\n  if (getGlobal().areSettingsOpen) {\n    actions.closeSettings();\n  }\n\n  wallets.forEach((hardwareWallet) => {\n    if (hardwareWallet?.accountId) {\n      actions.tryAddNotificationAccount({ accountId: hardwareWallet?.accountId });\n    }\n  });\n\n  actions.afterSignIn();\n  if (isFirstAccount) {\n    actions.resetApiSettings();\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('afterCheckMnemonic', (global, actions) => {\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  global = updateCurrentAccountState(global, {});\n  global = createAccountsFromGlobal(global);\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('restartCheckMnemonicIndexes', (global, actions, { worldsCount }) => {\n  setGlobal(\n    updateAuth(global, {\n      mnemonicCheckIndexes: selectMnemonicForCheck(worldsCount),\n    }),\n  );\n});\n\naddActionHandler('skipCheckMnemonic', (global, actions) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('skipCheckMnemonic');\n    return;\n  }\n\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  global = updateCurrentAccountState(global, { isBackupRequired: true });\n  global = createAccountsFromGlobal(global);\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  setGlobal(global);\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('startImportingWallet', (global) => {\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const state = firstNonHardwareAccount && !global.auth.password\n    ? AuthState.importWalletCheckPassword\n    : AuthState.importWallet;\n\n  setGlobal(\n    updateAuth(global, {\n      state,\n      error: undefined,\n      method: 'importMnemonic',\n    }),\n  );\n});\n\naddActionHandler('openAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.about, error: undefined }));\n});\n\naddActionHandler('closeAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.none, error: undefined }));\n});\n\naddActionHandler('afterImportMnemonic', async (global, actions, { mnemonic }) => {\n  mnemonic = compact(mnemonic);\n\n  if (!isMnemonicPrivateKey(mnemonic)) {\n    if (!await callApi('validateMnemonic', mnemonic)) {\n      setGlobal(updateAuth(getGlobal(), {\n        error: ApiAuthError.InvalidMnemonic,\n      }));\n\n      return;\n    }\n  }\n\n  global = getGlobal();\n\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n  const state = getDoesUsePinPad()\n    ? AuthState.importWalletCreatePin\n    : (IS_BIOMETRIC_AUTH_SUPPORTED\n      ? AuthState.importWalletCreateBiometrics\n      : AuthState.importWalletCreatePassword);\n\n  global = updateAuth(global, {\n    mnemonic,\n    error: undefined,\n    ...(!firstNonHardwareAccount && { state }),\n  });\n  setGlobal(global);\n\n  if (!firstNonHardwareAccount) {\n    if (!hasAccounts) {\n      actions.requestConfetti();\n    }\n\n    void vibrateOnSuccess();\n  } else {\n    actions.confirmDisclaimer();\n  }\n});\n\naddActionHandler('confirmDisclaimer', (global, actions) => {\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n\n  if (firstNonHardwareAccount) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  actions.afterConfirmDisclaimer();\n});\n\naddActionHandler('afterConfirmDisclaimer', (global, actions) => {\n  const { firstNetworkAccount } = global.auth;\n\n  global = updateCurrentAccountId(global, firstNetworkAccount!.accountId);\n  global = updateAuth(global, { state: AuthState.ready });\n  global = createAccountsFromGlobal(global);\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('cleanAuthError', (global) => {\n  setGlobal(updateAuth(global, { error: undefined }));\n});\n\nexport function selectMnemonicForCheck(worldsCount: number) {\n  return Array(worldsCount)\n    .fill(0)\n    .map((_, i) => ({ i, rnd: Math.random() }))\n    .sort((a, b) => a.rnd - b.rnd)\n    .map((i) => i.i)\n    .slice(0, Math.min(MNEMONIC_CHECK_COUNT, worldsCount))\n    .sort((a, b) => a - b);\n}\n\naddActionHandler('startChangingNetwork', (global, actions, { network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startChangingNetwork', { network });\n  }\n\n  const accountIds = Object.keys(selectNetworkAccountsMemoized(network, global.accounts!.byId)!);\n\n  if (accountIds.length) {\n    const accountId = accountIds[0];\n    actions.switchAccount({ accountId, newNetwork: network });\n  } else {\n    setGlobal({\n      ...global,\n      areSettingsOpen: false,\n      appState: AppState.Auth,\n    });\n    actions.changeNetwork({ network });\n  }\n});\n\naddActionHandler('switchAccount', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccount', payload);\n    return;\n  }\n\n  const { accountId, newNetwork } = payload;\n  await switchAccount(global, accountId, newNetwork);\n});\n\naddActionHandler('connectHardwareWallet', async (global, actions, params) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n  const { areSettingsOpen } = global;\n\n  if (IS_DELEGATING_BOTTOM_SHEET && !isFirstAccount && !areSettingsOpen) return;\n\n  global = updateHardware(global, {\n    hardwareState: HardwareConnectState.Connecting,\n    hardwareWallets: undefined,\n    hardwareSelectedIndices: undefined,\n    isLedgerConnected: undefined,\n    isTonAppConnected: undefined,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  const isLedgerConnected = await ledgerApi.connectLedger(params.transport);\n  global = getGlobal();\n\n  if (!isLedgerConnected) {\n    global = updateHardware(global, {\n      isLedgerConnected: false,\n      hardwareState: HardwareConnectState.Failed,\n    });\n    setGlobal(global);\n    return;\n  }\n\n  global = updateHardware(global, {\n    isLedgerConnected: true,\n  });\n  setGlobal(global);\n\n  try {\n    const isTonAppConnected = await ledgerApi.waitLedgerTonApp();\n    global = getGlobal();\n\n    if (!isTonAppConnected) {\n      global = updateHardware(global, {\n        isTonAppConnected: false,\n        hardwareState: HardwareConnectState.Failed,\n      });\n      setGlobal(global);\n      return;\n    }\n\n    global = updateHardware(global, {\n      isTonAppConnected: true,\n    });\n    setGlobal(global);\n\n    global = getGlobal();\n    const { isRemoteTab } = global.hardware;\n    const network = selectCurrentNetwork(global);\n    const lastIndex = selectLedgerAccountIndexToImport(global);\n    const currentHardwareAccounts = selectAllHardwareAccounts(global) ?? [];\n    const currentHardwareAddresses = currentHardwareAccounts.map((account) => account.addressByChain.ton);\n    const hardwareWallets = isRemoteTab ? [] : await ledgerApi.getNextLedgerWallets(\n      network,\n      lastIndex,\n      currentHardwareAddresses,\n    );\n\n    global = getGlobal();\n\n    if ('error' in hardwareWallets) {\n      actions.showError({ error: hardwareWallets.error });\n      throw Error(hardwareWallets.error);\n    }\n\n    const nextHardwareState = isRemoteTab || hardwareWallets.length === 1\n      ? HardwareConnectState.ConnectedWithSingleWallet\n      : HardwareConnectState.ConnectedWithSeveralWallets;\n\n    global = updateHardware(global, {\n      hardwareWallets,\n      hardwareState: nextHardwareState,\n      lastUsedTransport: params.transport,\n    });\n    setGlobal(global);\n  } catch (err: any) {\n    const isLedgerDisconnected = isLedgerConnectionBroken(err.name);\n\n    if (isLedgerDisconnected && !params.noRetry) {\n      actions.connectHardwareWallet({ ...params, noRetry: true });\n      return;\n    }\n\n    global = getGlobal();\n    global = updateHardware(global, {\n      isLedgerConnected: !isLedgerDisconnected,\n      isTonAppConnected: isLedgerDisconnected ? undefined : global.hardware.isTonAppConnected,\n      hardwareState: HardwareConnectState.Failed,\n    });\n    setGlobal(global);\n\n    logDebugError('connectHardwareWallet', err);\n  }\n});\n\naddActionHandler('loadMoreHardwareWallets', async (global, actions, { lastIndex }) => {\n  const network = selectCurrentNetwork(global);\n  const oldHardwareWallets = global.hardware.hardwareWallets ?? [];\n  const ledgerApi = await import('../../../util/ledger');\n  const hardwareWallets = await ledgerApi.getNextLedgerWallets(network, lastIndex);\n\n  global = getGlobal();\n\n  if ('error' in hardwareWallets) {\n    actions.showError({ error: hardwareWallets.error });\n    throw Error(hardwareWallets.error);\n  }\n\n  global = updateHardware(global, {\n    hardwareWallets: oldHardwareWallets.concat(hardwareWallets),\n  });\n  setGlobal(global);\n});\n\naddActionHandler('afterSelectHardwareWallets', (global, actions, { hardwareSelectedIndices }) => {\n  global = updateAuth(global, {\n    method: 'importHardwareWallet',\n    error: undefined,\n  });\n\n  global = updateHardware(global, {\n    hardwareSelectedIndices,\n  });\n\n  setGlobal(global);\n  actions.afterCreatePassword({ password: '' });\n});\n\naddActionHandler('resetHardwareWalletConnect', (global) => {\n  global = updateHardware(global, {\n    hardwareState: HardwareConnectState.Connect,\n    isLedgerConnected: undefined,\n    isTonAppConnected: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('enableBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: 'Wrong password, please try again.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    error: undefined,\n    state: BiometricsState.TurnOnRegistration,\n  });\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    const credential = IS_ELECTRON\n      ? undefined\n      : await webAuthn.createCredential();\n\n    global = getGlobal();\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnVerification });\n    setGlobal(global);\n\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    if (!result) {\n      global = updateBiometrics(global, {\n        error: 'Biometric setup failed.',\n        state: BiometricsState.TurnOnPasswordConfirmation,\n      });\n      setGlobal(global);\n\n      return;\n    }\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnComplete });\n    setGlobal(global);\n\n    await callApi('changePassword', password, result.password);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n\n    setGlobal(global);\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateBiometrics(global, {\n      error,\n      state: BiometricsState.TurnOnPasswordConfirmation,\n    });\n    setGlobal(global);\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('disableBiometrics', async (global, actions, { password, isPasswordNumeric }) => {\n  const { password: oldPassword } = global.biometrics;\n\n  if (!password || !oldPassword) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    await callApi('changePassword', oldPassword, password);\n  } catch (err: any) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: err?.message || 'Failed to disable biometrics.' });\n    setGlobal(global);\n\n    return;\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    state: BiometricsState.TurnOffComplete,\n    error: undefined,\n  });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('closeBiometricSettings', (global) => {\n  global = { ...global, biometrics: cloneDeep(INITIAL_STATE.biometrics) };\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOn', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOnPasswordConfirmation });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOffWarning', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffWarning });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOff', async (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffBiometricConfirmation });\n  setGlobal(global);\n\n  const password = await authApi.getPassword(global.settings.authConfig!);\n  global = getGlobal();\n\n  if (!password) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n  } else {\n    global = updateBiometrics(global, {\n      state: BiometricsState.TurnOffCreatePassword,\n      password,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('disableNativeBiometrics', (global) => {\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('enableNativeBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: 'Incorrect code, please try again.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n\n  global = setIsPinAccepted(global);\n  global = {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n  setGlobal(global);\n\n  try {\n    let isVerified: boolean;\n\n    if (IS_TELEGRAM_APP) {\n      const verificationResult = await verifyTelegramBiometricIdentity();\n      isVerified = verificationResult.success;\n    } else {\n      isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n    }\n\n    if (!isVerified) {\n      global = getGlobal();\n      global = {\n        ...global,\n        nativeBiometricsError: 'Failed to enable biometrics.',\n      };\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n      void vibrateOnError();\n\n      return;\n    }\n\n    const result = await authApi.setupNativeBiometrics(password);\n\n    await pause(NATIVE_BIOMETRICS_PAUSE_MS);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n    global = { ...global, nativeBiometricsError: undefined };\n    setGlobal(global);\n\n    void vibrateOnSuccess();\n  } catch (err: any) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: err?.message || 'Failed to enable biometrics.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    void vibrateOnError();\n  }\n});\n\naddActionHandler('clearNativeBiometricsError', (global) => {\n  return {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n});\n\naddActionHandler('openAuthBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAuthBackupWalletModal');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.safetyRules });\n  setGlobal(global);\n});\n\naddActionHandler('openMnemonicPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openMnemonicPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.mnemonicPage });\n  setGlobal(global);\n});\n\naddActionHandler('openCreateBackUpPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCreateBackUpPage');\n    return;\n  }\n\n  const accounts = selectAccounts(global) ?? {};\n\n  const isFirstAccount = isEmptyObject(accounts);\n  global = updateAuth(global, {\n    state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('openCheckWordsPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCheckWordsPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.checkWords });\n  setGlobal(global);\n});\n\naddActionHandler('closeCheckWordsPage', (global, actions, props) => {\n  const { isBackupCreated } = props || {};\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeCheckWordsPage', props);\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && isBackupCreated) {\n    actions.afterCheckMnemonic();\n  }\n});\n\naddActionHandler('copyStorageData', async (global, actions) => {\n  const accountConfigJson = await callApi('fetchAccountConfigForDebugPurposesOnly');\n\n  if (accountConfigJson) {\n    const storageData = JSON.stringify({\n      ...JSON.parse(accountConfigJson),\n      global: reduceGlobalForDebug(),\n    });\n\n    await copyTextToClipboard(storageData);\n\n    actions.showNotification({ message: getTranslation('Copied') });\n  } else {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  }\n});\n\naddActionHandler('importAccountByVersion', async (global, actions, { version }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('importAccountByVersion', { version });\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n\n  const wallet = await callApi('importNewWalletVersion', accountId, version);\n  global = getGlobal();\n\n  const existAccountId = selectAccountIdByAddress(global, 'ton', wallet!.address);\n\n  if (existAccountId) {\n    actions.switchAccount({ accountId: existAccountId });\n    return;\n  }\n\n  const { title: currentWalletTitle } = (global.accounts?.byId ?? {})[accountId];\n  const addressByChain = { ton: wallet!.address } as Record<ApiChain, string>;\n  global = updateCurrentAccountId(global, wallet!.accountId);\n\n  const ledgerInfo = wallet!.ledger ? {\n    isHardware: true,\n    ledger: wallet?.ledger,\n  } : undefined;\n\n  global = createAccount({\n    global,\n    accountId: wallet!.accountId,\n    addressByChain,\n    partial: { ...ledgerInfo, title: currentWalletTitle },\n    titlePostfix: version,\n  });\n  setGlobal(global);\n\n  await callApi('activateAccount', wallet!.accountId);\n\n  actions.tryAddNotificationAccount({ accountId: wallet!.accountId });\n});\n\naddActionHandler('setIsAuthLoading', (global, actions, { isLoading }) => {\n  global = updateAuth(global, { isLoading });\n  setGlobal(global);\n});\n\nfunction reduceGlobalForDebug() {\n  const reduced = cloneDeep(getGlobal());\n\n  reduced.tokenInfo = {} as any;\n  reduced.swapTokenInfo = {} as any;\n  Object.entries(reduced.byAccountId).forEach(([, state]) => {\n    state.activities = {} as any;\n  });\n\n  return reduced;\n}\n","import type { ApiChain, ApiSwapAsset, ApiTokenWithPrice, ApiTransaction } from '../../api/types';\nimport type { Account, UserSwapToken } from '../types';\n\nimport { CHAIN_CONFIG, TINY_TRANSFER_MAX_COST, TONCOIN } from '../../config';\nimport { isScamTransaction } from '../../util/activities';\nimport { toBig } from '../../util/decimals';\n\nexport function getIsTinyOrScamTransaction(transaction: ApiTransaction, token?: ApiTokenWithPrice) {\n  if (isScamTransaction(transaction)) return true;\n  if (!token || transaction.nft || transaction.type) return false;\n\n  const decimals = token.decimals;\n  const cost = toBig(transaction.amount, decimals).abs().mul(token.quote.priceUsd ?? 0);\n  return cost.lt(TINY_TRANSFER_MAX_COST);\n}\n\nexport function resolveSwapAssetId(asset: ApiSwapAsset) {\n  return asset.slug === TONCOIN.slug ? asset.symbol : (asset.tokenAddress ?? asset.slug);\n}\n\nexport function resolveSwapAsset(bySlug: Record<string, ApiSwapAsset>, anyId: string) {\n  return bySlug[anyId] ?? Object.values(bySlug).find(({ tokenAddress }) => tokenAddress === anyId);\n}\n\nexport function getIsSupportedChain(chain?: string): chain is ApiChain {\n  return chain as ApiChain in CHAIN_CONFIG;\n}\n\nexport function getIsInternalSwap({\n  from,\n  to,\n  toAddress,\n  addressByChain,\n}: {\n  from?: UserSwapToken | ApiSwapAsset;\n  to?: UserSwapToken | ApiSwapAsset;\n  toAddress?: string;\n  addressByChain?: Account['addressByChain'];\n}) {\n  const isMultichain = Boolean(addressByChain?.tron);\n  return (from?.chain === 'ton' && to?.chain === 'ton') || (\n    isMultichain && from && to && addressByChain\n      && getIsSupportedChain(from.chain)\n      && addressByChain[to.chain as ApiChain] === toAddress\n  );\n}\n","import type { ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState, PriceHistoryPeriods } from '../types';\n\nexport function updateTokenPriceHistory(global: GlobalState, slug: string, partial: PriceHistoryPeriods): GlobalState {\n  const { bySlug } = global.tokenPriceHistory;\n\n  return {\n    ...global,\n    tokenPriceHistory: {\n      bySlug: {\n        ...bySlug,\n        [slug]: {\n          ...bySlug[slug],\n          ...partial,\n        },\n      },\n    },\n  };\n}\n\nexport function updateTokenInfo(global: GlobalState, partial: Record<string, ApiTokenWithPrice>): GlobalState {\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...global.tokenInfo.bySlug,\n        ...partial,\n      },\n    },\n  };\n}\n","import type {\n  ApiActivity,\n  ApiSwapAsset,\n  ApiToken,\n  ApiTokenWithPrice,\n} from '../../../api/types';\n\nimport { getIsIdSuitableForFetchingTimestamp } from '../../../util/activities';\nimport { compareActivities } from '../../../util/compareActivities';\nimport {\n  buildCollectionByKey, extractKey, findLast, unique,\n} from '../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { onTickEnd, pause } from '../../../util/schedulers';\nimport { buildUserToken } from '../../../util/tokens';\nimport { callApi } from '../../../api';\nimport { getIsTinyOrScamTransaction } from '../../helpers';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  changeBalance,\n  updateAccountState,\n  updateActivitiesIsHistoryEndReached,\n  updateActivitiesIsLoading,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentSignature,\n  updateSettings,\n} from '../../reducers';\nimport { updateTokenInfo } from '../../reducers/tokens';\nimport {\n  selectAccountState,\n  selectAccountTxTokenSlugs,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectLastMainTxTimestamp,\n  selectToken,\n} from '../../selectors';\n\nconst IMPORT_TOKEN_PAUSE = 250;\n\naddActionHandler('fetchTokenTransactions', async (global, actions, { limit, slug, shouldLoadWithBudget }) => {\n  global = updateActivitiesIsLoading(global, true);\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n\n  let { idsBySlug = {}, byId = {} } = selectAccountState(global, accountId)?.activities || {};\n  let shouldFetchMore = true;\n  let fetchedActivities: ApiActivity[] = [];\n  let tokenIds = idsBySlug[slug] || [];\n  const toTxId = findLast(tokenIds, (id) => getIsIdSuitableForFetchingTimestamp(id) && Boolean(byId[id]));\n  let toTimestamp = toTxId ? byId[toTxId].timestamp : undefined;\n  const { chain } = selectToken(global, slug);\n\n  while (shouldFetchMore) {\n    const result = await callApi('fetchActivitySlice', accountId, chain, slug, toTimestamp, limit);\n\n    global = getGlobal();\n\n    if (!result || 'error' in result) {\n      break;\n    }\n\n    if (!result.length) {\n      global = updateActivitiesIsHistoryEndReached(global, true, slug);\n      break;\n    }\n\n    const { areTinyTransfersHidden } = global.settings;\n\n    const filteredResult = result.filter((tx) => {\n      const shouldHide = tx.kind === 'transaction'\n        && (\n          getIsTransactionWithPoisoning(tx)\n          || (areTinyTransfersHidden && getIsTinyOrScamTransaction(tx))\n        );\n\n      return !shouldHide;\n    });\n\n    fetchedActivities = fetchedActivities.concat(result);\n    shouldFetchMore = filteredResult.length < limit && fetchedActivities.length < limit;\n\n    tokenIds = unique(tokenIds.concat(filteredResult.map((tx) => tx.id)));\n    toTimestamp = result[result.length - 1].timestamp;\n  }\n\n  fetchedActivities.sort(compareActivities);\n\n  global = updateActivitiesIsLoading(global, false);\n\n  const newById = buildCollectionByKey(fetchedActivities, 'id');\n  const newOrderedIds = Object.keys(newById);\n  const currentActivities = selectAccountState(global, accountId)?.activities;\n  byId = { ...(currentActivities?.byId || {}), ...newById };\n\n  idsBySlug = currentActivities?.idsBySlug || {};\n  tokenIds = unique((idsBySlug[slug] || []).concat(newOrderedIds));\n\n  tokenIds.sort((a, b) => compareActivities(byId[a], byId[b]));\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...currentActivities,\n      byId,\n      idsBySlug: { ...idsBySlug, [slug]: tokenIds },\n    },\n  });\n\n  setGlobal(global);\n\n  if (shouldLoadWithBudget) {\n    onTickEnd(() => {\n      actions.fetchTokenTransactions({ limit, slug });\n    });\n  }\n});\n\naddActionHandler('fetchAllTransactions', async (global, actions, { limit, shouldLoadWithBudget }) => {\n  global = updateActivitiesIsLoading(global, true);\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n\n  const tronTokenSlugs = selectAccountTxTokenSlugs(global, accountId, 'tron') ?? [];\n  let toTimestamp = selectLastMainTxTimestamp(global, accountId)!;\n  let shouldFetchMore = true;\n  let fetchedActivities: ApiActivity[] = [];\n\n  while (shouldFetchMore) {\n    const result = await callApi(\n      'fetchAllActivitySlice',\n      accountId,\n      limit,\n      toTimestamp,\n      tronTokenSlugs,\n    );\n\n    global = getGlobal();\n\n    if (!result || 'error' in result) {\n      break;\n    }\n\n    if (!result.length) {\n      global = updateActivitiesIsHistoryEndReached(global, true);\n      break;\n    }\n\n    const { areTinyTransfersHidden } = global.settings;\n\n    const filteredResult = result.filter((tx) => {\n      const shouldHide = tx.kind === 'transaction'\n        && (\n          getIsTransactionWithPoisoning(tx)\n          || (areTinyTransfersHidden && getIsTinyOrScamTransaction(tx))\n        );\n\n      return !shouldHide;\n    });\n\n    fetchedActivities = fetchedActivities.concat(result);\n    shouldFetchMore = filteredResult.length < limit && fetchedActivities.length < limit;\n    toTimestamp = result[result.length - 1].timestamp;\n  }\n\n  global = updateActivitiesIsLoading(global, false);\n\n  const newById = buildCollectionByKey(fetchedActivities, 'id');\n  const currentActivities = selectAccountState(global, accountId)?.activities;\n  const byId = { ...(currentActivities?.byId || {}), ...newById };\n\n  fetchedActivities.sort(compareActivities);\n\n  const idsMain = unique((currentActivities?.idsMain ?? []).concat(extractKey(fetchedActivities, 'id')));\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...currentActivities,\n      byId,\n      idsMain,\n    },\n  });\n\n  setGlobal(global);\n\n  if (shouldLoadWithBudget) {\n    onTickEnd(() => {\n      actions.fetchAllTransactions({ limit });\n    });\n  }\n});\n\naddActionHandler('resetIsHistoryEndReached', (global, actions, payload) => {\n  global = updateActivitiesIsHistoryEndReached(global, false, payload?.slug);\n  setGlobal(global);\n});\n\naddActionHandler('setIsBackupRequired', (global, actions, { isMnemonicChecked }) => {\n  const { isBackupRequired } = selectCurrentAccountState(global) ?? {};\n\n  setGlobal(updateCurrentAccountState(global, {\n    isBackupRequired: isMnemonicChecked ? undefined : isBackupRequired,\n  }));\n});\n\naddActionHandler('submitSignature', async (global, actions, payload) => {\n  const { password } = payload;\n  const { promiseId } = global.currentSignature!;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSignature(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  await callApi('confirmDappRequest', promiseId, password!);\n\n  setGlobal(updateCurrentSignature(getGlobal(), { isSigned: true }));\n});\n\naddActionHandler('clearSignatureError', (global) => {\n  setGlobal(updateCurrentSignature(global, { error: undefined }));\n});\n\naddActionHandler('cancelSignature', (global) => {\n  const { promiseId } = global.currentSignature || {};\n\n  if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  setGlobal({\n    ...global,\n    currentSignature: undefined,\n  });\n});\n\naddActionHandler('addToken', (global, actions, { token }) => {\n  if (!global.tokenInfo?.bySlug?.[token.slug]) {\n    global = updateTokenInfo(global, {\n      [token.slug]: {\n        name: token.name,\n        symbol: token.symbol,\n        slug: token.slug,\n        decimals: token.decimals,\n        chain: token.chain,\n        image: token.image,\n        keywords: token.keywords,\n        quote: {\n          slug: token.slug,\n          price: token.price ?? 0,\n          priceUsd: token.priceUsd ?? 0,\n          percentChange24h: token.change24h ?? 0,\n        },\n      },\n    });\n  }\n\n  const { balances } = selectCurrentAccountState(global) ?? {};\n\n  if (!balances?.bySlug[token.slug]) {\n    global = updateCurrentAccountState(global, {\n      balances: {\n        ...balances,\n        bySlug: {\n          ...balances?.bySlug,\n          [token.slug]: 0n,\n        },\n      },\n    });\n  }\n\n  const settings = selectCurrentAccountSettings(global);\n  global = updateCurrentAccountSettings(global, {\n    importedSlugs: [...settings?.importedSlugs ?? [], token.slug],\n  });\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  global = updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: [...accountSettings.orderedSlugs ?? [], token.slug],\n    alwaysShownSlugs: unique([...accountSettings.alwaysShownSlugs ?? [], token.slug]),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((slug) => slug !== token.slug),\n    deletedSlugs: accountSettings.deletedSlugs?.filter((slug) => slug !== token.slug),\n  });\n\n  return global;\n});\n\naddActionHandler('importToken', async (global, actions, { address }) => {\n  const { currentAccountId } = global;\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: true,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n\n  const slug = (await callApi('buildTokenSlug', 'ton', address))!;\n  global = getGlobal();\n\n  let token: ApiTokenWithPrice | ApiToken | undefined = global.tokenInfo.bySlug?.[slug!];\n\n  if (!token) {\n    token = await callApi('fetchToken', global.currentAccountId!, address);\n    await pause(IMPORT_TOKEN_PAUSE);\n\n    global = getGlobal();\n    if (!token) {\n      global = updateSettings(global, {\n        importToken: {\n          isLoading: false,\n          token: undefined,\n        },\n      });\n      setGlobal(global);\n      return;\n    } else {\n      const apiToken: ApiTokenWithPrice = {\n        ...token,\n        quote: {\n          slug: token.slug,\n          price: 0,\n          priceUsd: 0,\n          percentChange24h: 0,\n        },\n      };\n      global = updateTokenInfo(global, { [apiToken.slug]: apiToken });\n      setGlobal(global);\n    }\n  }\n\n  const balances = selectAccountState(global, currentAccountId!)?.balances?.bySlug ?? {};\n  const shouldUpdateBalance = !(token.slug in balances);\n\n  const userToken = buildUserToken(token);\n\n  global = getGlobal();\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: userToken,\n    },\n  });\n  if (shouldUpdateBalance) {\n    global = changeBalance(global, global.currentAccountId!, token.slug, 0n);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('resetImportToken', (global) => {\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('verifyHardwareAddress', async (global, actions) => {\n  const accountId = global.currentAccountId!;\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (!(await ledgerApi.reconnectLedger())) {\n    actions.showError({ error: '$ledger_not_ready' });\n    return;\n  }\n\n  try {\n    actions.showDialog({ title: 'Ledger', message: '$ledger_verify_address_on_device' });\n    await ledgerApi.verifyAddress(accountId);\n  } catch (err) {\n    actions.showError({ error: err as string });\n  }\n});\n\naddActionHandler('setActiveContentTab', (global, actions, { tab }) => {\n  return updateCurrentAccountState(global, {\n    activeContentTab: tab,\n  });\n});\n\naddActionHandler('addSwapToken', (global, actions, { token }) => {\n  const isAlreadyExist = token.slug in global.swapTokenInfo.bySlug;\n\n  if (isAlreadyExist) {\n    return;\n  }\n\n  const apiSwapAsset: ApiSwapAsset = {\n    name: token.name,\n    symbol: token.symbol,\n    chain: token.chain,\n    slug: token.slug,\n    decimals: token.decimals,\n    image: token.image,\n    tokenAddress: token.tokenAddress,\n    keywords: token.keywords,\n    isPopular: false,\n    price: 0,\n    priceUsd: 0,\n  };\n\n  setGlobal({\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...global.swapTokenInfo.bySlug,\n        [apiSwapAsset.slug]: apiSwapAsset,\n      },\n    },\n  });\n});\n\naddActionHandler('apiUpdateWalletVersions', (global, actions, params) => {\n  const { accountId, versions, currentVersion } = params;\n  global = {\n    ...global,\n    walletVersions: {\n      ...global.walletVersions,\n      currentVersion,\n      byId: {\n        ...global.walletVersions?.byId,\n        [accountId]: versions,\n      },\n    },\n  };\n  setGlobal(global);\n});\n","import type { ApiStakingType } from '../../api/types';\n\nimport { DEFAULT_FEE } from '../../config';\nimport { TON_GAS, TON_GAS_REAL } from '../../api/chains/ton/constants';\n\ntype TonOperationFees = {\n  gas: bigint;\n  real: bigint;\n};\n\nexport default function getTonOperationFees(operation: keyof typeof TON_GAS_REAL): TonOperationFees {\n  return {\n    gas: TON_GAS[operation] + DEFAULT_FEE,\n    real: TON_GAS_REAL[operation],\n  };\n}\n\nexport function getTonStakingFees(type?: ApiStakingType): {\n  stake: TonOperationFees;\n  unstake: TonOperationFees;\n  claim?: TonOperationFees;\n} {\n  switch (type) {\n    case 'nominators': {\n      return {\n        stake: getTonOperationFees('stakeNominators'),\n        unstake: getTonOperationFees('unstakeNominators'),\n      };\n    }\n    case 'liquid': {\n      return {\n        stake: getTonOperationFees('stakeLiquid'),\n        unstake: getTonOperationFees('unstakeLiquid'),\n      };\n    }\n    case 'jetton': {\n      return {\n        stake: getTonOperationFees('stakeJettons'),\n        unstake: getTonOperationFees('unstakeJettons'),\n        claim: getTonOperationFees('claimJettons'),\n      };\n    }\n  }\n\n  return {\n    stake: { gas: 0n, real: 0n },\n    unstake: { gas: 0n, real: 0n },\n  };\n}\n","import { registerPlugin } from '@capacitor/core';\n\nimport type { BottomSheetPlugin } from './definitions';\n\nconst BottomSheet = registerPlugin<BottomSheetPlugin>('BottomSheet');\n\nexport * from './definitions';\nexport { BottomSheet };\n","type Parts = (string | false | undefined)[];\ntype PartsWithGlobals = (string | false | undefined | string[])[];\ntype ClassNameBuilder =\n  ((elementName: string, ...modifiers: PartsWithGlobals) => string)\n  & Record<string, string>;\n\nexport default function buildClassName(...parts: Parts) {\n  return parts.filter(Boolean).join(' ');\n}\n\nexport function createClassNameBuilder(componentName: string) {\n  return ((elementName: string, ...modifiers: PartsWithGlobals) => {\n    const baseName = elementName === '&' ? componentName : `${componentName}__${elementName}`;\n\n    return modifiers.reduce<string[]>((acc, modifier) => {\n      if (modifier) {\n        // A bit hacky way to pass global class names\n        if (Array.isArray(modifier)) {\n          acc.push(...modifier);\n        } else {\n          acc.push(`${baseName}--${modifier}`);\n        }\n      }\n\n      return acc;\n    }, [baseName]).join(' ');\n  }) as ClassNameBuilder;\n}\n","import type React from '../lib/teact/teact';\n\nexport const stopEvent = (e: React.UIEvent | Event | React.FormEvent) => {\n  e.stopPropagation();\n  e.preventDefault();\n};\n\nexport function listenOnce<T extends Event = Event>(\n  target: Pick<EventTarget, 'addEventListener' | 'removeEventListener'>,\n  name: string,\n  handler: (event: T) => void,\n) {\n  const handleEvent = (event: Event) => {\n    target.removeEventListener(name, handleEvent);\n    handler(event as T);\n  };\n  target.addEventListener(name, handleEvent);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nfunction useEffectOnce(effect: React.EffectCallback) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useEffect(effect, []);\n}\n\nexport default useEffectOnce;\n","import * as langProvider from '../util/langProvider';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nexport type LangFn = langProvider.LangFn;\n\nconst useLang = (): LangFn => {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    return langProvider.addCallback(forceUpdate);\n  });\n\n  return langProvider.getTranslation;\n};\n\nexport default useLang;\n","import { useRef, useState } from '../lib/teact/teact';\n\nimport buildClassName from '../util/buildClassName';\n\nconst CLOSE_DURATION = 350;\n\nconst useShowTransition = (\n  isOpen = false,\n  onCloseTransitionEnd?: () => void,\n  noFirstOpenTransition = false,\n  className: string | false = 'fast',\n  noCloseTransition = false,\n  closeDuration = CLOSE_DURATION,\n  noOpenTransition = false,\n) => {\n  const [isClosed, setIsClosed] = useState(!isOpen);\n  const closeTimeoutRef = useRef<number>();\n  // SS class should be added in a separate tick to turn on CSS transition.\n  const [hasOpenClassName, setHasOpenClassName] = useState(isOpen && noFirstOpenTransition);\n\n  if (isOpen) {\n    setIsClosed(false);\n    setHasOpenClassName(true);\n\n    if (closeTimeoutRef.current) {\n      window.clearTimeout(closeTimeoutRef.current);\n      closeTimeoutRef.current = undefined;\n    }\n  } else {\n    setHasOpenClassName(false);\n\n    if (!isClosed && !closeTimeoutRef.current) {\n      const exec = () => {\n        setIsClosed(true);\n\n        if (onCloseTransitionEnd) {\n          onCloseTransitionEnd();\n        }\n\n        closeTimeoutRef.current = undefined;\n      };\n\n      if (noCloseTransition) {\n        exec();\n      } else {\n        closeTimeoutRef.current = window.setTimeout(exec, closeDuration);\n      }\n    }\n  }\n\n  // `noCloseTransition`, when set to true, should remove the open class immediately\n  const shouldHaveOpenClassName = (hasOpenClassName && !(noCloseTransition && !isOpen)) || (noOpenTransition && isOpen);\n  const isClosing = Boolean(closeTimeoutRef.current);\n  const shouldRender = isOpen || isClosing;\n  const transitionClassNames = buildClassName(\n    className && 'opacity-transition',\n    className,\n    shouldHaveOpenClassName && 'open',\n    !shouldHaveOpenClassName && 'not-open',\n    shouldRender && 'shown',\n    !shouldRender && 'not-shown',\n    isClosing && 'closing',\n  );\n\n  return {\n    shouldRender,\n    transitionClassNames,\n    hasShownClass: shouldRender,\n    hasOpenClass: shouldHaveOpenClassName,\n  };\n};\n\nexport default useShowTransition;\n","import type { CHAIN, ConnectEventError, ConnectEventSuccess } from '@tonconnect/protocol';\n\nexport interface TransactionPayload {\n  valid_until?: number;\n  network?: CHAIN;\n  from?: string; // https://github.com/ton-blockchain/ton-connect/blob/main/wallet-guidelines.md#multi-accounts\n  messages: TransactionPayloadMessage[];\n}\n\nexport interface TransactionPayloadMessage {\n  address: string;\n  amount: string;\n  payload?: string;\n  stateInit?: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum CONNECT_EVENT_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  MANIFEST_NOT_FOUND_ERROR = 2,\n  MANIFEST_CONTENT_ERROR = 3,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum SEND_TRANSACTION_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum SIGN_DATA_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\nexport type AllErrorCodes = CONNECT_EVENT_ERROR_CODES | SEND_TRANSACTION_ERROR_CODES | SIGN_DATA_ERROR_CODES;\nexport type ConnectEvent = ConnectEventSuccess | ConnectEventError;\n\nexport interface ApiTonConnectProof {\n  timestamp: number;\n  domain: string;\n  payload: string;\n}\n","import type { DeviceInfo } from '@tonconnect/protocol';\n\nimport {\n  APP_NAME, IS_EXTENSION, IS_TELEGRAM_APP, TONCONNECT_PROTOCOL_VERSION,\n} from '../config';\nimport packageJson from '../../package.json';\nimport { W5_MAX_MESSAGES } from '../api/chains/ton/constants';\n\ntype DevicePlatform = DeviceInfo['platform'];\n\n/*\n This function is called in TonConnect `connect` method (where we know the wallet version)\n and in JS Bridge (where no account is selected, so we show maximum number of messages).\n*/\nexport function tonConnectGetDeviceInfo(maxMessages = W5_MAX_MESSAGES): DeviceInfo {\n  return {\n    platform: getPlatform()!,\n    appName: APP_NAME,\n    appVersion: packageJson.version,\n    maxProtocolVersion: TONCONNECT_PROTOCOL_VERSION,\n    features: [\n      'SendTransaction', // TODO DEPRECATED\n      { name: 'SendTransaction', maxMessages },\n    ],\n  };\n}\n\nfunction getPlatform(): DevicePlatform {\n  const { userAgent } = navigator;\n  const platform = navigator.platform || navigator?.userAgentData?.platform || '';\n\n  const macosPlatforms = ['macOS', 'Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  const iphonePlatforms = ['iPhone'];\n  const ipadPlatforms = ['iPad', 'iPod'];\n\n  let devicePlatform: DevicePlatform | undefined;\n\n  if (IS_EXTENSION || IS_TELEGRAM_APP) {\n    devicePlatform = 'browser';\n  } else if (/Android/.test(userAgent)) {\n    devicePlatform = 'android';\n  } else if (iphonePlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'iphone';\n  } else if (ipadPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'ipad';\n  } else if (macosPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'mac';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'windows';\n  } else if (/Linux/.test(platform)) {\n    devicePlatform = 'linux';\n  } else {\n    devicePlatform = 'browser';\n  }\n\n  return devicePlatform;\n}\n","import { TONCONNECT_WALLET_JSBRIDGE_KEY } from '../../config';\n\nexport enum WebViewBridgeMessageType {\n  invokeCapFunc = 'invokeCapFunc',\n  functionResponse = 'functionResponse',\n  event = 'event',\n}\n\nexport interface WebViewBridgeMessage {\n  type: string;\n  invocationId: string;\n  name: string;\n  args: any[];\n}\n\nexport const objectToInjection = (obj: Record<string, any>, timeout?: number) => {\n  const funcKeys = Object.keys(obj).filter((key) => typeof obj[key] === 'function');\n\n  const funcs = funcKeys.reduce(\n    (acc, funcName) => `${acc}${funcName}: (...args) => {\n      return new Promise((resolve, reject) => window.invokeCapFunc('bridge:${funcName}', args, resolve, reject))\n    },`,\n    '',\n  );\n\n  return `\n    (() => {\n      if (window.${TONCONNECT_WALLET_JSBRIDGE_KEY}) return;\n      window.capPromises = {};\n      window.capEventListeners = [];\n      window.invokeCapFunc = (name, args, resolve, reject) => {\n        const invocationId = btoa(Math.random()).substring(0, 12);\n        const timeoutMs = ${timeout || 'undefined'};\n        const timeoutId = timeoutMs\n          ? setTimeout(() => reject(new Error(\\`bridge timeout for function with name: \\${name}\\`)), timeoutMs)\n          : null;\n        window.capPromises[invocationId] = { resolve, reject, timeoutId };\n        const target = 'cordova_iab' in window ? window.cordova_iab : window.webkit.messageHandlers.cordova_iab;\n        target.postMessage(JSON.stringify({\n          type: '${WebViewBridgeMessageType.invokeCapFunc}',\n          invocationId: invocationId,\n          name,\n          args,\n        }));\n      };\n      window.open = (url) => {\n        window.invokeCapFunc('window:open', { url });\n      };\n      window.close = () => {\n        window.invokeCapFunc('window:close');\n      };\n      window.addEventListener('click', (e) => {\n        const { href, target } = e.target.closest('a') || {};\n        if (href && (target === '_blank' || !href.startsWith('http'))) {\n          e.preventDefault();\n          window.invokeCapFunc('window:open', { url: href });\n        }\n      }, false);\n      window.addEventListener('message', ({ data }) => {\n        try {\n          const message = JSON.parse(data);\n          if (message.type === '${WebViewBridgeMessageType.functionResponse}') {\n            const promise = window.capPromises[message.invocationId];\n            if (!promise) {\n              return;\n            }\n            if (promise.timeoutId) {\n              clearTimeout(promise.timeoutId);\n            }\n            if (message.status === 'fulfilled') {\n              promise.resolve(message.data);\n            } else {\n              promise.reject(new Error(message.data));\n            }\n            delete window.capPromises[message.invocationId];\n          }\n          if (message.type === '${WebViewBridgeMessageType.event}') {\n            window.capEventListeners.forEach((listener) => listener(message.event));\n          }\n        } catch {}\n      });\n      function listen(cb) {\n        window.capEventListeners.push(cb);\n        return function() {\n          const index = window.capEventListeners.indexOf(cb);\n          if (index > -1) {\n            window.capEventListeners.splice(index, 1);\n          }\n        };\n      }\n      window.${TONCONNECT_WALLET_JSBRIDGE_KEY} = {\n        tonconnect: Object.assign(\n          ${JSON.stringify(obj)},\n          {${funcs}},\n          { listen },\n        ),\n      };\n    })();\n  `;\n};\n\nexport const getInjectableJsMessage = (message: any) => {\n  return `\n    (function() {\n      window.dispatchEvent(new MessageEvent('message', {\n        data: ${JSON.stringify(message)}\n      }));\n    })();\n  `;\n};\n","import type {\n  AppRequest,\n  ConnectEvent,\n  ConnectEventError,\n  ConnectRequest,\n  DeviceInfo,\n  RpcMethod,\n  WalletEvent,\n  WalletResponse,\n} from '@tonconnect/protocol';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport { useMemo, useRef, useState } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { CustomInAppBrowserObject } from './useWebViewBridge';\nimport { CONNECT_EVENT_ERROR_CODES, SEND_TRANSACTION_ERROR_CODES } from '../../../api/tonConnect/types';\n\nimport { TONCONNECT_PROTOCOL_VERSION } from '../../../config';\nimport { logDebugError } from '../../../util/logs';\nimport { tonConnectGetDeviceInfo } from '../../../util/tonConnectEnvironment';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { useWebViewBridge } from './useWebViewBridge';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\ninterface WebViewTonConnectBridge {\n  deviceInfo: DeviceInfo;\n  protocolVersion: number;\n  isWalletBrowser: boolean;\n  connect(protocolVersion: number, message: ConnectRequest): Promise<ConnectEvent>;\n  restoreConnection(): Promise<ConnectEvent>;\n  disconnect(): Promise<void>;\n  send<T extends RpcMethod>(message: AppRequest<T>): Promise<WalletResponse<T>>;\n}\n\ninterface OwnProps {\n  endpoint?: string;\n}\n\nexport function useDappBridge({\n  endpoint,\n}: OwnProps) {\n  const { openLoadingOverlay, closeLoadingOverlay } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const inAppBrowserRef = useRef<CustomInAppBrowserObject>(null);\n  const [requestId, setRequestId] = useState(0);\n  const origin = useMemo(() => {\n    return endpoint ? new URL(endpoint).origin.toLowerCase() : undefined;\n  }, [endpoint]);\n\n  const bridgeObject = useMemo((): WebViewTonConnectBridge | undefined => {\n    if (!origin) return undefined;\n\n    return {\n      deviceInfo: tonConnectGetDeviceInfo(),\n      protocolVersion: TONCONNECT_PROTOCOL_VERSION,\n      isWalletBrowser: true,\n\n      connect: async (protocolVersion, request) => {\n        try {\n          if (protocolVersion > TONCONNECT_PROTOCOL_VERSION) {\n            return buildConnectError(\n              requestId,\n              'Unsupported protocol version',\n              CONNECT_EVENT_ERROR_CODES.BAD_REQUEST_ERROR,\n            );\n          }\n          verifyConnectRequest(request);\n\n          await inAppBrowserRef.current?.hide();\n\n          openLoadingOverlay();\n\n          const response = await callApi(\n            'tonConnect_connect',\n            buildDappRequest(origin),\n            request,\n            requestId,\n          );\n\n          closeLoadingOverlay();\n\n          inAppBrowserRef.current?.show();\n          setRequestId(requestId + 1);\n\n          return response;\n        } catch (err: any) {\n          logDebugError('useDAppBridge:connect', err);\n          inAppBrowserRef.current?.show();\n\n          if ('event' in err && 'id' in err && 'payload' in err) {\n            return err;\n          }\n\n          return buildConnectError(\n            requestId,\n            err?.message,\n            CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n          );\n        }\n      },\n\n      restoreConnection: async () => {\n        try {\n          const response = await callApi(\n            'tonConnect_reconnect',\n            buildDappRequest(origin),\n            requestId,\n          );\n          setRequestId(requestId + 1);\n\n          return response;\n        } catch (err: any) {\n          logDebugError('useDAppBridge:reconnect', err);\n\n          if ('event' in err && 'id' in err && 'payload' in err) {\n            return err;\n          }\n\n          return buildConnectError(\n            requestId,\n            err?.message,\n            CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n          );\n        }\n      },\n\n      disconnect: async () => {\n        setRequestId(0);\n\n        await callApi(\n          'tonConnect_disconnect',\n          buildDappRequest(origin),\n          { id: requestId.toString(), method: 'disconnect', params: [] },\n        );\n      },\n\n      send: async <T extends RpcMethod>(request: AppRequest<T>) => {\n        setRequestId(requestId + 1);\n        const global = getGlobal();\n        const isConnected = global.byAccountId[global.currentAccountId!].dapps?.some((dapp) => dapp.origin === origin);\n\n        if (!isConnected) {\n          return {\n            error: {\n              code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_APP_ERROR,\n              message: 'Unknown app',\n            },\n            id: request.id.toString(),\n          };\n        }\n\n        const dappRequest = buildDappRequest(origin);\n\n        try {\n          switch (request.method) {\n            case 'sendTransaction': {\n              await inAppBrowserRef.current?.hide();\n\n              const callResponse = await callApi(\n                'tonConnect_sendTransaction',\n                dappRequest,\n                request,\n              );\n              if (IS_DELEGATED_BOTTOM_SHEET) {\n                void BottomSheet.applyScrollPatch();\n              }\n              inAppBrowserRef.current?.show();\n\n              return callResponse!;\n            }\n\n            case 'disconnect': {\n              const callResponse = await callApi(\n                'tonConnect_disconnect',\n                dappRequest,\n                request,\n              );\n\n              return callResponse!;\n            }\n\n            case 'signData': {\n              await inAppBrowserRef.current?.hide();\n              const callResponse = await callApi(\n                'tonConnect_signData',\n                dappRequest,\n                request,\n              );\n              inAppBrowserRef.current?.show();\n\n              return callResponse!;\n            }\n\n            default:\n              return {\n                error: {\n                  code: SEND_TRANSACTION_ERROR_CODES.BAD_REQUEST_ERROR,\n                  message: `Method \"${request!.method}\" is not supported`,\n                },\n                id: request!.id.toString(),\n              };\n          }\n        } catch (err: any) {\n          logDebugError('useDAppBridge:send', err);\n          inAppBrowserRef.current?.show();\n\n          return {\n            error: {\n              code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR,\n              message: err?.message,\n            },\n            id: request!.id.toString(),\n          };\n        }\n      },\n    };\n  }, [origin, requestId]);\n\n  const [\n    bridgeInjectionCode,\n    onMessage,\n    sendEvent,\n  ] = useWebViewBridge<WebViewTonConnectBridge, WalletEvent>(inAppBrowserRef, bridgeObject);\n\n  const disconnect = useLastCallback(() => {\n    try {\n      // onDisconnect(endpoint, requestId);\n      sendEvent({ event: 'disconnect', payload: {}, id: requestId });\n    } catch (err: any) {\n      logDebugError('disconnect', err);\n    }\n  });\n\n  return {\n    inAppBrowserRef,\n    bridgeInjectionCode,\n    onMessage,\n    disconnect,\n  };\n}\n\nfunction buildConnectError(\n  id: number,\n  msg = 'Unknown error.',\n  code?: CONNECT_EVENT_ERROR_CODES,\n): ConnectEventError {\n  return {\n    event: 'connect_error',\n    id,\n    payload: {\n      code: code || CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n      message: msg,\n    },\n  };\n}\n\nfunction verifyConnectRequest(request: ConnectRequest) {\n  if (!(request && request.manifestUrl && request.items?.length)) {\n    throw new Error('Wrong request data');\n  }\n}\n\nfunction buildDappRequest(origin: string) {\n  return {\n    origin,\n    accountId: getGlobal().currentAccountId,\n  };\n}\n","import type { InAppBrowserObject } from '@awesome-cordova-plugins/in-app-browser';\nimport { useCallback, useMemo } from '../../../lib/teact/teact';\n\nimport type { WebViewBridgeMessage } from '../helpers';\n\nimport { openDeeplinkOrUrl } from '../../../util/deeplink';\nimport { getInjectableJsMessage, objectToInjection, WebViewBridgeMessageType } from '../helpers';\n\nexport type CustomInAppBrowserObject = Omit<InAppBrowserObject, 'hide' | 'close'> & {\n  hide(): Promise<void>;\n  close(): Promise<void>;\n};\n\ntype UseWebViewBridgeReturnType<Event> = [\n  string,\n  (e: MessageEvent) => void,\n  (event: Event) => void,\n];\n\nexport const useWebViewBridge = <\n  BridgeObject extends { [key: string]: any } = {},\n  Event extends object = {},\n>(\n    inAppBrowserRef: React.RefObject<CustomInAppBrowserObject>,\n    bridgeObj?: BridgeObject,\n    timeout?: number,\n  ): UseWebViewBridgeReturnType<Event> => {\n  const bridgeInjectionCode = useMemo(\n    () => (bridgeObj ? objectToInjection(bridgeObj, timeout) : ''),\n    [bridgeObj, timeout],\n  );\n\n  const postMessage = useCallback((message: any) => {\n    void inAppBrowserRef.current?.executeScript({\n      code: getInjectableJsMessage(JSON.stringify(message)),\n    });\n  }, [inAppBrowserRef]);\n\n  const onMessage = useCallback(\n    async (event: MessageEvent) => {\n      if (!bridgeObj) return;\n\n      const message = typeof event.data === 'string'\n        ? JSON.parse(event.data)\n        : event.data as WebViewBridgeMessage;\n\n      if (message.type === WebViewBridgeMessageType.invokeCapFunc) {\n        try {\n          let result: any;\n          switch (message.name) {\n            case 'window:open': {\n              const { url } = message.args;\n              openDeeplinkOrUrl(url, true, true);\n              result = true;\n              break;\n            }\n\n            case 'window:close': {\n              void inAppBrowserRef.current?.close();\n\n              break;\n            }\n\n            default: {\n              const methodName = message.name.replace('bridge:', '');\n              result = await bridgeObj[methodName](...message.args);\n            }\n          }\n\n          postMessage({\n            type: WebViewBridgeMessageType.functionResponse,\n            invocationId: message.invocationId,\n            status: 'fulfilled',\n            data: result,\n          });\n        } catch (err: any) {\n          postMessage({\n            type: WebViewBridgeMessageType.functionResponse,\n            invocationId: message.invocationId,\n            status: 'rejected',\n            data: err?.message,\n          });\n        }\n      }\n    },\n    [bridgeObj, inAppBrowserRef, postMessage],\n  );\n\n  const sendEvent = useCallback(\n    (event: any) => {\n      postMessage({ type: WebViewBridgeMessageType.event, event });\n    },\n    [postMessage],\n  );\n\n  return [bridgeInjectionCode, onMessage, sendEvent];\n};\n","import { BottomSheet } from 'native-bottom-sheet';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { CustomInAppBrowserObject } from '../explore/hooks/useWebViewBridge';\n\nimport { ANIMATION_LEVEL_DEFAULT } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { INAPP_BROWSER_OPTIONS } from '../../util/capacitor';\nimport { listenOnce } from '../../util/domEvents';\nimport { compact } from '../../util/iteratees';\nimport { logDebugError } from '../../util/logs';\nimport { waitFor } from '../../util/schedulers';\nimport { getHostnameFromUrl } from '../../util/url';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS, IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useDappBridge } from '../explore/hooks/useDappBridge';\n\nimport styles from './InAppBrowser.module.scss';\n\ninterface StateProps {\n  title?: string;\n  subtitle?: string;\n  url?: string;\n  theme: string;\n  animationLevel?: number;\n}\n\n// The maximum time the in-app browser will take to close (and a little more as a safe margin)\nconst CLOSE_MAX_DURATION = 900;\n\nlet inAppBrowser: Cordova['InAppBrowser'] | undefined;\n\nfunction InAppBrowser({\n  title, subtitle, url, theme, animationLevel,\n}: StateProps) {\n  const { closeBrowser } = getActions();\n\n  const { hasOpenClass, hasShownClass } = useShowTransition(Boolean(url));\n\n  const lang = useLang();\n\n  const {\n    inAppBrowserRef,\n    bridgeInjectionCode,\n    onMessage,\n    disconnect,\n  } = useDappBridge({\n    endpoint: url,\n  });\n\n  const handleError = useLastCallback((err: any) => {\n    logDebugError('inAppBrowser error', err);\n  });\n\n  const handleBrowserClose = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      await BottomSheet.enable();\n    }\n\n    disconnect();\n    inAppBrowser.removeEventListener('loaderror', handleError);\n    inAppBrowser.removeEventListener('message', onMessage);\n    inAppBrowser.removeEventListener('exit', handleBrowserClose);\n    inAppBrowser = undefined;\n    // eslint-disable-next-line no-null/no-null\n    inAppBrowserRef.current = null;\n    closeBrowser();\n  });\n\n  const openBrowser = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET && !(await BottomSheet.isShown()).value) {\n      await BottomSheet.disable();\n    }\n\n    const browserTitle = !title && url ? getHostnameFromUrl(url) : title;\n    const browserSubtitle = subtitle === browserTitle ? undefined : subtitle;\n\n    const ADDITIONAL_INAPP_BROWSER_OPTIONS = `,${compact([\n      IS_IOS || browserTitle ? `title=${browserTitle || ''}` : undefined,\n      IS_IOS || browserSubtitle ? `subtitle=${browserSubtitle || ''}` : undefined,\n      url ? `shareurl=${encodeURIComponent(url)}` : undefined,\n      `closebuttoncaption=${IS_IOS ? lang('Close') : 'x'}`,\n      `backbuttoncaption=${lang('Back')}`,\n      `reloadcaption=${lang('Reload Page')}`,\n      `openinbrowsercaption=${lang(IS_IOS ? 'Open in Safari' : 'Open in Browser')}`,\n      `copyurlcaption=${lang('CopyURL')}`,\n      `sharecaption=${lang('Share')}`,\n      `theme=${theme}`,\n      `animated=${animationLevel ?? ANIMATION_LEVEL_DEFAULT > 0 ? 'yes' : 'no'}`,\n    ]).join(',')}`;\n    inAppBrowser = cordova.InAppBrowser.open(url,\n      '_blank',\n      INAPP_BROWSER_OPTIONS + ADDITIONAL_INAPP_BROWSER_OPTIONS,\n      bridgeInjectionCode);\n\n    const originalHide = inAppBrowser.hide;\n    inAppBrowser.hide = () => {\n      return new Promise<void>((resolve) => {\n        originalHide?.();\n        // On iOS, the animation takes some time. We have to ensure it's completed.\n        if (inAppBrowser && IS_IOS_APP) {\n          listenOnce(inAppBrowser, 'hidecompletion', () => resolve());\n        } else {\n          resolve();\n        }\n      });\n    };\n\n    const originalClose = inAppBrowser.close;\n    inAppBrowser.close = () => {\n      if (!inAppBrowser) {\n        return Promise.resolve();\n      }\n\n      originalClose();\n\n      const closedPromise = new Promise<void>((resolve) => {\n        // The `waitFor` is a hack necessary to ensure the browser is fully in the closed state when the promise\n        // resolves. This solves a bug: if a push notification, that opens a modal, was clicked while the in-app browser\n        // was open, the browser would close, but the modal wouldn't open.\n        listenOnce(inAppBrowser, 'exit', async () => {\n          await waitFor(() => !inAppBrowser, 15, 20);\n          resolve();\n        });\n\n        // A backup for cases when the `close()` call doesn't cause the browser to close and fire the `exit` event.\n        setTimeout(resolve, CLOSE_MAX_DURATION);\n      });\n\n      // Calling `show()` while the browser is being closed causes the app to crash. So we disable the `show` method.\n      inAppBrowser.show = () => undefined;\n      inAppBrowser.hide = () => closedPromise;\n\n      return closedPromise;\n    };\n\n    inAppBrowserRef.current = inAppBrowser;\n    inAppBrowser.addEventListener('loaderror', handleError);\n    inAppBrowser.addEventListener('message', onMessage);\n    inAppBrowser.addEventListener('exit', handleBrowserClose);\n    inAppBrowser.show();\n  });\n\n  useEffect(() => {\n    if (!url) return;\n\n    void openBrowser();\n  }, [url, title, subtitle]);\n\n  return (\n    <div className={buildClassName(hasShownClass && styles.browserShown, hasOpenClass && styles.browserOpen)} />\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentBrowserOptions, settings } = global;\n\n  return {\n    url: currentBrowserOptions?.url,\n    title: currentBrowserOptions?.title,\n    subtitle: currentBrowserOptions?.subtitle,\n    theme: settings.theme,\n    animationLevel: settings.animationLevel,\n  };\n})(InAppBrowser));\n\nexport function getInAppBrowser(): CustomInAppBrowserObject | undefined {\n  return inAppBrowser;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"browserShown\":\"HhiWhPVc\",\"browserOpen\":\"pNRv6m36\"};","import type { ApiChain } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug, getNativeToken } from '../../util/tokens';\nimport { getActions } from '../index';\nimport { selectCurrentAccount } from '../selectors';\n\nimport { getInAppBrowser } from '../../components/ui/InAppBrowser';\n\n/**\n * Parses the transfer parameters from the given QR content, assuming it's a plain address.\n * Returns `undefined` if this is not a valid address or the account doesn't have the corresponding wallet.\n */\nexport function parsePlainAddressQr(global: GlobalState, qrData: string) {\n  const availableChains = selectCurrentAccount(global)?.addressByChain ?? ({} as Record<ApiChain, string>);\n  const newChain = getChainFromAddress(qrData, availableChains);\n  if (!newChain) {\n    return undefined;\n  }\n\n  const currentTokenSlug = global.currentTransfer.tokenSlug;\n  const currentChain = getChainBySlug(currentTokenSlug);\n  const newTokenSlug = newChain !== currentChain ? getNativeToken(newChain).slug : currentTokenSlug;\n\n  return {\n    toAddress: qrData,\n    tokenSlug: newTokenSlug,\n  };\n}\n\nfunction getChainFromAddress(address: string, availableChains: Record<ApiChain, unknown>): ApiChain | undefined {\n  for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n    if (isValidAddressOrDomain(address, chain)) {\n      return chain;\n    }\n  }\n\n  return undefined;\n}\n\nexport function closeAllOverlays() {\n  return Promise.all([\n    // It's important to close the in-app browser before closing the modal, because when a modal closes, it calls\n    // `show()` on the hidden in-app browser, and calling `close()` right after `show()` causes the app to crash.\n    // Meanwhile, calling `close()` before `show()` makes the in-app browser ignore the `show()` call.\n    // A situation, where it happens, is pressing an \"openUrl\" notification while the app shows a TON Connect modal.\n    getInAppBrowser()?.close(),\n    getActions().closeAnyModal(),\n    getActions().closeMediaViewer(),\n  ]);\n}\n","import btc from '../../../assets/coins/coin_btc.png';\nimport my from '../../../assets/coins/coin_my.svg';\nimport ton from '../../../assets/coins/coin_ton.png';\nimport trx from '../../../assets/coins/coin_trx.svg';\nimport usdt from '../../../assets/coins/coin_usdt.svg';\n\nexport const ASSET_LOGO_PATHS = {\n  ton,\n  btc,\n  trx,\n  usdt,\n  my,\n};\n","import type { ApiStakingState, ApiToken } from '../../api/types';\nimport type { DropdownItem } from '../../components/ui/Dropdown';\n\nimport { MIN_ACTIVE_STAKING_REWARDS } from '../../config';\nimport { ASSET_LOGO_PATHS } from '../../components/ui/helpers/assetLogos';\n\nexport function buildStakingDropdownItems({\n  tokenBySlug, states, shouldUseNominators,\n}: {\n  tokenBySlug: Record<string, ApiToken>;\n  states: ApiStakingState[];\n  shouldUseNominators?: boolean;\n}) {\n  const hasNominatorsStake = states.some((state) => state.type === 'nominators' && getIsActiveStakingState(state));\n  const hasLiquidStake = states.some((state) => state.type === 'liquid' && getIsActiveStakingState(state));\n\n  if (shouldUseNominators && !hasLiquidStake) {\n    states = states.filter((state) => state.type !== 'liquid');\n  }\n\n  if (!shouldUseNominators && !hasNominatorsStake) {\n    states = states.filter((state) => state.type !== 'nominators');\n  }\n\n  const res = states.filter((state) => tokenBySlug[state.tokenSlug]).map<DropdownItem>((state) => {\n    const stateToken = tokenBySlug[state.tokenSlug];\n    const logoPath = ASSET_LOGO_PATHS[stateToken.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS];\n\n    return {\n      value: state.id,\n      icon: logoPath ?? stateToken.image,\n      name: stateToken.symbol,\n    };\n  });\n  return res;\n}\n\nexport type StakingStateStatus = 'inactive' | 'active' | 'unstakeRequested';\n\nexport function getStakingStateStatus(state: ApiStakingState): StakingStateStatus {\n  if (state.isUnstakeRequested) {\n    return 'unstakeRequested';\n  }\n  if (getIsActiveStakingState(state)) {\n    return 'active';\n  }\n  return 'inactive';\n}\n\nexport function getIsActiveStakingState(state: ApiStakingState) {\n  return Boolean(\n    state.balance\n    || state.isUnstakeRequested\n    || ('unclaimedRewards' in state && state.unclaimedRewards > MIN_ACTIVE_STAKING_REWARDS),\n  );\n}\n","import type { ApiJettonStakingState, ApiTransactionError } from '../../../api/types';\nimport { ApiCommonError } from '../../../api/types';\nimport { StakingState } from '../../types';\n\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { getTonStakingFees } from '../../../util/fee/getTonOperationFees';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { logDebugError } from '../../../util/logs';\nimport { callActionInMain } from '../../../util/multitab';\nimport { pause } from '../../../util/schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { ApiHardwareBlindSigningNotEnabled, ApiUserRejectsError } from '../../../api/errors';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { getIsActiveStakingState } from '../../helpers/staking';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentStaking,\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateAccountStaking,\n  updateAccountState,\n  updateCurrentStaking,\n} from '../../reducers';\nimport { selectAccount, selectAccountStakingState } from '../../selectors';\nimport { switchAccount } from './auth';\n\nconst MODAL_CLOSING_DELAY = 50;\n\naddActionHandler('startStaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startStaking', payload);\n    return;\n  }\n\n  const state = StakingState.StakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('startUnstaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startUnstaking', payload);\n    return;\n  }\n\n  const state = StakingState.UnstakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('fetchStakingFee', async (global, actions, payload) => {\n  const { amount } = payload;\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const state = selectAccountStakingState(global, currentAccountId)!;\n\n  const result = await callApi(\n    'checkStakeDraft',\n    currentAccountId,\n    amount!,\n    state,\n  );\n  if (!result || 'error' in result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    fee: result.fee,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingInitial', async (global, actions, payload) => {\n  const { isUnstaking, amount } = payload ?? {};\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  setGlobal(updateCurrentStaking(global, { isLoading: true, error: undefined }));\n\n  const state = selectAccountStakingState(global, currentAccountId)!;\n\n  if (isUnstaking) {\n    const result = await callApi('checkUnstakeDraft', currentAccountId, amount!, state);\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        const account = selectAccount(global, currentAccountId)!;\n        if (account.isHardware) {\n          actions.resetHardwareWalletConnect();\n          global = updateCurrentStaking(getGlobal(), { state: StakingState.UnstakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.UnstakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n          tokenAmount: result.tokenAmount,\n        });\n      }\n    }\n  } else {\n    const result = await callApi(\n      'checkStakeDraft',\n      currentAccountId,\n      amount!,\n      state,\n    );\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        const account = selectAccount(global, currentAccountId)!;\n        if (account.isHardware) {\n          actions.resetHardwareWalletConnect();\n          global = updateCurrentStaking(getGlobal(), { state: StakingState.StakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.StakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n        });\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingPassword', async (global, actions, payload) => {\n  const { password, isUnstaking } = payload;\n  const { amount, tokenAmount } = global.currentStaking;\n  const { currentAccountId } = global;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentStaking(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  global = getGlobal();\n\n  const state = selectAccountStakingState(global, currentAccountId!)!;\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  global = getGlobal();\n\n  if (isUnstaking) {\n    const instantAvailable = global.stakingInfo?.liquid?.available;\n\n    const unstakeAmount = state.type === 'nominators' ? state.balance : tokenAmount!;\n    const result = await callApi(\n      'submitUnstake',\n      global.currentAccountId!,\n      password,\n      unstakeAmount,\n      state,\n      getTonStakingFees(state.type).unstake.real,\n    );\n\n    const isLongUnstakeRequested = Boolean(state.type === 'nominators' || (\n      state.type === 'liquid'\n      && instantAvailable\n      && instantAvailable < state.balance\n    ));\n\n    global = getGlobal();\n    global = updateAccountState(global, currentAccountId!, { isLongUnstakeRequested });\n    global = updateCurrentStaking(global, { isLoading: false });\n    setGlobal(global);\n\n    if (!result) {\n      actions.showDialog({\n        message: 'Unstaking was unsuccessful. Try again later.',\n      });\n      global = getGlobal();\n\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n    } else {\n      global = getGlobal();\n      global = updateCurrentStaking(global, { state: StakingState.UnstakeComplete });\n    }\n  } else {\n    const result = await callApi(\n      'submitStake',\n      global.currentAccountId!,\n      password,\n      amount!,\n      state,\n      getTonStakingFees(state.type).stake.real,\n    );\n\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n    setGlobal(global);\n\n    if (!result) {\n      actions.showDialog({\n        message: 'Staking was unsuccessful. Try again later.',\n      });\n\n      global = getGlobal();\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n    } else {\n      global = getGlobal();\n      global = updateCurrentStaking(global, { state: StakingState.StakeComplete });\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingHardware', async (global, actions, payload) => {\n  const { isUnstaking } = payload || {};\n  const { amount, tokenAmount } = global.currentStaking;\n  const { currentAccountId } = global;\n\n  const state = selectAccountStakingState(global, currentAccountId!)!;\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n    state: isUnstaking\n      ? StakingState.UnstakeConfirmHardware\n      : StakingState.StakeConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  let result: string | { error: ApiTransactionError } | undefined;\n  const accountId = global.currentAccountId!;\n\n  try {\n    if (isUnstaking) {\n      const instantAvailable = global.stakingInfo?.liquid?.available;\n      const stakingBalance = state.balance;\n      const unstakeAmount = state.type === 'nominators' ? stakingBalance : tokenAmount!;\n\n      result = await ledgerApi.submitLedgerUnstake(\n        accountId,\n        state,\n        unstakeAmount,\n        getTonStakingFees(state.type).unstake.real,\n      );\n\n      const isLongUnstakeRequested = Boolean(state.type === 'nominators' || (\n        state.type === 'liquid'\n        && instantAvailable\n        && instantAvailable < stakingBalance\n      ));\n\n      global = getGlobal();\n      global = updateAccountState(global, currentAccountId!, { isLongUnstakeRequested });\n      setGlobal(global);\n    } else {\n      result = await ledgerApi.submitLedgerStake(\n        accountId,\n        amount!,\n        state,\n        getTonStakingFees(state.type).stake.real,\n      );\n    }\n  } catch (err: any) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled_internal',\n      }));\n      return;\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    }\n    logDebugError('submitStakingHardware', err);\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showDialog({\n      message: isUnstaking\n        ? 'Unstaking was unsuccessful. Try again later.'\n        : 'Staking was unsuccessful. Try again later.',\n    });\n  } else if (typeof result !== 'string' && 'error' in result) {\n    actions.showError({ error: result.error });\n  } else {\n    global = getGlobal();\n    global = updateCurrentStaking(global, {\n      state: isUnstaking ? StakingState.UnstakeComplete : StakingState.StakeComplete,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearStakingError', (global) => {\n  setGlobal(updateCurrentStaking(global, { error: undefined }));\n});\n\naddActionHandler('cancelStaking', (global) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  global = clearCurrentStaking(global);\n  setGlobal(global);\n});\n\naddActionHandler('setStakingScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  setGlobal(updateCurrentStaking(global, { state }));\n});\n\naddActionHandler('fetchStakingHistory', async (global, actions, payload) => {\n  const { limit, offset } = payload ?? {};\n  const stakingHistory = await callApi('getStakingHistory', global.currentAccountId!, limit, offset);\n\n  if (!stakingHistory) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAccountState(global, global.currentAccountId!, { stakingHistory }, true);\n  setGlobal(global);\n});\n\naddActionHandler('openAnyAccountStakingInfo', async (global, actions, { accountId, network, stakingId }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAnyAccountStakingInfo', { accountId, network, stakingId });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.changeCurrentStaking({ stakingId });\n  actions.openStakingInfo();\n});\n\n// Should be called only when you're sure that the staking is active. Otherwise, call `openStakingInfoOrStart`.\naddActionHandler('openStakingInfo', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openStakingInfo');\n    return;\n  }\n\n  global = { ...global, isStakingInfoModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeStakingInfo', (global) => {\n  global = { ...global, isStakingInfoModalOpen: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('changeCurrentStaking', async (global, actions, { stakingId, shouldReopenModal }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && shouldReopenModal) {\n    callActionInMain('changeCurrentStaking', { stakingId, shouldReopenModal });\n    return;\n  }\n\n  if (shouldReopenModal) {\n    await pause(MODAL_CLOSING_DELAY);\n  }\n\n  global = getGlobal();\n  global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n  setGlobal(global);\n\n  if (shouldReopenModal) {\n    actions.openStakingInfoOrStart();\n  }\n});\n\naddActionHandler('startStakingClaim', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startStakingClaim');\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n  const { isHardware } = selectAccount(global, accountId)!;\n\n  global = updateCurrentStaking(global, {\n    state: isHardware ? StakingState.ClaimConnectHardware : StakingState.ClaimPassword,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelStakingClaim', (global) => {\n  global = updateCurrentStaking(global, { state: StakingState.None });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingClaim', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentStaking(getGlobal(), { error: 'Wrong password, please try again.' }));\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitStakingClaim', { password });\n    return;\n  }\n\n  global = getGlobal();\n\n  const stakingState = selectAccountStakingState(global, accountId)! as ApiJettonStakingState;\n\n  const result = await callApi(\n    'submitStakingClaim',\n    accountId,\n    password,\n    stakingState,\n    getTonStakingFees(stakingState.type).claim?.real,\n  );\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n    return;\n  } else {\n    void vibrateOnSuccess();\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    state: StakingState.None,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingClaimHardware', async (global, actions) => {\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n    state: StakingState.ClaimConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  const accountId = global.currentAccountId!;\n  const stakingState = selectAccountStakingState(global, accountId)! as ApiJettonStakingState;\n\n  let result: string | { error: ApiTransactionError } | undefined;\n\n  try {\n    result = await ledgerApi.submitLedgerStakingClaim(\n      accountId,\n      stakingState,\n      getTonStakingFees(stakingState.type).claim?.real,\n    );\n  } catch (err: any) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled_internal',\n      }));\n      return;\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    }\n    logDebugError('submitStakingClaimHardware', err);\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  } else if (typeof result === 'object' && 'error' in result) {\n    actions.showError({ error: result.error });\n  } else {\n    global = getGlobal();\n    global = updateCurrentStaking(global, {\n      state: StakingState.None,\n    });\n    setGlobal(global);\n  }\n});\n\n// Opens the staking info modal if the modal is available. Otherwise, opens the staking start modal.\naddActionHandler('openStakingInfoOrStart', (global, actions) => {\n  if (!global.currentAccountId) {\n    return;\n  }\n\n  const stakingState = selectAccountStakingState(global, global.currentAccountId);\n\n  if (getIsActiveStakingState(stakingState)) {\n    actions.openStakingInfo();\n  } else {\n    actions.startStaking();\n  }\n});\n","export const clamp = (num: number, min: number, max: number) => (Math.min(max, Math.max(min, num)));\nexport const isBetween = (num: number, min: number, max: number) => (num >= min && num <= max);\nexport const round = (num: number, decimals: number = 0) => Math.round(num * 10 ** decimals) / 10 ** decimals;\nexport const lerp = (start: number, end: number, interpolationRatio: number) => {\n  return (1 - interpolationRatio) * start + interpolationRatio * end;\n};\n\n// Fractional values cause blurry text & canvas. Round to even to keep whole numbers while centering\nexport function roundToNearestEven(value: number) {\n  return Math.round(value / 2) * 2;\n}\n","import { Lethargy } from './lethargy';\nimport { clamp, round } from './math';\nimport { debounce } from './schedulers';\nimport { IS_IOS, IS_WINDOWS } from './windowEnvironment';\nimport windowSize from './windowSize';\n\nexport enum SwipeDirection {\n  Up,\n  Down,\n  Left,\n  Right,\n}\n\nexport interface MoveOffsets {\n  dragOffsetX: number;\n  dragOffsetY: number;\n}\n\ninterface CaptureOptions {\n  onCapture?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onRelease?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onDrag?: (\n    e: MouseEvent | TouchEvent | WheelEvent,\n    captureEvent: MouseEvent | TouchEvent | WheelEvent,\n    offsets: MoveOffsets,\n    cancelDrag?: (x: boolean, y: boolean) => void,\n  ) => void;\n  onSwipe?: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean;\n  onZoom?: (e: TouchEvent | WheelEvent, params: {\n    // Absolute zoom level\n    zoom?: number;\n    // Relative zoom factor\n    zoomFactor?: number;\n\n    // center coordinate of the initial pinch\n    initialCenterX: number;\n    initialCenterY: number;\n\n    // offset of the pinch center (current from initial)\n    dragOffsetX: number;\n    dragOffsetY: number;\n\n    // center coordinate of the current pinch\n    currentCenterX: number;\n    currentCenterY: number;\n  }) => void;\n  onClick?: (e: MouseEvent | TouchEvent) => void;\n  onDoubleClick?: (e: MouseEvent | RealTouchEvent | WheelEvent, params: { centerX: number; centerY: number }) => void;\n  excludedClosestSelector?: string;\n  includedClosestSelector?: string;\n  selectorToPreventScroll?: string;\n  withNativeDrag?: boolean;\n  maxZoom?: number;\n  minZoom?: number;\n  doubleTapZoom?: number;\n  initialZoom?: number;\n  isNotPassive?: boolean;\n  withCursor?: boolean;\n  swipeThreshold?: number;\n  withWheelDrag?: boolean;\n}\n\n// https://stackoverflow.com/questions/11287877/how-can-i-get-e-offsetx-on-mobile-ipad\n// Android does not have this value, and iOS has it but as read-only\nexport interface RealTouchEvent extends TouchEvent {\n  pageX?: number;\n  pageY?: number;\n}\n\ntype TSwipeAxis =\n  'x'\n  | 'y'\n  | undefined;\n\nexport const IOS_SCREEN_EDGE_THRESHOLD = 20;\nexport const SWIPE_DIRECTION_THRESHOLD = 10;\nexport const SWIPE_DIRECTION_TOLERANCE = 1.5;\n\nconst MOVE_THRESHOLD = 15;\nconst SWIPE_THRESHOLD_DEFAULT = 20;\nconst RELEASE_WHEEL_ZOOM_DELAY = 150;\nconst RELEASE_WHEEL_DRAG_DELAY = 150;\n\nfunction getDistance(a: Touch, b?: Touch) {\n  if (!b) return 0;\n  return Math.hypot((b.pageX - a.pageX), (b.pageY - a.pageY));\n}\n\nfunction getTouchCenter(a: Touch, b: Touch) {\n  return {\n    x: (a.pageX + b.pageX) / 2,\n    y: (a.pageY + b.pageY) / 2,\n  };\n}\n\nlet lastClickTime = 0;\nconst lethargy = new Lethargy({\n  stability: 5,\n  sensitivity: 25,\n  tolerance: IS_WINDOWS ? 1 : 0.6, // Windows `scrollDelta` does not die down to 0\n  delay: 150,\n});\n\nexport function captureEvents(element: HTMLElement, options: CaptureOptions) {\n  let captureEvent: MouseEvent | RealTouchEvent | WheelEvent | undefined;\n  let hasMoved = false;\n  let hasSwiped = false;\n  let isZooming = false;\n  let initialDistance = 0;\n  let wheelZoom = options.initialZoom ?? 1;\n  let initialDragOffset = {\n    x: 0,\n    y: 0,\n  };\n  let isDragCanceled = {\n    x: false,\n    y: false,\n  };\n  const currentWindowSize = windowSize.get();\n  let initialTouchCenter = {\n    x: currentWindowSize.width / 2,\n    y: currentWindowSize.height / 2,\n  };\n  let initialSwipeAxis: TSwipeAxis | undefined;\n  const minZoom = options.minZoom ?? 1;\n  const maxZoom = options.maxZoom ?? 4;\n\n  function onCapture(e: MouseEvent | RealTouchEvent) {\n    const target = e.target as HTMLElement;\n    const {\n      excludedClosestSelector,\n      includedClosestSelector,\n      withNativeDrag,\n      withCursor,\n      onDrag,\n    } = options;\n\n    if (element !== target && !element.contains(target)) {\n      return;\n    }\n\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {\n      return;\n    }\n\n    if (\n      (excludedClosestSelector && (target.matches(excludedClosestSelector) || target.closest(excludedClosestSelector)))\n      || (\n        includedClosestSelector && !(target.matches(includedClosestSelector) || target.closest(includedClosestSelector))\n      )\n    ) {\n      return;\n    }\n\n    captureEvent = e;\n\n    if (e.type === 'mousedown') {\n      if (!withNativeDrag && onDrag) {\n        e.preventDefault();\n      }\n\n      document.addEventListener('mousemove', onMove);\n      document.addEventListener('mouseup', onRelease);\n    } else if (e.type === 'touchstart') {\n      // We need to always listen on `touchstart` target:\n      // https://stackoverflow.com/questions/33298828/touch-move-event-dont-fire-after-touch-start-target-is-removed\n      target.addEventListener('touchmove', onMove, { passive: true });\n      target.addEventListener('touchend', onRelease, { passive: true });\n      target.addEventListener('touchcancel', onRelease, { passive: true });\n\n      if ('touches' in e) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (e.touches.length === 2) {\n          initialDistance = getDistance(e.touches[0], e.touches[1]);\n          initialTouchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n        }\n      }\n    }\n\n    if (withCursor) {\n      document.body.classList.add('cursor-grabbing');\n    }\n\n    options.onCapture?.(e);\n  }\n\n  function onRelease(e?: MouseEvent | TouchEvent) {\n    if (captureEvent) {\n      if (options.withCursor) {\n        document.body.classList.remove('cursor-grabbing');\n      }\n\n      document.removeEventListener('mouseup', onRelease);\n      document.removeEventListener('mousemove', onMove);\n      (captureEvent.target as HTMLElement).removeEventListener('touchcancel', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchend', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchmove', onMove);\n\n      if (IS_IOS && options.selectorToPreventScroll) {\n        Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll))\n          .forEach((scrollable) => {\n            scrollable.style.overflow = '';\n          });\n      }\n\n      if (e) {\n        if (hasMoved) {\n          if (options.onRelease) {\n            options.onRelease(e);\n          }\n        } else if (e.type === 'mouseup') {\n          if (options.onDoubleClick && Date.now() - lastClickTime < 300) {\n            options.onDoubleClick(e, {\n              centerX: captureEvent!.pageX!,\n              centerY: captureEvent!.pageY!,\n            });\n          } else if (options.onClick && (!('button' in e) || e.button === 0)) {\n            options.onClick(e);\n          }\n          lastClickTime = Date.now();\n        }\n      }\n    }\n\n    hasMoved = false;\n    hasSwiped = false;\n    isZooming = false;\n    initialDistance = 0;\n    wheelZoom = clamp(wheelZoom, minZoom, maxZoom);\n    initialSwipeAxis = undefined;\n    initialDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    isDragCanceled = {\n      x: false,\n      y: false,\n    };\n    const newWindowSize = windowSize.get();\n    initialTouchCenter = {\n      x: newWindowSize.width / 2,\n      y: newWindowSize.height / 2,\n    };\n    captureEvent = undefined;\n  }\n\n  function onMove(e: MouseEvent | RealTouchEvent) {\n    if (captureEvent) {\n      if (e.type === 'touchmove' && ('touches' in e)) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (options.onZoom && initialDistance > 0 && e.touches.length === 2) {\n          const endDistance = getDistance(e.touches[0], e.touches[1]);\n          const touchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n          const dragOffsetX = touchCenter.x - initialTouchCenter.x;\n          const dragOffsetY = touchCenter.y - initialTouchCenter.y;\n          const zoomFactor = endDistance / initialDistance;\n          options.onZoom(e, {\n            zoomFactor,\n            initialCenterX: initialTouchCenter.x,\n            initialCenterY: initialTouchCenter.y,\n            dragOffsetX,\n            dragOffsetY,\n            currentCenterX: touchCenter.x,\n            currentCenterY: touchCenter.y,\n          });\n          if (zoomFactor !== 1) hasMoved = true;\n        }\n      }\n\n      const dragOffsetX = e.pageX! - captureEvent.pageX!;\n      const dragOffsetY = e.pageY! - captureEvent.pageY!;\n\n      if (Math.abs(dragOffsetX) >= MOVE_THRESHOLD || Math.abs(dragOffsetY) >= MOVE_THRESHOLD) {\n        hasMoved = true;\n      }\n\n      let shouldPreventScroll = false;\n\n      if (options.onDrag) {\n        options.onDrag(e, captureEvent, {\n          dragOffsetX,\n          dragOffsetY,\n        });\n        shouldPreventScroll = true;\n      }\n\n      if (options.onSwipe && !hasSwiped) {\n        hasSwiped = onSwipe(e, dragOffsetX, dragOffsetY);\n        shouldPreventScroll = hasSwiped;\n      }\n\n      if (IS_IOS && shouldPreventScroll && options.selectorToPreventScroll) {\n        Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll))\n          .forEach((scrollable) => {\n            scrollable.style.overflow = 'hidden';\n          });\n      }\n    }\n  }\n\n  function onSwipe(e: MouseEvent | RealTouchEvent, dragOffsetX: number, dragOffsetY: number) {\n    // Avoid conflicts with swipe-to-back gestures\n    if (IS_IOS) {\n      const x = (e as RealTouchEvent).touches[0].pageX;\n      if (x <= IOS_SCREEN_EDGE_THRESHOLD || x >= windowSize.get().width - IOS_SCREEN_EDGE_THRESHOLD) {\n        return false;\n      }\n    }\n\n    const xAbs = Math.abs(dragOffsetX);\n    const yAbs = Math.abs(dragOffsetY);\n    const threshold = options.swipeThreshold ?? SWIPE_THRESHOLD_DEFAULT;\n\n    let axis: TSwipeAxis | undefined;\n    if (xAbs > yAbs && xAbs >= threshold) {\n      axis = 'x';\n    } else if (yAbs > xAbs && yAbs >= threshold) {\n      axis = 'y';\n    }\n\n    if (!axis) {\n      return false;\n    }\n\n    if (!initialSwipeAxis) {\n      initialSwipeAxis = axis;\n    } else if (initialSwipeAxis !== axis) {\n      // Prevent horizontal swipe after vertical to prioritize scroll\n      return false;\n    }\n\n    return processSwipe(e, axis, dragOffsetX, dragOffsetY, options.onSwipe!);\n  }\n\n  const releaseWheelDrag = debounce(onRelease, RELEASE_WHEEL_DRAG_DELAY, false);\n  const releaseWheelZoom = debounce(onRelease, RELEASE_WHEEL_ZOOM_DELAY, false);\n\n  function onWheelCapture(e: WheelEvent) {\n    if (hasMoved) return;\n    onCapture(e);\n    hasMoved = true;\n    initialTouchCenter = { x: e.x, y: e.y };\n  }\n\n  function onWheelZoom(e: WheelEvent) {\n    if (!options.onZoom) return;\n    onWheelCapture(e);\n    const dragOffsetX = e.x - initialTouchCenter.x;\n    const dragOffsetY = e.y - initialTouchCenter.y;\n    const delta = clamp(e.deltaY, -25, 25);\n    wheelZoom -= delta * 0.01;\n    wheelZoom = clamp(wheelZoom, minZoom * 0.5, maxZoom * 3);\n    isZooming = true;\n    options.onZoom(e, {\n      zoom: round(wheelZoom, 2),\n      initialCenterX: initialTouchCenter.x,\n      initialCenterY: initialTouchCenter.y,\n      dragOffsetX,\n      dragOffsetY,\n      currentCenterX: e.x,\n      currentCenterY: e.y,\n    });\n    releaseWheelZoom(e);\n  }\n\n  function onWheelDrag(e: WheelEvent) {\n    if (!options.onDrag) return;\n    onWheelCapture(e);\n    // Ignore wheel inertia if drag is canceled in this direction\n    if (!isDragCanceled.x || Math.sign(initialDragOffset.x) === Math.sign(e.deltaX)) {\n      initialDragOffset.x -= e.deltaX;\n    }\n    if (!isDragCanceled.y || Math.sign(initialDragOffset.y) === Math.sign(e.deltaY)) {\n      initialDragOffset.y -= e.deltaY;\n    }\n    const { x, y } = initialDragOffset;\n    options.onDrag(e, captureEvent!, {\n      dragOffsetX: x,\n      dragOffsetY: y,\n    }, (dx, dy) => {\n      isDragCanceled = { x: dx, y: dy };\n    });\n    releaseWheelDrag(e);\n  }\n\n  function onWheel(e: WheelEvent) {\n    if (!options.onZoom && !options.onDrag) return;\n    if (options.excludedClosestSelector && (\n      (e.target as HTMLElement).matches(options.excludedClosestSelector)\n      || (e.target as HTMLElement).closest(options.excludedClosestSelector)\n    )) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    const { doubleTapZoom = 3 } = options;\n    if (options.onDoubleClick && Object.is(e.deltaX, -0) && Object.is(e.deltaY, -0) && e.ctrlKey) {\n      onWheelCapture(e);\n      wheelZoom = wheelZoom > 1 ? 1 : doubleTapZoom;\n      options.onDoubleClick(e, { centerX: e.pageX, centerY: e.pageY });\n      hasMoved = false;\n      return;\n    }\n    const metaKeyPressed = e.metaKey || e.ctrlKey || e.shiftKey;\n    if (metaKeyPressed) {\n      onWheelZoom(e);\n    }\n    if (!metaKeyPressed && !isZooming) {\n      // Check if this event produced by user scroll and not by inertia\n      const isUserEvent = lethargy.check(e);\n      if (wheelZoom !== 1 || isUserEvent) {\n        onWheelDrag(e);\n      }\n    }\n  }\n\n  if (options.withWheelDrag) {\n    element.addEventListener('wheel', onWheel);\n  }\n\n  element.addEventListener('mousedown', onCapture);\n  document.body.addEventListener('touchstart', onCapture, { passive: !options.isNotPassive });\n\n  return () => {\n    onRelease();\n    document.body.removeEventListener('touchstart', onCapture);\n    element.removeEventListener('mousedown', onCapture);\n    element.removeEventListener('wheel', onWheel);\n  };\n}\n\nfunction processSwipe(\n  e: Event,\n  currentSwipeAxis: TSwipeAxis,\n  dragOffsetX: number,\n  dragOffsetY: number,\n  onSwipe: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean,\n) {\n  const offsets = { dragOffsetX, dragOffsetY };\n\n  if (currentSwipeAxis === 'x') {\n    if (dragOffsetX < 0) {\n      return onSwipe(e, SwipeDirection.Left, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Right, offsets);\n    }\n  } else if (currentSwipeAxis === 'y') {\n    if (dragOffsetY < 0) {\n      return onSwipe(e, SwipeDirection.Up, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Down, offsets);\n    }\n  }\n\n  return false;\n}\n","/**\n * Lethargy help distinguish between scroll events initiated by the user, and those by inertial scrolling.\n * Lethargy does not have external dependencies.\n *\n * @param stability - Specifies the length of the rolling average.\n * In effect, the larger the value, the smoother the curve will be.\n * This attempts to prevent anomalies from firing 'real' events. Valid values are all positive integers,\n * but in most cases, you would need to stay between 5 and around 30.\n *\n * @param sensitivity - Specifies the minimum value for wheelDelta for it to register as a valid scroll event.\n * Because the tail of the curve have low wheelDelta values,\n * this will stop them from registering as valid scroll events.\n * The unofficial standard wheelDelta is 120, so valid values are positive integers below 120.\n *\n * @param tolerance - Prevent small fluctuations from affecting results.\n * Valid values are decimals from 0, but should ideally be between 0.05 and 0.3.\n *\n * Based on https://github.com/d4nyll/lethargy\n */\n\nexport type LethargyConfig = {\n  stability?: number;\n  sensitivity?: number;\n  tolerance?: number;\n  delay?: number;\n};\n\nexport class Lethargy {\n  stability: number;\n\n  sensitivity: number;\n\n  tolerance: number;\n\n  delay: number;\n\n  lastUpDeltas: Array<number>;\n\n  lastDownDeltas: Array<number>;\n\n  deltasTimestamp: Array<number>;\n\n  constructor({\n    stability = 8,\n    sensitivity = 100,\n    tolerance = 1.1,\n    delay = 150,\n  }: LethargyConfig = {}) {\n    this.stability = stability;\n    this.sensitivity = sensitivity;\n    this.tolerance = tolerance;\n    this.delay = delay;\n    this.lastUpDeltas = new Array(this.stability * 2).fill(0);\n    this.lastDownDeltas = new Array(this.stability * 2).fill(0);\n    this.deltasTimestamp = new Array(this.stability * 2).fill(0);\n  }\n\n  check(e: any) {\n    let lastDelta;\n    e = e.originalEvent || e;\n    if (e.wheelDelta !== undefined) {\n      lastDelta = e.wheelDelta;\n    } else if (e.deltaY !== undefined) {\n      lastDelta = e.deltaY * -40;\n    } else if (e.detail !== undefined || e.detail === 0) {\n      lastDelta = e.detail * -40;\n    }\n    this.deltasTimestamp.push(Date.now());\n    this.deltasTimestamp.shift();\n    if (lastDelta > 0) {\n      this.lastUpDeltas.push(lastDelta);\n      this.lastUpDeltas.shift();\n      return this.isInertia(1);\n    } else {\n      this.lastDownDeltas.push(lastDelta);\n      this.lastDownDeltas.shift();\n      return this.isInertia(-1);\n    }\n  }\n\n  isInertia(direction: number) {\n    const lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n    if (lastDeltas[0] === undefined) return direction;\n    if (\n      this.deltasTimestamp[this.stability * 2 - 2] + this.delay > Date.now()\n      && lastDeltas[0] === lastDeltas[this.stability * 2 - 1]\n    ) {\n      return false;\n    }\n    const lastDeltasOld = lastDeltas.slice(0, this.stability);\n    const lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n    const oldSum = lastDeltasOld.reduce((t, s) => t + s);\n    const newSum = lastDeltasNew.reduce((t, s) => t + s);\n    const oldAverage = oldSum / lastDeltasOld.length;\n    const newAverage = newSum / lastDeltasNew.length;\n    return Math.abs(oldAverage) < Math.abs(newAverage * this.tolerance)\n      && this.sensitivity < Math.abs(newAverage);\n  }\n}\n","type HandlerName = 'onEnter' | 'onBackspace' | 'onDelete' | 'onEsc' | 'onUp' | 'onDown' | 'onLeft' | 'onRight'\n| 'onTab';\ntype EventHandler = (e: KeyboardEvent) => boolean | void;\ntype HandlerWithOptions = {\n  handler: (e: KeyboardEvent) => void;\n  shouldPreventDefault?: boolean;\n  noStopPropagation?: boolean;\n};\n\ntype Handler = EventHandler | HandlerWithOptions;\n\ntype CaptureOptions = Partial<Record<HandlerName, Handler>>;\n\nconst keyToHandlerName: Record<string, HandlerName> = {\n  Enter: 'onEnter',\n  Backspace: 'onBackspace',\n  Delete: 'onDelete',\n  Esc: 'onEsc',\n  Escape: 'onEsc',\n  ArrowUp: 'onUp',\n  ArrowDown: 'onDown',\n  ArrowLeft: 'onLeft',\n  ArrowRight: 'onRight',\n  Tab: 'onTab',\n};\n\nconst handlers: Record<HandlerName, Handler[]> = {\n  onEnter: [],\n  onDelete: [],\n  onBackspace: [],\n  onEsc: [],\n  onUp: [],\n  onDown: [],\n  onLeft: [],\n  onRight: [],\n  onTab: [],\n};\n\nexport default function captureKeyboardListeners(options: CaptureOptions) {\n  if (!hasActiveHandlers()) {\n    document.addEventListener('keydown', handleKeyDown, true);\n  }\n\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    if (!option) {\n      return;\n    }\n\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      currentEventHandlers.push(option);\n    }\n  });\n\n  return () => {\n    releaseKeyboardListener(options);\n  };\n}\n\nfunction hasActiveHandlers() {\n  return Object.values(handlers).some((keyHandlers) => Boolean(keyHandlers.length));\n}\n\nfunction handleKeyDown(e: KeyboardEvent) {\n  const handlerName = keyToHandlerName[e.key];\n  if (!handlerName) {\n    return;\n  }\n\n  const { length } = handlers[handlerName];\n  if (!length) {\n    return;\n  }\n\n  const handlerOrOptions = handlers[handlerName][length - 1];\n\n  if (typeof handlerOrOptions === 'function') {\n    handlerOrOptions(e);\n\n    e.stopPropagation();\n  } else {\n    const { handler, noStopPropagation, shouldPreventDefault } = handlerOrOptions;\n    if (!noStopPropagation) {\n      e.stopPropagation();\n    }\n    if (shouldPreventDefault) {\n      e.preventDefault();\n    }\n    handler(e);\n  }\n}\n\nfunction releaseKeyboardListener(options: CaptureOptions) {\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      const index = currentEventHandlers.findIndex((cb) => {\n        if (typeof cb === 'function') {\n          return cb === option;\n        } else {\n          return option && 'handler' in option && cb.handler === option.handler;\n        }\n      });\n\n      if (index !== -1) {\n        currentEventHandlers.splice(index, 1);\n      }\n    }\n  });\n\n  if (!hasActiveHandlers()) {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  }\n}\n","let counter = 0;\n\nexport function disableSwipeToClose() {\n  counter += 1;\n}\n\nexport function enableSwipeToClose() {\n  counter -= 1;\n}\n\nexport function getIsSwipeToCloseDisabled() {\n  return counter > 0;\n}\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    ) as HTMLElement[];\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n","export default function cssColorToHex(cssColor: string) {\n  if (/^#[0-9A-F]{6}$/i.test(cssColor)) return cssColor;\n\n  return `#${cssColor.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+\\.{0,1}\\d*))?\\)$/)!\n    .slice(1)\n    .map((n: string, i: number) => (i === 3 ? Math.round(parseFloat(n) * 255) : parseFloat(n))\n      .toString(16)\n      .padStart(2, '0')\n      .replace('NaN', ''))\n    .join('')}`;\n}\n","export var NavigationBarPluginEvents;\n(function (NavigationBarPluginEvents) {\n    /**\n     * Called after the navigation bar is displayed\n     */\n    NavigationBarPluginEvents[\"SHOW\"] = \"onShow\";\n    /**\n     * Called after navigation bar is hidden\n     */\n    NavigationBarPluginEvents[\"HIDE\"] = \"onHide\";\n    /**\n     * Called after navigation bar color is changed\n     */\n    NavigationBarPluginEvents[\"COLOR_CHANGE\"] = \"onColorChange\";\n})(NavigationBarPluginEvents || (NavigationBarPluginEvents = {}));\n//# sourceMappingURL=navigationbar.events.js.map","import { registerPlugin } from '@capacitor/core';\nconst NavigationBar = registerPlugin('NavigationBar', {\n    web: () => import('./web').then(m => new m.NavigationBarWeb()),\n});\nexport * from './definitions';\nexport * from './navigationbar.events';\nexport { NavigationBar };\n//# sourceMappingURL=index.js.map","export var Style;\n(function (Style) {\n    /**\n     * Light text for dark backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Dark\"] = \"DARK\";\n    /**\n     * Dark text for light backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Light\"] = \"LIGHT\";\n    /**\n     * The style is based on the device appearance.\n     * If the device is using Dark mode, the statusbar text will be light.\n     * If the device is using Light mode, the statusbar text will be dark.\n     * On Android the default will be the one the app was launched with.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Default\"] = \"DEFAULT\";\n})(Style || (Style = {}));\nexport var Animation;\n(function (Animation) {\n    /**\n     * No animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"None\"] = \"NONE\";\n    /**\n     * Slide animation during show/hide.\n     * It doesn't work on iOS 15+.\n     *\n     * @deprecated Use Animation.Fade or Animation.None instead.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Slide\"] = \"SLIDE\";\n    /**\n     * Fade animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Fade\"] = \"FADE\";\n})(Animation || (Animation = {}));\n/**\n * @deprecated Use `Animation`.\n * @since 1.0.0\n */\nexport const StatusBarAnimation = Animation;\n/**\n * @deprecated Use `Style`.\n * @since 1.0.0\n */\nexport const StatusBarStyle = Style;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst StatusBar = registerPlugin('StatusBar');\nexport * from './definitions';\nexport { StatusBar };\n//# sourceMappingURL=index.js.map","import { getGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport { switchStatusBar } from './capacitor/switchStatusBar';\nimport cssColorToHex from './cssColorToHex';\nimport { getTelegramApp, getTelegramAppAsync } from './telegram';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\nlet currentTheme: Theme;\nlet forcedDarkStatusBarBackground: boolean | undefined;\n\nexport default function switchTheme(theme: Theme, isInModal?: boolean) {\n  currentTheme = theme;\n\n  setThemeValue();\n  setStatusBarStyle({ isInModal });\n  setThemeColor();\n}\n\nfunction setThemeValue() {\n  const isDarkTheme = currentTheme === 'dark'\n    || (currentTheme === 'system'\n      && (IS_TELEGRAM_APP\n        ? getTelegramApp()?.colorScheme === 'dark'\n        : prefersDark.matches)\n    );\n\n  document.documentElement.classList.toggle('theme-dark', isDarkTheme);\n}\n\nfunction handlePrefersColorSchemeChange() {\n  setThemeValue();\n  setStatusBarStyle();\n}\n\nfunction setThemeColor() {\n  requestMeasure(() => {\n    const color = getComputedStyle(document.documentElement)\n      .getPropertyValue('--color-background-second');\n\n    document\n      .querySelector('meta[name=\"theme-color\"]')\n      ?.setAttribute('content', color);\n  });\n}\n\nexport function setStatusBarStyle(options?: { forceDarkBackground?: boolean; isInModal?: boolean }) {\n  if (IS_TELEGRAM_APP) {\n    requestMeasure(() => {\n      const color = getComputedStyle(document.documentElement)\n        .getPropertyValue('--color-background-second');\n      if (!color) return;\n\n      const hexColor = cssColorToHex(color) as `#${string}`;\n\n      getTelegramApp()?.setHeaderColor(hexColor);\n      getTelegramApp()?.setBackgroundColor(hexColor);\n      getTelegramApp()?.setBottomBarColor(hexColor);\n    });\n\n    return;\n  }\n  if (!IS_CAPACITOR) return;\n\n  if (options?.forceDarkBackground !== undefined) forcedDarkStatusBarBackground = options.forceDarkBackground;\n  switchStatusBar(currentTheme, prefersDark.matches, forcedDarkStatusBarBackground, options?.isInModal);\n}\n\nprefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('themeChanged', onThemeChanged);\n  });\n}\n\nexport function unsubscribeOnTelegramThemeChange() {\n  getTelegramApp()?.offEvent('themeChanged', onThemeChanged);\n}\n\nfunction onThemeChanged() {\n  if (getGlobal().settings.theme === 'system') {\n    handlePrefersColorSchemeChange();\n  }\n}\n","import { NavigationBar } from '@mauricewegner/capacitor-navigation-bar';\nimport { StatusBar, Style } from '@sina_kh/mtw-capacitor-status-bar';\n\nimport type { Theme } from '../../global/types';\n\nimport {\n  IS_ANDROID_APP,\n} from '../windowEnvironment';\n\nexport function switchStatusBar(\n  currentAppTheme: Theme, isSystemDark: boolean, forceDarkBackground?: boolean, isModalOpen?: boolean,\n) {\n  const style = forceDarkBackground || currentAppTheme === 'dark'\n    ? Style.Dark\n    : (isSystemDark && currentAppTheme === 'system' ? Style.Dark : Style.Light);\n\n  void StatusBar.setStyle({ style, isModalOpen });\n  if (IS_ANDROID_APP) {\n    void NavigationBar.setColor({\n      color: '#00000000',\n      darkButtons: currentAppTheme === 'light' || (!isSystemDark && currentAppTheme === 'system'),\n    });\n  }\n}\n","import { useEffect, useRef } from '../lib/teact/teact';\n\nconst useEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useEffectWithPrevDeps;\n","import type { HTMLInputTypeAttribute } from 'react';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport type { BottomSheetKeys } from 'native-bottom-sheet';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport { useEffect, useLayoutEffect, useState } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { setGlobal } from '../global';\n\nimport type { GlobalState } from '../global/types';\n\nimport { bigintReviver } from '../util/bigint';\nimport cssColorToHex from '../util/cssColorToHex';\nimport { setStatusBarStyle } from '../util/switchTheme';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport { useDeviceScreen } from './useDeviceScreen';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst BLUR_TIMEOUT = 50;\nconst COMPACT_MODAL_CSS_SELECTOR = '.is-compact-modal';\n\nconst controlledByMain = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nconst textInputTypes: Set<HTMLInputTypeAttribute> = new Set([\n  'color', 'date', 'datetime-local', 'email', 'month', 'number',\n  'password', 'search', 'tel', 'text', 'time', 'url', 'week',\n]);\n\nlet safeAreaCache: SafeAreaInsets['insets'] | undefined;\nconst safeAreaPromise = SafeArea.getSafeAreaInsets().then(({ insets }) => {\n  safeAreaCache = insets;\n  return safeAreaCache;\n});\n\nlet currentKey: BottomSheetKeys | undefined;\n\nif (IS_DELEGATED_BOTTOM_SHEET) {\n  void BottomSheet.addListener('delegate', ({ key, globalJson }: { key: BottomSheetKeys; globalJson: string }) => {\n    currentKey = key;\n    controlledByMain.get(key)?.();\n\n    setGlobal(\n      JSON.parse(globalJson, bigintReviver) as GlobalState,\n      { forceOutdated: true, forceSyncOnIOs: true },\n    );\n  });\n\n  void BottomSheet.addListener('move', () => {\n    window.dispatchEvent(new Event('viewportmove'));\n  });\n}\n\nlet isForcedFullSize: boolean;\n\nexport function getIsForcedFullSize() {\n  return isForcedFullSize;\n}\n\nexport function useDelegatedBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n  dialogRef: React.RefObject<HTMLDivElement>,\n  forceFullNative = false,\n  noResetHeightOnBlur = false,\n) {\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET || !key || key !== currentKey) return;\n\n    if (isOpen) {\n      const dialogEl = dialogRef.current!;\n\n      void BottomSheet.openSelf({\n        key,\n        height: String(dialogEl.offsetHeight),\n        backgroundColor: cssColorToHex(getComputedStyle(dialogEl).backgroundColor),\n      }).then(() => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      });\n    } else if (prevIsOpen) {\n      void BottomSheet.closeSelf({ key });\n      setStatusBarStyle({\n        forceDarkBackground: false,\n      });\n    }\n  }, [isOpen, dialogRef, key, onClose]);\n\n  const isDelegatedAndOpen = IS_DELEGATED_BOTTOM_SHEET && key && isOpen;\n\n  const { screenHeight } = useDeviceScreen();\n  const [safeArea, setSafeArea] = useState(safeAreaCache);\n  void safeAreaPromise.then(setSafeArea);\n  // We use Safe Area plugin instead of CSS `env()` function as it does not depend on modal position\n  const maxHeight = screenHeight - (safeArea?.top || 0);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return;\n\n    dialogRef.current!.style[forceFullNative ? 'maxHeight' : 'height'] = '';\n    dialogRef.current!.style[forceFullNative ? 'height' : 'maxHeight'] = `${maxHeight}px`;\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, maxHeight]);\n\n  useEffectWithPrevDeps(([prevForceFullNative]) => {\n    if (!isDelegatedAndOpen) return;\n\n    isForcedFullSize = forceFullNative;\n\n    // Skip initial opening\n    if (forceFullNative !== undefined && prevForceFullNative === undefined) return;\n\n    void BottomSheet.toggleSelfFullSize({ isFullSize: forceFullNative });\n  }, [forceFullNative, isDelegatedAndOpen]);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return undefined;\n\n    const dialogEl = dialogRef.current!;\n    let blurTimeout: number | undefined;\n\n    function onFocus(e: FocusEvent) {\n      if (!isInput(e.target)) {\n        return;\n      }\n\n      if (blurTimeout) {\n        clearTimeout(blurTimeout);\n        blurTimeout = undefined;\n        return;\n      }\n\n      preventScrollOnFocus(dialogEl);\n\n      void BottomSheet.toggleSelfFullSize({ isFullSize: true });\n    }\n\n    function onBlur(e: FocusEvent) {\n      if (!isInput(e.target) || noResetHeightOnBlur || forceFullNative || isInCompactModal(e.target)) {\n        return;\n      }\n\n      blurTimeout = window.setTimeout(() => {\n        blurTimeout = undefined;\n        void BottomSheet.toggleSelfFullSize({ isFullSize: false });\n      }, BLUR_TIMEOUT);\n    }\n\n    document.addEventListener('focusin', onFocus);\n    document.addEventListener('focusout', onBlur);\n\n    return () => {\n      document.removeEventListener('focusout', onBlur);\n      document.removeEventListener('focusin', onFocus);\n    };\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, noResetHeightOnBlur]);\n}\n\nexport function useOpenFromMainBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    controlledByMain.set(key, open);\n\n    if (currentKey === key) {\n      open();\n    }\n\n    return () => {\n      if (controlledByMain.get(key) === open) {\n        controlledByMain.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n\nexport function openInMain(key: BottomSheetKeys) {\n  void BottomSheet.openInMain({ key });\n}\n\nfunction isInput(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return (el.tagName === 'INPUT' && textInputTypes.has((el as HTMLInputElement).type))\n    || el.tagName === 'TEXTAREA'\n    || (el.tagName === 'DIV' && el.isContentEditable);\n}\n\nfunction isInCompactModal(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return el.matches(COMPACT_MODAL_CSS_SELECTOR) || !!el.closest('.is-compact-modal');\n}\n\nfunction preventScrollOnFocus(el: HTMLDivElement) {\n  el.style.opacity = '0';\n  setTimeout(() => {\n    el.style.opacity = '1';\n  });\n\n  document.documentElement.scrollTop = 0;\n}\n","import type { BottomSheetKeys } from 'native-bottom-sheet';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport { useEffect } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { getGlobal } from '../global';\n\nimport { pause } from '../util/schedulers';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst RACE_TIMEOUT = 1000;\nconst CLOSING_DURATION = 100;\n\nconst controlledByNative = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  void BottomSheet.prepare();\n\n  void BottomSheet.addListener(\n    'openInMain',\n    ({ key }: { key: BottomSheetKeys }) => {\n      controlledByNative.get(key)?.();\n    },\n  );\n}\n\nlet lastOpenCall = Promise.resolve();\nlet closeCurrent: NoneToVoidFunction | undefined;\n\nexport function useDelegatingBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isPortrait: boolean | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n) {\n  const isDelegating = IS_DELEGATING_BOTTOM_SHEET && key;\n  const shouldOpen = isOpen && isPortrait;\n\n  useEffectWithPrevDeps(([prevShouldOpen]) => {\n    if (!isDelegating) return;\n\n    if (shouldOpen) {\n      closeCurrent?.();\n\n      const closeNext = () => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      };\n\n      closeCurrent = closeNext;\n\n      // Wait until previous call resolves to get an up-to-date global\n      lastOpenCall = Promise.race([\n        lastOpenCall,\n        pause(RACE_TIMEOUT), // Sometimes the last open call is stuck for some unknown reason\n      ])\n        .then(() => {\n          return BottomSheet.delegate({\n            key,\n            globalJson: JSON.stringify(getGlobal()),\n          });\n        })\n        .then(() => {\n          if (closeCurrent === closeNext) {\n            closeCurrent();\n            closeCurrent = undefined;\n          }\n        })\n        .then(() => pause(CLOSING_DURATION));\n    } else if (prevShouldOpen) {\n      void BottomSheet.release({ key });\n    }\n  }, [shouldOpen, isDelegating, key, onClose]);\n\n  return isDelegating && isPortrait;\n}\n\nexport function useOpenFromNativeBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    controlledByNative.set(key, open);\n\n    return () => {\n      if (controlledByNative.get(key) === open) {\n        controlledByNative.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n","import { useRef } from '../lib/teact/teact';\n\n// Deprecated. Use `usePrevious2` instead\nfunction usePrevious<T extends any>(next: T): T | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined: true): Exclude<T, undefined> | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined?: boolean): Exclude<T, undefined> | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined?: boolean) {\n  const ref = useRef<T>();\n  const { current } = ref;\n  if (!shouldSkipUndefined || next !== undefined) {\n    ref.current = next;\n  }\n\n  return current;\n}\n\nexport default usePrevious;\n","import { useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\nimport usePrevious from './usePrevious';\n\nexport default function useSyncEffect<const T extends readonly any[]>(\n  effect: (args: T | readonly []) => NoneToVoidFunction | void,\n  dependencies: T,\n) {\n  const prevDeps = usePrevious<T>(dependencies);\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  if (!prevDeps || dependencies.some((d, i) => d !== prevDeps[i])) {\n    cleanupRef.current?.();\n    cleanupRef.current = effect(prevDeps || []) ?? undefined;\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupRef.current?.();\n    };\n  });\n}\n","import { logDebugError } from '../logs';\nimport { debounce } from '../schedulers';\nimport { getTelegramApp } from './index';\n\ninterface CallbackEntry {\n  id: number;\n  callback: NoneToVoidFunction;\n}\n\nconst runDebounce = debounce((cb) => cb(), 300, false);\nconst callbacks: CallbackEntry[] = [];\nlet isGlobalHandlerAttached = false;\nlet uniqueId = 0;\n\nfunction getNextId() {\n  uniqueId += 1;\n  return uniqueId;\n}\n\nfunction updateBackButtonState() {\n  const backButton = getTelegramApp()!.BackButton;\n\n  if (callbacks.length > 0 && !isGlobalHandlerAttached) {\n    backButton.show();\n    backButton.onClick(handleBackButtonClick);\n    isGlobalHandlerAttached = true;\n  } else if (!callbacks.length && isGlobalHandlerAttached) {\n    backButton.hide();\n    backButton.offClick(handleBackButtonClick);\n    isGlobalHandlerAttached = false;\n  }\n}\n\nexport function registerCallback(cb: NoneToVoidFunction) {\n  const id = getNextId();\n  callbacks.push({ id, callback: cb });\n  runDebounce(updateBackButtonState);\n  return id;\n}\n\nexport function unregisterCallback(id: number) {\n  const index = callbacks.findIndex((entry) => entry.id === id);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n    runDebounce(updateBackButtonState);\n  }\n}\n\nfunction handleBackButtonClick() {\n  if (callbacks.length > 0) {\n    const entry = callbacks.pop()!;\n    try {\n      entry.callback();\n    } catch (err: any) {\n      logDebugError('[handleBackButtonClick]', err);\n    }\n  }\n\n  runDebounce(updateBackButtonState);\n}\n","import { useCallback, useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP, IS_TEST } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport {\n  registerCallback as registerTelegramCallback,\n  unregisterCallback as unregisterTelegramCallback,\n} from '../util/telegram/backButtonManager';\nimport { IS_IOS, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useLastCallback from './useLastCallback';\nimport useSyncEffect from './useSyncEffect';\n\nconst PATH_BASE = `${window.location.pathname}${window.location.search}`;\n\ntype HistoryRecord = {\n  index: number;\n  // Should this record be replaced by the next record (for example Menu)\n  shouldBeReplaced?: boolean;\n  // Mark this record as replaced by the next record. Only used to check if needed to perform effectBack\n  markReplaced?: VoidFunction;\n  onBack?: VoidFunction;\n  // Set if the element is closed in the UI, but not in the real history\n  isClosed?: boolean;\n};\n\ntype HistoryOperationGo = {\n  type: 'go';\n  delta: number;\n};\n\ntype HistoryOperationState = {\n  type: 'pushState' | 'replaceState';\n  data: any;\n};\n\ntype HistoryOperation = HistoryOperationGo | HistoryOperationState;\n\n// Needed to dismiss any 'trashed' history records from the previous page reloads.\nconst historyUniqueSessionId = Number(new Date());\n// Reflects real history state, but also contains information on which records should be replaced by the next record and\n// which records are deferred to close on the next operation\nlet historyState: HistoryRecord[];\n// Reflects current real history index\nlet historyCursor: number;\n// If we alter real history programmatically, the popstate event will be fired, which we don't need\nlet isAlteringHistory = false;\n// Unfortunately Safari doesn't really like when there's 2+ consequent history operations in one frame, so we need\n// to delay them to the next raf\nlet deferredHistoryOperations: HistoryOperation[] = [];\nlet deferredPopstateOperations: HistoryOperationState[] = [];\n\n// Do not remove: used for history unit tests\nif (IS_TEST) {\n  (window as any).TEST_getHistoryState = () => historyState;\n  (window as any).TEST_getHistoryCursor = () => historyCursor;\n}\n\nfunction applyDeferredHistoryOperations() {\n  const goOperations = deferredHistoryOperations.filter((op) => op.type === 'go') as HistoryOperationGo[];\n  const stateOperations = deferredHistoryOperations.filter((op) => op.type !== 'go') as HistoryOperationState[];\n  const goCount = goOperations.reduce((acc, op) => acc + op.delta, 0);\n\n  deferredHistoryOperations = [];\n\n  if (goCount) {\n    window.history.go(goCount);\n\n    // If we have some `state` operations after the `go` operations, we need to wait until the popstate event\n    // so the order of operations is correctly preserved\n    if (stateOperations.length) {\n      deferredPopstateOperations.push(...stateOperations);\n      return;\n    }\n  }\n\n  processStateOperations(stateOperations);\n}\n\nfunction processStateOperations(stateOperations: HistoryOperationState[]) {\n  stateOperations.forEach((op) => window.history[op.type](op.data, ''));\n}\n\nfunction deferHistoryOperation(historyOperation: HistoryOperation) {\n  if (!deferredHistoryOperations.length) {\n    requestMeasure(applyDeferredHistoryOperations);\n  }\n\n  deferredHistoryOperations.push(historyOperation);\n}\n\n// Resets history to the `root` state\nfunction resetHistory() {\n  historyCursor = 0;\n  historyState = [{\n    index: 0,\n    onBack: () => window.history.back(),\n  }];\n\n  if (!IS_LEDGER_EXTENSION_TAB) {\n    window.history.replaceState({ index: 0, historyUniqueSessionId }, '', PATH_BASE);\n  }\n}\n\nresetHistory();\n\nfunction cleanupClosed(alreadyClosedCount = 1) {\n  let countClosed = alreadyClosedCount;\n  for (let i = historyCursor - 1; i > 0; i--) {\n    if (!historyState[i].isClosed) break;\n    countClosed++;\n  }\n  if (countClosed) {\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -countClosed,\n    });\n  }\n  return countClosed;\n}\n\nfunction cleanupTrashedState() {\n  for (let i = historyState.length - 1; i > 0; i--) {\n    if (historyState[i].isClosed) {\n      continue;\n    }\n    historyState[i].onBack?.();\n  }\n\n  resetHistory();\n}\n\nwindow.addEventListener('popstate', ({ state }: PopStateEvent) => {\n  if (isAlteringHistory) {\n    isAlteringHistory = false;\n    if (deferredPopstateOperations.length) {\n      processStateOperations(deferredPopstateOperations);\n      deferredPopstateOperations = [];\n    }\n    return;\n  }\n\n  if (!state) {\n    cleanupTrashedState();\n    return;\n  }\n\n  const { index, historyUniqueSessionId: previousUniqueSessionId } = state;\n  if (previousUniqueSessionId !== historyUniqueSessionId) {\n    cleanupTrashedState();\n    return;\n  }\n\n  // New real history state matches the old virtual one. Not possible in theory, but in practice we have Safari\n  if (index === historyCursor) {\n    return;\n  }\n\n  if (index < historyCursor) {\n    // Navigating back\n    let alreadyClosedCount = 0;\n    for (let i = historyCursor; i > index - alreadyClosedCount; i--) {\n      if (historyState[i].isClosed) {\n        alreadyClosedCount++;\n        continue;\n      }\n      historyState[i].onBack?.();\n    }\n\n    const countClosed = cleanupClosed(alreadyClosedCount);\n    historyCursor += index - historyCursor - countClosed;\n\n    // Can happen when we have deferred a real back for some element (for example Menu), closed via UI,\n    // pressed back button and caused a pushState.\n    if (historyCursor < 0) {\n      historyCursor = 0;\n    }\n  } else if (index > historyCursor) {\n    // Forward navigation is not yet supported\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -(index - historyCursor),\n    });\n  }\n});\n\nexport default function useHistoryBack({\n  isActive,\n  shouldBeReplaced,\n  shouldIgnoreForTelegram,\n  onBack,\n}: {\n  isActive?: boolean;\n  shouldBeReplaced?: boolean;\n  shouldIgnoreForTelegram?: boolean;\n  onBack: VoidFunction;\n}) {\n  const lastOnBack = useLastCallback(onBack);\n\n  // Active index of the record\n  const indexRef = useRef<number>();\n  const telegramIdRef = useRef<number>();\n  const wasReplaced = useRef(false);\n\n  const isFirstRender = useRef(true);\n\n  const pushState = useCallback((forceReplace = false) => {\n    // Check if the old state should be replaced\n    const shouldReplace = forceReplace || historyState[historyCursor].shouldBeReplaced;\n    indexRef.current = shouldReplace ? historyCursor : ++historyCursor;\n\n    historyCursor = indexRef.current;\n\n    // Mark the previous record as replaced so effectBack doesn't perform back operation on the new record\n    const previousRecord = historyState[indexRef.current];\n    if (previousRecord && !previousRecord.isClosed) {\n      previousRecord.markReplaced?.();\n    }\n\n    historyState[indexRef.current] = {\n      index: indexRef.current,\n      onBack: lastOnBack,\n      shouldBeReplaced,\n      markReplaced: () => {\n        wasReplaced.current = true;\n      },\n    };\n\n    deferHistoryOperation({\n      type: shouldReplace ? 'replaceState' : 'pushState',\n      data: {\n        index: indexRef.current,\n        historyUniqueSessionId,\n      },\n    });\n  }, [lastOnBack, shouldBeReplaced]);\n\n  const processBack = useCallback(() => {\n    // Only process back on open records\n    if (indexRef.current && historyState[indexRef.current] && !wasReplaced.current) {\n      historyState[indexRef.current].isClosed = true;\n      wasReplaced.current = true;\n      if (indexRef.current === historyCursor && !shouldBeReplaced) {\n        historyCursor -= cleanupClosed();\n      }\n    }\n  }, [shouldBeReplaced]);\n\n  // Process back navigation when element is unmounted\n  useEffectOnce(() => {\n    if (IS_IOS) return undefined;\n\n    isFirstRender.current = false;\n    return () => {\n      if (!isActive || wasReplaced.current) return;\n      processBack();\n    };\n  });\n\n  useSyncEffect(([prevIsActive]) => {\n    if (IS_IOS) return;\n    if (prevIsActive === isActive) return;\n    if (isFirstRender.current && !isActive) return;\n\n    if (isActive) {\n      pushState();\n    } else {\n      processBack();\n    }\n  }, [isActive, processBack, pushState]);\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || shouldIgnoreForTelegram || !isActive) return undefined;\n\n    telegramIdRef.current = registerTelegramCallback(lastOnBack);\n\n    return () => {\n      if (telegramIdRef.current !== undefined) {\n        unregisterTelegramCallback(telegramIdRef.current);\n        telegramIdRef.current = undefined;\n      }\n    };\n  }, [isActive, shouldIgnoreForTelegram, onBack]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"esdydUs1\",\"dot\":\"TUSiLENF\",\"dots\":\"Zft9rPYc\",\"doubled\":\"UJzP4d9r\",\"dots-doubled\":\"vpZtb2OQ\",\"dotsDoubled\":\"vpZtb2OQ\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './LoadingDots.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  className?: string;\n  isDoubled?: boolean;\n}\n\nfunction LoadingDots({ isActive, className, isDoubled }: OwnProps) {\n  const { shouldRender, transitionClassNames } = useShowTransition(isActive);\n\n  if (!shouldRender) {\n    // eslint-disable-next-line no-null/no-null\n    return null;\n  }\n\n  return (\n    <div className={buildClassName(styles.root, isDoubled && styles.doubled, className, transitionClassNames)}>\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n    </div>\n  );\n}\n\nexport default memo(LoadingDots);\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"GpDwnAkE\",\"loadingInit\":\"tZ9ppkji\",\"clicked\":\"A1qGzs0x\",\"isSimple\":\"Cw_ElX3O\",\"isText\":\"d3A7BZDx\",\"primary\":\"Pb9B3sBE\",\"transparent\":\"nxcFq7cM\",\"disabled\":\"zSwp1moR\",\"destructive\":\"tLZabe0e\",\"sizeSmall\":\"ORqfj0CU\",\"round\":\"PJ7EB5_T\",\"loadingStart\":\"pv1HwapI\",\"loadingDots\":\"_2QYUoJe\"};","import type { RefObject } from 'react';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport LoadingDots from './LoadingDots';\n\nimport styles from './Button.module.scss';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLButtonElement>;\n  children: React.ReactNode;\n  id?: string;\n  className?: string;\n  style?: string;\n  ariaLabel?: string;\n  forFormId?: string;\n  kind?: 'transparent';\n  isSubmit?: boolean;\n  isPrimary?: boolean;\n  isSimple?: boolean;\n  isText?: boolean;\n  isLoading?: boolean;\n  isDisabled?: boolean;\n  isRound?: boolean;\n  isSmall?: boolean;\n  isDestructive?: boolean;\n  onClick?: NoneToVoidFunction;\n  shouldStopPropagation?: boolean;\n};\n\n// Longest animation duration\nconst CLICKED_TIMEOUT = 400;\n\nfunction Button({\n  ref,\n  children,\n  id,\n  className,\n  style,\n  ariaLabel,\n  forFormId,\n  kind,\n  isSubmit,\n  isLoading,\n  isPrimary,\n  isSimple,\n  isText,\n  isDisabled,\n  isRound,\n  isSmall,\n  isDestructive,\n  onClick,\n  shouldStopPropagation,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = useLastCallback((event: React.MouseEvent) => {\n    if (!isDisabled && onClick) {\n      if (shouldStopPropagation) {\n        event.stopPropagation();\n      }\n      onClick();\n    }\n\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT);\n  });\n\n  const loadingClassName = buildClassName(\n    isLoading !== undefined && styles.loadingInit,\n    isLoading && styles.loadingStart,\n  );\n\n  return (\n    <button\n      id={id}\n      ref={ref}\n      type={isSubmit || forFormId ? 'submit' : 'button'}\n      className={buildClassName(\n        styles.button,\n        isSimple && styles.isSimple,\n        isSmall && styles.sizeSmall,\n        isPrimary && styles.primary,\n        (isDisabled || isLoading) && styles.disabled,\n        loadingClassName,\n        isRound && styles.round,\n        isText && styles.isText,\n        isDestructive && styles.destructive,\n        isClicked && styles.clicked,\n        className,\n        kind && styles[kind],\n      )}\n      style={style}\n      aria-label={ariaLabel}\n      disabled={isDisabled || isLoading}\n      form={forFormId}\n      onClick={handleClick}\n    >\n      {children}\n      <LoadingDots isActive={isLoading} className={styles.loadingDots} />\n    </button>\n  );\n}\n\nexport default memo(Button);\n","import { DEBUG } from '../../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<Element, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load', 'error']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<Element, Set<string>>();\n\nexport function addEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function resolveEventType(propName: string, element: Element) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: Element, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: Element, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: Element) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)!.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: Element) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n  delegatedEventTypesByElement.delete(element);\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: Element = realEvent.target as Element;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as Element;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: Element) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import type { ChangeEvent, FocusEvent } from 'react';\n\nimport type { Signal } from '../../util/signals';\nimport type {\n  VirtualElement,\n  VirtualElementChildren,\n  VirtualElementComponent,\n  VirtualElementFragment,\n  VirtualElementParent,\n  VirtualElementReal,\n  VirtualElementTag,\n} from './teact';\n\nimport { DEBUG } from '../../config';\nimport { unique } from '../../util/iteratees';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport {\n  captureImmediateEffects,\n  hasElementChanged,\n  isParentElement,\n  mountComponent,\n  MountState,\n  renderComponent,\n  unmountComponent,\n  VirtualType,\n} from './teact';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\ntype CurrentContext = Record<string, Signal<unknown>>;\n\ntype DOMElement = HTMLElement | SVGElement;\n\nconst SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nconst HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: { [k: string]: string } = {\n  autoCapitalize: 'autocapitalize',\n  autoComplete: 'autocomplete',\n  autoCorrect: 'autocorrect',\n  autoPlay: 'autoplay',\n  spellCheck: 'spellcheck',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\nconst SELECTION_STATE_ATTRIBUTE = '__teactSelectionState';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\nconst extraStyles = new WeakMap<Element, Record<string, string>>();\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet DEBUG_virtualTreeSize = 1;\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n  const $head = headsByElement.get(parentEl)!;\n  const $renderedChild = renderWithVirtual(parentEl, $head.children[0], $element, $head, {}, 0);\n  runImmediateEffects?.();\n\n  $head.children = $renderedChild ? [$renderedChild] : [];\n\n  if (process.env.APP_ENV === 'perf') {\n    DEBUG_virtualTreeSize = 0;\n    DEBUG_addToVirtualTreeSize($head);\n\n    return DEBUG_virtualTreeSize;\n  }\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: DOMElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    forceMoveToEnd?: boolean;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling, namespace } = options;\n\n  const isCurrentComponent = $current?.type === VirtualType.Component;\n  const isNewComponent = $new?.type === VirtualType.Component;\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = !isCurrentComponent && $current?.type === VirtualType.Fragment;\n  const isNewFragment = !isNewComponent && $new?.type === VirtualType.Fragment;\n\n  if ($new?.type === VirtualType.Tag) {\n    if ($new.tag === 'svg') namespace = SVG_NAMESPACE;\n    if ($new.props.xmlns) namespace = $new.props.xmlns;\n  }\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current!, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (\n    !skipComponentUpdate\n    && isNewComponent\n    && ($new as VirtualElementComponent).componentInstance.mountState === MountState.Mounted\n  ) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, currentContext, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(\n          parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n        ) as unknown as typeof $new;\n        currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n        nextSibling, fragment, namespace,\n      });\n    } else {\n      const canSetTextContent = !fragment\n        && !nextSibling\n        && $newAsReal.type === VirtualType.Text\n        && $parent.children.length === 1\n        && !parentEl.firstChild;\n\n      if (canSetTextContent) {\n        parentEl.textContent = $newAsReal.value;\n        $newAsReal.target = parentEl.firstChild!;\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        insertBefore(fragment || parentEl, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, currentContext, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(\n            parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n          ) as unknown as typeof $new;\n          currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n        }\n\n        remount(parentEl, $current, currentContext, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n          nextSibling, fragment, namespace,\n        });\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        remount(parentEl, $current, currentContext, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          currentContext,\n          parentEl,\n          nextSibling,\n          options.forceMoveToEnd,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = $current.type === VirtualType.Tag;\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          setElementRef($current, undefined);\n          setElementRef($newAsTag, currentTarget as DOMElement);\n\n          if (nextSibling || options.forceMoveToEnd) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as DOMElement, namespace);\n          renderChildren(\n            $current, $newAsTag, currentContext, currentTarget as DOMElement, undefined, undefined, namespace,\n          );\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  $element.componentInstance.context = currentContext;\n\n  if (componentInstance.mountState === MountState.Unmounted) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, currentContext, index);\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      currentContext,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  currentContext: CurrentContext,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  },\n) {\n  const { children } = $element;\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $element, currentContext, i, options);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n}\n\nfunction unmountChildren(\n  parentEl: DOMElement, $element: VirtualElementComponent | VirtualElementFragment, currentContext: CurrentContext,\n) {\n  for (const $child of $element.children) {\n    renderWithVirtual(parentEl, $child, undefined, $element, currentContext, -1);\n  }\n}\n\nfunction createNode($element: VirtualElementReal, currentContext: CurrentContext, namespace = HTML_NAMESPACE): Node {\n  if ($element.type === VirtualType.Empty) {\n    return document.createTextNode('');\n  }\n\n  if ($element.type === VirtualType.Text) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children } = $element;\n  const element = document.createElementNS(namespace, tag) as DOMElement;\n\n  processControlled(tag, props);\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const key in props) {\n    if (!props.hasOwnProperty(key)) continue;\n\n    if (props[key] !== undefined) {\n      setAttribute(element, key, props[key], namespace);\n    }\n  }\n\n  processUncontrolledOnMount(element, props);\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(element, undefined, $child, $element, currentContext, i, { namespace });\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n\n  return element;\n}\n\nfunction remount(\n  parentEl: DOMElement,\n  $current: VirtualElement,\n  currentContext: CurrentContext,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = $current.type === VirtualType.Component;\n  const isFragment = !isComponent && $current.type === VirtualType.Fragment;\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current, currentContext);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if ($element.type === VirtualType.Component) {\n    unmountComponent($element.componentInstance);\n  } else if ($element.type !== VirtualType.Fragment) {\n    if ($element.type === VirtualType.Tag) {\n      extraClasses.delete($element.target!);\n      setElementRef($element, undefined);\n      removeAllDelegatedListeners($element.target!);\n    }\n\n    $element.target = undefined; // Help GC\n\n    if ($element.type !== VirtualType.Tag) {\n      return;\n    }\n  }\n\n  for (const $child of $element.children) {\n    unmountRealTree($child);\n  }\n}\n\nfunction insertBefore(parentEl: DOMElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if ($current.type === VirtualType.Component || $current.type === VirtualType.Fragment) {\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  return $current.target!.nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent,\n  $new: VirtualElementParent,\n  currentContext: CurrentContext,\n  currentEl: DOMElement,\n  nextSibling?: ChildNode,\n  forceMoveToEnd = false,\n  namespace?: string,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    renderFastListChildren($current, $new, currentContext, currentEl);\n    return;\n  }\n\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const currentChildrenLength = currentChildren.length;\n  const newChildrenLength = newChildren.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = fragment && (\n    nextSibling || (lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined)\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $renderedChild = renderWithVirtual(\n      currentEl,\n      currentChildren[i],\n      newChildren[i],\n      $new,\n      currentContext,\n      i,\n      i >= currentChildrenLength ? { fragment, namespace } : { nextSibling, forceMoveToEnd, namespace },\n    );\n\n    if ($renderedChild && $renderedChild !== newChildren[i]) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren(\n  $current: VirtualElementParent, $new: VirtualElementParent, currentContext: CurrentContext, currentEl: DOMElement,\n) {\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const newKeys = new Set();\n  for (const $newChild of newChildren) {\n    const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n    if (DEBUG && isParentElement($newChild)) {\n      // eslint-disable-next-line no-null/no-null\n      if (key === undefined || key === null) {\n        // eslint-disable-next-line no-console\n        console.warn('Missing `key` in `teactFastList`');\n      }\n\n      if ($newChild.type === VirtualType.Fragment) {\n        throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n      }\n    }\n\n    newKeys.add(key);\n  }\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey: Record<string, { $element: VirtualElement; index: number; orderKey?: number }> = {};\n  for (let i = 0, l = currentChildren.length; i < l; i++) {\n    const $currentChild = currentChildren[i];\n\n    let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n    // eslint-disable-next-line no-null/no-null\n    const isKeyPresent = key !== undefined && key !== null;\n\n    // First we process removed children\n    if (isKeyPresent && !newKeys.has(key)) {\n      renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n      continue;\n    } else if (!isKeyPresent) {\n      const $newChild = newChildren[i];\n      const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n      // If a non-key element remains at the same index we preserve it with a virtual `key`\n      if ($newChild && !newChildKey) {\n        key = `${INDEX_KEY_PREFIX}${i}`;\n        // Otherwise, we just remove it\n      } else {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n        continue;\n      }\n    }\n\n    // Then we build up info about remaining children\n    remainingByKey[key] = {\n      $element: $currentChild,\n      index: currentRemainingIndex++,\n      orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n    };\n  }\n\n  let fragmentIndex: number | undefined;\n  let fragmentSize: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  for (let i = 0, l = newChildren.length; i < l; i++) {\n    const $newChild = newChildren[i];\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (fragmentSize === undefined) {\n        fragmentIndex = i;\n        fragmentSize = 0;\n      }\n\n      fragmentSize++;\n      continue;\n    }\n\n    // This prepends new children to the top\n    if (fragmentSize) {\n      renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n      fragmentSize = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && (!newOrderKey || currentChildInfo.orderKey !== newOrderKey)\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    const nextSibling = currentEl.childNodes[isMovingDown ? i + 1 : i];\n    const options = shouldMoveNode ? (nextSibling ? { nextSibling } : { forceMoveToEnd: true }) : undefined;\n\n    const $renderedChild = renderWithVirtual(\n      currentEl, currentChildInfo.$element, $newChild, $new, currentContext, i, options,\n    );\n    if ($renderedChild !== $newChild) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  // This appends new children to the bottom\n  if (fragmentSize) {\n    renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n  }\n}\n\nfunction renderFragment(\n  fragmentIndex: number,\n  fragmentSize: number,\n  parentEl: DOMElement,\n  $parent: VirtualElementParent,\n  currentContext: CurrentContext,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (fragmentSize === 1) {\n    const $child = $parent.children[fragmentIndex];\n    const $renderedChild = renderWithVirtual(\n      parentEl, undefined, $child, $parent, currentContext, fragmentIndex, { nextSibling },\n    );\n    if ($renderedChild !== $child) {\n      $parent.children[fragmentIndex] = $renderedChild;\n    }\n\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  for (let i = fragmentIndex; i < fragmentIndex + fragmentSize; i++) {\n    const $child = $parent.children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, currentContext, i, { fragment });\n    if ($renderedChild !== $child) {\n      $parent.children[i] = $renderedChild;\n    }\n  }\n\n  insertBefore(parentEl, fragment, nextSibling);\n}\n\nfunction setElementRef($element: VirtualElementTag, element: DOMElement | undefined) {\n  const { ref } = $element.props;\n\n  if (typeof ref === 'object') {\n    ref.current = element;\n    ref.onChange?.();\n  } else if (typeof ref === 'function') {\n    ref(element);\n  }\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange, onBlur,\n  } = props;\n\n  props.onChange = undefined;\n  props.onBlur = (e: FocusEvent<HTMLInputElement>) => {\n    delete e.currentTarget.dataset[SELECTION_STATE_ATTRIBUTE];\n\n    onBlur?.(e);\n  };\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n        // eslint-disable-next-line no-underscore-dangle\n        e.currentTarget.dataset[SELECTION_STATE_ATTRIBUTE] = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n}\n\nfunction processUncontrolledOnMount(element: DOMElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes(\n  $current: VirtualElementTag, $new: VirtualElementTag, element: DOMElement, namespace?: string,\n) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  for (const [key, currentValue] of currentEntries) {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  }\n\n  for (const [key, newValue] of newEntries) {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue, namespace);\n    }\n  }\n}\n\nfunction setAttribute(element: DOMElement, key: string, value: any, namespace?: string) {\n  if (key === 'className') {\n    updateClassName(element, value, namespace);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      // eslint-disable-next-line no-underscore-dangle\n      const selectionStateJson = inputEl.dataset[SELECTION_STATE_ATTRIBUTE];\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    updateStyle(element, value);\n  } else if (key === 'dangerouslySetInnerHTML') {\n    // eslint-disable-next-line no-underscore-dangle\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (\n    namespace === SVG_NAMESPACE || key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)\n  ) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: DOMElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    updateStyle(element, '');\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: DOMElement, value: string, namespace?: string) {\n  if (namespace === SVG_NAMESPACE) {\n    element.setAttribute('class', value);\n    return;\n  }\n\n  const htmlElement = element as HTMLElement;\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    htmlElement.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  htmlElement.className = extraArray.join(' ');\n}\n\nfunction updateStyle(element: DOMElement, value: string) {\n  element.style.cssText = value;\n\n  const extraObject = extraStyles.get(element);\n  if (extraObject) {\n    applyExtraStyles(element);\n  }\n}\n\nexport function addExtraClass(element: DOMElement, className: string) {\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: DOMElement, className: string) {\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: DOMElement, className: string, force?: boolean) {\n  if (force === true) {\n    addExtraClass(element, className);\n  } else if (force === false) {\n    removeExtraClass(element, className);\n  } else if (extraClasses.get(element)?.has(className)) {\n    removeExtraClass(element, className);\n  } else {\n    addExtraClass(element, className);\n  }\n}\n\nexport function setExtraStyles(element: DOMElement, styles: Partial<CSSStyleDeclaration> & AnyLiteral) {\n  extraStyles.set(element, styles);\n  applyExtraStyles(element);\n}\n\nfunction applyExtraStyles(element: DOMElement) {\n  const standardStyles = Object.entries(extraStyles.get(element)!).reduce<Record<string, string>>(\n    (acc, [prop, value]) => {\n      if (prop.startsWith('--')) {\n        element.style.setProperty(prop, value);\n      } else {\n        acc[prop] = value;\n      }\n\n      return acc;\n    },\n    {},\n  );\n\n  Object.assign(element.style, standardStyles);\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_addToVirtualTreeSize($current: VirtualElementParent | VirtualDomHead) {\n  DEBUG_virtualTreeSize += $current.children.length;\n\n  $current.children.forEach(($child) => {\n    if (isParentElement($child)) {\n      DEBUG_addToVirtualTreeSize($child);\n    }\n  });\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i), children);\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import type { VirtualElement } from '../../lib/teact/teact';\nimport { useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport TeactDOM from '../../lib/teact/teact-dom';\n\ntype OwnProps = {\n  containerId?: string;\n  className?: string;\n  style?: string;\n  children: VirtualElement;\n};\n\nfunction Portal({\n  containerId, className, style, children,\n}: OwnProps): TeactJsx {\n  const elementRef = useRef<HTMLDivElement>();\n  if (!elementRef.current) {\n    elementRef.current = document.createElement('div');\n  }\n\n  useLayoutEffect(() => {\n    const container = document.querySelector<HTMLDivElement>(containerId || '#portals');\n    if (!container) {\n      return undefined;\n    }\n\n    const element = elementRef.current!;\n\n    if (className) {\n      element.className = className;\n    }\n\n    if (style) {\n      element.style.cssText = style;\n    }\n\n    container.appendChild(element);\n\n    return () => {\n      TeactDOM.render(undefined, element);\n      container.removeChild(element);\n    };\n  }, [className, style, containerId]);\n\n  return TeactDOM.render(children, elementRef.current);\n}\n\nexport default Portal;\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"bei20BXo\",\"error\":\"ycQPrkNy\",\"dialog\":\"lCrWZOJa\",\"backdrop\":\"BRHUYooL\",\"slideUpAnimation\":\"ciD50Ivv\",\"container\":\"pI0zvyZ_\",\"forceBottomSheet\":\"zXbZnJvJ\",\"content\":\"ikANOLRm\",\"noBackdrop\":\"JdyYzya2\",\"compact\":\"OIC6BQI4\",\"header\":\"LB42p81C\",\"header_noClose\":\"rhAMo7kW\",\"headerNoClose\":\"rhAMo7kW\",\"title\":\"ZDSNp0nr\",\"header_wideContent\":\"_ijqgHQC\",\"headerWideContent\":\"_ijqgHQC\",\"header_back\":\"F2CCACcS\",\"headerBack\":\"F2CCACcS\",\"header_backIcon\":\"IubryJoO\",\"headerBackIcon\":\"IubryJoO\",\"closeButton\":\"Oj6lWSUo\",\"closeIcon\":\"VPuUZtvp\",\"singleTitle\":\"Sv8Bhg5M\",\"contentCompact\":\"ulAHEr0t\",\"text\":\"FumpDc7T\",\"text_centered\":\"PRVdJNuh\",\"textCentered\":\"PRVdJNuh\",\"text_noExtraMargin\":\"JNEqsMcb\",\"textNoExtraMargin\":\"JNEqsMcb\",\"buttons\":\"PWLeFX8Z\",\"footerButtons\":\"fXtMQ4nZ\",\"footerButtonFullWidth\":\"KMr7BHAz\",\"buttonsInsideContentWithScroll\":\"SCBITBKB\",\"buttonsNoExtraSpace\":\"vyEjC2QK\",\"button\":\"pvjzjt3q\",\"buttonHalfWidth\":\"EhlEYVbZ\",\"buttonFullWidth\":\"zRgM4gqF\",\"shortButton\":\"QFWfMoly\",\"transition\":\"ELmioinr\",\"transitionSlide\":\"OXFBF6TX\",\"transitionContentWrapper\":\"N1r_Lya9\",\"transitionContent\":\"W4ZdBtyi\",\"transitionContent_simple\":\"qGdeWGzL\",\"transitionContentSimple\":\"qGdeWGzL\"};","import type { RefObject } from 'react';\nimport type { BottomSheetKeys } from 'native-bottom-sheet';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  beginHeavyAnimation,\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { ANIMATION_END_DELAY, IS_EXTENSION, IS_TELEGRAM_APP } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { getIsSwipeToCloseDisabled } from '../../util/modalSwipeManager';\nimport { createSignal } from '../../util/signals';\nimport {\n  disableTelegramMiniAppSwipeToClose,\n  enableTelegramMiniAppSwipeToClose,\n} from '../../util/telegram';\nimport trapFocus from '../../util/trapFocus';\nimport { IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport freezeWhenClosed from '../../hooks/freezeWhenClosed';\nimport { getIsForcedFullSize, useDelegatedBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDelegatingBottomSheet } from '../../hooks/useDelegatingBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHideBrowser from '../../hooks/useHideBrowser';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from './Button';\nimport { getInAppBrowser } from './InAppBrowser';\nimport Portal from './Portal';\n\nimport styles from './Modal.module.scss';\n\ntype OwnProps = {\n  title?: string | TeactNode;\n  className?: string;\n  dialogClassName?: string;\n  titleClassName?: string;\n  contentClassName?: string;\n  isOpen?: boolean;\n  isCompact?: boolean;\n  nativeBottomSheetKey?: BottomSheetKeys;\n  forceFullNative?: boolean; // Always open in \"full\" size\n  noResetFullNativeOnBlur?: boolean; // Don't reset \"full\" size on blur\n  forceBottomSheet?: boolean;\n  noBackdrop?: boolean;\n  noBackdropClose?: boolean;\n  header?: any;\n  hasCloseButton?: boolean;\n  children: React.ReactNode;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n  onEnter?: NoneToVoidFunction;\n  dialogRef?: RefObject<HTMLDivElement>;\n};\n\nexport const CLOSE_DURATION = 350;\nexport const CLOSE_DURATION_PORTRAIT = IS_ANDROID ? 200 : 500;\nconst SCROLL_CONTENT_CHECK_THRESHOLD_MS = 500;\n\nconst [getModalCloseSignal, setModalCloseSignal] = createSignal<number>(Date.now());\n\nexport function closeModal() {\n  setModalCloseSignal(Date.now());\n}\n\nfunction Modal({\n  dialogRef,\n  title,\n  className,\n  dialogClassName,\n  titleClassName,\n  contentClassName,\n  isOpen,\n  isCompact,\n  nativeBottomSheetKey,\n  forceFullNative,\n  forceBottomSheet,\n  noResetFullNativeOnBlur,\n  noBackdrop,\n  noBackdropClose,\n  header,\n  hasCloseButton,\n  children,\n  onClose,\n  onCloseAnimationEnd,\n  onEnter,\n}: OwnProps): TeactJsx {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  // eslint-disable-next-line no-null/no-null\n  const localDialogRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const swipeDownDateRef = useRef<number>(null);\n  dialogRef ||= localDialogRef;\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHideBrowser(isOpen, isCompact);\n\n  const animationDuration = (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n\n  const isSlideUp = !isCompact && isPortrait;\n\n  useHistoryBack({ isActive: isOpen, onBack: onClose, shouldIgnoreForTelegram: isCompact });\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || !isOpen || isCompact) return undefined;\n\n    disableTelegramMiniAppSwipeToClose();\n\n    return enableTelegramMiniAppSwipeToClose;\n  }, [isCompact, isOpen]);\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    // Expand NBS to full size for a compact modal inside NBS\n    if (IS_DELEGATED_BOTTOM_SHEET && isCompact && (prevIsOpen || isOpen) && !getIsForcedFullSize()) {\n      void BottomSheet.toggleSelfFullSize({ isFullSize: !!isOpen });\n    }\n  }, [isOpen, isCompact]);\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET || !isOpen) return undefined;\n\n    return getModalCloseSignal.subscribe(onClose);\n  }, [isOpen, onClose]);\n\n  useEffect(\n    () => (isOpen ? captureKeyboardListeners({\n      onEsc: { handler: onClose, shouldPreventDefault: IS_EXTENSION },\n      ...(onEnter && { onEnter }),\n    }) : undefined),\n    [isOpen, onClose, onEnter],\n  );\n  useEffect(() => (isOpen && modalRef.current ? trapFocus(modalRef.current) : undefined), [isOpen]);\n\n  useLayoutEffect(() => (\n    isOpen ? beginHeavyAnimation(animationDuration) : undefined\n  ), [animationDuration, isOpen]);\n\n  // Make sure to hide browser before presenting modals\n  const [isBrowserHidden, setIsBrowserHidden] = useState(false);\n  useEffect(() => {\n    if (!isOpen) {\n      setIsBrowserHidden(false); // Reset to re-hide it next time\n      return;\n    }\n    const browser = getInAppBrowser();\n    void browser?.hide().then(() => {\n      setIsBrowserHidden(true);\n    });\n  }, [isOpen]);\n\n  const isDelegatingToNative = useDelegatingBottomSheet(nativeBottomSheetKey,\n    isPortrait,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose);\n\n  useDelegatedBottomSheet(\n    nativeBottomSheetKey,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose,\n    dialogRef,\n    forceFullNative,\n    noResetFullNativeOnBlur,\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isOpen || !isPortrait || !isSlideUp || IS_DELEGATED_BOTTOM_SHEET || isDelegatingToNative) {\n      return undefined;\n    }\n\n    return captureEvents(modalRef.current!, {\n      excludedClosestSelector: '.capture-scroll',\n      onSwipe: (e: Event, direction: SwipeDirection) => {\n        if (direction === SwipeDirection.Down && getCanCloseModal(swipeDownDateRef, e.target as HTMLElement)) {\n          onClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [isOpen, isPortrait, isSlideUp, isDelegatingToNative, onClose]);\n\n  const { shouldRender, transitionClassNames } = useShowTransition(\n    isOpen && !isDelegatingToNative,\n    onCloseAnimationEnd,\n    undefined,\n    false,\n    undefined,\n    animationDuration,\n  );\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  function renderHeader() {\n    if (header) {\n      return header;\n    }\n\n    if (!title) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.header, styles.header_wideContent, !hasCloseButton && styles.header_noClose)}\n      >\n        <div className={buildClassName(styles.title, styles.singleTitle, titleClassName)}>{title}</div>\n        {hasCloseButton && (\n          <Button isRound className={styles.closeButton} ariaLabel={lang('Close')} onClick={onClose}>\n            <i className={buildClassName(styles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.modal,\n    className,\n    transitionClassNames,\n    isSlideUp && styles.slideUpAnimation,\n    isCompact && styles.compact,\n    isCompact && 'is-compact-modal',\n    forceBottomSheet && styles.forceBottomSheet,\n  );\n\n  const backdropFullClass = buildClassName(styles.backdrop, noBackdrop && styles.noBackdrop);\n\n  const contentFullClassName = buildClassName(\n    styles.content,\n    isCompact && styles.contentCompact,\n    'custom-scroll',\n    contentClassName,\n  );\n\n  return (\n    <Portal>\n      <div ref={modalRef} className={fullClassName} tabIndex={-1} role=\"dialog\">\n        <div className={styles.container}>\n          <div className={backdropFullClass} onClick={!noBackdropClose ? onClose : undefined} />\n          <div\n            className={buildClassName(styles.dialog, dialogClassName)}\n            ref={dialogRef}\n          >\n            {renderHeader()}\n            <div className={contentFullClassName}>{children}</div>\n          </div>\n        </div>\n      </div>\n    </Portal>\n  );\n}\n\nexport default freezeWhenClosed(Modal);\n\nfunction getCanCloseModal(lastScrollRef: { current: number | null }, el?: HTMLElement) {\n  if (windowSize.getIsKeyboardVisible() || getIsSwipeToCloseDisabled()) {\n    return false;\n  }\n\n  const now = Date.now();\n  if (lastScrollRef.current && now - lastScrollRef.current < SCROLL_CONTENT_CHECK_THRESHOLD_MS) {\n    return false;\n  }\n\n  lastScrollRef.current = now;\n  const scrollEl = el?.closest('.custom-scroll');\n\n  return !scrollEl || scrollEl.scrollTop === 0;\n}\n","import { type FC, type Props, useRef } from '../lib/teact/teact';\n\nexport default function freezeWhenClosed<T extends FC>(Component: T) {\n  function ComponentWrapper(props: Props) {\n    const newProps = useRef(props);\n\n    if (props.isOpen) {\n      newProps.current = props;\n    } else {\n      newProps.current = {\n        ...newProps.current,\n        isOpen: false,\n      };\n    }\n\n    return Component(newProps.current);\n  }\n\n  return ComponentWrapper as T;\n}\n","import { BottomSheet } from 'native-bottom-sheet';\n\nimport { IS_CAPACITOR } from '../config';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useSyncEffect from './useSyncEffect';\n\nimport { getInAppBrowser } from '../components/ui/InAppBrowser';\n\nexport default function useHideBrowser(\n  isOpen?: boolean,\n  isCompact?: boolean,\n) {\n  useSyncEffect(() => {\n    if (!IS_CAPACITOR || IS_DELEGATED_BOTTOM_SHEET || isCompact) return;\n\n    const browser = getInAppBrowser();\n    if (!browser) return;\n\n    if (isOpen && browser) {\n      void browser.hide().then(async () => {\n        if (IS_DELEGATING_BOTTOM_SHEET) {\n          await BottomSheet.enable();\n        }\n      });\n    }\n  }, [isCompact, isOpen]);\n}\n","import type { ApiSwapEstimateVariant, ApiToken } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport type { FeePrecision, FeeTerms } from './types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintDivideToNumber, bigintMax } from '../bigint';\nimport { bigMax, bigMin } from '../bigNumber';\nimport { findChainConfig } from '../chain';\nimport { fromDecimal, toBig } from '../decimals';\nimport { getChainBySlug, getIsNativeToken } from '../tokens';\n\ntype ExplainSwapFeeInput = Pick<GlobalState['currentSwap'],\n'tokenInSlug' | 'networkFee' | 'realNetworkFee' | 'ourFee' | 'dieselStatus' | 'dieselFee'\n> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token blockchain's native token. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\nexport type ExplainedSwapFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the swap. The wallet must have it on the balance to conduct the swap.\n   * Show this in the swap form when the input amount is  the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: string;\n  shouldShowOurFee: boolean;\n};\n\ntype MaxSwapAmountInput = Pick<GlobalState['currentSwap'], 'ourFeePercent'> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The full network fee terms calculated by `explainSwapFee`. Undefined means that they're unknown. */\n  fullNetworkFee: FeeTerms<string> | undefined;\n};\n\ntype BalanceSufficientForSwapInput = MaxSwapAmountInput & {\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n  /** The \"in\" amount to swap. Undefined means that it's unspecified. */\n  amountIn: string | undefined;\n};\n\ntype CanAffordSwapVariant = {\n  variant: ApiSwapEstimateVariant;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\n/**\n * Converts the swap fee data returned from API into data that is ready to be displayed in the swap form UI.\n */\nexport function explainSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  return shouldSwapBeGasless(input)\n    ? explainGaslessSwapFee(input)\n    : explainGasfullSwapFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the swap.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxSwapAmount({\n  swapType,\n  tokenInBalance,\n  tokenIn,\n  fullNetworkFee,\n  ourFeePercent,\n}: MaxSwapAmountInput): bigint | undefined {\n  if (swapType === SwapType.CrosschainToWallet || tokenInBalance === undefined) {\n    return undefined;\n  }\n\n  let maxAmount = tokenInBalance;\n\n  // For a better UX, assuming the fee is 0 when it's unknown\n  if (fullNetworkFee) {\n    if (!tokenIn) {\n      return undefined;\n    }\n\n    maxAmount -= fromDecimal(fullNetworkFee.token ?? '0', tokenIn.decimals);\n\n    if (getIsNativeToken(tokenIn.slug)) {\n      // When the \"in\" token is native, both `token` and `native` refer to the same currency, so we consider them both\n      maxAmount -= fromDecimal(fullNetworkFee.native ?? '0', tokenIn.decimals);\n    }\n  }\n\n  ourFeePercent ??= swapType === SwapType.OnChain ? DEFAULT_OUR_SWAP_FEE : 0;\n  maxAmount = bigintDivideToNumber(maxAmount, 1 + (ourFeePercent / 100));\n\n  return bigintMax(maxAmount, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to swap the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForSwap(input: BalanceSufficientForSwapInput) {\n  const {\n    swapType,\n    amountIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n    tokenIn,\n    fullNetworkFee,\n  } = input;\n\n  if (swapType === SwapType.CrosschainToWallet) {\n    return true;\n  }\n\n  if (\n    amountIn === undefined\n    || !tokenIn\n    || tokenInBalance === undefined\n    || nativeTokenInBalance === undefined\n    || !fullNetworkFee\n  ) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  const maxAmount = getMaxSwapAmount(input);\n  if (maxAmount === undefined) {\n    return undefined;\n  }\n\n  const swapAmountInBigint = fromDecimal(amountIn, tokenIn.decimals);\n  const networkNativeFeeBigint = fromDecimal(fullNetworkFee.native ?? '0', nativeTokenIn.decimals);\n\n  return swapAmountInBigint <= maxAmount && networkNativeFeeBigint <= nativeTokenInBalance;\n}\n\n/**\n * Decides whether the balance is sufficient for the given swap estimate variant (DEX).\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function canAffordSwapEstimateVariant(input: CanAffordSwapVariant) {\n  if (!input.tokenIn || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(input.tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  // Try to pay with gas\n  const networkFeeBigint = fromDecimal(input.variant.networkFee, nativeTokenIn.decimals);\n  if (input.nativeTokenInBalance >= networkFeeBigint) {\n    return true;\n  }\n\n  // Otherwise, try to pay with diesel\n  if (input.variant.dieselFee) {\n    if (input.tokenInBalance === undefined) {\n      return undefined;\n    }\n    const dieselFeeBigint = fromDecimal(input.variant.dieselFee, input.tokenIn.decimals);\n    if (input.tokenInBalance >= dieselFeeBigint) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function shouldSwapBeGasless(\n  input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance' | 'networkFee' | 'dieselStatus' | 'swapType'>,\n) {\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const isInsufficientNative = input.networkFee !== undefined && nativeTokenBalance !== undefined\n    && nativeTokenBalance.lt(input.networkFee);\n\n  return (\n    input.swapType === SwapType.OnChain\n    && isInsufficientNative\n    && !isNativeIn\n    && Boolean(input.dieselStatus) && input.dieselStatus !== 'not-available'\n  );\n}\n\n/**\n * Converts the data of a swap not involving diesel\n */\nfunction explainGasfullSwapFee(input: ExplainSwapFeeInput) {\n  const result: ExplainedSwapFee = {\n    isGasless: false,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const isExact = result.excessFee === '0';\n\n  if (input.networkFee !== undefined) {\n    const networkTerms = { native: input.networkFee };\n    result.fullFee = {\n      precision: isExact ? 'exact' : 'lessThan',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realNetworkFee !== undefined) {\n    const networkTerms = { native: input.realNetworkFee };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel swap data\n */\nfunction explainGaslessSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const result: ExplainedSwapFee = {\n    isGasless: true,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  if (input.networkFee === undefined || input.dieselFee === undefined || nativeTokenBalance === undefined) {\n    return result;\n  }\n\n  const isExact = result.excessFee === '0';\n  const isStarsDiesel = input.dieselStatus === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n\n  const networkTerms = {\n    [dieselKey]: input.dieselFee,\n    native: nativeTokenBalance.toString(),\n  };\n  result.fullFee = {\n    precision: isExact ? 'exact' : 'lessThan',\n    terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', false),\n    networkTerms,\n  };\n  result.realFee = result.fullFee;\n\n  if (input.realNetworkFee !== undefined) {\n    // We are sure this amount is > 0 because `shouldBeGasless` would return `false` otherwise and this function\n    // wouldn't be called.\n    const networkFeeCoveredByDiesel = Big(input.networkFee).sub(nativeTokenBalance);\n    const realFeeInDiesel = Big(input.dieselFee).div(networkFeeCoveredByDiesel).mul(input.realNetworkFee);\n    // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n    const dieselRealFee = bigMin(input.dieselFee, realFeeInDiesel);\n    // Cover the remaining real fee with the native token.\n    const nativeRealFee = bigMax(0, Big(input.realNetworkFee).sub(networkFeeCoveredByDiesel));\n\n    const realNetworkTerms = {\n      [dieselKey]: dieselRealFee.toString(),\n      native: nativeRealFee.toString(),\n    };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(realNetworkTerms, input.ourFee ?? '0', false),\n      networkTerms: realNetworkTerms,\n    };\n  }\n\n  return result;\n}\n\nfunction getBigNativeTokenInBalance(input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance'>) {\n  if (!input.tokenInSlug || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeToken = findChainConfig(getChainBySlug(input.tokenInSlug))?.nativeToken;\n  return nativeToken ? toBig(input.nativeTokenInBalance, nativeToken.decimals) : undefined;\n}\n\nfunction getExcessFee({ networkFee, realNetworkFee }: Pick<ExplainSwapFeeInput, 'networkFee' | 'realNetworkFee'>) {\n  return networkFee !== undefined && realNetworkFee !== undefined\n    ? Big(networkFee).sub(realNetworkFee).toString()\n    : undefined;\n}\n\nfunction addOurFeeToTerms(terms: FeeTerms<string>, ourFee: string, isOurFeeNative: boolean) {\n  return {\n    ...terms,\n    native: isOurFeeNative ? Big(terms.native ?? '0').add(ourFee).toString() : terms.native,\n    token: isOurFeeNative ? terms.token : Big(terms.token ?? '0').add(ourFee).toString(),\n  };\n}\n\nfunction shouldShowOurFee(input: Pick<ExplainSwapFeeInput, 'swapType'>) {\n  return input.swapType === SwapType.OnChain;\n}\n","import type { BigSource } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function bigMin<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).lt(value1) ? value0 : value1;\n}\n\nexport function bigMax<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).gt(value1) ? value0 : value1;\n}\n","import { DappConnectState, TransferState } from '../../types';\n\nimport { ANIMATION_END_DELAY, IS_CAPACITOR } from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInMain } from '../../../util/multitab';\nimport { pause, waitFor } from '../../../util/schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  ApiHardwareBlindSigningNotEnabled,\n  ApiUnsupportedVersionError,\n  ApiUserRejectsError,\n} from '../../../api/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearConnectedDapps,\n  clearCurrentDappTransfer,\n  clearDappConnectRequest,\n  clearIsPinAccepted,\n  removeConnectedDapp,\n  setIsPinAccepted,\n  updateConnectedDapps,\n  updateCurrentAccountId,\n  updateCurrentDappTransfer,\n  updateDappConnectRequest,\n} from '../../reducers';\nimport { selectIsHardwareAccount, selectNewestActivityTimestamps } from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../../components/ui/Modal';\n\nconst GET_DAPPS_PAUSE = 250;\n\naddActionHandler('submitDappConnectRequestConfirm', async (global, actions, { password, accountId }) => {\n  const {\n    promiseId, permissions,\n  } = global.dappConnectRequest!;\n\n  if (permissions?.isPasswordRequired && (!password || !(await callApi('verifyPassword', password)))) {\n    global = getGlobal();\n    global = updateDappConnectRequest(global, { error: 'Wrong password, please try again.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = getGlobal();\n    global = setIsPinAccepted(global);\n    setGlobal(global);\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitDappConnectRequestConfirm', { password, accountId });\n\n    return;\n  }\n\n  void vibrateOnSuccess();\n  actions.switchAccount({ accountId });\n  await callApi('confirmDappRequestConnect', promiseId!, {\n    accountId,\n    password,\n  });\n\n  global = getGlobal();\n  if (IS_CAPACITOR) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  await pause(GET_DAPPS_PAUSE);\n  actions.getDapps();\n});\n\naddActionHandler(\n  'submitDappConnectRequestConfirmHardware',\n  async (global, actions, { accountId: connectAccountId }) => {\n    const { proof } = global.dappConnectRequest!;\n\n    global = getGlobal();\n    global = updateDappConnectRequest(global, {\n      error: undefined,\n      state: DappConnectState.ConfirmHardware,\n    });\n    setGlobal(global);\n\n    const ledgerApi = await import('../../../util/ledger');\n\n    try {\n      const signature = await ledgerApi.signLedgerProof(connectAccountId!, proof!);\n      if (IS_DELEGATED_BOTTOM_SHEET) {\n        callActionInMain('submitDappConnectHardware', { accountId: connectAccountId, signature });\n\n        return;\n      }\n\n      actions.submitDappConnectHardware({ accountId: connectAccountId, signature });\n    } catch (err) {\n      setGlobal(updateDappConnectRequest(getGlobal(), {\n        error: 'Canceled by the user',\n      }));\n    }\n  },\n);\n\naddActionHandler('submitDappConnectHardware', async (global, actions, { accountId, signature }) => {\n  const { promiseId } = global.dappConnectRequest!;\n\n  actions.switchAccount({ accountId });\n  await callApi('confirmDappRequestConnect', promiseId!, { accountId, signature });\n\n  global = getGlobal();\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  await pause(GET_DAPPS_PAUSE);\n  actions.getDapps();\n});\n\naddActionHandler('cancelDappConnectRequestConfirm', (global) => {\n  const { promiseId } = global.dappConnectRequest || {};\n  if (!promiseId) {\n    return;\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('cancelDappConnectRequestConfirm');\n  } else {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n});\n\naddActionHandler('setDappConnectRequestState', (global, actions, { state }) => {\n  setGlobal(updateDappConnectRequest(global, { state }));\n});\n\naddActionHandler('cancelDappTransfer', (global) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('cancelDappTransfer');\n  } else if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('closeDappTransfer', (global) => {\n  global = updateCurrentDappTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferPassword', async (global, actions, { password }) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateCurrentDappTransfer(global, {\n      error: 'Wrong password, please try again.',\n    });\n    setGlobal(global);\n\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = getGlobal();\n    global = setIsPinAccepted(global);\n    setGlobal(global);\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitDappTransferPassword', { password });\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDappTransfer(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  void callApi('confirmDappRequest', promiseId, password);\n\n  global = getGlobal();\n  if (IS_CAPACITOR) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferHardware', async (global, actions) => {\n  const { promiseId, transactions, vestingAddress } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDappTransfer(global, {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n  const ledgerApi = await import('../../../util/ledger');\n\n  try {\n    const signedMessages = await ledgerApi.signLedgerTransactions(accountId, transactions!, {\n      isTonConnect: true,\n      vestingAddress,\n    });\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      callActionInMain('submitDappTransferHardware2', { signedMessages });\n\n      return;\n    }\n\n    actions.submitDappTransferHardware2({ signedMessages });\n  } catch (err) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentDappTransfer(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled',\n      }));\n      return;\n    } else if (err instanceof ApiUnsupportedVersionError) {\n      actions.showError({\n        error: '$ledger_unsupported_ton_connect',\n      });\n      void callApi('cancelDappRequest', promiseId, err.message);\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentDappTransfer(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    } else {\n      void callApi('cancelDappRequest', promiseId, 'Unknown error.');\n    }\n\n    global = getGlobal();\n    global = clearCurrentDappTransfer(global);\n    setGlobal(global);\n  }\n});\n\naddActionHandler('submitDappTransferHardware2', (global, actions, { signedMessages }) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  void callApi('confirmDappRequest', promiseId, signedMessages);\n\n  global = getGlobal();\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('getDapps', async (global, actions) => {\n  const { currentAccountId } = global;\n\n  let result = await callApi('getDapps', currentAccountId!);\n\n  if (!result) {\n    return;\n  }\n\n  // Check for broken dapps without origin\n  const brokenDapp = result.find(({ origin }) => !origin);\n  if (brokenDapp) {\n    actions.deleteDapp({ origin: brokenDapp.origin });\n    result = result.filter(({ origin }) => origin);\n  }\n\n  global = getGlobal();\n  global = updateConnectedDapps(global, result);\n  setGlobal(global);\n});\n\naddActionHandler('deleteAllDapps', (global) => {\n  const { currentAccountId } = global;\n\n  void callApi('deleteAllDapps', currentAccountId!);\n\n  global = getGlobal();\n  global = clearConnectedDapps(global);\n  setGlobal(global);\n});\n\naddActionHandler('deleteDapp', (global, actions, { origin }) => {\n  const { currentAccountId } = global;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('deleteDapp', { origin });\n  } else {\n    void callApi('deleteDapp', currentAccountId!, origin);\n  }\n\n  global = getGlobal();\n  global = removeConnectedDapp(global, origin);\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappConnect', async (global, actions, {\n  accountId, dapp, permissions, promiseId, proof,\n}) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => Boolean(getGlobal().dappConnectRequest), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  global = updateDappConnectRequest(global, {\n    state: DappConnectState.Info,\n    promiseId,\n    accountId,\n    dapp,\n    permissions: {\n      isAddressRequired: permissions.address,\n      isPasswordRequired: permissions.proof,\n    },\n    proof,\n  });\n  setGlobal(global);\n\n  actions.addSiteToBrowserHistory({ url: dapp.url });\n});\n\naddActionHandler('apiUpdateDappSendTransaction', async (global, actions, {\n  promiseId,\n  transactions,\n  accountId,\n  dapp,\n  vestingAddress,\n}) => {\n  const { currentAccountId, currentDappTransfer: { promiseId: currentPromiseId } } = global;\n  if (currentAccountId !== accountId) {\n    const nextNewestActivityTimestamps = selectNewestActivityTimestamps(global, accountId);\n    await callApi('activateAccount', accountId, nextNewestActivityTimestamps);\n\n    global = getGlobal();\n    setGlobal(updateCurrentAccountId(global, accountId));\n  }\n\n  if (currentPromiseId && !IS_DELEGATED_BOTTOM_SHEET) {\n    actions.closeDappTransfer();\n    const closeDuration = getIsPortrait() ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION;\n    await pause(closeDuration + ANIMATION_END_DELAY);\n  }\n\n  // We only need to apply changes in NBS when Dapp Transaction Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => getGlobal().currentDappTransfer.state !== TransferState.None, 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  const state = selectIsHardwareAccount(global) && transactions.length > 1\n    ? TransferState.WarningHardware\n    : TransferState.Initial;\n\n  global = getGlobal();\n  global = clearCurrentDappTransfer(global);\n  global = updateCurrentDappTransfer(global, {\n    state,\n    promiseId,\n    transactions,\n    dapp,\n    vestingAddress,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappLoading', async (global, actions, { connectionType, isSse, accountId }) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => {\n      global = getGlobal();\n      return (connectionType === 'connect' && !!global.dappConnectRequest)\n        || (connectionType === 'sendTransaction' && global.currentDappTransfer.state !== TransferState.None);\n    }, 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && accountId && accountId !== global.currentAccountId) {\n    actions.switchAccount({ accountId });\n  }\n\n  if (connectionType === 'connect') {\n    global = updateDappConnectRequest(global, {\n      state: DappConnectState.Info,\n      isSse,\n    });\n  } else if (connectionType === 'sendTransaction') {\n    global = updateCurrentDappTransfer(global, {\n      state: TransferState.Initial,\n      isSse,\n    });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappCloseLoading', async (global) => {\n  // We only need to apply changes in NBS when Dapp Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => {\n      global = getGlobal();\n      return (Boolean(global.dappConnectRequest) || global.currentDappTransfer.state !== TransferState.None);\n    }, 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  // But clear the state if a skeleton is displayed in the Modal\n  if (global.dappConnectRequest?.state === DappConnectState.Info) {\n    global = clearDappConnectRequest(global);\n  } else if (global.currentDappTransfer.state === TransferState.Initial) {\n    global = clearCurrentDappTransfer(global);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('loadExploreSites', async (global, _, { isLandscape }) => {\n  const exploreData = await callApi('loadExploreSites', { isLandscape });\n  global = getGlobal();\n  if (areDeepEqual(exploreData, global.exploreData)) {\n    return;\n  }\n\n  global = { ...global, exploreData };\n  setGlobal(global);\n});\n","import type { ApiCheckTransactionDraftResult, ApiSubmitTransferWithDieselResult } from '../../../api/chains/ton/types';\nimport type { ApiSubmitTransferOptions, ApiSubmitTransferResult } from '../../../api/methods/types';\nimport type {\n  ApiChain,\n  ApiSwapActivity,\n  ApiSwapBuildRequest,\n  ApiSwapCexCreateTransactionRequest,\n  ApiSwapDexLabel,\n  ApiSwapEstimateResponse,\n  ApiSwapEstimateVariant,\n  ApiSwapHistoryItem,\n  ApiSwapPairAsset,\n} from '../../../api/types';\nimport type {\n  AssetPairs,\n  GlobalState,\n} from '../../types';\nimport { ApiCommonError } from '../../../api/types';\nimport {\n  ActiveTab,\n  SwapErrorType,\n  SwapInputSource,\n  SwapState,\n  SwapType,\n} from '../../types';\n\nimport {\n  DEFAULT_SWAP_FISRT_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n  TRX_SWAP_COUNT_FEE_ADDRESS,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { buildLocalTxId, parseTxId } from '../../../util/activities';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { findChainConfig, getChainConfig } from '../../../util/chain';\nimport { fromDecimal, roundDecimal, toDecimal } from '../../../util/decimals';\nimport { canAffordSwapEstimateVariant, shouldSwapBeGasless } from '../../../util/fee/swapFee';\nimport generateUniqueId from '../../../util/generateUniqueId';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { buildCollectionByKey, pick } from '../../../util/iteratees';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { pause } from '../../../util/schedulers';\nimport { getChainBySlug, getIsTonToken, getNativeToken } from '../../../util/tokens';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../..';\nimport { resolveSwapAssetId } from '../../helpers';\nimport {\n  getSwapEstimateResetParams,\n  isSwapEstimateInputEqual,\n  isSwapFormFilled,\n  shouldAvoidSwapEstimation,\n} from '../../helpers/swap';\nimport {\n  clearCurrentSwap,\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateAccountState,\n  updateCurrentSwap,\n} from '../../reducers';\nimport {\n  selectAccount,\n  selectAccountState,\n  selectCurrentAccount,\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectCurrentToncoinBalance,\n  selectIsMultichainAccount,\n  selectSwapType,\n} from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nlet pairsCache: Record<string, { data: ApiSwapPairAsset[]; timestamp: number }> = {};\n\nconst CACHE_DURATION = 15 * 60 * 1000; // 15 minutes\nconst WAIT_FOR_CHANGELLY = 5 * 1000;\nconst CLOSING_BOTTOM_SHEET_DURATION = 100; // Like in `useDelegatingBottomSheet`\n\nconst SERVER_ERRORS_MAP = {\n  'Insufficient liquidity': SwapErrorType.NotEnoughLiquidity,\n  'Tokens must be different': SwapErrorType.InvalidPair,\n  'Asset not found': SwapErrorType.InvalidPair,\n  'Pair not found': SwapErrorType.InvalidPair,\n  'Too small amount': SwapErrorType.TooSmallAmount,\n};\n\nfunction buildSwapBuildRequest(global: GlobalState): ApiSwapBuildRequest {\n  const {\n    currentDexLabel,\n    amountIn,\n    amountOut,\n    amountOutMin,\n    slippage,\n    networkFee,\n    swapFee,\n    ourFee,\n    dieselFee,\n    realNetworkFee,\n  } = global.currentSwap;\n\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  const tokenOut = selectCurrentSwapTokenOut(global)!;\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = amountIn!;\n  const toAmount = amountOut!;\n  const account = selectAccount(global, global.currentAccountId!);\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  const nativeTokenInBalance = nativeTokenIn ? selectCurrentAccountTokenBalance(global, nativeTokenIn.slug) : undefined;\n  const swapType = selectSwapType(global);\n\n  return {\n    from,\n    to,\n    fromAmount,\n    toAmount,\n    toMinAmount: amountOutMin!,\n    slippage,\n    fromAddress: account?.addressByChain[tokenIn.chain as ApiChain] || account?.addressByChain.ton!,\n    shouldTryDiesel: shouldSwapBeGasless({ ...global.currentSwap, swapType, nativeTokenInBalance }),\n    dexLabel: currentDexLabel!,\n    networkFee: realNetworkFee ?? networkFee!,\n    swapFee: swapFee!,\n    ourFee: ourFee!,\n    dieselFee,\n  };\n}\n\nfunction buildSwapEstimates(estimate: ApiSwapEstimateResponse): ApiSwapEstimateVariant[] {\n  const bestEstimate: ApiSwapEstimateVariant = {\n    ...pick(estimate, [\n      'fromAmount',\n      'toAmount',\n      'toMinAmount',\n      'impact',\n      'dexLabel',\n      'networkFee',\n      'realNetworkFee',\n      'swapFee',\n      'swapFeePercent',\n      'ourFee',\n      'dieselFee',\n      'networkFee',\n    ]),\n  };\n\n  const result: ApiSwapEstimateVariant[] = [\n    bestEstimate,\n    ...(estimate.other ?? []),\n  ];\n\n  return result.sort((a, b) => a.dexLabel.localeCompare(b.dexLabel));\n}\n\nfunction processNativeMaxSwap(global: GlobalState) {\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  let fromAmount = global.currentSwap.amountIn ?? '0';\n  let isFromAmountMax = false;\n\n  if (\n    global.currentSwap.amountIn\n    && selectSwapType(global) === SwapType.OnChain\n    && global.currentSwap.inputSource === SwapInputSource.In\n    && global.currentSwap.isMaxAmount\n  ) {\n    const tokenBalance = selectCurrentAccountTokenBalance(global, tokenIn.slug);\n    fromAmount = toDecimal(tokenBalance, tokenIn.decimals);\n    isFromAmountMax = true;\n  }\n  return { fromAmount, isFromAmountMax };\n}\n\nfunction getSupportedChains(global: GlobalState) {\n  return Object.keys(selectAccount(global, global.currentAccountId!)?.addressByChain || { ton: true }) as ApiChain[];\n}\n\naddActionHandler('startSwap', async (global, actions, payload) => {\n  const isOpen = global.currentSwap.state !== SwapState.None;\n  if (IS_DELEGATING_BOTTOM_SHEET && isOpen) {\n    callActionInNative('cancelSwap');\n    await pause(CLOSING_BOTTOM_SHEET_DURATION);\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startSwap', payload);\n    return;\n  }\n\n  const { state } = payload ?? {};\n  const isPortrait = getIsPortrait();\n\n  const requiredState = state || (isPortrait ? SwapState.Initial : SwapState.None);\n\n  global = updateCurrentSwap(global, {\n    ...payload,\n    state: requiredState,\n    swapId: generateUniqueId(),\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Swap });\n  }\n});\n\naddActionHandler('setDefaultSwapParams', (global, actions, payload) => {\n  let { tokenInSlug: requiredTokenInSlug, tokenOutSlug: requiredTokenOutSlug } = payload ?? {};\n  const { withResetAmount } = payload ?? {};\n\n  requiredTokenInSlug = requiredTokenInSlug || DEFAULT_SWAP_FISRT_TOKEN_SLUG;\n  requiredTokenOutSlug = requiredTokenOutSlug || DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n  if (\n    global.currentSwap.tokenInSlug === requiredTokenInSlug\n    && global.currentSwap.tokenOutSlug === requiredTokenOutSlug\n    && !withResetAmount\n  ) {\n    return;\n  }\n\n  global = updateCurrentSwap(global, {\n    tokenInSlug: requiredTokenInSlug,\n    tokenOutSlug: requiredTokenOutSlug,\n    inputSource: SwapInputSource.In,\n    ...(withResetAmount ? { amountIn: undefined, amountOut: undefined } : undefined),\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelSwap', (global, actions, { shouldReset } = {}) => {\n  if (shouldReset) {\n    const { tokenInSlug, tokenOutSlug, pairs } = global.currentSwap;\n\n    global = clearCurrentSwap(global);\n    global = updateCurrentSwap(global, {\n      tokenInSlug,\n      tokenOutSlug,\n      amountIn: undefined,\n      amountOut: undefined,\n      inputSource: SwapInputSource.In,\n      pairs,\n    });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentSwap(global, {\n    state: SwapState.None,\n    swapId: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitSwap', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSwap(\n      getGlobal(),\n      { error: 'Wrong password, please try again.' },\n    ));\n\n    return;\n  }\n\n  global = getGlobal();\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  global = updateCurrentSwap(global, {\n    isLoading: true,\n    shouldResetOnClose: undefined,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const buildResult = await callApi(\n    'swapBuildTransfer', global.currentAccountId!, password, swapBuildRequest,\n  );\n  global = getGlobal();\n\n  if (!buildResult || 'error' in buildResult) {\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n    void vibrateOnError();\n    global = updateCurrentSwap(global, {\n      shouldResetOnClose: true,\n      isLoading: false,\n    });\n    setGlobal(global);\n\n    actions.showError({ error: buildResult?.error });\n\n    return;\n  }\n\n  const swapHistoryItem: ApiSwapHistoryItem = {\n    id: buildResult.id,\n    timestamp: Date.now(),\n    status: 'pending',\n    from: swapBuildRequest.from,\n    fromAmount: swapBuildRequest.fromAmount,\n    to: swapBuildRequest.to,\n    toAmount: swapBuildRequest.toAmount,\n    networkFee: global.currentSwap.realNetworkFee ?? global.currentSwap.networkFee!,\n    swapFee: global.currentSwap.swapFee!,\n    ourFee: global.currentSwap.ourFee,\n    hashes: [],\n  };\n\n  global = updateCurrentSwap(global, {\n    tokenInSlug: undefined,\n    tokenOutSlug: undefined,\n    amountIn: undefined,\n    amountOut: undefined,\n    isLoading: false,\n    state: SwapState.Complete,\n    shouldResetOnClose: true,\n  });\n  setGlobal(global);\n  void vibrateOnSuccess();\n\n  const result = await callApi(\n    'swapSubmit',\n    global.currentAccountId!,\n    password,\n    buildResult.transfers,\n    swapHistoryItem,\n    swapBuildRequest.shouldTryDiesel,\n  );\n\n  if (!result || 'error' in result) {\n    global = getGlobal();\n    global = updateCurrentSwap(global, { shouldResetOnClose: true });\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n\n    setGlobal(global);\n    void vibrateOnError();\n\n    actions.showError({ error: result?.error });\n  } else {\n    global = getGlobal();\n    global = updateCurrentSwap(global, {\n      activityId: buildLocalTxId(result.msgHash),\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('submitSwapCex', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSwap(\n      getGlobal(),\n      { error: 'Wrong password, please try again.' },\n    ));\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentSwap(global, {\n    isLoading: true,\n    error: undefined,\n    shouldResetOnClose: undefined,\n  });\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  global = getGlobal();\n\n  const isMutlichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n  const account = selectCurrentAccount(global);\n  const supportedChains = getSupportedChains(global);\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n  const shouldSendTonTransaction = tokenIn.chain === 'ton';\n  const shouldSendTronTransaction = isMutlichainAccount && tokenIn.chain === 'tron';\n  const shouldSendTransaction = shouldSendTonTransaction || shouldSendTronTransaction;\n  const shouldSendTokenToExternalWallet = isMutlichainAccount\n    ? supportedChains.includes(tokenIn.chain as ApiChain)\n    : tokenIn.chain === 'ton';\n\n  const tonAddress = account!.addressByChain.ton;\n  const toAddress = account?.addressByChain[tokenOut.chain as ApiChain] ?? global.currentSwap.toAddress!;\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const swapTransactionRequest: ApiSwapCexCreateTransactionRequest = {\n    ...pick(swapBuildRequest, ['from', 'fromAmount', 'to', 'swapFee', 'networkFee']),\n    fromAddress: tonAddress,\n    toAddress,\n  };\n\n  const swapItem = await callApi(\n    'swapCexCreateTransaction',\n    global.currentAccountId!,\n    password,\n    swapTransactionRequest,\n  );\n\n  global = getGlobal();\n\n  if (!swapItem) {\n    global = updateCurrentSwap(global, {\n      isLoading: false,\n      shouldResetOnClose: true,\n    });\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n    void vibrateOnError();\n    setGlobal(global);\n\n    actions.showError({ error: ApiCommonError.Unexpected });\n\n    return;\n  }\n\n  global = updateCurrentSwap(global, {\n    isLoading: false,\n    state: shouldSendTokenToExternalWallet ? SwapState.Complete : SwapState.WaitTokens,\n    activityId: swapItem.activity.id,\n    payinAddress: swapItem.swap.cex!.payinAddress,\n    payoutAddress: swapItem.swap.cex!.payoutAddress,\n    payinExtraId: swapItem.swap.cex!.payinExtraId,\n    shouldResetOnClose: true,\n  });\n  setGlobal(global);\n  void vibrateOnSuccess();\n\n  if (shouldSendTransaction) {\n    global = getGlobal();\n    const transferOptions: ApiSubmitTransferOptions = {\n      password,\n      accountId: global.currentAccountId!,\n      fee: fromDecimal(swapItem.swap.networkFee, tokenIn.decimals),\n      amount: fromDecimal(swapItem.swap.fromAmount, tokenIn.decimals),\n      toAddress: swapItem.swap.cex!.payinAddress,\n      tokenAddress: isMutlichainAccount ? tokenIn.tokenAddress : undefined,\n    };\n\n    await pause(WAIT_FOR_CHANGELLY);\n\n    let transferResult: ((ApiSubmitTransferResult | ApiSubmitTransferWithDieselResult) & { txId?: string }) | undefined;\n\n    if (shouldSendTonTransaction) {\n      transferResult = await callApi('swapCexSubmit', 'ton', transferOptions, swapItem.swap.id);\n    } else if (shouldSendTronTransaction) {\n      transferResult = await callApi('swapCexSubmit', 'tron', transferOptions, swapItem.swap.id);\n    }\n\n    if (!transferResult || 'error' in transferResult) {\n      global = getGlobal();\n      global = updateCurrentSwap(global, { shouldResetOnClose: true });\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n\n      setGlobal(global);\n      void vibrateOnError();\n      actions.showError({ error: transferResult?.error });\n    }\n  }\n});\n\naddActionHandler('switchSwapTokens', (global) => {\n  const {\n    tokenInSlug, tokenOutSlug, amountIn, amountOut,\n  } = global.currentSwap;\n\n  global = updateCurrentSwap(global, {\n    isMaxAmount: false,\n    amountIn: amountOut,\n    amountOut: amountIn,\n    tokenInSlug: tokenOutSlug,\n    tokenOutSlug: tokenInSlug,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenIn', (global, actions, { tokenSlug: newTokenInSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenIn = global.swapTokenInfo!.bySlug[newTokenInSlug];\n  const adjustedAmountIn = amountIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  // Don't set the same token in both inputs\n  const newTokenOutSlug = newTokenInSlug === tokenOutSlug ? tokenInSlug : tokenOutSlug;\n  const newTokenOut = newTokenOutSlug ? global.swapTokenInfo!.bySlug[newTokenOutSlug] : undefined;\n  const adjustedAmountOut = amountOut && newTokenOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  global = updateCurrentSwap(global, {\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    tokenInSlug: newTokenInSlug,\n    tokenOutSlug: newTokenOutSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenOut', (global, actions, { tokenSlug: newTokenOutSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenOut = global.swapTokenInfo!.bySlug[newTokenOutSlug!];\n  const adjustedAmountOut = amountOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  // Don't set the same token in both inputs\n  const newTokenInSlug = newTokenOutSlug === tokenInSlug ? tokenOutSlug : tokenInSlug;\n  const newTokenIn = newTokenInSlug ? global.swapTokenInfo!.bySlug[newTokenInSlug] : undefined;\n  const adjustedAmountIn = amountIn && newTokenIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  global = updateCurrentSwap(global, {\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    tokenOutSlug: newTokenOutSlug,\n    tokenInSlug: newTokenInSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountIn', (global, actions, { amount, isMaxAmount = false }) => {\n  global = updateCurrentSwap(global, {\n    amountIn: amount,\n    isMaxAmount,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountOut', (global, actions, { amount }) => {\n  global = updateCurrentSwap(global, {\n    amountOut: amount,\n    isMaxAmount: false,\n    inputSource: SwapInputSource.Out,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSlippage', (global, actions, { slippage }) => {\n  return updateCurrentSwap(global, { slippage });\n});\n\naddActionHandler('estimateSwap', async () => {\n  await estimateSwapConcurrently((global, shouldStop) => {\n    if (!isSwapFormFilled(global)) {\n      return getSwapEstimateResetParams(global);\n    }\n\n    const pairsBySlug = global.currentSwap.pairs?.bySlug ?? {};\n    const isPairValid = global.currentSwap.tokenOutSlug! in pairsBySlug;\n    if (!isPairValid) {\n      return {\n        ...getSwapEstimateResetParams(global),\n        errorType: SwapErrorType.InvalidPair,\n      };\n    }\n\n    if (selectSwapType(global) === SwapType.OnChain) {\n      return estimateDexSwap(global);\n    } else {\n      return estimateCexSwap(global, shouldStop);\n    }\n  });\n});\n\nasync function estimateDexSwap(global: GlobalState): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo!.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo!.bySlug[global.currentSwap.tokenOutSlug!];\n  const nativeTokenIn = getChainConfig(getChainBySlug(tokenIn.slug)).nativeToken;\n\n  const from = tokenIn.slug === TONCOIN.slug ? tokenIn.symbol : tokenIn.tokenAddress!;\n  const to = tokenOut.slug === TONCOIN.slug ? tokenOut.symbol : tokenOut.tokenAddress!;\n  const { fromAmount, isFromAmountMax } = processNativeMaxSwap(global);\n  const toAmount = global.currentSwap.amountOut ?? '0';\n  const fromAddress = selectCurrentAccount(global)!.addressByChain.ton;\n\n  const estimateAmount = global.currentSwap.inputSource === SwapInputSource.In ? { fromAmount } : { toAmount };\n\n  const toncoinBalance = selectCurrentToncoinBalance(global);\n  const shouldTryDiesel = toncoinBalance < fromDecimal(global.currentSwap.networkFee ?? '0', nativeTokenIn.decimals);\n\n  const estimate = await callApi('swapEstimate', global.currentAccountId!, {\n    ...estimateAmount,\n    from,\n    to,\n    slippage: global.currentSwap.slippage,\n    fromAddress,\n    shouldTryDiesel,\n    isFromAmountMax,\n    toncoinBalance: toDecimal(toncoinBalance ?? 0n, TONCOIN.decimals),\n  });\n\n  global = getGlobal();\n\n  if (!estimate || 'error' in estimate) {\n    const errorType = SERVER_ERRORS_MAP[estimate?.error as keyof typeof SERVER_ERRORS_MAP]\n      ?? SwapErrorType.UnexpectedError;\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType,\n    };\n  }\n\n  const errorType = estimate.toAmount === '0' && shouldTryDiesel\n    ? SwapErrorType.NotEnoughForFee\n    : undefined;\n\n  const estimates = buildSwapEstimates(estimate);\n  const currentEstimate = chooseSwapEstimate(global, estimates, estimate.dexLabel);\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    ...(global.currentSwap.inputSource === SwapInputSource.In\n      ? { amountOut: currentEstimate.toAmount }\n      : { amountIn: currentEstimate.fromAmount }\n    ),\n    ...(isFromAmountMax ? { amountIn: currentEstimate.fromAmount } : undefined),\n    bestRateDexLabel: estimate.dexLabel,\n    amountOutMin: currentEstimate.toMinAmount,\n    priceImpact: currentEstimate.impact,\n    errorType,\n    dieselStatus: estimate.dieselStatus,\n    estimates,\n    currentDexLabel: currentEstimate.dexLabel,\n    // Fees\n    networkFee: currentEstimate.networkFee,\n    realNetworkFee: currentEstimate.realNetworkFee,\n    swapFee: currentEstimate.swapFee,\n    swapFeePercent: currentEstimate.swapFeePercent,\n    ourFee: currentEstimate.ourFee,\n    ourFeePercent: estimate.ourFeePercent,\n    dieselFee: currentEstimate.dieselFee,\n  };\n}\n\nasync function estimateCexSwap(global: GlobalState, shouldStop: () => boolean): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo!.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo!.bySlug[global.currentSwap.tokenOutSlug!];\n\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = global.currentSwap.amountIn ?? '0';\n  const swapType = selectSwapType(global);\n\n  const estimate = await callApi('swapCexEstimate', {\n    fromAmount,\n    from,\n    to,\n  });\n\n  if (shouldStop()) return undefined;\n\n  global = getGlobal();\n\n  if (!estimate) {\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: window.navigator.onLine ? SwapErrorType.InvalidPair : SwapErrorType.UnexpectedError,\n    };\n  }\n\n  if ('error' in estimate) {\n    const { error } = estimate as { error: string };\n    if (error.includes('requests limit')) {\n      return 'rateLimited';\n    }\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: SwapErrorType.UnexpectedError,\n    };\n  }\n\n  const account = global.accounts?.byId[global.currentAccountId!];\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (swapType === SwapType.CrosschainFromWallet) {\n    if (tokenIn.chain !== 'ton' && tokenIn.chain !== 'tron') {\n      throw new Error(`Unexpected chain ${tokenIn.chain}`);\n    }\n\n    const toAddress = {\n      ton: account?.addressByChain.ton!,\n      tron: TRX_SWAP_COUNT_FEE_ADDRESS,\n    }[tokenIn.chain];\n\n    const txDraft = await callApi('checkTransactionDraft', tokenIn.chain, {\n      accountId: global.currentAccountId!,\n      toAddress,\n      tokenAddress: tokenIn.tokenAddress,\n    });\n    if (txDraft) {\n      ({ networkFee, realNetworkFee } = convertTransferFeesToSwapFees(txDraft, tokenIn.chain));\n    }\n  }\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    amountOut: estimate.toAmount === '0' ? undefined : estimate.toAmount,\n    limits: {\n      fromMin: estimate.fromMin,\n      fromMax: estimate.fromMax,\n    },\n    swapFee: estimate.swapFee,\n    networkFee,\n    realNetworkFee,\n    ourFee: '0',\n    ourFeePercent: 0,\n    dieselStatus: 'not-available',\n    amountOutMin: estimate.toAmount,\n    errorType: Big(fromAmount).lt(estimate.fromMin)\n      ? SwapErrorType.ChangellyMinSwap\n      : Big(fromAmount).gt(estimate.fromMax)\n        ? SwapErrorType.ChangellyMaxSwap\n        : undefined,\n  };\n}\n\naddActionHandler('setSwapScreen', (global, actions, { state }) => {\n  if (state === SwapState.Initial) {\n    global = updateCurrentSwap(global, { swapId: generateUniqueId() });\n  }\n  global = updateCurrentSwap(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('clearSwapError', (global) => {\n  global = updateCurrentSwap(global, { error: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('loadSwapPairs', async (global, actions, { tokenSlug, shouldForceUpdate }) => {\n  const tokenIn = global.swapTokenInfo?.bySlug[tokenSlug];\n  if (!tokenIn) {\n    return;\n  }\n\n  const assetId = resolveSwapAssetId(tokenIn);\n\n  const cache = pairsCache[tokenSlug];\n  const isCacheValid = cache && (Date.now() - cache.timestamp <= CACHE_DURATION);\n  if (isCacheValid && !shouldForceUpdate) {\n    return;\n  }\n\n  const pairs = await callApi('swapGetPairs', assetId);\n  global = getGlobal();\n\n  if (!pairs) {\n    global = updateCurrentSwap(global, {\n      pairs: {\n        bySlug: {\n          ...global.currentSwap.pairs?.bySlug,\n          [tokenSlug]: {},\n        },\n      },\n    });\n    setGlobal(global);\n    return;\n  }\n\n  const isTonTokenIn = tokenIn.chain === 'ton';\n\n  const bySlug = pairs.reduce((acc, pair) => {\n    const isTonTokenOut = getIsTonToken(pair.slug, true);\n    const countTonTokens = Number(isTonTokenIn) + (isTonTokenOut ? 1 : 0);\n\n    const isMultichain = !(\n      (countTonTokens === 2) || (countTonTokens === 1 && [tokenIn.slug, pair.slug].includes(TONCOIN.slug))\n    );\n\n    acc[pair.slug] = {\n      ...(isMultichain && {\n        isMultichain,\n      }),\n      ...(pair.isReverseProhibited && {\n        isReverseProhibited: pair.isReverseProhibited,\n      }),\n    };\n    return acc;\n  }, {} as AssetPairs);\n\n  pairsCache[tokenSlug] = { data: pairs, timestamp: Date.now() };\n\n  global = updateCurrentSwap(global, {\n    pairs: {\n      bySlug: {\n        ...global.currentSwap.pairs?.bySlug,\n        [tokenSlug]: bySlug,\n      },\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapCexAddress', (global, actions, { toAddress }) => {\n  global = updateCurrentSwap(global, { toAddress });\n  setGlobal(global);\n});\n\naddActionHandler('clearSwapPairsCache', () => {\n  pairsCache = {};\n});\n\naddActionHandler('updatePendingSwaps', async (global) => {\n  const accountId = global.currentAccountId;\n  if (!accountId) return;\n\n  let { activities } = selectAccountState(global, accountId) ?? {};\n  if (!activities) return;\n\n  const ids = Object.values(activities.byId)\n    .filter((activity) => Boolean(\n      activity.kind === 'swap'\n      && activity.status === 'pending'\n      && activity.cex,\n    ))\n    .map(({ id }) => parseTxId(id).hash);\n  if (!ids.length) return;\n\n  const result = await callApi('fetchSwaps', accountId, ids);\n  if (!result?.swaps.length) return;\n\n  const { swaps, nonExistentIds } = result;\n\n  global = getGlobal();\n  if (global.currentAccountId !== accountId) return;\n\n  ({ activities } = selectAccountState(global, accountId) ?? {});\n\n  for (const swap of result.swaps) {\n    if (swap.isCanceled) {\n      swap.shouldHide = true;\n    }\n  }\n\n  const nonExistentSwaps: Record<string, ApiSwapActivity> = {};\n\n  for (const id of nonExistentIds) {\n    nonExistentSwaps[id] = {\n      ...activities!.byId[id] as ApiSwapActivity,\n      status: 'expired',\n      shouldHide: true,\n    };\n  }\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: {\n        ...activities!.byId,\n        ...nonExistentSwaps,\n        ...buildCollectionByKey(swaps, 'id'),\n      },\n    },\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('setSwapDex', (global, actions, { dexLabel }) => {\n  const { estimates, bestRateDexLabel } = global.currentSwap;\n  const newEstimate = (estimates || []).find((estimate) => estimate.dexLabel === dexLabel);\n  if (!newEstimate) return;\n\n  global = updateCurrentSwap(global, {\n    amountIn: newEstimate.fromAmount,\n    amountOut: newEstimate.toAmount,\n    amountOutMin: newEstimate.toMinAmount,\n    networkFee: newEstimate.networkFee,\n    realNetworkFee: newEstimate.realNetworkFee,\n    swapFee: newEstimate.swapFee,\n    swapFeePercent: newEstimate.swapFeePercent,\n    ourFee: newEstimate.ourFee,\n    dieselFee: newEstimate.dieselFee,\n    priceImpact: newEstimate.impact,\n    currentDexLabel: dexLabel,\n    // The \"Best Rate\" selection should enable automatic best dex selection mode\n    isDexLabelChanged: dexLabel !== bestRateDexLabel ? true : undefined,\n  }, true);\n  setGlobal(global);\n});\n\nfunction convertTransferFeesToSwapFees(\n  txDraft: Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee'>,\n  chain: ApiChain,\n) {\n  const nativeToken = getNativeToken(chain);\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (txDraft?.fee !== undefined) {\n    networkFee = toDecimal(txDraft.fee, nativeToken.decimals);\n  }\n  if (txDraft?.realFee !== undefined) {\n    realNetworkFee = toDecimal(txDraft.realFee, nativeToken.decimals);\n  }\n\n  return { networkFee, realNetworkFee };\n}\n\nexport type SwapEstimateResult = Partial<GlobalState['currentSwap']> | 'rateLimited' | undefined;\n\nlet isEstimatingSwap = false;\n\n/**\n * A boilerplate of swap estimation, ensuring consistent behavior in concurrent usage scenarios.\n * This function is expected to be called periodically, and you may call it as often as you like.\n *\n * You may call the `shouldStop` function to check whether it makes sense to continue estimating (because the result\n * is likely to be ignored). If `shouldStop` returns true, `estimate` may return any value (it will be ignored).\n */\nexport async function estimateSwapConcurrently(\n  estimate: (\n    global: GlobalState,\n    shouldStop: () => boolean,\n  ) => SwapEstimateResult | Promise<SwapEstimateResult>,\n) {\n  const initialGlobal = getGlobal();\n\n  if (shouldAvoidSwapEstimation(initialGlobal)) return;\n\n  // There should be only 1 swap estimation at a time. A timer in SwapInitial will trigger another estimation attempt.\n  if (isEstimatingSwap) {\n    return;\n  }\n\n  try {\n    isEstimatingSwap = true;\n\n    const isEstimateInputIntact = isSwapEstimateInputEqual.bind(undefined, initialGlobal);\n\n    const swapUpdate = await estimate(initialGlobal, () => {\n      const currentGlobal = getGlobal();\n      return shouldAvoidSwapEstimation(currentGlobal) || !isEstimateInputIntact(currentGlobal);\n    });\n\n    const finalGlobal = getGlobal();\n\n    // If the dependencies were changed during the estimation, the estimation result should be ignored and the loading\n    // indicator should stay (in order to avoid showing the outdated fee). A timer in SwapInitial will trigger another\n    // estimation attempt to get the up-to-date fee.\n    if (!isEstimateInputIntact(finalGlobal)) {\n      return;\n    }\n\n    // If the swap estimation request has been rate-limited, we should keep showing the loading indicator\n    if (swapUpdate === 'rateLimited') {\n      return;\n    }\n\n    setGlobal(updateCurrentSwap(finalGlobal, {\n      isEstimating: false,\n      ...(shouldAvoidSwapEstimation(finalGlobal) ? undefined : swapUpdate),\n    }));\n  } finally {\n    isEstimatingSwap = false;\n  }\n}\n\nfunction chooseSwapEstimate(\n  global: GlobalState,\n  newEstimates: ApiSwapEstimateVariant[],\n  proposedBestDexLabel: ApiSwapDexLabel,\n) {\n  if (newEstimates.length === 0) {\n    throw new Error('Unexpected empty `newEstimates` array');\n  }\n\n  const { tokenInSlug, currentDexLabel, isDexLabelChanged } = global.currentSwap;\n\n  // If the user has chosen a Dex manually, respect that choice\n  if (currentDexLabel && isDexLabelChanged) {\n    const selectedEstimate = newEstimates.find(({ dexLabel }) => dexLabel === currentDexLabel);\n    if (selectedEstimate) {\n      return selectedEstimate;\n    }\n  }\n\n  // Otherwise, select automatically\n  const tokenIn = tokenInSlug ? global.swapTokenInfo!.bySlug[tokenInSlug] : undefined;\n  const tokenInBalance = tokenInSlug ? selectCurrentAccountTokenBalance(global, tokenInSlug) : undefined;\n  const nativeTokenIn = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n  const nativeTokenInBalance = nativeTokenIn && selectCurrentAccountTokenBalance(global, nativeTokenIn.slug);\n  let availableEstimates = newEstimates.filter((variant) => canAffordSwapEstimateVariant({\n    variant,\n    tokenIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n  }));\n\n  if (availableEstimates.length === 0) {\n    availableEstimates = newEstimates;\n  }\n\n  return availableEstimates.find(({ dexLabel }) => dexLabel === proposedBestDexLabel)\n    ?? availableEstimates[0];\n}\n","import { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateTokenPriceHistory } from '../../reducers/tokens';\n\naddActionHandler('loadPriceHistory', async (global, actions, payload) => {\n  const { slug, period, currency = global.settings.baseCurrency } = payload ?? {};\n\n  const history = await callApi('fetchPriceHistory', slug, period, currency);\n\n  if (!history) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateTokenPriceHistory(global, slug, { [period]: history });\n  setGlobal(global);\n});\n","import type { ApiCheckTransactionDraftResult, ApiSubmitMultiTransferResult } from '../../../api/chains/ton/types';\nimport type { ApiSubmitTransferOptions, ApiSubmitTransferResult } from '../../../api/methods/types';\nimport { ApiTransactionDraftError, type ApiTransactionError, type ApiTransferToSign } from '../../../api/types';\nimport { TransferState } from '../../types';\n\nimport { NFT_BATCH_SIZE } from '../../../config';\nimport { bigintDivideToNumber } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { explainApiTransferFee, getDieselTokenAmount } from '../../../util/fee/transferFee';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { ApiHardwareBlindSigningNotEnabled, ApiUserRejectsError } from '../../../api/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  preserveMaxTransferAmount,\n  setIsPinAccepted,\n  updateAccountState,\n  updateCurrentTransfer,\n  updateCurrentTransferByCheckResult,\n  updateCurrentTransferLoading,\n} from '../../reducers';\nimport { selectAccountState, selectToken, selectTokenAddress } from '../../selectors';\n\naddActionHandler('submitTransferInitial', async (global, actions, payload) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('submitTransferInitial', payload);\n    return;\n  }\n\n  const {\n    tokenSlug,\n    toAddress,\n    comment,\n    shouldEncrypt,\n    nfts,\n    withDiesel,\n    stateInit,\n    isGaslessWithStars,\n    binPayload,\n  } = payload;\n  let { amount } = payload;\n\n  setGlobal(updateCurrentTransferLoading(global, true));\n\n  const isNftTransfer = Boolean(nfts?.length);\n  let result: ApiCheckTransactionDraftResult | undefined;\n\n  if (isNftTransfer) {\n    // This assignment is needed only for the amount checking hack in the 'newLocalActivity' handler in\n    // `src/global/actions/apiUpdates/activities.ts` to work.\n    amount = 0n;\n\n    result = await callApi('checkNftTransferDraft', {\n      accountId: global.currentAccountId!,\n      nfts,\n      toAddress,\n      comment,\n    });\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n    result = await callApi('checkTransactionDraft', chain, {\n      accountId: global.currentAccountId!,\n      tokenAddress,\n      toAddress,\n      amount,\n      data: binPayload ?? comment,\n      shouldEncrypt,\n      stateInit,\n      isBase64Data: Boolean(binPayload),\n      allowGasless: true,\n    });\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransferLoading(global, false);\n\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n\n  if (!result || 'error' in result) {\n    setGlobal(global);\n\n    if (result?.error === ApiTransactionDraftError.InsufficientBalance && !isNftTransfer) {\n      actions.showDialog({ message: 'The network fee has slightly changed, try sending again.' });\n    } else {\n      actions.showError({ error: result?.error });\n    }\n\n    return;\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: TransferState.Confirm,\n    error: undefined,\n    toAddress,\n    resolvedAddress: result.resolvedAddress,\n    amount,\n    comment,\n    shouldEncrypt,\n    tokenSlug,\n    isToNewAddress: result.isToAddressNew,\n    withDiesel,\n    isGaslessWithStars,\n  }));\n});\n\naddActionHandler('fetchTransferFee', async (global, actions, payload) => {\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const {\n    tokenSlug, toAddress, comment, shouldEncrypt, binPayload, stateInit,\n  } = payload;\n\n  const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n  const result = await callApi('checkTransactionDraft', chain, {\n    accountId: global.currentAccountId!,\n    toAddress,\n    data: binPayload ?? comment,\n    tokenAddress,\n    shouldEncrypt,\n    isBase64Data: Boolean(binPayload),\n    stateInit,\n    allowGasless: true,\n  });\n\n  global = getGlobal();\n\n  if (tokenSlug !== global.currentTransfer.tokenSlug || global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  setGlobal(global);\n\n  if (result?.error && result.error !== ApiTransactionDraftError.InsufficientBalance) {\n    actions.showError({ error: result.error });\n  }\n});\n\naddActionHandler('fetchNftFee', async (global, actions, payload) => {\n  const { toAddress, nfts, comment } = payload;\n\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const result = await callApi('checkNftTransferDraft', {\n    accountId: global.currentAccountId!,\n    nfts,\n    toAddress,\n    comment,\n  });\n\n  global = getGlobal();\n\n  if (!global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token transfer mode before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  setGlobal(global);\n\n  if (result?.error) {\n    actions.showError({\n      error: result?.error === ApiTransactionDraftError.InsufficientBalance\n        ? 'Insufficient TON for fee.'\n        : result.error,\n    });\n  }\n});\n\naddActionHandler('submitTransferPassword', async (global, actions, { password }) => {\n  const {\n    resolvedAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    shouldEncrypt,\n    binPayload,\n    nfts,\n    withDiesel,\n    diesel,\n    stateInit,\n    isGaslessWithStars,\n  } = global.currentTransfer;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentTransfer(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n  });\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (promiseId) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = setIsPinAccepted(global);\n      setGlobal(global);\n    }\n\n    void callApi('confirmDappRequest', promiseId, password);\n    return;\n  }\n\n  const explainedFee = explainApiTransferFee(global.currentTransfer);\n  const fullNativeFee = explainedFee.fullFee?.nativeSum;\n  const realNativeFee = explainedFee.realFee?.nativeSum;\n\n  let result: ApiSubmitTransferResult | ApiSubmitMultiTransferResult | undefined;\n\n  if (nfts?.length) {\n    const chunks = [];\n    for (let i = 0; i < nfts.length; i += NFT_BATCH_SIZE) {\n      chunks.push(nfts.slice(i, i + NFT_BATCH_SIZE));\n    }\n\n    for (const chunk of chunks) {\n      const batchResult = await callApi(\n        'submitNftTransfers',\n        global.currentAccountId!,\n        password,\n        chunk,\n        resolvedAddress!,\n        comment,\n        realNativeFee && bigintDivideToNumber(realNativeFee, nfts.length / chunk.length),\n      );\n\n      global = getGlobal();\n      global = updateCurrentTransfer(global, {\n        sentNftsCount: (global.currentTransfer.sentNftsCount || 0) + chunk.length,\n      });\n      setGlobal(global);\n      // TODO - process all responses from the API\n      result = batchResult;\n    }\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n    const options: ApiSubmitTransferOptions = {\n      accountId: global.currentAccountId!,\n      password,\n      toAddress: resolvedAddress!,\n      amount: amount!,\n      comment: binPayload ?? comment,\n      tokenAddress,\n      fee: fullNativeFee,\n      realFee: realNativeFee,\n      shouldEncrypt,\n      isBase64Data: Boolean(binPayload),\n      withDiesel,\n      dieselAmount: diesel && getDieselTokenAmount(diesel),\n      stateInit,\n      isGaslessWithStars,\n    };\n\n    result = await callApi('submitTransfer', chain, options);\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransfer(global, {\n    isLoading: false,\n  });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n  } else {\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('submitTransferHardware', async (global, actions) => {\n  const {\n    toAddress,\n    resolvedAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    rawPayload,\n    parsedPayload,\n    stateInit,\n    nfts,\n  } = global.currentTransfer;\n\n  const accountId = global.currentAccountId!;\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  }));\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (promiseId) {\n    const message: ApiTransferToSign = {\n      toAddress: toAddress!,\n      amount: amount!,\n      rawPayload,\n      payload: parsedPayload,\n      stateInit,\n    };\n\n    try {\n      const signedMessage = await ledgerApi.signLedgerTransactions(accountId, [message]);\n      void callApi('confirmDappRequest', promiseId, signedMessage);\n    } catch (err) {\n      if (err instanceof ApiUserRejectsError) {\n        setGlobal(updateCurrentTransfer(getGlobal(), {\n          isLoading: false,\n          error: 'Canceled by the user',\n        }));\n      } else {\n        void callApi('cancelDappRequest', promiseId, 'Unknown error.');\n      }\n    }\n    return;\n  }\n\n  const explainedFee = explainApiTransferFee(global.currentTransfer);\n  const realNativeFee = explainedFee.realFee?.nativeSum;\n\n  let result: string | { error: ApiTransactionError } | undefined;\n  let error: string | undefined;\n\n  if (nfts?.length) {\n    for (const nft of nfts) {\n      const currentResult = await ledgerApi.submitLedgerNftTransfer({\n        accountId: global.currentAccountId!,\n        nftAddress: nft.address,\n        password: '',\n        toAddress: resolvedAddress!,\n        comment,\n        nft,\n        realFee: realNativeFee && bigintDivideToNumber(realNativeFee, nfts.length),\n      });\n\n      global = getGlobal();\n      global = updateCurrentTransfer(global, {\n        sentNftsCount: (global.currentTransfer.sentNftsCount || 0) + 1,\n      });\n      setGlobal(global);\n      result = currentResult;\n    }\n  } else {\n    const tokenAddress = selectTokenAddress(global, tokenSlug);\n    const options = {\n      accountId: global.currentAccountId!,\n      password: '',\n      toAddress: resolvedAddress!,\n      amount: amount!,\n      comment,\n      tokenAddress,\n      realFee: realNativeFee,\n    };\n\n    try {\n      result = await ledgerApi.submitLedgerTransfer(options, tokenSlug);\n    } catch (err: any) {\n      if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n        error = '$hardware_blind_sign_not_enabled';\n      }\n    }\n  }\n\n  if (!error && result === undefined) {\n    error = 'Declined';\n  } else if (typeof result === 'object' && 'error' in result) {\n    actions.showError({\n      error: result.error,\n    });\n  }\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: false,\n    error,\n  }));\n});\n\naddActionHandler('cancelTransfer', (global, actions, { shouldReset } = {}) => {\n  const { promiseId, tokenSlug } = global.currentTransfer;\n\n  if (shouldReset) {\n    if (promiseId) {\n      void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n    }\n\n    global = clearCurrentTransfer(global);\n    global = updateCurrentTransfer(global, { tokenSlug });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('fetchTransferDieselState', async (global, actions, { tokenSlug }) => {\n  const tokenAddress = selectTokenAddress(global, tokenSlug);\n  if (!tokenAddress) return;\n\n  const diesel = await callApi('fetchEstimateDiesel', global.currentAccountId!, tokenAddress);\n  if (!diesel) return;\n\n  global = getGlobal();\n  const accountState = selectAccountState(global, global.currentAccountId!);\n  global = preserveMaxTransferAmount(global, updateCurrentTransfer(global, { diesel }));\n  if (accountState?.isDieselAuthorizationStarted && diesel.status !== 'not-authorized') {\n    global = updateAccountState(global, global.currentAccountId!, { isDieselAuthorizationStarted: undefined });\n  }\n  setGlobal(global);\n});\n","import {\n  BURN_ADDRESS, NOTCOIN_EXCHANGERS, NOTCOIN_VOUCHERS_ADDRESS, TONCOIN,\n} from '../../../config';\nimport { findDifference } from '../../../util/iteratees';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler } from '../../index';\nimport { updateCurrentAccountState } from '../../reducers';\nimport { selectCurrentAccountState } from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nconst NBS_INIT_TIMEOUT = IS_DELEGATING_BOTTOM_SHEET ? 100 : 0;\n\naddActionHandler('burnNfts', (global, actions, { nfts }) => {\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    nfts,\n  });\n\n  const isNotcoinVouchers = nfts.some((n) => n.collectionAddress === NOTCOIN_VOUCHERS_ADDRESS);\n\n  setTimeout(() => {\n    actions.submitTransferInitial({\n      tokenSlug: TONCOIN.slug,\n      amount: 0n,\n      toAddress: isNotcoinVouchers ? NOTCOIN_EXCHANGERS[0] : BURN_ADDRESS,\n      nfts,\n    });\n  }, NBS_INIT_TIMEOUT);\n});\n\naddActionHandler('addNftsToBlacklist', (global, actions, { addresses: nftAddresses }) => {\n  // Force hide NFT - remove it from whitelist and add to blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses: [...blacklistedNftAddresses, ...nftAddresses],\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('addNftsToWhitelist', (global, actions, { addresses: nftAddresses }) => {\n  // Force show NFT - remove it from blacklist and add to whitelist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses: [...whitelistedNftAddresses, ...nftAddresses],\n  });\n});\n\naddActionHandler('removeNftSpecialStatus', (global, actions, { address: nftAddress }) => {\n  // Stop forcing to show/hide NFT if it was in whitelist/blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  blacklistedNftAddresses = blacklistedNftAddresses.filter((address) => address !== nftAddress);\n  whitelistedNftAddresses = whitelistedNftAddresses.filter((address) => address !== nftAddress);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('openUnhideNftModal', (global, actions, { address, name }) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: true,\n    selectedNftToUnhide: { address, name },\n  });\n});\n\naddActionHandler('closeUnhideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: undefined,\n    selectedNftToUnhide: undefined,\n  });\n});\n\naddActionHandler('openHideNftModal', (global, actions, { addresses, isCollection }) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: { addresses, isCollection },\n  });\n});\n\naddActionHandler('closeHideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: undefined,\n  });\n});\n","import type { ApiSubmitTransferOptions } from '../../../api/methods/types';\nimport type { GlobalState } from '../../types';\nimport { ApiCommonError } from '../../../api/types';\nimport { MintCardState } from '../../types';\n\nimport { MINT_CARD_ADDRESS, MINT_CARD_COMMENT, TONCOIN } from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { fromDecimal } from '../../../util/decimals';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getActions, getGlobal, setGlobal } from '../../index';\nimport {\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateAccountSettings,\n  updateAccountState,\n  updateMintCards,\n} from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\naddActionHandler('submitMintCard', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateMintCards(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateMintCards(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  const options = createTransferOptions(getGlobal(), password);\n  const result = await callApi('submitTransfer', 'ton', options);\n  const transferError = !result || 'error' in result\n    ? result?.error ?? ApiCommonError.Unexpected\n    : undefined;\n\n  handleTransferResult(getGlobal(), accountId, transferError);\n});\n\naddActionHandler('submitMintCardHardware', async (global) => {\n  const accountId = global.currentAccountId!;\n\n  global = updateMintCards(global, {\n    isLoading: true,\n    error: undefined,\n    state: MintCardState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  const options = createTransferOptions(getGlobal(), '');\n  const result = await ledgerApi.submitLedgerTransfer(options, TONCOIN.slug);\n  const transferError = !result ? ApiCommonError.Unexpected : undefined;\n\n  handleTransferResult(getGlobal(), accountId, transferError);\n});\n\nfunction createTransferOptions(globalState: GlobalState, password: string): ApiSubmitTransferOptions {\n  const { currentAccountId, currentMintCard } = globalState;\n  const { config } = selectAccountState(globalState, currentAccountId!)!;\n  const { cardsInfo } = config!;\n  const type = currentMintCard!.type!;\n  const cardInfo = cardsInfo![type];\n\n  return {\n    accountId: currentAccountId!,\n    password,\n    toAddress: MINT_CARD_ADDRESS,\n    amount: fromDecimal(cardInfo.price, TONCOIN.decimals),\n    comment: MINT_CARD_COMMENT,\n  };\n}\n\nfunction handleTransferResult(global: GlobalState, accountId: string, error?: string) {\n  global = updateMintCards(global, { isLoading: false });\n  setGlobal(global);\n\n  if (error) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    getActions().showError({ error });\n    return;\n  }\n\n  void vibrateOnSuccess();\n  global = getGlobal();\n  global = updateMintCards(global, { state: MintCardState.Done });\n  global = updateAccountState(global, accountId, { isCardMinting: true });\n  setGlobal(global);\n}\n\naddActionHandler('checkCardNftOwnership', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n  const { byAccountId } = global.settings;\n\n  Object.entries(byAccountId).forEach(async ([accountId, settings]) => {\n    const cardBackgroundNftAddress = settings.cardBackgroundNft?.address;\n    const accentColorNftAddress = settings.accentColorNft?.address;\n\n    if (!cardBackgroundNftAddress && !accentColorNftAddress) return;\n\n    const promises = [\n      cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, cardBackgroundNftAddress)\n        : undefined,\n      accentColorNftAddress && accentColorNftAddress !== cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, accentColorNftAddress)\n        : undefined,\n    ];\n\n    const [isCardBackgroundNftOwned, isAccentColorNftOwned] = await Promise.all(promises);\n\n    let newGlobal = getGlobal();\n\n    if (cardBackgroundNftAddress && isCardBackgroundNftOwned === false) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        cardBackgroundNft: undefined,\n      });\n    }\n\n    if (accentColorNftAddress && (\n      (accentColorNftAddress === cardBackgroundNftAddress && isCardBackgroundNftOwned === false)\n      || (accentColorNftAddress !== cardBackgroundNftAddress && isAccentColorNftOwned === false)\n    )) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        accentColorNft: undefined,\n        accentColorIndex: undefined,\n      });\n    }\n\n    setGlobal(newGlobal);\n  });\n});\n","import type { ApiSubmitTransferOptions } from '../../../api/methods/types';\nimport { ApiCommonError } from '../../../api/types';\nimport { VestingUnfreezeState } from '../../types';\n\nimport {\n  CLAIM_ADDRESS,\n  CLAIM_AMOUNT,\n  CLAIM_COMMENT,\n  MYCOIN,\n  MYCOIN_TESTNET,\n  TONCOIN,\n} from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateVesting,\n} from '../../reducers';\nimport { selectVestingPartsReadyToUnfreeze } from '../../selectors';\n\naddActionHandler('submitClaimingVesting', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateVesting(getGlobal(), accountId, { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateVesting(global, accountId, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitClaimingVesting', { password });\n    return;\n  }\n\n  global = getGlobal();\n  const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n\n  const options: ApiSubmitTransferOptions = {\n    accountId: global.currentAccountId!,\n    password,\n    toAddress: CLAIM_ADDRESS,\n    amount: CLAIM_AMOUNT,\n    comment: CLAIM_COMMENT,\n  };\n  const result = await callApi('submitTransfer', 'ton', options);\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, { isLoading: false });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n    return;\n  } else {\n    void vibrateOnSuccess();\n  }\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, {\n    isConfirmRequested: undefined,\n    unfreezeRequestedIds,\n  });\n  setGlobal(global);\n\n  actions.openVestingModal();\n});\n\naddActionHandler('submitClaimingVestingHardware', async (global, actions) => {\n  global = updateVesting(global, global.currentAccountId!, {\n    isLoading: true,\n    error: undefined,\n    unfreezeState: VestingUnfreezeState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  const accountId = global.currentAccountId!;\n  const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n  const options: ApiSubmitTransferOptions = {\n    accountId,\n    password: '',\n    toAddress: CLAIM_ADDRESS,\n    amount: CLAIM_AMOUNT,\n    comment: CLAIM_COMMENT,\n  };\n\n  const result = await ledgerApi.submitLedgerTransfer(options, TONCOIN.slug);\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  } else {\n    global = getGlobal();\n    global = updateVesting(global, accountId, {\n      isConfirmRequested: undefined,\n      unfreezeRequestedIds,\n    });\n    setGlobal(global);\n    actions.openVestingModal();\n  }\n});\n\naddActionHandler('loadMycoin', (global, actions) => {\n  const { isTestnet } = global.settings;\n\n  actions.importToken({ address: isTestnet ? MYCOIN_TESTNET.minterAddress : MYCOIN.minterAddress });\n});\n","import Deferred from './Deferred';\n\nexport function createAbortableFunction<TArgs extends unknown[], TAbort, TFnResult>(\n  toReturnOnAbort: TAbort,\n  fn: (...args: TArgs) => Promise<TFnResult>,\n): (...args: TArgs) => Promise<TAbort | TFnResult> {\n  let abort = new Deferred<TAbort>();\n\n  return function abortableFunction(...args: TArgs): Promise<TAbort | TFnResult> {\n    abort.resolve(toReturnOnAbort);\n\n    abort = new Deferred<TAbort>();\n    return Promise.race([fn(...args), abort.promise]);\n  };\n}\n","import type { ApiNotificationsAccountValue } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nexport function deleteNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const { [accountId]: deleted, ...newEnabledAccounts } = currentEnabledAccounts;\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function deleteAllNotificationAccounts(\n  global: GlobalState,\n): GlobalState {\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: {},\n    },\n  };\n}\n\nexport function createNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: Partial<ApiNotificationsAccountValue> = {},\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const newEnabledAccounts = { ...currentEnabledAccounts, [accountId]: value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function updateNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: ApiNotificationsAccountValue,\n): GlobalState {\n  const newEnabledAccounts = global.pushNotifications.enabledAccounts;\n  newEnabledAccounts[accountId] = { ...newEnabledAccounts[accountId], ...value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n","import type {\n  ApiNotificationsAccountValue,\n  ApiSubscribeNotificationsProps,\n  ApiSubscribeNotificationsResult,\n  ApiUnsubscribeNotificationsProps,\n} from '../../../api/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { createAbortableFunction } from '../../../util/createAbortableFunction';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  createNotificationAccount,\n  deleteAllNotificationAccounts, deleteNotificationAccount,\n  updateNotificationAccount,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\nconst abortableSubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiSubscribeNotificationsProps) => {\n    return callApi('subscribeNotifications', request);\n  },\n);\n\nconst abortableUnsubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiUnsubscribeNotificationsProps) => {\n    return callApi('unsubscribeNotifications', request);\n  },\n);\n\naddActionHandler('registerNotifications', async (global, actions, { userToken, platform }) => {\n  const { pushNotifications } = global;\n\n  let createResult;\n  let enabledAccounts = Object.keys(pushNotifications.enabledAccounts);\n  const accounts = Object.keys(selectAccounts(global) || {});\n  if (!pushNotifications.userToken && accounts.length) {\n    enabledAccounts = accounts.slice(0, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT);\n\n    createResult = await callApi('subscribeNotifications', {\n      userToken,\n      platform,\n      addresses: selectNotificationTonAddressesSlow(global, enabledAccounts),\n    });\n  } else if (pushNotifications.userToken !== userToken && enabledAccounts.length) {\n    [createResult] = await Promise.all([\n      callApi('subscribeNotifications', {\n        userToken,\n        platform,\n        addresses: selectNotificationTonAddressesSlow(global, enabledAccounts),\n      }),\n      callApi('unsubscribeNotifications', {\n        userToken: pushNotifications.userToken!,\n        addresses: selectNotificationTonAddressesSlow(global, enabledAccounts),\n      }),\n    ]);\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      userToken,\n      platform,\n    },\n  };\n\n  if (!createResult || 'error' in createResult) {\n    setGlobal(global);\n    return;\n  }\n\n  const newEnabledAccounts = enabledAccounts.reduce((acc, accountId) => {\n    if (global.accounts?.byId[accountId].addressByChain.ton) {\n      acc[accountId] = createResult.addressKeys[global.accounts?.byId[accountId].addressByChain.ton];\n    }\n\n    return acc;\n  }, {} as Record<string, ApiNotificationsAccountValue>);\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  });\n});\n\naddActionHandler('deleteNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, enabledAccounts } = global.pushNotifications;\n  const pushNotificationsAccount = enabledAccounts[accountId]!;\n\n  if (!userToken) {\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n\n  const props = { userToken, addresses: selectNotificationTonAddressesSlow(global, [accountId]) };\n  const result = withAbort\n    ? await abortableUnsubscribeNotifications(props)\n    : await callApi('unsubscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(createNotificationAccount(\n      global,\n      accountId,\n      pushNotificationsAccount,\n    ));\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n});\n\naddActionHandler('createNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, platform } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  setGlobal(createNotificationAccount(\n    global,\n    accountId,\n    {},\n  ));\n\n  const props = { userToken, platform, addresses: selectNotificationTonAddressesSlow(global, [accountId]) };\n  const result = withAbort\n    ? await abortableSubscribeNotifications(props)\n    : await callApi('subscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(deleteNotificationAccount(\n      global,\n      accountId,\n    ));\n    return;\n  }\n\n  setGlobal(updateNotificationAccount(\n    global,\n    accountId,\n    result.addressKeys[global.accounts!.byId[accountId].addressByChain.ton],\n  ));\n});\n\naddActionHandler('toggleNotifications', async (global, actions, { isEnabled }) => {\n  const {\n    enabledAccounts = {}, userToken = '', platform, isAvailable,\n  } = global.pushNotifications;\n\n  if (!isAvailable) {\n    return;\n  }\n\n  let accountIds: string[];\n\n  if (isEnabled) {\n    accountIds = Object.keys(selectAccounts(global) || {})\n      .slice(0, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT);\n    for (const newAccountId of accountIds) {\n      global = createNotificationAccount(global, newAccountId, {});\n    }\n  } else {\n    accountIds = Object.keys(enabledAccounts);\n    global = deleteAllNotificationAccounts(global);\n  }\n\n  setGlobal(global);\n  if (!accountIds.length) {\n    return;\n  }\n\n  const props = { userToken, addresses: selectNotificationTonAddressesSlow(global, accountIds), platform: platform! };\n  const result = isEnabled\n    ? await abortableSubscribeNotifications(props)\n    : await abortableUnsubscribeNotifications(props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    if (isEnabled) {\n      global = deleteAllNotificationAccounts(global);\n    } else {\n      for (const accountId of accountIds) {\n        global = createNotificationAccount(global, accountId, enabledAccounts[accountId]);\n      }\n    }\n    setGlobal(global);\n    return;\n  }\n\n  if (isEnabled && 'addressKeys' in result) {\n    const addressKeys = (result as ApiSubscribeNotificationsResult).addressKeys;\n    for (const accountId of accountIds) {\n      const address = global.accounts!.byId[accountId].addressByChain.ton;\n\n      if (addressKeys[address]) {\n        global = createNotificationAccount(global, accountId, addressKeys[address]);\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n","import { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateActivity } from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\naddActionHandler('fetchActivityDetails', async (global, actions, { id }) => {\n  const accountId = global.currentAccountId!;\n  const activity = selectAccountState(global, accountId)!.activities!.byId[id];\n\n  if (!activity.shouldLoadDetails) {\n    return;\n  }\n\n  const newActivity = await callApi('fetchTonActivityDetails', accountId, activity);\n\n  if (!newActivity) {\n    return;\n  }\n\n  global = updateActivity(getGlobal(), accountId, newActivity);\n  setGlobal(global);\n});\n","import type { ApiChain, ApiLiquidStakingState } from '../../../api/types';\n\nimport { DEFAULT_STAKING_STATE, IS_CORE_WALLET, MTW_CARDS_COLLECTION } from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { buildCollectionByKey } from '../../../util/iteratees';\nimport { callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS_APP } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  addNft,\n  createAccount,\n  removeNft,\n  updateAccount,\n  updateAccountSettingsBackgroundNft,\n  updateAccountStaking,\n  updateAccountState,\n  updateBalances,\n  updateNft,\n  updateRestrictions,\n  updateSettings,\n  updateStakingDefault,\n  updateStakingInfo,\n  updateSwapTokens,\n  updateTokens,\n  updateVesting,\n  updateVestingInfo,\n} from '../../reducers';\nimport { selectAccountNftByAddress, selectAccountState, selectVestingPartsReadyToUnfreeze } from '../../selectors';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'updateBalances': {\n      global = updateBalances(global, update.accountId, update.chain, update.balances);\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateStaking': {\n      const {\n        accountId,\n        states,\n        common,\n        totalProfit,\n        shouldUseNominators,\n      } = update;\n\n      const stateById = buildCollectionByKey(states, 'id');\n\n      global = updateStakingDefault(global, {\n        ...stateById[DEFAULT_STAKING_STATE.id] as ApiLiquidStakingState,\n        balance: 0n,\n        unstakeRequestAmount: 0n,\n        tokenBalance: 0n,\n        isUnstakeRequested: false,\n      });\n      global = updateStakingInfo(global, common);\n      global = updateAccountStaking(global, accountId, {\n        stateById,\n        shouldUseNominators,\n        totalProfit,\n      });\n\n      const { stakingId } = selectAccountState(global, accountId)?.staking ?? {};\n\n      if (!stakingId) {\n        const stateWithBiggestBalance = [...states].sort(\n          (state0, state1) => Number(state1.balance - state0.balance),\n        )[0];\n\n        if (stateWithBiggestBalance && stateWithBiggestBalance.balance > 0n) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateWithBiggestBalance.id,\n          });\n        } else if (shouldUseNominators && stateById.nominators) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateById.nominators.id,\n          });\n        }\n      }\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateTokens': {\n      const { tokens, baseCurrency } = update;\n      global = updateTokens(global, tokens, true);\n      global = updateSettings(global, {\n        baseCurrency,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateSwapTokens': {\n      global = updateSwapTokens(global, update.tokens);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateNfts': {\n      const { accountId } = update;\n      const nfts = buildCollectionByKey(update.nfts, 'address');\n      global = getGlobal();\n      const currentNfts = selectAccountState(global, accountId)?.nfts;\n      global = updateAccountState(global, accountId, {\n        nfts: {\n          ...currentNfts,\n          byAddress: nfts,\n          orderedAddresses: Object.keys(nfts),\n        },\n      });\n\n      if (!IS_CORE_WALLET) {\n        update.nfts.forEach((nft) => {\n          if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n            global = updateAccountSettingsBackgroundNft(global, nft);\n          }\n        });\n      }\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftSent': {\n      const { accountId, nftAddress, newOwnerAddress } = update;\n      const sentNft = selectAccountNftByAddress(global, accountId, nftAddress);\n      global = removeNft(global, accountId, nftAddress);\n\n      if (sentNft?.collectionAddress === MTW_CARDS_COLLECTION) {\n        sentNft.ownerAddress = newOwnerAddress;\n        global = updateAccountSettingsBackgroundNft(global, sentNft);\n      }\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftReceived': {\n      const { accountId, nft } = update;\n      global = addNft(global, accountId, nft);\n      setGlobal(global);\n\n      if (!IS_CORE_WALLET) {\n        actions.checkCardNftOwnership();\n        // If a user received an NFT card from the MyTonWallet collection, it is applied immediately\n        if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n          actions.setCardBackgroundNft({ nft });\n          actions.installAccentColorFromNft({ nft });\n        }\n      }\n      break;\n    }\n\n    case 'nftPutUpForSale': {\n      const { accountId, nftAddress } = update;\n      global = updateNft(global, accountId, nftAddress, {\n        isOnSale: true,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateAccount': {\n      const { accountId, partial } = update;\n      global = updateAccount(global, accountId, {\n        addressByChain: {\n          ton: partial.address,\n        } as Record<ApiChain, string>,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateConfig': {\n      const {\n        isLimited: isLimitedRegion,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n        isAppUpdateRequired,\n      } = update;\n\n      const shouldRestrictSwapsAndOnRamp = (IS_IOS_APP && isLimitedRegion) || IS_CORE_WALLET;\n      global = updateRestrictions(global, {\n        isLimitedRegion,\n        isSwapDisabled: shouldRestrictSwapsAndOnRamp,\n        isOnRampDisabled: shouldRestrictSwapsAndOnRamp,\n        isNftBuyingDisabled: shouldRestrictSwapsAndOnRamp,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n      });\n      global = { ...global, isAppUpdateRequired: IS_CORE_WALLET ? undefined : isAppUpdateRequired };\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateWalletVersions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateWalletVersions', update);\n      }\n\n      actions.apiUpdateWalletVersions(update);\n      break;\n    }\n\n    case 'openUrl': {\n      void openUrl(update.url, { isExternal: update.isExternal, title: update.title, subtitle: update.subtitle });\n      break;\n    }\n\n    case 'requestReconnectApi': {\n      actions.initApi();\n      break;\n    }\n\n    case 'incorrectTime': {\n      if (!global.isIncorrectTimeNotificationReceived) {\n        actions.showIncorrectTimeError();\n      }\n      break;\n    }\n\n    case 'updateVesting': {\n      const { accountId, vestingInfo } = update;\n      const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      global = updateVestingInfo(global, accountId, vestingInfo);\n      const newUnfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      if (!areDeepEqual(unfreezeRequestedIds, newUnfreezeRequestedIds)) {\n        global = updateVesting(global, accountId, { unfreezeRequestedIds: undefined });\n      }\n      setGlobal(global);\n      break;\n    }\n\n    case 'updatingStatus': {\n      const { kind, isUpdating } = update;\n      const key = kind === 'balance' ? 'balanceUpdateStartedAt' : 'activitiesUpdateStartedAt';\n      if (isUpdating && global[key]) break;\n\n      setGlobal({\n        ...global,\n        [key]: isUpdating ? Date.now() : undefined,\n      });\n      break;\n    }\n\n    // Should be removed in future versions\n    case 'migrateCoreApplication': {\n      const {\n        accountId,\n        isTestnet,\n        address,\n        secondAddress,\n        secondAccountId,\n        isTonProxyEnabled,\n        isTonMagicEnabled,\n      } = update;\n\n      global = updateSettings(global, { isTestnet });\n      global = createAccount({ global, accountId, addressByChain: { ton: address } as Record<ApiChain, string> });\n      global = createAccount({\n        global,\n        accountId: secondAccountId,\n        addressByChain: { ton: secondAddress } as Record<ApiChain, string>,\n        network: isTestnet ? 'mainnet' : 'testnet', // Second account should be created on opposite network\n      });\n      setGlobal(global);\n\n      // Run the application only after the post-migration GlobalState has been applied\n      requestAnimationFrame(() => {\n        actions.tryAddNotificationAccount({ accountId });\n        actions.switchAccount({ accountId, newNetwork: isTestnet ? 'testnet' : 'mainnet' });\n        actions.afterSignIn();\n\n        if (isTonMagicEnabled) {\n          actions.toggleTonMagic({ isEnabled: true });\n        }\n        if (isTonProxyEnabled) {\n          actions.toggleTonProxy({ isEnabled: true });\n        }\n      });\n      break;\n    }\n\n    case 'updateAccountConfig': {\n      const { accountConfig, accountId } = update;\n      global = updateAccountState(global, accountId, { config: accountConfig });\n      setGlobal(global);\n    }\n  }\n});\n","import { registerPlugin } from \"@capacitor/core\";\nconst NativeAudio = registerPlugin(\"NativeAudio\", {\n    web: () => import(\"./web\").then((m) => new m.NativeAudioWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeAudio };\n//# sourceMappingURL=index.js.map","import { NativeAudio } from '@capgo/native-audio';\n\nimport { IS_CAPACITOR } from '../config';\nimport { SECOND } from './dateFormat';\nimport { logDebug, logDebugError } from './logs';\nimport { debounce } from './schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from './windowEnvironment';\n\nimport incomingTransactionSound from '../assets/incoming-transaction.mp3';\n\nconst DEBOUNCE_MS = SECOND;\n\nconst AudioContextConstructor = window.AudioContext || window.webkitAudioContext;\nconst audioContext = new AudioContextConstructor();\nlet audioBuffer: AudioBuffer | undefined;\nlet isSoundInitialized = IS_CAPACITOR || audioContext.state === 'running';\n\n// Workaround: this function is called once on the first user interaction.\n// After that, it will be possible to play the notification without problems.\n// https://developer.chrome.com/blog/autoplay?hl=ru#webaudio\nexport function initializeSounds() {\n  if (isSoundInitialized) return;\n\n  audioContext\n    .resume()\n    .then(() => {\n      isSoundInitialized = true;\n    })\n    .catch((err: any) => {\n      logDebugError('appSounds:initializeSounds', err);\n    });\n}\n\nfunction loadSound() {\n  if (IS_CAPACITOR) {\n    NativeAudio.preload({\n      assetId: 'incomingTransactionSound',\n      assetPath: 'public/incoming-transaction.mp3',\n      audioChannelNum: 1,\n      isUrl: false,\n    }).catch((err : any) => {\n      logDebugError('appSounds:loadSound', err);\n    });\n  } else {\n    fetch(incomingTransactionSound)\n      .then((response) => response.arrayBuffer())\n      .then((arrayBuffer) => audioContext.decodeAudioData(arrayBuffer))\n      .then((decodedAudioBuffer) => {\n        audioBuffer = decodedAudioBuffer;\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:loadSound', err);\n      });\n  }\n}\n\nloadSound();\n\nexport const playIncomingTransactionSound = debounce(() => {\n  if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n  if (!isSoundInitialized) {\n    logDebug('appSounds:playIncomingTransactionSound', 'sound is not initialized');\n    return;\n  }\n\n  if (IS_CAPACITOR) {\n    NativeAudio\n      .play({\n        assetId: 'incomingTransactionSound',\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:playIncomingTransactionSound', err);\n      });\n    return;\n  }\n\n  if (!audioBuffer) {\n    logDebug('playIncomingTransactionSound', 'audioBuffer is not loaded');\n    return;\n  }\n\n  const source = audioContext.createBufferSource();\n  source.buffer = audioBuffer;\n  source.connect(audioContext.destination);\n  source.start(0);\n}, DEBOUNCE_MS, true, false);\n","import type { ApiActivity, ApiTransactionActivity } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { TransferState } from '../../types';\n\nimport { IS_CORE_WALLET, MTW_CARDS_COLLECTION } from '../../../config';\nimport { parseTxId } from '../../../util/activities';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { playIncomingTransactionSound } from '../../../util/notificationSound';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { getIsTonToken } from '../../../util/tokens';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n} from '../../../util/windowEnvironment';\nimport { getIsTinyOrScamTransaction } from '../../helpers';\nimport { addActionHandler, getActions, setGlobal } from '../../index';\nimport {\n  addNewActivities,\n  addNft,\n  clearIsPinAccepted,\n  putInitialActivities,\n  removeActivities,\n  replaceCurrentActivityId,\n  replaceCurrentSwapId,\n  replaceCurrentTransferId,\n  setIsInitialActivitiesLoadedTrue,\n  updateAccountState,\n  updateActivitiesIsLoadingByAccount,\n  updateCurrentTransfer,\n} from '../../reducers';\nimport { selectAccountState, selectLocalActivities } from '../../selectors';\n\nconst TX_AGE_TO_PLAY_SOUND = 60000; // 1 min\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'initialActivities': {\n      const { accountId, mainActivities, bySlug, chain } = update;\n\n      global = updateActivitiesIsLoadingByAccount(global, accountId, false);\n      global = putInitialActivities(global, accountId, mainActivities, bySlug);\n\n      if (chain) {\n        global = setIsInitialActivitiesLoadedTrue(global, accountId, chain);\n      }\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'newLocalActivity': {\n      const {\n        accountId,\n        activity,\n      } = update;\n\n      global = addNewActivities(global, accountId, [activity]);\n\n      if (activity.kind === 'transaction' && -activity.amount === global.currentTransfer.amount) {\n        global = updateCurrentTransfer(global, {\n          txId: activity.txId,\n          state: TransferState.Complete,\n          isLoading: false,\n        });\n\n        if (getDoesUsePinPad()) {\n          global = clearIsPinAccepted(global);\n        }\n\n        if (getIsTonToken(activity.slug)) {\n          actions.fetchTransferDieselState({ tokenSlug: activity.slug });\n        }\n      }\n\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'newActivities': {\n      if (IS_DELEGATING_BOTTOM_SHEET && !update.noForward) {\n        // Local transaction in NBS was not updated after nft/transfer sending was completed\n        callActionInNative('apiUpdate', { ...update, noForward: true });\n      }\n      if (IS_DELEGATED_BOTTOM_SHEET && !update.noForward) {\n        // A local swap transaction is not created if the NBS is closed before the exchange is completed\n        callActionInMain('apiUpdate', { ...update, noForward: true });\n      }\n      const { accountId, activities: incomingActivities, chain } = update;\n\n      global = updateActivitiesIsLoadingByAccount(global, accountId, false);\n\n      const localActivities = selectLocalActivities(global, accountId) ?? [];\n      const { replacedLocalIds, newActivities } = splitReplacedAndNewActivities(localActivities, incomingActivities);\n\n      global = removeActivities(global, accountId, replacedLocalIds.keys());\n      global = addNewActivities(global, accountId, incomingActivities);\n\n      global = replaceCurrentTransferId(global, replacedLocalIds);\n      global = replaceCurrentSwapId(global, replacedLocalIds);\n      global = replaceCurrentActivityId(global, accountId, replacedLocalIds);\n      notifyAboutNewActivities(global, newActivities);\n\n      if (!IS_CORE_WALLET) {\n        // NFT polling is executed at long intervals, so it is more likely that a user will see a new transaction\n        // rather than receiving a card in the collection. Therefore, when a new activity occurs,\n        // we check for a card from the MyTonWallet collection and apply it.\n        global = processCardMintingActivity(global, accountId, incomingActivities);\n      }\n\n      if (chain) {\n        global = setIsInitialActivitiesLoadedTrue(global, accountId, chain);\n      }\n\n      setGlobal(global);\n      break;\n    }\n  }\n});\n\n/**\n * Finds the ids of the local activities that match any of the new blockchain activities (those are to be replaced).\n * Also finds the ids of the blockchain activities that have no matching local activities (those are to be notified about).\n */\nfunction splitReplacedAndNewActivities(localActivities: ApiActivity[], incomingActivities: ApiActivity[]) {\n  const replacedLocalIds = new Map<string, string>();\n  const newActivities: ApiActivity[] = [];\n\n  for (const incomingActivity of incomingActivities) {\n    let hasLocalMatch = false;\n\n    for (const localActivity of localActivities) {\n      if (doesLocalActivityMatch(localActivity, incomingActivity)) {\n        replacedLocalIds.set(localActivity.id, incomingActivity.id);\n        hasLocalMatch = true;\n      }\n    }\n\n    if (!hasLocalMatch) {\n      newActivities.push(incomingActivity);\n    }\n  }\n\n  return { replacedLocalIds, newActivities };\n}\n\n/** Decides whether the local activity matches the activity from the blockchain */\nfunction doesLocalActivityMatch(localActivity: ApiActivity, chainActivity: ApiActivity) {\n  if (localActivity.extra?.withW5Gasless) {\n    if (localActivity.kind === 'transaction' && chainActivity.kind === 'transaction') {\n      return !chainActivity.isIncoming && localActivity.normalizedAddress === chainActivity.normalizedAddress\n        && localActivity.amount === chainActivity.amount\n        && localActivity.slug === chainActivity.slug;\n    } else if (localActivity.kind === 'swap' && chainActivity.kind === 'swap') {\n      return localActivity.from === chainActivity.from\n        && localActivity.to === chainActivity.to\n        && localActivity.fromAmount === chainActivity.fromAmount;\n    }\n  }\n\n  if (localActivity.externalMsgHash) {\n    return localActivity.externalMsgHash === chainActivity.externalMsgHash && !chainActivity.shouldHide;\n  }\n\n  return parseTxId(localActivity.id).hash === parseTxId(chainActivity.id).hash;\n}\n\nfunction notifyAboutNewActivities(global: GlobalState, newActivities: ApiActivity[]) {\n  const shouldPlaySound = newActivities.some((activity) => {\n    return activity.kind === 'transaction'\n      && activity.isIncoming\n      && global.settings.canPlaySounds\n      && (Date.now() - activity.timestamp < TX_AGE_TO_PLAY_SOUND)\n      && !(\n        global.settings.areTinyTransfersHidden\n        && getIsTinyOrScamTransaction(activity, global.tokenInfo?.bySlug[activity.slug!])\n      )\n      && !getIsTransactionWithPoisoning(activity);\n  });\n\n  if (shouldPlaySound) {\n    playIncomingTransactionSound();\n  }\n}\n\nfunction processCardMintingActivity(global: GlobalState, accountId: string, activities: ApiActivity[]): GlobalState {\n  const { isCardMinting } = selectAccountState(global, accountId) || {};\n  const mintCardActivity = isCardMinting\n    ? activities.find((activity) => {\n      return activity.kind === 'transaction'\n        && activity.isIncoming\n        && activity?.nft?.collectionAddress === MTW_CARDS_COLLECTION;\n    })\n    : undefined;\n\n  if (mintCardActivity) {\n    const nft = (mintCardActivity as ApiTransactionActivity).nft!;\n\n    global = updateAccountState(global, accountId, { isCardMinting: undefined });\n    global = addNft(global, accountId, nft);\n    getActions().setCardBackgroundNft({ nft });\n    getActions().installAccentColorFromNft({ nft });\n  }\n\n  return global;\n}\n","import { TransferState } from '../../types';\n\nimport { TONCOIN } from '../../../config';\nimport { processDeeplink } from '../../../util/deeplink';\nimport { callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  clearCurrentDappTransfer,\n  clearCurrentSignature,\n  clearCurrentTransfer,\n  clearDappConnectRequest,\n  updateAccountState,\n  updateCurrentSignature,\n  updateCurrentTransfer,\n} from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'createTransaction': {\n      const {\n        promiseId,\n        amount,\n        toAddress,\n        fee,\n        realFee,\n        comment,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Confirm,\n        toAddress,\n        amount,\n        fee,\n        realFee,\n        comment,\n        promiseId,\n        tokenSlug: TONCOIN.slug,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'createSignature': {\n      const { promiseId, dataHex } = update;\n\n      global = clearCurrentSignature(global);\n      global = updateCurrentSignature(global, {\n        promiseId,\n        dataHex,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'showError': {\n      const { error } = update;\n      actions.showError({ error });\n\n      break;\n    }\n\n    case 'dappConnect': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappConnect', update);\n      }\n\n      actions.apiUpdateDappConnect(update);\n\n      break;\n    }\n\n    case 'dappConnectComplete': {\n      global = clearDappConnectRequest(global);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateActiveDapp': {\n      const { accountId, origin } = update;\n\n      global = updateAccountState(global, accountId, {\n        activeDappOrigin: origin,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'dappDisconnect': {\n      const { accountId, origin } = update;\n      const accountState = selectAccountState(global, accountId);\n\n      if (accountState?.activeDappOrigin === origin) {\n        global = updateAccountState(global, accountId, {\n          activeDappOrigin: undefined,\n        });\n        global = clearCurrentDappTransfer(global);\n        setGlobal(global);\n      }\n      break;\n    }\n\n    case 'dappLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappLoading', update);\n      }\n\n      actions.apiUpdateDappLoading(update);\n\n      break;\n    }\n\n    case 'dappCloseLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappCloseLoading');\n      }\n\n      actions.apiUpdateDappCloseLoading();\n\n      break;\n    }\n\n    case 'dappSendTransactions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappSendTransaction', update);\n      }\n\n      actions.apiUpdateDappSendTransaction(update);\n\n      break;\n    }\n\n    case 'updateDapps': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('getDapps');\n      }\n\n      actions.getDapps();\n      break;\n    }\n\n    case 'prepareTransaction': {\n      const {\n        amount,\n        toAddress,\n        comment,\n        binPayload,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Initial,\n        toAddress,\n        amount: amount ?? 0n,\n        comment,\n        tokenSlug: TONCOIN.slug,\n        binPayload,\n      });\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'processDeeplink': {\n      const { url } = update;\n\n      void processDeeplink(url);\n      break;\n    }\n  }\n});\n","import type { AnimationLevel } from '../global/types';\n\nimport { ANIMATION_LEVEL_MAX, ANIMATION_LEVEL_MED, ANIMATION_LEVEL_MIN } from '../config';\n\nconst ANIMATION_LEVEL_OPTIONS = [\n  ANIMATION_LEVEL_MIN,\n  ANIMATION_LEVEL_MED,\n  ANIMATION_LEVEL_MAX,\n];\n\nexport default function switchAnimationLevel(level: AnimationLevel) {\n  const levelClassName = `animation-level-${level}`;\n  if (document.documentElement.classList.contains(levelClassName)) {\n    return;\n  }\n\n  ANIMATION_LEVEL_OPTIONS.forEach((currentLevel) => {\n    document.documentElement.classList.toggle(`animation-level-${currentLevel}`, currentLevel === level);\n  });\n}\n","/**\n * @since 0.0.1\n */\nexport var BarcodeFormat;\n(function (BarcodeFormat) {\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Aztec\"] = \"AZTEC\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Codabar\"] = \"CODABAR\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code39\"] = \"CODE_39\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code93\"] = \"CODE_93\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code128\"] = \"CODE_128\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"DataMatrix\"] = \"DATA_MATRIX\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean8\"] = \"EAN_8\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean13\"] = \"EAN_13\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Itf\"] = \"ITF\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Pdf417\"] = \"PDF_417\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"QrCode\"] = \"QR_CODE\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcA\"] = \"UPC_A\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcE\"] = \"UPC_E\";\n})(BarcodeFormat || (BarcodeFormat = {}));\n/**\n * @since 0.0.1\n */\nexport var BarcodeValueType;\n(function (BarcodeValueType) {\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"CalendarEvent\"] = \"CALENDAR_EVENT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"ContactInfo\"] = \"CONTACT_INFO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"DriversLicense\"] = \"DRIVERS_LICENSE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Email\"] = \"EMAIL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Geo\"] = \"GEO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Isbn\"] = \"ISBN\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Phone\"] = \"PHONE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Product\"] = \"PRODUCT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Sms\"] = \"SMS\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Text\"] = \"TEXT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Url\"] = \"URL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Wifi\"] = \"WIFI\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Unknown\"] = \"UNKNOWN\";\n})(BarcodeValueType || (BarcodeValueType = {}));\n/**\n * @since 0.0.1\n */\nexport var LensFacing;\n(function (LensFacing) {\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Front\"] = \"FRONT\";\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Back\"] = \"BACK\";\n})(LensFacing || (LensFacing = {}));\n/**\n * @since 5.1.0\n */\nexport var GoogleBarcodeScannerModuleInstallState;\n(function (GoogleBarcodeScannerModuleInstallState) {\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"PENDING\"] = 1] = \"PENDING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOADING\"] = 2] = \"DOWNLOADING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"CANCELED\"] = 3] = \"CANCELED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"COMPLETED\"] = 4] = \"COMPLETED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"FAILED\"] = 5] = \"FAILED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"INSTALLING\"] = 6] = \"INSTALLING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOAD_PAUSED\"] = 7] = \"DOWNLOAD_PAUSED\";\n})(GoogleBarcodeScannerModuleInstallState || (GoogleBarcodeScannerModuleInstallState = {}));\n//# sourceMappingURL=definitions.js.map","import type {\n  Account, AccountSettings, AccountState, NotificationType,\n} from '../../types';\nimport { ApiCommonError, ApiTransactionDraftError, ApiTransactionError } from '../../../api/types';\nimport { AppState } from '../../types';\n\nimport {\n  DEFAULT_SWAP_FISRT_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_TELEGRAM_APP,\n  TONCOIN,\n} from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { initCapacitorWithGlobal } from '../../../util/capacitor';\nimport { processDeeplinkAfterSignIn } from '../../../util/deeplink';\nimport { omit } from '../../../util/iteratees';\nimport { clearPreviousLangpacks, setLanguage } from '../../../util/langProvider';\nimport { callActionInMain } from '../../../util/multitab';\nimport { initializeSounds } from '../../../util/notificationSound';\nimport switchAnimationLevel from '../../../util/switchAnimationLevel';\nimport switchTheme, { setStatusBarStyle } from '../../../util/switchTheme';\nimport { initTelegramWithGlobal } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID,\n  IS_ANDROID_APP,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_IOS,\n  IS_LINUX,\n  IS_MAC_OS,\n  IS_OPERA,\n  IS_SAFARI,\n  IS_WINDOWS,\n  setScrollbarWidthProperty,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateCurrentAccountId, updateCurrentAccountState } from '../../reducers';\nimport {\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n  selectNetworkAccountsMemoized,\n  selectNewestActivityTimestamps,\n  selectSwapTokens,\n} from '../../selectors';\n\nconst ANIMATION_DELAY_MS = 320;\n\naddActionHandler('init', (_, actions) => {\n  requestMutation(() => {\n    const { documentElement } = document;\n\n    if (IS_IOS) {\n      documentElement.classList.add('is-ios', 'is-mobile');\n    } else if (IS_ANDROID) {\n      documentElement.classList.add('is-android', 'is-mobile');\n      if (IS_ANDROID_APP) {\n        documentElement.classList.add('is-android-app');\n      }\n    } else if (IS_MAC_OS) {\n      documentElement.classList.add('is-macos');\n    } else if (IS_WINDOWS) {\n      documentElement.classList.add('is-windows');\n    } else if (IS_LINUX) {\n      documentElement.classList.add('is-linux');\n    }\n    if (IS_SAFARI) {\n      documentElement.classList.add('is-safari');\n    }\n    if (IS_OPERA) {\n      documentElement.classList.add('is-opera');\n    }\n    if (IS_EXTENSION) {\n      documentElement.classList.add('is-extension');\n    }\n    if (IS_ELECTRON) {\n      documentElement.classList.add('is-electron');\n    }\n    if (IS_TELEGRAM_APP) {\n      documentElement.classList.add('is-telegram-app');\n    }\n    if (getIsMobileTelegramApp()) {\n      documentElement.classList.add('is-mobile-telegram-app');\n    }\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      documentElement.classList.add('is-native-bottom-sheet');\n    }\n\n    setScrollbarWidthProperty();\n\n    actions.afterInit();\n  });\n});\n\naddActionHandler('afterInit', (global) => {\n  const {\n    theme, animationLevel, langCode, authConfig,\n  } = global.settings;\n\n  switchTheme(theme);\n  switchAnimationLevel(animationLevel);\n  setStatusBarStyle({\n    forceDarkBackground: false,\n  });\n  void setLanguage(langCode);\n  clearPreviousLangpacks();\n\n  if (IS_CAPACITOR) {\n    void initCapacitorWithGlobal(authConfig);\n  } else {\n    if (IS_TELEGRAM_APP) {\n      initTelegramWithGlobal(global);\n    }\n\n    document.addEventListener('click', initializeSounds, { once: true });\n  }\n});\n\naddActionHandler('afterSignIn', (global, actions) => {\n  setGlobal({ ...global, appState: AppState.Main });\n\n  setTimeout(() => {\n    actions.resetAuth();\n\n    processDeeplinkAfterSignIn();\n  }, ANIMATION_DELAY_MS);\n});\n\naddActionHandler('afterSignOut', (global, actions, payload) => {\n  if (payload?.shouldReset) {\n    if (global.settings.authConfig?.kind === 'native-biometrics') {\n      void authApi.removeNativeBiometrics();\n    }\n\n    actions.resetApiSettings({ areAllDisabled: true });\n  }\n\n  actions.clearSwapPairsCache();\n});\n\naddActionHandler('showDialog', (global, actions, payload) => {\n  const { message, title } = payload;\n\n  const newDialogs = [...global.dialogs];\n  const existingMessageIndex = newDialogs.findIndex((dialog) => dialog.message === message);\n  if (existingMessageIndex !== -1) {\n    newDialogs.splice(existingMessageIndex, 1);\n  }\n\n  newDialogs.push({ message, title });\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('dismissDialog', (global) => {\n  const newDialogs = [...global.dialogs];\n\n  newDialogs.pop();\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('selectToken', (global, actions, { slug } = {}) => {\n  if (slug) {\n    const isToncoin = slug === TONCOIN.slug;\n    const tokens = selectSwapTokens(global);\n\n    if (isToncoin || tokens?.some((token) => token.slug === slug)) {\n      if (isToncoin) {\n        actions.setDefaultSwapParams({ tokenInSlug: DEFAULT_SWAP_SECOND_TOKEN_SLUG, tokenOutSlug: slug });\n      } else {\n        actions.setDefaultSwapParams({ tokenOutSlug: slug });\n      }\n      actions.changeTransferToken({ tokenSlug: slug });\n    }\n  } else {\n    const currentActivityToken = global.byAccountId[global.currentAccountId!].currentTokenSlug;\n\n    const isDefaultFirstTokenOutSwap = global.currentSwap.tokenOutSlug === DEFAULT_SWAP_FISRT_TOKEN_SLUG\n    && global.currentSwap.tokenInSlug === DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n    const shouldResetSwap = global.currentSwap.tokenOutSlug === currentActivityToken\n    && (\n      (\n        global.currentSwap.tokenInSlug === DEFAULT_SWAP_FISRT_TOKEN_SLUG\n        && global.currentSwap.tokenOutSlug !== DEFAULT_SWAP_SECOND_TOKEN_SLUG\n      )\n    || isDefaultFirstTokenOutSwap\n    );\n\n    if (shouldResetSwap) {\n      actions.setDefaultSwapParams({ tokenInSlug: undefined, tokenOutSlug: undefined, withResetAmount: true });\n    }\n\n    const shouldResetTransfer = (global.currentTransfer.tokenSlug === currentActivityToken\n    && global.currentTransfer.tokenSlug !== DEFAULT_TRANSFER_TOKEN_SLUG)\n    && !global.currentTransfer.nfts?.length;\n\n    if (shouldResetTransfer) {\n      actions.changeTransferToken({ tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG, withResetAmount: true });\n    }\n  }\n\n  return updateCurrentAccountState(global, { currentTokenSlug: slug });\n});\n\naddActionHandler('showError', (global, actions, { error } = {}) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showError', { error });\n    return;\n  }\n\n  switch (error) {\n    case ApiTransactionDraftError.InvalidAmount:\n      actions.showDialog({ message: 'Invalid amount' });\n      break;\n\n    case ApiTransactionDraftError.InvalidToAddress:\n      actions.showDialog({ message: 'Invalid address' });\n      break;\n\n    case ApiTransactionDraftError.StateInitWithoutBin:\n      actions.showDialog({ message: '$state_init_requires_bin' });\n      break;\n\n    case ApiTransactionDraftError.InvalidStateInit:\n      actions.showDialog({ message: '$state_init_invalid' });\n      break;\n\n    case ApiTransactionDraftError.InsufficientBalance:\n      actions.showDialog({ message: 'Insufficient balance' });\n      break;\n\n    case ApiTransactionDraftError.DomainNotResolved:\n      actions.showDialog({ message: 'Domain is not connected to a wallet' });\n      break;\n\n    case ApiTransactionDraftError.WalletNotInitialized:\n      actions.showDialog({\n        message: 'Encryption is not possible. The recipient is not a wallet or has no outgoing transactions.',\n      });\n      break;\n\n    case ApiTransactionDraftError.InvalidAddressFormat:\n      actions.showDialog({\n        message: 'Invalid address format. Only URL Safe Base64 format is allowed.',\n      });\n      break;\n\n    case ApiTransactionError.PartialTransactionFailure:\n      actions.showDialog({ message: 'Not all transactions were sent successfully' });\n      break;\n\n    case ApiTransactionError.IncorrectDeviceTime:\n      actions.showDialog({ message: 'The time on your device is incorrect, sync it and try again' });\n      break;\n\n    case ApiTransactionError.UnsuccesfulTransfer:\n      actions.showDialog({ message: 'Transfer was unsuccessful. Try again later.' });\n      break;\n\n    case ApiTransactionDraftError.InactiveContract:\n      actions.showDialog({\n        message: '$transfer_inactive_contract_error',\n      });\n      break;\n\n    case ApiTransactionError.NotSupportedHardwareOperation:\n      actions.showDialog({\n        message: '$ledger_not_supported_operation',\n      });\n      break;\n\n    case ApiCommonError.ServerError:\n      actions.showDialog({\n        message: window.navigator.onLine\n          ? 'An error on the server side. Please try again.'\n          : 'No internet connection. Please check your connection and try again.',\n      });\n      break;\n\n    case ApiCommonError.DebugError:\n      actions.showDialog({ message: 'Unexpected error. Please let the support know.' });\n      break;\n\n    case ApiCommonError.Unexpected:\n    case undefined:\n      actions.showDialog({ message: 'Unexpected' });\n      break;\n\n    default:\n      actions.showDialog({ message: error });\n      break;\n  }\n});\n\naddActionHandler('showNotification', (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showNotification', payload);\n    return undefined;\n  }\n\n  const { message, icon } = payload;\n\n  const newNotifications: NotificationType[] = [...global.notifications];\n  const existingNotificationIndex = newNotifications.findIndex((n) => n.message === message);\n  if (existingNotificationIndex !== -1) {\n    newNotifications.splice(existingNotificationIndex, 1);\n  }\n\n  newNotifications.push({ message, icon });\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('dismissNotification', (global) => {\n  const newNotifications = [...global.notifications];\n\n  newNotifications.pop();\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('toggleTonProxy', (global, actions, { isEnabled }) => {\n  void callApi('doProxy', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonProxyEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleTonMagic', (global, actions, { isEnabled }) => {\n  void callApi('doMagic', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonMagicEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleDeeplinkHook', (global, actions, { isEnabled }) => {\n  if (IS_ELECTRON) {\n    void window.electron?.toggleDeeplinkHandler(isEnabled);\n  } else {\n    void callApi('doDeeplinkHook', isEnabled);\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isDeeplinkHookEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('signOut', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('signOut', payload);\n  }\n\n  const { level } = payload;\n\n  const network = selectCurrentNetwork(global);\n  const accounts = selectNetworkAccounts(global)!;\n  const accountIds = Object.keys(accounts);\n  const isFromAllAccounts = level !== 'account';\n\n  const otherNetwork = network === 'mainnet' ? 'testnet' : 'mainnet';\n  let otherNetworkAccountIds = Object.keys(selectNetworkAccountsMemoized(otherNetwork, global.accounts?.byId)!);\n\n  if (level === 'all' && otherNetworkAccountIds.length > 0) {\n    await callApi('removeNetworkAccounts', otherNetwork);\n    otherNetworkAccountIds = [];\n  }\n\n  if (isFromAllAccounts || accountIds.length === 1) {\n    actions.deleteAllNotificationAccounts({ accountIds });\n    if (otherNetworkAccountIds.length) {\n      await callApi('removeNetworkAccounts', network);\n\n      global = getGlobal();\n\n      const nextAccountId = otherNetworkAccountIds[0];\n      const accountsById = Object.entries(global.accounts!.byId).reduce((byId, [accountId, account]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = account;\n        }\n        return byId;\n      }, {} as Record<string, Account>);\n      const byAccountId = Object.entries(global.byAccountId).reduce((byId, [accountId, state]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = state;\n        }\n        return byId;\n      }, {} as Record<string, AccountState>);\n\n      const settingsById = Object.entries(global.settings.byAccountId).reduce((byId, [accountId, settings]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = settings;\n        }\n        return byId;\n      }, {} as Record<string, AccountSettings>);\n\n      global = updateCurrentAccountId(global, nextAccountId);\n\n      global = {\n        ...global,\n        accounts: {\n          ...global.accounts!,\n          byId: accountsById,\n        },\n        byAccountId,\n        settings: {\n          ...global.settings,\n          byAccountId: settingsById,\n        },\n      };\n\n      setGlobal(global);\n\n      actions.switchAccount({ accountId: nextAccountId, newNetwork: otherNetwork });\n      actions.closeSettings();\n      actions.afterSignOut();\n    } else {\n      await callApi('resetAccounts');\n\n      actions.afterSignOut({ shouldReset: true });\n      actions.init();\n    }\n  } else {\n    const prevAccountId = global.currentAccountId!;\n    const nextAccountId = accountIds.find((id) => id !== prevAccountId)!;\n    const nextNewestActivityTimestamps = selectNewestActivityTimestamps(global, nextAccountId);\n\n    await callApi('removeAccount', prevAccountId, nextAccountId, nextNewestActivityTimestamps);\n    actions.deleteNotificationAccount({ accountId: prevAccountId });\n\n    global = getGlobal();\n\n    const accountsById = omit(global.accounts!.byId, [prevAccountId]);\n    const byAccountId = omit(global.byAccountId, [prevAccountId]);\n    const settingsByAccountId = omit(global.settings.byAccountId, [prevAccountId]);\n\n    global = updateCurrentAccountId(global, nextAccountId);\n\n    global = {\n      ...global,\n      accounts: {\n        ...global.accounts!,\n        byId: accountsById,\n      },\n      byAccountId,\n      settings: {\n        ...global.settings,\n        byAccountId: settingsByAccountId,\n      },\n    };\n\n    setGlobal(global);\n\n    actions.afterSignOut();\n  }\n});\n","import { registerPlugin } from '@capacitor/core';\nconst BarcodeScanner = registerPlugin('BarcodeScanner', {\n    web: () => import('./web').then(m => new m.BarcodeScannerWeb()),\n});\nexport * from './definitions';\nexport { BarcodeScanner };\n//# sourceMappingURL=index.js.map","const APP_VERSION_REGEX = /^\\d+\\.\\d+(\\.\\d+)?$/;\n\nexport default function getIsAppUpdateNeeded(remoteVersion: string, appVersion: string, isStrict?: boolean) {\n  const sanitizedRemoteVersion = remoteVersion.trim();\n\n  if (!APP_VERSION_REGEX.test(sanitizedRemoteVersion)) {\n    return false;\n  }\n\n  if (isStrict) {\n    return sanitizedRemoteVersion.localeCompare(appVersion, undefined, { numeric: true, sensitivity: 'base' }) === 1;\n  }\n\n  return sanitizedRemoteVersion !== appVersion;\n}\n","export const DETACHED_TAB_URL = '#detached';\n\nlet ledgerTabId: number | undefined;\n\nexport function openLedgerTab() {\n  return createLedgerTab();\n}\n\nexport async function closeLedgerTab() {\n  if (!ledgerTabId) return;\n\n  await chrome.tabs.query({ active: true }, () => {\n    if (!ledgerTabId) return;\n\n    void chrome.tabs.remove(ledgerTabId);\n  });\n}\n\nexport function onLedgerTabClose(id: number, onClose: () => void) {\n  chrome.tabs.onRemoved.addListener((closedTabId: number) => {\n    if (closedTabId !== id) {\n      return;\n    }\n\n    ledgerTabId = undefined;\n\n    onClose();\n  });\n}\n\nasync function createLedgerTab() {\n  const tab = await chrome.tabs.create({ url: `index.html${DETACHED_TAB_URL}`, active: true });\n  await chrome.windows.update(tab.windowId!, { focused: true });\n\n  ledgerTabId = tab.id!;\n\n  return ledgerTabId;\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { AppTheme, Theme } from '../global/types';\n\nimport useLastCallback from './useLastCallback';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\n\nfunction useAppTheme(currentTheme: Theme) {\n  const [theme, setTheme] = useState<AppTheme>(\n    currentTheme === 'system'\n      ? (prefersDark.matches ? 'dark' : 'light')\n      : currentTheme,\n  );\n\n  const handlePrefersColorSchemeChange = useLastCallback(() => {\n    setTheme(() => {\n      if (currentTheme === 'system') {\n        return prefersDark.matches ? 'dark' : 'light';\n      }\n\n      return currentTheme;\n    });\n  });\n\n  useEffect(() => {\n    if (currentTheme !== 'system') return undefined;\n\n    prefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\n    return () => {\n      prefersDark.removeEventListener('change', handlePrefersColorSchemeChange);\n    };\n  }, [currentTheme]);\n\n  handlePrefersColorSchemeChange();\n\n  return theme;\n}\n\nexport default useAppTheme;\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useFlag = (initial = false, debugKey?: string): [boolean, NoneToVoidFunction, NoneToVoidFunction] => {\n  const [value, setValue] = useState(initial, debugKey);\n\n  const setTrue = useCallback(() => {\n    setValue(true);\n  }, []);\n\n  const setFalse = useCallback(() => {\n    setValue(false);\n  }, []);\n\n  return [value, setTrue, setFalse];\n};\n\nexport default useFlag;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { getHotkeyMatcher } from '../util/parseHotkey';\n\nconst IGNORE_TAGS = new Set(['INPUT', 'TEXTAREA', 'SELECT']);\n\nconst handlers = createCallbackManager();\ndocument.documentElement.addEventListener('keydown', handlers.runCallbacks);\n\nexport function useHotkeys(hotkeys?: Record<string, (e: KeyboardEvent) => void>) {\n  useEffect(() => {\n    if (!hotkeys) {\n      return undefined;\n    }\n\n    const entries = Object.entries(hotkeys);\n\n    function handleKeyDown(e: KeyboardEvent) {\n      if (!shouldFireEvent(e)) {\n        return;\n      }\n\n      entries.forEach(([hotkey, handler]) => {\n        if (getHotkeyMatcher(hotkey)(e)) {\n          handler(e);\n        }\n      });\n    }\n\n    return handlers.addCallback(handleKeyDown);\n  }, [hotkeys]);\n}\n\nfunction shouldFireEvent(e: KeyboardEvent) {\n  if (e.target instanceof HTMLElement) {\n    return !IGNORE_TAGS.has(e.target.tagName);\n  }\n\n  return true;\n}\n","// Original source from Mantine\n// https://github.com/mantinedev/mantine/blob/master/src/mantine-hooks/src/use-hotkeys/parse-hotkey.ts\n\nexport type KeyboardModifiers = {\n  alt: boolean;\n  ctrl: boolean;\n  meta: boolean;\n  mod: boolean;\n  shift: boolean;\n};\n\nexport type Hotkey = KeyboardModifiers & {\n  key?: string;\n};\n\ntype CheckHotkeyMatch = (event: KeyboardEvent) => boolean;\n\nexport function parseHotkey(hotkey: string): Hotkey {\n  const keys = hotkey\n    .toLowerCase()\n    .split('+')\n    .map((part) => part.trim());\n\n  const modifiers: KeyboardModifiers = {\n    alt: keys.includes('alt'),\n    ctrl: keys.includes('ctrl'),\n    meta: keys.includes('meta'),\n    mod: keys.includes('mod'),\n    shift: keys.includes('shift'),\n  };\n\n  const reservedKeys = ['alt', 'ctrl', 'meta', 'shift', 'mod'];\n\n  const freeKey = keys.find((key) => !reservedKeys.includes(key));\n\n  return {\n    ...modifiers,\n    key: freeKey,\n  };\n}\n\nfunction isExactHotkey(hotkey: Hotkey, event: KeyboardEvent): boolean {\n  const {\n    alt, ctrl, meta, mod, shift, key,\n  } = hotkey;\n  const {\n    altKey, ctrlKey, metaKey, shiftKey, key: pressedKey,\n  } = event;\n\n  if (alt !== altKey) {\n    return false;\n  }\n\n  if (mod) {\n    if (!ctrlKey && !metaKey) {\n      return false;\n    }\n  } else {\n    if (ctrl !== ctrlKey) {\n      return false;\n    }\n    if (meta !== metaKey) {\n      return false;\n    }\n  }\n  if (shift !== shiftKey) {\n    return false;\n  }\n\n  return Boolean(key\n    && (pressedKey.toLowerCase() === key.toLowerCase()\n      || event.code.replace('Key', '').toLowerCase() === key.toLowerCase()));\n}\n\nexport function getHotkeyMatcher(hotkey: string): CheckHotkeyMatch {\n  return (event) => isExactHotkey(parseHotkey(hotkey), event);\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { throttle, throttleWith } from '../util/schedulers';\n\nexport default function useThrottledCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    if (typeof msOrSchedulerFn === 'number') {\n      return throttle(fnMemo, msOrSchedulerFn, !noFirst);\n    } else {\n      return throttleWith(msOrSchedulerFn, fnMemo);\n    }\n  }, [fnMemo, msOrSchedulerFn, noFirst]);\n}\n","export const preloadedImageUrls = new Set();\n\nexport function preloadImage(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      preloadedImageUrls.add(url);\n      resolve(img);\n    };\n    img.onerror = reject;\n    img.src = url;\n  });\n}\n","import useShowTransition from './useShowTransition';\n\nexport default function useMediaTransition(mediaData?: any) {\n  const isMediaReady = Boolean(mediaData);\n  const { transitionClassNames } = useShowTransition(isMediaReady, undefined, isMediaReady, 'slow');\n\n  return transitionClassNames;\n}\n","import React, { memo, useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { preloadedImageUrls } from '../../util/preloadImage';\n\nimport useFlag from '../../hooks/useFlag';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\ninterface OwnProps {\n  url: string;\n  alt?: string;\n  loading?: 'lazy' | 'eager';\n  className?: string;\n  imageClassName?: string;\n}\n\nfunction ImageComponent({\n  url,\n  alt,\n  loading,\n  className,\n  imageClassName,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLImageElement>(null);\n  const [isLoaded, markIsLoaded] = useFlag(preloadedImageUrls.has(url));\n\n  const handleLoad = () => {\n    markIsLoaded();\n    preloadedImageUrls.add(url);\n  };\n\n  const transitionClassNames = useMediaTransition(isLoaded);\n\n  return (\n    <div className={buildClassName(transitionClassNames, className)}>\n      <img\n        ref={ref}\n        src={url}\n        alt={alt}\n        loading={loading}\n        className={imageClassName}\n        draggable={false}\n        referrerPolicy=\"same-origin\"\n        onLoad={!isLoaded ? handleLoad : undefined}\n      />\n    </div>\n  );\n}\n\nexport default memo(ImageComponent);\n","import { IS_CORE_WALLET } from '../../../config';\n\nimport iconAddDark from '../../../assets/lottie/add_dark.tgs';\nimport iconAddLight from '../../../assets/lottie/add_light.tgs';\nimport iconClockDark from '../../../assets/lottie/clock_dark.tgs';\nimport iconClockDarkBlue from '../../../assets/lottie/clock_dark_blue.tgs';\nimport iconClockDarkGray from '../../../assets/lottie/clock_dark_gray.tgs';\nimport iconClockDarkGreen from '../../../assets/lottie/clock_dark_green.tgs';\nimport iconClockDarkPurple from '../../../assets/lottie/clock_dark_purple.tgs';\nimport iconClockDarkPurpleWhite from '../../../assets/lottie/clock_dark_purple_white.tgs';\nimport iconClockDarkRed from '../../../assets/lottie/clock_dark_red.tgs';\nimport iconClockLight from '../../../assets/lottie/clock_light.tgs';\nimport iconClockLightBlue from '../../../assets/lottie/clock_light_blue.tgs';\nimport iconClockLightGray from '../../../assets/lottie/clock_light_gray.tgs';\nimport iconClockLightGreen from '../../../assets/lottie/clock_light_green.tgs';\nimport iconClockLightPurple from '../../../assets/lottie/clock_light_purple.tgs';\nimport iconClockLightPurpleWhite from '../../../assets/lottie/clock_light_purple_white.tgs';\nimport iconClockLightRed from '../../../assets/lottie/clock_light_red.tgs';\nimport iconClockWhite from '../../../assets/lottie/clock_white.tgs';\nimport coreWalletLogo from '../../../assets/lottie/core_wallet_logo.tgs';\nimport bill from '../../../assets/lottie/duck_bill.tgs';\nimport forge from '../../../assets/lottie/duck_forges.tgs';\nimport guard from '../../../assets/lottie/duck_guard.tgs';\nimport happy from '../../../assets/lottie/duck_happy.tgs';\nimport hello from '../../../assets/lottie/duck_hello.tgs';\nimport noData from '../../../assets/lottie/duck_no-data.tgs';\nimport run from '../../../assets/lottie/duck_run.tgs';\nimport snitch from '../../../assets/lottie/duck_snitch.tgs';\nimport thumbUp from '../../../assets/lottie/duck_thumb.tgs';\nimport holdTon from '../../../assets/lottie/duck_ton.tgs';\nimport wait from '../../../assets/lottie/duck_wait.tgs';\nimport yeee from '../../../assets/lottie/duck_yeee.tgs';\nimport iconEarnDark from '../../../assets/lottie/earn_dark.tgs';\nimport iconEarnDarkPurple from '../../../assets/lottie/earn_dark_purple.tgs';\nimport iconEarnLight from '../../../assets/lottie/earn_light.tgs';\nimport iconEarnLightPurple from '../../../assets/lottie/earn_light_purple.tgs';\nimport iconSendDark from '../../../assets/lottie/send_dark.tgs';\nimport iconSendLight from '../../../assets/lottie/send_light.tgs';\nimport iconSwapDark from '../../../assets/lottie/swap_dark.tgs';\nimport iconSwapLight from '../../../assets/lottie/swap_light.tgs';\nimport iconClockPreviewDark from '../../../assets/lottiePreview/clock_dark.svg';\nimport iconClockPreviewDarkBlue from '../../../assets/lottiePreview/clock_dark_blue.svg';\nimport iconClockPreviewDarkGray from '../../../assets/lottiePreview/clock_dark_gray.svg';\nimport iconClockPreviewDarkGreen from '../../../assets/lottiePreview/clock_dark_green.svg';\nimport iconClockPreviewDarkPurple from '../../../assets/lottiePreview/clock_dark_purple.svg';\nimport iconClockPreviewDarkPurpleWhite from '../../../assets/lottiePreview/clock_dark_purple_white.svg';\nimport iconClockPreviewDarkRed from '../../../assets/lottiePreview/clock_dark_red.svg';\nimport iconClockPreviewLight from '../../../assets/lottiePreview/clock_light.svg';\nimport iconClockPreviewLightBlue from '../../../assets/lottiePreview/clock_light_blue.svg';\nimport iconClockPreviewLightGray from '../../../assets/lottiePreview/clock_light_gray.svg';\nimport iconClockPreviewLightGreen from '../../../assets/lottiePreview/clock_light_green.svg';\nimport iconClockPreviewLightPurple from '../../../assets/lottiePreview/clock_light_purple.svg';\nimport iconClockPreviewLightPurpleWhite from '../../../assets/lottiePreview/clock_light_purple_white.svg';\nimport iconClockPreviewLightRed from '../../../assets/lottiePreview/clock_light_red.svg';\nimport iconClockPreviewWhite from '../../../assets/lottiePreview/clock_white.svg';\nimport coreWalletLogoPreview from '../../../assets/lottiePreview/core_wallet_logo.png';\nimport billPreview from '../../../assets/lottiePreview/duck_bill.png';\nimport forgePreview from '../../../assets/lottiePreview/duck_forges.png';\nimport guardPreview from '../../../assets/lottiePreview/duck_guard.png';\nimport happyPreview from '../../../assets/lottiePreview/duck_happy.png';\nimport helloPreview from '../../../assets/lottiePreview/duck_hello.png';\nimport noDataPreview from '../../../assets/lottiePreview/duck_no-data.png';\nimport runPreview from '../../../assets/lottiePreview/duck_run.png';\nimport snitchPreview from '../../../assets/lottiePreview/duck_snitch.png';\nimport thumbUpPreview from '../../../assets/lottiePreview/duck_thumb.png';\nimport holdTonPreview from '../../../assets/lottiePreview/duck_ton.png';\nimport waitPreview from '../../../assets/lottiePreview/duck_wait.png';\nimport yeeePreview from '../../../assets/lottiePreview/duck_yeee.png';\n\nexport const ANIMATED_STICKERS_PATHS = {\n  hello,\n  snitch,\n  bill,\n  thumbUp,\n  holdTon,\n  happy,\n  noData,\n  forge,\n  wait,\n  run,\n  yeee,\n  guard,\n  helloPreview,\n  snitchPreview,\n  billPreview,\n  thumbUpPreview,\n  holdTonPreview,\n  happyPreview,\n  noDataPreview,\n  forgePreview,\n  waitPreview,\n  runPreview,\n  yeeePreview,\n  guardPreview,\n  ...(IS_CORE_WALLET && {\n    coreWalletLogo,\n    coreWalletLogoPreview,\n  }),\n  clockWhite: iconClockWhite,\n  clockWhitePreview: iconClockPreviewWhite,\n  light: {\n    iconAdd: iconAddLight,\n    iconClock: iconClockLight,\n    iconClockBlue: iconClockLightBlue,\n    iconClockGray: iconClockLightGray,\n    iconClockGreen: iconClockLightGreen,\n    iconClockPurple: iconClockLightPurple,\n    iconClockPurpleWhite: iconClockLightPurpleWhite,\n    iconClockRed: iconClockLightRed,\n    iconEarn: iconEarnLight,\n    iconEarnPurple: iconEarnLightPurple,\n    iconSend: iconSendLight,\n    iconSwap: iconSwapLight,\n    preview: {\n      iconClock: iconClockPreviewLight,\n      iconClockBlue: iconClockPreviewLightBlue,\n      iconClockGray: iconClockPreviewLightGray,\n      iconClockGreen: iconClockPreviewLightGreen,\n      iconClockPurple: iconClockPreviewLightPurple,\n      iconClockPurpleWhite: iconClockPreviewLightPurpleWhite,\n      iconClockRed: iconClockPreviewLightRed,\n    },\n  },\n  dark: {\n    iconAdd: iconAddDark,\n    iconClock: iconClockDark,\n    iconClockBlue: iconClockDarkBlue,\n    iconClockGray: iconClockDarkGray,\n    iconClockGreen: iconClockDarkGreen,\n    iconClockPurple: iconClockDarkPurple,\n    iconClockPurpleWhite: iconClockDarkPurpleWhite,\n    iconClockRed: iconClockDarkRed,\n    iconEarn: iconEarnDark,\n    iconEarnPurple: iconEarnDarkPurple,\n    iconSend: iconSendDark,\n    iconSwap: iconSwapDark,\n    preview: {\n      iconClock: iconClockPreviewDark,\n      iconClockBlue: iconClockPreviewDarkBlue,\n      iconClockGray: iconClockPreviewDarkGray,\n      iconClockGreen: iconClockPreviewDarkGreen,\n      iconClockPurple: iconClockPreviewDarkPurple,\n      iconClockPurpleWhite: iconClockPreviewDarkPurpleWhite,\n      iconClockRed: iconClockPreviewDarkRed,\n    },\n  },\n};\n","import type { RefObject } from 'react';\nimport { useEffect } from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst DEFAULT_DURATION = 400;\n\nexport default function useFocusAfterAnimation(\n  ref: RefObject<HTMLInputElement>, isDisabled = false, animationDuration = DEFAULT_DURATION,\n) {\n  useEffect(() => {\n    if (IS_TOUCH_ENV || isDisabled) {\n      return;\n    }\n\n    setTimeout(() => {\n      ref.current?.focus();\n    }, animationDuration);\n  }, [ref, animationDuration, isDisabled]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"QlVPgZym\",\"hidden\":\"YMl6tuqD\",\"button\":\"A4iuMrwm\",\"active\":\"lTI19L4Y\",\"icon\":\"Q6nK70OA\",\"label\":\"Hzc2OPCD\"};","import React, { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { ContentTab } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { createSignal } from '../../../../util/signals';\n\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\n\nimport styles from './BottomBar.module.scss';\n\ninterface StateProps {\n  areSettingsOpen?: boolean;\n  areAssetsActive?: boolean;\n  isExploreOpen?: boolean;\n}\n\nconst [getHideCounter, setHideCounter] = createSignal(0);\n\nexport function hideBottomBar() {\n  const currentCounter = getHideCounter();\n  setHideCounter(currentCounter + 1);\n}\n\nexport function showBottomBar() {\n  const currentCounter = getHideCounter();\n  setHideCounter(Math.max(0, currentCounter - 1));\n}\n\nfunction getIsBottomBarHidden() {\n  return getHideCounter() > 0;\n}\n\nfunction BottomBar({ areSettingsOpen, areAssetsActive, isExploreOpen }: StateProps) {\n  const {\n    openSettings, closeSettings, setActiveContentTab, closeSiteCategory, selectToken, openExplore, closeExplore,\n  } = getActions();\n  const lang = useLang();\n  const [isHidden, setIsHidden] = useState(getIsBottomBarHidden());\n  const isWalletTabActive = !isExploreOpen && !areSettingsOpen;\n\n  useEffectOnce(() => {\n    return getHideCounter.subscribe(() => {\n      setIsHidden(getIsBottomBarHidden());\n    });\n  });\n\n  const handleWalletClick = useLastCallback(() => {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n\n    if (!areAssetsActive && isWalletTabActive) {\n      selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n      setActiveContentTab({ tab: ContentTab.Assets }, { forceOnHeavyAnimation: true });\n    }\n  });\n\n  const handleExploreClick = useLastCallback(() => {\n    if (isExploreOpen) {\n      closeSiteCategory(undefined, { forceOnHeavyAnimation: true });\n    }\n\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n    openExplore(undefined, { forceOnHeavyAnimation: true });\n  });\n\n  const handleSettingsClick = useLastCallback(() => {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    openSettings(undefined, { forceOnHeavyAnimation: true });\n  });\n\n  useHistoryBack({\n    isActive: isExploreOpen,\n    onBack: handleWalletClick,\n  });\n\n  return (\n    <div className={buildClassName(styles.root, isHidden && styles.hidden)}>\n      <Button\n        isSimple\n        className={buildClassName(styles.button, isWalletTabActive && styles.active)}\n        onClick={handleWalletClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-wallet')} />\n        <span className={styles.label}>{lang('Wallet')}</span>\n      </Button>\n      {!IS_CORE_WALLET && (\n        <Button\n          isSimple\n          className={buildClassName(styles.button, isExploreOpen && styles.active)}\n          onClick={handleExploreClick}\n        >\n          <i className={buildClassName(styles.icon, 'icon-explore')} />\n          <span className={styles.label}>{lang('Explore')}</span>\n        </Button>\n      )}\n      <Button\n        isSimple\n        className={buildClassName(styles.button, areSettingsOpen && styles.active)}\n        onClick={handleSettingsClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-settings')} />\n        <span className={styles.label}>{lang('Settings')}</span>\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { areSettingsOpen, isExploreOpen } = global;\n  const { activeContentTab } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    areSettingsOpen,\n    areAssetsActive: activeContentTab === ContentTab.Assets,\n    isExploreOpen,\n  };\n})(BottomBar));\n","import { useEffect } from '../lib/teact/teact';\n\nimport { hideBottomBar, showBottomBar } from '../components/main/sections/Actions/BottomBar';\n\n// Use this hook when you need to temporarily hide the bottom bar on a screen, for example,\n// when assumes the use of the entire screen height - `PasswordForm` with biometrics\nexport default function useHideBottomBar(isHidden: boolean) {\n  useEffect(() => {\n    if (!isHidden) return undefined;\n\n    hideBottomBar();\n\n    return showBottomBar;\n  }, [isHidden]);\n}\n","type Parts = (string | false | undefined)[];\n\nexport default function buildStyle(...parts: Parts) {\n  return parts.filter(Boolean).join(';');\n}\n","type RLottieClass = typeof import('./RLottie').default;\n\nlet promise: Promise<RLottieClass>;\nlet RLottie: RLottieClass;\n\n// Time for the main interface to completely load\nconst LOTTIE_LOAD_DELAY = 3000;\n\nexport async function ensureRLottie() {\n  if (!promise) {\n    promise = import('./RLottie').then((module) => module.default);\n    RLottie = await promise;\n  }\n\n  return promise;\n}\n\nexport function getRLottie() {\n  return RLottie;\n}\n\nsetTimeout(ensureRLottie, LOTTIE_LOAD_DELAY);\n","export type RGBColor = [number, number, number];\n\nexport function hex2rgb(param: string): RGBColor {\n  const hex = param.replace('#', '');\n  return [\n    parseInt(hex.substring(0, 2), 16),\n    parseInt(hex.substring(2, 4), 16),\n    parseInt(hex.substring(4, 6), 16),\n  ];\n}\n\nexport default function rgbToHex(rgb: [number, number, number]) {\n  return `#${rgb.map((x) => {\n    const hex = x.toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n  }).join('')}`;\n}\n\nexport function euclideanDistance(color1: RGBColor, color2: RGBColor): number {\n  const r = 0.3 * ((color1[0] - color2[0]) ** 2);\n  const g = 0.59 * ((color1[1] - color2[1]) ** 2);\n  const b = 0.11 * ((color1[2] - color2[2]) ** 2);\n\n  return Math.sqrt(r + g + b);\n}\n\nfunction rgbToLab(rgb: RGBColor): RGBColor {\n  let [r, g, b] = rgb.map((value) => value / 255);\n  [r, g, b] = [r, g, b].map((value) => (value > 0.04045 ? ((value + 0.055) / 1.055) ** 2.4 : value / 12.92));\n\n  let x = r * 0.4124 + g * 0.3576 + b * 0.1805;\n  let y = r * 0.2126 + g * 0.7152 + b * 0.0722;\n  let z = r * 0.0193 + g * 0.1192 + b * 0.9505;\n\n  [x, y, z] = [x / 0.95047, y, z / 1.08883].map(\n    (value) => (value > 0.008856 ? value ** (1 / 3) : (7.787 * value) + 16 / 116),\n  );\n\n  return [(116 * y) - 16, 500 * (x - y), 200 * (y - z)];\n}\n\n/**\n * Calculates the perceptual difference between two RGB colors.\n *\n * Delta E is a metric for understanding how the human eye perceives color difference.\n * The following table provides a general guideline:\n *\n * Delta E  |  Perception\n * ---------|-------------------------------------------\n * <= 1.0   | Not perceptible by human eyes.\n * 1 - 2    | Perceptible through close observation.\n * 2 - 10   | Perceptible at a glance.\n * 11 - 49  | Colors are more similar than opposite.\n * 100      | Colors are exact opposite.\n *\n * @param rgbA The first color as an RGB array.\n * @param rgbB The second color as an RGB array.\n * @returns The Delta E value representing the color difference.\n */\nexport function deltaE(rgbA: RGBColor, rgbB: RGBColor): number {\n  const [l1, a1, b1] = rgbToLab(rgbA);\n  const [l2, a2, b2] = rgbToLab(rgbB);\n\n  const c1 = Math.sqrt(a1 * a1 + b1 * b1);\n  const c2 = Math.sqrt(a2 * a2 + b2 * b2);\n  const deltaC = c1 - c2;\n\n  const deltaL = l1 - l2;\n  const deltaA = a1 - a2;\n  const deltaB = b1 - b2;\n\n  const deltaH = Math.sqrt(deltaA * deltaA + deltaB * deltaB - deltaC * deltaC);\n\n  const sl = 1.0;\n  const sc = 1.0 + 0.045 * c1;\n  const sh = 1.0 + 0.015 * c1;\n\n  const deltaLKlsl = deltaL / sl;\n  const deltaCkcsc = deltaC / sc;\n  const deltaHkhsh = deltaH / sh;\n\n  return Math.sqrt(deltaLKlsl * deltaLKlsl + deltaCkcsc * deltaCkcsc + deltaHkhsh * deltaHkhsh);\n}\n","import {\n  getIsHeavyAnimating,\n  useCallback, useEffect, useMemo, useRef,\n} from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nexport const startCallbacks = createCallbackManager();\nexport const endCallbacks = createCallbackManager();\n\ngetIsHeavyAnimating.subscribe(() => {\n  if (getIsHeavyAnimating()) {\n    startCallbacks.runCallbacks();\n  } else {\n    endCallbacks.runCallbacks();\n  }\n});\n\nexport default function useHeavyAnimation(\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsHeavyAnimating()) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnEnd, lastOnStart]);\n}\n\n// TODO  `onFullyIdle`?\nexport function useThrottleForHeavyAnimation<T extends AnyToVoidFunction>(afterHeavyAnimation: T, deps: unknown[]) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(afterHeavyAnimation, deps);\n\n  const isScheduledRef = useRef(false);\n\n  return useMemo(() => {\n    return (...args: Parameters<T>) => {\n      if (!isScheduledRef.current) {\n        if (!getIsHeavyAnimating()) {\n          fnMemo(...args);\n          return;\n        }\n\n        isScheduledRef.current = true;\n\n        const removeCallback = endCallbacks.addCallback(() => {\n          fnMemo(...args);\n          removeCallback();\n          isScheduledRef.current = false;\n        });\n      }\n    };\n  }, [fnMemo]);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nconst startCallbacks = createCallbackManager();\nconst endCallbacks = createCallbackManager();\n\nlet timeout: number | undefined;\nlet isActive = false;\n\nconst usePriorityPlaybackCheck = (\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) => {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (isActive) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnStart, lastOnEnd]);\n};\n\nexport function isPriorityPlaybackActive() {\n  return isActive;\n}\n\nexport function dispatchPriorityPlaybackEvent() {\n  if (!isActive) {\n    isActive = true;\n    startCallbacks.runCallbacks();\n  }\n\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = undefined;\n  }\n\n  // Race condition may happen if another `dispatchPriorityPlaybackEvent` is called before `onEnd`\n  function onEnd() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n\n    isActive = false;\n    endCallbacks.runCallbacks();\n  }\n\n  return onEnd;\n}\n\nexport default usePriorityPlaybackCheck;\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { CallbackManager } from '../util/callbacks';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { useStateRef } from './useStateRef';\n\nconst elementObserverMap = new Map<HTMLElement, [IntersectionObserver, CallbackManager]>();\n\nexport default function useSharedIntersectionObserver(\n  refOrElement: React.RefObject<HTMLElement> | HTMLElement | undefined,\n  onIntersectionChange: (entry: IntersectionObserverEntry) => void,\n  isDisabled = false,\n) {\n  const onIntersectionChangeRef = useStateRef(onIntersectionChange);\n\n  useEffect(() => {\n    const el = refOrElement && 'current' in refOrElement ? refOrElement.current : refOrElement;\n    if (!el || isDisabled) {\n      return undefined;\n    }\n\n    const callback: IntersectionObserverCallback = ([entry]) => {\n      // Ignore updates when element is not properly mounted (`display: none`)\n      if (!(entry.target as HTMLElement).offsetWidth || !(entry.target as HTMLElement).offsetHeight) {\n        return;\n      }\n\n      onIntersectionChangeRef.current(entry);\n    };\n\n    let [observer, callbackManager] = elementObserverMap.get(el) || [undefined, undefined];\n    if (!observer) {\n      callbackManager = createCallbackManager();\n      observer = new IntersectionObserver(callbackManager.runCallbacks);\n      elementObserverMap.set(el, [observer, callbackManager]);\n      observer.observe(el);\n    }\n    callbackManager!.addCallback(callback);\n\n    return () => {\n      callbackManager!.removeCallback(callback);\n      if (!callbackManager!.hasCallbacks()) {\n        observer!.unobserve(el);\n        observer!.disconnect();\n        elementObserverMap.delete(el);\n      }\n    };\n  }, [isDisabled, onIntersectionChangeRef, refOrElement]);\n}\n","import type { RefObject } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport React, {\n  getIsHeavyAnimating, memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type RLottieInstance from '../../lib/rlottie/RLottie';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport { ensureRLottie, getRLottie } from '../../lib/rlottie/RLottie.async';\nimport buildStyle from '../../util/buildStyle';\nimport { hex2rgb } from '../../util/colors';\nimport generateUniqueId from '../../util/generateUniqueId';\nimport { IS_ELECTRON, IS_IOS } from '../../util/windowEnvironment';\n\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHeavyAnimation from '../../hooks/useHeavyAnimation';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePriorityPlaybackCheck, { isPriorityPlaybackActive } from '../../hooks/usePriorityPlaybackCheck';\nimport useSharedIntersectionObserver from '../../hooks/useSharedIntersectionObserver';\nimport { useStateRef } from '../../hooks/useStateRef';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useThrottledCallback from '../../hooks/useThrottledCallback';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport type OwnProps = {\n  ref?: RefObject<HTMLDivElement>;\n  renderId?: string;\n  className?: string;\n  style?: string;\n  tgsUrl?: string;\n  play?: boolean | string;\n  playSegment?: [number, number];\n  speed?: number;\n  noLoop?: boolean;\n  size: number;\n  shouldStretch?: boolean;\n  quality?: number;\n  color?: string;\n  isLowPriority?: boolean;\n  forceOnHeavyAnimation?: boolean;\n  forceInBackground?: boolean;\n  sharedCanvas?: HTMLCanvasElement;\n  sharedCanvasCoords?: { x: number; y: number };\n  onClick?: NoneToVoidFunction;\n  onLoad?: NoneToVoidFunction;\n  onEnded?: NoneToVoidFunction;\n  onLoop?: NoneToVoidFunction;\n};\n\nconst THROTTLE_MS = 150;\n\nconst AnimatedSticker: FC<OwnProps> = ({\n  ref,\n  renderId,\n  className,\n  style,\n  tgsUrl,\n  play,\n  playSegment,\n  speed,\n  noLoop,\n  size,\n  shouldStretch,\n  quality,\n  isLowPriority,\n  color,\n  forceOnHeavyAnimation,\n  forceInBackground,\n  sharedCanvas,\n  sharedCanvasCoords,\n  onClick,\n  onLoad,\n  onEnded,\n  onLoop,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const viewId = useUniqueId();\n\n  const [animation, setAnimation] = useState<RLottieInstance>();\n  const animationRef = useRef<RLottieInstance>();\n  const isFirstRender = useRef(true);\n\n  const playKey = play || (play === false ? false : playSegment);\n  const playRef = useStateRef(play);\n  const playSegmentRef = useStateRef(playSegment);\n\n  const rgbColor = useRef<[number, number, number] | undefined>();\n\n  const isUnmountedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      isUnmountedRef.current = true;\n    };\n  }, []);\n\n  useSyncEffect(() => {\n    if (color) {\n      const [r, g, b] = hex2rgb(color);\n      rgbColor.current = [r, g, b];\n    } else {\n      rgbColor.current = undefined;\n    }\n  }, [color]);\n\n  const init = useLastCallback(() => {\n    if (\n      animationRef.current\n      || isUnmountedRef.current\n      || !tgsUrl\n      || (sharedCanvas && (!sharedCanvasCoords || !sharedCanvas.offsetWidth || !sharedCanvas.offsetHeight))\n    ) {\n      return;\n    }\n\n    const container = containerRef.current || sharedCanvas;\n    if (!container) {\n      return;\n    }\n\n    const newAnimation = getRLottie().init(\n      tgsUrl,\n      container,\n      renderId || generateUniqueId(),\n      {\n        size,\n        shouldStretch,\n        noLoop,\n        quality,\n        isLowPriority,\n        coords: sharedCanvasCoords,\n      },\n      viewId,\n      rgbColor.current,\n      onLoad,\n      onEnded,\n      onLoop,\n    );\n\n    if (speed) {\n      newAnimation.setSpeed(speed);\n    }\n\n    setAnimation(newAnimation);\n    animationRef.current = newAnimation;\n  });\n\n  useEffect(() => {\n    if (getRLottie()) {\n      init();\n    } else {\n      void ensureRLottie().then(init);\n    }\n  }, [init, tgsUrl, sharedCanvas, sharedCanvasCoords]);\n\n  const throttledInit = useThrottledCallback(init, [init], THROTTLE_MS);\n  useSharedIntersectionObserver(sharedCanvas, throttledInit);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    animation.setColor(rgbColor.current);\n  }, [color, animation]);\n\n  useEffect(() => {\n    return () => {\n      animationRef.current?.removeView(viewId);\n    };\n  }, [viewId]);\n\n  const playAnimation = useLastCallback((shouldRestart = false) => {\n    if (\n      !animation\n      || !(playRef.current || playSegmentRef.current)\n      || isFrozen(forceOnHeavyAnimation, forceInBackground)\n    ) {\n      return;\n    }\n\n    if (playSegmentRef.current) {\n      animation.playSegment(playSegmentRef.current, shouldRestart, viewId);\n    } else {\n      animation.play(shouldRestart, viewId);\n    }\n  });\n\n  const playAnimationOnRaf = useLastCallback(() => {\n    requestMeasure(playAnimation);\n  });\n\n  const pauseAnimation = useLastCallback(() => {\n    if (animation?.isPlaying()) {\n      animation.pause(viewId);\n    }\n  });\n\n  useEffectWithPrevDeps(([prevNoLoop]) => {\n    if (prevNoLoop !== undefined && noLoop !== prevNoLoop) {\n      animation?.setNoLoop(noLoop);\n    }\n  }, [noLoop, animation]);\n\n  useEffectWithPrevDeps(([prevSharedCanvasCoords]) => {\n    if (prevSharedCanvasCoords !== undefined && sharedCanvasCoords !== prevSharedCanvasCoords) {\n      void animation?.setSharedCanvasCoords(viewId, sharedCanvasCoords);\n    }\n  }, [sharedCanvasCoords, viewId, animation]);\n\n  useEffect(() => {\n    if (!animation) {\n      return;\n    }\n\n    if (playKey) {\n      if (!isFrozen(forceOnHeavyAnimation, forceInBackground)) {\n        playAnimation(noLoop);\n      }\n    } else {\n      pauseAnimation();\n    }\n  }, [animation, playKey, noLoop, playAnimation, pauseAnimation, forceOnHeavyAnimation, forceInBackground]);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n    } else if (tgsUrl) {\n      animation.changeData(tgsUrl);\n      playAnimation(noLoop);\n    }\n  }, [playAnimation, animation, tgsUrl, noLoop]);\n\n  useHeavyAnimation(pauseAnimation, playAnimation, forceOnHeavyAnimation || IS_IOS || !playKey);\n  usePriorityPlaybackCheck(pauseAnimation, playAnimation, !playKey);\n  // Pausing frame may not happen in background,\n  // so we need to make sure it happens right after focusing,\n  // then we can play again.\n  useBackgroundMode(pauseAnimation, playAnimationOnRaf, !playKey || forceInBackground);\n\n  if (sharedCanvas) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      style={buildStyle(\n        size !== undefined && !shouldStretch && `width: ${size}px; height: ${size}px;`,\n        onClick && !IS_ELECTRON && 'cursor: pointer',\n        style,\n      )}\n      onClick={onClick}\n    />\n  );\n};\n\nexport default memo(AnimatedSticker);\n\nfunction isFrozen(forceOnHeavyAnimation = false, forceInBackground = false) {\n  return (!forceOnHeavyAnimation && !IS_IOS && getIsHeavyAnimating())\n    || isPriorityPlaybackActive()\n    || (!forceInBackground && isBackgroundModeActive());\n}\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\n\nimport type { OwnProps as AnimatedStickerProps } from './AnimatedSticker';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nexport type OwnProps =\n  Partial<AnimatedStickerProps>\n  & { noTransition?: boolean; nonInteractive?: boolean; size: number };\n\nfunction AnimatedIcon(props: OwnProps) {\n  const {\n    size,\n    play = true,\n    noLoop = true,\n    className,\n    noTransition,\n    nonInteractive,\n    onLoad,\n    onClick,\n    ...otherProps\n  } = props;\n  const [isAnimationLoaded, markAnimationLoaded] = useFlag(false);\n  const transitionClassNames = useMediaTransition(noTransition || isAnimationLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markAnimationLoaded();\n    onLoad?.();\n  });\n\n  const [playKey, setPlayKey] = useState(String(Math.random()));\n\n  const handleClick = useLastCallback(() => {\n    if (play === true) {\n      setPlayKey(String(Math.random()));\n    }\n\n    onClick?.();\n  });\n\n  return (\n    <AnimatedSticker\n      className={buildClassName(className, transitionClassNames)}\n      size={size}\n      play={play === true ? playKey : play}\n      noLoop={noLoop}\n      onClick={!nonInteractive ? handleClick : undefined}\n      onLoad={handleLoad}\n      /* eslint-disable-next-line react/jsx-props-no-spreading */\n      {...otherProps}\n    />\n  );\n}\n\nexport default memo(AnimatedIcon);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aNPdKxlh\",\"preview\":\"haM4SCte\"};","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { OwnProps as AnimatedIconProps } from './AnimatedIcon';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedIcon from './AnimatedIcon';\n\nimport styles from './AnimatedIconWithPreview.module.scss';\n\ntype OwnProps =\n  Partial<AnimatedIconProps>\n  & {\n    iconPreviewClass?: string;\n    previewUrl?: string;\n    thumbDataUri?: string;\n    noPreviewTransition?: boolean;\n  };\n\ninterface StateProps {\n  noAnimation?: boolean;\n}\n\nconst loadedPreviewUrls = new Set();\nconst DEFAULT_SIZE = 150;\n\nfunction AnimatedIconWithPreview(props: OwnProps & StateProps) {\n  const {\n    size = DEFAULT_SIZE,\n    previewUrl,\n    iconPreviewClass,\n    thumbDataUri,\n    className,\n    noAnimation,\n    noPreviewTransition,\n    ...otherProps\n  } = props;\n\n  const [isPreviewLoaded, markPreviewLoaded] = useFlag(\n    Boolean(iconPreviewClass) || Boolean(thumbDataUri) || loadedPreviewUrls.has(previewUrl),\n  );\n  const transitionClassNames = useMediaTransition(isPreviewLoaded && !noPreviewTransition);\n  const [isAnimationReady, markAnimationReady, markAnimationNotReady] = useFlag(false);\n\n  useEffect(() => {\n    if (noAnimation) {\n      markAnimationNotReady();\n    }\n  }, [markAnimationNotReady, noAnimation]);\n\n  const handlePreviewLoad = useLastCallback(() => {\n    markPreviewLoaded();\n    loadedPreviewUrls.add(previewUrl);\n  });\n\n  return (\n    <div\n      className={buildClassName(className, styles.root, !noPreviewTransition && transitionClassNames)}\n      style={buildStyle(\n        size !== undefined && !otherProps.shouldStretch && `width: ${size}px; height: ${size}px;`,\n      )}\n      data-preview-url={previewUrl}\n    >\n      {thumbDataUri && !previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img src={thumbDataUri} className={styles.preview} />\n      )}\n      {previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img\n          src={previewUrl}\n          className={styles.preview}\n          onLoad={handlePreviewLoad}\n        />\n      )}\n      {iconPreviewClass && !isAnimationReady && (\n        <i className={buildClassName(styles.preview, iconPreviewClass)} aria-hidden />\n      )}\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      {!noAnimation && <AnimatedIcon size={size} {...otherProps} onLoad={markAnimationReady} noTransition />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    noAnimation: global.settings.animationLevel === ANIMATION_LEVEL_MIN,\n  };\n})(AnimatedIconWithPreview));\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"LCV_ofSL\",\"input\":\"O85V9ajV\",\"input_rich\":\"ijuURRdU\",\"inputRich\":\"ijuURRdU\",\"error\":\"hhZYLQar\",\"disabled\":\"sAhrzaLV\",\"input_password\":\"MawuFp3r\",\"inputPassword\":\"MawuFp3r\",\"input_large\":\"Vvta_r3C\",\"inputLarge\":\"Vvta_r3C\",\"isLoading\":\"oLkTqd0H\",\"inputWrapperStatic\":\"_30fntf1\",\"input__wrapper\":\"Q9N6yVvw\",\"inputWrapper\":\"Q9N6yVvw\",\"input__wrapper_hasFocus\":\"xJ8YLUEc\",\"inputWrapperHasFocus\":\"xJ8YLUEc\",\"visibilityToggle\":\"tXgxOPqo\",\"visibilityToggle_push\":\"uXlOxDsj\",\"visibilityTogglePush\":\"uXlOxDsj\",\"fractional\":\"Q68NbVRf\",\"label\":\"dGKNlTrc\",\"label_error\":\"PFA7oH6u\",\"labelError\":\"PFA7oH6u\",\"label_forPassword\":\"i9G7zfox\",\"labelForPassword\":\"i9G7zfox\",\"label_errorUnderInput\":\"N0y6_7Nt\",\"labelErrorUnderInput\":\"N0y6_7Nt\",\"label_errorBottom\":\"fAnhlq4h\",\"labelErrorBottom\":\"fAnhlq4h\",\"swapCorner\":\"hcCyNq6V\",\"swapCorner_error\":\"tRQeFT_t\",\"swapCornerError\":\"tRQeFT_t\",\"mask\":\"dYsHTHj3\"};","import type {\n  ChangeEvent, FormEvent, KeyboardEvent, RefObject,\n} from 'react';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLInputElement | HTMLTextAreaElement>;\n  id?: string;\n  type?: 'text' | 'password';\n  label?: TeactNode;\n  placeholder?: string;\n  value?: string | number;\n  inputMode?: 'numeric' | 'text' | 'search';\n  maxLength?: number;\n  isRequired?: boolean;\n  isDisabled?: boolean;\n  isMultiline?: boolean;\n  hasError?: boolean;\n  error?: string;\n  className?: string;\n  wrapperClassName?: string;\n  autoComplete?: string;\n  autoCorrect?: boolean;\n  inputArg?: any;\n  children?: TeactNode;\n  onInput: (value: string, inputArg?: any) => void;\n  onKeyDown?: (e: KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onFocus?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onBlur?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n};\n\nfunction Input({\n  ref,\n  id,\n  label,\n  placeholder,\n  inputMode,\n  isRequired,\n  isDisabled,\n  isMultiline,\n  hasError,\n  type = 'text',\n  error,\n  value = '',\n  maxLength,\n  inputArg,\n  className,\n  wrapperClassName,\n  autoComplete,\n  autoCorrect,\n  children,\n  onInput,\n  onKeyDown,\n  onFocus,\n  onBlur,\n}: OwnProps) {\n  const lang = useLang();\n  const [isPasswordVisible, setIsPasswordVisible] = useState<boolean>(false);\n\n  const handleInput = (e: FormEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    onInput(e.currentTarget.value, inputArg);\n  };\n\n  const handleTogglePasswordVisibility = () => {\n    setIsPasswordVisible(!isPasswordVisible);\n  };\n\n  const handleChange = (e: ChangeEvent<HTMLTextAreaElement>) => {\n    const { currentTarget } = e;\n    const { scrollHeight } = currentTarget;\n\n    requestMutation(() => {\n      currentTarget.style.height = '0';\n      currentTarget.style.height = `${scrollHeight}px`;\n    });\n  };\n\n  const finalType = type === 'text' || isPasswordVisible ? 'text' : 'password';\n  const inputFullClass = buildClassName(\n    styles.input,\n    className,\n    type === 'password' && styles.input_password,\n    (hasError || error) && styles.error,\n    isDisabled && styles.disabled,\n  );\n  const labelFullClass = buildClassName(\n    styles.label,\n    (hasError || error) && styles.error,\n    (hasError || error) && type === 'password' && styles.label_forPassword,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, wrapperClassName)}>\n      {error && !!label && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {!!label && (\n        <label className={labelFullClass} htmlFor={id}>\n          {label}\n        </label>\n      )}\n      {isMultiline ? (\n        <textarea\n          ref={ref as RefObject<HTMLTextAreaElement>}\n          id={id}\n          className={inputFullClass}\n          value={value}\n          disabled={isDisabled}\n          maxLength={maxLength}\n          autoComplete={autoComplete}\n          onInput={handleInput}\n          onChange={handleChange}\n          onKeyDown={onKeyDown}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          tabIndex={0}\n          required={isRequired}\n          placeholder={placeholder}\n        />\n      ) : (\n        <input\n          ref={ref as RefObject<HTMLInputElement>}\n          id={id}\n          className={inputFullClass}\n          type={finalType}\n          value={value}\n          disabled={isDisabled}\n          inputMode={inputMode}\n          maxLength={maxLength}\n          autoComplete={autoComplete}\n          autoCorrect={autoCorrect}\n          spellCheck={autoCorrect}\n          onInput={handleInput}\n          onKeyDown={onKeyDown}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          tabIndex={0}\n          required={isRequired}\n          placeholder={placeholder}\n        />\n      )}\n      {type === 'password' && (\n        <button\n          className={buildClassName(styles.visibilityToggle, label && styles.visibilityToggle_push)}\n          type=\"button\"\n          onClick={handleTogglePasswordVisibility}\n          aria-label={lang('Change password visibility')}\n          tabIndex={-1}\n        >\n          <i className={isPasswordVisible ? 'icon-eye' : 'icon-eye-closed'} aria-hidden />\n        </button>\n      )}\n      {error && !label && (\n        <label className={buildClassName(styles.label, styles.label_errorBottom, styles.error)} htmlFor={id}>\n          {error}\n        </label>\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(Input);\n","// Sometimes event is fired earlier than animation completes\nconst ANIMATION_END_DELAY = 50;\n\nexport function waitForTransitionEnd(\n  node: Node, handler: NoneToVoidFunction, propertyName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('transitionend', node, handler, propertyName, fallbackMs);\n}\n\nexport function waitForAnimationEnd(\n  node: Node, handler: NoneToVoidFunction, animationName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('animationend', node, handler, animationName, fallbackMs);\n}\n\nfunction waitForEndEvent(\n  eventType: 'transitionend' | 'animationend',\n  node: Node,\n  handler: NoneToVoidFunction,\n  detailedName?: string,\n  fallbackMs?: number,\n) {\n  let isHandled = false;\n\n  function cleanup() {\n    node.removeEventListener(eventType, handleAnimationEnd);\n  }\n\n  function handleAnimationEnd(e: TransitionEvent | AnimationEvent | Event) {\n    if (isHandled || e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (detailedName && (\n      (e instanceof TransitionEvent && e.propertyName === detailedName)\n      || (e instanceof AnimationEvent && e.animationName === detailedName)\n    )) {\n      return;\n    }\n\n    isHandled = true;\n\n    cleanup();\n\n    setTimeout(() => {\n      handler();\n    }, ANIMATION_END_DELAY);\n  }\n\n  node.addEventListener(eventType, handleAnimationEnd);\n\n  if (fallbackMs) {\n    setTimeout(() => {\n      if (isHandled) return;\n\n      cleanup();\n\n      handler();\n    }, fallbackMs);\n  }\n\n  return cleanup;\n}\n","import type { MoveOffsets } from './captureEvents';\n\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animateNumber, timingFunctions } from './animation';\nimport { captureEvents, SwipeDirection } from './captureEvents';\nimport { waitForAnimationEnd } from './cssAnimationEndListeners';\nimport { clamp } from './math';\nimport { IS_IOS } from './windowEnvironment';\n\nconst INERTIA_DURATION = 300;\nconst INERTIA_EASING = timingFunctions.easeOutCubic;\n\nexport const SWIPE_DISABLED_CLASS_NAME = 'swipe-disabled';\n\nlet isSwipeActive = false;\nlet swipeOffsets: MoveOffsets | undefined;\nlet onDrag: ((offsets: MoveOffsets) => void) | undefined;\nlet onRelease: ((onCancel: NoneToVoidFunction) => void) | undefined;\nlet cancelCurrentReleaseAnimation: NoneToVoidFunction | undefined;\n\nexport function captureControlledSwipe(\n  element: HTMLElement, options: {\n    onSwipeLeftStart?: NoneToVoidFunction;\n    onSwipeRightStart?: NoneToVoidFunction;\n    onCancel: NoneToVoidFunction;\n  },\n) {\n  return captureEvents(element, {\n    swipeThreshold: 10,\n\n    withNativeDrag: true,\n    excludedClosestSelector: `.${SWIPE_DISABLED_CLASS_NAME}`,\n\n    onSwipe(e, direction, offsets) {\n      if (direction === SwipeDirection.Left) {\n        options.onSwipeLeftStart?.();\n      } else if (direction === SwipeDirection.Right) {\n        options.onSwipeRightStart?.();\n      } else {\n        return false;\n      }\n\n      if (IS_IOS) {\n        isSwipeActive = true;\n        swipeOffsets = offsets;\n      }\n\n      return true;\n    },\n\n    onDrag(e, captureEvent, offsets) {\n      if (!isSwipeActive) return;\n\n      onDrag?.(offsets);\n    },\n\n    onRelease() {\n      if (!isSwipeActive) return;\n\n      isSwipeActive = false;\n\n      onRelease?.(options.onCancel);\n\n      onDrag = undefined;\n      onRelease = undefined;\n    },\n  });\n}\n\nexport function allowSwipeControlForTransition(\n  currentSlide: HTMLElement,\n  nextSlide: HTMLElement,\n  onCancelForTransition: NoneToVoidFunction,\n) {\n  cancelCurrentReleaseAnimation?.();\n\n  if (!isSwipeActive) return;\n\n  const targetPosition = extractAnimationEndPosition(currentSlide);\n  if (!targetPosition) return;\n\n  currentSlide.getAnimations().forEach((a) => a.pause());\n  nextSlide.getAnimations().forEach((a) => a.pause());\n\n  currentSlide.style.animationTimingFunction = 'linear';\n  nextSlide.style.animationTimingFunction = 'linear';\n\n  let currentDirection: 1 | -1 | undefined;\n\n  requestMeasure(() => {\n    const computedStyle = getComputedStyle(currentSlide);\n    const initialPositionPx = extractPositionFromMatrix(computedStyle.transform, targetPosition.axis);\n    const targetPositionPx = targetPosition.units === 'px'\n      ? targetPosition.value\n      : ((targetPosition.value / 100) * (\n        targetPosition.axis === 'X' ? currentSlide.offsetWidth : currentSlide.offsetHeight\n      ));\n    const distance = targetPositionPx - initialPositionPx;\n\n    let progress = 0;\n\n    onDrag = ({ dragOffsetX, dragOffsetY }) => {\n      const dragOffset = targetPosition.axis === 'X'\n        ? dragOffsetX - swipeOffsets!.dragOffsetX\n        : dragOffsetY - swipeOffsets!.dragOffsetY;\n\n      const newProgress = clamp(dragOffset / distance, 0, 1);\n      currentDirection = newProgress > progress ? 1 : -1;\n      progress = newProgress;\n\n      updateAnimationProgress([currentSlide, nextSlide], progress);\n    };\n\n    onRelease = (onCancelForClient: NoneToVoidFunction) => {\n      const isRevertSwipe = currentDirection === -1;\n\n      function cleanup() {\n        currentSlide.getAnimations().forEach((a) => a.cancel());\n        nextSlide.getAnimations().forEach((a) => a.cancel());\n\n        requestMutation(() => {\n          currentSlide.style.animationTimingFunction = '';\n          nextSlide.style.animationTimingFunction = '';\n        });\n      }\n\n      if (!isRevertSwipe) {\n        // For some reason animations are not cleared when CSS class is removed\n        waitForAnimationEnd(currentSlide, cleanup);\n      }\n\n      cancelCurrentReleaseAnimation = animateNumber({\n        from: progress,\n        to: isRevertSwipe ? 0 : 1,\n        duration: INERTIA_DURATION,\n        timing: INERTIA_EASING,\n        onUpdate(releaseProgress) {\n          updateAnimationProgress([currentSlide, nextSlide], releaseProgress);\n        },\n        onEnd(isCanceled = false) {\n          cancelCurrentReleaseAnimation = undefined;\n\n          if (isCanceled || isRevertSwipe) {\n            cleanup();\n            onCancelForTransition();\n            onCancelForClient();\n          }\n        },\n      });\n    };\n  });\n}\n\nfunction updateAnimationProgress(elements: HTMLElement[], progress: number) {\n  elements.map((e) => e.getAnimations()).flat().forEach((animation) => {\n    animation.currentTime = (animation.effect!.getTiming().duration as number) * progress;\n  });\n}\n\nfunction extractAnimationEndPosition(element: HTMLElement) {\n  for (const animation of element.getAnimations()) {\n    if (!(animation.effect instanceof KeyframeEffect)) continue;\n\n    for (const keyframe of animation.effect.getKeyframes()) {\n      if (keyframe.offset !== 1 || !keyframe.transform) continue;\n\n      const position = extractPositionFromTransform(keyframe.transform as string);\n      if (position) {\n        return position;\n      }\n    }\n  }\n\n  return undefined;\n}\n\nfunction extractPositionFromTransform(transformRule: string) {\n  const match = transformRule.match(/([XY])\\((-?\\d+)(%|px)\\)/);\n  if (!match) return undefined;\n\n  return {\n    axis: match[1] as 'X' | 'Y',\n    value: Number(match[2]),\n    units: match[3],\n  };\n}\n\nfunction extractPositionFromMatrix(transform: string, axis: 'X' | 'Y') {\n  const matrix = transform.slice(7, -1).split(',').map(Number);\n  return matrix[axis === 'X' ? 4 : 5];\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Lbq2gMzt\",\"title\":\"r4k7w6HQ\",\"dots\":\"__vkSP7q\",\"dotsError\":\"LI_tisFH\",\"shakeAnimation\":\"RrETnvf4\",\"dotsLoading\":\"HnSSbC5N\",\"spin\":\"WMJcrrfv\",\"appear\":\"rG3vC5Ev\",\"dot\":\"CH4h9HQz\",\"dotLoadingAnimation\":\"NJ5ujtVf\",\"firstDotLoadingAnimation\":\"rW78LwUS\",\"secondDotLoadingAnimation\":\"WITK5GhH\",\"thirdDotLoadingAnimation\":\"sRNwZpZb\",\"fourthDotLoadingAnimation\":\"_jBlKjPP\",\"dotFilled\":\"r_kAZ0Dm\",\"scaleAnimation\":\"AS8bxSS0\",\"grid\":\"CUQ0KIAI\",\"button\":\"lnaBx8hc\",\"minified\":\"MGnO4hqt\",\"buttonActive\":\"qBoIeNzV\",\"buttonHidden\":\"c_i4rWyo\",\"error\":\"jLzZScDB\",\"success\":\"oVsGIXA4\"};","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  value?: any;\n  children?: React.ReactNode;\n  className?: string;\n  isDisabled?: boolean;\n  onClick?: (value?: any) => void;\n}\n\nconst CLICKED_TIMEOUT_MS = 200;\n\nfunction PinPadButton({\n  value, children, className, isDisabled, onClick,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = () => {\n    void vibrate();\n    onClick?.(value);\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT_MS);\n  };\n  return (\n    <div\n      onMouseDown={!isDisabled ? handleClick : undefined}\n      className={buildClassName(styles.button, isClicked && styles.buttonActive, className)}\n      role=\"button\"\n      tabIndex={0}\n    >\n      {value || children}\n    </div>\n  );\n}\n\nexport default memo(PinPadButton);\n","import { BottomSheet } from 'native-bottom-sheet';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { getIsFaceIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnError } from '../../util/haptics';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport { SWIPE_DISABLED_CLASS_NAME } from '../../util/swipeController';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport PinPadButton from './PinPadButton';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  title: string;\n  type?: 'error' | 'success';\n  value: string;\n  length?: number;\n  resetStateDelayMs?: number;\n  className?: string;\n  isMinified?: boolean;\n  onBiometricsClick?: NoneToVoidFunction;\n  onChange: (value: string) => void;\n  onClearError?: NoneToVoidFunction;\n  onSubmit: (pin: string) => void;\n}\n\ntype StateProps = Pick<GlobalState['settings'], 'authConfig'> & {\n  isPinAccepted?: boolean;\n};\n\nconst DEFAULT_PIN_LENGTH = 4;\nconst RESET_STATE_DELAY_MS = 1500;\n\nfunction PinPad({\n  isActive,\n  title,\n  type,\n  value,\n  resetStateDelayMs = RESET_STATE_DELAY_MS,\n  length = DEFAULT_PIN_LENGTH,\n  isPinAccepted,\n  className,\n  isMinified,\n  onBiometricsClick,\n  onChange,\n  onClearError,\n  onSubmit,\n}: OwnProps & StateProps) {\n  const { clearIsPinAccepted } = getActions();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const canRenderBackspace = value.length > 0;\n  const isSuccess = type === 'success' || isPinAccepted;\n  const prevIsPinAccepted = usePrevious(isPinAccepted);\n  const arePinButtonsDisabled = isSuccess\n    || (value.length === length && type !== 'error'); // Allow pincode entry in case of an error\n\n  const titleClassName = buildClassName(\n    styles.title,\n    type === 'error' && styles.error,\n    isSuccess && styles.success,\n  );\n\n  useEffect(() => {\n    if (prevIsPinAccepted && !isPinAccepted && length === value.length) {\n      onChange('');\n    }\n  }, [isPinAccepted, length, onChange, prevIsPinAccepted, value.length]);\n\n  useEffect(() => {\n    return () => {\n      // Don't trust this effect 100%, because it won't give the desired result when PinPad unmounts after the NBS closing\n      clearIsPinAccepted();\n    };\n  }, []);\n\n  // Fix for iOS, enable fast pinpad button presses\n  useEffectWithPrevDeps(([prevIsActive]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n    if (isActive) {\n      void BottomSheet.clearScrollPatch();\n    } else if (prevIsActive) {\n      void BottomSheet.applyScrollPatch();\n    }\n  }, [isActive]);\n\n  useEffect(() => {\n    if (type !== 'error') return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      if (value.length === length) {\n        onChange('');\n      }\n      onClearError?.();\n    }, resetStateDelayMs);\n    void vibrateOnError();\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [length, onChange, onClearError, resetStateDelayMs, type, value.length]);\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return () => {\n      enableSwipeToClose();\n    };\n  }, [isActive]);\n\n  const handleClick = useLastCallback((char: string) => {\n    if (value.length === length || value.length === 0) {\n      onClearError?.();\n    }\n\n    if (value.length === length) {\n      onChange(char);\n\n      return;\n    }\n\n    const newValue = `${value}${char}`;\n    onChange(newValue);\n\n    if (newValue.length === length) {\n      onSubmit(newValue);\n    }\n  });\n\n  const handleBackspaceClick = useLastCallback(() => {\n    onClearError?.();\n    if (!value.length) return;\n\n    onChange(value.slice(0, -1));\n  });\n\n  function renderDots() {\n    const dotsClassName = buildClassName(\n      styles.dots,\n      type === 'error' && styles.dotsError,\n      isSuccess && styles.dotsLoading,\n    );\n\n    return (\n      <div className={dotsClassName} aria-hidden>\n        {Array.from({ length }, (_, i) => (\n          <div\n            key={i}\n            className={buildClassName(\n              styles.dot,\n              i < value.length && styles.dotFilled,\n              type === 'error' && styles.error,\n              isSuccess && styles.success,\n            )}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, className, SWIPE_DISABLED_CLASS_NAME)}>\n      <div className={titleClassName}>{title}</div>\n      {renderDots()}\n\n      <div className={buildClassName(styles.grid, isMinified && styles.minified)}>\n        <PinPadButton value=\"1\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"2\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"3\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"4\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"5\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"6\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"7\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"8\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"9\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        {!onBiometricsClick ? <span /> : (\n          <PinPadButton onClick={onBiometricsClick} isDisabled={isSuccess}>\n            <i className={buildClassName('icon', isFaceId ? 'icon-face-id' : 'icon-touch-id')} aria-hidden />\n          </PinPadButton>\n        )}\n        <PinPadButton value=\"0\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton\n          className={!canRenderBackspace && styles.buttonHidden}\n          isDisabled={!canRenderBackspace || isSuccess}\n          onClick={handleBackspaceClick}\n        >\n          <i className=\"icon icon-backspace\" aria-hidden />\n        </PinPadButton>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global) => {\n    const { isPinAccepted } = global;\n\n    return {\n      isPinAccepted,\n    };\n  },\n  (global, _, stickToFirst) => {\n    const { isPinAccepted } = global;\n\n    return stickToFirst(isPinAccepted);\n  },\n)(PinPad));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthConfig } from '../../util/authApi/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport { selectIsBiometricAuthEnabled, selectIsNativeBiometricAuthEnabled } from '../../global/selectors';\nimport authApi from '../../util/authApi';\nimport { getDoesUsePinPad, getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { pause } from '../../util/schedulers';\nimport { IS_ANDROID_APP, IS_DELEGATING_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from './helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from './AnimatedIconWithPreview';\nimport Button from './Button';\nimport Input from './Input';\nimport Modal from './Modal';\nimport PinPad from './PinPad';\n\nimport modalStyles from './Modal.module.scss';\nimport styles from './PasswordForm.module.scss';\n\ntype OperationType = 'transfer' | 'sending' | 'staking' | 'unstaking' | 'swap'\n| 'unfreeze' | 'passcode' | 'unlock' | 'claim';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  operationType?: OperationType;\n  cancelLabel?: string;\n  submitLabel: string | TeactNode[];\n  stickerSize?: number;\n  placeholder?: string;\n  error?: string;\n  help?: string;\n  resetStateDelayMs?: number;\n  containerClassName?: string;\n  withCloseButton?: boolean;\n  children?: TeactNode;\n  noAnimatedIcon?: boolean;\n  inputWrapperClassName?: string;\n  forceBiometricsInMain?: boolean;\n  onCancel?: NoneToVoidFunction;\n  onUpdate: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n}\n\ninterface StateProps {\n  isPasswordNumeric?: boolean;\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  authConfig?: AuthConfig;\n}\n\nconst STICKER_SIZE = 180;\nconst APPEAR_ANIMATION_DURATION_MS = 300;\n\nfunction PasswordForm({\n  isActive,\n  isLoading,\n  operationType,\n  isPasswordNumeric,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  authConfig,\n  cancelLabel,\n  submitLabel,\n  stickerSize = STICKER_SIZE,\n  placeholder = 'Enter your password',\n  error,\n  help,\n  resetStateDelayMs,\n  containerClassName,\n  children,\n  withCloseButton,\n  noAnimatedIcon,\n  inputWrapperClassName,\n  forceBiometricsInMain,\n  onUpdate,\n  onCancel,\n  onSubmit,\n}: OwnProps & StateProps) {\n  const { openSettings } = getActions();\n\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const passwordRef = useRef<HTMLInputElement>(null);\n  const [password, setPassword] = useState<string>('');\n  const [localError, setLocalError] = useState<string>('');\n  const [wrongAttempts, setWrongAttempts] = useState(0);\n  const [isResetBiometricsWarningOpen, openResetBiometricsWarning, closeResetBiometricsWarning] = useFlag(false);\n  const { isSmallHeight, isPortrait } = useDeviceScreen();\n  const isSubmitDisabled = !password.length;\n  const canUsePinPad = getDoesUsePinPad();\n\n  useEffect(() => {\n    if (isActive) {\n      setLocalError('');\n      setPassword('');\n      setWrongAttempts(0);\n    }\n  }, [isActive]);\n\n  useHideBottomBar(Boolean(isActive));\n\n  const handleBiometrics = useLastCallback(async () => {\n    try {\n      const biometricPassword = await authApi.getPassword(authConfig!);\n      if (!biometricPassword) {\n        setWrongAttempts(wrongAttempts + 1);\n        setLocalError('Biometric confirmation failed');\n\n        if (IS_ANDROID_APP && wrongAttempts > 2) {\n          openResetBiometricsWarning();\n        }\n      } else {\n        onSubmit(biometricPassword);\n      }\n    } catch (err: any) {\n      setLocalError(err.message || lang('Something went wrong.'));\n    }\n  });\n\n  useEffect(() => {\n    if ((IS_DELEGATING_BOTTOM_SHEET && !forceBiometricsInMain) || !isActive || !isBiometricAuthEnabled) {\n      return;\n    }\n\n    void pause(APPEAR_ANIMATION_DURATION_MS).then(handleBiometrics);\n  }, [forceBiometricsInMain, handleBiometrics, isActive, isBiometricAuthEnabled]);\n\n  useFocusAfterAnimation(passwordRef, !isActive || isBiometricAuthEnabled);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError('');\n    onUpdate();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    closeResetBiometricsWarning();\n    onCancel?.();\n    openSettings();\n  });\n\n  const handleInput = useLastCallback((value: string) => {\n    setPassword(value);\n    if (error) {\n      onUpdate();\n    }\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    onSubmit(password);\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({ onEnter: handleSubmit });\n  }, [handleSubmit, isLoading, isSubmitDisabled]);\n\n  function getPinPadTitle() {\n    switch (operationType) {\n      case 'unfreeze':\n        return 'Confirm Unfreezing';\n      case 'passcode':\n        return 'Confirm Passcode';\n      case 'transfer':\n      case 'sending':\n        return 'Confirm Sending';\n      case 'staking':\n        return 'Confirm Staking';\n      case 'unstaking':\n        return 'Confirm Unstaking';\n      case 'swap':\n        return 'Confirm Swap';\n      case 'unlock':\n        return undefined;\n      case 'claim':\n        return 'Confirm Rewards Claim';\n      default:\n        return 'Confirm Action';\n    }\n  }\n\n  if (canUsePinPad) {\n    const hasError = Boolean(localError || error);\n    const title = getPinPadTitle();\n    const actionName = lang(\n      !isNativeBiometricAuthEnabled\n        ? 'Enter code'\n        : (getIsFaceIdAvailable()\n          ? 'Enter code or use Face ID'\n          : (getIsTouchIdAvailable()\n            ? 'Enter code or use Touch ID'\n            : 'Enter code or use biometrics')\n        ),\n    );\n\n    return (\n      <>\n        {withCloseButton && (\n          <Button\n            isRound\n            className={buildClassName(modalStyles.closeButton, styles.closeButton)}\n            ariaLabel={lang('Close')}\n            onClick={onCancel}\n          >\n            <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n        <div className={styles.pinPadHeader}>\n          {isPortrait && !noAnimatedIcon && (\n            <AnimatedIconWithPreview\n              play={isActive}\n              tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n              previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n              noLoop={false}\n              nonInteractive\n            />\n          )}\n          {!isSmallHeight && title && <div className={styles.title}>{lang(title)}</div>}\n          {children}\n        </div>\n\n        <PinPad\n          isActive={isActive}\n          title={lang(hasError ? (localError || error!) : (isSmallHeight && title ? title : actionName))}\n          type={hasError ? 'error' : undefined}\n          length={PIN_LENGTH}\n          resetStateDelayMs={resetStateDelayMs}\n          value={password}\n          onBiometricsClick={isNativeBiometricAuthEnabled ? handleBiometrics : undefined}\n          onChange={setPassword}\n          onClearError={handleClearError}\n          onSubmit={onSubmit}\n        />\n      </>\n    );\n  }\n\n  function renderBiometricPrompt() {\n    const renderingError = localError || error;\n    if (renderingError) {\n      return (\n        <div className={styles.error}>{lang(renderingError)}</div>\n      );\n    }\n\n    return (\n      <div className={styles.verify}>\n        {lang(operationType === 'transfer'\n          ? 'Please confirm transaction using biometrics' : 'Please confirm operation using biometrics')}\n      </div>\n    );\n  }\n\n  function renderPasswordForm() {\n    return (\n      <>\n        <Input\n          ref={passwordRef}\n          type=\"password\"\n          isRequired\n          id=\"first-password\"\n          wrapperClassName={inputWrapperClassName}\n          inputMode={isPasswordNumeric ? 'numeric' : undefined}\n          error={error ? lang(error) : localError}\n          placeholder={lang(placeholder)}\n          value={password}\n          onInput={handleInput}\n          maxLength={isPasswordNumeric ? PIN_LENGTH : undefined}\n        />\n        {localError && (\n          <div className={styles.errorMessage}>{lang(localError)}</div>\n        )}\n        {help && !error && (\n          <div className={styles.label}>{help}</div>\n        )}\n      </>\n    );\n  }\n\n  const shouldRenderFullWidthButton = operationType === 'unlock';\n  const footerButtonsClassName = buildClassName(\n    modalStyles.footerButtons,\n    shouldRenderFullWidthButton && modalStyles.footerButtonFullWidth,\n  );\n\n  return (\n    <div className={buildClassName(modalStyles.transitionContent, containerClassName)}>\n      {!noAnimatedIcon && (\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n          previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          play={isActive}\n          size={stickerSize}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n      )}\n\n      {children}\n\n      {isBiometricAuthEnabled ? renderBiometricPrompt() : renderPasswordForm()}\n\n      <div className={footerButtonsClassName}>\n        {onCancel && (\n          <Button\n            isLoading={isLoading && isBiometricAuthEnabled}\n            isDisabled={isLoading && !isBiometricAuthEnabled}\n            className={modalStyles.buttonHalfWidth}\n            onClick={onCancel}\n          >\n            {cancelLabel || lang('Cancel')}\n          </Button>\n        )}\n        {isBiometricAuthEnabled && Boolean(localError) && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isLoading}\n            className={modalStyles.buttonHalfWidth}\n            onClick={!isLoading ? handleBiometrics : undefined}\n          >\n            {lang('Try Again')}\n          </Button>\n        )}\n        {!isBiometricAuthEnabled && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isSubmitDisabled}\n            className={!shouldRenderFullWidthButton ? modalStyles.buttonHalfWidth : modalStyles.buttonFullWidth}\n            onClick={!isLoading ? handleSubmit : undefined}\n          >\n            {submitLabel || lang('Send')}\n          </Button>\n        )}\n      </div>\n      <Modal\n        isOpen={isResetBiometricsWarningOpen}\n        isCompact\n        title={lang('Biometric authentication failed')}\n        onClose={closeResetBiometricsWarning}\n      >\n        <p className={modalStyles.text}>\n          {lang('Reinstall biometrics in your device\\'s system settings, or use a passcode.')}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button className={modalStyles.button} onClick={closeResetBiometricsWarning}>{lang('Close')}</Button>\n          <Button isPrimary className={modalStyles.button} onClick={handleOpenSettings}>\n            {lang('Settings')}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isPasswordNumeric, authConfig } = global.settings;\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n\n  return {\n    isPasswordNumeric,\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    authConfig,\n  };\n})(PasswordForm));\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"ifHfFY2u\",\"label\":\"C3jlHNpF\",\"title\":\"kC9WGOYP\",\"errorMessage\":\"q8niLQND\",\"verify\":\"SDEJGboy\",\"error\":\"ZokzPDAj\",\"pinPadHeader\":\"sftOkqxr\",\"closeButton\":\"twjZlrDJ\"};","// Used before applying CSS transition\nexport default function forceReflow(element: HTMLElement) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  element.offsetWidth;\n}\n","import type { RefObject } from 'react';\nimport React, { beginHeavyAnimation, useEffect, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles, toggleExtraClass } from '../../lib/teact/teact-dom';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport { waitForAnimationEnd, waitForTransitionEnd } from '../../util/cssAnimationEndListeners';\nimport { SECOND } from '../../util/dateFormat';\nimport forceReflow from '../../util/forceReflow';\nimport { allowSwipeControlForTransition } from '../../util/swipeController';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Transition.scss';\n\ntype AnimationName = (\n  'none' | 'slide' | 'slideRtl' | 'slideFade' | 'zoomFade' | 'slideLayers'\n  | 'fade' | 'pushSlide' | 'reveal' | 'slideOptimized' | 'slideOptimizedRtl' | 'semiFade'\n  | 'slideVertical' | 'slideVerticalFade' | 'slideFadeAndroid'\n  );\nexport type ChildrenFn = (isActive: boolean, isFrom: boolean, currentKey: number, activeKey: number) => React.ReactNode;\nexport type TransitionProps = {\n  ref?: RefObject<HTMLDivElement>;\n  activeKey: number;\n  prevKey?: number;\n  nextKey?: number;\n  name: AnimationName;\n  direction?: 'auto' | 'inverse' | 1 | -1;\n  renderCount?: number;\n  shouldRestoreHeight?: boolean;\n  shouldCleanup?: boolean;\n  cleanupExceptionKey?: number;\n  // Used by async components which are usually remounted during first animation\n  shouldWrap?: boolean;\n  wrapExceptionKey?: number;\n  id?: string;\n  className?: string;\n  slideClassName?: string;\n  withSwipeControl?: boolean;\n  onStart?: NoneToVoidFunction;\n  onStop?: NoneToVoidFunction;\n  onContainerClick?: NoneToVoidFunction;\n  // Should be not a falsy value, otherwise some transitions will be delayed\n  children: React.ReactNode | ChildrenFn;\n};\n\nconst FALLBACK_ANIMATION_END = SECOND;\nconst CLASSES = {\n  slide: 'Transition_slide',\n  active: 'Transition_slide-active',\n  from: 'Transition_slide-from',\n  to: 'Transition_slide-to',\n  inactive: 'Transition_slide-inactive',\n};\n\nexport const ACTIVE_SLIDE_CLASS_NAME = CLASSES.active;\nexport const TO_SLIDE_CLASS_NAME = CLASSES.to;\n\nfunction Transition({\n  ref,\n  activeKey,\n  nextKey,\n  prevKey,\n  name,\n  direction = 'auto',\n  renderCount,\n  shouldRestoreHeight,\n  shouldCleanup,\n  cleanupExceptionKey,\n  shouldWrap,\n  wrapExceptionKey,\n  id,\n  className,\n  slideClassName,\n  withSwipeControl,\n  onStart,\n  onStop,\n  onContainerClick,\n  children,\n}: TransitionProps) {\n  const currentKeyRef = useRef<number>();\n  // No need for a container to update on change\n  const { animationLevel } = getGlobal().settings;\n  const shouldDisableAnimation = animationLevel === ANIMATION_LEVEL_MIN;\n\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const rendersRef = useRef<Record<number, React.ReactNode | ChildrenFn>>({});\n  const prevActiveKey = usePrevious<any>(activeKey);\n  const forceUpdate = useForceUpdate();\n  const isAnimatingRef = useRef(false);\n  const isSwipeJustCancelledRef = useRef(false);\n\n  const hasActiveKeyChanged = prevActiveKey !== undefined && activeKey !== prevActiveKey;\n\n  if (!renderCount && hasActiveKeyChanged) {\n    rendersRef.current = { [prevActiveKey]: rendersRef.current[prevActiveKey] };\n  }\n\n  rendersRef.current[activeKey] = children;\n  if (prevKey) {\n    rendersRef.current[prevKey] = children;\n  }\n  if (nextKey) {\n    rendersRef.current[nextKey] = children;\n  }\n\n  const isBackwards = (\n    direction === -1\n    || (direction === 'auto' && prevActiveKey > activeKey)\n    || (direction === 'inverse' && prevActiveKey < activeKey)\n  );\n\n  useLayoutEffect(() => {\n    function cleanup() {\n      if (!shouldCleanup) {\n        return;\n      }\n\n      const preservedRender = cleanupExceptionKey !== undefined ? rendersRef.current[cleanupExceptionKey] : undefined;\n\n      rendersRef.current = preservedRender ? { [cleanupExceptionKey!]: preservedRender } : {};\n\n      forceUpdate();\n    }\n\n    const isSlideOptimized = name === 'slideOptimized' || name === 'slideOptimizedRtl';\n    const container = containerRef.current!;\n    const keys = Object.keys(rendersRef.current).map(Number);\n    const prevActiveIndex = renderCount ? prevActiveKey : keys.indexOf(prevActiveKey);\n    const activeIndex = renderCount ? activeKey : keys.indexOf(activeKey);\n\n    const childNodes = Array.from(container.childNodes);\n    if (!childNodes.length) {\n      return;\n    }\n\n    const childElements = Array.from(container.children) as HTMLElement[];\n    childElements.forEach((el) => {\n      addExtraClass(el, CLASSES.slide);\n\n      if (slideClassName) {\n        slideClassName.split(/\\s+/).forEach((token) => {\n          addExtraClass(el, token);\n        });\n      }\n    });\n\n    if (!hasActiveKeyChanged) {\n      if (isAnimatingRef.current) {\n        return;\n      }\n\n      childElements.forEach((childElement) => {\n        if (childElement === childNodes[activeIndex]) {\n          addExtraClass(childElement, CLASSES.active);\n\n          if (isSlideOptimized) {\n            setExtraStyles(childElement, {\n              transition: 'none',\n              transform: 'translate3d(0, 0, 0)',\n            });\n          }\n        } else if (!isSlideOptimized) {\n          addExtraClass(childElement, CLASSES.inactive);\n        }\n      });\n\n      return;\n    }\n\n    currentKeyRef.current = activeKey;\n\n    if (isSlideOptimized) {\n      if (!childNodes[activeIndex]) {\n        return;\n      }\n\n      performSlideOptimized(\n        shouldDisableAnimation,\n        name,\n        isBackwards,\n        cleanup,\n        activeKey,\n        currentKeyRef,\n        isAnimatingRef,\n        container,\n        childNodes[activeIndex],\n        childNodes[prevActiveIndex],\n        shouldRestoreHeight,\n        onStart,\n        onStop,\n      );\n\n      return;\n    }\n\n    if (name === 'none' || shouldDisableAnimation || isSwipeJustCancelledRef.current) {\n      if (isSwipeJustCancelledRef.current) {\n        isSwipeJustCancelledRef.current = false;\n      }\n\n      childNodes.forEach((node, i) => {\n        if (node instanceof HTMLElement) {\n          removeExtraClass(node, CLASSES.from);\n          removeExtraClass(node, CLASSES.to);\n          toggleExtraClass(node, CLASSES.active, i === activeIndex);\n          toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n        }\n      });\n\n      cleanup();\n\n      return;\n    }\n\n    childNodes.forEach((node, i) => {\n      if (node instanceof HTMLElement) {\n        removeExtraClass(node, CLASSES.active);\n        toggleExtraClass(node, CLASSES.from, i === prevActiveIndex);\n        toggleExtraClass(node, CLASSES.to, i === activeIndex);\n        toggleExtraClass(node, CLASSES.inactive, i !== prevActiveIndex && i !== activeIndex);\n      }\n    });\n\n    isAnimatingRef.current = true;\n    const endHeavyAnimation = beginHeavyAnimation();\n    onStart?.();\n\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    function onAnimationEnd() {\n      const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`);\n      const { clientHeight } = activeElement || {};\n\n      requestMutation(() => {\n        if (activeKey !== currentKeyRef.current) {\n          endHeavyAnimation();\n          return;\n        }\n\n        removeExtraClass(container, `Transition-${name}`);\n        removeExtraClass(container, `Transition-${name}Backwards`);\n\n        childNodes.forEach((node, i) => {\n          if (node instanceof HTMLElement) {\n            removeExtraClass(node, CLASSES.from);\n            removeExtraClass(node, CLASSES.to);\n            toggleExtraClass(node, CLASSES.active, i === activeIndex);\n            toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n          }\n        });\n\n        if (shouldRestoreHeight) {\n          if (activeElement) {\n            setExtraStyles(activeElement, { height: 'auto' });\n            setExtraStyles(container, { height: `${clientHeight}px` });\n          }\n        }\n\n        onStop?.();\n        endHeavyAnimation();\n        isAnimatingRef.current = false;\n\n        cleanup();\n      });\n    }\n\n    const watchedNode = (name === 'reveal' || name === 'slideFadeAndroid') && isBackwards\n      ? childNodes[prevActiveIndex]\n      : childNodes[activeIndex];\n\n    if (watchedNode) {\n      if (withSwipeControl && childNodes[prevActiveIndex]) {\n        const giveUpAnimationEnd = waitForAnimationEnd(watchedNode, onAnimationEnd);\n\n        allowSwipeControlForTransition(\n          childNodes[prevActiveIndex] as HTMLElement,\n          childNodes[activeIndex] as HTMLElement,\n          () => {\n            giveUpAnimationEnd();\n            isSwipeJustCancelledRef.current = true;\n            onStop?.();\n            endHeavyAnimation();\n            isAnimatingRef.current = false;\n          },\n        );\n      } else {\n        waitForAnimationEnd(watchedNode, onAnimationEnd, undefined, FALLBACK_ANIMATION_END);\n      }\n    } else {\n      onAnimationEnd();\n    }\n  }, [\n    activeKey,\n    nextKey,\n    prevActiveKey,\n    hasActiveKeyChanged,\n    isBackwards,\n    name,\n    onStart,\n    onStop,\n    renderCount,\n    shouldRestoreHeight,\n    shouldCleanup,\n    slideClassName,\n    cleanupExceptionKey,\n    shouldDisableAnimation,\n    forceUpdate,\n    withSwipeControl,\n  ]);\n\n  useEffect(() => {\n    if (!shouldRestoreHeight) {\n      return;\n    }\n\n    const container = containerRef.current!;\n    const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`)\n      || container.querySelector<HTMLDivElement>(`.${CLASSES.from}`);\n    if (!activeElement) {\n      return;\n    }\n\n    const { clientHeight } = activeElement || {};\n    if (!clientHeight) {\n      return;\n    }\n\n    requestMutation(() => {\n      setExtraStyles(activeElement, { height: 'auto' });\n      setExtraStyles(container, {\n        height: `${clientHeight}px`,\n        flexBasis: `${clientHeight}px`,\n      });\n    });\n  }, [shouldRestoreHeight, children]);\n\n  const asFastList = !renderCount;\n  const renders = rendersRef.current;\n  const renderKeys = Object.keys(renderCount ? new Array(renderCount).fill(undefined) : renders).map(Number);\n  const contents = renderKeys.map((key) => {\n    const render = renders[key];\n    if (!render) {\n      return undefined;\n    }\n\n    const rendered = typeof render === 'function'\n      ? render(key === activeKey, key === prevActiveKey, key, activeKey)\n      : render;\n\n    return (shouldWrap && key !== wrapExceptionKey) || asFastList\n      ? <div key={key} teactOrderKey={key}>{rendered}</div>\n      : rendered;\n  });\n\n  return (\n    <div\n      ref={containerRef}\n      onClick={onContainerClick}\n      id={id}\n      className={buildClassName('Transition', className)}\n      teactFastList={asFastList}\n    >\n      {contents}\n    </div>\n  );\n}\n\nexport default Transition;\n\nfunction performSlideOptimized(\n  shouldDisableAnimation: boolean,\n  name: 'slideOptimized' | 'slideOptimizedRtl',\n  isBackwards: boolean,\n  cleanup: NoneToVoidFunction,\n  activeKey: number,\n  currentKeyRef: { current: number | undefined },\n  isAnimatingRef: { current: boolean | undefined },\n  container: HTMLElement,\n  toSlide: ChildNode,\n  fromSlide?: ChildNode,\n  shouldRestoreHeight?: boolean,\n  onStart?: NoneToVoidFunction,\n  onStop?: NoneToVoidFunction,\n) {\n  if (shouldDisableAnimation) {\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    if (fromSlide instanceof HTMLElement) {\n      removeExtraClass(fromSlide, CLASSES.active);\n      setExtraStyles(fromSlide, {\n        transition: 'none',\n        transform: '',\n      });\n    }\n\n    if (toSlide instanceof HTMLElement) {\n      addExtraClass(toSlide, CLASSES.active);\n      setExtraStyles(toSlide, {\n        transition: 'none',\n        transform: 'translate3d(0, 0, 0)',\n      });\n    }\n\n    cleanup();\n\n    return;\n  }\n\n  if (name === 'slideOptimizedRtl') {\n    isBackwards = !isBackwards;\n  }\n\n  isAnimatingRef.current = true;\n  const endHeavyAnimation = beginHeavyAnimation();\n  onStart?.();\n\n  toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n  toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n  if (fromSlide instanceof HTMLElement) {\n    setExtraStyles(fromSlide, {\n      transition: 'none',\n      transform: 'translate3d(0, 0, 0)',\n    });\n  }\n\n  if (toSlide instanceof HTMLElement) {\n    setExtraStyles(toSlide, {\n      transition: 'none',\n      transform: `translate3d(${isBackwards ? '-' : ''}100%, 0, 0)`,\n    });\n  }\n\n  requestForcedReflow(() => {\n    if (toSlide instanceof HTMLElement) {\n      forceReflow(toSlide);\n    }\n\n    return () => {\n      if (fromSlide instanceof HTMLElement) {\n        removeExtraClass(fromSlide, CLASSES.active);\n        setExtraStyles(fromSlide, {\n          transition: '',\n          transform: `translate3d(${isBackwards ? '' : '-'}100%, 0, 0)`,\n        });\n      }\n\n      if (toSlide instanceof HTMLElement) {\n        addExtraClass(toSlide, CLASSES.active);\n        setExtraStyles(toSlide, {\n          transition: '',\n          transform: 'translate3d(0, 0, 0)',\n        });\n      }\n    };\n  });\n\n  waitForTransitionEnd(toSlide, () => {\n    const clientHeight = toSlide instanceof HTMLElement ? toSlide.clientHeight : undefined;\n\n    requestMutation(() => {\n      if (activeKey !== currentKeyRef.current) {\n        endHeavyAnimation();\n        return;\n      }\n\n      if (fromSlide instanceof HTMLElement) {\n        setExtraStyles(fromSlide, {\n          transition: 'none',\n          transform: '',\n        });\n      }\n\n      if (shouldRestoreHeight && clientHeight && toSlide instanceof HTMLElement) {\n        setExtraStyles(toSlide, { height: 'auto' });\n        setExtraStyles(container, { height: `${clientHeight}px` });\n      }\n\n      onStop?.();\n      endHeavyAnimation();\n      isAnimatingRef.current = false;\n\n      cleanup();\n    });\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"appLocked\":\"ra8fobWi\",\"appLockedFixed\":\"v6O5aP3y\",\"unlockButtonHidden\":\"YltinIdz\",\"title\":\"BTI1cF2x\",\"passwordFormContent\":\"gUfrKRnP\",\"logo\":\"Ut7tq0ls\",\"passwordInputWrapper\":\"WLrzziXQ\",\"appLockedWrapper\":\"mbuGFcLr\"};","import { BottomSheet } from 'native-bottom-sheet';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { AutolockValueType, Theme } from '../global/types';\n\nimport {\n  APP_NAME, AUTOLOCK_OPTIONS_LIST, DEBUG, IS_CORE_WALLET, IS_TELEGRAM_APP,\n} from '../config';\nimport {\n  selectIsBiometricAuthEnabled,\n  selectIsHardwareAccount,\n  selectIsNativeBiometricAuthEnabled,\n} from '../global/selectors';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../util/biometrics';\nimport buildClassName from '../util/buildClassName';\nimport { stopEvent } from '../util/domEvents';\nimport { vibrateOnSuccess } from '../util/haptics';\nimport { createSignal } from '../util/signals';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../util/windowEnvironment';\nimport { callApi } from '../api';\n\nimport useAppTheme from '../hooks/useAppTheme';\nimport useBackgroundMode, { isBackgroundModeActive } from '../hooks/useBackgroundMode';\nimport useEffectOnce from '../hooks/useEffectOnce';\nimport useFlag from '../hooks/useFlag';\nimport { useHotkeys } from '../hooks/useHotkeys';\nimport useLang from '../hooks/useLang';\nimport useLastCallback from '../hooks/useLastCallback';\nimport useShowTransition from '../hooks/useShowTransition';\nimport useThrottledCallback from '../hooks/useThrottledCallback';\n\nimport Button from './ui/Button';\nimport Image from './ui/Image';\nimport { getInAppBrowser } from './ui/InAppBrowser';\nimport PasswordForm from './ui/PasswordForm';\nimport Transition from './ui/Transition';\n\nimport styles from './AppLocked.module.scss';\n\nimport coreWalletLogoPath from '../assets/logoCoreWallet.svg';\nimport logoDarkPath from '../assets/logoDark.svg';\nimport logoLightPath from '../assets/logoLight.svg';\n\nconst WINDOW_EVENTS_LATENCY = 5000;\nconst INTERVAL_CHECK_PERIOD = 5000;\nconst PINPAD_RESET_DELAY = 300;\nconst ACTIVATION_EVENT_NAMES = [\n  'focus', // For Web\n  'mousemove', // For Web\n  'touch', // For Capacitor\n  'wheel',\n  'keydown',\n];\n// `capture: true` is necessary because otherwise a `stopPropagation` call inside the main UI will prevent the event\n// from getting to the listeners inside `AppLocked`.\nconst ACTIVATION_EVENT_OPTIONS = { capture: true };\n\ninterface StateProps {\n  isNonNativeBiometricAuthEnabled: boolean;\n  autolockValue?: AutolockValueType;\n  theme: Theme;\n  isHardwareAccount?: boolean;\n  isManualLockActive?: boolean;\n  isAppLockEnabled?: boolean;\n  shouldHideBiometrics?: boolean;\n}\n\nconst enum SLIDES {\n  button,\n  passwordForm,\n}\n\nconst [getActivitySignal, setActivitySignal] = createSignal(Date.now());\n\nexport function reportAppLockActivityEvent() {\n  setActivitySignal(Date.now());\n}\n\nfunction AppLocked({\n  isNonNativeBiometricAuthEnabled,\n  autolockValue = 'never',\n  theme,\n  isHardwareAccount,\n  isManualLockActive,\n  isAppLockEnabled,\n  shouldHideBiometrics,\n}: StateProps): TeactJsx {\n  const {\n    setIsPinAccepted, clearIsPinAccepted, submitAppLockActivityEvent, setIsManualLockActive,\n  } = getActions();\n  const lang = useLang();\n\n  const appTheme = useAppTheme(theme);\n  const logoPath = IS_CORE_WALLET\n    ? coreWalletLogoPath\n    : appTheme === 'light' ? logoLightPath : logoDarkPath;\n\n  const [isLocked, lock, unlock] = useFlag((autolockValue !== 'never' || isManualLockActive) && !isHardwareAccount);\n  const [shouldRenderUi, showUi, hideUi] = useFlag(isLocked);\n  const lastActivityTime = useRef(Date.now());\n  const [slideForBiometricAuth, setSlideForBiometricAuth] = useState(\n    isBackgroundModeActive() ? SLIDES.button : SLIDES.passwordForm,\n  );\n  const [passwordError, setPasswordError] = useState('');\n\n  const handleActivity = useLastCallback(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      submitAppLockActivityEvent();\n      return;\n    }\n    lastActivityTime.current = Date.now();\n  });\n\n  const handleActivityThrottled = useThrottledCallback(handleActivity, [handleActivity], WINDOW_EVENTS_LATENCY);\n\n  const afterUnlockCallback = useLastCallback(() => {\n    hideUi();\n    setSlideForBiometricAuth(SLIDES.button);\n    getInAppBrowser()?.show();\n    clearIsPinAccepted();\n    handleActivity();\n    setIsManualLockActive({ isActive: undefined, shouldHideBiometrics: undefined });\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.show();\n  });\n\n  const autolockPeriod = useMemo(\n    () => AUTOLOCK_OPTIONS_LIST.find((option) => option.value === autolockValue)!.period, [autolockValue],\n  );\n\n  const { transitionClassNames } = useShowTransition(isLocked, afterUnlockCallback, true, 'slow');\n\n  const forceLockApp = useLastCallback(() => {\n    lock();\n    showUi();\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.hide();\n    void getInAppBrowser()?.hide();\n    setSlideForBiometricAuth(SLIDES.button);\n  });\n\n  const handleLock = useLastCallback(() => {\n    if ((autolockValue !== 'never' || isManualLockActive) && !isHardwareAccount) forceLockApp();\n  });\n\n  if (DEBUG) (window as any).lock = handleLock;\n\n  if (isManualLockActive && !isLocked && !shouldRenderUi) handleLock();\n\n  const handleChangeSlideForBiometricAuth = useLastCallback(() => {\n    setSlideForBiometricAuth(SLIDES.passwordForm);\n  });\n\n  const handleSubmitPassword = useLastCallback(async (password: string) => {\n    const result = await callApi('verifyPassword', password);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n    unlock();\n  });\n\n  const handlePasswordChange = useLastCallback(() => setPasswordError(''));\n\n  useEffectOnce(() => {\n    for (const eventName of ACTIVATION_EVENT_NAMES) {\n      window.addEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n    }\n\n    return () => {\n      for (const eventName of ACTIVATION_EVENT_NAMES) {\n        window.removeEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n      }\n    };\n  });\n\n  useEffectOnce(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return getActivitySignal.subscribe(handleActivityThrottled);\n  });\n\n  const handleLockScreenHotkey = useLastCallback((e: KeyboardEvent) => {\n    stopEvent(e);\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n  });\n\n  useHotkeys(useMemo(() => (isAppLockEnabled && !isLocked ? {\n    'Ctrl+Shift+L': handleLockScreenHotkey,\n    'Alt+Shift+L': handleLockScreenHotkey,\n    'Meta+Shift+L': handleLockScreenHotkey,\n    ...(IS_ELECTRON && { 'Mod+L': handleLockScreenHotkey }),\n  } : undefined), [isAppLockEnabled, isLocked]));\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    const interval = setInterval(() => {\n      if (isAppLockEnabled && !isLocked && Date.now() - lastActivityTime.current > autolockPeriod) {\n        handleLock();\n      }\n    }, INTERVAL_CHECK_PERIOD);\n    return () => clearInterval(interval);\n  }, [isLocked, autolockPeriod, handleLock, isAppLockEnabled]);\n\n  useBackgroundMode(undefined, handleChangeSlideForBiometricAuth);\n\n  function renderLogo() {\n    return (\n      <div className={styles.logo}>\n        <Image className={styles.logo} imageClassName={styles.logo} url={logoPath} alt=\"Logo\" />\n      </div>\n    );\n  }\n\n  function renderTransitionContent(isActive: boolean) {\n    const isFixedSlide = isNonNativeBiometricAuthEnabled && slideForBiometricAuth === SLIDES.button;\n\n    return (\n      <div\n        className={buildClassName(styles.appLocked, isNonNativeBiometricAuthEnabled && styles.appLockedFixed)}\n      >\n        {\n          isFixedSlide ? (\n            <>\n              {renderLogo()}\n              <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n              <Button\n                isPrimary\n                className={!isActive ? styles.unlockButtonHidden : undefined}\n                onClick={handleChangeSlideForBiometricAuth}\n              >\n                {lang('Unlock')}\n              </Button>\n            </>\n          ) : (\n            <PasswordForm\n              isActive={getIsNativeBiometricAuthSupported() ? !shouldHideBiometrics : true}\n              noAnimatedIcon\n              forceBiometricsInMain\n              error={passwordError}\n              resetStateDelayMs={PINPAD_RESET_DELAY}\n              operationType=\"unlock\"\n              containerClassName={styles.passwordFormContent}\n              inputWrapperClassName={styles.passwordInputWrapper}\n              submitLabel={lang('Unlock')}\n              onSubmit={handleSubmitPassword}\n              onUpdate={handlePasswordChange}\n            >\n              {renderLogo()}\n              <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n            </PasswordForm>\n          )\n        }\n      </div>\n    );\n  }\n\n  const transitionKey = Number(slideForBiometricAuth === SLIDES.passwordForm) + Number(shouldRenderUi) * 2;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n  return (\n    <Transition\n      name={isNonNativeBiometricAuthEnabled && IS_TELEGRAM_APP ? 'slideFade' : 'semiFade'}\n      onContainerClick={isNonNativeBiometricAuthEnabled ? handleChangeSlideForBiometricAuth : undefined}\n      activeKey={transitionKey}\n      className={buildClassName(transitionClassNames, styles.appLockedWrapper)}\n      shouldCleanup\n    >\n      {shouldRenderUi ? renderTransitionContent : undefined}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { autolockValue, isAppLockEnabled } = global.settings;\n\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isNonNativeBiometricAuthEnabled = isBiometricAuthEnabled && (!isNativeBiometricAuthEnabled || IS_TELEGRAM_APP);\n\n  return {\n    isNonNativeBiometricAuthEnabled,\n    autolockValue: isAppLockEnabled ? autolockValue : undefined,\n    isAppLockEnabled,\n    theme: global.settings.theme,\n    isHardwareAccount,\n    isManualLockActive: global.isManualLockActive,\n    shouldHideBiometrics: global.appLockHideBiometrics,\n  };\n})(AppLocked));\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport type { LedgerTransport } from '../../../util/ledger/types';\nimport type { GlobalState } from '../../types';\nimport {\n  AppState, AuthState, HardwareConnectState, SettingsState, SwapState, TransferState,\n} from '../../types';\n\nimport {\n  ANIMATION_LEVEL_MIN,\n  APP_VERSION,\n  BETA_URL,\n  BOT_USERNAME,\n  DEBUG,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_PRODUCTION,\n  PRODUCTION_URL,\n} from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { parseDeeplinkTransferParams, processDeeplink } from '../../../util/deeplink';\nimport getIsAppUpdateNeeded from '../../../util/getIsAppUpdateNeeded';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { omit } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { onLedgerTabClose, openLedgerTab } from '../../../util/ledger/tab';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { pause } from '../../../util/schedulers';\nimport { getTelegramApp } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID_APP,\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { closeAllOverlays, parsePlainAddressQr } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentSwap,\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  renameAccount,\n  setCurrentTransferAddress,\n  setIsPinAccepted,\n  updateAccounts,\n  updateAuth,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentSwap,\n  updateCurrentTransfer,\n  updateHardware,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectFirstNonHardwareAccount,\n} from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { reportAppLockActivityEvent } from '../../../components/AppLocked';\nimport { closeModal } from '../../../components/ui/Modal';\n\nconst OPEN_LEDGER_TAB_DELAY = 500;\nconst APP_VERSION_URL = IS_ANDROID_APP ? `${IS_PRODUCTION ? PRODUCTION_URL : BETA_URL}/version.txt` : 'version.txt';\n\naddActionHandler('showActivityInfo', (global, actions, { id }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showActivityInfo', { id });\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: id });\n});\n\naddActionHandler('showAnyAccountTx', async (global, actions, { txId, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTx', { txId, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showActivityInfo({ id: txId });\n});\n\naddActionHandler('showAnyAccountTokenActivity', async (global, actions, { slug, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTokenActivity', { slug, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showTokenActivity({ slug });\n});\n\naddActionHandler('closeActivityInfo', (global, actions, { id }) => {\n  if (selectCurrentAccountState(global)?.currentActivityId !== id) {\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: undefined });\n});\n\naddActionHandler('addSavedAddress', (global, actions, { address, name, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    savedAddresses: [\n      ...savedAddresses,\n      { address, name, chain },\n    ],\n  });\n});\n\naddActionHandler('removeFromSavedAddress', (global, actions, { address, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  const newSavedAddresses = savedAddresses.filter((item) => !(item.address === address && item.chain === chain));\n\n  return updateCurrentAccountState(global, { savedAddresses: newSavedAddresses });\n});\n\naddActionHandler('toggleTinyTransfersHidden', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      areTinyTransfersHidden: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setCurrentTokenPeriod', (global, actions, { period }) => {\n  return updateCurrentAccountState(global, {\n    currentTokenPeriod: period,\n  });\n});\n\naddActionHandler('addAccount', async (global, actions, { method, password, isAuthFlow }) => {\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const isMnemonicImport = method === 'importMnemonic';\n\n  if (firstNonHardwareAccount) {\n    if (!(await callApi('verifyPassword', password))) {\n      global = getGlobal();\n      if (isAuthFlow) {\n        global = updateAuth(global, {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      } else {\n        global = updateAccounts(getGlobal(), {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      }\n      setGlobal(global);\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      global = setIsPinAccepted(getGlobal());\n      setGlobal(global);\n    }\n    await vibrateOnSuccess(true);\n  }\n\n  global = getGlobal();\n  if (isMnemonicImport || !firstNonHardwareAccount) {\n    global = { ...global, isAddAccountModalOpen: undefined };\n  } else {\n    global = updateAccounts(global, { isLoading: true });\n  }\n  setGlobal(global);\n\n  if (!IS_DELEGATED_BOTTOM_SHEET) {\n    actions.addAccount2({ method, password });\n  } else {\n    callActionInMain('addAccount2', { method, password });\n  }\n});\n\naddActionHandler('addAccount2', (global, actions, { method, password }) => {\n  const isMnemonicImport = method === 'importMnemonic';\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const authState = firstNonHardwareAccount\n    ? isMnemonicImport\n      ? AuthState.importWallet\n      : undefined\n    : (\n      getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  if (isMnemonicImport || !firstNonHardwareAccount) {\n    global = { ...global, appState: AppState.Auth };\n  }\n  global = updateAuth(global, { password, state: authState });\n  global = clearCurrentTransfer(global);\n  global = clearCurrentSwap(global);\n\n  setGlobal(global);\n\n  if (isMnemonicImport) {\n    actions.startImportingWallet();\n  } else {\n    actions.startCreatingWallet();\n  }\n});\n\naddActionHandler('renameAccount', (global, actions, { accountId, title }) => {\n  global = { ...global, shouldForceAccountEdit: false };\n\n  setGlobal(renameAccount(global, accountId, title));\n\n  actions.renameNotificationAccount({ accountId });\n});\n\naddActionHandler('clearAccountError', (global) => {\n  return updateAccounts(global, { error: undefined });\n});\n\naddActionHandler('openAddAccountModal', (global, actions, props) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openAddAccountModal', props);\n    return;\n  }\n\n  global = { ...global, isAddAccountModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeAddAccountModal', (global) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  return { ...global, isAddAccountModalOpen: undefined };\n});\n\naddActionHandler('changeNetwork', (global, actions, { network }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTestnet: network === 'testnet',\n    },\n  };\n});\n\naddActionHandler('openSettings', (global) => {\n  global = updateSettings(global, { state: SettingsState.Initial });\n\n  return { ...global, areSettingsOpen: true };\n});\n\naddActionHandler('openSettingsWithState', (global, actions, { state }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openSettingsWithState', { state });\n    return;\n  }\n\n  global = updateSettings(global, { state });\n  setGlobal({ ...global, areSettingsOpen: true });\n});\n\naddActionHandler('setSettingsState', (global, actions, { state }) => {\n  global = updateSettings(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('closeSettings', (global) => {\n  if (!global.currentAccountId) {\n    return global;\n  }\n\n  return { ...global, areSettingsOpen: false };\n});\n\naddActionHandler('openBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openBackupWalletModal');\n    return undefined;\n  }\n\n  return { ...global, isBackupWalletModalOpen: true };\n});\n\naddActionHandler('closeBackupWalletModal', (global) => {\n  return { ...global, isBackupWalletModalOpen: undefined };\n});\n\naddActionHandler('initializeHardwareWalletModal', async (global, actions) => {\n  const ledgerApi = await import('../../../util/ledger');\n  const { isBluetoothAvailable, isUsbAvailable } = await ledgerApi.detectAvailableTransports();\n  const availableTransports: LedgerTransport[] = [];\n  if (isUsbAvailable) {\n    availableTransports.push('usb');\n  }\n  if (isBluetoothAvailable) {\n    availableTransports.push('bluetooth');\n  }\n\n  if (availableTransports.length === 0) {\n    actions.showNotification({\n      message: 'Ledger is not supported on this device.',\n    });\n  } else if (availableTransports.length === 1) {\n    actions.initializeHardwareWalletConnection({ transport: availableTransports[0] });\n  } else {\n    global = updateHardware(getGlobal(), {\n      availableTransports,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('initializeHardwareWalletConnection', async (global, actions, params) => {\n  if (IS_DELEGATING_BOTTOM_SHEET && params.shouldDelegateToNative) {\n    callActionInNative('initializeHardwareWalletConnection', { transport: params.transport });\n    return;\n  }\n\n  const setHardwareStateToConnecting = () => {\n    global = getGlobal();\n    global = updateHardware(getGlobal(), {\n      hardwareState: HardwareConnectState.Connecting,\n    });\n    setGlobal(global);\n  };\n\n  setHardwareStateToConnecting();\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (await ledgerApi.connectLedger(params.transport)) {\n    actions.connectHardwareWallet({ transport: params.transport });\n    return;\n  }\n\n  if (!IS_EXTENSION) {\n    global = getGlobal();\n    global = updateHardware(global, {\n      isLedgerConnected: false,\n      hardwareState: HardwareConnectState.Failed,\n    });\n    setGlobal(global);\n    return;\n  }\n\n  global = updateHardware(getGlobal(), {\n    hardwareState: HardwareConnectState.WaitingForBrowser,\n  });\n  setGlobal(global);\n\n  await pause(OPEN_LEDGER_TAB_DELAY);\n  const id = await openLedgerTab();\n  const popup = await chrome.windows.getCurrent();\n\n  onLedgerTabClose(id, async () => {\n    await chrome.windows.update(popup.id!, { focused: true });\n\n    if (!await ledgerApi.connectLedger(params.transport)) {\n      actions.closeHardwareWalletModal();\n      return;\n    }\n\n    setHardwareStateToConnecting();\n    actions.connectHardwareWallet({ transport: params.transport });\n  });\n});\n\naddActionHandler('openHardwareWalletModal', async (global) => {\n  const hardwareState = await connectLedgerAndGetHardwareState();\n\n  global = updateHardware(getGlobal(), { hardwareState });\n\n  setGlobal({ ...global, isHardwareModalOpen: true });\n});\n\naddActionHandler('openSettingsHardwareWallet', async (global) => {\n  const hardwareState = await connectLedgerAndGetHardwareState();\n\n  global = updateHardware(getGlobal(), { hardwareState });\n  global = updateSettings(global, { state: SettingsState.LedgerConnectHardware });\n\n  setGlobal(global);\n});\n\naddActionHandler('closeHardwareWalletModal', (global) => {\n  setGlobal({ ...global, isHardwareModalOpen: false });\n});\n\naddActionHandler('toggleInvestorView', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isInvestorViewEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('changeLanguage', (global, actions, { langCode }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      langCode,\n    },\n  };\n});\n\naddActionHandler('toggleCanPlaySounds', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      canPlaySounds: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setLandscapeActionsActiveTabIndex', (global, actions, { index }) => {\n  return updateCurrentAccountState(global, {\n    landscapeActionsActiveTabIndex: index,\n  });\n});\n\naddActionHandler('closeSecurityWarning', (global) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isSecurityWarningHidden: true,\n    },\n  };\n});\n\naddActionHandler('toggleTokensWithNoCost', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { areTokensWithNoCostHidden: isEnabled });\n});\n\naddActionHandler('toggleSortByValue', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { isSortByValueEnabled: isEnabled });\n});\n\naddActionHandler('updateOrderedSlugs', (global, actions, { orderedSlugs }) => {\n  const accountSettings = selectCurrentAccountSettings(global);\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs,\n  });\n});\n\naddActionHandler('toggleTokenVisibility', (global, actions, { slug, shouldShow }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { alwaysShownSlugs = [], alwaysHiddenSlugs = [] } = accountSettings;\n  const alwaysShownSlugsSet = new Set(alwaysShownSlugs);\n  const alwaysHiddenSlugsSet = new Set(alwaysHiddenSlugs);\n\n  if (shouldShow) {\n    alwaysHiddenSlugsSet.delete(slug);\n    alwaysShownSlugsSet.add(slug);\n  } else {\n    alwaysShownSlugsSet.delete(slug);\n    alwaysHiddenSlugsSet.add(slug);\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    alwaysHiddenSlugs: Array.from(alwaysHiddenSlugsSet),\n    alwaysShownSlugs: Array.from(alwaysShownSlugsSet),\n  });\n});\n\naddActionHandler('deleteToken', (global, actions, { slug }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: accountSettings.orderedSlugs?.filter((s) => s !== slug),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((s) => s !== slug),\n    alwaysShownSlugs: accountSettings.alwaysShownSlugs?.filter((s) => s !== slug),\n    deletedSlugs: [...accountSettings.deletedSlugs ?? [], slug],\n    importedSlugs: accountSettings.importedSlugs?.filter((s) => s !== slug),\n  });\n});\n\naddActionHandler('checkAppVersion', (global) => {\n  fetch(`${APP_VERSION_URL}?${Date.now()}`)\n    .then((response) => response.text())\n    .then((version) => {\n      version = version.trim();\n\n      if (getIsAppUpdateNeeded(version, APP_VERSION)) {\n        global = getGlobal();\n        global = {\n          ...global,\n          isAppUpdateAvailable: true,\n          latestAppVersion: version.trim(),\n        };\n        setGlobal(global);\n      }\n    })\n    .catch((err) => {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.error('[checkAppVersion failed] ', err);\n      }\n    });\n});\n\naddActionHandler('requestConfetti', (global) => {\n  if (global.settings.animationLevel === ANIMATION_LEVEL_MIN) return global;\n\n  return {\n    ...global,\n    confettiRequestedAt: Date.now(),\n  };\n});\n\naddActionHandler('requestOpenQrScanner', async (global, actions) => {\n  if (getIsMobileTelegramApp()) {\n    const webApp = getTelegramApp();\n    webApp?.showScanQrPopup({}, (data) => {\n      void vibrateOnSuccess();\n      webApp.closeScanQrPopup();\n      actions.handleQrCode({ data });\n    });\n    return;\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('requestOpenQrScanner');\n    return;\n  }\n\n  let currentQrScan: GlobalState['currentQrScan'];\n  if (global.currentTransfer.state === TransferState.Initial) {\n    currentQrScan = { currentTransfer: global.currentTransfer };\n  } else if (global.currentSwap.state === SwapState.Blockchain) {\n    currentQrScan = { currentSwap: global.currentSwap };\n  }\n\n  const { camera } = await BarcodeScanner.requestPermissions();\n  const isGranted = camera === 'granted' || camera === 'limited';\n  if (!isGranted) {\n    actions.showNotification({\n      message: getTranslation('Permission denied. Please grant camera permission to use the QR code scanner.'),\n    });\n    return;\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    isQrScannerOpen: true,\n    currentQrScan,\n  };\n\n  setGlobal(global);\n});\n\naddActionHandler('closeQrScanner', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeQrScanner');\n  }\n\n  return {\n    ...global,\n    isQrScannerOpen: undefined,\n    currentQrScan: undefined,\n  };\n});\n\naddActionHandler('handleQrCode', async (global, actions, { data }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('handleQrCode', { data });\n    return;\n  }\n\n  const { currentTransfer, currentSwap } = global.currentQrScan || {};\n\n  if (currentTransfer) {\n    const transferParams = parseDeeplinkTransferParams(data, global);\n    if (transferParams) {\n      if ('error' in transferParams) {\n        actions.showError({ error: transferParams.error });\n        // Not returning on error is intentional\n      }\n      setGlobal(updateCurrentTransfer(global, {\n        ...currentTransfer,\n        ...omit(transferParams, ['error']),\n      }));\n    } else {\n      // Assuming that the QR code content is a plain wallet address\n      setGlobal(setCurrentTransferAddress(updateCurrentTransfer(global, currentTransfer), data));\n    }\n    return;\n  }\n\n  if (currentSwap) {\n    const linkParams = parseDeeplinkTransferParams(data, global);\n    const toAddress = linkParams?.toAddress ?? data;\n    setGlobal(updateCurrentSwap(global, { ...currentSwap, toAddress }));\n    return;\n  }\n\n  if (await processDeeplink(data)) {\n    return;\n  }\n\n  global = getGlobal();\n\n  const plainAddressData = parsePlainAddressQr(global, data);\n  if (plainAddressData) {\n    actions.startTransfer({\n      ...plainAddressData,\n      isPortrait: getIsPortrait(),\n    });\n    return;\n  }\n\n  actions.showDialog({ title: 'This QR Code is not supported', message: '' });\n});\n\naddActionHandler('changeBaseCurrency', async (global, actions, { currency }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('changeBaseCurrency', { currency });\n  }\n\n  await callApi('setBaseCurrency', currency);\n  await callApi('tryUpdatePrices');\n\n  await Promise.all([\n    callApi('tryUpdateTokens'),\n    callApi('tryUpdateSwapTokens'),\n  ]);\n});\n\naddActionHandler('setIsPinAccepted', (global) => {\n  return setIsPinAccepted(global);\n});\n\naddActionHandler('clearIsPinAccepted', (global) => {\n  return clearIsPinAccepted(global);\n});\n\naddActionHandler('openOnRampWidgetModal', (global, actions, { chain }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openOnRampWidgetModal', { chain });\n    return;\n  }\n\n  setGlobal({ ...global, chainForOnRampWidgetModal: chain });\n});\n\naddActionHandler('closeOnRampWidgetModal', (global) => {\n  setGlobal({ ...global, chainForOnRampWidgetModal: undefined });\n});\n\naddActionHandler('openMediaViewer', (global, actions, {\n  mediaId, mediaType, txId, hiddenNfts, noGhostAnimation,\n}) => {\n  const accountState = selectCurrentAccountState(global);\n  const { byAddress } = accountState?.nfts || {};\n  const nft = byAddress?.[mediaId!];\n\n  if (!nft) return undefined;\n\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId,\n      mediaType,\n      txId,\n      hiddenNfts,\n      noGhostAnimation,\n    },\n  };\n});\n\naddActionHandler('closeMediaViewer', (global) => {\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId: undefined,\n      mediaType: undefined,\n    },\n  };\n});\n\naddActionHandler('openReceiveModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openReceiveModal');\n    return;\n  }\n\n  setGlobal({ ...global, isReceiveModalOpen: true });\n});\n\naddActionHandler('closeReceiveModal', (global) => {\n  setGlobal({ ...global, isReceiveModalOpen: undefined });\n});\n\naddActionHandler('openInvoiceModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openInvoiceModal');\n    return;\n  }\n  setGlobal({ ...global, isInvoiceModalOpen: true });\n});\n\naddActionHandler('closeInvoiceModal', (global) => {\n  setGlobal({ ...global, isInvoiceModalOpen: undefined });\n});\n\naddActionHandler('showIncorrectTimeError', (global, actions) => {\n  actions.showDialog({\n    message: getTranslation('Time synchronization issue. Please ensure your device\\'s time settings are correct.'),\n  });\n\n  return { ...global, isIncorrectTimeNotificationReceived: true };\n});\n\naddActionHandler('initLedgerPage', (global) => {\n  global = updateHardware(global, {\n    isRemoteTab: true,\n  });\n  setGlobal({ ...global, appState: AppState.Ledger });\n});\n\naddActionHandler('openLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: true });\n});\n\naddActionHandler('closeLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: undefined });\n});\n\naddActionHandler('clearAccountLoading', (global) => {\n  setGlobal(updateAccounts(global, { isLoading: undefined }));\n});\n\naddActionHandler('authorizeDiesel', (global) => {\n  const address = selectCurrentAccount(global)!.addressByChain.ton;\n  setGlobal(updateCurrentAccountState(global, { isDieselAuthorizationStarted: true }));\n  void openUrl(`https://t.me/${BOT_USERNAME}?start=auth-${address}`);\n});\n\naddActionHandler('submitAppLockActivityEvent', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitAppLockActivityEvent');\n    return;\n  }\n  reportAppLockActivityEvent();\n});\n\naddActionHandler('closeAnyModal', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeAnyModal');\n    return;\n  }\n\n  closeModal();\n});\n\naddActionHandler('openExplore', (global) => {\n  return { ...global, isExploreOpen: true };\n});\n\naddActionHandler('closeExplore', (global) => {\n  return { ...global, isExploreOpen: undefined };\n});\n\naddActionHandler('openFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: true });\n});\n\naddActionHandler('closeFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: undefined });\n});\n\naddActionHandler('setIsSensitiveDataHidden', (global, actions, { isHidden }) => {\n  setGlobal(updateSettings(global, { isSensitiveDataHidden: isHidden ? true : undefined }));\n});\n\nasync function connectLedgerAndGetHardwareState() {\n  const ledgerApi = await import('../../../util/ledger');\n  let newHardwareState;\n\n  // If not running in the Capacitor environment, try to instantly connect to the Ledger\n  const isConnected = !IS_CAPACITOR ? await ledgerApi.connectLedger() : false;\n\n  if (!isConnected && IS_EXTENSION) {\n    newHardwareState = HardwareConnectState.WaitingForBrowser;\n  } else {\n    newHardwareState = HardwareConnectState.Connect;\n  }\n\n  return newHardwareState;\n}\n","import { addCallback } from '../../../lib/teact/teactn';\n\nimport type { GlobalState } from '../../types';\n\nimport { setLanguage } from '../../../util/langProvider';\nimport switchTheme from '../../../util/switchTheme';\nimport { addActionHandler } from '../..';\n\nlet prevGlobal: GlobalState | undefined;\n\naddCallback((global: GlobalState) => {\n  if (!prevGlobal) {\n    prevGlobal = global;\n    return;\n  }\n\n  const { settings: prevSettings } = prevGlobal;\n  const { settings } = global;\n\n  if (settings.theme !== prevSettings.theme) {\n    switchTheme(settings.theme);\n  }\n\n  if (settings.langCode !== prevSettings.langCode) {\n    void setLanguage(settings.langCode);\n  }\n\n  prevGlobal = global;\n});\n\naddActionHandler('setAppLockValue', (global, actions, { value, isEnabled }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      autolockValue: value,\n      isAppLockEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setIsManualLockActive', (global, actions, { isActive, shouldHideBiometrics }) => {\n  return {\n    ...global,\n    isManualLockActive: isActive,\n    appLockHideBiometrics: shouldHideBiometrics,\n  };\n});\n","import { TransferState } from '../../types';\n\nimport { BROWSER_HISTORY_LIMIT } from '../../../config';\nimport { unique } from '../../../util/iteratees';\nimport { callActionInMain } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearDappConnectRequestError, updateCurrentAccountState, updateCurrentDappTransfer,\n} from '../../reducers';\nimport { selectAccount, selectCurrentAccountState } from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\naddActionHandler('clearDappConnectRequestError', (global) => {\n  global = clearDappConnectRequestError(global);\n  setGlobal(global);\n});\n\naddActionHandler('showDappTransfer', (global, actions, payload) => {\n  const { transactionIdx } = payload;\n\n  global = updateCurrentDappTransfer(global, {\n    state: TransferState.Confirm,\n    viewTransactionOnIdx: transactionIdx,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setDappTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  global = updateCurrentDappTransfer(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferConfirm', (global, actions) => {\n  const accountId = global.currentAccountId!;\n  const account = selectAccount(global, accountId)!;\n\n  if (account.isHardware) {\n    actions.resetHardwareWalletConnect();\n    global = updateCurrentDappTransfer(getGlobal(), { state: TransferState.ConnectHardware });\n  } else {\n    global = updateCurrentDappTransfer(global, { state: TransferState.Password });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('clearDappTransferError', (global) => {\n  global = updateCurrentDappTransfer(global, {\n    error: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('openBrowser', (global, actions, {\n  url, title, subtitle,\n}) => {\n  global = {\n    ...global,\n    currentBrowserOptions: {\n      url, title, subtitle,\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('closeBrowser', (global) => {\n  global = { ...global, currentBrowserOptions: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('addSiteToBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = unique([\n    url,\n    ...accountState?.browserHistory || [],\n  ]).slice(0, BROWSER_HISTORY_LIMIT);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('removeSiteFromBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = accountState?.browserHistory?.filter((currentUrl) => currentUrl !== url);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory?.length ? newHistory : undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('updateDappLastOpenedAt', (global, actions, { origin }) => {\n  const { dappLastOpenedDatesByOrigin } = selectCurrentAccountState(global)!;\n\n  const newDates = {\n    ...dappLastOpenedDatesByOrigin,\n    [origin]: Date.now(),\n  };\n\n  global = updateCurrentAccountState(global, { dappLastOpenedDatesByOrigin: newDates });\n  setGlobal(global);\n});\n\naddActionHandler('openSiteCategory', (global, actions, { id }) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: id });\n});\n\naddActionHandler('closeSiteCategory', (global) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: undefined });\n});\n\naddActionHandler('switchAccountAndOpenUrl', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccountAndOpenUrl', payload);\n    return;\n  }\n\n  await Promise.all([\n    // The browser is closed before opening the new URL, because otherwise the browser won't apply the new\n    // parameters from `payload`. It's important to wait for `closeAllOverlays` to finish, because until the in-app\n    // browser is closed, it won't open again.\n    closeAllOverlays(),\n    payload.accountId && switchAccount(global, payload.accountId, payload.network),\n  ]);\n\n  await openUrl(payload.url, payload);\n});\n","import { addActionHandler, setGlobal } from '../../index';\nimport {\n  addToSelectedAddresses,\n  removeFromSelectedAddresses,\n  updateAccountState,\n  updateCurrentAccountState,\n} from '../../reducers';\nimport { selectAccountState, selectCurrentAccountState } from '../../selectors';\n\naddActionHandler('openNftCollection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: address,\n    },\n  });\n  return global;\n});\n\naddActionHandler('closeNftCollection', (global) => {\n  const accountState = selectCurrentAccountState(global);\n  global = updateCurrentAccountState(global, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: undefined,\n    },\n    selectedNftsToHide: undefined,\n  });\n  return global;\n});\n\naddActionHandler('selectNfts', (global, actions, { addresses }) => {\n  const accountId = global.currentAccountId!;\n  global = addToSelectedAddresses(global, accountId, addresses);\n  setGlobal(global);\n});\n\naddActionHandler('selectAllNfts', (global, actions, { collectionAddress }) => {\n  const accountId = global.currentAccountId!;\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectAccountState(global, accountId) || {};\n\n  const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n  const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n  const { nfts: accountNfts } = selectAccountState(global, accountId)!;\n  const nfts = Object.values(accountNfts!.byAddress).filter((nft) => (\n    !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n  ) && !blacklistedNftAddressesSet.has(nft.address) && (\n    collectionAddress === undefined || (\n      collectionAddress !== undefined && nft.collectionAddress === collectionAddress\n    )\n  ));\n\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountNfts!,\n      selectedAddresses: nfts.map(({ address }) => address),\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearNftSelection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  global = removeFromSelectedAddresses(global, accountId, address);\n  setGlobal(global);\n});\n\naddActionHandler('clearNftsSelection', (global) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      selectedAddresses: [],\n    },\n  });\n  setGlobal(global);\n});\n","import { VestingUnfreezeState } from '../../types';\n\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport { updateVesting } from '../../reducers';\nimport { selectAccount } from '../../selectors';\n\naddActionHandler('openVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: true });\n});\n\naddActionHandler('closeVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: undefined });\n});\n\naddActionHandler('startClaimingVesting', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startClaimingVesting');\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n  const { isHardware } = selectAccount(global, accountId)!;\n  global = { ...global, isVestingModalOpen: undefined };\n  global = updateVesting(global, accountId, {\n    isConfirmRequested: true,\n    unfreezeState: isHardware ? VestingUnfreezeState.ConnectHardware : VestingUnfreezeState.Password,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelClaimingVesting', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { isConfirmRequested: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('clearVestingError', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { error: undefined });\n  setGlobal(global);\n});\n","import { ContentTab } from '../../types';\n\nimport { areSortedArraysEqual, unique } from '../../../util/iteratees';\nimport { addActionHandler } from '../../index';\nimport { updateCurrentAccountSettings } from '../../reducers';\nimport { selectCurrentAccountSettings, selectCurrentAccountTokens } from '../../selectors';\n\naddActionHandler('rebuildOrderedSlugs', (global) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { orderedSlugs = [] } = accountSettings;\n  const accountTokens = selectCurrentAccountTokens(global) ?? [];\n  const allSlugs = accountTokens.map(({ slug }) => slug);\n  const newOrderedSlugs = unique([...orderedSlugs, ...allSlugs]);\n\n  if (areSortedArraysEqual(orderedSlugs, newOrderedSlugs)) {\n    return global;\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: newOrderedSlugs,\n  });\n});\n\naddActionHandler('showTokenActivity', (global, actions, { slug }) => {\n  actions.selectToken({ slug }, { forceOnHeavyAnimation: true });\n  actions.setActiveContentTab({ tab: ContentTab.Activity });\n});\n","import { ActiveTab, TransferState } from '../../types';\n\nimport { fromDecimal, toDecimal } from '../../../util/decimals';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { setCurrentTransferAddress, updateCurrentTransfer } from '../../reducers';\nimport { selectAccount } from '../../selectors';\n\naddActionHandler('startTransfer', (global, actions, payload) => {\n  const isOpen = global.currentTransfer.state !== TransferState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startTransfer', payload);\n    return;\n  }\n\n  const { isPortrait, ...rest } = payload ?? {};\n\n  const nftTokenSlug = Symbol('nft');\n  const previousFeeTokenSlug = global.currentTransfer.nfts?.length ? nftTokenSlug : global.currentTransfer.tokenSlug;\n  const nextFeeTokenSlug = payload?.nfts?.length ? nftTokenSlug : payload?.tokenSlug;\n  const shouldClearFee = nextFeeTokenSlug && nextFeeTokenSlug !== previousFeeTokenSlug;\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: isPortrait ? TransferState.Initial : TransferState.None,\n    error: undefined,\n    ...(shouldClearFee ? { fee: undefined, realFee: undefined, diesel: undefined } : {}),\n    ...rest,\n  }));\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n});\n\naddActionHandler('changeTransferToken', (global, actions, { tokenSlug, withResetAmount }) => {\n  const { amount, tokenSlug: currentTokenSlug, nfts } = global.currentTransfer;\n  if (!nfts?.length && tokenSlug === currentTokenSlug && !withResetAmount) {\n    return;\n  }\n\n  const currentToken = currentTokenSlug ? global.tokenInfo.bySlug[currentTokenSlug] : undefined;\n  const newToken = global.tokenInfo.bySlug[tokenSlug];\n\n  if (withResetAmount) {\n    global = updateCurrentTransfer(global, { amount: undefined });\n  } else if (amount && currentToken?.decimals !== newToken?.decimals) {\n    global = updateCurrentTransfer(global, {\n      amount: fromDecimal(toDecimal(amount, currentToken?.decimals), newToken?.decimals),\n    });\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    tokenSlug,\n    fee: undefined,\n    realFee: undefined,\n    diesel: undefined,\n    nfts: undefined,\n  }));\n});\n\naddActionHandler('setTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  return updateCurrentTransfer(global, { state });\n});\n\naddActionHandler('setTransferAmount', (global, actions, { amount }) => {\n  return updateCurrentTransfer(global, { amount });\n});\n\naddActionHandler('setTransferToAddress', (global, actions, { toAddress }) => {\n  return setCurrentTransferAddress(global, toAddress);\n});\n\naddActionHandler('setTransferComment', (global, actions, { comment }) => {\n  return updateCurrentTransfer(global, { comment });\n});\n\naddActionHandler('setTransferShouldEncrypt', (global, actions, { shouldEncrypt }) => {\n  return updateCurrentTransfer(global, { shouldEncrypt });\n});\n\naddActionHandler('submitTransferConfirm', (global, actions) => {\n  const accountId = global.currentAccountId!;\n  const account = selectAccount(global, accountId)!;\n\n  if (account.isHardware) {\n    actions.resetHardwareWalletConnect();\n    global = updateCurrentTransfer(getGlobal(), { state: TransferState.ConnectHardware });\n  } else {\n    global = updateCurrentTransfer(global, { state: TransferState.Password });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('clearTransferError', (global) => {\n  setGlobal(updateCurrentTransfer(global, { error: undefined }));\n});\n","import { addActionHandler } from '../../index';\n\naddActionHandler('setTheme', (global, actions, { theme }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      theme,\n    },\n  };\n});\n\naddActionHandler('setAnimationLevel', (global, actions, { level }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      animationLevel: level,\n    },\n  };\n});\n","import { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  deleteAllNotificationAccounts,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\naddActionHandler('tryAddNotificationAccount', (global, actions, { accountId }) => {\n  if (\n    global.pushNotifications.isAvailable\n    && Object.keys(selectAccounts(global) || {}).length <= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('renameNotificationAccount', (global, actions, { accountId }) => {\n  const { enabledAccounts, isAvailable } = global.pushNotifications;\n\n  if (\n    isAvailable\n    && enabledAccounts?.[accountId]\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('toggleNotificationAccount', (global, actions, { accountId }) => {\n  const {\n    enabledAccounts, userToken, platform,\n  } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  const isExists = enabledAccounts && enabledAccounts[accountId];\n\n  if (\n    !isExists\n    && Object.keys(enabledAccounts || {}).length >= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT\n  ) {\n    return;\n  }\n\n  if (isExists) {\n    actions.deleteNotificationAccount({ accountId, withAbort: true });\n  } else {\n    actions.createNotificationAccount({ accountId, withAbort: true });\n  }\n});\n\naddActionHandler('deleteAllNotificationAccounts', async (global, actions, props) => {\n  const {\n    enabledAccounts, userToken,\n  } = global.pushNotifications;\n\n  if (!enabledAccounts || !userToken) {\n    return;\n  }\n\n  const accountIds = props?.accountIds || Object.keys(enabledAccounts);\n\n  await callApi(\n    'unsubscribeNotifications',\n    {\n      userToken,\n      addresses: selectNotificationTonAddressesSlow(global, accountIds),\n    },\n  );\n\n  global = getGlobal();\n  setGlobal(deleteAllNotificationAccounts(global));\n});\n","export const COLOR_COUNT = 2;\nexport const QUALITY = 1;\n\nexport const ACCENT_COLORS = {\n  light: [\n    '#31AFC7', '#35C759', '#FF9500', '#FF2C55',\n    '#AF52DE', '#5856D7', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#1FC863', '#929395', '#E4B102',\n    '#000000',\n  ],\n  dark: [\n    '#3AB5CC', '#32D74B', '#FF9F0B', '#FF325A',\n    '#BF5AF2', '#7977FF', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#2CD36F', '#C3C5C6', '#DDBA00',\n    '#FFFFFF',\n  ],\n} as const;\nexport const ACCENT_RADIOACTIVE_INDEX = 13;\nexport const ACCENT_SILVER_INDEX = 14;\nexport const ACCENT_GOLD_INDEX = 15;\nexport const ACCENT_BNW_INDEX = 16;\n","import type { RefObject } from '../../lib/teact/teact';\nimport { useLayoutEffect } from '../../lib/teact/teact';\nimport { setExtraStyles } from '../../lib/teact/teact-dom';\n\nimport type { ApiNft } from '../../api/types';\nimport type { AppTheme } from '../../global/types';\n\nimport { MAX_WORKERS, requestMediaWorker } from '../launchMediaWorkers';\nimport { logDebugError } from '../logs';\nimport { getCardNftImageUrl } from '../url';\nimport {\n  ACCENT_BNW_INDEX,\n  ACCENT_COLORS,\n  ACCENT_GOLD_INDEX,\n  ACCENT_RADIOACTIVE_INDEX,\n  ACCENT_SILVER_INDEX,\n  COLOR_COUNT,\n  QUALITY,\n} from './constants';\n\nconst HEX_80_PERCENT = 'CC';\nconst HEX_10_PERCENT = '1A';\n\nexport function useAccentColor(\n  elementRefOrBody: RefObject | 'body',\n  appTheme: AppTheme,\n  accentColorIndex: number | undefined,\n) {\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n\n  useLayoutEffect(() => {\n    const element = elementRefOrBody === 'body' ? document.body : elementRefOrBody.current;\n    if (!element) return;\n\n    setExtraStyles(element, {\n      '--color-accent': accentColor || 'inherit',\n      '--color-accent-10o': accentColor ? `${accentColor}${HEX_10_PERCENT}` : 'inherit',\n      '--color-accent-button-background': accentColor || 'inherit',\n      '--color-accent-button-background-hover': accentColor ? `${accentColor}${HEX_80_PERCENT}` : 'inherit',\n      '--color-accent-button-text': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n      '--color-accent-button-text-hover': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n    });\n  }, [elementRefOrBody, accentColor]);\n}\n\nexport async function getAccentColorIndexFromNft(nft: ApiNft) {\n  const { mtwCardType, mtwCardBorderShineType } = nft.metadata!;\n\n  if (mtwCardBorderShineType === 'radioactive') {\n    return ACCENT_RADIOACTIVE_INDEX;\n  }\n  if (mtwCardType === 'silver') {\n    return ACCENT_SILVER_INDEX;\n  }\n  if (mtwCardType === 'gold') {\n    return ACCENT_GOLD_INDEX;\n  }\n  if (mtwCardType === 'platinum' || mtwCardType === 'black') {\n    return ACCENT_BNW_INDEX;\n  }\n\n  const src = getCardNftImageUrl(nft);\n  if (!src) return undefined;\n\n  try {\n    return await requestMediaWorker({\n      name: 'offscreen-canvas:processNftImage',\n      args: [src, QUALITY, COLOR_COUNT],\n    }, Math.round(nft.index) % MAX_WORKERS);\n  } catch (error) {\n    logDebugError('getAccentColorIndexFromNft', error);\n    return undefined;\n  }\n}\n","import type { GlobalState } from '../../types';\nimport { MintCardState } from '../../types';\n\nimport { getAccentColorIndexFromNft } from '../../../util/accentColor';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateCurrentAccountSettings, updateMintCards } from '../../reducers';\nimport { selectAccount } from '../../selectors';\n\naddActionHandler('openMintCardModal', (global): GlobalState => {\n  return updateMintCards(global, { state: MintCardState.Initial });\n});\n\naddActionHandler('closeMintCardModal', (global): GlobalState => {\n  return { ...global, currentMintCard: undefined };\n});\n\naddActionHandler('startCardMinting', (global, action, { type }): GlobalState => {\n  const accountId = global.currentAccountId!;\n  const { isHardware } = selectAccount(global, accountId)!;\n\n  return updateMintCards(global, {\n    type,\n    state: isHardware ? MintCardState.ConnectHardware : MintCardState.Password,\n  });\n});\n\naddActionHandler('clearMintCardError', (global): GlobalState => {\n  return updateMintCards(global, { error: undefined });\n});\n\naddActionHandler('setCardBackgroundNft', (global, actions, { nft }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('setCardBackgroundNft', { nft });\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: nft });\n  setGlobal(global);\n});\n\naddActionHandler('clearCardBackgroundNft', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearCardBackgroundNft');\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('installAccentColorFromNft', async (global, actions, { nft }) => {\n  const accentColorIndex = await getAccentColorIndexFromNft(nft);\n\n  global = getGlobal();\n  global = updateCurrentAccountSettings(global, {\n    accentColorNft: nft,\n    accentColorIndex,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearAccentColorFromNft', (global) => {\n  return updateCurrentAccountSettings(global, {\n    accentColorNft: undefined,\n    accentColorIndex: undefined,\n  });\n});\n","import { getIsHeavyAnimating, onFullyIdle } from '../lib/teact/teact';\nimport { addCallback, removeCallback } from '../lib/teact/teactn';\n\nimport type { ApiActivity } from '../api/types';\nimport type {\n  AccountState,\n  GlobalState,\n  SavedAddress,\n  TokenPeriod,\n  UserToken,\n} from './types';\nimport {\n  StakingState,\n} from './types';\n\nimport {\n  DEBUG,\n  GLOBAL_STATE_CACHE_DISABLED,\n  GLOBAL_STATE_CACHE_KEY,\n  IS_CAPACITOR,\n  MAIN_ACCOUNT_ID,\n  TONCOIN,\n} from '../config';\nimport { buildAccountId, parseAccountId } from '../util/account';\nimport { getIsTxIdLocal } from '../util/activities';\nimport { bigintReviver } from '../util/bigint';\nimport isEmptyObject from '../util/isEmptyObject';\nimport {\n  cloneDeep, filterValues, mapValues, pick, pickTruthy,\n} from '../util/iteratees';\nimport { clearPoisoningCache, updatePoisoningCache } from '../util/poisoningHash';\nimport { onBeforeUnload, throttle } from '../util/schedulers';\nimport { IS_ELECTRON } from '../util/windowEnvironment';\nimport { getIsActiveStakingState } from './helpers/staking';\nimport { addActionHandler, getGlobal } from './index';\nimport { INITIAL_STATE, STATE_VERSION } from './initialState';\nimport { selectAccountTokens } from './selectors';\n\nconst UPDATE_THROTTLE = IS_CAPACITOR ? 500 : 5000;\nconst ACTIVITIES_LIMIT = 20;\nconst ACTIVITY_TOKENS_LIMIT = 30;\n\nconst updateCacheThrottled = throttle(() => onFullyIdle(() => updateCache()), UPDATE_THROTTLE, false);\nconst updateCacheForced = () => updateCache(true);\n\nlet isCaching = false;\nlet unsubscribeFromBeforeUnload: NoneToVoidFunction | undefined;\nlet preloadedData: Partial<GlobalState> | undefined;\n\nexport function initCache() {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return;\n  }\n\n  addActionHandler('afterSignIn', setupCaching);\n\n  addActionHandler('afterSignOut', (global, actions, payload) => {\n    clearPoisoningCache();\n\n    if (payload?.shouldReset) {\n      preloadedData = pick(global, ['swapTokenInfo', 'tokenInfo', 'restrictions']);\n      clearCaching();\n      localStorage.removeItem(GLOBAL_STATE_CACHE_KEY);\n    }\n  });\n\n  addActionHandler('cancelCaching', clearCaching);\n}\n\nfunction setupCaching() {\n  if (isCaching) return;\n\n  isCaching = true;\n\n  addCallback(updateCacheThrottled);\n  unsubscribeFromBeforeUnload = onBeforeUnload(updateCacheForced, true);\n  window.addEventListener('blur', updateCacheForced);\n\n  updateCacheForced();\n}\n\nfunction clearCaching() {\n  if (!isCaching) return;\n\n  window.removeEventListener('blur', updateCacheForced);\n  unsubscribeFromBeforeUnload?.();\n  removeCallback(updateCacheThrottled);\n\n  isCaching = false;\n}\n\nexport function loadCache(initialState: GlobalState): GlobalState {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return initialState;\n  }\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.time('global-state-cache-read');\n  }\n\n  const json = localStorage.getItem(GLOBAL_STATE_CACHE_KEY);\n  let cached = json ? JSON.parse(json, bigintReviver) as GlobalState : undefined;\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.timeEnd('global-state-cache-read');\n  }\n\n  if (cached) {\n    try {\n      migrateCache(cached, initialState);\n      loadMemoryCache(cached);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n\n      cached = undefined;\n    }\n  }\n\n  return {\n    ...initialState,\n    ...preloadedData,\n    ...cached,\n  };\n}\n\nfunction migrateCache(cached: GlobalState, initialState: GlobalState) {\n  // Pre-fill settings with defaults\n  cached.settings = {\n    ...initialState.settings,\n    ...cached.settings,\n  };\n\n  if (cached.stateVersion === STATE_VERSION) {\n    return;\n  }\n\n  // Migration to multi-accounts\n  if (!cached.byAccountId) {\n    (cached as any).accounts = {\n      byId: {\n        [MAIN_ACCOUNT_ID]: {\n          address: (cached as any).addresses.byAccountId[MAIN_ACCOUNT_ID],\n          title: 'Main Account',\n        },\n      },\n    };\n\n    delete (cached as any).addresses;\n\n    cached.byAccountId = {};\n    cached.byAccountId[MAIN_ACCOUNT_ID] = {\n      isBackupRequired: Boolean((cached as any).isBackupRequired),\n      currentTokenSlug: (cached as any).currentTokenSlug as string,\n      currentTokenPeriod: (cached as any).currentTokenPeriod as TokenPeriod,\n    };\n\n    if ('balances' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].balances = (cached as any).balances.byAccountId[MAIN_ACCOUNT_ID];\n      delete (cached as any).balances;\n    }\n\n    if ('transactions' in cached) {\n      (cached.byAccountId[MAIN_ACCOUNT_ID] as any).transactions = (cached as any).transactions;\n      delete (cached as any).transactions;\n    }\n\n    if ('nfts' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].nfts = (cached as any).nfts;\n      delete (cached as any).nfts;\n    }\n\n    if ('savedAddresses' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].savedAddresses = (cached as any).savedAddresses;\n      delete (cached as any).savedAddresses;\n    }\n\n    if ('backupWallet' in cached) {\n      delete (cached as any).backupWallet;\n    }\n  }\n\n  if (\n    (!cached.currentAccountId || !cached.byAccountId[cached.currentAccountId]) && Object.keys(cached.byAccountId).length\n  ) {\n    cached.currentAccountId = Object.keys(cached.byAccountId)[0];\n  }\n\n  // Initializing the v1\n  if (!cached.stateVersion && cached.accounts && Object.keys(cached.accounts).length > 0) {\n    cached.stateVersion = 1;\n  }\n\n  if (cached.stateVersion === 1) {\n    cached.stateVersion = 2;\n\n    if (cached.tokenInfo?.bySlug) {\n      cached.tokenInfo.bySlug = {\n        toncoin: {\n          ...cached.tokenInfo.bySlug.toncoin,\n          decimals: TONCOIN.decimals,\n        },\n      };\n    }\n\n    if (cached.byAccountId) {\n      Object.values(cached.byAccountId).forEach((accountState) => {\n        if (accountState.balances?.bySlug) {\n          accountState.balances.bySlug = pick(accountState.balances!.bySlug, ['toncoin']);\n        }\n        if ((accountState as any).transactions) {\n          delete (accountState as any).transactions;\n        }\n      });\n    }\n  }\n\n  if (cached.stateVersion === 2) {\n    cached.stateVersion = 3;\n\n    // Normalization of MAIN_ACCOUNT_ID '0' => '0-ton-mainnet'\n    const oldId = '0';\n    const newId = MAIN_ACCOUNT_ID;\n    if (cached.accounts && oldId in cached.accounts.byId) {\n      if (cached.currentAccountId === oldId) {\n        cached.currentAccountId = newId;\n      }\n      cached.accounts.byId[newId] = cached.accounts.byId[oldId];\n      delete cached.accounts.byId[oldId];\n      cached.byAccountId[newId] = cached.byAccountId[oldId];\n      delete cached.byAccountId[oldId];\n    }\n\n    // Add testnet accounts\n    if (cached.accounts) {\n      for (const accountId of Object.keys(cached.accounts.byId)) {\n        const testnetAccountId = buildAccountId({\n          ...parseAccountId(accountId),\n          network: 'testnet',\n        });\n        cached.accounts.byId[testnetAccountId] = cloneDeep(cached.accounts.byId[accountId]);\n        cached.byAccountId[testnetAccountId] = {};\n      }\n    }\n  }\n\n  if (cached.stateVersion === 3) {\n    cached.stateVersion = 4;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 4) {\n    cached.stateVersion = 5;\n\n    (cached as any).staking = {\n      state: StakingState.None,\n    };\n  }\n\n  if (cached.stateVersion === 5) {\n    cached.stateVersion = 6;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 6) {\n    cached.stateVersion = 7;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 7) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).backupWallet;\n      }\n    }\n\n    cached.stateVersion = 8;\n  }\n\n  if (cached.stateVersion === 8) {\n    if (cached.settings && IS_ELECTRON) {\n      cached.settings.isDeeplinkHookEnabled = true;\n    }\n\n    cached.stateVersion = 9;\n  }\n\n  function clearActivities() {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).activities;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 9) {\n    clearActivities();\n    cached.stateVersion = 10;\n  }\n\n  if (cached.stateVersion === 10) {\n    if ((cached.settings as any).areTokensWithNoBalanceHidden === undefined) {\n      (cached.settings as any).areTokensWithNoBalanceHidden = true;\n    }\n    cached.stateVersion = 11;\n  }\n\n  if (cached.stateVersion === 11) {\n    clearActivities();\n    cached.stateVersion = 12;\n  }\n\n  if (cached.stateVersion === 12) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete cached.byAccountId[accountId].activities;\n\n        const { balances } = cached.byAccountId[accountId];\n        if (balances) {\n          // eslint-disable-next-line @typescript-eslint/no-loop-func\n          balances.bySlug = Object.entries(balances.bySlug).reduce((acc, [slug, balance]) => {\n            acc[slug] = BigInt(balance);\n            return acc;\n          }, {} as Record<string, bigint>);\n        }\n      }\n    }\n    cached.stateVersion = 13;\n  }\n\n  if (cached.stateVersion === 13) {\n    const { areTokensWithNoPriceHidden, areTokensWithNoBalanceHidden } = cached.settings as any as {\n      areTokensWithNoPriceHidden?: boolean;\n      areTokensWithNoBalanceHidden?: boolean;\n    };\n\n    cached.settings.areTokensWithNoCostHidden = Boolean(areTokensWithNoPriceHidden || areTokensWithNoBalanceHidden);\n    cached.stateVersion = 14;\n  }\n\n  if (cached.stateVersion === 14) {\n    clearActivities();\n    cached.stateVersion = 15;\n  }\n\n  if (cached.stateVersion === 15) {\n    clearActivities();\n    cached.stateVersion = 16;\n  }\n\n  if (cached.stateVersion === 16) {\n    clearActivities();\n    cached.stateVersion = 17;\n  }\n\n  if (cached.stateVersion === 17) {\n    clearActivities();\n    cached.stateVersion = 18;\n  }\n\n  if (cached.stateVersion === 18 || cached.stateVersion === 19) {\n    for (const accountId of Object.keys(cached.byAccountId)) {\n      cached.byAccountId[accountId].currentTokenPeriod = '1D';\n    }\n    cached.stateVersion = 20;\n  }\n\n  if (cached.stateVersion === 20) {\n    clearActivities();\n    cached.stateVersion = 21;\n  }\n\n  if (cached.stateVersion === 21) {\n    clearActivities();\n    cached.stateVersion = 22;\n  }\n\n  if (cached.stateVersion === 22) {\n    clearActivities();\n    cached.stateVersion = 23;\n  }\n\n  if (cached.stateVersion === 23) {\n    if (!('isSortByValueEnabled' in cached.settings)) {\n      cached.settings.isSortByValueEnabled = initialState.settings.isSortByValueEnabled;\n    }\n    cached.stateVersion = 24;\n  }\n\n  if (cached.stateVersion === 24) {\n    if (cached.accounts) {\n      clearActivities();\n      for (const account of Object.values(cached.accounts.byId)) {\n        account.addressByChain = { ton: (account as any).address } as any;\n        delete (account as any).address;\n      }\n    }\n    cached.stateVersion = 25;\n  }\n\n  if (cached.stateVersion === 25) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        const savedAddresses = cached.byAccountId[accountId].savedAddresses;\n        if (savedAddresses && !('length' in savedAddresses)) {\n          cached.byAccountId[accountId].savedAddresses = Object.keys(savedAddresses as Record<string, string>)\n            .map((address) => ({\n              name: savedAddresses[address],\n              address,\n              chain: 'ton',\n            } as SavedAddress));\n        }\n      }\n    }\n    cached.stateVersion = 26;\n  }\n\n  if (cached.stateVersion === 26) {\n    clearActivities();\n    cached.stateVersion = 27;\n  }\n\n  if (cached.stateVersion === 27) {\n    delete (cached.settings as any).dapps;\n    cached.stateVersion = 28;\n  }\n\n  if (cached.stateVersion === 28) {\n    const accountIds = Object.keys(cached.settings.byAccountId);\n    for (const accountId of accountIds) {\n      const exceptionSlugs = (cached.settings.byAccountId[accountId] as any).exceptionSlugs as string[] | undefined;\n      if (cached.settings.areTokensWithNoCostHidden) {\n        cached.settings.byAccountId[accountId].alwaysShownSlugs = exceptionSlugs;\n      } else {\n        cached.settings.byAccountId[accountId].alwaysHiddenSlugs = exceptionSlugs;\n      }\n    }\n    cached.stateVersion = 29;\n  }\n\n  if (cached.stateVersion === 29) {\n    cached.currentTransfer.tokenSlug = TONCOIN.slug;\n    cached.stateVersion = 30;\n  }\n\n  if (cached.stateVersion === 30) {\n    clearActivities();\n    cached.stateVersion = 31;\n  }\n\n  if (cached.stateVersion === 31) {\n    if (cached.settings.autolockValue && cached.settings.autolockValue !== 'never') {\n      cached.settings.isAppLockEnabled = true;\n    }\n    cached.stateVersion = 32;\n  }\n\n  if (cached.stateVersion === 32) {\n    clearActivities();\n    cached.stateVersion = 33;\n  }\n\n  if (cached.stateVersion === 33) {\n    clearActivities();\n    cached.stateVersion = 34;\n  }\n\n  if (cached.stateVersion === 34) {\n    clearActivities();\n    cached.stateVersion = 35;\n  }\n\n  if (cached.stateVersion === 35) {\n    clearActivities();\n    cached.stateVersion = 36;\n  }\n\n  // When adding migration here, increase `STATE_VERSION`\n}\n\nfunction loadMemoryCache(cached: GlobalState) {\n  if (!cached.currentAccountId) return;\n\n  const { byId, newestActivitiesBySlug } = cached.byAccountId[cached.currentAccountId].activities || {};\n\n  if (byId) {\n    Object.values(byId).forEach((tx) => {\n      if (tx.kind === 'transaction' && tx.isIncoming) {\n        updatePoisoningCache(tx);\n      }\n    });\n  }\n\n  if (newestActivitiesBySlug) {\n    Object.values(newestActivitiesBySlug).forEach((activity) => {\n      if (activity.kind === 'transaction' && activity.isIncoming) {\n        updatePoisoningCache(activity);\n      }\n    });\n  }\n}\n\nfunction updateCache(force?: boolean) {\n  if (GLOBAL_STATE_CACHE_DISABLED || !isCaching || (!force && getIsHeavyAnimating())) {\n    return;\n  }\n\n  const global = getGlobal();\n  const reducedGlobal: GlobalState = {\n    ...INITIAL_STATE,\n    ...pick(global, [\n      'tokenInfo',\n      'settings',\n      'currentAccountId',\n      'stateVersion',\n      'restrictions',\n      'pushNotifications',\n      'isFullscreen',\n      'isManualLockActive',\n      'stakingDefault',\n    ]),\n    accounts: {\n      byId: global.accounts?.byId || {},\n    },\n    byAccountId: reduceByAccountId(global),\n  };\n\n  const json = JSON.stringify(reducedGlobal);\n  localStorage.setItem(GLOBAL_STATE_CACHE_KEY, json);\n}\n\nfunction reduceByAccountId(global: GlobalState) {\n  return Object.entries(global.byAccountId).reduce((acc, [accountId, state]) => {\n    acc[accountId] = pick(state, [\n      'balances',\n      'isBackupRequired',\n      'currentTokenSlug',\n      'currentTokenPeriod',\n      'savedAddresses',\n      'staking',\n      'stakingHistory',\n      'activeContentTab',\n      'landscapeActionsActiveTabIndex',\n      'browserHistory',\n      'blacklistedNftAddresses',\n      'whitelistedNftAddresses',\n      'dappLastOpenedDatesByOrigin',\n      'dapps',\n    ]);\n\n    const accountTokens = selectAccountTokens(global, accountId);\n    acc[accountId].activities = reduceAccountActivities(state.activities, accountTokens);\n    acc[accountId].staking = reduceAccountStaking(state.staking);\n\n    return acc;\n  }, {} as GlobalState['byAccountId']);\n}\n\nfunction reduceAccountActivities(activities?: AccountState['activities'], tokens?: UserToken[]) {\n  const {\n    idsBySlug, newestActivitiesBySlug, byId, idsMain,\n  } = activities || {};\n  if (!tokens || !idsBySlug || !byId || !idsMain) return undefined;\n\n  const reducedSlugs = tokens.slice(0, ACTIVITY_TOKENS_LIMIT).map(({ slug }) => slug);\n  if (!reducedSlugs.includes(TONCOIN.slug)) {\n    reducedSlugs.push(TONCOIN.slug);\n  }\n\n  const reducedIdsMain = pickVisibleActivities(idsMain, byId);\n  const reducedIdsBySlug = mapValues(pickTruthy(idsBySlug, reducedSlugs), (ids) => pickVisibleActivities(ids, byId));\n\n  const reducedNewestActivitiesBySlug = newestActivitiesBySlug\n    ? pick(newestActivitiesBySlug, reducedSlugs)\n    : undefined;\n\n  const reducedIds = Object.values(reducedIdsBySlug).concat(reducedIdsMain).flat();\n  const reducedById = pick(byId, reducedIds);\n\n  return {\n    byId: reducedById,\n    idsMain: reducedIdsMain,\n    idsBySlug: reducedIdsBySlug,\n    newestActivitiesBySlug: reducedNewestActivitiesBySlug,\n  };\n}\n\nfunction reduceAccountStaking(staking?: AccountState['staking']) {\n  let { stakingId, stateById } = staking ?? {};\n\n  if (stateById && !isEmptyObject(stateById)) {\n    stateById = filterValues(stateById, getIsActiveStakingState);\n\n    if (!stakingId || !(stakingId in stateById)) {\n      stakingId = Object.values(stateById)[0]?.id;\n    }\n  }\n\n  return {\n    ...staking,\n    stateById,\n    stakingId,\n  };\n}\n\nfunction pickVisibleActivities(ids: string[], byId: Record<string, ApiActivity>) {\n  const result: string[] = [];\n\n  let visibleIdCount = 0;\n\n  ids\n    .filter((id) => !getIsTxIdLocal(id) && Boolean(byId[id]))\n    .forEach((id) => {\n      if (visibleIdCount === ACTIVITIES_LIMIT) return;\n\n      if (!byId[id].shouldHide) {\n        visibleIdCount += 1;\n      }\n\n      result.push(id);\n    });\n\n  return result;\n}\n","import { cloneDeep } from '../util/iteratees';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport { initCache, loadCache } from './cache';\nimport { addActionHandler } from './index';\nimport { INITIAL_STATE } from './initialState';\nimport { selectHasSession } from './selectors';\n\nif (!IS_DELEGATED_BOTTOM_SHEET) {\n  initCache();\n}\n\naddActionHandler('init', (_, actions) => {\n  const initial = cloneDeep(INITIAL_STATE);\n\n  const global = loadCache(initial);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (IS_LEDGER_EXTENSION_TAB) {\n    actions.initLedgerPage();\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (selectHasSession(global)) {\n    actions.afterSignIn();\n  }\n\n  return global;\n});\n","import { BIGINT_PREFIX } from './bigint';\n\n// Fixes serialization of objects containing `bigint` values.\n// Extracted to a separate file to avoid leaking into Extension Page Script.\n// @ts-ignore\nBigInt.prototype.toJSON = function toJSON() {\n  return `${BIGINT_PREFIX}${this}`;\n};\n","import { animate } from './animation';\nimport { fastRaf } from './schedulers';\nimport { IS_IOS } from './windowEnvironment';\n\nconst TEST_INTERVAL = 5000; // 5 sec\nconst FRAMES_TO_TEST = 10;\nconst REDUCED_FPS = 35;\n\nlet isImproved = false;\n\nexport function betterView() {\n  if (!IS_IOS) return;\n\n  let interval: number | undefined;\n  let lastFocusAt = Date.now();\n\n  function setupInterval() {\n    if (interval || isImproved) return;\n\n    interval = window.setInterval(testAndImprove, TEST_INTERVAL);\n  }\n\n  window.addEventListener('focus', () => {\n    const now = Date.now();\n    if (now - lastFocusAt < 100) return; // iOS triggers two `focus` events for some reason\n    lastFocusAt = now;\n\n    setupInterval();\n    void testAndImprove();\n  });\n\n  window.addEventListener('blur', () => {\n    clearInterval(interval);\n    interval = undefined;\n  });\n\n  if (document.hasFocus()) {\n    setupInterval();\n    void testAndImprove();\n  }\n}\n\nasync function testAndImprove() {\n  const fps = await testFps();\n  if (fps <= REDUCED_FPS) {\n    improveView();\n  }\n}\n\nfunction testFps() {\n  return new Promise<number>((resolve) => {\n    const frames: number[] = [];\n    let lastFrameAt = performance.now();\n\n    animate(() => {\n      const now = performance.now();\n      frames.push(now - lastFrameAt);\n      lastFrameAt = now;\n\n      if (frames.length === FRAMES_TO_TEST) {\n        const mean = frames.sort()[Math.floor(frames.length / 2)];\n        resolve(Math.round(1000 / mean));\n        return false;\n      }\n\n      return true;\n    }, fastRaf);\n  });\n}\n\nfunction improveView() {\n  isImproved = true;\n\n  const containerEl = document.createElement('div');\n  containerEl.style.cssText = 'position: absolute; top: 0; left: 0; width: 0; height: 100%; overflow: hidden;';\n\n  const boosterEl = document.createElement('div');\n  const height = window.screen.height * 1.5;\n  boosterEl.style.cssText = `width: 0; height: ${height}px; transform: translateX(100%); transition: transform 100ms;`;\n  boosterEl.innerHTML = '&nbsp;';\n\n  containerEl.appendChild(boosterEl);\n  document.body.appendChild(containerEl);\n\n  requestAnimationFrame(() => {\n    boosterEl.addEventListener('transitionend', () => {\n      containerEl.remove();\n    });\n\n    boosterEl.style.transform = '';\n  });\n}\n","export enum ElectronEvent {\n  DEEPLINK = 'deeplink',\n  UPDATE_ERROR = 'update-error',\n  UPDATE_DOWNLOADED = 'update-downloaded',\n}\n\nexport enum ElectronAction {\n  CLOSE = 'close',\n  MINIMIZE = 'minimize',\n  MAXIMIZE = 'maximize',\n  UNMAXIMIZE = 'unmaximize',\n  GET_IS_MAXIMIZED = 'get-is-maximized',\n\n  INSTALL_UPDATE = 'install-update',\n  HANDLE_DOUBLE_CLICK = 'handle-double-click',\n\n  TOGGLE_DEEPLINK_HANDLER = 'toggle-deeplink-handler',\n\n  GET_IS_TOUCH_ID_SUPPORTED = 'get-is-touch-id-supported',\n  ENCRYPT_PASSWORD = 'encrypt-password',\n  DECRYPT_PASSWORD = 'decrypt-password',\n\n  SET_IS_TRAY_ICON_ENABLED = 'set-is-tray-icon-enabled',\n  GET_IS_TRAY_ICON_ENABLED = 'get-is-tray-icon-enabled',\n  SET_IS_AUTO_UPDATE_ENABLED = 'set-is-auto-update-enabled',\n  GET_IS_AUTO_UPDATE_ENABLED = 'get-is-auto-update-enabled',\n\n  RESTORE_STORAGE = 'restore-storage',\n}\n\nexport interface ElectronApi {\n  close: VoidFunction;\n  minimize: VoidFunction;\n  maximize: VoidFunction;\n  unmaximize: VoidFunction;\n  getIsMaximized: () => Promise<boolean>;\n\n  installUpdate: () => Promise<void>;\n  handleDoubleClick: () => Promise<void>;\n\n  toggleDeeplinkHandler: (isEnabled: boolean) => Promise<void>;\n\n  getIsTouchIdSupported: () => Promise<boolean>;\n  encryptPassword: (password: string) => Promise<string>;\n  decryptPassword: (encrypted: string) => Promise<string | undefined>;\n\n  setIsTrayIconEnabled: (value: boolean) => Promise<void>;\n  getIsTrayIconEnabled: () => Promise<boolean>;\n  setIsAutoUpdateEnabled: (value: boolean) => Promise<void>;\n  getIsAutoUpdateEnabled: () => Promise<boolean>;\n\n  restoreStorage: () => Promise<void>;\n\n  on: (eventName: ElectronEvent, callback: any) => VoidFunction;\n}\n\ndeclare global {\n  interface Window {\n    electron?: ElectronApi;\n  }\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\nimport { onVirtualKeyboardOpen } from './windowSize';\n\nconst focusScroller = createFocusScroller();\n\nfunction isFocusable(element: Element): boolean {\n  const tagName = element.tagName.toLowerCase();\n  return tagName === 'input'\n    || tagName === 'textarea'\n    || tagName === 'select'\n    || element.hasAttribute('contenteditable');\n}\n\n/**\n * Implements a custom scroll behavior on input focus. Designed for Capacitor platforms only. Meets the following goals:\n * - Allow to customize where to scroll the focused element to (via the `data-focus-scroll-position` HTML attribute).\n * - Scroll to show the focused element if it's behind by the virtual keyboard at the moment when it opens.\n * - Scroll to the focused element smoothly whenever possible.\n *\n * Warning: this functions requires the @capacitor/keyboard plugin to be activated. It also relies on a\n * `scroll-behavior: smooth;` style set in scrollable elements to implement smooth scrolling depending on the animation\n * preferences.\n */\nexport function initFocusScrollController() {\n  if (IS_CAPACITOR) {\n    initForCapacitor();\n  } else if ((IS_IOS || IS_ANDROID) && window.visualViewport) {\n    initForVisualViewport();\n  }\n}\n\nfunction initForCapacitor() {\n  // `scrollToActiveElement` shouldn't be called in `keyboardWillShow` because the <body> size won't be patched yet, so\n  // if the focused input at the bottom of the scrollable element, it won't be scrolled to.\n  // `keyboardWillShow` could be used if the screen scroll height increased (instead of decreasing the <body> height).\n  // Note: on iOS `onVirtualKeyboardOpen` calls the callback on every focus (it doesn't affect the scroll behavior).\n  onVirtualKeyboardOpen(() => {\n    // The manual focus scroller is activated only when the virtual keyboard is open it order to avoid a scroll when the\n    // keyboard starts opening (it would scroll the 2nd time when the keyboard has opened).\n    // This has a side effect of keeping the natural scroll behavior when a hardware keyboard is used (it's ok).\n    focusScroller.install();\n    scrollToActiveElement();\n  });\n\n  void import('@capacitor/keyboard').then(({ Keyboard }) => {\n    void Keyboard.addListener('keyboardWillHide', focusScroller.uninstall);\n  });\n}\n\nfunction initForVisualViewport() {\n  const { visualViewport } = window;\n  let viewportHeight = visualViewport!.height;\n\n  function handleViewportResize() {\n    const newHeight = visualViewport!.height;\n    const activeElement = document.activeElement;\n\n    // If the viewport height has decreased (the keyboard has opened) and the active element is focusable,\n    // we activate the scroller and scroll to the element\n    if (newHeight < viewportHeight && activeElement && isFocusable(activeElement)) {\n      focusScroller.install();\n      scrollToActiveElement();\n    } else if (newHeight > viewportHeight) {\n      // If the viewport height has increased (the keyboard has closed), we deactivate the scroller\n      focusScroller.uninstall();\n    }\n\n    // The viewport height is updated for the next comparison\n    viewportHeight = newHeight;\n  }\n\n  // In the TMA application on iOS, the VisualViewport behaves incorrectly,\n  // not taking into account the height of the virtual keyboard. Therefore,\n  // the height compensation is performed first (see the `windowSize` file),\n  // and then the `handleViewportResize` processing should be executed.\n  function delayedViewportResizeHandler() {\n    requestMutation(() => {\n      requestMeasure(handleViewportResize);\n    });\n  }\n\n  visualViewport!.addEventListener(\n    'resize',\n    IS_IOS && IS_TELEGRAM_APP ? delayedViewportResizeHandler : handleViewportResize,\n  );\n}\n\nfunction createFocusScroller() {\n  let originalFocus: HTMLElement['focus'] | undefined;\n  let isProgrammaticFocus = false;\n\n  // Prevents native scroll for all `focus()` calls, because if the element is outside the viewport, `focus()` scrolls\n  // the screen instantly to place the element in the middle (we don't want that).\n  const patchedFocus: HTMLElement['focus'] = function focus(this: HTMLElement, options) {\n    isProgrammaticFocus = true;\n    // Does not work on Android, because it doesn't support `preventScroll`\n    originalFocus?.call(this, { ...options, preventScroll: true });\n  };\n\n  const handleFocus = () => {\n    // Because Android doesn't support `preventScroll`, we make the scroll instant to prevent excessive back-and-forth\n    // scrolls. Doing it only for programmatic `focus` calls allows to have smooth scrolling when the user focuses the\n    // input by tapping it while the keyboard is open.\n    scrollToActiveElement(IS_ANDROID && isProgrammaticFocus);\n    isProgrammaticFocus = false;\n  };\n\n  return {\n    install() {\n      if (originalFocus) {\n        return; // This branch is reached when the scroller is already installed\n      }\n\n      originalFocus = HTMLElement.prototype.focus;\n      HTMLElement.prototype.focus = patchedFocus;\n\n      window.addEventListener('focusin', handleFocus);\n    },\n    uninstall() {\n      if (!originalFocus) {\n        return; // This branch is reached when the scroller is already uninstalled\n      }\n\n      HTMLElement.prototype.focus = originalFocus;\n      originalFocus = undefined;\n\n      window.removeEventListener('focusin', handleFocus);\n    },\n  };\n}\n\nfunction scrollToActiveElement(enforceInstantScroll?: boolean) {\n  const scrollTarget = document.activeElement;\n  if (!scrollTarget) {\n    return;\n  }\n  const scrollPosition = scrollTarget.dataset.focusScrollPosition ?? 'nearest';\n  requestMeasure(() => {\n    scrollTarget.scrollIntoView({\n      block: scrollPosition,\n      behavior: enforceInstantScroll ? 'instant' : 'auto',\n    });\n  });\n}\n","import { ACTIVE_TAB_STORAGE_KEY, IS_TELEGRAM_APP } from '../config';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_LEDGER_EXTENSION_TAB,\n} from './windowEnvironment';\n\nconst IS_DISABLED = IS_LEDGER_EXTENSION_TAB || IS_DELEGATED_BOTTOM_SHEET || IS_ELECTRON || IS_TELEGRAM_APP;\n\nconst INTERVAL = 2000;\n\nconst tabKey = String(Date.now() + Math.random());\n\nif (!IS_DISABLED) {\n  localStorage.setItem(ACTIVE_TAB_STORAGE_KEY, tabKey);\n}\n\nlet callback: NoneToVoidFunction;\n\nconst interval = window.setInterval(() => {\n  if (!IS_DISABLED && callback && localStorage.getItem(ACTIVE_TAB_STORAGE_KEY) !== tabKey) {\n    callback();\n    clearInterval(interval);\n  }\n}, INTERVAL);\n\nexport function setActiveTabChangeListener(_callback: NoneToVoidFunction) {\n  callback = _callback;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { cleanupEffect, isSignal } from '../util/signals';\nimport useEffectOnce from './useEffectOnce';\n\nexport function useSignalEffect(effect: NoneToVoidFunction, dependencies: readonly any[]) {\n  // The is extracted from `useEffectOnce` to run before all effects\n  const isFirstRun = useRef(true);\n  if (isFirstRun.current) {\n    isFirstRun.current = false;\n\n    dependencies?.forEach((dependency) => {\n      if (isSignal(dependency)) {\n        dependency.subscribe(effect);\n      }\n    });\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupEffect(effect);\n    };\n  });\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useForceUpdate from './useForceUpdate';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedState<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): T;\nfunction useDerivedState<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): T;\nfunction useDerivedState<T>(signal: Signal<T>): T;\n\nfunction useDerivedState<T>(resolverOrSignal: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrSignal as Resolver<T> : () => ((resolverOrSignal as Signal<T>)());\n  dependencies ??= [resolverOrSignal];\n\n  const valueRef = useRef<T>();\n  const forceUpdate = useForceUpdate();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver(isSync = false) {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)((newValue) => {\n        if (valueRef.current !== newValue) {\n          valueRef.current = newValue;\n          forceUpdate();\n        }\n      });\n    } else {\n      const newValue = (currentResolver as SyncResolver<T>)();\n      if (valueRef.current !== newValue) {\n        valueRef.current = newValue;\n\n        if (!isSync) {\n          forceUpdate();\n        }\n      }\n    }\n  }\n\n  useSyncEffect(() => {\n    runCurrentResolver(true);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return valueRef.current as T;\n}\n\nexport default useDerivedState;\n","import type { RefObject } from 'react';\nimport { useEffect, useRef, useSignal } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { debounce, throttle, throttleWith } from '../util/schedulers';\nimport useDerivedState from './useDerivedState';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useLastCallback from './useLastCallback';\n\ntype TargetCallback = (entry: IntersectionObserverEntry) => void;\ntype RootCallback = (entries: IntersectionObserverEntry[]) => void;\ntype ObserveCleanup = NoneToVoidFunction;\nexport type ObserveFn = (target: HTMLElement, targetCallback?: TargetCallback) => ObserveCleanup;\n\ninterface IntersectionController {\n  observer: IntersectionObserver;\n  callbacks: Map<HTMLElement, TargetCallback>;\n}\n\ninterface Response {\n  observe: ObserveFn;\n  freeze: NoneToVoidFunction;\n  unfreeze: NoneToVoidFunction;\n}\n\nexport function useIntersectionObserver({\n  rootRef,\n  throttleMs,\n  throttleScheduler,\n  debounceMs,\n  shouldSkipFirst,\n  margin,\n  threshold,\n  isDisabled,\n}: {\n  rootRef?: RefObject<HTMLDivElement>;\n  throttleMs?: number;\n  throttleScheduler?: Scheduler;\n  debounceMs?: number;\n  shouldSkipFirst?: boolean;\n  margin?: number;\n  threshold?: number | number[];\n  isDisabled?: boolean;\n}, rootCallback?: RootCallback): Response {\n  const controllerRef = useRef<IntersectionController>();\n  const rootCallbackRef = useRef<RootCallback>();\n  const freezeFlagsRef = useRef(0);\n  const onUnfreezeRef = useRef<NoneToVoidFunction>();\n\n  rootCallbackRef.current = rootCallback;\n\n  const freeze = useLastCallback(() => {\n    freezeFlagsRef.current++;\n  });\n\n  const unfreeze = useLastCallback(() => {\n    if (!freezeFlagsRef.current) {\n      return;\n    }\n\n    freezeFlagsRef.current--;\n\n    if (!freezeFlagsRef.current && onUnfreezeRef.current) {\n      onUnfreezeRef.current();\n      onUnfreezeRef.current = undefined;\n    }\n  });\n\n  useHeavyAnimation(freeze, unfreeze);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    return () => {\n      if (controllerRef.current) {\n        controllerRef.current.observer.disconnect();\n        controllerRef.current.callbacks.clear();\n        controllerRef.current = undefined;\n      }\n    };\n  }, [isDisabled]);\n\n  function initController() {\n    const callbacks = new Map();\n    const entriesAccumulator = new Map<Element, IntersectionObserverEntry>();\n\n    let observerCallback: typeof observerCallbackSync;\n    if (typeof throttleScheduler === 'function') {\n      observerCallback = throttleWith(throttleScheduler, observerCallbackSync);\n    } else if (throttleMs) {\n      observerCallback = throttle(observerCallbackSync, throttleMs, !shouldSkipFirst);\n    } else if (debounceMs) {\n      observerCallback = debounce(observerCallbackSync, debounceMs, !shouldSkipFirst);\n    } else {\n      observerCallback = observerCallbackSync;\n    }\n\n    function observerCallbackSync() {\n      if (freezeFlagsRef.current) {\n        onUnfreezeRef.current = observerCallback;\n        return;\n      }\n\n      const entries = Array.from(entriesAccumulator.values());\n\n      entries.forEach((entry: IntersectionObserverEntry) => {\n        const callback = callbacks.get(entry.target);\n        if (callback) {\n          callback!(entry, entries);\n        }\n      });\n\n      if (rootCallbackRef.current) {\n        rootCallbackRef.current(entries);\n      }\n\n      entriesAccumulator.clear();\n    }\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          entriesAccumulator.set(entry.target, entry);\n        });\n\n        if (freezeFlagsRef.current) {\n          onUnfreezeRef.current = observerCallback;\n        } else {\n          observerCallback();\n        }\n      },\n      {\n        root: rootRef?.current,\n        rootMargin: margin ? `${margin}px` : undefined,\n        threshold,\n      },\n    );\n\n    controllerRef.current = { observer, callbacks };\n  }\n\n  const observe = useLastCallback((target, targetCallback) => {\n    if (!controllerRef.current) {\n      initController();\n    }\n\n    const controller = controllerRef.current!;\n    controller.observer.observe(target);\n\n    if (targetCallback) {\n      controller.callbacks.set(target, targetCallback);\n    }\n\n    return () => {\n      if (targetCallback) {\n        controller.callbacks.delete(target);\n      }\n\n      controller.observer.unobserve(target);\n    };\n  });\n\n  return { observe, freeze, unfreeze };\n}\n\nexport function useOnIntersect(\n  targetRef: RefObject<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    return observe ? observe(targetRef.current!, lastCallback) : undefined;\n  }, [lastCallback, observe, targetRef]);\n}\n\nexport function useGetIsIntersecting(\n  targetRef: RefObject<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const [getIsIntersecting, setIsIntersecting] = useSignal(!observe);\n\n  useOnIntersect(targetRef, observe, (entry) => {\n    setIsIntersecting(entry.isIntersecting);\n\n    if (callback) {\n      callback(entry);\n    }\n  });\n\n  return getIsIntersecting;\n}\n\nexport function useIsIntersecting(\n  targetRef: RefObject<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  return useDerivedState(useGetIsIntersecting(targetRef, observe, callback));\n}\n","import type { RefObject } from 'react';\n\nimport type { ObserveFn } from './useIntersectionObserver';\n\nimport { useGetIsIntersecting, useIntersectionObserver } from './useIntersectionObserver';\n\nlet observeIntersection: ObserveFn;\n\nconst THROTTLE = 350;\n\nexport function useAppIntersectionObserver() {\n  const { observe } = useIntersectionObserver({\n    throttleMs: THROTTLE,\n  });\n\n  observeIntersection = observe;\n}\n\nexport function useGetIsIntersectingWithApp(targetRef: RefObject<HTMLElement>) {\n  return useGetIsIntersecting(targetRef, observeIntersection);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nfunction useInterval(callback: NoneToVoidFunction, delay?: number, noFirst = false) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (delay === undefined) {\n      return undefined;\n    }\n\n    const id = setInterval(lastCallback, delay);\n    if (!noFirst) lastCallback();\n\n    return () => clearInterval(id);\n  }, [delay, lastCallback, noFirst]);\n}\n\nexport default useInterval;\n","import { useEffect } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nfunction useTimeout(callback: () => void, delay?: number, dependencies: readonly any[] = []) {\n  const savedCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (typeof delay !== 'number') {\n      return undefined;\n    }\n\n    const id = setTimeout(() => savedCallback(), delay);\n    return () => clearTimeout(id);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [delay, savedCallback, ...dependencies]);\n}\n\nexport default useTimeout;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"cFGCnqcA\",\"content\":\"sRTywfr2\",\"actions\":\"u6bKEBnR\",\"title\":\"UervEVFY\",\"description\":\"rO8yQetD\",\"img\":\"T1ztMNGQ\",\"button\":\"eymlW7_B\"};","import React from '../lib/teact/teact';\n\nimport { APP_NAME } from '../config';\nimport renderText from '../global/helpers/renderText';\n\nimport useLang from '../hooks/useLang';\nimport useLastCallback from '../hooks/useLastCallback';\n\nimport Button from './ui/Button';\n\nimport styles from './AppInactive.module.scss';\n\nimport appInactivePathPng from '../assets/app-inactive.png';\nimport appInactivePathWebP from '../assets/app-inactive.webp';\n\nfunction AppInactive() {\n  const lang = useLang();\n\n  const handleReload = useLastCallback(() => {\n    window.location.reload();\n  });\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.content}>\n        <picture className={styles.img}>\n          <source src={appInactivePathWebP} />\n          <img src={appInactivePathPng} alt=\"\" className={styles.img} />\n        </picture>\n\n        <h3 className={styles.title}>{lang('Such error, many tabs')}</h3>\n\n        <div className={styles.description}>\n          {renderText(lang('$many_tabs_error_description', { app_name: APP_NAME }))}\n        </div>\n\n        <div className={styles.actions}>\n          <Button isText className={styles.button} onClick={handleReload}>\n            {lang('Reload App')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AppInactive;\n","import usePrevious from './usePrevious';\n\nexport default function useCurrentOrPrev<T extends any>(\n  current: T, shouldSkipUndefined = false, shouldForceCurrent = false,\n): T | undefined {\n  const prev = usePrevious(current, shouldSkipUndefined);\n\n  // eslint-disable-next-line no-null/no-null\n  return shouldForceCurrent || (current !== null && current !== undefined) ? current : prev;\n}\n","import { useState } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nconst THRESHOLD = 1;\n\nexport default function useScrolledState(threshold = THRESHOLD) {\n  const [isAtBeginning, setIsAtBeginning] = useState(true);\n  const [isAtEnd, setIsAtEnd] = useState(true);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLElement>) => {\n    const { scrollHeight, scrollTop, clientHeight } = e.target as HTMLElement;\n\n    setIsAtBeginning(scrollTop < threshold);\n    setIsAtEnd(scrollHeight - scrollTop - clientHeight < threshold);\n  });\n\n  return {\n    isAtBeginning,\n    isAtEnd,\n    isScrolled: !isAtBeginning,\n    handleScroll,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"YO7I0Ma0\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport styles from './Emoji.module.scss';\n\nexport type EmojiIcon = '' | '' | '';\n\ninterface OwnProps {\n  from: EmojiIcon;\n}\n\nconst PATH_BY_EMOJI = {\n  '': '1f977',\n  '': '1f984',\n  '': '26a0',\n};\n\nconst loadedImages = new Set();\n\nfunction Emoji({ from }: OwnProps) {\n  const key = from in PATH_BY_EMOJI ? PATH_BY_EMOJI[from as keyof typeof PATH_BY_EMOJI] : from;\n  const src = `./emoji/${key}.png`;\n  const [isLoaded, markLoaded] = useFlag(loadedImages.has(src));\n  const transitionClassNames = useMediaTransition(isLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markLoaded();\n    loadedImages.add(src);\n  });\n\n  return (\n    <img\n      src={src}\n      alt={from}\n      className={buildClassName(styles.root, styles[`key-${key}`], transitionClassNames)}\n      onLoad={handleLoad}\n    />\n  );\n}\n\nexport default memo(Emoji);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from './Button';\n\nimport modalStyles from './Modal.module.scss';\n\ntype OwnProps = {\n  title?: string | TeactNode;\n  className?: string;\n  withNotch?: boolean;\n  closeClassName?: string;\n  onClose?: NoneToVoidFunction;\n  onBackButtonClick?: () => void;\n};\n\nfunction ModalHeader({\n  title, className, withNotch, closeClassName, onClose, onBackButtonClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div\n      className={buildClassName(\n        modalStyles.header,\n        'with-notch-on-scroll',\n        withNotch && 'is-scrolled',\n        !onBackButtonClick && modalStyles.header_wideContent,\n        className,\n      )}\n    >\n      {onBackButtonClick && (\n        <Button isSimple isText onClick={onBackButtonClick} className={modalStyles.header_back}>\n          <i className={buildClassName(modalStyles.header_backIcon, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n      {title !== undefined && <div className={buildClassName(modalStyles.title, modalStyles.singleTitle)}>{title}</div>}\n      {onClose && (\n        <Button\n          isRound\n          className={buildClassName(modalStyles.closeButton, closeClassName)}\n          ariaLabel={lang('Close')}\n          onClick={onClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(ModalHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"T7fZ5IMk\",\"slide\":\"syDfunZP\",\"header\":\"aDfdss28\",\"withTopSpace\":\"dtjdV8GY\",\"nestedTransition\":\"jX5Ya3FK\",\"transitionContainer\":\"yVzk5dwl\",\"developerTitle\":\"r6WClabQ\",\"developerCloseButton\":\"yn74reot\",\"onlyTextHeader\":\"CgjtBlIK\",\"headerInsideModal\":\"eFeOVzRI\",\"languageHeader\":\"ZrejUKsI\",\"headerBack\":\"ehDj7x2p\",\"isInsideModal\":\"Wccw6pgw\",\"hidden\":\"yTnK4aVo\",\"iconChevron\":\"Qea3kUMy\",\"headerBackInContent\":\"zvnNb8eo\",\"headerTitle\":\"aZVKC5O6\",\"modalHeader\":\"vwHnpdwF\",\"content\":\"rgMxxE39\",\"content_noScroll\":\"lh0I5gIh\",\"contentNoScroll\":\"lh0I5gIh\",\"withBottomSpace\":\"cjfvEx15\",\"contentFullSize\":\"BpFwAWae\",\"blockTitle\":\"dBOj5NnG\",\"menuIcon\":\"M1WSmGuc\",\"themeWrapper\":\"cfK5v5m1\",\"blockAbout\":\"yuZIbS8n\",\"theme\":\"N5nUfRHH\",\"theme_active\":\"eTa03cXj\",\"themeActive\":\"eTa03cXj\",\"themeIcon\":\"tZRnZj9J\",\"themeIcon_active\":\"eEiBESrS\",\"themeIconActive\":\"eEiBESrS\",\"themeImg\":\"H_nvpBU5\",\"colorList\":\"ftMWz1de\",\"colorButton\":\"OaFvanYP\",\"colorButtonCurrent\":\"GthJhaus\",\"iconLock\":\"n1s4Ycb6\",\"iconLockInverted\":\"r9kXSmsP\",\"subBlockAsButton\":\"ImElqofC\",\"block\":\"wJjymc4L\",\"text\":\"sU0zQDmb\",\"settingsBlockWithDescription\":\"xosGoD5d\",\"settingsBlock\":\"_0TWKZFz4\",\"iconChevronRight\":\"RHurCQ9b\",\"item\":\"o1nQhJ_F\",\"draggable\":\"k2juknci\",\"item_red\":\"yYJCYbbd\",\"itemRed\":\"yYJCYbbd\",\"item_small\":\"cC1nd9dM\",\"itemSmall\":\"cC1nd9dM\",\"item_lang\":\"kIWs2Jxk\",\"itemLang\":\"kIWs2Jxk\",\"item_wallet_version\":\"tTZZHEdN\",\"itemWalletVersion\":\"tTZZHEdN\",\"item_token\":\"LMTs4OeN\",\"itemToken\":\"LMTs4OeN\",\"itemInfo\":\"S5Kk31wp\",\"small\":\"gq4usdgr\",\"version\":\"oGJ2X15D\",\"languageMain\":\"cIO_6vYD\",\"languageNative\":\"NGS7pE5c\",\"iconQuestion\":\"CLKLBCVt\",\"blockWithTooltip\":\"eqWsA9Ak\",\"tooltip\":\"DCWmLsBA\",\"tooltip_wide\":\"ESFWFyav\",\"tooltipWide\":\"ESFWFyav\",\"disconnectButton\":\"Wu3RiwSF\",\"dapps\":\"eyE78PWW\",\"changePasswordButton\":\"xBpPU4Jb\",\"passwordFormContent\":\"KQuDNpn5\",\"passwordFormContentInModal\":\"OzmF3O5t\",\"sticker\":\"aMwtPBfB\",\"blockDescription\":\"HuH8igQi\",\"emptyList\":\"ThoQya6m\",\"emptyListTitle\":\"lek7Y5aS\",\"dapp\":\"xc0VaBDP\",\"backButton\":\"QlOjly_V\",\"logo\":\"LQ5MMcSf\",\"stickerNativeBiometric\":\"nLxfZG3p\",\"pinPadHeader\":\"tnqhb1Qi\",\"pinPadHeaderMinified\":\"K1fiksuZ\",\"pinPadTitle\":\"MxOcmI0_\",\"title\":\"sDP2AWSj\",\"titleLink\":\"r7iIIH6q\",\"heading\":\"Sh2kuIH2\",\"github\":\"dBqNllGm\",\"telegram\":\"sggkOqTT\",\"tokenSortIcon\":\"V7Nh7XEi\",\"tokenTitle\":\"wkk1b7Dc\",\"tokenDescription\":\"cv6gw8az\",\"tokenAmount\":\"BekK0Dwp\",\"dot\":\"Zfi1H_we\",\"dotLarge\":\"LIr9yHMx\",\"contentRelative\":\"EiFz4WrA\",\"sortableContainer\":\"zmQzVO7l\",\"modalDialog\":\"xRqyv_rX\",\"modalDialogWeb\":\"E67Qdj_t\",\"modalContent\":\"mjHzkDZB\",\"deleteText\":\"d8sxNodF\",\"languageInfo\":\"AXAMGE3T\",\"tokenInfo\":\"ll1f03qi\",\"stickerAndTitle\":\"upR_yI1c\",\"sideTitle\":\"atPnEcVz\",\"aboutFooterWrapper\":\"EYMlspWb\",\"aboutFooterContent\":\"U1sbe5pk\",\"blockWalletVersionText\":\"poUctQOF\",\"walletVersionInfo\":\"spNULnGc\",\"walletVersionInfoRight\":\"Ez0t7GFF\",\"walletVersionTitle\":\"DbBBKMBg\",\"walletVersionTokens\":\"DUzHgWKY\",\"walletVersionAddress\":\"xPrZcrFZ\",\"walletVersionAmount\":\"nvPRmXTF\",\"blockWalletVersionReadMore\":\"g3U3zj6y\",\"nftPrimaryCell\":\"zpLwMrPQ\",\"nftName\":\"JHu8TtpB\",\"nftCollection\":\"mbtZbU1u\",\"nftImage\":\"pifBd9KV\",\"nftButtonUnhide\":\"_o8QIssq\",\"account\":\"TXe6O6ZF\",\"accountDisabled\":\"vf82b5zy\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { type Theme } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER, APP_NAME, APP_REPO_URL, APP_VERSION, IS_CORE_WALLET, IS_EXTENSION,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { handleOpenUrl } from '../../util/openUrl';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n  theme: Theme;\n}\n\nfunction SettingsAbout({\n  isActive, handleBackClick, isInsideModal, theme,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const aboutExtensionTitle = lang('$about_extension_link_text', { app_name: APP_NAME });\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('About %app_name%', { app_name: APP_NAME })}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('About %app_name%', { app_name: APP_NAME })}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <img src={logoPath} alt={lang('Logo')} className={styles.logo} />\n        <h2 className={styles.title}>\n          {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          {!IS_CORE_WALLET && (\n            <a href=\"https://mytonwallet.io/\" target=\"_blank\" className={styles.titleLink} rel=\"noreferrer\">\n              mytonwallet.io\n            </a>\n          )}\n        </h2>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>\n            {renderText(lang('$about_description1'))}\n          </p>\n          <p className={styles.text}>\n            {renderText(lang('$about_description2'))}\n          </p>\n          {IS_EXTENSION ? (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"\" /> {lang('What is TON Proxy?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description1'))}{' '}\n                <a\n                  href=\"https://telegra.ph/TON-Sites-TON-WWW-and-TON-Proxy-09-29-2\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"\" /> {lang('What is TON Magic?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description2'))}\n              </p>\n              <p className={styles.text}>\n                {lang('$about_extension_description3')}{' '}\n                <a href=\"https://telegra.ph/Telegram--TON-11-10\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n            </>\n          ) : (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                {lang('$about_proxy_magic_title', { ninja: <Emoji from=\"\" />, unicorn: <Emoji from=\"\" /> })}\n              </h3>\n              <p className={styles.text}>\n                {lang('$about_proxy_magic_description', {\n                  extension_link: (\n                    <a href=\"https://mytonwallet.io/\" target=\"_blank\" rel=\"noreferrer\">\n                      {renderText(aboutExtensionTitle)}\n                    </a>\n                  ),\n                })}\n              </p>\n            </>\n          )}\n          <h3 className={buildClassName(styles.text, styles.heading)}>\n            <i className={buildClassName(styles.github, 'icon-github')} aria-hidden /> {lang('Is it open source?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_github', {\n              github_link: (\n                <a href={APP_REPO_URL} target=\"_blank\" rel=\"noreferrer\">\n                  {renderText(lang('$about_github_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n          <h3 className={styles.heading}>\n            <i\n              className={buildClassName(styles.telegram, 'icon-telegram')}\n              aria-hidden\n            /> {lang('Is there a community?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_community', {\n              community_link: (\n                <a\n                  href={lang.code === 'ru' ? 'https://t.me/MyTonWalletRu' : 'https://t.me/MyTonWalletEn'}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  {renderText(lang('$about_community_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n        </div>\n        <div className={styles.aboutFooterWrapper}>\n          <div className={styles.aboutFooterContent}>\n            <a\n              href=\"https://mytonwallet.io/terms-of-use\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleOpenUrl}\n            >{lang('Terms of Use')}\n            </a>\n            <i className={styles.dotLarge} aria-hidden />\n            <a\n              href=\"https://mytonwallet.io/privacy-policy\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleOpenUrl}\n            >{lang('Privacy Policy')}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsAbout);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ULZ34zm7\",\"transitionContainer\":\"IpdZLqJd\",\"transitionSlide\":\"XE9A_oIT\",\"container\":\"PaAMLiEx\",\"container_scrollable\":\"Kl8WYoh1\",\"containerScrollable\":\"Kl8WYoh1\",\"container_password\":\"UbkFqyhU\",\"containerPassword\":\"UbkFqyhU\",\"containerAlignTop\":\"kjX3jz7x\",\"containerFullSize\":\"TyvpW2dz\",\"logo\":\"ehC1Upu8\",\"appName\":\"IDG3Q9do\",\"title\":\"GWv6k9kV\",\"title_afterSmallSticker\":\"A9um3wzK\",\"titleAfterSmallSticker\":\"A9um3wzK\",\"titleSmallMargin\":\"XUVoSlvz\",\"infoBlock\":\"PxIcz2Ce\",\"text\":\"ehvMomrX\",\"informationCheckbox\":\"EnuqqZk3\",\"informationCheckboxContent\":\"GFpWMNm5\",\"info\":\"WrpQj6v4\",\"info_push\":\"I7MJaI4h\",\"infoPush\":\"I7MJaI4h\",\"info__space\":\"D8smEaJr\",\"infoSpace\":\"D8smEaJr\",\"infoPull\":\"NnW2gTZ2\",\"infoSmallFont\":\"NNleMmCd\",\"counter\":\"BMrG2A2B\",\"counterTitle\":\"IFpNJ6G4\",\"counterDigit\":\"FvuWBVMK\",\"small\":\"I1fhFmAn\",\"sticker\":\"hkc_A2ok\",\"stickerAndTitle\":\"I_XB4JzC\",\"backupNotice\":\"jSFFHbPH\",\"backupNoticeButtons\":\"kUt_RfrB\",\"modalSticker\":\"oxNcdksx\",\"form\":\"VKREIrDv\",\"formWidgets\":\"Vj7_u12z\",\"passwordForm\":\"Stc9sPH6\",\"errors\":\"vozeQrSV\",\"passwordRules\":\"usE91GiK\",\"passwordRule\":\"zwUB1a_J\",\"valid\":\"tAmeBNo9\",\"error\":\"B8vH7CYQ\",\"buttons\":\"ODle5ROH\",\"buttons__inner\":\"oNN6ymiQ\",\"buttonsInner\":\"oNN6ymiQ\",\"footerButton\":\"sarw89g5\",\"btn\":\"SWvNin2D\",\"btn_push\":\"W1k0H_HF\",\"btnPush\":\"W1k0H_HF\",\"btn_text\":\"qoCa264k\",\"btnText\":\"qoCa264k\",\"btn_about\":\"hc6SmKii\",\"btnAbout\":\"hc6SmKii\",\"btn_wide\":\"nfn0Ol3p\",\"btnWide\":\"nfn0Ol3p\",\"btn_mini\":\"Q2imCrap\",\"btnMini\":\"Q2imCrap\",\"btn_single\":\"uEEAE1sZ\",\"btnSingle\":\"uEEAE1sZ\",\"btnHalfWidth\":\"X7zz6SZl\",\"modalDialog\":\"fGexmyHI\",\"privateKey\":\"q7ZIxYSc\",\"importingContent\":\"NH8rGjmE\",\"footerError\":\"BZGziOTc\",\"importButtonsBlock\":\"NM17kdjV\",\"importText\":\"MHwkgrIZ\",\"importButtons\":\"dYD_CpfV\",\"biometricsStep\":\"t3qgjBKg\",\"warning\":\"bs9tLaLO\",\"biometricsError\":\"Es3mlsbs\",\"stepTransition\":\"POUbGjea\",\"passwordFormContainer\":\"t9A5nUYe\",\"header\":\"iowmPhKV\",\"headerTitle\":\"x58Cmt9r\",\"pinPadHeader\":\"yHcMeGVS\",\"headerBack\":\"ZzxVO58v\",\"headerBackBlock\":\"NVF8z8CV\",\"iconChevron\":\"vP8i059j\",\"biometricsIcon\":\"ss3uFaAC\",\"biometricsTitle\":\"VTH_ATCk\",\"biometricsSubtitle\":\"C3vZhdz7\",\"disclaimerBackupDialog\":\"ZjhuaYXI\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport PasswordForm from '../ui/PasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  method?: AuthMethod;\n  error?: string;\n}\n\nfunction AuthCheckPassword({\n  isActive, isLoading, error, method,\n}: OwnProps) {\n  const { resetAuth, cleanAuthError, addAccount } = getActions();\n  const lang = useLang();\n\n  const isImporting = method !== 'createAccount';\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isImporting ? 'importMnemonic' : 'createAccount', password, isAuthFlow: true });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        containerClassName={styles.passwordForm}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={handleSubmit}\n        onCancel={resetAuth}\n        onUpdate={cleanAuthError}\n      >\n        <div className={styles.title}>{lang('Enter your password')}</div>\n      </PasswordForm>\n    </div>\n  );\n}\n\nexport default memo(AuthCheckPassword);\n","// extracted by mini-css-extract-plugin\nexport default {\"suggestions\":\"wSbrkEKB\",\"bottom\":\"YGdWEJ33\",\"top\":\"jKY8_1nT\",\"suggestion\":\"MtG_CWxm\",\"active\":\"kdLCV21p\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './SuggestionList.module.scss';\n\ntype OwnProps = {\n  position?: 'top' | 'bottom';\n  suggestions: string[];\n  activeIndex?: number;\n  isInModal?: boolean;\n  onSelect: (suggest: string) => void;\n};\n\nfunction SuggestionList({\n  position = 'bottom',\n  suggestions,\n  activeIndex,\n  isInModal,\n  onSelect,\n}: OwnProps) {\n  const lang = useLang();\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n\n    const suggest = (e.target as HTMLLIElement).innerText.trim();\n    onSelect(suggest);\n  };\n\n  return suggestions.length ? (\n    <ul className={buildClassName(styles.suggestions, styles[position], isInModal && styles.embedded)}>\n      {suggestions.map((suggestion, index) => {\n        return (\n          <li\n            key={suggestion}\n            role=\"button\"\n            tabIndex={0}\n            className={buildClassName(styles.suggestion, index === activeIndex && styles.active)}\n            onMouseDown={handleClick}\n          >\n            {suggestion}\n          </li>\n        );\n      })}\n    </ul>\n  ) : (\n    <div className={styles.suggestions}>\n      <li className={styles.suggestion}>{lang('No suggestions, you\\'re on your own!')}</li>\n    </div>\n  );\n}\n\nexport default memo(SuggestionList);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"fZW_3WXP\",\"wrapper_focus\":\"sqh1ynr8\",\"wrapperFocus\":\"sqh1ynr8\",\"wrapper_error\":\"z4J8kfq3\",\"wrapperError\":\"z4J8kfq3\",\"input\":\"L1vlW70a\",\"label\":\"Qg48sdUG\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { PRIVATE_KEY_HEX_LENGTH } from '../../config';\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { callApi } from '../../api';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SuggestionList from '../ui/SuggestionList';\n\nimport styles from './InputMnemonic.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  nextId?: string;\n  labelText?: string;\n  className?: string;\n  value?: string;\n  isInModal?: boolean;\n  suggestionsPosition?: 'top' | 'bottom';\n  inputArg?: any;\n  onInput: (value: string, inputArg?: any) => void;\n  onEnter?: NoneToVoidFunction;\n};\n\nconst SUGGESTION_WORDS_COUNT = 7;\n\nfunction InputMnemonic({\n  id, nextId, labelText, className, value = '', isInModal, suggestionsPosition, inputArg, onInput, onEnter,\n}: OwnProps) {\n  const [hasFocus, markFocus, unmarkFocus] = useFlag();\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [filteredSuggestions, setFilteredSuggestions] = useState<string[]>([]);\n  const [activeSuggestionIndex, setActiveSuggestionIndex] = useState<number>(0);\n  const [areSuggestionsShown, setAreSuggestionsShown] = useState<boolean>(false);\n  const [wordlist, setWordlist] = useState<string[]>([]);\n  const shouldRenderSuggestions = areSuggestionsShown && value && filteredSuggestions.length > 0;\n\n  useEffect(() => {\n    void callApi('getMnemonicWordList').then((words) => setWordlist(words ?? []));\n  }, []);\n\n  useEffect(() => {\n    const noError = !value\n      || (areSuggestionsShown && filteredSuggestions.length > 0)\n      || isCorrectMnemonic(value, wordlist);\n    setHasError(!noError);\n  }, [areSuggestionsShown, filteredSuggestions.length, value, wordlist]);\n\n  const processSuggestions = (userInput: string) => {\n    // Filter our suggestions that don't contain the user's input\n    const unLinked = wordlist.filter(\n      (suggestion) => suggestion.toLowerCase().startsWith(userInput.toLowerCase()),\n    ).slice(0, SUGGESTION_WORDS_COUNT);\n\n    onInput(userInput, inputArg);\n    setFilteredSuggestions(unLinked);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(true);\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const userInput = e.target.value;\n\n    processSuggestions(userInput);\n  };\n\n  const handlePaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\n    const pastedValue = e.clipboardData.getData('text');\n\n    if (!pastedValue) return;\n\n    processSuggestions(pastedValue);\n  };\n\n  const handleEnter = useLastCallback((e: KeyboardEvent) => {\n    if (!value) return;\n\n    if (onEnter && !areSuggestionsShown) {\n      onEnter();\n    }\n\n    const suggestedValue = filteredSuggestions[activeSuggestionIndex];\n    if (!suggestedValue) return;\n    onInput(suggestedValue, inputArg);\n    setFilteredSuggestions([suggestedValue]);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(false);\n\n    if (areSuggestionsShown) {\n      e.preventDefault();\n    }\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  useEffect(() => {\n    return hasFocus ? captureKeyboardListeners({\n      onEnter: handleEnter,\n      onTab: (e: KeyboardEvent) => {\n        if (!(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {\n          handleEnter(e);\n        }\n      },\n      onUp: () => {\n        if (activeSuggestionIndex > 0) {\n          setActiveSuggestionIndex(activeSuggestionIndex - 1);\n        }\n      },\n      onDown: () => {\n        if (activeSuggestionIndex < filteredSuggestions.length - 1) {\n          setActiveSuggestionIndex(activeSuggestionIndex + 1);\n        }\n      },\n    }) : undefined;\n  });\n\n  const handleClick = useLastCallback((suggestion: string) => {\n    onInput(suggestion, inputArg);\n    setAreSuggestionsShown(false);\n    setActiveSuggestionIndex(0);\n    setFilteredSuggestions([]);\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    processSuggestions(e.target.value);\n    markFocus();\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    // Remove focus from the input element to ensure correct blur handling, especially when triggered by window switching\n    e.target.blur();\n\n    unmarkFocus();\n    requestAnimationFrame(() => {\n      setAreSuggestionsShown(false);\n      setFilteredSuggestions([]);\n    });\n  };\n\n  return (\n    <div className={buildClassName(\n      styles.wrapper,\n      className,\n      hasFocus && styles.wrapper_focus,\n      hasError && styles.wrapper_error,\n    )}\n    >\n      {shouldRenderSuggestions && (\n        <SuggestionList\n          suggestions={filteredSuggestions}\n          activeIndex={activeSuggestionIndex}\n          position={suggestionsPosition}\n          isInModal={isInModal}\n          onSelect={handleClick}\n        />\n      )}\n      <label className={styles.label} htmlFor={id}>{labelText}.</label>\n      <input\n        id={id}\n        className={buildClassName(styles.input, value !== '' && styles.touched)}\n        type=\"text\"\n        autoCapitalize=\"none\"\n        autoComplete=\"off\"\n        autoCorrect={false}\n        spellCheck={false}\n        onChange={handleChange}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        onPaste={handlePaste}\n        value={value}\n        tabIndex={0}\n        data-focus-scroll-position={suggestionsPosition === 'top' ? 'end' : 'start'}\n      />\n    </div>\n  );\n}\n\nfunction isCorrectMnemonic(mnemonic: string, wordlist: string[]) {\n  return mnemonic.length === PRIVATE_KEY_HEX_LENGTH || wordlist.includes(mnemonic);\n}\n\nexport default memo(InputMnemonic);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalSticker\":\"L6u18JBd\",\"buttonWrapper\":\"NvN6uNIF\",\"footerButton\":\"u7rnL9q6\",\"checkMnemonicInput\":\"_YK5KiZw\",\"error\":\"WeqRS7VQ\",\"checkMnemonicForm\":\"ftYLMV0R\",\"info\":\"o4FCVeIa\",\"mnemonicContainer\":\"lRHp5zzY\",\"warning\":\"jCCt2XRK\",\"words\":\"Yaqcau6G\",\"word\":\"qdW2OhFc\",\"small\":\"pfd8fIrT\"};","import type { FormEvent } from 'react';\nimport React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport { MNEMONIC_CHECK_COUNT } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { areSortedArraysEqual } from '../../../util/iteratees';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport InputMnemonic from '../InputMnemonic';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInModal?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n  descriptionClassName?: string;\n  formClassName?: string;\n  errorClassName?: string;\n  onSubmit: AnyFunction;\n}\n\nfunction CheckWordsForm({\n  isActive,\n  isInModal,\n  checkIndexes,\n  mnemonic,\n  descriptionClassName,\n  formClassName,\n  errorClassName,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n  const [words, setWords] = useState<Record<number, string>>({});\n  const [hasMnemonicError, setHasMnemonicError] = useState(false);\n\n  const handleMnemonicCheckSubmit = useLastCallback((e: FormEvent) => {\n    e.preventDefault();\n    const answer = mnemonic && checkIndexes?.map((index) => mnemonic[index]);\n    if (answer && areSortedArraysEqual(answer, Object.values(words))) {\n      onSubmit();\n    } else {\n      setHasMnemonicError(true);\n    }\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setWords({});\n      setHasMnemonicError(false);\n    }\n  }, [isActive]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    setWords({\n      ...words,\n      [index]: value?.toLowerCase(),\n    });\n  });\n\n  return (\n    <>\n      <p className={descriptionClassName}>\n        {renderText(lang('$mnemonic_check_words_list', checkIndexes?.map((n) => n + 1)?.join(', ')))}\n      </p>\n\n      <form className={formClassName} onSubmit={handleMnemonicCheckSubmit} id=\"check_mnemonic_form\">\n        {checkIndexes!.map((key, i) => (\n          <InputMnemonic\n            key={key}\n            id={`check-mnemonic-${i}`}\n            nextId={i + 1 < MNEMONIC_CHECK_COUNT ? `check-mnemonic-${i + 1}` : undefined}\n            labelText={`${key + 1}`}\n            value={words[key]}\n            isInModal={isInModal}\n            suggestionsPosition={i <= 1 ? 'bottom' : 'top'}\n            inputArg={key}\n            className={styles.checkMnemonicInput}\n            onInput={handleSetWord}\n          />\n        ))}\n      </form>\n\n      {hasMnemonicError && (\n        <div className={errorClassName}>\n          {renderText(lang('$mnemonic_check_error'))}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default memo(CheckWordsForm);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CheckWordsForm from './CheckWordsForm';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n}\n\nfunction CheckWordsContent({\n  isActive,\n  checkIndexes,\n  mnemonic,\n}: OwnProps) {\n  const { closeCheckWordsPage } = getActions();\n\n  const onSubmit = useLastCallback(() => {\n    closeCheckWordsPage({ isBackupCreated: true });\n  });\n\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$check_words_description'))}\n      </p>\n\n      <CheckWordsForm\n        descriptionClassName={buildClassName(styles.info, styles.small)}\n        formClassName={styles.checkMnemonicForm}\n        isActive={isActive}\n        mnemonic={mnemonic}\n        checkIndexes={checkIndexes}\n        errorClassName={styles.error}\n        onSubmit={onSubmit}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          forFormId=\"check_mnemonic_form\"\n          className={styles.footerButton}\n        >\n          {lang('Continue')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(CheckWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsContent from '../common/backup/CheckWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n}\n\nconst AuthCheckWords = ({ isActive, mnemonic, checkIndexes }: OwnProps) => {\n  const { openMnemonicPage } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({ isActive, onBack: openMnemonicPage });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openMnemonicPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Let\\'s Check!')}</span>\n        </div>\n\n        <CheckWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCheckWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  error?: string;\n  biometricsStep?: 1 | 2;\n}\n\nconst START_BIOMETRICS_CONFIRMATION_DELAY_MS = SECOND;\n\nfunction AuthConfirmBiometrics({\n  isActive,\n  biometricsStep,\n  error,\n  isLoading,\n}: OwnProps) {\n  const {\n    afterCreateBiometrics,\n    resetAuth,\n    cancelCreateBiometrics,\n  } = getActions();\n\n  useTimeout(afterCreateBiometrics, isActive ? START_BIOMETRICS_CONFIRMATION_DELAY_MS : undefined, [isActive]);\n\n  const lang = useLang();\n  const shouldRenderSteps = Boolean(biometricsStep);\n  const shouldRenderError = Boolean(error && !shouldRenderSteps);\n  const renderingError = useCurrentOrPrev(error, true);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Turn On Biometrics')}</div>\n\n      {shouldRenderSteps && (\n        <div className={styles.biometricsStep}>\n          {lang(biometricsStep === 1 ? 'Step 1 of 2. Registration' : 'Step 2 of 2. Verification')}\n        </div>\n      )}\n      {shouldRenderError && (\n        <div className={buildClassName(styles.biometricsError)}>\n          <div>{lang(renderingError || 'Unknown error')}</div>\n          <div>{lang('Please try to confirm your biometrics again')}</div>\n        </div>\n      )}\n\n      <div className={styles.buttons}>\n        <div className={styles.buttons__inner}>\n          <Button\n            isDisabled={Boolean(biometricsStep) || isLoading}\n            className={buildClassName(styles.btn, styles.btnHalfWidth)}\n            onClick={cancelCreateBiometrics}\n          >\n            {lang('Cancel')}\n          </Button>\n\n          {shouldRenderError && (\n            <Button\n              isPrimary\n              className={buildClassName(styles.btn, styles.btnHalfWidth)}\n              isDisabled={Boolean(biometricsStep) || isLoading}\n              onClick={afterCreateBiometrics}\n            >\n              {lang('Try Again')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthConfirmBiometrics);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\ninterface StateProps {\n  pin: string;\n}\n\nconst SUBMIT_PAUSE_MS = 1500;\n\nconst AuthConfirmPin = ({\n  isActive,\n  method,\n  pin,\n}: OwnProps & StateProps) => {\n  const { confirmPin, cancelConfirmPin } = getActions();\n\n  const lang = useLang();\n  const [pinConfirm, setPinConfirm] = useState<string>('');\n  const [error, setError] = useState<string>('');\n  const [isConfirmed, setIsConfirmed] = useState<boolean>(false);\n  const isImporting = method !== 'createAccount';\n\n  const handleBackClick = useLastCallback(() => {\n    cancelConfirmPin({ isImporting });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setPinConfirm('');\n      setError('');\n      setIsConfirmed(false);\n    }\n  }, [isActive]);\n\n  const handleChange = useLastCallback((value: string) => {\n    setPinConfirm(value);\n    setError('');\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    if (value === pin) {\n      setIsConfirmed(true);\n      await pause(SUBMIT_PAUSE_MS);\n      confirmPin({ isImporting });\n    } else {\n      setError(lang('Codes don\\'t match'));\n    }\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n\n      <PinPad\n        isActive={isActive}\n        title={isConfirmed ? lang('Code set successfully') : (error || lang('Enter your code again'))}\n        type={isConfirmed ? 'success' : (error ? 'error' : undefined)}\n        length={PIN_LENGTH}\n        value={pinConfirm}\n        onChange={handleChange}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    pin: global.auth.password,\n  };\n})(AuthConfirmPin));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nfunction AuthCreateBackup({ isActive }: OwnProps) {\n  const { skipCheckMnemonic, openAuthBackupWalletModal, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={resetAuth} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}> </span>\n        </div>\n\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n          previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n        />\n        <div className={styles.title}>{lang('Create Backup')}</div>\n        <div className={styles.info}>\n          <p className={styles.info__space}>{renderText(lang('$auth_backup_description1'))}</p>\n          <p>{renderText(lang('$auth_backup_description2'))}</p>\n          <p>{renderText(lang('$auth_backup_description3'))}</p>\n        </div>\n        <div className={styles.buttons}>\n          <Button\n            isPrimary\n            className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n            onClick={openAuthBackupWalletModal}\n          >\n            {lang('$back_up_auth')}\n          </Button>\n          {canSkipMnemonicCheck && (\n            <Button\n              isDestructive\n              isText\n              className={buildClassName(styles.btn, styles.btn_push)}\n              onClick={skipCheckMnemonic}\n            >\n              {lang('Later')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthCreateBackup);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst AuthCreateBiometrics = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const {\n    startCreatingBiometrics,\n    resetAuth,\n    skipCreateBiometrics,\n  } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n        previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Congratulations!')}</div>\n      <p className={styles.info}>\n        <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n      </p>\n      <p className={styles.info}>\n        {lang('Create a password or use biometric authentication to protect it.')}\n      </p>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          onClick={startCreatingBiometrics}\n        >\n          {lang('Connect Biometrics')}\n        </Button>\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateBiometrics}\n        >\n          {lang('Use Password')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateBiometrics);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport touchIdSvg from '../../assets/settings/settings_biometrics.svg';\nimport faceIdSvg from '../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n}\n\nconst AuthCreateNativeBiometrics = ({ isActive, isLoading }: OwnProps) => {\n  const { afterCreateNativeBiometrics, skipCreateNativeBiometrics, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const isTouchId = getIsTouchIdAvailable();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={styles.container}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <img\n        src={isFaceId ? faceIdSvg : touchIdSvg}\n        alt=\"\"\n        className={styles.biometricsIcon}\n      />\n\n      <div className={styles.biometricsTitle}>\n        {isFaceId ? lang('Use Face ID') : (isTouchId ? lang('Use Touch ID') : lang('Use Biometrics'))}\n      </div>\n      <div className={styles.biometricsSubtitle}>\n        {lang('You can connect your biometric data for more convenience')}\n      </div>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          isLoading={isLoading}\n          onClick={!isLoading ? afterCreateNativeBiometrics : undefined}\n        >\n          {lang(isFaceId ? 'Connect Face ID' : (isTouchId ? 'Connect Touch ID' : 'Connect Biometrics'))}\n        </Button>\n        <Button\n          isText\n          isDisabled={isLoading}\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateNativeBiometrics}\n        >\n          {lang('Not Now')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateNativeBiometrics);\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst SPECIAL_CHARS_REGEX = /[`!@#$%^&*()_+\\-=\\]{};':\"\\\\|,.<>?~]/;\n\ninterface OwnProps {\n  firstPassword?: string;\n  secondPassword?: string;\n  requiredMinLength?: number;\n  requiredLength?: number;\n  isOnlyNumbers?: boolean;\n}\n\nexport const usePasswordValidation = ({\n  firstPassword = '',\n  secondPassword = '',\n  requiredMinLength = 8,\n  requiredLength,\n  isOnlyNumbers,\n}: OwnProps) => {\n  const [invalidLength, setInvalidLength] = useState(false);\n  const [noNumber, setNoNumber] = useState(false);\n  const [noUpperCase, setNoUpperCase] = useState(false);\n  const [noLowerCase, setNoLowerCase] = useState(false);\n  const [noSpecialChar, setNoSpecialChar] = useState(false);\n  const [noEqual, setNoEqual] = useState(false);\n\n  useEffect(() => {\n    const isInvalidLength = Boolean(\n      (!requiredLength && firstPassword.length < requiredMinLength)\n      || (requiredLength && firstPassword.length !== requiredLength),\n    );\n    setInvalidLength(isInvalidLength);\n    setNoUpperCase(!isOnlyNumbers && firstPassword.toLowerCase() === firstPassword);\n    setNoLowerCase(!isOnlyNumbers && firstPassword.toUpperCase() === firstPassword);\n    setNoNumber(!/\\d/.test(firstPassword));\n    setNoEqual(Boolean(firstPassword && firstPassword !== secondPassword));\n    setNoSpecialChar(!isOnlyNumbers && !SPECIAL_CHARS_REGEX.test(firstPassword));\n  }, [firstPassword, secondPassword, requiredMinLength, isOnlyNumbers, requiredLength]);\n\n  return {\n    invalidLength, noNumber, noUpperCase, noLowerCase, noEqual, noSpecialChar,\n  };\n};\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePasswordValidation } from '../../hooks/usePasswordValidation';\n\nimport Button from './Button';\nimport Input from './Input';\nimport Modal from './Modal';\n\nimport styles from '../auth/Auth.module.scss';\nimport modalStyles from './Modal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  containerClassName?: string;\n  formId: string;\n  onCancel: NoneToVoidFunction;\n  onSubmit: (password: string, isPasswordNumeric: boolean) => void;\n}\n\nfunction CreatePasswordForm({\n  isActive, isLoading, formId, onCancel, onSubmit, containerClassName,\n}: OwnProps) {\n  const lang = useLang();\n  const isMobile = IS_IOS || IS_ANDROID;\n\n  // eslint-disable-next-line no-null/no-null\n  const firstInputRef = useRef<HTMLInputElement>(null);\n\n  const [isJustSubmitted, setIsJustSubmitted] = useState<boolean>(false);\n  const [firstPassword, setFirstPassword] = useState<string>('');\n  const [secondPassword, setSecondPassword] = useState<string>('');\n  const [isPasswordFocused, markPasswordFocused, unmarkPasswordFocused] = useFlag(false);\n  const [isWeakPasswordModalOpen, openWeakPasswordModal, closeWeakPasswordModal] = useFlag(false);\n\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [isPasswordsNotEqual, setIsPasswordsNotEqual] = useState<boolean>(false);\n  const [isSecondPasswordFocused, markSecondPasswordFocused, unmarkSecondPasswordFocused] = useFlag(false);\n  const canSubmit = isActive && firstPassword.length > 0 && secondPassword.length > 0 && !hasError;\n\n  const shouldRenderError = hasError && !isPasswordFocused;\n\n  const validation = usePasswordValidation({\n    firstPassword,\n    secondPassword,\n    isOnlyNumbers: isMobile,\n    requiredLength: isMobile ? PIN_LENGTH : undefined,\n  });\n\n  useFocusAfterAnimation(firstInputRef, !isActive);\n\n  useHideBottomBar(Boolean(isActive));\n\n  useEffect(() => {\n    setIsPasswordsNotEqual(false);\n    if (firstPassword === '' || !isActive || isPasswordFocused) {\n      setHasError(false);\n      return;\n    }\n\n    const { noEqual, invalidLength } = validation;\n\n    if ((!isSecondPasswordFocused || isJustSubmitted) && noEqual && secondPassword !== '') {\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n    } else if (!noEqual || secondPassword === '' || (isSecondPasswordFocused && !isJustSubmitted)) {\n      setHasError(false);\n    }\n    if (isMobile && invalidLength && !isJustSubmitted) {\n      setHasError(true);\n    }\n  }, [\n    isActive, firstPassword, secondPassword, validation, isSecondPasswordFocused, isPasswordFocused, isJustSubmitted,\n    isMobile,\n  ]);\n\n  const handleFirstPasswordChange = useLastCallback((value: string) => {\n    setFirstPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSecondPasswordChange = useLastCallback((value: string) => {\n    setSecondPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSubmit = useLastCallback((e: React.FormEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (firstPassword !== secondPassword) {\n      setIsJustSubmitted(true);\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n      return;\n    }\n\n    const isWeakPassword = Object.values(validation).find((rule) => rule);\n\n    if (!isMobile && isWeakPassword && !isWeakPasswordModalOpen) {\n      openWeakPasswordModal();\n      return;\n    }\n\n    if (isWeakPasswordModalOpen) {\n      closeWeakPasswordModal();\n    }\n\n    onSubmit(firstPassword, isMobile);\n  });\n\n  function renderErrors() {\n    if (isPasswordsNotEqual) {\n      return (\n        <div className={buildClassName(styles.errors, styles.error)}>\n          {lang('Passwords must be equal.')}\n        </div>\n      );\n    }\n\n    const {\n      invalidLength,\n      noUpperCase,\n      noLowerCase,\n      noNumber,\n      noSpecialChar,\n    } = validation;\n\n    if (isMobile) {\n      return (\n        <div className={styles.passwordRules}>\n          <span className={getValidationRuleClass(shouldRenderError, invalidLength || noNumber)}>\n            {lang('Password must contain %length% digits.', { length: PIN_LENGTH })}\n          </span>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.passwordRules}>\n        {lang('To protect your wallet as much as possible, use a password with')}\n        <span className={getValidationRuleClass(shouldRenderError, invalidLength)}>\n          {' '}{lang('$auth_password_rule_8chars')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noLowerCase)}>\n          {' '}{lang('$auth_password_rule_one_small_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noUpperCase)}>\n          {' '}{lang('$auth_password_rule_one_capital_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noNumber)}>\n          {' '}{lang('$auth_password_rule_one_digit')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noSpecialChar)}>\n          {' '}{lang('$auth_password_rule_one_special_char')}\n        </span>.\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form id={formId} className={buildClassName(styles.form, containerClassName)} onSubmit={handleSubmit}>\n        <div className={styles.formWidgets}>\n          <Input\n            ref={firstInputRef}\n            type=\"password\"\n            isRequired\n            id=\"first-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            hasError={shouldRenderError}\n            placeholder={lang('Enter your password...')}\n            value={firstPassword}\n            autoComplete=\"new-password\"\n            onInput={handleFirstPasswordChange}\n            onFocus={markPasswordFocused}\n            onBlur={unmarkPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n          />\n          <Input\n            type=\"password\"\n            isRequired\n            id=\"second-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            placeholder={lang('...and repeat it')}\n            hasError={isPasswordsNotEqual}\n            value={secondPassword}\n            autoComplete=\"new-password\"\n            onInput={handleSecondPasswordChange}\n            onFocus={markSecondPasswordFocused}\n            onBlur={unmarkSecondPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n          />\n        </div>\n\n        {renderErrors()}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button} isDisabled={isLoading}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isSubmit\n            isPrimary\n            isDisabled={isPasswordsNotEqual || firstPassword === ''}\n            isLoading={isLoading}\n            className={modalStyles.button}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </form>\n\n      <Modal\n        isOpen={isWeakPasswordModalOpen}\n        isCompact\n        onClose={closeWeakPasswordModal}\n        title={lang('Insecure Password')}\n      >\n        <p className={modalStyles.text}>\n          {lang('Your have entered an insecure password, which can be easily guessed by scammers.')}\n        </p>\n        <p className={modalStyles.text}>\n          {lang('Continue or change password to something more secure?')}\n        </p>\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n          <Button isPrimary onClick={closeWeakPasswordModal} className={modalStyles.button}>{lang('Change')}</Button>\n          <Button forFormId={formId} isSubmit isDestructive className={modalStyles.button}>{lang('Continue')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(CreatePasswordForm);\n\nfunction getValidationRuleClass(shouldRenderError: boolean, ruleHasError: boolean) {\n  return buildClassName(\n    styles.passwordRule,\n    !ruleHasError ? styles.valid : shouldRenderError ? styles.invalid : undefined,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { getIsBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n  isLoading?: boolean;\n}\n\nconst AuthCreatePassword = ({\n  isActive,\n  method,\n  isLoading,\n}: OwnProps) => {\n  const { afterCreatePassword, resetAuth } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n  const formId = getFormId(method!);\n  const withDescription = !getIsBiometricAuthSupported();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric: boolean) => {\n    afterCreatePassword({ password, isPasswordNumeric });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, !withDescription && styles.titleSmallMargin)}>\n        {lang(withDescription ? 'Congratulations!' : 'Create Password')}\n      </div>\n      {withDescription && (\n        <>\n          <p className={styles.info}>\n            <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n          </p>\n          <p className={styles.info}>\n            {lang('Create a password to protect it.')}\n          </p>\n        </>\n      )}\n\n      <CreatePasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        formId={formId}\n        onCancel={resetAuth}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\n// eslint-disable-next-line consistent-return\nfunction getFormId(method: AuthMethod) {\n  switch (method) {\n    case 'createAccount':\n      return 'auth_create_password';\n    case 'importMnemonic':\n      return 'auth_import_mnemonic_password';\n    case 'importHardwareWallet':\n      return 'auth_import_hardware_password';\n  }\n}\n\nexport default memo(AuthCreatePassword);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst SUBMIT_PAUSE_MS = 750;\n\nconst AuthCreatePin = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const { createPin, resetAuth } = getActions();\n\n  const lang = useLang();\n  const [pin, setPin] = useState<string>('');\n  const isImporting = method !== 'createAccount';\n\n  useEffect(() => {\n    if (isActive) {\n      setPin('');\n    }\n  }, [isActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    await pause(SUBMIT_PAUSE_MS);\n    createPin({ pin: value, isImporting });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n      <PinPad\n        isActive={isActive}\n        title={lang('Create a code to protect it')}\n        length={PIN_LENGTH}\n        value={pin}\n        onChange={setPin}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(AuthCreatePin);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useMediaTransition from '../../hooks/useMediaTransition';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst START_DELAY = 700;\nconst INTERVAL = SECOND;\n\nconst AuthCreatingWallet = ({ isActive }: OwnProps) => {\n  const lang = useLang();\n  const [one, markOne] = useFlag();\n  const [two, markTwo] = useFlag();\n  const [three, markThree] = useFlag();\n\n  useTimeout(markOne, isActive ? START_DELAY : undefined);\n  useTimeout(markTwo, isActive ? START_DELAY + INTERVAL : undefined);\n  useTimeout(markThree, isActive ? START_DELAY + INTERVAL * 2 : undefined);\n\n  const oneClassNames = useMediaTransition(one);\n  const twoClassNames = useMediaTransition(two);\n  const threeClassNames = useMediaTransition(three);\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n      />\n      <div className={styles.title}>{lang('Creating Wallet...')}</div>\n\n      <div className={styles.counter}>\n        <p className={styles.counterTitle}>{lang('On the count of three...')}</p>\n        <b className={buildClassName(styles.counterDigit, 'rounded-font', oneClassNames)}>1</b>\n        <b className={buildClassName(styles.counterDigit, 'rounded-font', twoClassNames)}>2</b>\n        <b className={buildClassName(styles.counterDigit, 'rounded-font', threeClassNames)}>3</b>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreatingWallet);\n","import type { ChangeEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Checkbox.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  className?: string;\n  contentClassName?: string;\n  children?: React.ReactNode;\n  checked: boolean;\n  isDisabled?: boolean;\n  onChange: (isChecked: boolean) => void;\n};\n\nfunction Checkbox({\n  id,\n  className,\n  contentClassName,\n  children,\n  checked,\n  isDisabled,\n  onChange,\n}: OwnProps) {\n  const handleChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    onChange(e.currentTarget.checked);\n  });\n\n  return (\n    <label className={buildClassName(styles.wrapper, className)}>\n      <input\n        id={id}\n        type=\"checkbox\"\n        className={styles.input}\n        checked={checked}\n        disabled={isDisabled}\n        tabIndex={0}\n        onChange={!isDisabled ? handleChange : undefined}\n      />\n      <div className={buildClassName(styles.content, contentClassName)}>\n        {children}\n      </div>\n    </label>\n  );\n}\n\nexport default memo(Checkbox);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ydGmLQB9\",\"input\":\"aOFCdA5h\",\"content\":\"ZEXtFSPZ\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onSkip: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AuthBackupWarning({ isOpen, onSkip, onClose }: OwnProps) {\n  const { openAuthBackupWalletModal } = getActions();\n\n  const handleBackupClick = useLastCallback(() => {\n    onClose();\n    openAuthBackupWalletModal();\n  });\n\n  const lang = useLang();\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      forceBottomSheet\n      nativeBottomSheetKey=\"backup-warning\"\n      dialogClassName={styles.disclaimerBackupDialog}\n    >\n      <p className={styles.backupNotice}>{renderText(lang('$auth_backup_warning_notice'))}</p>\n      <div className={styles.backupNoticeButtons}>\n        <Button\n          isPrimary\n          className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n          onClick={handleBackupClick}\n        >\n          {lang('Back Up Now')}\n        </Button>\n        {canSkipMnemonicCheck && (\n          <Button\n            isDestructive\n            className={buildClassName(styles.btn, styles.btn_mini)}\n            onClick={onSkip}\n          >\n            {lang('Later')}\n          </Button>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(AuthBackupWarning);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Checkbox from '../ui/Checkbox';\nimport AuthBackupWarning from './AuthBackupWarning';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isImport?: boolean;\n}\n\nconst CONFIRM_DELAY_MS = 350;\n\nconst AuthDisclaimer = ({\n  isActive, isImport,\n}: OwnProps) => {\n  const {\n    skipCheckMnemonic,\n    confirmDisclaimer,\n    cancelDisclaimer,\n  } = getActions();\n\n  const lang = useLang();\n  const [isInformationConfirmed, markInformationConfirmed, unmarkInformationConfirmed] = useFlag(false);\n\n  useHistoryBack({\n    isActive,\n    onBack: cancelDisclaimer,\n  });\n\n  const setIsInformationConfirmed = useLastCallback((isConfirmed: boolean) => {\n    if (isConfirmed) {\n      markInformationConfirmed();\n\n      if (isImport) {\n        window.setTimeout(confirmDisclaimer, CONFIRM_DELAY_MS);\n      }\n    } else {\n      unmarkInformationConfirmed();\n    }\n  });\n\n  useOpenFromMainBottomSheet('backup-warning', markInformationConfirmed);\n\n  const handleCloseBackupWarningModal = useLastCallback(() => {\n    setIsInformationConfirmed(false);\n  });\n\n  const handleSkipMnemonic = useLastCallback(() => {\n    skipCheckMnemonic();\n    handleCloseBackupWarningModal();\n  });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n            className={styles.sticker}\n          />\n          <div className={styles.title}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={styles.infoBlock}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n\n        <Checkbox\n          id=\"information-confirmed\"\n          checked={isInformationConfirmed}\n          isDisabled={isImport && isInformationConfirmed}\n          className={styles.informationCheckbox}\n          contentClassName={styles.informationCheckboxContent}\n          onChange={setIsInformationConfirmed}\n        >\n          {lang('I have read and accept this information')}\n        </Checkbox>\n\n        {!isImport && (\n          <AuthBackupWarning\n            isOpen={isInformationConfirmed}\n            onClose={handleCloseBackupWarningModal}\n            onSkip={handleSkipMnemonic}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthDisclaimer);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX, IS_BIP39_MNEMONIC_ENABLED, MNEMONIC_COUNT, MNEMONIC_COUNTS, PRIVATE_KEY_HEX_LENGTH,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport { compact } from '../../util/iteratees';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useClipboardPaste from '../../hooks/useClipboardPaste';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport InputMnemonic from '../common/InputMnemonic';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  error?: string;\n  isLoading?: boolean;\n};\n\nconst MNEMONIC_INPUTS = [...Array(MNEMONIC_COUNT)].map((_, index) => ({\n  id: index,\n  label: `${index + 1}`,\n}));\nconst MAX_LENGTH = PRIVATE_KEY_HEX_LENGTH;\nconst SLIDE_ANIMATION_DURATION_MS = 250;\n\nconst AuthImportMnemonic = ({ isActive, isLoading, error }: OwnProps & StateProps) => {\n  const {\n    afterImportMnemonic,\n    resetAuth,\n    cleanAuthError,\n  } = getActions();\n\n  const lang = useLang();\n  const [mnemonic, setMnemonic] = useState<Record<number, string>>({});\n  const { isPortrait } = useDeviceScreen();\n\n  const handleMnemonicSet = useLastCallback((pastedMnemonic: string[]) => {\n    if (!MNEMONIC_COUNTS.includes(pastedMnemonic.length) && !isMnemonicPrivateKey(pastedMnemonic)) {\n      return;\n    }\n\n    // RAF is a workaround for several Android browsers (e.g. Vivaldi)\n    requestAnimationFrame(() => {\n      setMnemonic(pastedMnemonic);\n    });\n\n    if (document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).blur();\n    }\n  });\n\n  const handlePasteMnemonic = useLastCallback((pastedText: string) => {\n    const pastedMnemonic = parsePastedText(pastedText);\n\n    if (pastedMnemonic.length === 1 && document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).value = pastedMnemonic[0];\n\n      const event = new Event('input');\n      (document.activeElement as HTMLInputElement).dispatchEvent(event);\n\n      return;\n    }\n\n    handleMnemonicSet(pastedMnemonic);\n  });\n\n  useClipboardPaste(Boolean(isActive), handlePasteMnemonic);\n\n  const isSubmitDisabled = useMemo(() => {\n    const mnemonicValues = compact(Object.values(mnemonic));\n\n    return (!MNEMONIC_COUNTS.includes(mnemonicValues.length) && !isMnemonicPrivateKey(mnemonicValues))\n      || !!error;\n  }, [mnemonic, error]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    cleanAuthError();\n    const pastedMnemonic = parsePastedText(value);\n    if (MNEMONIC_COUNTS.includes(pastedMnemonic.length)) {\n      handleMnemonicSet(pastedMnemonic);\n      return;\n    }\n\n    setMnemonic({\n      ...mnemonic,\n      [index]: pastedMnemonic[0].toLowerCase(),\n    });\n  });\n\n  const handleCancel = useLastCallback(() => {\n    setTimeout(() => {\n      resetAuth();\n    }, SLIDE_ANIMATION_DURATION_MS);\n  });\n\n  const handleSubmit = useLastCallback(async () => {\n    if (isSubmitDisabled) return;\n\n    const mnemonicValues = compact(Object.values(mnemonic));\n    if (mnemonicValues.length === 12) {\n      const isShortMnemonicValid = await callApi('validateMnemonic', mnemonicValues);\n      if (!isShortMnemonicValid) return;\n    }\n\n    afterImportMnemonic({ mnemonic: mnemonicValues });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancel,\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({\n        onEnter: { handler: handleSubmit, noStopPropagation: true },\n      });\n  }, [handleSubmit, isLoading, isSubmitDisabled, mnemonic]);\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        size={ANIMATED_STICKER_SMALL_SIZE_PX}\n        tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n        previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n        nonInteractive\n        noLoop={false}\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, styles.title_afterSmallSticker)}>\n        {lang('Enter Secret Words')}\n      </div>\n      <div className={buildClassName(styles.info, styles.infoSmallFont, styles.infoPull)}>\n        {renderText(lang(IS_BIP39_MNEMONIC_ENABLED\n          ? '$auth_import_mnemonic_description'\n          : '$auth_import_24_mnemonic_description'))}\n      </div>\n\n      <div className={styles.importingContent}>\n        {MNEMONIC_INPUTS.map(({ id, label }, i) => (\n          <InputMnemonic\n            key={id}\n            id={`import-mnemonic-${id}`}\n            nextId={id + 1 < MNEMONIC_COUNT ? `import-mnemonic-${id + 1}` : undefined}\n            labelText={label}\n            value={mnemonic[id]}\n            suggestionsPosition={getSuggestPosition(id, isPortrait)}\n            inputArg={id}\n            onInput={handleSetWord}\n            onEnter={i === MNEMONIC_COUNT - 1 ? handleSubmit : undefined}\n          />\n        ))}\n      </div>\n\n      <div className={styles.buttons}>\n        {error && <div className={styles.footerError}>{lang(error)}</div>}\n        <div className={styles.buttons__inner}>\n          <Button onClick={handleCancel} className={styles.footerButton}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={isSubmitDisabled}\n            isLoading={isLoading}\n            className={styles.footerButton}\n            onClick={handleSubmit}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    error: global.auth.error,\n    isLoading: global.auth.isLoading,\n  };\n})(AuthImportMnemonic));\n\nfunction parsePastedText(str = '') {\n  return str\n    .replace(/(?:\\r\\n)+|[\\r\\n\\s;,\\t]+/g, ' ')\n    .trim()\n    .split(' ')\n    .map((w) => w.slice(0, MAX_LENGTH));\n}\n\nfunction getSuggestPosition(id: number, isPortrait: boolean = false) {\n  if (isPortrait) {\n    return 'top';\n  }\n\n  return ((id > 5 && id < 8) || (id > 13 && id < 16) || id > 21) ? 'top' : undefined;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nconst MAX_MESSAGE_LENGTH = 4096;\n\nconst useClipboardPaste = (isActive: boolean, onPaste: (value: string) => void) => {\n  useEffect(() => {\n    if (!isActive) {\n      return undefined;\n    }\n\n    function handlePaste(e: ClipboardEvent) {\n      if (!e.clipboardData) {\n        return;\n      }\n\n      const pastedText = e.clipboardData.getData('text').substring(0, MAX_MESSAGE_LENGTH);\n\n      if (!pastedText) {\n        return;\n      }\n\n      e.preventDefault();\n\n      onPaste(pastedText);\n    }\n\n    document.addEventListener('paste', handlePaste, false);\n\n    return () => {\n      document.removeEventListener('paste', handlePaste, false);\n    };\n  }, [isActive, onPaste]);\n};\n\nexport default useClipboardPaste;\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  customStickerClassName?: string;\n  customButtonWrapperClassName?: string;\n  isFullSizeButton?: boolean;\n  isActive?: boolean;\n  isFirstCheckboxSelected: boolean;\n  isSecondCheckboxSelected: boolean;\n  isThirdCheckboxSelected: boolean;\n  onFirstCheckboxClick: AnyFunction;\n  onSecondCheckboxClick: AnyFunction;\n  onThirdCheckboxClick: AnyFunction;\n  textFirst: string;\n  textSecond: string;\n  textThird: string;\n  onSubmit: () => void;\n}\n\nfunction SafetyRulesContent({\n  customStickerClassName,\n  customButtonWrapperClassName,\n  isFullSizeButton,\n  isActive,\n  isFirstCheckboxSelected,\n  isSecondCheckboxSelected,\n  isThirdCheckboxSelected,\n  textFirst,\n  textSecond,\n  textThird,\n  onFirstCheckboxClick,\n  onSecondCheckboxClick,\n  onThirdCheckboxClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const canSubmit = isFirstCheckboxSelected && isSecondCheckboxSelected && isThirdCheckboxSelected;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={customStickerClassName || styles.modalSticker}\n      />\n      <Checkbox\n        checked={isFirstCheckboxSelected}\n        onChange={onFirstCheckboxClick}\n      >\n        {renderText(textFirst)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isSecondCheckboxSelected}\n        onChange={onSecondCheckboxClick}\n      >\n        {renderText(textSecond)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isThirdCheckboxSelected}\n        onChange={onThirdCheckboxClick}\n      >\n        {renderText(textThird)}\n      </Checkbox>\n\n      <div className={customButtonWrapperClassName || styles.buttonWrapper}>\n        <Button\n          isPrimary\n          isDisabled={!canSubmit}\n          className={isFullSizeButton ? styles.footerButton : undefined}\n          onClick={handleSubmit}\n        >\n          {lang('Understood')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SafetyRulesContent);\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst AuthSafetyRules = ({ isActive }: OwnProps) => {\n  const { openCreateBackUpPage, openMnemonicPage } = getActions();\n\n  const [firstChecked, setFirstChecked] = useState(false);\n  const [secondChecked, setSecondChecked] = useState(false);\n  const [thirdChecked, setThirdChecked] = useState(false);\n\n  useHistoryBack({ isActive, onBack: openCreateBackUpPage });\n\n  const lang = useLang();\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openCreateBackUpPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          isFirstCheckboxSelected={firstChecked}\n          onFirstCheckboxClick={setFirstChecked}\n          isSecondCheckboxSelected={secondChecked}\n          onSecondCheckboxClick={setSecondChecked}\n          isThirdCheckboxSelected={thirdChecked}\n          onThirdCheckboxClick={setThirdChecked}\n          onSubmit={openMnemonicPage}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSafetyRules);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  mnemonic?: string[];\n}\n\nfunction SecretWordsList({\n  mnemonic,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$mnemonic_list_description'))}\n      </p>\n      <p className={buildClassName(styles.warning)}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <ol className={styles.words}>\n        {mnemonic?.map((word, i) => (\n          // eslint-disable-next-line react/no-array-index-key\n          <li key={i} className={styles.word}>{word}</li>\n        ))}\n      </ol>\n    </>\n  );\n}\n\nexport default memo(SecretWordsList);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport SecretWordsList from './SecretWordsList';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  mnemonic,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <SecretWordsList mnemonic={mnemonic} />\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          onClick={onSubmit}\n          className={styles.footerButton}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsContent from '../common/backup/SecretWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n}\n\nconst AuthSecretWords = ({ isActive, mnemonic }: OwnProps) => {\n  const { openAuthBackupWalletModal, openCheckWordsPage } = getActions();\n\n  const lang = useLang();\n  useHistoryBack({ isActive, onBack: openAuthBackupWalletModal });\n\n  const wordsCount = mnemonic?.length || 0;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.containerAlignTop, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openAuthBackupWalletModal} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={openCheckWordsPage}\n          buttonText={lang('Let\\'s Check')}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSecretWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type Theme } from '../../global/types';\n\nimport { APP_NAME, IS_CORE_WALLET } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_LEDGER_SUPPORTED } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  hasAccounts?: boolean;\n  isLoading?: boolean;\n  theme: Theme;\n}\n\nfunction AuthStart({\n  isActive,\n  hasAccounts,\n  isLoading,\n  theme,\n}: OwnProps & StateProps) {\n  const {\n    startCreatingWallet,\n    startImportingWallet,\n    openAbout,\n    openHardwareWalletModal,\n    resetAuth,\n  } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const [isLogoReady, markLogoReady] = useFlag();\n  const { transitionClassNames } = useShowTransition(isLogoReady, undefined, undefined, 'slow');\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      {hasAccounts && (\n        <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n\n      {IS_CORE_WALLET ? (\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.coreWalletLogo}\n          previewUrl={ANIMATED_STICKERS_PATHS.coreWalletLogoPreview}\n          noLoop={false}\n          nonInteractive\n        />\n      ) : (\n        <img\n          src={logoPath}\n          alt={APP_NAME}\n          className={buildClassName(styles.logo, transitionClassNames)}\n          onLoad={markLogoReady}\n        />\n      )}\n\n      <div className={buildClassName(styles.appName, 'rounded-font')}>{APP_NAME}</div>\n      <div className={styles.info}>\n        {renderText(lang('$auth_intro'))}\n      </div>\n\n      {!IS_CORE_WALLET && (\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_about)}\n          onClick={openAbout}\n        >\n          {lang('More about %app_name%', { app_name: APP_NAME })}\n          <i className=\"icon-chevron-right\" aria-hidden />\n        </Button>\n      )}\n      <div className={styles.importButtonsBlock}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          isLoading={isLoading}\n          onClick={!isLoading ? startCreatingWallet : undefined}\n        >\n          {lang('Create Wallet')}\n        </Button>\n        <span className={styles.importText}>{lang('or import from')}</span>\n        <div className={styles.importButtons}>\n          <Button\n            className={buildClassName(styles.btn, !IS_LEDGER_SUPPORTED && styles.btn_single)}\n            onClick={!isLoading ? startImportingWallet : undefined}\n          >\n            {lang('Secret Words')}\n          </Button>\n          {IS_LEDGER_SUPPORTED && (\n            <Button\n              className={buildClassName(styles.btn, styles.btn_mini)}\n              onClick={!isLoading ? openHardwareWalletModal : undefined}\n            >\n              {lang('Ledger')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    hasAccounts: Boolean(global.currentAccountId),\n    isLoading: global.auth.isLoading,\n    theme: global.settings.theme,\n  };\n})(AuthStart));\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState, Theme } from '../../global/types';\nimport { AuthState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SettingsAbout from '../settings/SettingsAbout';\nimport Transition from '../ui/Transition';\nimport AuthCheckPassword from './AuthCheckPassword';\nimport AuthCheckWords from './AuthCheckWords';\nimport AuthConfirmBiometrics from './AuthConfirmBiometrics';\nimport AuthConfirmPin from './AuthConfirmPin';\nimport AuthCreateBackup from './AuthCreateBackup';\nimport AuthCreateBiometrics from './AuthCreateBiometrics';\nimport AuthCreateNativeBiometrics from './AuthCreateNativeBiometrics';\nimport AuthCreatePassword from './AuthCreatePassword';\nimport AuthCreatePin from './AuthCreatePin';\nimport AuthCreatingWallet from './AuthCreatingWallet';\nimport AuthDisclaimer from './AuthDisclaimer';\nimport AuthImportMnemonic from './AuthImportMnemonic';\nimport AuthSafetyRules from './AuthSafetyRules';\nimport AuthSecretWords from './AuthSecretWords';\nimport AuthStart from './AuthStart';\n\nimport styles from './Auth.module.scss';\n\ntype StateProps = Pick<GlobalState['auth'], (\n  'state' | 'biometricsStep' | 'error' | 'mnemonic' | 'mnemonicCheckIndexes' | 'isLoading' | 'method'\n  | 'isBackupModalOpen'\n)> & { theme: Theme };\n\nconst RENDER_COUNT = Object.keys(AuthState).length / 2;\n\nconst Auth = ({\n  state,\n  biometricsStep,\n  error,\n  isLoading,\n  mnemonic,\n  mnemonicCheckIndexes,\n  method,\n  theme,\n}: StateProps) => {\n  const {\n    closeAbout,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  // Transitioning to ready state is done in another component\n  const renderingAuthState = useCurrentOrPrev(\n    state === AuthState.ready ? undefined : state,\n    true,\n  ) ?? -1;\n\n  const [prevKey, setPrevKey] = useState<number | undefined>(undefined);\n  const [nextKey, setNextKey] = useState(renderingAuthState + 1);\n  const updateRenderingKeys = useLastCallback(() => {\n    setNextKey(renderingAuthState + 1);\n    setPrevKey(renderingAuthState === AuthState.confirmPin ? AuthState.createPin : undefined);\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderAuthScreen(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case AuthState.none:\n        return <AuthStart isActive={isActive} />;\n      case AuthState.createWallet:\n        return <AuthCreatingWallet isActive={isActive} />;\n      case AuthState.checkPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"createAccount\"\n            error={error}\n          />\n        );\n      case AuthState.createPin:\n        return <AuthCreatePin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.createBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.createNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.createPassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method=\"createAccount\" />;\n      case AuthState.createBackup:\n        return <AuthCreateBackup isActive={isActive} />;\n      case AuthState.disclaimerAndBackup:\n        return (\n          <AuthDisclaimer key=\"create\" isActive={isActive} />\n        );\n      case AuthState.importWallet:\n        return <AuthImportMnemonic isActive={isActive} />;\n      case AuthState.importWalletCreatePin:\n        return <AuthCreatePin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletConfirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletCheckPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"importMnemonic\"\n            error={error}\n          />\n        );\n      case AuthState.disclaimer:\n        return (\n          <AuthDisclaimer\n            key=\"import\"\n            isActive={isActive}\n            isImport\n          />\n        );\n      case AuthState.importWalletCreateNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.importWalletCreatePassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method={method} />;\n      case AuthState.importWalletCreateBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method={method} />;\n      case AuthState.importWalletConfirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.about:\n        return <SettingsAbout isActive={isActive} handleBackClick={closeAbout} theme={theme} />;\n      case AuthState.safetyRules:\n        return <AuthSafetyRules isActive={isActive} />;\n      case AuthState.mnemonicPage:\n        return <AuthSecretWords isActive={isActive} mnemonic={mnemonic} />;\n      case AuthState.checkWords:\n        return <AuthCheckWords isActive={isActive} mnemonic={mnemonic} checkIndexes={mnemonicCheckIndexes} />;\n    }\n  }\n\n  return (\n    <Transition\n      name={isPortrait ? (IS_ANDROID ? 'slideFade' : 'slideLayers') : 'semiFade'}\n      activeKey={renderingAuthState}\n      renderCount={RENDER_COUNT}\n      shouldCleanup\n      className={styles.transitionContainer}\n      slideClassName={styles.transitionSlide}\n      prevKey={prevKey}\n      nextKey={nextKey}\n      onStop={updateRenderingKeys}\n      shouldWrap\n    >\n      {renderAuthScreen}\n    </Transition>\n  );\n};\n\nexport default memo(withGlobal((global): StateProps => {\n  const authProps = pick(global.auth, [\n    'state', 'biometricsStep', 'error', 'mnemonic', 'mnemonicCheckIndexes', 'isLoading', 'method',\n    'isBackupModalOpen',\n  ]);\n  return {\n    ...authProps,\n    theme: global.settings.theme,\n  };\n})(Auth));\n","import { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nexport default function resolveSlideTransitionName() {\n  return IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade';\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { TransferState } from '../global/types';\n\nimport useCurrentOrPrev from './useCurrentOrPrev';\nimport useLastCallback from './useLastCallback';\n\nconst ANIMATION_DURATION = 300;\n\nexport default function useModalTransitionKeys(activeKey: number, isOpen: boolean) {\n  // Use previous key during closing animation\n  const renderingKey = useCurrentOrPrev(isOpen ? activeKey : undefined, true) ?? -1;\n  const [nextKey, setNextKey] = useState<TransferState>();\n\n  const updateNextKey = useLastCallback(() => {\n    setNextKey(isOpen ? renderingKey + 1 : undefined);\n  });\n\n  // Set next key after modal is fully open\n  useEffect(() => {\n    if (isOpen) {\n      setTimeout(updateNextKey, ANIMATION_DURATION);\n    }\n  }, [isOpen, updateNextKey]);\n\n  return { renderingKey, nextKey, updateNextKey };\n}\n","import type { ApiMtwCardBorderShineType, ApiNft } from '../api/types';\n\nimport buildClassName from '../util/buildClassName';\nimport { getCardNftImageUrl } from '../util/url';\n\ninterface CardCustomizationResult {\n  backgroundImageUrl?: string;\n  withTextGradient: boolean;\n  classNames: string;\n  borderShineType?: ApiMtwCardBorderShineType;\n}\n\nexport default function useCardCustomization(\n  cardNft?: ApiNft,\n): CardCustomizationResult {\n  const { mtwCardType, mtwCardTextType, mtwCardBorderShineType } = cardNft?.metadata || {};\n  const withTextGradient = !!mtwCardType && mtwCardType !== 'standard';\n  const mtwCardTextTypeClass = mtwCardType !== 'standard'\n    ? undefined\n    : (mtwCardTextType === 'dark' ? 'MtwCard__darkText' : 'MtwCard__lightText');\n\n  const backgroundImageUrl = cardNft ? getCardNftImageUrl(cardNft) : undefined;\n\n  return {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: buildClassName(mtwCardType && `MtwCard__${mtwCardType}`, mtwCardTextTypeClass),\n    borderShineType: mtwCardBorderShineType,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"accountTitle\":\"OmlnPb32\",\"accountTitleInteractive\":\"Fldd4MBh\",\"accountTitleInner\":\"YGITDXg2\",\"accountTitleShort\":\"qroBIVHK\",\"arrowIcon\":\"npqBgt0Z\",\"menuButton\":\"MelIpdSX\",\"edit\":\"k40niuQ5\",\"inputContainer\":\"XNPgjyNM\",\"input\":\"b5kkV6B7\",\"saveButton\":\"BIi0915d\",\"container\":\"PpBNJGXa\",\"dialog\":\"rSsbSpKy\",\"backdrop\":\"qHXAdLTy\",\"dialog_compact\":\"aMGXe7oo\",\"dialogCompact\":\"aMGXe7oo\",\"actionIcon\":\"wHon4UZ6\",\"button\":\"nW3c_nQf\",\"button_current\":\"ApT2_0sQ\",\"buttonCurrent\":\"ApT2_0sQ\",\"customCard\":\"q9ZqciDr\",\"accountName\":\"vSsIdneH\",\"accountAddressBlock\":\"HvcgH37L\",\"createAccountButton\":\"R6UTDxww\",\"createAccountIcon\":\"aB938ron\",\"menuButtons\":\"vqWRGYSE\",\"inStickyCard\":\"W68g0iId\"};","import React from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { Account } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { shortenAddress } from '../../../../util/shortenAddress';\n\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useLang from '../../../../hooks/useLang';\n\nimport styles from './AccountSelector.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  accountId: string;\n  addressByChain: Account['addressByChain'];\n  isHardware?: boolean;\n  title?: string;\n  cardBackgroundNft?: ApiNft;\n  canEditAccount?: boolean;\n  onClick: (accountId: string) => void;\n  onEdit: NoneToVoidFunction;\n}\n\nexport const HARDWARE_ACCOUNT_ADDRESS_SHIFT = 3;\nexport const ACCOUNT_ADDRESS_SHIFT = 4;\n\nfunction AccountButton({\n  isActive,\n  accountId,\n  addressByChain,\n  isHardware,\n  title,\n  cardBackgroundNft,\n  canEditAccount,\n  onClick,\n  onEdit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const addressOrMultichain = Object.keys(addressByChain).length > 1\n    ? lang('Multichain')\n    : shortenAddress(\n      addressByChain.ton,\n      isHardware ? HARDWARE_ACCOUNT_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n      ACCOUNT_ADDRESS_SHIFT,\n    );\n\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n  const fullClassName = buildClassName(\n    styles.button,\n    isActive && styles.button_current,\n    backgroundImageUrl && styles.customCard,\n    mtwCardClassNames,\n  );\n\n  const handleEditClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    onEdit();\n  };\n\n  return (\n    <div\n      className={fullClassName}\n      aria-label={lang('Switch Account')}\n      onClick={isActive ? undefined : () => onClick(accountId)}\n      style={buildStyle(backgroundImageUrl && `--bg: url(${backgroundImageUrl})`)}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountAddressBlock, withTextGradient && 'gradientText')}>\n        {isHardware && <i className=\"icon-ledger\" aria-hidden />}\n        <span>{addressOrMultichain}</span>\n      </div>\n\n      {isActive && canEditAccount && (\n        <div className={styles.edit} onClick={handleEditClick}>\n          <i className=\"icon-pen\" aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AccountButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"accounts\":\"DP7r4ob0\",\"accounts_two\":\"aMoUTjsw\",\"accountsTwo\":\"aMoUTjsw\",\"account\":\"feJs1qiP\",\"account_current\":\"LGBe77Zo\",\"accountCurrent\":\"LGBe77Zo\",\"account_disabled\":\"QT4AQhSL\",\"accountDisabled\":\"QT4AQhSL\",\"account_inactive\":\"JLVV6MK1\",\"accountInactive\":\"JLVV6MK1\",\"accounts_single\":\"xq8sJcx0\",\"accountsSingle\":\"xq8sJcx0\",\"accountName\":\"xRepCoTw\",\"button_current\":\"CMlJY5eP\",\"buttonCurrent\":\"CMlJY5eP\",\"accountFooter\":\"aSHneDhG\",\"iconLedger\":\"fQt3UNlM\",\"accountAddress\":\"U1ocd7xK\",\"accountCheckMark\":\"WoJjd6rF\",\"accountCheckMark_active\":\"Xs5JWZXM\",\"accountCheckMarkActive\":\"Xs5JWZXM\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useCardCustomization from '../../hooks/useCardCustomization';\n\nimport { ACCOUNT_ADDRESS_SHIFT, HARDWARE_ACCOUNT_ADDRESS_SHIFT } from '../main/sections/Card/AccountButton';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountId: string;\n  address: string;\n  title?: string;\n  isHardware?: boolean;\n  isActive?: boolean;\n  isLoading?: boolean;\n  ariaLabel?: string;\n  className?: string;\n  withCheckbox?: boolean;\n  cardBackgroundNft?: ApiNft;\n  onClick?: NoneToVoidFunction;\n}\n\nfunction AccountButton({\n  accountId,\n  address,\n  title,\n  isHardware,\n  ariaLabel,\n  isActive,\n  isLoading,\n  className,\n  withCheckbox,\n  cardBackgroundNft,\n  onClick,\n}: StateProps) {\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n\n  const fullClassName = buildClassName(\n    className,\n    styles.account,\n    backgroundImageUrl && styles.customCard,\n    mtwCardClassNames,\n    isActive && !withCheckbox && styles.account_current,\n    isLoading && styles.account_disabled,\n  );\n\n  return (\n    <div\n      key={accountId}\n      className={fullClassName}\n      onClick={onClick}\n      style={buildStyle(backgroundImageUrl && `--bg: url(${backgroundImageUrl})`)}\n      aria-label={ariaLabel}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountFooter, withTextGradient && 'gradientText')}>\n        {isHardware && <i className={buildClassName('icon-ledger', isHardware && styles.iconLedger)} aria-hidden />}\n        <span className={styles.accountAddress}>\n          {shortenAddress(\n            address,\n            isHardware ? HARDWARE_ACCOUNT_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n            ACCOUNT_ADDRESS_SHIFT,\n          )}\n        </span>\n      </div>\n      {withCheckbox\n      && <div className={buildClassName(styles.accountCheckMark, isActive && styles.accountCheckMark_active)} />}\n    </div>\n  );\n}\n\nexport default memo(AccountButton);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountLength: number;\n  labelText?: string;\n  children: React.ReactNode;\n  className?: string;\n}\n\nfunction AccountButtonWrapper({\n  accountLength,\n  labelText,\n  children,\n  className,\n}: StateProps) {\n  const fullClassName = buildClassName(\n    className,\n    styles.accounts,\n    'custom-scroll',\n    accountLength === 1 && styles.accounts_single,\n    accountLength === 2 && styles.accounts_two,\n  );\n  return (\n    <>\n      {labelText && <p className={styles.label}>{labelText}</p>}\n      <div className={fullClassName}>\n        {children}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AccountButtonWrapper);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"zdmLsynF\",\"modalDialogInsideSettings\":\"kYjygKEY\",\"slide\":\"a2oy8Zll\",\"container\":\"eM1PpsST\",\"containerStatic\":\"jHYtCW5T\",\"content\":\"_3mWK1CH\",\"iconBlockSlide\":\"WEcWgMzV\",\"iconBlockSlideStatic\":\"VCK1YGjr\",\"iconBlock\":\"KE3Egymz\",\"mobile\":\"kpjonisY\",\"ledgerIcon\":\"iuLLqpxI\",\"textBlock\":\"bn1fb2en\",\"textBlock_gap\":\"bBaOfZlx\",\"textBlockGap\":\"bBaOfZlx\",\"textBlock_success\":\"j8GYzR5R\",\"textBlockSuccess\":\"j8GYzR5R\",\"textBlock_small\":\"Rt2IdHAB\",\"textBlockSmall\":\"Rt2IdHAB\",\"textIcon\":\"SOw0Xtct\",\"text\":\"GuAw_sFJ\",\"text_failed\":\"XPczA9Ds\",\"textFailed\":\"XPczA9Ds\",\"text_connected\":\"YyHAVq6P\",\"textConnected\":\"YyHAVq6P\",\"text_success\":\"tTgIgIgG\",\"textSuccess\":\"tTgIgIgG\",\"actionBlock\":\"hiaAxVr_\",\"actionBlock_single\":\"ApwM97qB\",\"actionBlockSingle\":\"ApwM97qB\",\"button\":\"LZNOcG4M\",\"button_single\":\"Hm4XX1NN\",\"buttonSingle\":\"Hm4XX1NN\",\"accounts\":\"qG6SFrZs\",\"accounts_two\":\"o_4z0gP4\",\"accountsTwo\":\"o_4z0gP4\",\"account\":\"_Vsrbub9\",\"account_current\":\"uo8yhRNU\",\"accountCurrent\":\"uo8yhRNU\",\"addAccountContainer\":\"E5i9UUtD\",\"addAccountIcon\":\"j5VZHMly\",\"accountName\":\"V6_KYxce\",\"accountFooter\":\"LXgNcuuY\",\"accountCurrencyIcon\":\"g_b7EuV5\",\"accountAddress\":\"pL4iTSDM\",\"accountCheckMark\":\"mpVXcyoe\",\"accountCheckMark_active\":\"lVx2a3if\",\"accountCheckMarkActive\":\"lVx2a3if\",\"sticker\":\"MfAU5ZEs\",\"declinedLabel\":\"aWyFXa02\",\"declinedLabelDetailed\":\"q1lhwUmL\",\"dropdownBlock\":\"_2MGoq5H\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  text: string;\n  error?: string;\n  onClose: () => void;\n  onTryAgain: () => void;\n}\n\nenum ConfirmTransactionState {\n  Waiting,\n  Error,\n}\n\nfunction LedgerConfirmOperation({\n  isActive, text, error, onClose, onTryAgain,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [activeState, setActiveState] = useState(ConfirmTransactionState.Waiting);\n  const [nextKey, setNextKey] = useState(ConfirmTransactionState.Error);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (error) {\n      setActiveState(ConfirmTransactionState.Error);\n      setNextKey(ConfirmTransactionState.Waiting);\n    } else {\n      setActiveState(ConfirmTransactionState.Waiting);\n      setNextKey(ConfirmTransactionState.Error);\n    }\n  }, [error]);\n\n  function renderWaitingConfirm(isActiveSlide: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.textBlock, styles.textBlock_small)}>\n            <span className={styles.text}>{text}</span>\n          </div>\n          <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n            <Button onClick={onClose} className={buildClassName(styles.button, styles.button_single)}>\n              {lang('Cancel')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderTryAgain(isActiveSlide: boolean) {\n    const isErrorDetailed = error && [\n      '$hardware_blind_sign_not_enabled',\n      '$hardware_blind_sign_not_enabled_internal',\n    ].includes(error);\n\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.declinedLabel, isErrorDetailed && styles.declinedLabelDetailed)}>\n            {renderText(lang(error!))}\n          </div>\n          <div className={styles.actionBlock}>\n            <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n            <Button isPrimary onClick={onTryAgain} className={styles.button}>{lang('Try Again')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActiveSlide: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case ConfirmTransactionState.Waiting:\n        return renderWaitingConfirm(isActiveSlide);\n      case ConfirmTransactionState.Error:\n        return renderTryAgain(isActiveSlide);\n    }\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(modalStyles.transitionSlide, styles.slide)}\n      activeKey={activeState}\n      nextKey={nextKey}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(LedgerConfirmOperation);\n","import { useEffect, useState } from '../lib/teact/teact';\n\n// Use previous value during animation without checking for presence\nexport function usePrevDuringAnimationSimple<T>(current: T, durationMs: number = 300): T {\n  const [prev, setPrev] = useState<T>(current);\n\n  useEffect(() => {\n    if (current === prev) return undefined;\n    const timeoutId = window.setTimeout(() => {\n      setPrev(current);\n    }, durationMs);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [current, durationMs, prev]);\n\n  return prev;\n}\n","import captureKeyboardListener from './captureKeyboardListeners';\n\nexport default function captureEscKeyListener(handler: NoneToVoidFunction) {\n  return captureKeyboardListener({ onEsc: () => { handler(); } });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"VydD7Rve\",\"inPortal\":\"vcuzKHhA\",\"bubble\":\"mY0hTIiL\",\"top\":\"FsyRNnQH\",\"bottom\":\"tkKrx8OR\",\"left\":\"MvEERemq\",\"right\":\"y6xJQNRF\",\"backdrop\":\"gc2eH8vQ\",\"menu\":\"gtd29jbF\",\"suggestion\":\"BYQgxGEv\",\"dropdown\":\"IxGdkmhI\"};","import type { FC, RefObject } from '../../lib/teact/teact';\nimport React, { beginHeavyAnimation, useEffect, useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useVirtualBackdrop from '../../hooks/useVirtualBackdrop';\n\nimport Portal from './Portal';\n\nimport styles from './Menu.module.scss';\n\ntype OwnProps = {\n  children: React.ReactNode;\n  menuRef?: RefObject<HTMLDivElement | null>;\n  isOpen: boolean;\n  id?: string;\n  className?: string;\n  bubbleClassName?: string;\n  style?: string;\n  type?: 'menu' | 'suggestion' | 'dropdown';\n  positionX?: 'left' | 'right';\n  positionY?: 'top' | 'bottom';\n  transformOriginX?: number;\n  transformOriginY?: number;\n  autoClose?: boolean;\n  shouldSkipTransition?: boolean;\n  noBackdrop?: boolean;\n  withPortal?: boolean;\n  noCloseOnBackdrop?: boolean;\n  shouldCleanup?: boolean;\n  onCloseAnimationEnd?: () => void;\n  onClose?: () => void;\n  onMouseEnter?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onMouseLeave?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n};\n\nexport const ANIMATION_DURATION = 200;\n\nconst Menu: FC<OwnProps> = ({\n  children,\n  isOpen,\n  id,\n  menuRef,\n  className,\n  bubbleClassName,\n  style,\n  positionX = 'left',\n  positionY = 'top',\n  transformOriginX,\n  transformOriginY,\n  type = 'menu',\n  autoClose = false,\n  shouldSkipTransition,\n  noBackdrop = false,\n  withPortal,\n  noCloseOnBackdrop = false,\n  shouldCleanup,\n  onCloseAnimationEnd,\n  onClose,\n  onMouseEnter,\n  onMouseLeave,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  let bubbleRef = useRef<HTMLDivElement>(null);\n  if (menuRef) {\n    bubbleRef = menuRef;\n  }\n\n  useHistoryBack({\n    isActive: Boolean(isOpen && onClose),\n    onBack: onClose!,\n    shouldBeReplaced: true,\n  });\n\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(\n    isOpen,\n    onCloseAnimationEnd,\n    shouldSkipTransition,\n    undefined,\n    shouldSkipTransition,\n  );\n\n  useEffect(\n    () => (isOpen && onClose ? captureEscKeyListener(onClose) : undefined),\n    [isOpen, onClose],\n  );\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (isOpen || (!isOpen && prevIsOpen === true)) {\n      beginHeavyAnimation(ANIMATION_DURATION);\n    }\n  }, [isOpen]);\n\n  useVirtualBackdrop(isOpen && !noBackdrop, bubbleRef, noCloseOnBackdrop ? undefined : onClose);\n\n  const fullBubbleClassName = buildClassName(\n    styles.bubble,\n    bubbleClassName,\n    'menu-bubble',\n    styles[positionY],\n    styles[positionX],\n    styles[type],\n    transitionClassNames,\n  );\n\n  const transformOriginYStyle = transformOriginY !== undefined ? `${transformOriginY}px` : undefined;\n  const transformOriginXStyle = transformOriginX !== undefined ? `${transformOriginX}px` : undefined;\n\n  if (shouldCleanup && !shouldRender) {\n    return undefined;\n  }\n\n  const menu = (\n    <div\n      id={id}\n      className={buildClassName(styles.wrapper, className, withPortal && styles.inPortal)}\n      style={style}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={isOpen ? onMouseLeave : undefined}\n    >\n      {isOpen && !noBackdrop && (\n        // This only prevents click events triggering on underlying elements\n        <div className={styles.backdrop} onClick={stopEvent} />\n      )}\n      <div\n        ref={bubbleRef}\n        className={fullBubbleClassName}\n        style={`transform-origin: ${transformOriginXStyle || positionX} ${transformOriginYStyle || positionY}`}\n        onClick={autoClose ? onClose : undefined}\n      >\n        {children}\n      </div>\n    </div>\n  );\n\n  if (withPortal) {\n    return <Portal>{menu}</Portal>;\n  }\n\n  return menu;\n};\n\nexport default Menu;\n","import type { RefObject } from 'react';\nimport { useEffect } from '../lib/teact/teact';\n\nimport styles from '../components/ui/Menu.module.scss';\n\n// This effect implements closing menus by clicking outside of them\n// without adding extra elements to the DOM\nexport default function useVirtualBackdrop(\n  isOpen: boolean,\n  menuRef: RefObject<HTMLElement>,\n  onClose?: () => void | undefined,\n) {\n  useEffect(() => {\n    const handleEvent = (e: Event) => {\n      const menu = menuRef.current;\n      const target = e.target as HTMLElement | null;\n      if (!menu || !target) {\n        return;\n      }\n\n      if (\n        !menu.contains(e.target as Node | null)\n        || target.classList.contains(styles.backdrop)\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (onClose) {\n          onClose();\n        }\n      }\n    };\n\n    if (isOpen && onClose) {\n      document.addEventListener('mousedown', handleEvent);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleEvent);\n    };\n  }, [isOpen, menuRef, onClose]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"zVKWQb4E\",\"item\":\"p6wqAx5G\",\"wide\":\"r6y8uqO8\",\"interactive\":\"Q9ntFVQX\",\"label\":\"D1GD_LrJ\",\"light\":\"soVchDDr\",\"disabled\":\"pvIBCUiV\",\"dangerous\":\"pGdKfZ0g\",\"separator\":\"KUw9xH1F\",\"buttonIcon\":\"N6o0srlb\",\"item_selected\":\"RsC78CT6\",\"itemSelected\":\"RsC78CT6\",\"item_with_icon\":\"U_181tTH\",\"itemWithIcon\":\"U_181tTH\",\"itemIcon\":\"Y6vHSLLj\",\"itemOverlayIcon\":\"Kyq0Mbfk\",\"insideButton\":\"rpgBhur3\",\"fontIcon\":\"YG4KjBia\",\"itemName\":\"Mj3kpKk7\",\"itemDescription\":\"SGTt7OqT\",\"dropdownButtonWrapper\":\"M88J3eDx\",\"spinner\":\"O6oZGmyS\"};","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\nimport windowSize from '../../util/windowSize';\n\nimport useLang from '../../hooks/useLang';\nimport { usePrevDuringAnimationSimple } from '../../hooks/usePrevDuringAnimationSimple';\n\nimport Menu from './Menu';\n\nimport styles from './Dropdown.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  selectedValue?: string;\n  items: DropdownItem[];\n  withPortal?: boolean;\n  anchorPosition?: IAnchorPosition;\n  menuPosition?: 'top' | 'bottom';\n  menuPositionHorizontal?: 'right' | 'left';\n  transformOriginX?: number;\n  transformOriginY?: number;\n  menuStyle?: string;\n  shouldTranslateOptions?: boolean;\n  className?: string;\n  bubbleClassName?: string;\n  buttonClassName?: string;\n  iconClassName?: string;\n  fontIconClassName?: string;\n  shouldCleanup?: boolean;\n  onSelect?: (value: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\nconst SAFE_POSITION_PX = 6;\n\nfunction DropdownMenu({\n  isOpen,\n  selectedValue,\n  items,\n  withPortal,\n  anchorPosition,\n  menuPosition,\n  menuPositionHorizontal,\n  menuStyle,\n  transformOriginX,\n  transformOriginY,\n  shouldTranslateOptions,\n  className,\n  bubbleClassName,\n  buttonClassName,\n  iconClassName,\n  fontIconClassName,\n  shouldCleanup,\n  onSelect,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const menuRef = useRef<HTMLDivElement>(null);\n  const [menuLeft, setMenuLeft] = useState(anchorPosition?.x);\n\n  useEffect(() => {\n    if (isOpen && menuRef.current && anchorPosition) {\n      const menuWidth = menuRef.current.offsetWidth;\n      const windowWidth = windowSize.get().width;\n      let left = anchorPosition?.x;\n\n      left = Math.min(left, left - menuWidth / 2 - SAFE_POSITION_PX, windowWidth - menuWidth - SAFE_POSITION_PX);\n      left = Math.max(left, SAFE_POSITION_PX);\n\n      setMenuLeft(left);\n    }\n  }, [anchorPosition, isOpen]);\n\n  if (anchorPosition) {\n    menuStyle = `${menuStyle || ''};left: ${menuLeft}px; top: ${anchorPosition.y}px;`;\n  }\n\n  const prevMenuStyle = usePrevDuringAnimationSimple(menuStyle);\n\n  const handleItemClick = (e: React.MouseEvent, value: string) => {\n    e.stopPropagation();\n    onSelect?.(value);\n    onClose();\n  };\n\n  return (\n    <Menu\n      menuRef={menuRef}\n      isOpen={isOpen}\n      type=\"dropdown\"\n      style={menuStyle || prevMenuStyle}\n      withPortal={withPortal}\n      positionX={menuPositionHorizontal}\n      positionY={menuPosition}\n      transformOriginX={transformOriginX}\n      transformOriginY={transformOriginY}\n      className={className}\n      bubbleClassName={bubbleClassName}\n      shouldCleanup={shouldCleanup}\n      onClose={onClose}\n    >\n      {items.map((item, index) => {\n        const fullButtonClassName = buildClassName(\n          styles.item,\n          item.icon && styles.item_with_icon,\n          item.isDisabled && styles.disabled,\n          item.isDangerous && styles.dangerous,\n          item.withSeparator && index > 0 && styles.separator,\n          selectedValue === item.value && styles.item_selected,\n          buttonClassName,\n          'capture-scroll',\n        );\n        return (\n          <button\n            key={item.value}\n            type=\"button\"\n            className={fullButtonClassName}\n            disabled={item.isDisabled}\n            onClick={(e) => handleItemClick(e, item.value)}\n          >\n            {item.icon && (\n              <img src={item.icon} alt=\"\" className={buildClassName('icon', styles.itemIcon, iconClassName)} />\n            )}\n            {item.overlayIcon && (\n              <img src={item.overlayIcon} alt=\"\" className={buildClassName('icon', styles.itemOverlayIcon)} />\n            )}\n            {item.fontIcon && (\n              <i\n                className={buildClassName(`icon icon-${item.fontIcon}`, styles.fontIcon, fontIconClassName)}\n                aria-hidden\n              />\n            )}\n            <span className={buildClassName(styles.itemName, 'menuItemName')}>\n              {shouldTranslateOptions ? lang(item.name) : item.name}\n              {item.description && (\n                <span className={styles.itemDescription}>\n                  {shouldTranslateOptions ? lang(item.description) : item.description}\n                </span>\n              )}\n            </span>\n          </button>\n        );\n      })}\n    </Menu>\n  );\n}\n\nexport default memo(DropdownMenu);\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"o7Soo94L\",\"inner\":\"fnzgQDjn\",\"spin\":\"dPrfSpVS\",\"white\":\"ZwvOHvLC\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Spinner.module.scss';\n\ntype OwnProps = {\n  color?: 'white';\n  className?: string;\n};\n\nfunction Spinner({ color, className }: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.spinner,\n    color && styles[color],\n    className,\n  );\n\n  return (\n    <div className={fullClassName} aria-label={lang('Loading...')}>\n      <i className={buildClassName(styles.inner, 'icon-spinner')} aria-hidden />\n    </div>\n  );\n}\n\nexport default memo(Spinner);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownMenu from './DropdownMenu';\nimport Spinner from './Spinner';\n\nimport styles from './Dropdown.module.scss';\n\nexport interface DropdownItem {\n  value: string;\n  name: string;\n  selectedName?: string;\n  description?: string;\n  icon?: string;\n  overlayIcon?: string;\n  fontIcon?: string;\n  isDisabled?: boolean;\n  isDangerous?: boolean;\n  withSeparator?: boolean;\n}\n\ninterface OwnProps {\n  label?: string;\n  selectedValue?: string;\n  items: DropdownItem[];\n  className?: string;\n  itemClassName?: string;\n  menuClassName?: string;\n  theme?: 'light';\n  arrow?: 'caret' | 'chevron';\n  menuPosition?: 'top' | 'bottom';\n  menuPositionHorizontal?: 'right' | 'left';\n  disabled?: boolean;\n  shouldTranslateOptions?: boolean;\n  onChange?: (value: string) => void;\n  isLoading?: boolean;\n}\n\nconst DEFAULT_ARROW = 'caret';\nconst DEFAULT_MENU_POSITION_HORIZONTAL = 'right';\n\nfunction Dropdown({\n  label,\n  items,\n  selectedValue,\n  className,\n  itemClassName,\n  menuClassName,\n  theme,\n  arrow = DEFAULT_ARROW,\n  menuPosition,\n  menuPositionHorizontal = DEFAULT_MENU_POSITION_HORIZONTAL,\n  disabled,\n  shouldTranslateOptions,\n  onChange,\n  isLoading = false,\n}: OwnProps): TeactJsx {\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n\n  const [selectedItem, selectedItemName] = useMemo(() => {\n    const item = items.find((i) => selectedValue !== undefined && i.value === selectedValue);\n    const selectedName = item?.selectedName ?? item?.name ?? '';\n    return [item, selectedName];\n  }, [items, selectedValue]);\n\n  const handleSelect = useLastCallback((value: string) => {\n    if (value !== selectedValue) {\n      onChange?.(value);\n    }\n  });\n\n  if (!items.length) {\n    return undefined;\n  }\n\n  const buttonArrowIcon = buildClassName(\n    styles.buttonIcon,\n    arrow === 'chevron' ? 'icon-chevron-down' : 'icon-caret-down',\n  );\n\n  const withMenu = items.length > 1;\n  const isFullyInteractive = Boolean(label);\n  const fullClassName = buildClassName(\n    className,\n    theme && styles[theme],\n    withMenu && styles.interactive,\n    isFullyInteractive && styles.wide,\n    isFullyInteractive && disabled && styles.disabled,\n  );\n  const buttonFullClassName = buildClassName(\n    styles.button,\n    withMenu && styles.interactive,\n    !isFullyInteractive && disabled && styles.disabled,\n    withMenu && menuClassName,\n    itemClassName,\n  );\n\n  return (\n    <div\n      className={fullClassName}\n      onClick={isFullyInteractive && !disabled && withMenu ? openMenu : undefined}\n    >\n      {label && <span className={styles.label}>{label}</span>}\n\n      {isLoading ? (\n        <Spinner className={styles.spinner} />\n      ) : (\n        <button\n          type=\"button\"\n          className={buttonFullClassName}\n          onClick={!isFullyInteractive && withMenu ? openMenu : undefined}\n          disabled={disabled}\n        >\n          {selectedItem?.icon && <img src={selectedItem.icon} alt=\"\" className={styles.itemIcon} />}\n          {selectedItem?.overlayIcon && (\n            <img\n              src={selectedItem?.overlayIcon}\n              alt=\"\"\n              className={buildClassName('icon', styles.itemOverlayIcon, styles.insideButton)}\n            />\n          )}\n          {selectedItem?.fontIcon && (\n            <i\n              className={buildClassName(`icon-${selectedItem.fontIcon}`, styles.fontIcon)}\n              aria-hidden\n            />\n          )}\n          <span className={buildClassName(styles.itemName, 'itemName', itemClassName)}>\n            {shouldTranslateOptions ? lang(selectedItemName) : selectedItemName}\n          </span>\n          {withMenu && <i className={buttonArrowIcon} aria-hidden />}\n        </button>\n      )}\n\n      {withMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen && !isLoading}\n          menuPositionHorizontal={menuPositionHorizontal}\n          menuPosition={menuPosition}\n          items={items}\n          shouldTranslateOptions={shouldTranslateOptions}\n          selectedValue={selectedValue}\n          buttonClassName={itemClassName}\n          onSelect={handleSelect}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Dropdown);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Theme } from '../../global/types';\nimport type { LedgerTransport } from '../../util/ledger/types';\nimport { HardwareConnectState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { closeLedgerTab } from '../../util/ledger/tab';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport {\n  IS_ANDROID, IS_DELEGATING_BOTTOM_SHEET, IS_IOS, IS_IOS_APP,\n} from '../../util/windowEnvironment';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Image from '../ui/Image';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\nimport ledgerDesktopSrc from '../../assets/ledger/desktop.png';\nimport ledgerDesktopDarkSrc from '../../assets/ledger/desktop-dark.png';\nimport ledgerIosSrc from '../../assets/ledger/ios.png';\nimport ledgerIosDarkSrc from '../../assets/ledger/ios-dark.png';\nimport ledgerMobileBluetoothSrc from '../../assets/ledger/mobile-bluetooth.png';\nimport ledgerMobileBluetoothDarkSrc from '../../assets/ledger/mobile-bluetooth-dark.png';\nimport ledgerMobileUsbSrc from '../../assets/ledger/mobile-usb.png';\nimport ledgerMobileUsbDarkSrc from '../../assets/ledger/mobile-usb-dark.png';\n\ninterface OwnProps {\n  isActive: boolean;\n  isStatic?: boolean;\n  // All API method calls should be delegated from the main to the native copy of the app on iOS (NBS)\n  shouldDelegateToNative?: boolean;\n  state?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isRemoteTab?: boolean;\n  className?: string;\n  onConnected: (isSingleWallet: boolean) => void;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  availableTransports?: LedgerTransport[];\n  lastUsedTransport?: LedgerTransport;\n  currentTheme: Theme;\n}\n\nconst NEXT_SLIDE_DELAY = 500;\nconst TRANSPORT_NAMES: Record<LedgerTransport, string> = {\n  usb: 'USB',\n  bluetooth: 'Bluetooth',\n};\n\nfunction LedgerConnect({\n  isActive,\n  isStatic,\n  state,\n  isLedgerConnected,\n  isTonAppConnected,\n  isRemoteTab,\n  shouldDelegateToNative,\n  availableTransports,\n  lastUsedTransport,\n  currentTheme,\n  className,\n  onConnected,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    connectHardwareWallet,\n    resetHardwareWalletConnect,\n    initializeHardwareWalletModal,\n    initializeHardwareWalletConnection,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [selectedTransport, setSelectedTransport] = useState<LedgerTransport | undefined>(lastUsedTransport);\n  const appTheme = useAppTheme(currentTheme);\n\n  const isLedgerFailed = isLedgerConnected === false;\n  const isTonAppFailed = isTonAppConnected === false;\n  const isConnected = state === HardwareConnectState.ConnectedWithSingleWallet\n    || state === HardwareConnectState.ConnectedWithSeveralWallets;\n  const isConnecting = state === HardwareConnectState.Connecting || (\n    state === HardwareConnectState.Connect && !isLedgerFailed && !isTonAppFailed && availableTransports?.length === 1\n  );\n  const isWaitingForBrowser = state === HardwareConnectState.WaitingForBrowser;\n  const title = isConnected ? lang('Ledger Connected!') : lang('Connect Ledger');\n  const shouldCloseOnCancel = !onCancel;\n\n  const renderingAvailableTransports = useMemo(() => {\n    return (availableTransports || []).map((transport) => ({\n      value: transport,\n      name: TRANSPORT_NAMES[transport],\n    }));\n  }, [availableTransports]);\n  const {\n    shouldRender: shouldRenderAvailableTransports,\n    transitionClassNames: availableTransportsClassNames,\n  } = useShowTransition(Boolean(renderingAvailableTransports.length > 0 && selectedTransport));\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  useHideBottomBar(isActive);\n\n  useEffect(() => {\n    if (selectedTransport) return;\n    if (availableTransports?.length) {\n      setSelectedTransport(availableTransports?.[0]);\n    } else if (IS_IOS_APP) {\n      setSelectedTransport('bluetooth');\n    }\n  }, [availableTransports, selectedTransport]);\n\n  useEffect(() => {\n    if (isRemoteTab || !isActive || (IS_DELEGATING_BOTTOM_SHEET && !shouldDelegateToNative)) return;\n\n    initializeHardwareWalletModal({ shouldDelegateToNative: IS_DELEGATING_BOTTOM_SHEET && shouldDelegateToNative });\n  }, [isActive, isRemoteTab, shouldDelegateToNative]);\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isRemoteTab || (IS_DELEGATING_BOTTOM_SHEET && !shouldDelegateToNative)) {\n      return;\n    }\n\n    setTimeout(() => {\n      onConnected(isSingleWallet);\n\n      setTimeout(() => {\n        resetHardwareWalletConnect();\n      }, NEXT_SLIDE_DELAY);\n    }, NEXT_SLIDE_DELAY);\n  });\n\n  useEffect(() => {\n    if (\n      state === HardwareConnectState.ConnectedWithSingleWallet\n      || state === HardwareConnectState.ConnectedWithSeveralWallets\n    ) {\n      handleConnected(state === HardwareConnectState.ConnectedWithSingleWallet);\n    }\n  }, [state, handleConnected]);\n\n  const handleCloseWithBrowserTab = useLastCallback(() => {\n    const closeAction = shouldCloseOnCancel ? onClose : onCancel;\n    void closeLedgerTab();\n    closeAction();\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    if (renderingAvailableTransports.length > 1) {\n      initializeHardwareWalletConnection({\n        transport: selectedTransport!,\n        shouldDelegateToNative,\n      });\n    } else {\n      connectHardwareWallet({ transport: availableTransports?.[0] });\n    }\n  });\n\n  function renderAvailableTransports() {\n    return (\n      <div className={buildClassName(styles.dropdownBlock, availableTransportsClassNames)}>\n        <Dropdown\n          label={lang('Connection Type')}\n          items={renderingAvailableTransports}\n          selectedValue={selectedTransport!}\n          theme=\"light\"\n          arrow=\"chevron\"\n          disabled={isConnecting}\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={setSelectedTransport as (value: string) => void}\n        />\n      </div>\n    );\n  }\n\n  function renderButtons() {\n    const isFailed = state === HardwareConnectState.Failed;\n\n    if (isRemoteTab && isConnected) {\n      return (\n        <div className={buildClassName(styles.actionBlock, isConnected && styles.actionBlock_single)}>\n          <Button\n            isDisabled={isConnecting}\n            className={buildClassName(styles.button, isConnected && styles.button_single)}\n            onClick={onClose}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.actionBlock}>\n        <Button\n          className={styles.button}\n          onClick={shouldCloseOnCancel ? onClose : onCancel}\n        >\n          {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n        </Button>\n        <Button\n          isPrimary\n          isLoading={isConnecting}\n          isDisabled={isConnecting || isConnected}\n          className={styles.button}\n          onClick={handleSubmit}\n        >\n          {isFailed ? lang('Try Again') : lang('Continue')}\n        </Button>\n      </div>\n    );\n  }\n\n  function getLedgerIconSrc() {\n    const isDarkTheme = appTheme === 'dark';\n    const iconData = {\n      desktop: isDarkTheme ? ledgerDesktopDarkSrc : ledgerDesktopSrc,\n      mobileUsb: isDarkTheme ? ledgerMobileUsbDarkSrc : ledgerMobileUsbSrc,\n      ios: isDarkTheme ? ledgerIosDarkSrc : ledgerIosSrc,\n      mobileBluetooth: isDarkTheme ? ledgerMobileBluetoothDarkSrc : ledgerMobileBluetoothSrc,\n    };\n\n    if (!IS_CAPACITOR) {\n      // Ledger is only supported on iOS for Capacitor app\n      return IS_ANDROID ? iconData.mobileUsb : iconData.desktop;\n    }\n\n    if (IS_IOS) {\n      return iconData.ios;\n    }\n\n    return selectedTransport === 'bluetooth' ? iconData.mobileBluetooth : iconData.mobileUsb;\n  }\n\n  function renderWaitingForBrowser() {\n    return (\n      <>\n        {!isStatic ? (\n          <ModalHeader\n            title={title}\n            onBackButtonClick={onBackButtonClick}\n            onClose={!onBackButtonClick ? handleCloseWithBrowserTab : undefined}\n          />\n        ) : (\n          <div className={settingsStyles.header}>\n            <Button isSimple isText onClick={handleCloseWithBrowserTab} className={settingsStyles.headerBack}>\n              <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={settingsStyles.headerTitle}>{title}</span>\n          </div>\n        )}\n        <div className={styles.container}>\n          <Transition\n            activeKey={!IS_CAPACITOR ? 0 : (selectedTransport !== 'bluetooth' ? 1 : 2)}\n            name=\"semiFade\"\n            className={buildClassName(styles.iconBlock, isPortrait && styles.mobile)}\n            slideClassName={styles.iconBlockSlide}\n          >\n            <Image\n              url={getLedgerIconSrc()}\n              imageClassName={styles.ledgerIcon}\n            />\n          </Transition>\n          <div\n            className={buildClassName(\n              styles.textBlock,\n              styles.textBlock_gap,\n            )}\n          >\n            <span className={styles.text}>\n              <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n              {lang('Switch to the newly opened tab to connect Ledger.')}\n            </span>\n            <span className={styles.text}>\n              <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n              {lang('Once connected, switch back to this window to proceed.')}\n            </span>\n          </div>\n          <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n            <Button\n              className={buildClassName(styles.button, styles.button_single)}\n              onClick={handleCloseWithBrowserTab}\n            >\n              {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderConnect() {\n    return (\n      <>\n        {!isStatic ? (\n          <ModalHeader\n            title={title}\n            onBackButtonClick={onBackButtonClick}\n            onClose={!onBackButtonClick ? onClose : undefined}\n          />\n        ) : (\n          <div className={settingsStyles.header}>\n            <Button isSimple isText onClick={onClose} className={settingsStyles.headerBack}>\n              <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={settingsStyles.headerTitle}>{title}</span>\n          </div>\n        )}\n        <div className={buildClassName(\n          styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n        )}\n        >\n          <Transition\n            activeKey={!IS_CAPACITOR ? 0 : (selectedTransport !== 'bluetooth' ? 1 : 2)}\n            name=\"semiFade\"\n            className={buildClassName(styles.iconBlock, isPortrait && styles.mobile)}\n            slideClassName={isStatic ? styles.iconBlockSlideStatic : styles.iconBlockSlide}\n          >\n            <Image\n              url={getLedgerIconSrc()}\n              imageClassName={styles.ledgerIcon}\n            />\n          </Transition>\n          <div\n            className={buildClassName(\n              styles.textBlock,\n              isConnected && styles.textBlock_success,\n            )}\n          >\n            <span\n              className={buildClassName(\n                styles.text,\n                isLedgerFailed && styles.text_failed,\n                isLedgerConnected && styles.text_connected,\n                isConnected && styles.text_success,\n              )}\n            >\n              <i\n                className={buildClassName(styles.textIcon, isLedgerConnected ? 'icon-accept' : 'icon-dot')}\n                aria-hidden\n              />\n              {lang('Connect your Ledger')}\n            </span>\n            <span\n              className={buildClassName(\n                styles.text,\n                isTonAppFailed && styles.text_failed,\n                isTonAppConnected && styles.text_connected,\n                isConnected && styles.text_success,\n              )}\n            >\n              <i\n                className={buildClassName(styles.textIcon, isTonAppConnected ? 'icon-accept' : 'icon-dot')}\n                aria-hidden\n              />\n              {lang('Unlock it and open the TON App')}\n            </span>\n          </div>\n\n          {shouldRenderAvailableTransports && renderAvailableTransports()}\n          {renderButtons()}\n        </div>\n      </>\n    );\n  }\n\n  function renderContent() {\n    if (isWaitingForBrowser) {\n      return renderWaitingForBrowser();\n    }\n\n    return renderConnect();\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll', className)}\n      slideClassName={modalStyles.transitionSlide}\n      activeKey={isWaitingForBrowser ? 1 : 0}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { availableTransports, lastUsedTransport } = global.hardware;\n\n  return {\n    availableTransports,\n    lastUsedTransport,\n    currentTheme: global.settings.theme,\n  };\n})(LedgerConnect));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"rtKXhN4A\",\"modalDialogExtraHeight\":\"ow4XXlQr\",\"dapp\":\"naRjGTN0\",\"dapp_first\":\"LUz47fCn\",\"dappFirst\":\"LUz47fCn\",\"dapp_push\":\"AxygZABC\",\"dappPush\":\"AxygZABC\",\"dappIcon\":\"Utxlqsar\",\"dappLogo\":\"dqbsWkDq\",\"dappLogo_icon\":\"RGl7OFHd\",\"dappLogoIcon\":\"RGl7OFHd\",\"transactionAccount\":\"ut5A6NM6\",\"dappInfo\":\"cL2nTyJm\",\"dappName\":\"IZ831cu4\",\"dappUrl\":\"Xz5xXLpO\",\"dappDisconnect\":\"Dpv9gVfh\",\"label\":\"ooIjdCk3\",\"description\":\"d20jMAO6\",\"footer\":\"lvIWoC_b\",\"buttons\":\"XvGbWtVh\",\"button\":\"TBS2qSdm\",\"dataField\":\"URk9skQT\",\"receivingAddress\":\"NfKwqXNd\",\"payloadField\":\"IpEvYlyO\",\"payloadField_expanded\":\"mtQbMtDU\",\"payloadFieldExpanded\":\"mtQbMtDU\",\"payloadFieldExpand\":\"l7ty8x8l\",\"payloadFieldTerm\":\"iNOlk2G5\",\"transactionList\":\"TddQIzLn\",\"transactionRow\":\"qfq9TmLL\",\"transactionRowAmount\":\"rqZIiXwE\",\"currencySymbol\":\"WdW2dRfZ\",\"transactionRowAddress\":\"p87NWFTH\",\"transactionRowChevron\":\"gKLbD42t\",\"scam\":\"Kgein0KH\",\"scamImage\":\"gw394drP\",\"transactionDirection\":\"by1Uv_HG\",\"accountTitle\":\"nBWVm1mf\",\"accountBalance\":\"_ogqtbzH\",\"transactionDapp\":\"Uyz5mVM_\",\"sticker\":\"noPlTaoE\",\"sticker_sizeSmall\":\"E9iT0WHT\",\"stickerSizeSmall\":\"E9iT0WHT\",\"descriptionContent\":\"LiakNgEl\",\"dappInfoSkeleton\":\"wOmNbpWs\",\"accountWrapperSkeleton\":\"cWnAUfkt\",\"dappInfoIconSkeleton\":\"e3oGDhNq\",\"shimmer\":\"IwL4cJVX\",\"transactionDappIconSkeleton\":\"Q9_OlVcf\",\"dappInfoTextSkeleton\":\"cAdLb2FM\",\"nameSkeleton\":\"tO1IUhnj\",\"descSkeleton\":\"u2wkCYw7\",\"nameDappSkeleton\":\"z0IluCrP\",\"descDappSkeleton\":\"JYgy9un6\",\"transactionDirectionLeftSkeleton\":\"YHLHftpe\",\"transactionDirectionRightSkeleton\":\"VzwVb3o_\",\"dappInfoDataSkeleton\":\"L8RwZKiN\",\"rowContainerSkeleton\":\"XcidIimi\",\"rowContainerLargeSkeleton\":\"Lh4_AmEs\",\"rowSkeleton\":\"IVSbVRoG\",\"rowLargeSkeleton\":\"qNqaxuw6\",\"rowTextSkeleton\":\"iLWJ6ABT\",\"rowTextLargeSkeleton\":\"q_gxYI6j\",\"skeletonTransitionWrapper\":\"US9q0wug\",\"warningForPayload\":\"fHoMTSia\",\"fee\":\"nBxdGGBZ\",\"buttonsAfterFee\":\"LNrikojg\",\"detailsModalContent\":\"O32mclho\",\"detailsModalExplanation\":\"tFBBFIVM\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  iconUrl?: string;\n  name?: string;\n  url?: string;\n  origin?: string;\n  onDisconnect?: (origin: string) => void;\n  className?: string;\n}\n\nfunction DappInfo({\n  iconUrl,\n  name,\n  url,\n  origin,\n  onDisconnect,\n  className,\n}: OwnProps) {\n  const lang = useLang();\n\n  const shouldShowDisconnect = Boolean(onDisconnect && origin);\n\n  const handleDisconnect = useLastCallback(() => {\n    onDisconnect!(origin!);\n  });\n\n  function renderIcon() {\n    if (iconUrl) {\n      return (\n        <img src={iconUrl} alt={lang('Logo')} className={styles.dappLogo} />\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.dappLogo, styles.dappLogo_icon)}>\n        <i className={buildClassName(styles.dappIcon, 'icon-laptop')} aria-hidden />\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.dapp, className)}>\n      {renderIcon()}\n      <div className={styles.dappInfo}>\n        <span className={styles.dappName}>{name}</span>\n        <span className={styles.dappUrl}>{url && new URL(url).host}</span>\n      </div>\n      {shouldShowDisconnect && (\n        <Button\n          isSmall\n          isPrimary\n          className={styles.dappDisconnect}\n          onClick={handleDisconnect}\n        >\n          {lang('Disconnect')}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(DappInfo);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  error?: string;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DappPassword({\n  isActive,\n  error,\n  onSubmit,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const { clearDappConnectRequestError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        error={error}\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Connect')}\n        cancelLabel={lang('Cancel')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearDappConnectRequestError}\n      />\n    </>\n  );\n}\n\nexport default memo(DappPassword);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonConnectProof } from '../../api/tonConnect/types';\nimport type { ApiDapp, ApiDappPermissions } from '../../api/types';\nimport type { Account, AccountSettings, HardwareConnectState } from '../../global/types';\nimport { DappConnectState } from '../../global/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport DappInfo from './DappInfo';\nimport DappPassword from './DappPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  state?: DappConnectState;\n  hasConnectRequest: boolean;\n  dapp?: ApiDapp;\n  error?: string;\n  requiredPermissions?: ApiDappPermissions;\n  requiredProof?: ApiTonConnectProof;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n}\n\nfunction DappConnectModal({\n  state,\n  hasConnectRequest,\n  dapp,\n  error,\n  requiredPermissions,\n  requiredProof,\n  accounts,\n  currentAccountId,\n  hardwareState,\n  settingsByAccountId,\n  isLedgerConnected,\n  isTonAppConnected,\n}: StateProps) {\n  const {\n    submitDappConnectRequestConfirm,\n    submitDappConnectRequestConfirmHardware,\n    cancelDappConnectRequestConfirm,\n    setDappConnectRequestState,\n  } = getActions();\n\n  const lang = useLang();\n  const [selectedAccount, setSelectedAccount] = useState<string>(currentAccountId);\n  const [isConfirmOpen, openConfirm, closeConfirm] = useFlag(false);\n\n  const isOpen = hasConnectRequest;\n\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const isLoading = dapp === undefined;\n\n  useEffect(() => {\n    if (!currentAccountId) return;\n\n    setSelectedAccount(currentAccountId);\n  }, [currentAccountId]);\n\n  const shouldRenderAccounts = useMemo(() => {\n    return accounts && Object.keys(accounts).length > 1;\n  }, [accounts]);\n  const { iconUrl, name, url } = dapp || {};\n\n  const handleSubmit = useLastCallback(() => {\n    closeConfirm();\n    const { isHardware } = accounts![selectedAccount];\n    const { isPasswordRequired, isAddressRequired } = requiredPermissions || {};\n\n    if (!requiredProof || (!isHardware && isAddressRequired && !isPasswordRequired)) {\n      submitDappConnectRequestConfirm({\n        accountId: selectedAccount,\n      });\n\n      cancelDappConnectRequestConfirm();\n    } else if (isHardware) {\n      setDappConnectRequestState({ state: DappConnectState.ConnectHardware });\n    } else {\n      // The confirmation window must be closed before the password screen is displayed\n      requestAnimationFrame(() => {\n        setDappConnectRequestState({ state: DappConnectState.Password });\n      });\n    }\n  });\n\n  const handlePasswordCancel = useLastCallback(() => {\n    setDappConnectRequestState({ state: DappConnectState.Info });\n  });\n\n  const submitDappConnectRequestHardware = useLastCallback(() => {\n    submitDappConnectRequestConfirmHardware({\n      accountId: selectedAccount,\n    });\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDappConnectRequestConfirm({\n      accountId: selectedAccount,\n      password,\n    });\n  });\n\n  function renderAccount(accountId: string, address: string, title?: string, isHardware?: boolean) {\n    const isActive = accountId === selectedAccount;\n    const onClick = isActive || isLoading ? undefined : () => setSelectedAccount(accountId);\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        isHardware={isHardware}\n        isActive={accountId === selectedAccount}\n        isLoading={isLoading}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        labelText={lang('Select wallet to use on this dapp')}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, isHardware }]) => {\n            return renderAccount(accountId, addressByChain.ton, title, isHardware);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  function renderDappInfo() {\n    return (\n      <>\n        <ModalHeader title={lang('Connect Dapp')} onClose={cancelDappConnectRequestConfirm} />\n\n        <div className={modalStyles.transitionContent}>\n          <DappInfo\n            iconUrl={iconUrl}\n            name={name}\n            url={url}\n            className={buildClassName(styles.dapp_first, styles.dapp_push)}\n          />\n          {shouldRenderAccounts && renderAccounts()}\n\n          <div className={styles.footer}>\n            <Button\n              isPrimary\n              onClick={openConfirm}\n            >\n              {lang('Connect')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderWaitForConnection() {\n    return (\n      <>\n        <ModalHeader title={lang('Connect Dapp')} onClose={cancelDappConnectRequestConfirm} />\n        <div className={modalStyles.transitionContent}>\n          <div className={buildClassName(styles.dappInfoSkeleton, styles.dapp_first)}>\n            <div className={styles.dappInfoIconSkeleton} />\n            <div className={styles.dappInfoTextSkeleton}>\n              <div className={styles.nameSkeleton} />\n              <div className={styles.descSkeleton} />\n            </div>\n          </div>\n          <div className={styles.accountWrapperSkeleton}>\n            {shouldRenderAccounts && renderAccounts()}\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderDappInfoWithSkeleton() {\n    return (\n      <Transition name=\"semiFade\" activeKey={isLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n        {isLoading ? renderWaitForConnection() : renderDappInfo()}\n      </Transition>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case DappConnectState.Info:\n        return renderDappInfoWithSkeleton();\n      case DappConnectState.Password:\n        return (\n          <DappPassword\n            isActive={isActive}\n            error={error}\n            onSubmit={handlePasswordSubmit}\n            onCancel={handlePasswordCancel}\n            onClose={cancelDappConnectRequestConfirm}\n          />\n        );\n      case DappConnectState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isTonAppConnected={isTonAppConnected}\n            isLedgerConnected={isLedgerConnected}\n            onConnected={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n      case DappConnectState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            isActive={isActive}\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onTryAgain={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n    }\n  }\n\n  return (\n    <>\n      <Modal\n        isOpen={isOpen}\n        dialogClassName={styles.modalDialog}\n        nativeBottomSheetKey=\"dapp-connect\"\n        forceFullNative={renderingKey !== DappConnectState.Info}\n        onClose={cancelDappConnectRequestConfirm}\n        onCloseAnimationEnd={cancelDappConnectRequestConfirm}\n      >\n        <Transition\n          name={resolveSlideTransitionName()}\n          className={buildClassName(modalStyles.transition, 'custom-scroll')}\n          slideClassName={modalStyles.transitionSlide}\n          activeKey={renderingKey}\n          nextKey={nextKey}\n        >\n          {renderContent}\n        </Transition>\n      </Modal>\n      <Modal\n        isOpen={isConfirmOpen}\n        isCompact\n        title={lang('Dapp Permissions')}\n        onClose={closeConfirm}\n      >\n        <div className={styles.description}>\n          {lang('$dapp_can_view_balance', {\n            dappname: <strong>{name}</strong>,\n          })}\n        </div>\n        <div className={styles.buttons}>\n          <Button onClick={closeConfirm} className={styles.button}>{lang('Cancel')}</Button>\n          <Button isPrimary onClick={handleSubmit} className={styles.button}>{lang('Connect')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const hasConnectRequest = global.dappConnectRequest?.state !== undefined;\n\n  const {\n    state, dapp, error, accountId, permissions, proof,\n  } = global.dappConnectRequest || {};\n\n  const currentAccountId = accountId || global.currentAccountId!;\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    state,\n    hasConnectRequest,\n    dapp,\n    error,\n    requiredPermissions: permissions,\n    requiredProof: proof,\n    currentAccountId,\n    accounts,\n    hardwareState,\n    settingsByAccountId: global.settings.byAccountId,\n    isLedgerConnected,\n    isTonAppConnected,\n  };\n})(DappConnectModal));\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\nimport { type Account, TransferState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectCurrentToncoinBalance, selectNetworkAccounts } from '../../global/selectors';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport DappInfo from './DappInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentAccount?: Account;\n  toncoinBalance: bigint;\n  dapp?: ApiDapp;\n}\n\nfunction DappLedgerWarning({\n  currentAccount,\n  toncoinBalance,\n  dapp,\n}: StateProps) {\n  const { cancelDappTransfer, setDappTransferScreen } = getActions();\n\n  const lang = useLang();\n\n  const handleAgree = useLastCallback(() => {\n    setDappTransferScreen({ state: TransferState.Initial });\n  });\n\n  function renderDapp() {\n    return (\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionAccount}>\n          <div className={styles.accountTitle}>{currentAccount?.title}</div>\n          <div className={styles.accountBalance}>{formatCurrency(toDecimal(toncoinBalance), TONCOIN.symbol)}</div>\n        </div>\n\n        <DappInfo\n          iconUrl={dapp?.iconUrl}\n          name={dapp?.name}\n          url={dapp?.url}\n          className={styles.transactionDapp}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={modalStyles.transitionContent}>\n      {renderDapp()}\n\n      <div className={styles.descriptionContent}>\n        <span>{renderText(lang('$dapp_ledger_warning1'))}</span>\n        <span>{renderText(lang('$dapp_ledger_warning2'))}</span>\n      </div>\n\n      <div className={modalStyles.buttons}>\n        <Button className={modalStyles.button} onClick={cancelDappTransfer}>{lang('Cancel')}</Button>\n        <Button\n          isPrimary\n          isSubmit\n          className={modalStyles.button}\n          onClick={handleAgree}\n        >\n          {lang('Agree')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapp } = global.currentDappTransfer;\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    currentAccount: accounts?.[global.currentAccountId!],\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    dapp,\n  };\n})(DappLedgerWarning));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"DZJAgO1_\",\"icon\":\"DNxf1fb1\",\"interactive\":\"GU6t4snd\",\"rootStatic\":\"frL0b5SW\",\"thumbnail\":\"l7Jv2Ysl\",\"info\":\"cjX8maBi\",\"title\":\"nfp5rpIc\",\"description\":\"qBj00Hsz\"};","import React, { memo, type TeactNode, useMemo } from '../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../global';\n\nimport { MediaType, type NftTransfer } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerName, getExplorerNftUrl } from '../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './NftInfo.module.scss';\n\ninterface OwnProps {\n  nft?: NftTransfer;\n  isStatic?: boolean;\n  withTonExplorer?: boolean;\n  // Currently, MediaViewer can only display NFTs that are owned by the user\n  withMediaViewer?: boolean;\n}\n\nfunction NftInfo({\n  nft, isStatic, withTonExplorer, withMediaViewer,\n}: OwnProps) {\n  const { openMediaViewer } = getActions();\n  const lang = useLang();\n\n  const tonExplorerTitle = useMemo(() => {\n    return (lang('Open on %ton_explorer_name%', {\n      ton_explorer_name: getExplorerName('ton'),\n    }) as TeactNode[]\n    ).join('');\n  }, [lang]);\n\n  const handleClickInfo = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    const url = getExplorerNftUrl(nft!.address, getGlobal().settings.isTestnet)!;\n\n    void openUrl(url);\n  };\n\n  const handleClick = useLastCallback(() => {\n    openMediaViewer({ mediaId: nft!.address, mediaType: MediaType.Nft });\n  });\n\n  if (!nft) {\n    return (\n      <div className={buildClassName(styles.root, isStatic && styles.rootStatic)}>\n        <AnimatedIconWithPreview\n          play\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.thumbnail}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n\n        <div className={styles.info}>\n          <div className={styles.title}>NFT</div>\n          <div className={styles.description}>\n            {lang('Name and collection are not available. Please check back later.')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const name = nft.name || shortenAddress(nft.address);\n\n  function renderContent() {\n    return (\n      <>\n        <img src={nft!.thumbnail} alt={name} className={styles.thumbnail} />\n\n        <div className={styles.info}>\n          <div className={styles.title}>\n            {name}\n            {\n              withTonExplorer && (\n                <i\n                  className={buildClassName(styles.icon, 'icon-tonexplorer-small')}\n                  onClick={handleClickInfo}\n                  title={tonExplorerTitle}\n                  aria-label={tonExplorerTitle}\n                  role=\"button\"\n                  tabIndex={0}\n                />\n              )\n            }\n          </div>\n          <div className={styles.description}>{nft!.collectionName}</div>\n        </div>\n      </>\n    );\n  }\n\n  if (!withMediaViewer) {\n    return (\n      <div className={buildClassName(styles.root, isStatic && styles.rootStatic)}>\n        {renderContent()}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      aria-label={lang('NFT')}\n      className={buildClassName(styles.root, styles.interactive, isStatic && styles.rootStatic)}\n      onClick={handleClick}\n    >\n      {renderContent()}\n    </div>\n  );\n}\n\nexport default memo(NftInfo);\n","import { registerPlugin } from '@capacitor/core';\nconst Filesystem = registerPlugin('Filesystem', {\n    web: () => import('./web').then(m => new m.FilesystemWeb()),\n});\nexport * from './definitions';\nexport { Filesystem };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Share = registerPlugin('Share', {\n    web: () => import('./web').then(m => new m.ShareWeb()),\n});\nexport * from './definitions';\nexport { Share };\n//# sourceMappingURL=index.js.map","// The file is about sending data using the OS social sharing UI\n\nimport { Directory, Encoding, Filesystem } from '@capacitor/filesystem';\nimport type { ShareOptions } from '@capacitor/share';\nimport { Share } from '@capacitor/share';\nimport { getActions } from '../global';\n\nimport { IS_CAPACITOR } from '../config';\nimport { copyTextToClipboard } from './clipboard';\nimport { getTranslation } from './langProvider';\nimport { IS_IOS, IS_TOUCH_ENV } from './windowEnvironment';\n\nexport async function shareUrl(url: string, title?: string) {\n  const shareData = { url, title };\n\n  if (await tryCapacitorShare(shareData) || await tryNavigatorShare(shareData)) {\n    return;\n  }\n\n  await copyTextToClipboard(url);\n  getActions().showNotification({\n    message: getTranslation('Link was copied!'),\n    icon: 'icon-link',\n  });\n}\n\nexport async function shareFile(name: string, content: string, mimeType: string) {\n  if (IS_CAPACITOR) {\n    const fileLocation = {\n      path: name,\n      directory: Directory.Cache,\n    };\n    const file = await Filesystem.writeFile({\n      ...fileLocation,\n      data: content,\n      encoding: Encoding.UTF8,\n    });\n\n    try {\n      if (await tryCapacitorShare({ url: file.uri })) {\n        return;\n      }\n    } finally {\n      void Filesystem.deleteFile(fileLocation);\n    }\n  }\n\n  const file = new File([content], name, { type: mimeType });\n  if (await tryNavigatorShare({ files: [file] })) {\n    return;\n  }\n\n  const url = URL.createObjectURL(file);\n\n  try {\n    if (IS_IOS) {\n      window.open(url, '_blank', 'noreferrer');\n    } else {\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = name;\n      link.click();\n    }\n  } finally {\n    URL.revokeObjectURL(url);\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryCapacitorShare(data: ShareOptions) {\n  if (!IS_CAPACITOR) {\n    return false;\n  }\n\n  try {\n    await Share.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.message === 'Share canceled') {\n      return true;\n    }\n\n    // Sometimes on iOS a false \"Can't share while sharing is in progress\" error is thrown\n    if (error instanceof Error && error.message === 'Can\\'t share while sharing is in progress') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryNavigatorShare(data: ShareData) {\n  if (!IS_TOUCH_ENV || !navigator.share) {\n    return false;\n  }\n\n  try {\n    await navigator.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.name === 'AbortError') {\n      return true;\n    }\n\n    // Occurs when the sharing API is called not in response to a user gesture\n    if (error instanceof Error && error.name === 'NotAllowedError') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n","import { useCallback, useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\n\nconst DEFAULT_THRESHOLD = 350;\n\nfunction useLongPress({\n  onClick, onStart, onEnd, threshold = DEFAULT_THRESHOLD,\n}: {\n  onStart?: NoneToVoidFunction;\n  onClick?: (event: React.MouseEvent | React.TouchEvent) => void;\n  onEnd?: NoneToVoidFunction;\n  threshold?: number;\n}) {\n  const isLongPressActive = useRef(false);\n  const isPressed = useRef(false);\n  const timerId = useRef<number | undefined>(undefined);\n\n  const start = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    const canProcessEvent = ('button' in e && e.button === 0) || ('touches' in e && e.touches.length > 0);\n    if (isPressed.current || !canProcessEvent) {\n      return;\n    }\n\n    isPressed.current = true;\n    timerId.current = window.setTimeout(() => {\n      onStart?.();\n      isLongPressActive.current = true;\n    }, threshold);\n  }, [onStart, threshold]);\n\n  const cancel = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (!isPressed.current) return;\n\n    if (isLongPressActive.current) {\n      onEnd?.();\n    } else {\n      onClick?.(e);\n    }\n\n    isLongPressActive.current = false;\n    isPressed.current = false;\n    window.clearTimeout(timerId.current);\n  }, [onEnd, onClick]);\n\n  useEffectOnce(() => {\n    return () => {\n      window.clearTimeout(timerId.current);\n    };\n  });\n\n  return {\n    onMouseDown: start,\n    onMouseUp: cancel,\n    onMouseLeave: cancel,\n    onTouchStart: start,\n    onTouchEnd: cancel,\n    onTouchCancel: cancel,\n  };\n}\n\nexport default useLongPress;\n","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"r5lsJ1c8\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiChain } from '../../../api/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteSavedAddressModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  address?: string;\n  chain?: ApiChain;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DeleteSavedAddressModal({\n  isOpen, address, chain, onClose,\n}: OwnProps) {\n  const { removeFromSavedAddress, showNotification } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteSavedAddress = useLastCallback(() => {\n    removeFromSavedAddress({ address: address!, chain: chain! });\n    showNotification({ message: lang('Address removed from saved') as string, icon: 'icon-trash' });\n    onClose();\n  });\n\n  return (\n    <Modal\n      title={lang('Delete Saved Address')}\n      isCompact\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      <p className={styles.text}>{lang('Are you sure you want to remove this address from your saved ones?')}</p>\n\n      <p className={styles.text}>{lang('You will be able to save it again via Transaction Info with this address.')}</p>\n\n      <div className={modalStyles.buttons}>\n        <Button onClick={onClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteSavedAddress} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteSavedAddressModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"qrcsFk0p\",\"wrapperVisible\":\"XrMXGnXm\",\"wrapperHide\":\"mskAXXfF\",\"menuCustomBackdrop\":\"QI33ahag\",\"menuCustomBackdropVisible\":\"F30OarGl\",\"button\":\"tQGrt_Qw\",\"button_spoiler\":\"RpBIB1I4\",\"buttonSpoiler\":\"RpBIB1I4\",\"icon\":\"RdTchw5a\",\"iconCaretDown\":\"DdQbhVKr\",\"iconStar\":\"p87ao4no\",\"iconShare\":\"GuQHudIr\",\"nameInput\":\"lL2_LCB0\",\"shortAddress\":\"hofQbGX_\",\"scam\":\"nwdDECq8\",\"revealSpoiler\":\"W5z38O2d\",\"scamImage\":\"KBuV_80E\",\"chainIcon\":\"xEGdgotG\",\"meaningfulPart\":\"tKeqWu_9\",\"menuIcon\":\"iyUEV5xt\",\"dimmedPart\":\"NNrfqpvB\",\"menu\":\"E31wd_4J\",\"menuItem\":\"HbftB0iE\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { IAnchorPosition, SavedAddress } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport { selectCurrentAccountState, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { stopEvent } from '../../util/domEvents';\nimport { handleOpenUrl, openUrl } from '../../util/openUrl';\nimport { shareUrl } from '../../util/share';\nimport { MEANINGFUL_CHAR_LENGTH, shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerAddressUrl, getExplorerName, getHostnameFromUrl } from '../../util/url';\nimport { IS_IOS, IS_TOUCH_ENV, REM } from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLongPress from '../../hooks/useLongPress';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport Button from './Button';\nimport DropdownMenu from './DropdownMenu';\nimport Input from './Input';\nimport Modal from './Modal';\nimport Transition from './Transition';\n\nimport styles from './InteractiveTextField.module.scss';\nimport modalStyles from './Modal.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  chain?: ApiChain;\n  address?: string;\n  addressName?: string;\n  addressUrl?: string;\n  isScam?: boolean;\n  isTransaction?: boolean;\n  text?: string;\n  spoiler?: string;\n  spoilerRevealText?: string;\n  spoilerCallback?: NoneToVoidFunction;\n  copyNotification?: string;\n  className?: string;\n  textClassName?: string;\n  noDimming?: boolean;\n  noSavedAddress?: boolean;\n  noExplorer?: boolean;\n  withShareInMenu?: boolean;\n}\n\ninterface StateProps {\n  savedAddresses?: SavedAddress[];\n  isMultichainAccount?: boolean;\n  isTestnet?: boolean;\n}\n\ntype MenuHandler = 'copy' | 'share' | 'addressBook' | 'explorer';\n\nconst SAVED_ADDRESS_NAME_MAX_LENGTH = 255;\nconst MENU_VERTICAL_OFFSET_PX = -16;\nconst MENU_ITEM_HEIGHT_PX = 3 * REM;\nconst COMFORT_MARGIN_PX = REM;\n\nfunction InteractiveTextField({\n  chain,\n  address,\n  addressName,\n  addressUrl,\n  isScam,\n  isTransaction,\n  text = '',\n  spoiler,\n  spoilerRevealText,\n  spoilerCallback,\n  copyNotification,\n  noSavedAddress,\n  noExplorer,\n  className,\n  textClassName,\n  savedAddresses,\n  isTestnet,\n  isMultichainAccount,\n  noDimming,\n  withShareInMenu,\n}: OwnProps & StateProps) {\n  const { showNotification, addSavedAddress } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const addressNameRef = useRef<HTMLInputElement>(null);\n  const lang = useLang();\n  const [isSaveAddressModalOpen, openSaveAddressModal, closeSaveAddressModal] = useFlag();\n  const [isDeleteSavedAddressModalOpen, openDeletedSavedAddressModal, closeDeleteSavedAddressModal] = useFlag();\n  const [savedAddressName, setSavedAddressName] = useState<string | undefined>(addressName);\n  const [isConcealedWithSpoiler, , revealSpoiler] = useFlag(Boolean(spoiler));\n  const isAddressAlreadySaved = useMemo(() => {\n    return Boolean(address && chain && (savedAddresses || []).find((savedAddress) => {\n      return savedAddress.address === address && savedAddress.chain === chain;\n    }));\n  }, [address, chain, savedAddresses]);\n\n  addressUrl = addressUrl ?? (chain ? getExplorerAddressUrl(chain, address, isTestnet) : undefined);\n  const saveAddressTitle = lang(isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address');\n  const explorerTitle = lang('View on Explorer');\n  const withSavedAddresses = Boolean(!isScam && !noSavedAddress && address);\n  const withExplorer = Boolean(!noExplorer && addressUrl);\n\n  useEffect(() => {\n    if (isSaveAddressModalOpen) {\n      setSavedAddressName('');\n    }\n  }, [isSaveAddressModalOpen]);\n\n  const handleSaveAddressSubmit = useLastCallback(() => {\n    if (!savedAddressName || !address || !chain) {\n      return;\n    }\n\n    addSavedAddress({ address, chain, name: savedAddressName });\n    showNotification({ message: lang('Address was saved!'), icon: 'icon-star' });\n    closeSaveAddressModal();\n  });\n\n  useEffect(() => (\n    isSaveAddressModalOpen\n      ? captureKeyboardListeners({ onEnter: handleSaveAddressSubmit })\n      : undefined\n  ), [handleSaveAddressSubmit, isSaveAddressModalOpen]);\n\n  useFocusAfterAnimation(addressNameRef, !isSaveAddressModalOpen);\n\n  const handleCopy = useLastCallback(() => {\n    if (!copyNotification) return;\n    showNotification({ message: copyNotification, icon: 'icon-copy' });\n    void copyTextToClipboard(address || text);\n  });\n\n  const handleShare = useLastCallback(() => {\n    void shareUrl(addressUrl!, chain ? getExplorerName(chain) : undefined);\n  });\n\n  const handleTonExplorerOpen = useLastCallback(() => {\n    void openUrl(addressUrl!, { title: getExplorerName(chain!), subtitle: getHostnameFromUrl(addressUrl!) });\n  });\n\n  const {\n    isActionsMenuOpen,\n    anchorPosition,\n    menuPosition,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  } = useDropdownMenu({\n    copy: handleCopy,\n    share: handleShare,\n    addressBook: isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal,\n    explorer: handleTonExplorerOpen,\n  }, {\n    isAddressAlreadySaved,\n    isWalletAddress: Boolean(address && chain && noSavedAddress && !isTransaction),\n    isTransaction,\n    withSavedAddresses,\n    withExplorer,\n    withShare: withShareInMenu,\n  });\n\n  const shouldUseMenu = !spoiler && IS_TOUCH_ENV && menuItems.length > 1;\n\n  const menuBackdrop = useShowTransition(isActionsMenuOpen && shouldUseMenu);\n\n  const longPressHandlers = useLongPress({\n    onClick: handleMenuShow,\n    onStart: handleCopy,\n  });\n\n  const handleRevealSpoiler = useLastCallback(() => {\n    revealSpoiler();\n    spoilerCallback?.();\n  });\n\n  function renderContentOrSpoiler() {\n    const content = addressName || address || text;\n\n    if (!spoiler) {\n      return renderContent(content);\n    }\n\n    const isConcealed = isConcealedWithSpoiler || !content;\n    return (\n      <Transition activeKey={isConcealed ? 1 : 0} name=\"fade\" className={styles.commentContainer}>\n        {isConcealed ? (\n          <span className={buildClassName(styles.button, styles.button_spoiler, textClassName)}>\n            <i>{spoiler}</i>\n            <span\n              onClick={handleRevealSpoiler}\n              tabIndex={0}\n              role=\"button\"\n              className={styles.revealSpoiler}\n            >\n              {spoilerRevealText}\n            </span>\n          </span>\n        ) : renderContent(content)}\n      </Transition>\n    );\n  }\n\n  function renderContent(content: string) {\n    let renderedContent: string | TeactNode = content;\n    if (!noDimming && !isTransaction && content === address && content.length > MEANINGFUL_CHAR_LENGTH * 2) {\n      const prefix = content.substring(0, MEANINGFUL_CHAR_LENGTH);\n      const suffixStart = content.length - MEANINGFUL_CHAR_LENGTH;\n      const middle = content.substring(MEANINGFUL_CHAR_LENGTH, suffixStart);\n      const suffix = content.substring(suffixStart);\n\n      renderedContent = (\n        <>\n          <span className={styles.meaningfulPart}>{prefix}</span>\n          <span className={styles.dimmedPart}>{middle}</span>\n          <span className={styles.meaningfulPart}>{suffix}</span>\n        </>\n      );\n    } else if (!noDimming && isTransaction) {\n      renderedContent = <span className={styles.dimmedPart}>{content}</span>;\n    }\n\n    return (\n      <span\n        className={buildClassName(styles.button, isScam && styles.scam, textClassName)}\n        tabIndex={0}\n        role=\"button\"\n        title={!shouldUseMenu ? lang('Copy') : undefined}\n        onClick={!shouldUseMenu ? handleCopy : undefined}\n      >\n        {isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        {isMultichainAccount && !isTransaction && (\n          <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-label={chain} />\n        )}\n        {renderedContent}\n        {Boolean(addressName) && (\n          <span className={buildClassName(styles.shortAddress, isScam && styles.scam)}>{shortenAddress(address!)}</span>\n        )}\n        {Boolean(copyNotification) && !shouldUseMenu && (\n          <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n        )}\n      </span>\n    );\n  }\n\n  function renderActions() {\n    if (shouldUseMenu) {\n      const iconClassName = buildClassName(\n        styles.icon,\n        styles.iconCaretDown,\n        'icon-caret-down',\n        isScam && styles.scam,\n      );\n\n      return (\n        <>\n          <i className={iconClassName} aria-hidden />\n          <DropdownMenu\n            withPortal\n            shouldTranslateOptions\n            isOpen={isActionsMenuOpen}\n            items={menuItems}\n            menuPosition={menuPosition}\n            anchorPosition={anchorPosition}\n            bubbleClassName={styles.menu}\n            buttonClassName={styles.menuItem}\n            fontIconClassName={styles.menuIcon}\n            onSelect={handleMenuItemSelect}\n            onClose={closeActionsMenu}\n          />\n        </>\n      );\n    }\n\n    return (\n      <>\n        {withSavedAddresses && (\n          <span\n            className={styles.button}\n            title={saveAddressTitle}\n            aria-label={saveAddressTitle}\n            tabIndex={0}\n            role=\"button\"\n            onClick={isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal}\n          >\n            <i\n              className={buildClassName(\n                styles.icon,\n                styles.iconStar,\n                isAddressAlreadySaved ? 'icon-star-filled' : 'icon-star',\n              )}\n              aria-hidden\n            />\n          </span>\n        )}\n\n        {isTransaction && (\n          <span\n            className={styles.button}\n            title={lang('Share Link')}\n            aria-label={lang('Share Link')}\n            onClick={handleShare}\n          >\n            <i className={buildClassName(styles.icon, styles.iconShare, 'icon-link')} aria-hidden />\n          </span>\n        )}\n        {withExplorer && (\n          <a\n            href={addressUrl}\n            className={styles.button}\n            title={explorerTitle}\n            aria-label={explorerTitle}\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            onClick={handleOpenUrl}\n          >\n            <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n          </a>\n        )}\n      </>\n    );\n  }\n\n  function renderSaveAddressModal() {\n    return (\n      <Modal\n        title={lang('Save Address')}\n        isCompact\n        isOpen={isSaveAddressModalOpen}\n        onClose={closeSaveAddressModal}\n      >\n        <p>{lang('You can save this address for quick access while sending.')}</p>\n        <Input\n          ref={addressNameRef}\n          placeholder={lang('Name')}\n          onInput={setSavedAddressName}\n          value={savedAddressName}\n          maxLength={SAVED_ADDRESS_NAME_MAX_LENGTH}\n          className={styles.nameInput}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeSaveAddressModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n          <Button\n            onClick={handleSaveAddressSubmit}\n            isPrimary\n            isDisabled={!savedAddressName}\n            className={modalStyles.button}\n          >\n            {lang('Save')}\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      {menuBackdrop.shouldRender && (\n        <div className={buildClassName(\n          styles.menuCustomBackdrop,\n          menuBackdrop.hasOpenClass && styles.menuCustomBackdropVisible,\n        )} />\n      )}\n      <div\n        className={buildClassName(\n          styles.wrapper,\n          className,\n          menuBackdrop.shouldRender && styles.wrapperVisible,\n          menuBackdrop.shouldRender && !menuBackdrop.hasOpenClass && styles.wrapperHide,\n        )}\n        /* eslint-disable-next-line react/jsx-props-no-spreading */\n        {...(shouldUseMenu && !isActionsMenuOpen && {\n          ...longPressHandlers,\n          tabIndex: 0,\n          role: 'button',\n        })}\n        onContextMenu={shouldUseMenu ? stopEvent : undefined}\n      >\n        {renderContentOrSpoiler()}\n        {renderActions()}\n      </div>\n\n      {address && (\n        <>\n          {renderSaveAddressModal()}\n          <DeleteSavedAddressModal\n            isOpen={isDeleteSavedAddressModalOpen}\n            address={address}\n            chain={chain}\n            onClose={closeDeleteSavedAddressModal}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n\n    return {\n      savedAddresses: accountState?.savedAddresses,\n      isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n      isTestnet: global.settings.isTestnet,\n    };\n  },\n)(InteractiveTextField));\n\nfunction useDropdownMenu(\n  menuHandlers: Record<MenuHandler, NoneToVoidFunction>,\n  options: {\n    withSavedAddresses?: boolean;\n    withExplorer?: boolean;\n    isAddressAlreadySaved?: boolean;\n    isWalletAddress?: boolean;\n    isTransaction?: boolean;\n    withShare?: boolean;\n  },\n) {\n  const [menuPosition, setMenuPosition] = useState<'top' | 'bottom'>('top');\n  const [anchorPosition, setAnchorPosition] = useState<IAnchorPosition | undefined>();\n  const closeActionsMenu = useLastCallback(() => setAnchorPosition(undefined));\n  const isActionsMenuOpen = Boolean(anchorPosition);\n\n  const menuItems = useMemo<DropdownItem[]>(() => {\n    const {\n      isAddressAlreadySaved, isWalletAddress, isTransaction, withSavedAddresses, withExplorer, withShare,\n    } = options;\n\n    const items: DropdownItem[] = [{\n      name: withSavedAddresses || isWalletAddress\n        ? 'Copy Address'\n        : (isTransaction ? 'Copy Transaction ID' : 'Copy'),\n      fontIcon: 'copy',\n      withSeparator: true,\n      value: 'copy',\n    }];\n\n    if (withSavedAddresses) {\n      items.push({\n        name: isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address',\n        fontIcon: isAddressAlreadySaved ? 'star-filled' : 'star',\n        withSeparator: true,\n        value: 'addressBook',\n      });\n    }\n\n    if (isTransaction || withShare) {\n      items.push({\n        name: 'Share Link',\n        fontIcon: IS_IOS ? 'share-ios' : 'share-android',\n        withSeparator: true,\n        value: 'share',\n      });\n    }\n\n    if (withExplorer) {\n      items.push({\n        name: 'View on Explorer',\n        fontIcon: 'tonexplorer',\n        withSeparator: true,\n        value: 'explorer',\n      });\n    }\n\n    return items;\n  }, [options]);\n\n  const handleMenuItemSelect = useLastCallback((value: string) => {\n    menuHandlers[value as MenuHandler]?.();\n    closeActionsMenu();\n  });\n\n  const handleMenuShow = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    stopEvent(e);\n\n    let x: number;\n    if (e.type.startsWith('touch')) {\n      const { changedTouches, touches } = (e as React.TouchEvent);\n      if (touches.length > 0) {\n        x = touches[0].clientX;\n      } else {\n        x = changedTouches[0].clientX;\n      }\n    } else {\n      x = (e as React.MouseEvent).clientX;\n    }\n    const { top, bottom } = e.currentTarget.getBoundingClientRect();\n    const menuHeight = menuItems.length * MENU_ITEM_HEIGHT_PX;\n    const screenHeight = windowSize.get().height;\n    if (bottom + menuHeight + MENU_VERTICAL_OFFSET_PX + COMFORT_MARGIN_PX >= screenHeight) {\n      setMenuPosition('bottom');\n      setAnchorPosition({ x, y: top });\n    } else {\n      setMenuPosition('top');\n      setAnchorPosition({ x, y: bottom + MENU_VERTICAL_OFFSET_PX });\n    }\n  });\n\n  return {\n    isActionsMenuOpen,\n    anchorPosition,\n    menuPosition,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  };\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../api/types';\n\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\n\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = {\n  label: TeactNode;\n  amountsBySlug: Record<string, bigint>;\n  nftCount?: number;\n};\n\ntype StateProps = {\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  baseCurrency?: ApiBaseCurrency;\n};\n\nfunction DappAmountField({\n  label,\n  amountsBySlug,\n  nftCount,\n  tokensBySlug,\n  baseCurrency,\n}: OwnProps & StateProps) {\n  const amountTerms: TeactNode[] = [];\n\n  if (nftCount) {\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {`${nftCount} NFT${nftCount > 1 ? 's' : ''}`}\n      </span>,\n    );\n  }\n\n  for (const [tokenSlug, amount] of Object.entries(amountsBySlug)) {\n    if (amountTerms.length) {\n      amountTerms.push(' + ');\n    }\n\n    const token = tokensBySlug[tokenSlug];\n\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {formatCurrency(toDecimal(amount, token?.decimals ?? 0), token?.symbol ?? '')}\n      </span>,\n    );\n  }\n\n  if (Object.keys(amountsBySlug).length > 0) {\n    const totalCost = getTotalCost(amountsBySlug, tokensBySlug);\n    amountTerms.push(` (${formatCurrency(totalCost, getShortCurrencySymbol(baseCurrency))})`);\n  }\n\n  return (\n    <>\n      <span className={styles.label}>\n        {label}\n      </span>\n      <div className={styles.payloadField}>\n        {amountTerms}\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    tokensBySlug: global.tokenInfo.bySlug,\n    baseCurrency: global.settings.baseCurrency,\n  };\n})(DappAmountField));\n\nfunction getTotalCost(amountsBySlug: Record<string, bigint>, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  return Object.entries(amountsBySlug).reduce((sum, [tokenSlug, amount]) => {\n    const token = tokensBySlug[tokenSlug];\n    if (!token) {\n      return sum;\n    }\n    return sum + toBig(amount, token.decimals).toNumber() * token.quote.price;\n  }, 0);\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiToken } from '../../api/types';\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\n\nimport { STARS_SYMBOL, TONCOIN, TRX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport styles from './Fee.module.scss';\n\nconst TERM_SEPARATOR = ' + ';\nconst PRECISION_PREFIX: Record<FeePrecision, string> = {\n  exact: '',\n  approximate: '~\\u202F',\n  lessThan: '<\\u202F',\n};\nconst STARS_TOKEN: FeeToken = {\n  slug: '__stars__',\n  symbol: STARS_SYMBOL,\n  decimals: 0,\n};\nconst UNKNOWN_TOKEN: FeeToken = {\n  slug: '__unknown__',\n  symbol: '',\n  decimals: 0,\n};\nconst TOKEN_ICONS: Record<string, string | undefined> = {\n  [TONCOIN.slug]: 'icon-chain-ton',\n  [TRX.slug]: 'icon-chain-tron',\n};\n\nexport type FeeToken = Pick<ApiToken, 'slug' | 'symbol' | 'decimals'>;\n\ntype FeeListTerm = {\n  tokenType: keyof FeeTerms;\n  amount: FeeValue;\n};\n\nexport type OwnProps = {\n  terms: FeeTerms;\n  /** The token acting as the transferred token in the `terms` object */\n  token: FeeToken;\n  /** Affects the sign indicating the fee precision and standing before the terms. */\n  precision: FeePrecision;\n  shouldPreferIcons?: boolean;\n  termClassName?: string;\n  symbolClassName?: string;\n};\n\n/**\n * Formats a complex fee (containing multiple terms) into a human-readable span\n */\nfunction Fee({\n  terms,\n  token,\n  precision,\n  shouldPreferIcons,\n  termClassName,\n  symbolClassName,\n}: OwnProps) {\n  const nativeToken = findChainConfig(getChainBySlug(token.slug))?.nativeToken ?? UNKNOWN_TOKEN;\n  const content: TeactNode[] = [PRECISION_PREFIX[precision]];\n\n  convertTermsObjectToList(terms).forEach(({ tokenType, amount }, index) => {\n    if (index > 0) {\n      content.push(TERM_SEPARATOR);\n    }\n\n    const currentToken = tokenType === 'stars' ? STARS_TOKEN : tokenType === 'native' ? nativeToken : token;\n    const icon = shouldPreferIcons ? TOKEN_ICONS[currentToken.slug] : undefined;\n\n    if (typeof amount === 'bigint') {\n      amount = toDecimal(amount, currentToken.decimals);\n    }\n\n    let symbolNode = icon\n      ? <i className={buildClassName(icon, styles.tokenIcon)} aria-label={currentToken.symbol} />\n      : currentToken.symbol;\n    if (symbolClassName) {\n      symbolNode = <span className={symbolClassName}>{symbolNode}</span>;\n    }\n\n    content.push(\n      <span className={buildClassName(styles.term, termClassName)}>\n        {formatCurrency(amount, '', undefined, true)}\n        {symbolNode}\n      </span>,\n    );\n  });\n\n  return content;\n}\n\nexport default memo(Fee);\n\nfunction convertTermsObjectToList(terms: FeeTerms) {\n  const termList: FeeListTerm[] = [];\n  let firstDefinedTerm: FeeListTerm | undefined;\n\n  for (const [tokenType, amount] of Object.entries(terms) as [keyof FeeTerms, bigint | undefined][]) {\n    if (amount === undefined) {\n      continue;\n    }\n\n    const term = { tokenType, amount };\n    firstDefinedTerm ||= term;\n\n    if (Number(amount)) {\n      termList.push(term);\n    }\n  }\n\n  // Keeping at least 1 term for better UX\n  if (termList.length === 0) {\n    termList.push(firstDefinedTerm ?? { tokenType: 'native', amount: 0 });\n  }\n\n  return termList;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"term\":\"KQKXQCYl\",\"tokenIcon\":\"hrsxYQfo\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ejEBAbV8\",\"chartLabels\":\"SpaIcYmy\",\"chartLabel\":\"Ehn5yB9o\",\"realFee\":\"ZXtTwJ2M\",\"excessFee\":\"wvOK88A2\",\"chartLines\":\"f8dLAhsP\",\"chartLine\":\"ow57IO0l\",\"explanation\":\"Tbn84o8Q\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\nimport type { FeeToken } from '../ui/Fee';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { getChainConfig } from '../../util/chain';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './FeeDetailsModal.module.scss';\n\ntype OwnProps = {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  fullFee: FeeTerms | undefined;\n  realFee: FeeTerms | undefined;\n  realFeePrecision: FeePrecision | undefined;\n  /** The excess fee is always measured in the native token */\n  excessFee: FeeValue | undefined;\n  excessFeePrecision: FeePrecision | undefined;\n  /** The token denoting the `token` fields of the `FeeTerms` objects. */\n  token: FeeToken | undefined;\n  title?: TeactNode;\n  extraContent?: TeactNode;\n};\n\nfunction FeeDetailsModal({ isOpen, onClose, title, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      isCompact\n      title={title ?? lang('Blockchain Fee Details')}\n      contentClassName={styles.content}\n    >\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      <FeeDetailsContent onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nexport default memo(FeeDetailsModal);\n\nfunction FeeDetailsContent({\n  onClose,\n  fullFee,\n  realFee,\n  realFeePrecision = 'exact',\n  excessFee,\n  excessFeePrecision = 'exact',\n  token,\n  extraContent,\n}: Omit<OwnProps, 'isOpen' | 'title'>) {\n  const chain = token && getChainBySlug(token.slug);\n  const nativeToken = chain && getChainConfig(chain).nativeToken;\n  const lang = useLang();\n\n  return (\n    <>\n      <div>\n        <div className={styles.chartLabels}>\n          <div className={buildClassName(styles.chartLabel, styles.realFee)}>\n            {lang('Final Fee')}\n          </div>\n          <div className={buildClassName(styles.chartLabel, styles.excessFee)}>\n            {lang('Excess')}\n          </div>\n        </div>\n        <div className={styles.chartLines}>\n          <div className={buildClassName(styles.chartLine, styles.realFee)}>\n            {realFee && token && (\n              <Fee\n                terms={realFee}\n                precision={realFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n          <div className={buildClassName(styles.chartLine, styles.excessFee)}>\n            {excessFee !== undefined && token && (\n              <Fee\n                terms={{ native: excessFee }}\n                precision={excessFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n        </div>\n      </div>\n      <div className={styles.explanation}>\n        <div>\n          {renderText(lang('$fee_details', {\n            full_fee: fullFee && token && <b><Fee terms={fullFee} precision=\"exact\" token={token} /></b>,\n            excess_symbol: <b>{nativeToken?.symbol}</b>,\n            chain_name: chain?.toUpperCase(),\n          }))}\n        </div>\n        {extraContent}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button isPrimary className={modalStyles.button} onClick={onClose}>\n          {lang('Got It')}\n        </Button>\n      </div>\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"fJgsdA7d\",\"static\":\"swvIvbGd\",\"details\":\"K7iB61lh\",\"detailsIcon\":\"WDhuwtt6\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { OwnProps as FeeProps } from './Fee';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Fee from './Fee';\nimport Transition from './Transition';\n\nimport styles from './FeeLine.module.scss';\n\n/**\n * The component will be rendered empty unless all the required options from `FeeProps` are provided.\n * After that it will fade in.\n */\ntype OwnProps = Partial<Pick<FeeProps, 'terms' | 'token'>> & Pick<FeeProps, 'precision'> & {\n  className?: string;\n  /** Whether the component is rendered on a landscape layout (with a lighter background) */\n  isStatic?: boolean;\n  /** If true, the \"Details\" button will be shown even when no fee can be displayed. */\n  keepDetailsButtonWithoutFee?: boolean;\n  /** If undefined, the details button is not shown */\n  onDetailsClick?(): void;\n};\n\nfunction FeeLine({\n  className,\n  isStatic,\n  terms,\n  token,\n  precision,\n  keepDetailsButtonWithoutFee,\n  onDetailsClick,\n}: OwnProps) {\n  const lang = useLang();\n  let content: TeactNode | undefined;\n\n  if (terms && token) {\n    const langKey = precision === 'exact' ? '$fee_value_with_colon' : '$fee_value';\n    content = lang(langKey, {\n      fee: <Fee terms={terms} token={token} precision={precision} />,\n    });\n  }\n\n  return (\n    <FeeLineContainer\n      className={className}\n      isStatic={isStatic}\n      onDetailsClick={content || keepDetailsButtonWithoutFee ? onDetailsClick : undefined}\n      transitionKey={content ? 1 : 0}\n    >\n      {content}\n    </FeeLineContainer>\n  );\n}\n\nexport default memo(FeeLine);\n\ntype ContainerProps = Pick<OwnProps, 'className' | 'isStatic' | 'onDetailsClick'> & {\n  children?: TeactNode;\n  transitionKey?: number;\n};\n\n/**\n * Use this component when you want to show a content that looks like `FeeLine`, but is not `FeeLine`.\n */\nexport function FeeLineContainer({\n  className,\n  isStatic,\n  onDetailsClick,\n  children,\n  transitionKey = 0,\n}: ContainerProps) {\n  const lang = useLang();\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={transitionKey + (onDetailsClick ? 0x10000 : 0)}\n      className={buildClassName(styles.container, className, isStatic && styles.static)}\n    >\n      {children}\n      {Boolean(children) && onDetailsClick && '  '}\n      {onDetailsClick && (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.details}\n          onClick={() => onDetailsClick()}\n        >\n          {lang('Details')}\n          <i className={buildClassName('icon-chevron-right', styles.detailsIcon)} aria-hidden />\n        </span>\n      )}\n    </Transition>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  /** In TON */\n  fullFee: bigint;\n  /** In TON */\n  received: bigint;\n};\n\nfunction DappReturnedDetailsModal({ isOpen, onClose, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      isCompact\n      title={lang('Dapp Fee Details')}\n      contentClassName={styles.detailsModalContent}\n    >\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      <FeeDetailsContent onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nexport default memo(DappReturnedDetailsModal);\n\nfunction FeeDetailsContent({ onClose, fullFee, received }: Omit<OwnProps, 'isOpen'>) {\n  const lang = useLang();\n\n  return (\n    <>\n      <div className={styles.detailsModalExplanation}>\n        <div>\n          {renderText(lang('$dapp_return_details', {\n            fee_amount: <b>{formatCurrency(toDecimal(fullFee, TONCOIN.decimals), TONCOIN.symbol, undefined, true)}</b>,\n            // Rounding down to make the actual result better than we predict\n            received_amount: <b>{'~'}{formatCurrency(toDecimal(received, TONCOIN.decimals), TONCOIN.symbol)}</b>,\n          }))}\n        </div>\n        <div className={styles.warningForPayload}>\n          {lang('$dapp_return_disclaimer')}\n        </div>\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button isPrimary className={modalStyles.button} onClick={onClose}>\n          {lang('Got It')}\n        </Button>\n      </div>\n    </>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport FeeLine, { FeeLineContainer } from '../ui/FeeLine';\nimport DappReturnedDetailsModal from './DappReturnedDetailsModal';\n\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = Pick<ApiDappTransfer, 'fullFee' | 'received'>;\n\nfunction DappTransferFee({\n  fullFee, received,\n}: OwnProps) {\n  const lang = useLang();\n  const [isDetailsModalOpen, openDetailsModal, closeDetailsModal] = useFlag();\n\n  if (received === 0n) {\n    return (\n      <FeeLine\n        terms={{ native: fullFee }}\n        token={TONCOIN}\n        precision=\"exact\"\n        className={styles.fee}\n      />\n    );\n  }\n\n  if (fullFee >= received) {\n    const realFee = fullFee - received;\n    const realFeePrecision = 'approximate';\n    return (\n      <>\n        <FeeLine\n          terms={{ native: realFee }}\n          token={TONCOIN}\n          precision=\"approximate\"\n          onDetailsClick={openDetailsModal}\n          className={styles.fee}\n        />\n        <FeeDetailsModal\n          isOpen={isDetailsModalOpen}\n          onClose={closeDetailsModal}\n          fullFee={{ native: fullFee }}\n          realFee={{ native: realFee }}\n          realFeePrecision={realFeePrecision}\n          excessFee={received}\n          excessFeePrecision=\"approximate\"\n          token={TONCOIN}\n          title={lang('Dapp Fee Details')}\n          extraContent={<div className={styles.explanationWarning}>{lang('$dapp_return_disclaimer')}</div>}\n        />\n      </>\n    );\n  }\n\n  const realReceived = received - fullFee;\n  return (\n    <>\n      <FeeLineContainer className={styles.fee} onDetailsClick={openDetailsModal}>\n        {lang('$returned_value', {\n          // Rounding down to make the actual result better than we predict\n          value: formatCurrency(toDecimal(realReceived, TONCOIN.decimals), TONCOIN.symbol),\n        })}\n      </FeeLineContainer>\n      <DappReturnedDetailsModal\n        isOpen={isDetailsModalOpen}\n        onClose={closeDetailsModal}\n        fullFee={fullFee}\n        received={received}\n      />\n    </>\n  );\n}\n\nexport default memo(DappTransferFee);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer, ApiToken } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { BIGINT_PREFIX } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\nimport { DEFAULT_DECIMALS } from '../../api/chains/ton/constants';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport NftInfo from '../transfer/NftInfo';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport DappAmountField from './DappAmountField';\nimport DappTransferFee from './DappTransferFee';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  transaction: ApiDappTransfer;\n  tokensBySlug: Record<string, ApiToken>;\n}\n\nconst FRACTION_DIGITS = 2;\n\nfunction DappTransfer({ transaction, tokensBySlug }: OwnProps) {\n  const lang = useLang();\n  const [isPayloadExpanded, expandPayload] = useFlag(false);\n\n  function renderAmount() {\n    if (isNftTransferPayload(transaction.payload)) {\n      if (transaction.displayedAmount === 0n) {\n        return undefined;\n      }\n\n      return (\n        <DappAmountField\n          label={lang('Additional Amount Sent')}\n          amountsBySlug={{ [TONCOIN.slug]: transaction.displayedAmount }}\n        />\n      );\n    }\n\n    const amountBySlug: Record<string, bigint> = {};\n\n    if (isTokenTransferPayload(transaction.payload)) {\n      amountBySlug[transaction.payload.slug] = transaction.payload.amount;\n    }\n    amountBySlug[TONCOIN.slug] = transaction.displayedAmount;\n\n    if (amountBySlug[TONCOIN.slug] === 0n && Object.keys(amountBySlug).length > 1) {\n      delete amountBySlug[TONCOIN.slug];\n    }\n\n    return <DappAmountField label={lang('Amount')} amountsBySlug={amountBySlug} />;\n  }\n\n  function renderPayload() {\n    const { payload, rawPayload } = transaction;\n\n    if (!payload || isNftTransferPayload(payload) || isTokenTransferPayload(payload)) {\n      return undefined;\n    }\n\n    switch (payload.type) {\n      case 'comment':\n        return payload.comment;\n\n      case 'tokens:burn': {\n        const { slug: tokenSlug, amount } = payload;\n        const token = tokensBySlug[tokenSlug];\n        const decimals = token?.decimals ?? DEFAULT_DECIMALS;\n        const symbol = token?.symbol ?? '';\n\n        return lang('$dapp_transfer_tokens_burn', {\n          amount: formatCurrency(toDecimal(amount, decimals), symbol, FRACTION_DIGITS),\n        });\n      }\n\n      case 'dns:change-record': {\n        const { record } = payload;\n        const category = record.type !== 'unknown' ? record.type : record.key;\n\n        if (record.type === 'wallet' && record.value) {\n          return lang('$dapp_dns_set_wallet_payload', {\n            address: record.value,\n          });\n        } else if (record.type === 'wallet' && !record.value) {\n          return lang('$dapp_dns_delete_wallet_payload');\n        } else if (record.value) {\n          return lang('$dapp_dns_change_record_payload', {\n            category,\n            value: record.value,\n          });\n        } else {\n          return lang('$dapp_dns_delete_record_payload', {\n            category,\n          });\n        }\n      }\n\n      case 'token-bridge:pay-swap': {\n        return lang('$dapp_token_bridge_pay_swap_payload', {\n          swapId: payload.swapId,\n        });\n      }\n\n      case 'liquid-staking:deposit': {\n        return lang('$dapp_liquid_staking_deposit_payload');\n      }\n\n      case 'liquid-staking:vote': {\n        return lang('$dapp_liquid_staking_vote_payload', {\n          votingAddress: payload.votingAddress,\n          vote: payload.vote,\n        });\n      }\n\n      case 'single-nominator:change-validator': {\n        return lang('$dapp_single_nominator_change_validator_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'single-nominator:withdraw': {\n        return lang('$dapp_single_nominator_withdraw_payload', {\n          amount: toDecimal(payload.amount),\n        });\n      }\n\n      case 'vesting:add-whitelist': {\n        return lang('$dapp_vesting_add_whitelist_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'unknown': {\n        return rawPayload;\n      }\n\n      default:\n        return JSON.stringify(payload, undefined, 2)\n          .replace(`/\"${BIGINT_PREFIX}/g`, '\"');\n    }\n  }\n\n  function renderPayloadLabel() {\n    switch (transaction.payload?.type) {\n      case 'comment':\n        return lang('Comment');\n      case 'unknown':\n        return lang('Payload');\n      default:\n        return lang('Nested Transaction');\n    }\n  }\n\n  const payloadElement = renderPayload();\n\n  return (\n    <>\n      {isNftTransferPayload(transaction.payload) && <NftInfo nft={transaction.payload.nft} />}\n      <p className={styles.label}>{lang('Receiving Address')}</p>\n      <InteractiveTextField\n        chain={TONCOIN.chain}\n        address={transaction.displayedToAddress}\n        isScam={transaction.isScam}\n        className={buildClassName(styles.dataField, styles.receivingAddress)}\n        copyNotification={lang('Address was copied!')}\n      />\n      {renderAmount()}\n\n      {payloadElement && (\n        <>\n          <p className={styles.label}>{renderPayloadLabel()}</p>\n          <div className={buildClassName(styles.payloadField, isPayloadExpanded && styles.payloadField_expanded)}>\n            {payloadElement}\n            {!isPayloadExpanded && (\n              <div className={styles.payloadFieldExpand} onClick={expandPayload}>\n                {lang('View')}\n              </div>\n            )}\n          </div>\n          {transaction.isDangerous && (\n            <div className={styles.warningForPayload}>{lang('$hardware_payload_warning')}</div>\n          )}\n        </>\n      )}\n\n      <DappTransferFee fullFee={transaction.fullFee} received={transaction.received} />\n    </>\n  );\n}\n\nexport default memo(DappTransfer);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiDapp, ApiDappTransfer, ApiTokenWithPrice } from '../../api/types';\nimport type { Account } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport {\n  selectCurrentDappTransferTotals,\n  selectCurrentToncoinBalance,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport DappAmountField from './DappAmountField';\nimport DappInfo from './DappInfo';\nimport DappTransfer from './DappTransfer';\nimport DappTransferFee from './DappTransferFee';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  currentAccount?: Account;\n  toncoinBalance: bigint;\n  transactions?: ApiDappTransfer[];\n  totalAmountsBySlug: Record<string, bigint>;\n  totalFullFee: bigint;\n  totalReceived: bigint;\n  isScam: boolean;\n  isDangerous: boolean;\n  nftCount: number;\n  dapp?: ApiDapp;\n  isLoading?: boolean;\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n}\n\ninterface SortedDappTransfer extends ApiDappTransfer {\n  index: number;\n  sortingCost: number;\n}\n\nconst NFT_FAKE_COST_USD = 1_000_000_000;\n\nfunction DappTransferInitial({\n  currentAccount,\n  toncoinBalance,\n  transactions,\n  totalAmountsBySlug,\n  totalFullFee,\n  totalReceived,\n  isScam,\n  isDangerous,\n  nftCount,\n  dapp,\n  isLoading,\n  tokensBySlug,\n  onClose,\n}: OwnProps & StateProps) {\n  const { showDappTransfer, submitDappTransferConfirm } = getActions();\n\n  const lang = useLang();\n  const isSingleTransaction = transactions?.length === 1;\n  const renderingTransactions = useCurrentOrPrev(transactions, true);\n  const sortedTransactions = useMemo(\n    () => sortTransactions(renderingTransactions, tokensBySlug),\n    [renderingTransactions, tokensBySlug],\n  );\n\n  function renderDapp() {\n    return (\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionAccount}>\n          <div className={styles.accountTitle}>{currentAccount?.title}</div>\n          <div className={styles.accountBalance}>{formatCurrency(toDecimal(toncoinBalance), TONCOIN.symbol)}</div>\n        </div>\n\n        <DappInfo\n          iconUrl={dapp?.iconUrl}\n          name={dapp?.name}\n          url={dapp?.url}\n          className={styles.transactionDapp}\n        />\n      </div>\n    );\n  }\n\n  function renderTransaction() {\n    return (\n      <DappTransfer\n        transaction={renderingTransactions![0]}\n        tokensBySlug={tokensBySlug}\n      />\n    );\n  }\n\n  function renderTransactionRow(transaction: SortedDappTransfer) {\n    const { payload } = transaction;\n\n    let amountText = '';\n    if (isNftTransferPayload(payload)) {\n      amountText = '1 NFT';\n    } else if (isTokenTransferPayload(payload)) {\n      const { slug: tokenSlug, amount } = payload;\n      const token = tokensBySlug[tokenSlug];\n      if (token) {\n        const { decimals, symbol } = token;\n        amountText = formatCurrency(toDecimal(amount, decimals), symbol);\n      }\n    }\n    if (!amountText || transaction.displayedAmount) {\n      if (amountText) amountText += ' + ';\n      amountText += formatCurrency(toDecimal(transaction.displayedAmount), TONCOIN.symbol);\n    }\n\n    return (\n      <div\n        key={transaction.index}\n        className={styles.transactionRow}\n        onClick={() => showDappTransfer({ transactionIdx: transaction.index })}\n      >\n        {transaction.isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        <span className={buildClassName(styles.transactionRowAmount, transaction.isScam && styles.scam)}>\n          {amountText}\n        </span>\n        {' '}\n        <span className={buildClassName(styles.transactionRowAddress, transaction.isScam && styles.scam)}>\n          {lang('$transaction_to', {\n            address: shortenAddress(transaction.displayedToAddress),\n          })}\n        </span>\n        <i className={buildClassName(styles.transactionRowChevron, 'icon-chevron-right')} aria-hidden />\n      </div>\n    );\n  }\n\n  function renderTransactions() {\n    const hasAmount = nftCount > 0 || Object.keys(totalAmountsBySlug).length > 0;\n\n    return (\n      <>\n        <p className={styles.label}>{lang('$many_transactions', renderingTransactions?.length, 'i')}</p>\n        <div className={styles.transactionList}>\n          {sortedTransactions?.map(renderTransactionRow)}\n        </div>\n        {hasAmount && (\n          <DappAmountField label={lang('Total Amount')} amountsBySlug={totalAmountsBySlug} nftCount={nftCount} />\n        )}\n        {isDangerous && (\n          <div className={styles.warningForPayload}>{lang('$hardware_payload_warning')}</div>\n        )}\n        <DappTransferFee fullFee={totalFullFee} received={totalReceived} />\n      </>\n    );\n  }\n\n  if (!renderingTransactions) {\n    return undefined;\n  }\n\n  return (\n    <div className={modalStyles.transitionContent}>\n      {renderDapp()}\n      {isSingleTransaction ? renderTransaction() : renderTransactions()}\n\n      <div className={buildClassName(modalStyles.buttons, styles.buttonsAfterFee)}>\n        <Button className={modalStyles.button} onClick={onClose}>{lang('Cancel')}</Button>\n        <Button\n          isPrimary\n          isSubmit\n          isLoading={isLoading}\n          isDisabled={isScam}\n          className={modalStyles.button}\n          onClick={!isScam ? submitDappTransferConfirm : undefined}\n        >\n          {lang('Send')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isLoading, dapp, transactions } = global.currentDappTransfer;\n\n  const accounts = selectNetworkAccounts(global);\n  const {\n    amountsBySlug: totalAmountsBySlug,\n    isScam,\n    isDangerous,\n    fullFee: totalFullFee,\n    received: totalReceived,\n    nftCount,\n  } = selectCurrentDappTransferTotals(global);\n\n  return {\n    currentAccount: accounts?.[global.currentAccountId!],\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    transactions,\n    totalAmountsBySlug,\n    totalFullFee,\n    totalReceived,\n    isScam,\n    isDangerous,\n    nftCount,\n    dapp,\n    isLoading,\n    tokensBySlug: global.tokenInfo.bySlug,\n  };\n})(DappTransferInitial));\n\nfunction sortTransactions(\n  transactions: readonly ApiDappTransfer[] | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice>,\n) {\n  if (!transactions) {\n    return transactions;\n  }\n\n  return transactions\n    .map((transaction, index): SortedDappTransfer => ({\n      ...transaction,\n      index,\n      sortingCost: getTransactionCostForSorting(transaction, tokensBySlug),\n    }))\n    .sort((transaction0, transaction1) => transaction1.sortingCost - transaction0.sortingCost);\n}\n\nfunction getTransactionCostForSorting(transaction: ApiDappTransfer, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  const tonAmount = toBig(transaction.displayedAmount + transaction.fullFee, TONCOIN.decimals).toNumber();\n  let cost = tokensBySlug[TONCOIN.slug].quote.priceUsd * tonAmount;\n\n  if (isTokenTransferPayload(transaction.payload)) {\n    const { amount, slug } = transaction.payload;\n    const token = tokensBySlug[slug];\n    if (token) {\n      cost += token.quote.priceUsd * toBig(amount, token.decimals).toNumber();\n    }\n  } else if (isNftTransferPayload(transaction.payload)) {\n    // Simple way to display NFT at top of list\n    cost += NFT_FAKE_COST_USD;\n  }\n\n  return cost;\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiToken } from '../../api/types';\nimport type { GlobalState, HardwareConnectState } from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { selectCurrentDappTransferTotals } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { isNftTransferPayload } from '../../util/ton/transfer';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport DappLedgerWarning from './DappLedgerWarning';\nimport DappTransfer from './DappTransfer';\nimport DappTransferInitial from './DappTransferInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentDappTransfer: GlobalState['currentDappTransfer'];\n  tokensBySlug: Record<string, ApiToken>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isMediaViewerOpen?: boolean;\n  isDangerous: boolean;\n}\n\nconst MAX_TRANSACTIONS_IN_SMALL_MODAL = 4;\n\nfunction DappTransferModal({\n  currentDappTransfer: {\n    dapp,\n    isLoading,\n    viewTransactionOnIdx,\n    state,\n    transactions,\n    error,\n  },\n  tokensBySlug,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isMediaViewerOpen,\n  isDangerous: withPayloadWarning,\n}: StateProps) {\n  const {\n    setDappTransferScreen,\n    clearDappTransferError,\n    submitDappTransferPassword,\n    submitDappTransferHardware,\n    closeDappTransfer,\n    cancelDappTransfer,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== TransferState.None;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const renderingTransactions = useCurrentOrPrev(transactions, true);\n  const isDappLoading = dapp === undefined;\n  const needsExtraHeight = withPayloadWarning || (transactions?.length ?? 0) > MAX_TRANSACTIONS_IN_SMALL_MODAL;\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm || state === TransferState.Password) {\n      setDappTransferScreen({ state: TransferState.Initial });\n    }\n  });\n\n  const handleTransferPasswordSubmit = useLastCallback((password: string) => {\n    submitDappTransferPassword({ password });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitDappTransferHardware();\n  });\n\n  const handleResetTransfer = useLastCallback(() => {\n    cancelDappTransfer();\n    updateNextKey();\n  });\n\n  function renderSubTransaction() {\n    const transaction = viewTransactionOnIdx !== undefined ? transactions?.[viewTransactionOnIdx] : undefined;\n\n    return (\n      <>\n        <ModalHeader title={lang('Transaction Info')} onClose={closeDappTransfer} />\n        <div className={modalStyles.transitionContent}>\n          {Boolean(transaction) && (\n            <DappTransfer\n              transaction={transaction}\n              tokensBySlug={tokensBySlug}\n            />\n          )}\n          <div className={buildClassName(modalStyles.buttons, styles.buttonsAfterFee)}>\n            <Button onClick={handleBackClick}>{lang('Back')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Action')} onClose={closeDappTransfer} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          submitLabel={lang('Send')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferPasswordSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearDappTransferError}\n        />\n      </>\n    );\n  }\n\n  function renderWaitForConnection() {\n    const renderRow = (isLarge?: boolean) => (\n      <div className={buildClassName(styles.rowContainerSkeleton, isLarge && styles.rowContainerLargeSkeleton)}>\n        <div className={buildClassName(styles.rowTextSkeleton, isLarge && styles.rowTextLargeSkeleton)} />\n        <div className={buildClassName(styles.rowSkeleton, isLarge && styles.rowLargeSkeleton)} />\n      </div>\n    );\n\n    return (\n      <>\n        <ModalHeader title={lang('Send Transaction')} onClose={closeDappTransfer} />\n        <div className={modalStyles.transitionContent}>\n          <div className={styles.transactionDirection}>\n            <div className={styles.transactionDirectionLeftSkeleton}>\n              <div className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n              <div className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n            </div>\n            <div className={styles.transactionDirectionRightSkeleton}>\n              <div className={buildClassName(styles.dappInfoIconSkeleton, styles.transactionDappIconSkeleton)} />\n              <div className={styles.dappInfoDataSkeleton}>\n                <div className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n                <div className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n              </div>\n            </div>\n          </div>\n          {renderRow(true)}\n          {renderRow()}\n          {renderRow()}\n        </div>\n      </>\n    );\n  }\n\n  function renderTransferInitialWithSkeleton() {\n    return (\n      <Transition name=\"semiFade\" activeKey={isDappLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n        {isDappLoading ? renderWaitForConnection() : (\n          <>\n            <ModalHeader\n              title={lang(isNftTransferPayload(renderingTransactions?.[0].payload) ? 'Send NFT' : 'Send Transaction')}\n              onClose={closeDappTransfer}\n            />\n            <DappTransferInitial onClose={closeDappTransfer} />\n          </>\n        )}\n      </Transition>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return renderTransferInitialWithSkeleton();\n      case TransferState.WarningHardware:\n        return (\n          <>\n            <ModalHeader title={lang('Send Transaction')} onClose={closeDappTransfer} />\n            <DappLedgerWarning />\n          </>\n        );\n      case TransferState.Confirm:\n        return renderSubTransaction();\n      case TransferState.Password:\n        return renderPassword(isActive);\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isTonAppConnected={isTonAppConnected}\n            isLedgerConnected={isLedgerConnected}\n            onConnected={handleLedgerConnect}\n            onClose={closeDappTransfer}\n          />\n        );\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onTryAgain={submitDappTransferHardware}\n            onClose={closeDappTransfer}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={buildClassName(styles.modalDialog, needsExtraHeight && styles.modalDialogExtraHeight)}\n      nativeBottomSheetKey=\"dapp-transfer\"\n      forceFullNative={needsExtraHeight || renderingKey === TransferState.Password}\n      onClose={closeDappTransfer}\n      onCloseAnimationEnd={handleResetTransfer}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n  const { isDangerous } = selectCurrentDappTransferTotals(global);\n\n  return {\n    currentDappTransfer: global.currentDappTransfer,\n    tokensBySlug: global.tokenInfo.bySlug,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isDangerous,\n  };\n})(DappTransferModal));\n","import { Dialog } from 'native-dialog';\nimport type { FC } from '../lib/teact/teact';\nimport React, { memo, useEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { DialogType } from '../global/types';\n\nimport { IS_CAPACITOR } from '../config';\nimport renderText from '../global/helpers/renderText';\nimport { pick } from '../util/iteratees';\n\nimport useFlag from '../hooks/useFlag';\nimport useLang from '../hooks/useLang';\n\nimport Button from './ui/Button';\nimport Modal from './ui/Modal';\n\nimport modalStyles from './ui/Modal.module.scss';\n\ntype StateProps = {\n  dialogs: DialogType[];\n};\n\nconst Dialogs: FC<StateProps> = ({ dialogs }) => {\n  const { dismissDialog } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  const dialog = dialogs[dialogs.length - 1];\n  const title = lang(dialog?.title ?? 'Something went wrong');\n\n  useEffect(() => {\n    if (IS_CAPACITOR) {\n      if (dialog) {\n        void Dialog.alert({\n          title,\n          message: lang(dialog.message),\n        }).then(() => {\n          dismissDialog();\n        });\n      }\n    } else if (dialog) {\n      openModal();\n    } else {\n      closeModal();\n    }\n  }, [dialogs, lang, dialog, openModal, title]);\n\n  if (!dialog || IS_CAPACITOR) {\n    return undefined;\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      isCompact\n      title={title}\n      onClose={closeModal}\n      onCloseAnimationEnd={dismissDialog}\n    >\n      <div>\n        {renderText(lang(dialog.message))}\n      </div>\n      <div className={modalStyles.footerButtons}>\n        <Button onClick={closeModal}>{lang('OK')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['dialogs']),\n)(Dialogs));\n","import React, {\n  memo, useEffect, useState,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { ElectronEvent } from '../../electron/types';\n\nimport { APP_NAME, PRODUCTION_URL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateApp.module.scss';\n\ntype StateProps = {\n  isAppUpdateAvailable?: boolean;\n};\n\nfunction UpdateApp({ isAppUpdateAvailable }: StateProps) {\n  const lang = useLang();\n\n  const [isElectronUpdateDownloaded, setIsElectronUpdateDownloaded] = useState(false);\n  const [isElectronAutoUpdateEnabled, setIsElectronAutoUpdateEnabled] = useState(false);\n  const [isDisabled, disable] = useFlag(false);\n\n  useEffect(() => {\n    const removeUpdateErrorListener = window.electron?.on(ElectronEvent.UPDATE_ERROR, () => {\n      setIsElectronUpdateDownloaded(false);\n    });\n    const removeUpdateDownloadedListener = window.electron?.on(ElectronEvent.UPDATE_DOWNLOADED, () => {\n      setIsElectronUpdateDownloaded(true);\n    });\n\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsElectronAutoUpdateEnabled);\n\n    return () => {\n      removeUpdateErrorListener?.();\n      removeUpdateDownloadedListener?.();\n    };\n  }, []);\n\n  const handleClick = useLastCallback(async () => {\n    if (isDisabled) {\n      return;\n    }\n\n    if (!isElectronAutoUpdateEnabled) {\n      window.open(`${PRODUCTION_URL}/get`, '_blank', 'noopener');\n      return;\n    }\n\n    if (isElectronUpdateDownloaded) {\n      disable();\n      await window.electron?.installUpdate();\n      return;\n    }\n\n    if (isAppUpdateAvailable) {\n      window.location.reload();\n    }\n  });\n\n  const { transitionClassNames, shouldRender } = useShowTransition(isElectronUpdateDownloaded || isAppUpdateAvailable);\n\n  if (!shouldRender) {\n    return null; // eslint-disable-line no-null/no-null\n  }\n\n  return (\n    <div\n      className={buildClassName(\n        styles.container,\n        transitionClassNames,\n        isDisabled && styles.disabled,\n      )}\n      onClick={handleClick}\n    >\n      <div className={styles.iconWrapper}>\n        <i className={buildClassName('icon-update', styles.icon)} />\n      </div>\n\n      <div className={styles.text}>{lang('Update %app_name%', { app_name: APP_NAME })}</div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isAppUpdateAvailable } = global;\n\n  return { isAppUpdateAvailable };\n})(UpdateApp));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"m3oYVPLL\",\"icon\":\"O2khIMww\",\"disabled\":\"Hz_3Tm4Q\",\"icon-wrapper\":\"cAAhDZj9\",\"iconWrapper\":\"cAAhDZj9\",\"text\":\"vvQKF4lC\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"o0YiMAP8\",\"wrapper\":\"B1_vmNNd\",\"applicationName\":\"F4gGoZNE\",\"buttons\":\"oUKLixL4\",\"windowsButtons\":\"hKXvGlWy\",\"windowsButton\":\"Pgysk0gP\"};","import React, { memo, useRef } from '../../lib/teact/teact';\n\nimport { APP_NAME } from '../../config';\nimport { IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useElectronDrag from '../../hooks/useElectronDrag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport UpdateApp from './UpdateApp';\n\nimport styles from './ElectronHeader.module.scss';\n\ntype Props = {\n  children?: React.ReactNode;\n  withTitle?: boolean;\n};\n\nfunction ElectronHeader({ children, withTitle }: Props) {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  useElectronDrag(containerRef);\n\n  const handleMinimize = useLastCallback(() => {\n    window.electron?.minimize();\n  });\n\n  const handleMaximize = useLastCallback(async () => {\n    if (await window.electron?.getIsMaximized()) {\n      window.electron?.unmaximize();\n    } else {\n      window.electron?.maximize();\n    }\n  });\n\n  const handleClose = useLastCallback(() => {\n    window.electron?.close();\n  });\n\n  const handleDoubleClick = useLastCallback(() => {\n    void window.electron?.handleDoubleClick();\n  });\n\n  if (IS_WINDOWS) {\n    return (\n      <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n        <div className={styles.wrapper}>\n          {Boolean(children) && <div className={styles.buttons}>{children}</div>}\n\n          {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n        </div>\n\n        <div className={styles.windowsButtons}>\n          <UpdateApp />\n\n          <div className={styles.windowsButton} onClick={handleMinimize}>\n            <i className=\"icon-windows-minimize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleMaximize}>\n            <i className=\"icon-windows-maximize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleClose}>\n            <i className=\"icon-windows-close\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n      <div className={styles.wrapper}>\n        {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n\n        <div className={styles.buttons}>\n          <UpdateApp />\n\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(ElectronHeader);\n","import type { RefObject } from 'react';\nimport { useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_ELECTRON, IS_MAC_OS } from '../util/windowEnvironment';\n\nconst DRAG_DISTANCE_THRESHOLD = 5;\n\nconst useElectronDrag = (ref: RefObject<HTMLDivElement>) => {\n  const isDragging = useRef(false);\n\n  const x = useRef(window.screenX);\n  const y = useRef(window.screenY);\n  const distance = useRef(0);\n\n  useEffect(() => {\n    const element: HTMLDivElement | null = ref.current;\n    if (!element || !(IS_ELECTRON && IS_MAC_OS)) return undefined;\n\n    const handleClick = (event: MouseEvent) => {\n      distance.current = 0;\n\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n        isDragging.current = false;\n      }\n    };\n\n    const handleMousedown = (event: MouseEvent) => {\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    };\n\n    const handleDrag = (event: MouseEvent) => {\n      if (event.buttons === 1) {\n        distance.current += Math.sqrt((x.current - window.screenX) ** 2 + (y.current - window.screenY) ** 2);\n\n        x.current = window.screenX;\n        y.current = window.screenY;\n\n        if (!isDragging.current && distance.current > DRAG_DISTANCE_THRESHOLD) {\n          isDragging.current = true;\n        }\n      }\n    };\n\n    const handleDoubleClick = (event: MouseEvent) => {\n      if (event.currentTarget === event.target) {\n        void window.electron?.handleDoubleClick();\n      }\n    };\n\n    element.addEventListener('click', handleClick);\n    element.addEventListener('mousedown', handleMousedown);\n    element.addEventListener('mousemove', handleDrag);\n    element.addEventListener('dblclick', handleDoubleClick);\n\n    return () => {\n      element.removeEventListener('click', handleClick);\n      element.removeEventListener('mouseup', handleMousedown);\n      element.removeEventListener('mousemove', handleDrag);\n      element.removeEventListener('dblclick', handleDoubleClick);\n    };\n  }, [ref]);\n};\n\nexport default useElectronDrag;\n","import { useEffect, useRef } from '../../../lib/teact/teact';\n\nimport { IS_IOS } from '../../windowEnvironment';\nimport { disableTelegramMiniAppSwipeToClose, enableTelegramMiniAppSwipeToClose } from '../index';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nexport default function useTelegramMiniAppSwipeToClose(isActive?: boolean) {\n  const isSwipeDisabledRef = useRef(false);\n\n  useEffect(() => {\n    if (!IS_IOS) return;\n\n    if (!isActive && isSwipeDisabledRef.current) {\n      enableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = false;\n    }\n  }, [isActive]);\n\n  const disableSwipeToClose = useLastCallback(() => {\n    if (IS_IOS && !isSwipeDisabledRef.current) {\n      disableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = true;\n    }\n  });\n\n  const enableSwipeToClose = useLastCallback(() => {\n    if (IS_IOS && isSwipeDisabledRef.current) {\n      enableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = false;\n    }\n  });\n\n  return {\n    disableSwipeToClose,\n    enableSwipeToClose,\n  };\n}\n","import { useEffect } from '../lib/teact/teact';\n\ninterface OwnProps {\n  containerRef: React.RefObject<HTMLDivElement>;\n  isDisabled?: boolean;\n  shouldPreventDefault?: boolean;\n  contentSelector?: string;\n}\n\nfunction useHorizontalScroll({\n  containerRef,\n  isDisabled,\n  shouldPreventDefault = false,\n  contentSelector,\n}: OwnProps) {\n  useEffect(() => {\n    const container = containerRef.current;\n\n    if (isDisabled || !container) {\n      return undefined;\n    }\n\n    function handleScroll(e: WheelEvent) {\n      // Ignore horizontal scroll and let it work natively (e.g. on touchpad)\n      if (!e.deltaX) {\n        const content = contentSelector ? container!.querySelector(contentSelector) : container;\n        if (!content) return;\n\n        content.scrollLeft += e.deltaY / 4;\n        if (shouldPreventDefault) e.preventDefault();\n      }\n    }\n\n    container.addEventListener('wheel', handleScroll, { passive: !shouldPreventDefault });\n\n    return () => {\n      container.removeEventListener('wheel', handleScroll);\n    };\n  }, [containerRef, contentSelector, isDisabled, shouldPreventDefault]);\n}\n\nexport default useHorizontalScroll;\n","import { useRef } from '../lib/teact/teact';\n\n// This is not render-dependent and will never allow previous to match current\nexport default function usePrevious2<T extends any>(current: T) {\n  const prevRef = useRef<T>();\n  const lastRef = useRef<T>();\n\n  if (lastRef.current !== current) {\n    prevRef.current = lastRef.current;\n  }\n\n  lastRef.current = current;\n\n  return prevRef.current;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"menuItem\":\"eMFKmXs8\",\"menuItem_separator\":\"qFOW6a6C\",\"menuItemSeparator\":\"qFOW6a6C\",\"destructive\":\"C84vY_ER\"};","import type { FC } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './MenuItem.module.scss';\n\ntype OnClickHandler = (e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>, arg?: any) => void;\n\ninterface OwnProps {\n  className?: string;\n  href?: string;\n  children: React.ReactNode;\n  onClick?: OnClickHandler;\n  clickArg?: string;\n  isDestructive?: boolean;\n  isSeparator?: boolean;\n}\n\nconst MenuItem: FC<OwnProps> = (props) => {\n  const {\n    className,\n    href,\n    children,\n    onClick,\n    clickArg,\n    isDestructive,\n    isSeparator,\n  } = props;\n\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e, clickArg);\n  });\n\n  const handleKeyDown = useLastCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.code !== 'Enter' && e.code !== 'Space') {\n      return;\n    }\n\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e);\n  });\n\n  const fullClassName = buildClassName(\n    styles.menuItem,\n    className,\n    isDestructive && styles.destructive,\n    isSeparator && styles.menuItem_separator,\n  );\n\n  if (href) {\n    return (\n      <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" className={fullClassName}>\n        {children}\n      </a>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      className={fullClassName}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default MenuItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"MEbg8jIh\",\"header\":\"P97rYp1K\",\"folder\":\"uC9KwIK7\",\"subfolder\":\"qqdPrxSH\",\"site\":\"dNJuuV1f\",\"small\":\"rQOZaBwJ\",\"icon\":\"yWoCn5kk\",\"scalable\":\"d8pMxoBU\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl } from '../../util/url';\n\nimport useLang from '../../hooks/useLang';\n\nimport Image from '../ui/Image';\n\nimport styles from './Category.module.scss';\n\ninterface OwnProps {\n  category: ApiSiteCategory;\n  sites: ApiSite[];\n}\n\nfunction Category({ category, sites }: OwnProps) {\n  const { openSiteCategory } = getActions();\n\n  const lang = useLang();\n  const [bigSites, smallSites] = useMemo(() => {\n    if (sites.length <= 4) {\n      return [sites, []];\n    }\n\n    return [\n      sites.slice(0, 3),\n      sites.slice(3, 7),\n    ];\n  }, [sites]);\n\n  function handleCategoryClick() {\n    openSiteCategory({ id: category.id });\n  }\n\n  return (\n    <div className={styles.root}>\n      <h3\n        className={styles.header}\n        role=\"button\"\n        tabIndex={0}\n        onClick={handleCategoryClick}\n      >\n        {lang(category.name)}\n      </h3>\n\n      <div className={styles.folder}>\n        {bigSites.map((site) => (\n          <button\n            key={`${site.url}-${site.name}`}\n            type=\"button\"\n            className={buildClassName(styles.site, styles.scalable)}\n            onClick={() => {\n              void openUrl(\n                site.url, { isExternal: site.isExternal, title: site.name, subtitle: getHostnameFromUrl(site.url) },\n              );\n            }}\n          >\n            <Image\n              url={site.icon}\n              alt={site.name}\n              imageClassName={styles.icon}\n            />\n          </button>\n        ))}\n        {smallSites.length > 0 && (\n          <div className={buildClassName(styles.subfolder, styles.scalable)} onClick={handleCategoryClick}>\n            {smallSites.map((site) => (\n              <Image\n                key={`${site.url}-${site.name}`}\n                url={site.icon}\n                alt={site.name}\n                className={buildClassName(styles.site, styles.small)}\n                imageClassName={styles.icon}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Category);\n","export const MEMO_EMPTY_ARRAY = [];\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3Om0rcJ\",\"feed\":\"nA5QFADu\",\"feedEmpty\":\"RcpQnS7j\",\"tiles\":\"y5gkmCay\",\"pills\":\"YTIqRcid\",\"dapp\":\"uOCr1XIF\",\"icon\":\"ZwXhUWQR\",\"dappName\":\"mqKHkpx5\",\"dappTile\":\"in10zDBl\",\"dappPill\":\"x3JEisHt\",\"settingsLabel\":\"CDOOWV_8\",\"iconPill\":\"B18NDC8N\",\"iconTile\":\"ws8erUzz\",\"settingsButton\":\"kqZ8FwHA\",\"settingsIconContainer\":\"S5zvywKS\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { openUrl } from '../../util/openUrl';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Image from '../ui/Image';\n\nimport dappStyles from '../dapps/Dapp.module.scss';\nimport styles from './DappFeed.module.scss';\n\ninterface OwnProps {\n  iconUrl: string;\n  name: string;\n  url: string;\n  mode: 'pill' | 'tile';\n  origin: string;\n}\n\nconst RERENDER_DAPPS_FEED_DELAY_MS = SECOND;\n\nconst POPULAR_DAPP_ORIGIN_REPLACEMENTS = [{\n  name: 'Fanzee Battles',\n  manifestUrl: 'https://battles-tg-app.fanz.ee/tc-manifest.json',\n  originalUrl: 'https://t.me/fanzeebattlesbot',\n  replacementUrl: 'https://t.me/battlescryptobot?start=myTonWallet',\n}, {\n  name: 'Hamster Kombat',\n  manifestUrl: 'https://hamsterkombatgame.io/tonconnect-manifest.json',\n  originalUrl: 'https://hamsterkombatgame.io/',\n  replacementUrl: 'https://t.me/hamster_kombat_bot/start',\n}, {\n  name: 'Dogs',\n  manifestUrl: 'https://cdn.onetime.dog/manifest.json',\n  originalUrl: 'https://onetime.dog',\n  replacementUrl: 'https://t.me/dogshouse_bot/join',\n}, {\n  name: 'Earn',\n  manifestUrl: 'https://cdn.joincommunity.xyz/earn/manifest.json',\n  originalUrl: 'https://earncommunity.xyz',\n  replacementUrl: 'https://t.me/earn?startapp',\n}];\n\nconst ORIGIN_REPLACEMENTS_BY_ORIGIN = POPULAR_DAPP_ORIGIN_REPLACEMENTS.reduce(\n  (acc: Record<string, string>, { originalUrl, replacementUrl }) => {\n    acc[originalUrl] = replacementUrl;\n\n    return acc;\n  }, {},\n);\n\nfunction DappFeedItem({\n  iconUrl,\n  name,\n  url,\n  mode,\n  origin,\n}: OwnProps) {\n  const { updateDappLastOpenedAt } = getActions();\n\n  const lang = useLang();\n\n  function renderIcon() {\n    const iconClassName = mode === 'pill' ? styles.iconPill : styles.iconTile;\n\n    if (!iconUrl) {\n      return (\n        <div className={buildClassName(dappStyles.dappLogo, dappStyles.dappLogo_icon, iconClassName)}>\n          <i className={buildClassName(dappStyles.dappIcon, 'icon-laptop')} aria-hidden />\n        </div>\n      );\n    }\n\n    return (\n      <div className={iconClassName}>\n        <Image\n          url={iconUrl}\n          className={iconClassName}\n          imageClassName={styles.icon}\n          alt={lang('Icon')}\n        />\n      </div>\n    );\n  }\n\n  const openDapp = useLastCallback(async () => {\n    await openUrl(ORIGIN_REPLACEMENTS_BY_ORIGIN[url] || url);\n\n    setTimeout(() => void updateDappLastOpenedAt({ origin }), RERENDER_DAPPS_FEED_DELAY_MS);\n  });\n\n  return (\n    <button\n      type=\"button\"\n      className={buildClassName(styles.dapp, mode === 'pill' ? styles.dappPill : styles.dappTile)}\n      onClick={openDapp}\n    >\n      {renderIcon()}\n      <span className={styles.dappName}>{name}</span>\n    </button>\n  );\n}\n\nexport default memo(DappFeedItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"rootSlide\":\"ZqS6W7iF\",\"slide\":\"FbWMWVID\",\"list\":\"eHKjqPA4\",\"landscapeList\":\"ajulW8PQ\",\"suggestionsMenu\":\"AcA4Inhz\",\"suggestions\":\"Rr_OedMn\",\"suggestion\":\"goh_kbKG\",\"suggestionIcon\":\"BHtFAOhh\",\"suggestionAddress\":\"hX1s9Ru4\",\"clearSuggestion\":\"k4u3y6_t\",\"item\":\"gSQkL6Gj\",\"trendingImage\":\"bIf54cAx\",\"imageWrapperScalable\":\"jnZY0Ppv\",\"trending\":\"dsHH5C4L\",\"imageWrapper\":\"oZIOx6b0\",\"infoWrapper\":\"SmLsrv__\",\"extended\":\"Qe5qRpIb\",\"withBorder\":\"yvQQOHrd\",\"badge\":\"PI6bQC1A\",\"image\":\"RpIwnHrh\",\"title\":\"ToW8q6Vp\",\"description\":\"kd6qUnJ8\",\"telegram\":\"Y4mdR7QN\",\"emptyList\":\"OLtywBQ9\",\"emptyListLoading\":\"i6uQ6HHm\",\"searchWrapper\":\"VQJfovbk\",\"searchContainer\":\"Wr0eK8xW\",\"searchIcon\":\"DdYW9BBn\",\"searchInput\":\"Gy204QbI\",\"sectionHeader\":\"HElxzEtm\",\"trendingSection\":\"bX0D8BEZ\",\"trendingList\":\"bZc6NN6v\"};","import React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type ApiDapp } from '../../api/types';\nimport { SettingsState } from '../../global/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\n\nimport DappFeedItem from './DappFeedItem';\n\nimport styles from './DappFeed.module.scss';\nimport exploreStyles from './Explore.module.scss';\n\ninterface StateProps {\n  dapps: ApiDapp[];\n  dappLastOpenedDatesByOrigin?: Record<string, number>;\n}\n\ntype DappWithLastOpenedDate = ApiDapp & { lastOpenedAt?: number };\n\nconst MAX_DAPPS_FOR_PILL_MODE = 3;\nconst HIDDEN_FROM_FEED_DAPP_ORIGINS = new Set(['https://checkin.mytonwallet.org']);\n\nfunction DappFeed({ dapps: dappsFromState, dappLastOpenedDatesByOrigin = {} }: StateProps) {\n  const { openSettingsWithState, closeExplore } = getActions();\n\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const dapps: DappWithLastOpenedDate[] = useMemo(() => {\n    return dappsFromState\n      .slice()\n      .filter((dapp) => !HIDDEN_FROM_FEED_DAPP_ORIGINS.has(dapp.origin))\n      .map((dapp) => ({ ...dapp, lastOpenedAt: dappLastOpenedDatesByOrigin[dapp.origin] }))\n      .sort(compareDapps);\n  }, [dappLastOpenedDatesByOrigin, dappsFromState]);\n\n  const mode = dapps.length > MAX_DAPPS_FOR_PILL_MODE ? 'tile' : 'pill';\n  const isPillMode = mode === 'pill';\n  const iconWrapperClassName = isPillMode ? styles.iconPill : styles.iconTile;\n  const fullClassName = buildClassName(\n    styles.feed,\n    isPillMode ? styles.pills : styles.tiles,\n    !dapps.length && styles.feedEmpty,\n    'dapps-feed',\n  );\n\n  function openSettings() {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    openSettingsWithState({ state: SettingsState.Dapps }, { forceOnHeavyAnimation: true });\n  }\n\n  useHorizontalScroll({\n    containerRef,\n    isDisabled: IS_TOUCH_ENV || dapps.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: '.dapps-feed',\n  });\n\n  if (!dapps.length) {\n    return undefined;\n  }\n\n  return (\n    <div className={styles.root} ref={containerRef}>\n      <h2 className={exploreStyles.sectionHeader}>{lang('Connected')}</h2>\n\n      <div className={fullClassName}>\n        {dapps?.map((dapp) => renderDapp(dapp, mode))}\n\n        {!!dapps.length && (\n          <div\n            className={styles.settingsButton}\n            role=\"button\"\n            tabIndex={0}\n            title={isPillMode ? lang('Settings') : undefined}\n            aria-label={isPillMode ? lang('Settings') : undefined}\n            onClick={openSettings}\n          >\n            <div className={buildClassName(styles.settingsIconContainer, iconWrapperClassName)}>\n              <i className=\"icon-params\" aria-hidden />\n            </div>\n            {!isPillMode && <span className={styles.settingsLabel}>{lang('Settings')}</span>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const { dappLastOpenedDatesByOrigin } = selectCurrentAccountState(global) || {};\n\n  return { dapps, dappLastOpenedDatesByOrigin };\n})(DappFeed));\n\nfunction compareDapps(a: DappWithLastOpenedDate, b: DappWithLastOpenedDate) {\n  const aLastOpened = a.lastOpenedAt || 0;\n  const bLastOpened = b.lastOpenedAt || 0;\n\n  if (aLastOpened !== bLastOpened) {\n    return bLastOpened - aLastOpened;\n  }\n\n  return b.connectedAt - a.connectedAt;\n}\n\nfunction renderDapp(dapp: DappWithLastOpenedDate, mode: 'pill' | 'tile') {\n  const {\n    iconUrl, name, url, origin,\n  } = dapp;\n\n  return (\n    <DappFeedItem\n      key={origin}\n      iconUrl={iconUrl}\n      name={name}\n      url={url}\n      mode={mode}\n      origin={origin}\n    />\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl, isTelegramUrl } from '../../util/url';\n\nimport Image from '../ui/Image';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  site: ApiSite;\n  isTrending?: boolean;\n  className?: string;\n}\n\nfunction Site({\n  site: {\n    url, icon, name, description, isExternal, extendedIcon, withBorder, badgeText,\n  },\n  isTrending,\n  className,\n}: OwnProps) {\n  function handleClick() {\n    void vibrate();\n    void openUrl(url, { isExternal, title: name, subtitle: getHostnameFromUrl(url) });\n  }\n\n  return (\n    <div\n      className={buildClassName(\n        styles.item,\n        (extendedIcon && isTrending) && styles.extended,\n        isTrending && styles.trending,\n        withBorder && styles.withBorder,\n        className,\n      )}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleClick}\n    >\n      <Image\n        url={extendedIcon && isTrending ? extendedIcon : icon}\n        className={buildClassName(styles.imageWrapper, !isTrending && styles.imageWrapperScalable)}\n        imageClassName={buildClassName(styles.image, isTrending && styles.trendingImage)}\n      />\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>\n          {name}\n\n          {!isTrending && isTelegramUrl(url) && (\n            <i className={buildClassName(styles.telegram, 'icon-telegram-filled')} aria-hidden />\n          )}\n        </b>\n        <div className={styles.description}>{description}</div>\n      </div>\n      {badgeText && <div className={styles.badge}>{badgeText}</div>}\n    </div>\n  );\n}\n\nexport default memo(Site);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './CategoryHeader.module.scss';\n\ninterface OwnProps {\n  id: number;\n  withNotch?: boolean;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n}\n\nfunction CategoryHeader({ id, withNotch, categories }: OwnProps & StateProps) {\n  const { closeSiteCategory } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const category = useMemo(() => {\n    return (categories || [])?.find((item) => id === item.id);\n  }, [categories, id]);\n\n  return (\n    <div className={buildClassName(\n      styles.root,\n      isPortrait && 'with-notch-on-scroll',\n      withNotch && 'is-scrolled',\n    )}\n    >\n      <Button className={styles.backButton} isSimple isText onClick={closeSiteCategory}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <h3 className={styles.title}>\n        {lang(category?.name || '')}\n      </h3>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    categories: global.exploreData?.categories,\n  };\n})(CategoryHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"xWsj5_Wk\",\"backButton\":\"P2bhPLw0\",\"backIcon\":\"FmQAR1hK\",\"title\":\"kW1ssngj\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport CategoryHeader from './CategoryHeader';\nimport Site from './Site';\n\nimport styles from './SiteList.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  categoryId: number;\n  sites: ApiSite[];\n}\n\nfunction SiteList({ isActive, categoryId, sites }: OwnProps) {\n  const { closeSiteCategory } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHistoryBack({\n    isActive,\n    onBack: closeSiteCategory,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div\n      onScroll={isPortrait ? handleContentScroll : undefined}\n      className={buildClassName(styles.root, 'custom-scroll')}\n    >\n      {isPortrait && <CategoryHeader id={categoryId} withNotch={isScrolled} />}\n      <div className={styles.list}>\n        {sites.map((site) => (\n          <Site\n            key={`${site.url}-${site.name}`}\n            site={site}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SiteList);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LxPuuiTJ\",\"list\":\"Eml6INN5\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport useTelegramMiniAppSwipeToClose from '../../util/telegram/hooks/useTelegramMiniAppSwipeToClose';\nimport { getHostnameFromUrl, isValidUrl } from '../../util/url';\nimport {\n  IS_ANDROID, IS_ANDROID_APP, IS_IOS_APP, IS_TOUCH_ENV,\n} from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../hooks/useFlag';\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Menu from '../ui/Menu';\nimport MenuItem from '../ui/MenuItem';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\nimport Category from './Category';\nimport DappFeed from './DappFeed';\nimport Site from './Site';\nimport SiteList from './SiteList';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n  sites?: ApiSite[];\n  shouldRestrict: boolean;\n  browserHistory?: string[];\n  currentSiteCategoryId?: number;\n}\n\ninterface SearchSuggestions {\n  history?: string[];\n  sites?: ApiSite[];\n  isEmpty: boolean;\n}\n\nconst SUGGESTIONS_OPEN_DELAY = 300;\nconst GOOGLE_SEARCH_URL = 'https://www.google.com/search?q=';\nconst enum SLIDES {\n  main,\n  category,\n}\n\nfunction Explore({\n  isActive, categories, sites: originalSites, shouldRestrict, browserHistory, currentSiteCategoryId,\n}: OwnProps & StateProps) {\n  const {\n    loadExploreSites,\n    getDapps,\n    addSiteToBrowserHistory,\n    removeSiteFromBrowserHistory,\n    openSiteCategory,\n    closeSiteCategory,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n  const suggestionsTimeoutRef = useRef<number | undefined>(undefined);\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const trendingContainerRef = useRef<HTMLDivElement>(null);\n  const lang = useLang();\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const [searchValue, setSearchValue] = useState<string>('');\n  const [isSearchFocused, markSearchFocused, unmarkSearchFocused] = useFlag(false);\n  const [isSuggestionsVisible, showSuggestions, hideSuggestions] = useFlag(false);\n  const { renderingKey } = useModalTransitionKeys(currentSiteCategoryId || 0, !!isActive);\n  const prevSiteCategoryIdRef = useStateRef(usePrevious2(renderingKey));\n  const { disableSwipeToClose, enableSwipeToClose } = useTelegramMiniAppSwipeToClose(isActive);\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  useEffect(\n    () => (renderingKey ? captureEscKeyListener(closeSiteCategory) : undefined),\n    [closeSiteCategory, renderingKey],\n  );\n\n  const filteredSites = useMemo(() => {\n    return shouldRestrict\n      ? originalSites?.filter((site) => !site.canBeRestricted)\n      : originalSites;\n  }, [originalSites, shouldRestrict]);\n\n  const searchSuggestions = useMemo<SearchSuggestions>(() => {\n    const search = searchValue.toLowerCase();\n    const historyResult = browserHistory?.filter((url) => url.toLowerCase().includes(search));\n    const sitesResult = search.length && filteredSites\n      ? filteredSites.filter(({ url, name, description }) => {\n        return url.toLowerCase().includes(search)\n          || name.toLowerCase().includes(search)\n          || description.toLowerCase().includes(search);\n      })\n      : undefined;\n\n    return {\n      history: historyResult,\n      sites: sitesResult,\n      isEmpty: (historyResult?.length || 0) + (sitesResult?.length || 0) === 0,\n    };\n  }, [browserHistory, searchValue, filteredSites]);\n\n  const { trendingSites, allSites } = useMemo(() => {\n    return (filteredSites || []).reduce((acc, site) => {\n      if (site.isFeatured) {\n        acc.trendingSites.push(site);\n      }\n\n      if (!acc.allSites[site.categoryId!]) {\n        acc.allSites[site.categoryId!] = [];\n      }\n      acc.allSites[site.categoryId!].push(site);\n\n      return acc;\n    }, { trendingSites: [] as ApiSite[], allSites: {} as Record<number, ApiSite[]> });\n  }, [filteredSites]);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !filteredSites?.length) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: () => {\n        closeSiteCategory();\n\n        disableSwipeToClose();\n      },\n      onCancel: () => {\n        openSiteCategory({ id: prevSiteCategoryIdRef.current! });\n\n        enableSwipeToClose();\n      },\n    });\n  }, [disableSwipeToClose, enableSwipeToClose, filteredSites?.length, prevSiteCategoryIdRef]);\n\n  useHorizontalScroll({\n    containerRef: trendingContainerRef,\n    isDisabled: IS_TOUCH_ENV || trendingSites.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: `.${styles.trendingList}`,\n  });\n\n  const filteredCategories = useMemo(() => {\n    return categories?.filter((category) => allSites[category.id]?.length > 0);\n  }, [categories, allSites]);\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    getDapps();\n    loadExploreSites({ isLandscape });\n  }, [isActive, isLandscape]);\n\n  const safeShowSuggestions = useLastCallback(() => {\n    if (searchSuggestions.isEmpty) return;\n\n    // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n    if (IS_ANDROID) {\n      suggestionsTimeoutRef.current = window.setTimeout(showSuggestions, SUGGESTIONS_OPEN_DELAY);\n    } else {\n      showSuggestions();\n    }\n  });\n\n  const safeHideSuggestions = useLastCallback(() => {\n    if (isSuggestionsVisible) {\n      hideSuggestions();\n    }\n    window.clearTimeout(suggestionsTimeoutRef.current);\n  });\n\n  useEffectWithPrevDeps(([prevIsSearchFocused]) => {\n    if ((prevIsSearchFocused && !isSearchFocused) || searchSuggestions.isEmpty) {\n      safeHideSuggestions();\n    }\n    if (isSearchFocused && !searchSuggestions.isEmpty) {\n      safeShowSuggestions();\n    }\n  }, [isSearchFocused, searchSuggestions.isEmpty]);\n\n  function openSite(originalUrl: string, isExternal?: boolean, title?: string) {\n    let url = originalUrl;\n    if (!url.startsWith('http:') && !url.startsWith('https:')) {\n      url = `https://${url}`;\n    }\n    if (!isValidUrl(url)) {\n      url = `${GOOGLE_SEARCH_URL}${encodeURIComponent(originalUrl)}`;\n    } else {\n      addSiteToBrowserHistory({ url });\n    }\n\n    void openUrl(url, { isExternal, title, subtitle: getHostnameFromUrl(url) });\n  }\n\n  const handleSiteClick = useLastCallback((\n    e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>,\n    url: string,\n  ) => {\n    void vibrate();\n    hideSuggestions();\n    const site = originalSites?.find(({ url: currentUrl }) => currentUrl === url);\n    openSite(url, site?.isExternal, site?.name);\n  });\n\n  function handleSiteClear(e: React.MouseEvent, url: string) {\n    stopEvent(e);\n\n    removeSiteFromBrowserHistory({ url });\n  }\n\n  function handleSearchValueChange(e: React.ChangeEvent<HTMLInputElement>) {\n    setSearchValue(e.target.value);\n  }\n\n  const handleMenuClose = useLastCallback(() => {\n    inputRef.current?.blur();\n  });\n\n  function handleSearchSubmit(e: React.FormEvent<HTMLFormElement>) {\n    stopEvent(e);\n\n    handleMenuClose();\n\n    if (searchValue.length > 0) {\n      openSite(searchValue);\n      setSearchValue('');\n    }\n  }\n\n  function renderSearch() {\n    return (\n      <form action=\"#\" onSubmit={handleSearchSubmit} className={styles.searchContainer} autoComplete=\"off\">\n        <i className={buildClassName(styles.searchIcon, 'icon-search')} aria-hidden />\n        <input\n          name=\"explore-search\"\n          className={styles.searchInput}\n          placeholder={lang('Search or enter address')}\n          value={searchValue}\n          autoCorrect={false}\n          autoCapitalize=\"none\"\n          spellCheck={false}\n          inputMode=\"url\"\n          onChange={handleSearchValueChange}\n          onFocus={markSearchFocused}\n          onBlur={unmarkSearchFocused}\n        />\n      </form>\n    );\n  }\n\n  function renderSearchSuggestions() {\n    return (\n      <Menu\n        type=\"suggestion\"\n        noBackdrop\n        isOpen={Boolean(isSuggestionsVisible && !searchSuggestions.isEmpty)}\n        className={styles.suggestions}\n        bubbleClassName={styles.suggestionsMenu}\n        onClose={handleMenuClose}\n      >\n        {searchSuggestions?.history?.map((url) => (\n          <MenuItem key={`history-${url}`} className={styles.suggestion} onClick={handleSiteClick} clickArg={url}>\n            <i\n              className={buildClassName(styles.suggestionIcon, searchValue.length ? 'icon-search' : 'icon-globe')}\n              aria-hidden\n            />\n            <span className={styles.suggestionAddress}>{getHostnameFromUrl(url)}</span>\n\n            <button\n              className={styles.clearSuggestion}\n              type=\"button\"\n              aria-label={lang('Clear')}\n              title={lang('Clear')}\n              onMouseDown={(e) => handleSiteClear(e, url)}\n              onClick={stopEvent}\n            >\n              <i className=\"icon-close\" aria-hidden />\n            </button>\n          </MenuItem>\n        ))}\n        {searchSuggestions?.sites?.map((site) => (\n          <Site key={`site-${site.url}-${site.name}`} className={styles.suggestion} site={site} />\n        ))}\n      </Menu>\n    );\n  }\n\n  function renderTrending() {\n    return (\n      <div ref={trendingContainerRef} className={styles.trendingSection}>\n        <h2 className={styles.sectionHeader}>{lang('Trending')}</h2>\n        <div className={styles.trendingList}>\n          {trendingSites.map((site) => (\n            <Site key={`${site.url}-${site.name}`} site={site} isTrending />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.main:\n        return (\n          <div\n            className={buildClassName(styles.slide, 'custom-scroll')}\n            onScroll={isPortrait ? handleContentScroll : undefined}\n          >\n            <div className={buildClassName(styles.searchWrapper, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n              {renderSearch()}\n              {renderSearchSuggestions()}\n            </div>\n\n            <DappFeed />\n\n            {Boolean(trendingSites.length) && renderTrending()}\n\n            {Boolean(filteredCategories?.length) && (\n              <>\n                <h2 className={styles.sectionHeader}>{lang('All Dapps')}</h2>\n                <div className={buildClassName(styles.list, isLandscape && styles.landscapeList)}>\n                  {filteredCategories.map((category) => (\n                    <Category key={category.id} category={category} sites={allSites[category.id]} />\n                  ))}\n                </div>\n              </>\n            )}\n          </div>\n        );\n\n      case SLIDES.category: {\n        const currentSiteCategory = allSites[renderingKey!];\n        if (!currentSiteCategory) return undefined;\n\n        return (\n          <SiteList\n            key={renderingKey}\n            isActive={isContentActive}\n            categoryId={renderingKey!}\n            sites={currentSiteCategory}\n          />\n        );\n      }\n    }\n  }\n\n  if (filteredSites === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (filteredSites.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No partners yet')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <Transition\n      ref={transitionRef}\n      name={resolveSlideTransitionName()}\n      activeKey={renderingKey ? SLIDES.category : SLIDES.main}\n      withSwipeControl\n      className={styles.rootSlide}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { browserHistory, currentSiteCategoryId } = selectCurrentAccountState(global) || {};\n  const { categories, sites } = global.exploreData || {};\n\n  return {\n    sites,\n    categories,\n    shouldRestrict: global.restrictions.isLimitedRegion && (IS_IOS_APP || IS_ANDROID_APP),\n    browserHistory,\n    currentSiteCategoryId,\n  };\n})(Explore));\n","import React, {\n  memo, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { Account } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isStatic?: boolean;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nconst ACCOUNT_ADDRESS_SHIFT = 4;\nconst ACCOUNT_BALANCE_DECIMALS = 3;\n\nfunction LedgerSelectWallets({\n  isActive,\n  isStatic,\n  hardwareWallets,\n  accounts,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const {\n    afterSelectHardwareWallets,\n    loadMoreHardwareWallets,\n  } = getActions();\n  const lang = useLang();\n\n  const [selectedAccountIndices, setSelectedAccountIndices] = useState<number[]>([]);\n  const shouldCloseOnCancel = !onCancel;\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  useHideBottomBar(Boolean(isActive));\n\n  const handleAccountToggle = useLastCallback((index: number) => {\n    if (selectedAccountIndices.includes(index)) {\n      setSelectedAccountIndices(selectedAccountIndices.filter((id) => id !== index));\n    } else {\n      setSelectedAccountIndices(selectedAccountIndices.concat([index]));\n    }\n  });\n\n  const handleAddLedgerWallets = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: selectedAccountIndices });\n    onClose();\n  });\n\n  const alreadyConnectedList = useMemo(\n    () => Object.values(accounts ?? []).map(({ addressByChain: { ton: address } }) => address),\n    [accounts],\n  );\n\n  const handleAddWalletClick = useLastCallback(() => {\n    const list = hardwareWallets ?? [];\n    const lastIndex = list[list.length - 1]?.index ?? 0;\n\n    loadMoreHardwareWallets({ lastIndex });\n  });\n\n  function renderAddAccount() {\n    return (\n      <Button\n        className={styles.addAccountContainer}\n        onClick={handleAddWalletClick}\n      >\n        {lang('Add Wallet')}\n        <i className={buildClassName(styles.addAccountIcon, 'icon-plus')} aria-hidden />\n      </Button>\n    );\n  }\n\n  function renderAccount(address: string, balance: bigint, index: number, isConnected: boolean) {\n    const isActiveAccount = isConnected || selectedAccountIndices.includes(index);\n\n    return (\n      <div\n        key={address}\n        className={buildClassName(styles.account, isActiveAccount && styles.account_current)}\n        onClick={isConnected ? undefined : () => handleAccountToggle(index)}\n      >\n        <span className={styles.accountName}>\n          <i className={buildClassName(styles.accountCurrencyIcon, 'icon-ton')} aria-hidden />\n          {formatCurrency(toDecimal(balance), '', ACCOUNT_BALANCE_DECIMALS)}\n        </span>\n        <div className={styles.accountFooter}>\n          <span className={styles.accountAddress}>\n            {shortenAddress(address, ACCOUNT_ADDRESS_SHIFT, ACCOUNT_ADDRESS_SHIFT)}\n          </span>\n        </div>\n\n        <div className={buildClassName(styles.accountCheckMark, isActiveAccount && styles.accountCheckMark_active)} />\n      </div>\n    );\n  }\n\n  function renderAccounts() {\n    const list = hardwareWallets ?? [];\n    const fullClassName = buildClassName(\n      styles.accounts,\n      list.length === 1 && styles.accounts_two,\n      'custom-scroll',\n    );\n\n    return (\n      <div className={fullClassName}>\n        {list.map(\n          ({ address, balance, index }) => renderAccount(\n            address,\n            balance,\n            index,\n            alreadyConnectedList.includes(address),\n          ),\n        )}\n        {renderAddAccount()}\n      </div>\n    );\n  }\n\n  const areAccountsSelected = !selectedAccountIndices.length;\n  const title = selectedAccountIndices.length\n    ? lang('%1$d Selected', selectedAccountIndices.length) as string\n    : lang('Select Ledger Wallets');\n\n  return (\n    <>\n      {!isStatic ? (\n        <ModalHeader\n          title={title}\n          onBackButtonClick={onBackButtonClick}\n          onClose={!onBackButtonClick ? onClose : undefined}\n        />\n      ) : (\n        <div className={settingsStyles.header}>\n          <Button isSimple isText onClick={onClose} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{title}</span>\n        </div>\n      )}\n      <div className={buildClassName(\n        styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n      )}\n      >\n        {renderAccounts()}\n        <div className={styles.actionBlock}>\n          <Button\n            className={styles.button}\n            onClick={shouldCloseOnCancel ? onClose : onCancel}\n          >\n            {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={areAccountsSelected}\n            onClick={handleAddLedgerWallets}\n            className={styles.button}\n          >\n            {lang('Add')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(LedgerSelectWallets);\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account, HardwareConnectState } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport LedgerConnect from './LedgerConnect';\nimport LedgerSelectWallets from './LedgerSelectWallets';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isRemoteTab?: boolean;\n  areSettingsOpen?: boolean;\n};\n\nenum LedgerModalState {\n  Password,\n  Connect,\n  SelectWallets,\n}\n\nfunction LedgerModal({\n  isOpen,\n  onClose,\n  hardwareWallets,\n  accounts,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isRemoteTab,\n  areSettingsOpen,\n}: OwnProps & StateProps) {\n  const {\n    afterSelectHardwareWallets,\n    resetHardwareWalletConnect,\n  } = getActions();\n\n  const [currentSlide, setCurrentSlide] = useState<number>(\n    LedgerModalState.Connect,\n  );\n  const [nextKey] = useState<number | undefined>(\n    LedgerModalState.SelectWallets,\n  );\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    onClose();\n  });\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setCurrentSlide(LedgerModalState.SelectWallets);\n  });\n\n  const handleLedgerModalClose = useLastCallback(() => {\n    setCurrentSlide(LedgerModalState.Connect);\n    resetHardwareWalletConnect();\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case LedgerModalState.Connect:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            shouldDelegateToNative={IS_DELEGATING_BOTTOM_SHEET}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            isRemoteTab={isRemoteTab}\n            onConnected={handleConnected}\n            onClose={onClose}\n          />\n        );\n      case LedgerModalState.SelectWallets:\n        return (\n          <LedgerSelectWallets\n            isActive={isActive}\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      onClose={onClose}\n      onCloseAnimationEnd={handleLedgerModalClose}\n      dialogClassName={buildClassName(styles.modalDialog, areSettingsOpen && styles.modalDialogInsideSettings)}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n\n  const {\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n  } = global.hardware;\n\n  return {\n    accounts,\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n    areSettingsOpen: global.areSettingsOpen,\n  };\n})(LedgerModal));\n","import { useEffect } from '../lib/teact/teact';\n\nimport { stopEvent } from '../util/domEvents';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst metaViewport = document.querySelector('meta[name=\"viewport\"]');\nconst defaultViewportContent = metaViewport?.getAttribute('content') || '';\nconst allowedZoomViewportContent = 'width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover';\n\nexport default function usePreventPinchZoomGesture(isDisabled = false) {\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    if (isDisabled) {\n      // Clean viewport content from values that disable the ability to zoom a webpage\n      // https://web.dev/meta-viewport/\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      return undefined;\n    }\n\n    metaViewport?.setAttribute('content', defaultViewportContent);\n\n    // Since iOS 10 `user-scaleable=no` is disabled in Safari for iOS,\n    // this is only applicable for the browser and does not apply to the PWA mode.\n    // https://newbedev.com/how-do-you-disable-viewport-zooming-on-mobile-safari\n    if (IS_IOS && !IS_PWA) {\n      document.addEventListener('gesturestart', stopEvent);\n    }\n\n    return () => {\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      if (IS_IOS && !IS_PWA) {\n        document.removeEventListener('gesturestart', stopEvent);\n      }\n    };\n  }, [isDisabled]);\n}\n","// https://github.com/toncenter/tonweb/blob/944455da2effaa307a2030d00e19a37e6e94897c/src/utils/index.js#L94-L109\nexport default function formatTransferUrl(address: string, amount?: bigint, text?: string, jettonAddress?: string) {\n  const url = `ton://transfer/${address}`;\n\n  const params = [];\n\n  if (amount) {\n    params.push(`amount=${amount}`);\n  }\n  if (text) {\n    params.push(`text=${encodeURIComponent(text)}`);\n  }\n  if (jettonAddress) {\n    params.push(`jetton=${encodeURIComponent(jettonAddress)}`);\n  }\n\n  if (params.length === 0) return url;\n\n  return `${url}?${params.join('&')}`;\n}\n","import avalancheBlockchainIcon from '../../assets/blockchain/chain_avalanche.svg';\nimport bitcoinBlockchainIcon from '../../assets/blockchain/chain_bitcoin.svg';\nimport bitcoincashBlockchainIcon from '../../assets/blockchain/chain_bitcoincash.svg';\nimport bnbBlockchainIcon from '../../assets/blockchain/chain_bnb.svg';\nimport cardanoBlockchainIcon from '../../assets/blockchain/chain_cardano.svg';\nimport cosmosBlockchainIcon from '../../assets/blockchain/chain_cosmos.svg';\nimport dashBlockchainIcon from '../../assets/blockchain/chain_dash.svg';\nimport dogeBlockchainIcon from '../../assets/blockchain/chain_doge.svg';\nimport eosBlockchainIcon from '../../assets/blockchain/chain_eos.svg';\nimport ethereumBlockchainIcon from '../../assets/blockchain/chain_ethereum.svg';\nimport ethereumclassicBlockchainIcon from '../../assets/blockchain/chain_ethereumclassic.svg';\nimport internetcomputerBlockchainIcon from '../../assets/blockchain/chain_internetcomputer.svg';\nimport iotaBlockchainIcon from '../../assets/blockchain/chain_iota.svg';\nimport litecoinBlockchainIcon from '../../assets/blockchain/chain_litecoin.svg';\nimport moneroBlockchainIcon from '../../assets/blockchain/chain_monero.svg';\nimport polkadotBlockchainIcon from '../../assets/blockchain/chain_polkadot.svg';\nimport rippleBlockchainIcon from '../../assets/blockchain/chain_ripple.svg';\nimport solanaBlockchainIcon from '../../assets/blockchain/chain_solana.svg';\nimport stellarBlockchainIcon from '../../assets/blockchain/chain_stellar.svg';\nimport tonBlockchainIcon from '../../assets/blockchain/chain_ton.svg';\nimport tronBlockchainIcon from '../../assets/blockchain/chain_tron.svg';\nimport zcashBlockchainIcon from '../../assets/blockchain/chain_zcash.svg';\n\nconst CHAIN_ICON_MAP: Record<string, string> = {\n  avalanche: avalancheBlockchainIcon,\n  bitcoin: bitcoinBlockchainIcon,\n  bitcoin_cash: bitcoincashBlockchainIcon,\n  binance_smart_chain: bnbBlockchainIcon,\n  binance_dex: bnbBlockchainIcon,\n  cardano: cardanoBlockchainIcon,\n  cosmos: cosmosBlockchainIcon,\n  dash: dashBlockchainIcon,\n  doge: dogeBlockchainIcon,\n  eos: eosBlockchainIcon,\n  ethereum: ethereumBlockchainIcon,\n  ethereum_classic: ethereumclassicBlockchainIcon,\n  internet_computer: internetcomputerBlockchainIcon,\n  iota: iotaBlockchainIcon,\n  litecoin: litecoinBlockchainIcon,\n  monero: moneroBlockchainIcon,\n  polkadot: polkadotBlockchainIcon,\n  ripple: rippleBlockchainIcon,\n  solana: solanaBlockchainIcon,\n  stellar: stellarBlockchainIcon,\n  ton: tonBlockchainIcon,\n  tron: tronBlockchainIcon,\n  zcash: zcashBlockchainIcon,\n};\n\nexport default function getChainNetworkIcon(networkName?: string) {\n  if (!networkName) return '';\n\n  return CHAIN_ICON_MAP[networkName] ?? networkName;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"XPeM0_U7\",\"icon\":\"FoSSGfFn\",\"large\":\"wjhynzvL\",\"small\":\"Zb5vM0UM\",\"middle\":\"d5dxI69w\",\"x-middle\":\"oxbvbCY8\",\"xMiddle\":\"oxbvbCY8\",\"fallbackIcon\":\"p13LUS2n\",\"blockchainIcon\":\"CMIQ9vCY\"};","import React, { memo, type TeactNode } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useFlag from '../../hooks/useFlag';\n\nimport styles from './TokenIcon.module.scss';\n\ninterface OwnProps {\n  token: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  withChainIcon?: boolean;\n  size?: 'small' | 'middle' | 'x-middle' | 'large';\n  className?: string;\n  iconClassName?: string;\n  children?: TeactNode;\n}\n\nfunction TokenIcon({\n  token, size, withChainIcon, className, iconClassName, children,\n}: OwnProps) {\n  const { symbol, image, chain } = token;\n  const logoPath = ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || image;\n  const [isLoadingError, markLoadingError] = useFlag(false);\n\n  function renderDefaultIcon() {\n    return (\n      <div className={buildClassName(styles.icon, size && styles[size], iconClassName, styles.fallbackIcon)}>\n        {token.symbol.slice(0, 1)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {\n        !isLoadingError ? (\n          <img\n            src={logoPath}\n            alt={symbol}\n            className={buildClassName(styles.icon, size && styles[size], iconClassName)}\n            draggable={false}\n            onError={markLoadingError}\n          />\n        ) : renderDefaultIcon()\n      }\n      {withChainIcon && chain && (\n        <img\n          src={getChainNetworkIcon(chain)}\n          alt=\"\"\n          className={buildClassName(styles.blockchainIcon, size && styles[size])}\n          draggable={false}\n        />\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(TokenIcon);\n","import React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { setExtraStyles } from '../../lib/teact/teact-dom';\n\nimport type { ApiToken } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { REM } from '../../util/windowEnvironment';\n\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport Transition from '../ui/Transition';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './SelectTokenButton.module.scss';\n\ninterface OwnProps {\n  token?: ApiToken;\n  noChainIcon?: boolean;\n  className?: string;\n  onClick: NoneToVoidFunction;\n}\n\nfunction SelectTokenButton({\n  token, className, noChainIcon, onClick,\n}: OwnProps) {\n  const { transitionRef } = useSelectorWidth(token);\n  const buttonTransitionKeyRef = useRef(0);\n  const buttonStateStr = `${token?.symbol}_${token?.chain}`;\n\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [buttonStateStr]);\n\n  function handleClick(e: React.MouseEvent<HTMLButtonElement>) {\n    stopEvent(e);\n\n    onClick();\n  }\n\n  function renderToken(tokenToRender?: ApiToken) {\n    return (\n      <Transition\n        ref={transitionRef}\n        name=\"fade\"\n        activeKey={buttonTransitionKeyRef.current}\n        className={buildClassName(styles.wrapper, className)}\n        slideClassName={styles.slide}\n      >\n        <button\n          type=\"button\"\n          className={styles.button}\n          onClick={handleClick}\n        >\n          {tokenToRender && (\n            <TokenIcon\n              token={tokenToRender}\n              withChainIcon={!noChainIcon}\n              size=\"middle\"\n              className={styles.tokenIcon}\n            />\n          )}\n          <div className={styles.content}>\n            <span>{tokenToRender?.symbol}</span>\n            <i className={buildClassName('icon-chevron-right', styles.chevronIcon)} aria-hidden />\n          </div>\n        </button>\n      </Transition>\n    );\n  }\n\n  return renderToken(token);\n}\n\nexport default memo(SelectTokenButton);\n\nconst BUTTON_WIDTH = 70 / REM;\nconst CHARACTER_WIDTH = 10;\n\nfunction useSelectorWidth(token?: ApiToken) {\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n\n  useLayoutEffect(() => {\n    if (!transitionRef.current || !token) return;\n\n    const symbolWidth = (token.symbol.length * CHARACTER_WIDTH) / REM;\n    const minWidth = `${symbolWidth + BUTTON_WIDTH}rem`;\n\n    setExtraStyles(transitionRef.current, {\n      minWidth,\n    });\n  }, [token]);\n\n  return {\n    transitionRef,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ZSZY1phv\",\"slide\":\"vCCqOvOq\",\"button\":\"XIxoy7tw\",\"tokenIcon\":\"SS8KpgmL\",\"content\":\"ISsYr_9r\",\"chevronIcon\":\"D_7DrGaN\"};","/* eslint-disable no-bitwise */\n\n// Converts a string to a numeric seed using a simple hashing algorithm\nfunction stringToNumberSeed(str: string) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    // hash * 31 + charCode\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    // Conversion to a 32-bit integer\n    hash |= 0;\n  }\n\n  return hash;\n}\n\nexport default function getPseudoRandomNumber(min: number, max: number, seed: string) {\n  const numberSeed = stringToNumberSeed(seed);\n  // Convert `seed` to a pseudorandom number using `Math.sin`\n  const x = Math.sin(numberSeed) * 10000;\n  const randomFraction = x - Math.floor(x);\n\n  return Math.floor(randomFraction * (max - min + 1)) + min;\n}\n","const NETWORK_NAMES_EXCEPTIONS: Record<string, string> = {\n  binance_smart_chain: 'Binance Smart Chain',\n  internet_computer: 'Internet Computer',\n  ethereum_classic: 'Ethereum Classic',\n  bitcoin_cash: 'Bitcoin Cash',\n  binance_dex: 'Binance Dex',\n  ton: 'TON',\n  bitcoin: 'Bitcoin',\n  ethereum: 'Ethereum',\n  solana: 'Solana',\n  tron: 'TRON',\n  stellar: 'Stellar',\n  doge: 'DOGE',\n  eos: 'EOS',\n  avalanche: 'Avalanche',\n  cardano: 'Cardano',\n  monero: 'Monero',\n  dash: 'Dash',\n  ripple: 'Ripple',\n  cosmos: 'Cosmos',\n  litecoin: 'Litecoin',\n  zcash: 'Zcash',\n  polkadot: 'Polkadot',\n  iota: 'IOTA',\n};\n\nexport default function getChainNetworkName(networkName?: string) {\n  if (!networkName) return '';\n\n  return NETWORK_NAMES_EXCEPTIONS[networkName] ?? networkName;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { createSignal } from '../util/signals';\n\nexport default function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n","import type { Signal } from '../util/signals';\n\nimport useSignal from './useSignal';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedSignal<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): Signal<T>;\nfunction useDerivedSignal<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): Signal<T>;\nfunction useDerivedSignal<T>(dependency: T): Signal<T>;\n\nfunction useDerivedSignal<T>(resolverOrDependency: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrDependency as Resolver<T> : () => (resolverOrDependency as T);\n  dependencies ??= [resolverOrDependency];\n\n  const [getValue, setValue] = useSignal<T>();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver() {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)(setValue);\n    } else {\n      setValue((currentResolver as SyncResolver<T>)());\n    }\n  }\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSyncEffect(runCurrentResolver, dependencies);\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return getValue as Signal<T>;\n}\n\nexport default useDerivedSignal;\n","import React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { Theme } from '../../global/types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { animateInstantly } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport { clamp } from '../../util/math';\nimport { random } from '../../util/random';\nimport { DPR } from '../../util/windowEnvironment';\n\nimport { useGetIsIntersectingWithApp } from '../../hooks/useAppIntersectionObserver';\nimport useAppTheme from '../../hooks/useAppTheme';\nimport { getIsInBackground } from '../../hooks/useBackgroundMode';\nimport useDerivedSignal from '../../hooks/useDerivedSignal';\n\nimport styles from './SensitiveDataMask.module.scss';\n\nexport type SensitiveDataMaskSkin = (\n  'lightTheme' | 'darkTheme' | 'cardLightText' | 'cardDarkText' | 'cardGoldText' | 'purple'\n  );\n\ninterface OwnProps {\n  cols: number;\n  rows: number;\n  cellSize: number;\n  skin?: SensitiveDataMaskSkin;\n  className?: string;\n}\n\ninterface StateProps {\n  theme: Theme;\n}\n\ninterface AnimationState {\n  opacityValues: number[][];\n  steps: number[][];\n  lastSpeedChangeAt?: number;\n  isRendered: boolean;\n}\n\ninterface RenderOptions {\n  ctx: CanvasRenderingContext2D;\n  cols: number;\n  rows: number;\n  width: number;\n  height: number;\n  cellSizeDpr: number;\n  color: string;\n}\n\n// STEPS values are pre-multiplied by 1 / (1000 / 60) to compensate for FPS\nconst STEPS = [\n  0.0001 * 0.06,\n  0.0001 * 0.06,\n  0.00001 * 0.06,\n  0.0003 * 0.06,\n  0.0001 * 0.06,\n  0.0025 * 0.06,\n];\nconst FROM = 0.07;\nconst TO = 0.25;\nconst CHANGE_SPEED_INTERVAL = 3000;\nconst SKIN_COLORS: Record<SensitiveDataMaskSkin, string> = {\n  lightTheme: '120, 121, 122',\n  darkTheme: '240, 241, 242',\n  cardLightText: '250, 250, 250',\n  cardDarkText: '10, 10, 10',\n  cardGoldText: '101, 73, 16',\n  purple: '96, 107, 215',\n};\n\nfunction SensitiveDataMask({\n  cols,\n  rows,\n  cellSize,\n  skin,\n  className,\n  theme,\n}: OwnProps & StateProps) {\n  // eslint-disable-next-line no-null/no-null\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const cellSizeDpr = cellSize * DPR;\n\n  const appTheme = useAppTheme(theme);\n  const color = SKIN_COLORS[skin ?? `${appTheme}Theme`];\n\n  const animationStateRef = useRef<AnimationState>({\n    opacityValues: [],\n    steps: [],\n    lastSpeedChangeAt: undefined,\n    isRendered: false,\n  });\n\n  const getIsIntersecting = useGetIsIntersectingWithApp(canvasRef);\n  const getIsInBackground2 = getIsInBackground;\n  const getShouldAnimate = useDerivedSignal(\n    () => getIsIntersecting() && !getIsInBackground2(),\n    [getIsIntersecting, getIsInBackground2],\n  );\n\n  useLayoutEffect(() => {\n    const state = animationStateRef.current;\n\n    if (state.isRendered && !getShouldAnimate()) return undefined;\n\n    const canvas = canvasRef.current!;\n    const ctx = canvas.getContext('2d')!;\n    const width = cols * cellSizeDpr;\n    const height = rows * cellSizeDpr;\n\n    let shouldStop = false;\n    let lastFrameAt: number | undefined;\n\n    canvas.width = width;\n    canvas.height = height;\n\n    state.lastSpeedChangeAt = undefined;\n\n    const renderOptions = { ctx, cols, rows, width, height, cellSizeDpr, color };\n\n    animateInstantly(() => {\n      if (shouldStop || (state.isRendered && !getShouldAnimate())) return false;\n\n      const now = performance.now();\n      const frameDuration = lastFrameAt ? now - lastFrameAt : 0;\n      renderFrame(renderOptions, state, frameDuration);\n      lastFrameAt = now;\n\n      return true;\n    }, requestMutation);\n\n    return () => {\n      shouldStop = true;\n    };\n  }, [cols, rows, cellSizeDpr, getShouldAnimate, color]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      style={`width: ${cellSize * cols}px; height: ${cellSize * rows}px`}\n      className={buildClassName(styles.canvas, className)}\n    />\n  );\n}\n\nfunction renderFrame(\n  options: RenderOptions,\n  state: AnimationState,\n  frameDuration = 0,\n) {\n  const {\n    ctx, cols, rows, cellSizeDpr, width, height, color,\n  } = options;\n\n  const now = performance.now();\n  const shouldChangeSpeed = state.lastSpeedChangeAt ? now - state.lastSpeedChangeAt >= CHANGE_SPEED_INTERVAL : false;\n\n  if (shouldChangeSpeed || !state.lastSpeedChangeAt) {\n    state.lastSpeedChangeAt = now;\n  }\n\n  ctx.clearRect(0, 0, width, height);\n\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col < cols; col++) {\n      state.steps[row] ??= [];\n      state.opacityValues[row] ??= [];\n\n      if (shouldChangeSpeed) {\n        state.steps[row][col] = sample(STEPS) * (state.steps[row][col] < 0 ? -1 : 1);\n      } else {\n        state.steps[row][col] ??= sample(STEPS);\n      }\n\n      let nextOpacity = state.opacityValues[row][col] ?? (Math.random() * (TO - FROM) + FROM);\n      nextOpacity += state.steps[row][col] * frameDuration;\n      if (nextOpacity > TO || nextOpacity < FROM) {\n        state.steps[row][col] *= -1;\n        nextOpacity = clamp(nextOpacity, FROM, TO);\n      }\n\n      state.opacityValues[row][col] = nextOpacity;\n\n      ctx.fillStyle = `rgba(${color}, ${nextOpacity})`;\n      ctx.fillRect(col * cellSizeDpr, row * cellSizeDpr, cellSizeDpr, cellSizeDpr);\n\n      state.isRendered ||= true;\n    }\n  }\n}\n\n// Returns a random element from the array\nfunction sample<T>(array: T[]): T {\n  return array[random(0, array.length - 1)];\n}\n\nexport default memo(withGlobal((global) => {\n  return {\n    theme: global.settings.theme,\n  };\n})(SensitiveDataMask));\n","// extracted by mini-css-extract-plugin\nexport default {\"canvas\":\"_5lZqlhE\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"iXsFkRU7\",\"center\":\"FEWWktrI\",\"right\":\"FXNTlsIy\",\"interactive\":\"O6dWAwYM\",\"content\":\"GAvxZ7xR\",\"spoiler\":\"ynSPM0hu\",\"left\":\"DSH91Ntx\",\"hidden\":\"JfW0tuT3\",\"fixedWidth\":\"CBhjF9XS\"};","import React, { memo, useRef } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { SensitiveDataMaskSkin } from '../common/SensitiveDataMask';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { stopEvent } from '../../util/domEvents';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport SensitiveDataMask from '../common/SensitiveDataMask';\n\nimport styles from './SensitiveData.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  rows: number;\n  cols: number;\n  cellSize: number;\n  align?: 'left' | 'center' | 'right';\n  maskSkin?: SensitiveDataMaskSkin;\n  shouldHoldSize?: boolean;\n  className?: string;\n  maskClassName?: string;\n  contentClassName?: string;\n  children: React.ReactNode;\n}\n\nfunction SensitiveData({\n  isActive,\n  rows,\n  cols,\n  cellSize = 0,\n  align = 'left',\n  maskSkin,\n  shouldHoldSize,\n  className,\n  maskClassName,\n  contentClassName,\n  children,\n}: OwnProps) {\n  const { setIsSensitiveDataHidden } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const contentRef = useRef<HTMLDivElement>(null);\n\n  // Do not animate on first load with active state\n  const {\n    shouldRender: shouldRenderSpoiler,\n    hasOpenClass: isSpoilerVisible,\n  } = useShowTransition(isActive, undefined, isActive);\n\n  function handleClick(e: React.UIEvent) {\n    stopEvent(e);\n\n    setIsSensitiveDataHidden({ isHidden: false });\n  }\n\n  const fullClassName = buildClassName(\n    styles.wrapper,\n    className,\n    isActive && styles.interactive,\n    styles[align],\n  );\n  const spoilerClassName = buildClassName(\n    styles.spoiler,\n    !isSpoilerVisible && styles.hidden,\n    maskClassName,\n    styles[align],\n  );\n  const wrapperStyle = buildStyle(\n    `--spoiler-width: calc(${cellSize * cols}px + var(--sensitive-data-extra-width, 0px))`,\n    `min-height: ${cellSize * rows}px`,\n    (isActive || shouldHoldSize) && 'min-width: var(--spoiler-width);',\n  );\n  const contentFullClassName = buildClassName(\n    styles.content,\n    isActive && styles.hidden,\n    contentClassName,\n    isActive && isSpoilerVisible && styles.fixedWidth,\n  );\n\n  return (\n    <div\n      style={wrapperStyle}\n      className={fullClassName}\n      onClick={isActive ? handleClick : undefined}\n    >\n      {shouldRenderSpoiler && (\n        <SensitiveDataMask\n          cols={cols}\n          rows={rows}\n          cellSize={cellSize}\n          skin={maskSkin}\n          className={spoilerClassName}\n        />\n      )}\n      <div ref={contentRef} className={contentFullClassName}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SensitiveData);\n","// extracted by mini-css-extract-plugin\nexport default {\"tokenSelectInputWrapper\":\"oCuiJXQ_\",\"tokenSelectSearchIcon\":\"zftr1vD0\",\"tokenSelectSearchResetWrapper\":\"Ss4Pd7B2\",\"tokenSelectSearchReset\":\"oDrN01CP\",\"tokenSelectSearchResetIcon\":\"ok_5nHql\",\"tokenSelectInput\":\"fDjHi6pe\",\"tokenSelectContent\":\"LodBlyss\",\"tokenGroupContainer\":\"MbjJDq0G\",\"tokenGroupHeader\":\"RpUAt2yS\",\"tokenGroupTitle\":\"WhzSaV_6\",\"tokenGroupAdditionalTitle\":\"FdHSpaSV\",\"tokenContainer\":\"eUkSUO8W\",\"tokenContainerDisabled\":\"tHJSsGRH\",\"tokenLogoContainer\":\"nsViIoST\",\"logoContainer\":\"adBlSlrG\",\"tokenLogoSkeleton\":\"cGf45x9B\",\"tokenLogoSymbol\":\"PSK73bRe\",\"tokenLogo\":\"xiUmZwCy\",\"tokenLogoDisabled\":\"OwvlXRrn\",\"tokenNetworkLogoSkeleton\":\"MO1xaZfl\",\"nameContainer\":\"ZPTo397c\",\"tokenPriceContainer\":\"qGxMTfbW\",\"tokenName\":\"Wgp2h4bc\",\"tokenAmount\":\"QWmp5WQP\",\"tokenNetwork\":\"gBNLwjjP\",\"tokenValue\":\"S1V0VVx3\",\"tokenNameSkeleton\":\"GkqdgXVp\",\"tokenValueSkeleton\":\"AhEbK2G0\",\"tokenNotFound\":\"zp0dyh68\",\"tokenNotFoundTitle\":\"R7aa_jfY\",\"tokenNotFoundDesc\":\"XlzS0_qG\",\"tokenTextDisabled\":\"lotwVvdo\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiChain } from '../../api/types';\nimport {\n  type AssetPairs, SettingsState, type UserSwapToken, type UserToken,\n} from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX, TON_USDT_SLUG, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG,\n} from '../../config';\nimport {\n  selectAvailableUserForSwapTokens,\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectPopularTokens,\n  selectSwapTokens,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport ModalHeader from '../ui/ModalHeader';\nimport SensitiveData from '../ui/SensitiveData';\nimport Transition from '../ui/Transition';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TokenSelector.module.scss';\n\ntype TokenType = UserToken | UserSwapToken;\n\ntype TokenSortFactors = {\n  tickerExactMatch: number;\n  tickerMatchLength: number;\n  nameMatchLength: number;\n  specialOrder: number;\n};\n\ninterface OwnProps {\n  isActive?: boolean;\n  shouldFilter?: boolean;\n  shouldUseSwapTokens?: boolean;\n  shouldHideMyTokens?: boolean;\n  shouldHideNotSupportedTokens?: boolean;\n  selectedChain?: ApiChain;\n  header?: TeactNode;\n  onClose: NoneToVoidFunction;\n  onBack: NoneToVoidFunction;\n  onTokenSelect: (token: TokenType) => void;\n}\n\ninterface StateProps {\n  token?: TokenType;\n  userTokens?: TokenType[];\n  popularTokens?: TokenType[];\n  swapTokens?: UserSwapToken[];\n  tokenInSlug?: string;\n  pairsBySlug?: Record<string, AssetPairs>;\n  baseCurrency?: ApiBaseCurrency;\n  isLoading?: boolean;\n  isMultichain: boolean;\n  availableChains?: { [K in ApiChain]?: unknown };\n  isSensitiveDataHidden?: true;\n}\n\nenum SearchState {\n  Initial,\n  Search,\n  Loading,\n  TokenByAddress,\n  Empty,\n}\n\nconst EMPTY_ARRAY: never[] = [];\nconst EMPTY_OBJECT = {};\n\nfunction TokenSelector({\n  token,\n  userTokens: userTokensProp = EMPTY_ARRAY,\n  swapTokens = EMPTY_ARRAY,\n  popularTokens: popularTokensProp = EMPTY_ARRAY,\n  header,\n  shouldFilter,\n  shouldUseSwapTokens,\n  baseCurrency,\n  tokenInSlug,\n  pairsBySlug,\n  isActive,\n  isLoading,\n  shouldHideMyTokens,\n  shouldHideNotSupportedTokens = false,\n  isMultichain,\n  availableChains = EMPTY_OBJECT,\n  selectedChain,\n  isSensitiveDataHidden,\n  onTokenSelect,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const { importToken, resetImportToken, openSettingsWithState } = getActions();\n  const lang = useLang();\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  // eslint-disable-next-line no-null/no-null\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n  // eslint-disable-next-line no-null/no-null\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return enableSwipeToClose;\n  }, [isActive]);\n\n  useFocusAfterAnimation(searchInputRef, !isActive);\n\n  const {\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [searchValue, setSearchValue] = useState('');\n  const [isResetButtonVisible, setIsResetButtonVisible] = useState(false);\n  const [renderingKey, setRenderingKey] = useState(SearchState.Initial);\n  const [searchTokenList, setSearchTokenList] = useState<TokenType[]>([]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const filterTokens = useCallback((tokens: TokenType[]) => {\n    return filterAndSortTokens(tokens, isMultichain, tokenInSlug, pairsBySlug);\n  }, [pairsBySlug, tokenInSlug, isMultichain]);\n\n  const userTokens = useMemo(\n    () => filterSupportedTokens(userTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [userTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const allTokens = useMemo(\n    () => filterSupportedTokens(swapTokens, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [swapTokens, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const popularTokens = useMemo(\n    () => filterSupportedTokens(popularTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [popularTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const { userTokensWithFilter, popularTokensWithFilter, swapTokensWithFilter } = useMemo(() => {\n    if (!shouldFilter) {\n      return {\n        userTokensWithFilter: userTokens,\n        popularTokensWithFilter: popularTokens,\n        swapTokensWithFilter: swapTokens,\n      };\n    }\n\n    return {\n      userTokensWithFilter: filterTokens(userTokens),\n      popularTokensWithFilter: filterTokens(popularTokens),\n      swapTokensWithFilter: filterTokens(swapTokens),\n    };\n  }, [filterTokens, popularTokens, shouldFilter, swapTokens, userTokens]);\n\n  const filteredTokenList = useMemo(() => {\n    const tokensToFilter = shouldUseSwapTokens ? swapTokensWithFilter : allTokens;\n    const untrimmedSearchValue = searchValue.toLowerCase();\n    const lowerCaseSearchValue = untrimmedSearchValue.trim();\n\n    if (untrimmedSearchValue.length && !lowerCaseSearchValue.length) {\n      return [];\n    }\n\n    const filteredTokens = tokensToFilter.filter(({\n      name, symbol, keywords, isDisabled,\n    }) => {\n      if (isDisabled) {\n        return false;\n      }\n\n      const isName = name.toLowerCase().includes(lowerCaseSearchValue);\n      const isSymbol = symbol.toLowerCase().includes(lowerCaseSearchValue);\n      const isKeyword = keywords?.some((key) => key.toLowerCase().includes(lowerCaseSearchValue));\n\n      return isName || isSymbol || isKeyword;\n    }) ?? [];\n\n    const sortFactors = filteredTokens.reduce((acc, searchResultToken) => {\n      const factors = {\n        tickerExactMatch: 0,\n        tickerMatchLength: 0,\n        nameMatchLength: 0,\n        specialOrder: 0, // The higher the value, the higher the position\n      };\n\n      const tokenSymbol = searchResultToken.symbol.toLowerCase();\n      const tokenName = searchResultToken.name.toLowerCase();\n\n      if (tokenSymbol === lowerCaseSearchValue) {\n        factors.tickerExactMatch = 1;\n      }\n\n      if (tokenSymbol.includes(lowerCaseSearchValue)) {\n        factors.tickerMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (tokenName.includes(lowerCaseSearchValue)) {\n        factors.nameMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (searchResultToken.slug === TON_USDT_SLUG) {\n        factors.specialOrder = 2;\n      }\n\n      if (searchResultToken.slug === TRC20_USDT_MAINNET_SLUG || searchResultToken.slug === TRC20_USDT_TESTNET_SLUG) {\n        factors.specialOrder = 1;\n      }\n\n      acc[searchResultToken.slug] = factors;\n\n      return acc;\n    }, {} as Record<string, TokenSortFactors>);\n\n    return filteredTokens.sort((a, b) => {\n      const factorA = sortFactors[a.slug];\n      const factorB = sortFactors[b.slug];\n      const comparisonResult = compareTokens(factorA, factorB);\n      if (comparisonResult !== 0) return comparisonResult;\n\n      return Number(b.amount - a.amount);\n    });\n  }, [allTokens, shouldUseSwapTokens, searchValue, swapTokensWithFilter]);\n\n  const resetSearch = () => {\n    setSearchValue('');\n  };\n\n  useSyncEffect(() => {\n    setIsResetButtonVisible(Boolean(searchValue.length));\n\n    const isValidAddress = isValidAddressOrDomain(searchValue, 'ton');\n    let newRenderingKey = SearchState.Initial;\n\n    if (isLoading && isValidAddress) {\n      newRenderingKey = SearchState.Loading;\n    } else if (token && isValidAddress) {\n      newRenderingKey = SearchState.TokenByAddress;\n    } else if (searchValue.length && filteredTokenList.length !== 0) {\n      newRenderingKey = SearchState.Search;\n    } else if (filteredTokenList.length === 0) {\n      newRenderingKey = SearchState.Empty;\n    }\n\n    setRenderingKey(newRenderingKey);\n\n    if (newRenderingKey !== SearchState.Initial) {\n      setSearchTokenList(filteredTokenList);\n    }\n  }, [searchTokenList.length, isLoading, searchValue, token, filteredTokenList]);\n\n  useEffect(() => {\n    if (isValidAddressOrDomain(searchValue, 'ton')) {\n      importToken({ address: searchValue, isSwap: true });\n      setRenderingKey(SearchState.Loading);\n    } else {\n      resetImportToken();\n    }\n  }, [searchValue]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !scrollContainerRef.current) return;\n\n    scrollContainerRef.current.scrollTop = 0;\n  }, [isActive]);\n\n  const handleTokenClick = useLastCallback((selectedToken: TokenType) => {\n    searchInputRef.current?.blur();\n\n    onTokenSelect(selectedToken);\n\n    resetSearch();\n\n    onBack();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    onClose();\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  function renderSearch() {\n    return (\n      <div className={styles.tokenSelectInputWrapper}>\n        <i className={buildClassName(styles.tokenSelectSearchIcon, 'icon-search')} aria-hidden />\n        <input\n          ref={searchInputRef}\n          name=\"token-search-modal\"\n          className={styles.tokenSelectInput}\n          onChange={(e) => setSearchValue(e.target.value)}\n          placeholder={lang('Name or Address...')}\n          value={searchValue}\n        />\n        <Transition\n          name=\"fade\"\n          activeKey={isResetButtonVisible ? 0 : 1}\n          className={styles.tokenSelectSearchResetWrapper}\n        >\n          {isResetButtonVisible && (\n            <button\n              type=\"button\"\n              className={styles.tokenSelectSearchReset}\n              aria-label={lang('Clear')}\n              onClick={resetSearch}\n            >\n              <i className={buildClassName(styles.tokenSelectSearchResetIcon, 'icon-close')} aria-hidden />\n            </button>\n          )}\n        </Transition>\n      </div>\n    );\n  }\n\n  function renderToken(currentToken: TokenType) {\n    const isAvailable = Boolean(!shouldFilter || currentToken.canSwap);\n    const withChainIcon = Boolean((isMultichain || shouldUseSwapTokens) && !selectedChain);\n    const descriptionText = isAvailable\n      ? getChainNetworkName(currentToken.chain)\n      : lang('Unavailable');\n\n    const tokenPrice = currentToken.price === 0\n      ? lang('No Price')\n      : formatCurrency(currentToken.price, shortBaseSymbol, undefined, true);\n\n    return (\n      <Token\n        key={currentToken.slug}\n        isAvailable={isAvailable}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        withChainIcon={withChainIcon}\n        descriptionText={descriptionText}\n        token={currentToken}\n        tokenPrice={tokenPrice}\n        onSelect={handleTokenClick}\n      />\n    );\n  }\n\n  function renderTokenGroup(tokens: TokenType[], title: string, shouldShowSettings?: boolean) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        <div className={styles.tokenGroupHeader}>\n          <span className={styles.tokenGroupTitle}>{title}</span>\n          {shouldShowSettings && (\n            <span\n              className={styles.tokenGroupAdditionalTitle}\n              onClick={handleOpenSettings}\n            >\n              {lang('Settings')}\n            </span>\n          )}\n        </div>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderAllTokens(tokens: TokenType[]) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderTokenSkeleton() {\n    return (\n      <div className={buildClassName(styles.tokenContainer, styles.tokenContainerDisabled)}>\n        <div className={styles.tokenLogoContainer}>\n          <div className={styles.logoContainer}>\n            <div className={styles.tokenLogoSkeleton} />\n            <div className={styles.tokenNetworkLogoSkeleton} />\n          </div>\n          <div className={styles.nameContainer}>\n            <span className={styles.tokenNameSkeleton} />\n            <span className={styles.tokenValueSkeleton} />\n          </div>\n        </div>\n        <div className={styles.tokenPriceContainer}>\n          <span className={buildClassName(styles.tokenNameSkeleton, styles.rotateSkeleton)} />\n          <span className={styles.tokenValueSkeleton} />\n        </div>\n      </div>\n    );\n  }\n\n  function renderNotFound(shouldPlay: boolean) {\n    return (\n      <div className={styles.tokenNotFound}>\n        <AnimatedIconWithPreview\n          play={shouldPlay}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <span className={styles.tokenNotFoundTitle}>{lang('Not Found')}</span>\n        <span className={styles.tokenNotFoundDesc}>{lang('Try another keyword or address.')}</span>\n      </div>\n    );\n  }\n\n  function renderSearchResults(tokenToImport?: TokenType) {\n    if (tokenToImport) {\n      return (\n        <div className={styles.tokenGroupContainer}>\n          {renderToken(tokenToImport)}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n      </>\n    );\n  }\n\n  function renderTokenGroups() {\n    return (\n      <>\n        {!shouldHideMyTokens && renderTokenGroup(userTokensWithFilter, lang('MY'), true)}\n        {renderTokenGroup(popularTokensWithFilter, lang('POPULAR'))}\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SearchState.Initial:\n        return renderTokenGroups();\n      case SearchState.Loading:\n        return renderSearchResults();\n      case SearchState.Search:\n        return renderAllTokens(searchTokenList);\n      case SearchState.TokenByAddress:\n        return renderSearchResults(token);\n      case SearchState.Empty:\n        return renderNotFound(isContentActive);\n    }\n  }\n\n  return (\n    <>\n      {header || (\n        <ModalHeader\n          title={lang('Select Token')}\n          onBackButtonClick={onBack}\n          onClose={onClose}\n        />\n      )}\n      {renderSearch()}\n\n      <div\n        ref={scrollContainerRef}\n        className={buildClassName(styles.tokenSelectContent, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition name=\"fade\" activeKey={renderingKey}>\n          {renderContent}\n        </Transition>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { baseCurrency, isSensitiveDataHidden } = global.settings;\n  const { isLoading, token } = global.settings.importToken ?? {};\n  const { pairs: pairsBySlug, tokenInSlug } = global.currentSwap ?? {};\n  const userTokens = selectAvailableUserForSwapTokens(global);\n  const popularTokens = selectPopularTokens(global);\n  const swapTokens = selectSwapTokens(global);\n  const isMultichain = selectIsMultichainAccount(global, global.currentAccountId!);\n  const availableChains = selectCurrentAccount(global)?.addressByChain;\n\n  return {\n    baseCurrency,\n    isLoading,\n    token,\n    pairsBySlug: pairsBySlug?.bySlug,\n    tokenInSlug,\n    userTokens,\n    popularTokens,\n    swapTokens,\n    isMultichain,\n    availableChains,\n    isSensitiveDataHidden,\n  };\n})(TokenSelector));\n\nfunction Token({\n  token,\n  isAvailable,\n  isSensitiveDataHidden,\n  withChainIcon,\n  descriptionText,\n  tokenPrice,\n  onSelect,\n}: {\n  token: TokenType;\n  isAvailable: boolean;\n  isSensitiveDataHidden?: true;\n  withChainIcon: boolean;\n  descriptionText: string;\n  tokenPrice: string;\n  onSelect: (token: TokenType) => void;\n}) {\n  const handleClick = isAvailable ? () => onSelect(token) : undefined;\n  const cols = useMemo(() => getPseudoRandomNumber(4, 10, token.slug), [token.slug]);\n\n  return (\n    <div\n\n      className={buildClassName(\n        styles.tokenContainer,\n        !isAvailable && styles.tokenContainerDisabled,\n      )}\n      onClick={handleClick}\n    >\n      <div className={styles.tokenLogoContainer}>\n        <TokenIcon\n          token={token}\n          withChainIcon={withChainIcon}\n          className={buildClassName(styles.tokenLogo, !isAvailable && styles.tokenLogoDisabled)}\n        />\n\n        <div className={styles.nameContainer}>\n          <span className={buildClassName(styles.tokenName, !isAvailable && styles.tokenTextDisabled)}>\n            {token.name}\n          </span>\n          <span\n            className={buildClassName(\n              styles.tokenNetwork,\n              !isAvailable && styles.tokenTextDisabled,\n            )}\n          >\n            {descriptionText}\n          </span>\n        </div>\n      </div>\n      <div className={styles.tokenPriceContainer}>\n        <SensitiveData\n          isActive={isSensitiveDataHidden}\n          cols={cols}\n          rows={2}\n          cellSize={8}\n          align=\"right\"\n          className={buildClassName(\n            styles.tokenAmount,\n            !isAvailable && styles.tokenTextDisabled,\n          )}\n        >\n          {formatCurrency(toDecimal(token.amount, token?.decimals), token.symbol)}\n        </SensitiveData>\n        <span className={buildClassName(\n          styles.tokenValue,\n          !isAvailable && styles.tokenTextDisabled,\n        )}\n        >\n          {tokenPrice}\n        </span>\n      </div>\n    </div>\n  );\n}\n\nfunction filterAndSortTokens(\n  tokens: TokenType[],\n  isMultichain: boolean,\n  tokenInSlug?: string,\n  pairsBySlug?: Record<string, AssetPairs>,\n) {\n  if (!tokens.length || !tokenInSlug) return [];\n\n  return tokens.map((token) => {\n    const pair = pairsBySlug?.[tokenInSlug]?.[token.slug];\n    const canSwap = Boolean(isMultichain ? pair : (pair && !pair.isMultichain));\n    return { ...token, canSwap };\n  }).sort((a, b) => Number(b.canSwap) - Number(a.canSwap));\n}\n\nfunction compareTokens(a: TokenSortFactors, b: TokenSortFactors) {\n  if (a.specialOrder !== b.specialOrder) {\n    return b.specialOrder - a.specialOrder;\n  }\n  if (a.tickerExactMatch !== b.tickerExactMatch) {\n    return b.tickerExactMatch - a.tickerExactMatch;\n  }\n  if (a.tickerMatchLength !== b.tickerMatchLength) {\n    return b.tickerMatchLength - a.tickerMatchLength;\n  }\n  return b.nameMatchLength - a.nameMatchLength;\n}\n\nfunction filterSupportedTokens<T extends TokenType>(\n  tokens: T[],\n  isFilterActive: boolean,\n  availableChains: { [K in ApiChain]?: unknown },\n  selectedChain?: ApiChain,\n): T[] {\n  if (!isFilterActive && !selectedChain) {\n    return tokens;\n  }\n\n  return tokens.filter((token) => {\n    if (isFilterActive && !(token.chain in availableChains)) {\n      return false;\n    }\n\n    return !(selectedChain && token.chain !== selectedChain);\n  });\n}\n","import { FRACTION_DIGITS, WHOLE_PART_DELIMITER } from '../../../config';\n\nimport styles from '../Input.module.scss';\n\nexport function buildContentHtml(\n  text: string,\n  suffix?: string,\n  decimals = FRACTION_DIGITS,\n  withRadix = false,\n) {\n  const hasDot = text.includes('.');\n  const [wholePart = '0', fractionPart] = hasDot ? text.split('.') : [text];\n\n  const formattedWholePart = withRadix\n    ? wholePart.replace(/\\d(?=(\\d{3})+($|\\.))/g, `$&${WHOLE_PART_DELIMITER}`)\n    : wholePart;\n  const fractionStr = hasDot ? `.${(fractionPart || '').substring(0, decimals)}` : '';\n  const suffixStr = suffix ? `&thinsp;${suffix}` : '';\n  const extraSpan = fractionStr || suffixStr ? (\n    `<span class=\"${styles.fractional}\">${fractionStr}${suffixStr}</span>`\n  ) : '';\n\n  return `${formattedWholePart}${extraSpan}`;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { suppressStrict } from '../lib/fasterdom/stricterdom';\nimport buildClassName from '../util/buildClassName';\n\nconst MIN_SIZE_SCALE = 0.25; // 12px\n\nfunction useFontScale(inputRef: React.RefObject<HTMLElement>, shouldGetParentWidth?: boolean) {\n  const isFontChangedRef = useRef(false);\n  const measureEl = useRef(document.createElement('div'));\n\n  const updateFontScale = (content: string) => {\n    const input = inputRef.current;\n\n    suppressStrict(() => {\n      if (!input?.offsetParent) return;\n\n      let { clientWidth: width } = shouldGetParentWidth ? input.parentElement! : input;\n\n      if (shouldGetParentWidth) {\n        const { paddingLeft, paddingRight } = getComputedStyle(input);\n        width -= parseFloat(paddingLeft) + parseFloat(paddingRight);\n      }\n      measureEl.current.className = buildClassName(input.className, 'measure-hidden');\n      measureEl.current.style.width = `${width}px`;\n      measureEl.current.innerHTML = content;\n      document.body.appendChild(measureEl.current);\n\n      let delta = 1;\n\n      while (delta > MIN_SIZE_SCALE) {\n        measureEl.current.style.setProperty('--base-font-size', delta.toString());\n\n        if (measureEl.current.scrollWidth <= width) break;\n        delta -= 0.05;\n      }\n\n      isFontChangedRef.current = delta < 1;\n      document.body.removeChild(measureEl.current);\n      measureEl.current.className = '';\n      input.style.setProperty('--base-font-size', delta.toString());\n    });\n  };\n\n  return { updateFontScale, isFontChangedRef };\n}\n\nexport default useFontScale;\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { saveCaretPosition } from '../../util/saveCaretPosition';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFontScale from '../../hooks/useFontScale';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: React.ReactNode;\n  value?: string;\n  hasError?: boolean;\n  isLoading?: boolean;\n  suffix?: string;\n  className?: string;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  cornerClassName?: string;\n  children?: TeactNode;\n  onChange?: (value?: string) => void;\n  onBlur?: NoneToVoidFunction;\n  onFocus?: NoneToVoidFunction;\n  onPressEnter?: (e: React.KeyboardEvent<HTMLDivElement>) => void;\n  /** Expected to fire when regardless of the `disabled` prop value */\n  onInputClick?: NoneToVoidFunction;\n  decimals?: number;\n  disabled?: boolean;\n  isStatic?: boolean;\n  size?: 'large' | 'normal';\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberInput({\n  id,\n  labelText,\n  hasError,\n  isLoading = false,\n  suffix,\n  value,\n  children,\n  className,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  cornerClassName,\n  onChange,\n  onBlur,\n  onFocus,\n  onPressEnter,\n  onInputClick,\n  decimals = FRACTION_DIGITS,\n  disabled = false,\n  isStatic = false,\n  size = 'large',\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const lang = useLang();\n\n  const [hasFocus, markHasFocus, unmarkHasFocus] = useFlag(false);\n  const { updateFontScale, isFontChangedRef } = useFontScale(inputRef);\n\n  const textRef = useRef('');\n\n  const updateHtml = useLastCallback((newText: string) => {\n    const input = inputRef.current!;\n    const html = buildContentHtml(newText, suffix, decimals);\n\n    if (html !== input.innerHTML) {\n      const restoreCaretPosition = document.activeElement === input\n        ? saveCaretPosition(input, decimals)\n        : undefined;\n\n      input.innerHTML = html;\n      restoreCaretPosition?.();\n    }\n\n    if (newText.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale(html);\n    }\n  });\n\n  useLayoutEffect(() => {\n    const newText = clearText(value);\n\n    if (!newText || !textRef.current.startsWith(newText)) {\n      updateHtml(newText);\n      textRef.current = newText;\n    }\n  }, [decimals, textRef, value]);\n\n  function handleChange(e: React.FormEvent<HTMLDivElement>) {\n    const newText = clearText(e.currentTarget.textContent ?? undefined);\n\n    updateHtml(newText);\n\n    if (newText !== textRef.current) {\n      textRef.current = newText;\n\n      if (onChange && isValidValue(newText)) {\n        onChange(newText);\n      }\n    }\n  }\n\n  const handleFocus = useLastCallback(() => {\n    if (disabled) return;\n\n    markHasFocus();\n    onFocus?.();\n  });\n\n  const handleBlur = useLastCallback(() => {\n    if (disabled) return;\n\n    unmarkHasFocus();\n    onBlur?.();\n  });\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.key === 'Enter') {\n      onPressEnter?.(e);\n    }\n  };\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    isStatic && styles.inputWrapperStatic,\n    hasError && styles.error,\n    hasFocus && styles.input__wrapper_hasFocus,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.input,\n    styles.input_rich,\n    size === 'large' && styles.input_large,\n    valueClassName,\n    disabled && styles.disabled,\n    isLoading && styles.isLoading,\n    'rounded-font',\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    hasError && styles.error,\n    labelClassName,\n  );\n  const cornerFullClass = buildClassName(\n    cornerClassName,\n    hasFocus && styles.swapCorner,\n    hasError && styles.swapCorner_error,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {Boolean(labelText) && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n        <div\n          ref={inputRef}\n          contentEditable={!disabled && !isLoading}\n          id={id}\n          role=\"textbox\"\n          aria-required\n          aria-placeholder={lang('Amount value')}\n          aria-labelledby={labelText ? `${id}Label` : undefined}\n          tabIndex={0}\n          inputMode=\"decimal\"\n          className={inputFullClass}\n          onKeyDown={handleKeyDown}\n          onChange={handleChange}\n          onFocus={handleFocus}\n          onBlur={handleBlur}\n          onClick={onInputClick}\n        />\n        {children}\n      </div>\n      {cornerClassName && <div className={cornerFullClass} />}\n    </div>\n  );\n}\n\nfunction clearText(text?: string) {\n  if (!text) return '';\n\n  return (\n    text\n      .trim()\n      .replace(',', '.') // Replace comma to point\n      .replace(/[^\\d.]/g, '') // Remove incorrect symbols\n      .replace(/^0+(?=([1-9]|0\\.))/, '') // Trim extra zeros at beginning\n      .replace(/^0+$/, '0') // Trim extra zeros (if only zeros are entered)\n    ?? ''\n  );\n}\n\nfunction isValidValue(text: string) {\n  return !Number.isNaN(Number(text));\n}\n\nexport default memo(RichNumberInput);\n","export function saveCaretPosition(context: HTMLElement, decimals: number) {\n  const selection = window.getSelection();\n  if (!selection || selection.rangeCount === 0) {\n    return undefined;\n  }\n\n  const range = selection.getRangeAt(0);\n  range.setStart(context, 0);\n  const clearedValue = range.toString().match(new RegExp(`(\\\\d+(?:[.,]\\\\d{0,${decimals}})?)`));\n  const len = clearedValue?.[0]?.length || range.toString().length || 0;\n\n  return function restore() {\n    try {\n      const { node, position } = getTextNodeAtPosition(context, len);\n\n      selection.removeAllRanges();\n      const newRange = new Range();\n      newRange.setStart(node, position);\n      newRange.setEnd(node, position);\n      selection.addRange(newRange);\n    } catch (e) {\n      // ignore\n    }\n  };\n}\n\nfunction getTextNodeAtPosition(root: HTMLElement, index: number) {\n  const NODE_TYPE = NodeFilter.SHOW_TEXT;\n  const treeWalker = document.createTreeWalker(root, NODE_TYPE, (elem) => {\n    if (index > elem.textContent!.length) {\n      index -= elem.textContent!.length;\n      return NodeFilter.FILTER_REJECT;\n    }\n\n    return NodeFilter.FILTER_ACCEPT;\n  });\n\n  const node = treeWalker.nextNode();\n\n  return {\n    node: node || root,\n    position: index,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"pOo4Z_aH\",\"iosModalDialog\":\"q6jp1iyp\",\"contentWrapper\":\"jvZQQwjc\",\"content\":\"SRNIOpBE\",\"contentTitle\":\"GKe6CMiw\",\"contentTitleQr\":\"FleNuH6I\",\"contentTitleLedger\":\"uEJfLLFI\",\"contentTitleLedgerStatic\":\"zolk8bhu\",\"tabsInModal\":\"kxmoYeWl\",\"receiveHeader\":\"k3MxFquM\",\"receiveHeaderNoTabs\":\"RJOW3R8W\",\"contentStatic\":\"CDl3KL71\",\"tabs\":\"Bq7mtmdH\",\"tab\":\"YpO46ybD\",\"qrCode\":\"Bol24ap4\",\"qrCodeStatic\":\"VkwtgLpL\",\"qrCodeHidden\":\"yC4eGg0t\",\"labelForInvoice\":\"ykqIpMy7\",\"addressWrapper\":\"aUXplGt1\",\"copyButtonStatic\":\"EbsE8cY6\",\"tokenButton\":\"vgInBvx7\",\"invoiceComment\":\"U6Z9qzVb\",\"dottedLink\":\"xzGjTX1X\",\"actionButtons\":\"QxrwhhFf\",\"actionButton\":\"ARg65twE\"};","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport { IS_CAPACITOR, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal } from '../../util/decimals';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport formatTransferUrl from '../../util/ton/formatTransferUrl';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SelectTokenButton from '../common/SelectTokenButton';\nimport TokenSelector from '../common/TokenSelector';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  address?: string;\n}\n\nconst enum SLIDES {\n  Initial,\n  Selector,\n}\n\nfunction InvoiceModal({\n  address,\n  isOpen,\n}: StateProps) {\n  const { closeInvoiceModal } = getActions();\n\n  const lang = useLang();\n  const [isTokenSelectorOpen, openTokenSelector, closeTokenSelector] = useFlag(false);\n  const [amountValue, setAmountValue] = useState<string | undefined>(undefined);\n  const [comment, setComment] = useState<string>('');\n  const [selectedToken, setSelectedToken] = useState<ApiToken | undefined>(TONCOIN);\n\n  const decimals = selectedToken?.decimals ?? TONCOIN.decimals;\n  const amount = amountValue ? fromDecimal(amountValue, decimals) : 0n;\n  const invoiceUrl = address ? formatTransferUrl(address, amount, comment, selectedToken?.tokenAddress) : '';\n\n  const handleTokenSelect = useLastCallback((token: UserToken | UserSwapToken) => {\n    setSelectedToken(token as UserToken);\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.Initial:\n        return (\n          <>\n            <ModalHeader\n              title={lang('Deposit Link')}\n              onClose={closeInvoiceModal}\n            />\n            <div className={styles.content}>\n              <div className={styles.contentTitle}>\n                {renderText(lang('$receive_invoice_description'))}\n              </div>\n              <RichNumberInput\n                key=\"amount\"\n                id=\"amount\"\n                value={amountValue}\n                labelText={lang('Amount')}\n                onChange={setAmountValue}\n              >\n                <SelectTokenButton\n                  noChainIcon\n                  token={selectedToken}\n                  className={styles.tokenButton}\n                  onClick={openTokenSelector}\n                />\n              </RichNumberInput>\n              <Input\n                value={comment}\n                label={lang('Comment')}\n                placeholder={lang('Optional')}\n                wrapperClassName={styles.invoiceComment}\n                onInput={setComment}\n              />\n\n              <p className={styles.labelForInvoice}>\n                {lang('Share this URL to receive %token%', { token: selectedToken?.symbol })}\n              </p>\n              <InteractiveTextField\n                text={invoiceUrl}\n                addressUrl={IS_CAPACITOR ? invoiceUrl : undefined}\n                noExplorer\n                withShareInMenu={IS_CAPACITOR}\n                copyNotification={lang('Invoice link was copied!')}\n                className={styles.invoiceLinkField}\n              />\n            </div>\n          </>\n        );\n\n      case SLIDES.Selector:\n        return (\n          <TokenSelector\n            isActive={isActive}\n            shouldHideNotSupportedTokens\n            selectedChain=\"ton\"\n            onTokenSelect={handleTokenSelect}\n            onBack={closeTokenSelector}\n            onClose={closeInvoiceModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"invoice\"\n      onClose={closeInvoiceModal}\n      onCloseAnimationEnd={closeTokenSelector}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={isTokenSelectorOpen ? SLIDES.Selector : SLIDES.Initial}\n        nextKey={isTokenSelectorOpen ? SLIDES.Initial : SLIDES.Selector}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const address = selectAccount(global, global.currentAccountId!)?.addressByChain?.ton;\n\n    return {\n      isOpen: global.isInvoiceModalOpen,\n      address,\n    };\n  })(InvoiceModal),\n);\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animate } from './animation';\n\nconst DEFAULT_DURATION = 300;\n\nconst stopById: Map<string, VoidFunction> = new Map();\n\nexport default function animateHorizontalScroll(container: HTMLElement, left: number, duration = DEFAULT_DURATION) {\n  const isRtl = container.getAttribute('dir') === 'rtl';\n  const {\n    scrollLeft, offsetWidth: containerWidth, scrollWidth, dataset: { scrollId },\n  } = container;\n\n  let path = left - scrollLeft;\n\n  if (path < 0) {\n    const remainingPath = -scrollLeft * (isRtl ? -1 : 1);\n    path = Math.max(path, remainingPath);\n  } else if (path > 0) {\n    const remainingPath = scrollWidth - (scrollLeft + containerWidth);\n    path = Math.min(path, remainingPath);\n  }\n\n  if (path === 0) {\n    return Promise.resolve();\n  }\n\n  if (scrollId && stopById.has(scrollId)) {\n    stopById.get(scrollId)!();\n  }\n\n  const target = scrollLeft + path;\n\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      if (duration === 0) {\n        container.scrollLeft = target;\n        resolve();\n        return;\n      }\n\n      let isStopped = false;\n      const id = Math.random().toString();\n      container.dataset.scrollId = id;\n      stopById.set(id, () => {\n        isStopped = true;\n      });\n\n      container.style.scrollSnapType = 'none';\n\n      const startAt = Date.now();\n\n      animate(() => {\n        if (isStopped) return false;\n\n        const t = Math.min((Date.now() - startAt) / duration, 1);\n\n        const currentPath = path * (1 - transition(t));\n        container.scrollLeft = Math.round(target - currentPath);\n\n        if (t >= 1) {\n          container.style.scrollSnapType = '';\n          delete container.dataset.scrollId;\n          stopById.delete(id);\n          resolve();\n        }\n\n        return t < 1;\n      }, requestMutation);\n    });\n  });\n}\n\nfunction transition(t: number) {\n  return 1 - ((1 - t) ** 3.5);\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../global/types';\n\ninterface Layout {\n  withPortal?: boolean;\n}\n\nconst MENU_POSITION_VISUAL_COMFORT_SPACE_PX = 16;\nconst MENU_POSITION_BOTTOM_MARGIN = 12;\nconst EMPTY_RECT = {\n  width: 0, left: 0, height: 0, top: 0,\n};\n\nexport default function useMenuPosition(\n  anchor: IAnchorPosition | undefined,\n  getTriggerElement: () => HTMLElement | null,\n  getRootElement: () => HTMLElement | null,\n  getMenuElement: () => HTMLElement | null,\n  getLayout?: () => Layout,\n) {\n  const [positionX, setPositionX] = useState<'right' | 'left'>('right');\n  const [positionY, setPositionY] = useState<'top' | 'bottom'>('bottom');\n  const [transformOriginX, setTransformOriginX] = useState<number>();\n  const [transformOriginY, setTransformOriginY] = useState<number>();\n  const [withScroll, setWithScroll] = useState(false);\n  const [style, setStyle] = useState('');\n  const [menuStyle, setMenuStyle] = useState('opacity: 0;');\n\n  useEffect(() => {\n    const triggerEl = getTriggerElement();\n    if (!anchor || !triggerEl) {\n      return;\n    }\n\n    let { x, y } = anchor;\n    const anchorX = x;\n    const anchorY = y;\n\n    const menuEl = getMenuElement();\n    const rootEl = getRootElement();\n\n    const {\n      withPortal = false,\n    } = getLayout?.() || {};\n\n    const marginTop = menuEl ? parseInt(getComputedStyle(menuEl).marginTop, 10) : undefined;\n    const { offsetWidth: menuElWidth, offsetHeight: menuElHeight } = menuEl || { offsetWidth: 0, offsetHeight: 0 };\n    const menuRect = menuEl ? {\n      width: menuElWidth,\n      height: menuElHeight + marginTop!,\n    } : EMPTY_RECT;\n\n    const rootRect = rootEl ? rootEl.getBoundingClientRect() : EMPTY_RECT;\n\n    let horizontalPosition: 'left' | 'right';\n    let verticalPosition: 'top' | 'bottom';\n    if (x - menuRect.width - rootRect.left > 0) {\n      horizontalPosition = 'right';\n      x -= 3;\n    } else {\n      horizontalPosition = 'left';\n      x = 16;\n    }\n    setPositionX(horizontalPosition);\n\n    if (y + menuRect.height < rootRect.height + rootRect.top) {\n      verticalPosition = 'top';\n    } else {\n      verticalPosition = 'bottom';\n\n      if (y - menuRect.height < rootRect.top) {\n        y = rootRect.top + rootRect.height;\n      }\n    }\n\n    setPositionY(verticalPosition);\n\n    const triggerRect = triggerEl.getBoundingClientRect();\n\n    const addedYForPortalPositioning = (withPortal ? triggerRect.top : 0);\n    const addedXForPortalPositioning = (withPortal ? triggerRect.left : 0);\n\n    const leftWithPossibleNegative = Math.min(\n      x - triggerRect.left,\n      rootRect.width - menuRect.width - MENU_POSITION_VISUAL_COMFORT_SPACE_PX,\n    );\n    const left = (horizontalPosition === 'left'\n      ? (withPortal\n        ? Math.max(MENU_POSITION_VISUAL_COMFORT_SPACE_PX, leftWithPossibleNegative)\n        : leftWithPossibleNegative)\n      : (x - triggerRect.left)) + addedXForPortalPositioning;\n    const top = y - triggerRect.top + addedYForPortalPositioning;\n\n    const menuMaxHeight = rootRect.height - MENU_POSITION_BOTTOM_MARGIN - (marginTop || 0);\n\n    setWithScroll(menuMaxHeight < menuRect.height);\n    setMenuStyle(`max-height: ${menuMaxHeight}px;`);\n    setStyle(`left: ${left}px; top: ${top}px`);\n    const offsetX = (anchorX + addedXForPortalPositioning - triggerRect.left) - left;\n    const offsetY = (anchorY + addedYForPortalPositioning - triggerRect.top) - top - (marginTop || 0);\n    setTransformOriginX(horizontalPosition === 'left' ? offsetX : menuRect.width + offsetX);\n    setTransformOriginY(verticalPosition === 'bottom' ? menuRect.height + offsetY : offsetY);\n  }, [\n    anchor, getMenuElement, getRootElement, getTriggerElement, getLayout,\n  ]);\n\n  return {\n    positionX,\n    positionY,\n    transformOriginX,\n    transformOriginY,\n    style,\n    menuStyle,\n    withScroll,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"Tab\":\"D6as8ltx\",\"tab\":\"D6as8ltx\",\"Tab_active\":\"O4d43EtE\",\"tabActive\":\"O4d43EtE\",\"content\":\"vwr4su2y\",\"interactive\":\"MiCetFPJ\",\"platform\":\"QAOyOloL\",\"platform_animate\":\"K0kRAFlY\",\"platformAnimate\":\"K0kRAFlY\",\"menuItem\":\"tUY9MzOP\"};","import React, {\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles } from '../../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport forceReflow from '../../util/forceReflow';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMenuPosition from '../../hooks/useMenuPosition';\n\nimport DropdownMenu from './DropdownMenu';\n\nimport styles from './Tab.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  title: string;\n  isActive?: boolean;\n  previousActiveTab?: number;\n  menuItems?: DropdownItem[];\n  onClick: (arg: number) => void;\n  clickArg: number;\n  onMenuItemClick?: (value: string) => void;\n};\n\nfunction Tab({\n  className,\n  title,\n  isActive,\n  previousActiveTab,\n  menuItems,\n  onClick,\n  clickArg,\n  onMenuItemClick,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const tabRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentRef = useRef<HTMLDivElement>(null);\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition | undefined>();\n  const hasMenu = Boolean(menuItems?.length);\n  const isMenuOpen = Boolean(menuPosition);\n\n  const getTriggerElement = useLastCallback(() => contentRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n  const closeMenu = useLastCallback(() => setMenuPosition(undefined));\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleClick = useLastCallback(() => {\n    if (isActive && !hasMenu) return;\n\n    if (!isActive) {\n      onClick(clickArg);\n      return;\n    }\n\n    if (isMenuOpen) {\n      closeMenu();\n    } else {\n      const { right: x, y, height } = contentRef.current!.getBoundingClientRect();\n      setMenuPosition({ x, y: y + height });\n    }\n  });\n\n  useLayoutEffect(() => {\n    // Set initial active state\n    if (isActive && previousActiveTab === undefined && tabRef.current) {\n      addExtraClass(tabRef.current, styles.Tab_active);\n    }\n  }, [isActive, previousActiveTab]);\n\n  useEffect(() => {\n    if (!isActive || previousActiveTab === undefined) {\n      return;\n    }\n\n    const tabEl = tabRef.current!;\n    const prevTabEl = tabEl.parentElement!.children[previousActiveTab] as HTMLElement;\n    if (!prevTabEl) {\n      // The number of tabs in the parent component has decreased. It is necessary to add the active tab class name.\n      if (isActive && !tabEl.classList.contains(styles.Tab_active)) {\n        requestMutation(() => {\n          addExtraClass(tabEl, styles.Tab_active);\n        });\n      }\n      return;\n    }\n\n    const platformEl = tabEl.querySelector<HTMLElement>(`.${styles.platform}`)!;\n    const prevPlatformEl = prevTabEl.querySelector<HTMLElement>(`.${styles.platform}`)!;\n\n    // We move and resize the platform, so it repeats the position and size of the previous one\n    const shiftLeft = prevPlatformEl.parentElement!.offsetLeft - platformEl.parentElement!.offsetLeft;\n    const scaleFactor = prevPlatformEl.clientWidth / platformEl.clientWidth;\n\n    requestMutation(() => {\n      removeExtraClass(prevPlatformEl, styles.platform_animate);\n      removeExtraClass(platformEl, styles.platform_animate);\n      setExtraStyles(platformEl, {\n        transform:\n        `translate3d(${shiftLeft}px, 0, 0) scale3d(${scaleFactor}, 1, 1)`,\n      });\n\n      requestForcedReflow(() => {\n        forceReflow(platformEl);\n\n        return () => {\n          addExtraClass(platformEl, styles.platform_animate);\n          setExtraStyles(platformEl, { transform: 'none' });\n\n          removeExtraClass(prevTabEl, styles.Tab_active);\n          addExtraClass(tabEl, styles.Tab_active);\n        };\n      });\n    });\n  }, [isActive, previousActiveTab]);\n\n  return (\n    <div\n      className={buildClassName(styles.Tab, className, hasMenu && styles.interactive)}\n      onClick={handleClick}\n      ref={tabRef}\n    >\n      <span className={styles.content} ref={contentRef}>\n        {title}\n        {hasMenu && isActive && <i className=\"icon-caret-down\" aria-hidden />}\n        <i className={styles.platform} aria-hidden />\n      </span>\n      {hasMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          items={menuItems!}\n          withPortal\n          buttonClassName={styles.menuItem}\n          menuPositionHorizontal=\"right\"\n          menuPosition={positionY}\n          menuStyle={menuStyle}\n          transformOriginX={transformOriginX}\n          transformOriginY={transformOriginY}\n          onSelect={onMenuItemClick}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Tab;\n","import React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport animateHorizontalScroll from '../../util/animateHorizontalScroll';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport Tab from './Tab';\n\nimport styles from './TabList.module.scss';\n\nexport type TabWithProperties = {\n  id: number;\n  title: string;\n  className?: string;\n  menuItems?: DropdownItem[];\n  onMenuItemClick?: (value: string) => void;\n};\n\ntype OwnProps = {\n  tabs: readonly TabWithProperties[];\n  activeTab: number;\n  big?: boolean;\n  className?: string;\n  withBorder?: boolean;\n  onSwitchTab: (index: number) => void;\n};\n\nconst TAB_SCROLL_THRESHOLD_PX = 16;\n// Should match duration from `--slide-transition` CSS variable\nconst SCROLL_DURATION = IS_IOS ? 450 : IS_ANDROID ? 400 : 300;\n\nfunction TabList({\n  tabs, activeTab, big, className, withBorder, onSwitchTab,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const previousActiveTab = usePrevious(activeTab);\n\n  const fullClassName = buildClassName(\n    styles.container,\n    big && styles.big,\n    withBorder && styles.withBorder,\n    'no-scrollbar',\n    className,\n  );\n\n  useHorizontalScroll({\n    containerRef,\n    shouldPreventDefault: true,\n  });\n\n  // Scroll container to place active tab in the center\n  useEffect(() => {\n    const container = containerRef.current!;\n    const { scrollWidth, offsetWidth, scrollLeft } = container;\n    if (scrollWidth <= offsetWidth) {\n      return;\n    }\n\n    const activeTabElement = container.childNodes[activeTab] as HTMLElement | null;\n    if (!activeTabElement) {\n      return;\n    }\n\n    const { offsetLeft: activeTabOffsetLeft, offsetWidth: activeTabOffsetWidth } = activeTabElement;\n    const newLeft = activeTabOffsetLeft - (offsetWidth / 2) + (activeTabOffsetWidth / 2);\n\n    // Prevent scrolling by only a couple of pixels, which doesn't look smooth\n    if (Math.abs(newLeft - scrollLeft) < TAB_SCROLL_THRESHOLD_PX) {\n      return;\n    }\n\n    void animateHorizontalScroll(container, newLeft, SCROLL_DURATION);\n  }, [activeTab]);\n\n  return (\n    <div ref={containerRef} className={fullClassName}>\n      {tabs.map((tab, i) => (\n        <Tab\n          key={tab.title}\n          title={tab.title}\n          isActive={i === activeTab}\n          previousActiveTab={previousActiveTab}\n          className={tab?.className}\n          menuItems={tab?.menuItems}\n          onMenuItemClick={tab?.onMenuItemClick}\n          onClick={onSwitchTab}\n          clickArg={tab.id}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(TabList);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Jya4TQTw\",\"withBorder\":\"edZdDyi5\",\"big\":\"lM5X6ama\"};","// extracted by mini-css-extract-plugin\nexport default {\"actionSheetDialog\":\"Vdr2S2qS\",\"actionButtons\":\"eWsAO42f\",\"actionButtonStatic\":\"E2TFEkdV\",\"actionButton\":\"GUHQ1MCW\",\"disabled\":\"wOo6dgfN\",\"actionIcon\":\"Zc6rtbsT\",\"iconChevronRight\":\"onRwV8fb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG, TONCOIN } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n}\n\nfunction TonActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n    openInvoiceModal,\n    closeReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'ton' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n      tokenOutSlug: TONCOIN.slug,\n      amountIn: '100',\n    });\n    onClose?.();\n  });\n\n  const handleReceiveClick = useLastCallback(() => {\n    closeReceiveModal();\n    openInvoiceModal();\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div className={styles.actionButton} onClick={handleBuyFiat}>\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      <div className={styles.actionButton} onClick={handleReceiveClick}>\n        <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n        {lang('Create Deposit Link')}\n        <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n  };\n})(TonActions));\n","import type QRCodeStyling from 'qr-code-styling';\nimport {\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../lib/teact/teact';\nimport { removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { ApiChain } from '../api/types';\n\nimport { IS_CORE_WALLET } from '../config';\nimport getChainNetworkIcon from '../util/swap/getChainNetworkIcon';\nimport formatTransferUrl from '../util/ton/formatTransferUrl';\n\nconst QR_SIZE = 600;\n\ninterface UseQRCodeHook {\n  qrCodeRef: React.RefObject<HTMLDivElement>;\n  isInitialized: boolean;\n}\n\nlet qrCode: QRCodeStyling;\n\nexport default function useQrCode({\n  address,\n  chain,\n  isActive,\n  hiddenClassName,\n  hideLogo,\n  withFormatTransferUrl,\n}: {\n  address?: string;\n  chain?: ApiChain;\n  isActive?: boolean;\n  hiddenClassName?: string;\n  hideLogo?: boolean;\n  withFormatTransferUrl?: boolean;\n}): UseQRCodeHook {\n  const [isInitialized, setIsInitialized] = useState(!!qrCode);\n  const logoUrl = IS_CORE_WALLET ? './coreWallet/logo.svg' : './logo.svg';\n\n  // eslint-disable-next-line no-null/no-null\n  const qrCodeRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (isInitialized) return;\n\n    void import('qr-code-styling')\n      .then(({ default: QrCodeStyling }) => {\n        qrCode = new QrCodeStyling({\n          width: QR_SIZE,\n          height: QR_SIZE,\n          image: chain ? getChainNetworkIcon(chain) : logoUrl,\n          margin: 0,\n          type: 'canvas',\n          dotsOptions: { type: 'rounded' },\n          cornersSquareOptions: { type: 'extra-rounded' },\n          imageOptions: { imageSize: 0.4, margin: 8, crossOrigin: 'anonymous' },\n          qrOptions: { errorCorrectionLevel: 'M' },\n          data: formatTransferUrl(''),\n        });\n\n        setIsInitialized(true);\n      });\n  }, [chain, isInitialized, logoUrl]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !isInitialized) return;\n\n    if (qrCodeRef.current && hiddenClassName) removeExtraClass(qrCodeRef.current, hiddenClassName);\n\n    if (qrCodeRef.current) {\n      qrCode?.append(qrCodeRef.current);\n      // eslint-disable-next-line no-underscore-dangle\n      qrCode._options.image = hideLogo\n        ? undefined\n        : (chain ? getChainNetworkIcon(chain) : logoUrl);\n    }\n  }, [isActive, isInitialized, hiddenClassName, hideLogo, chain, logoUrl]);\n\n  useEffect(() => {\n    if (!address || !isActive || !qrCode || !isInitialized) return;\n\n    qrCode.update({ data: withFormatTransferUrl ? formatTransferUrl(address) : address });\n  }, [address, isActive, isInitialized, withFormatTransferUrl]);\n\n  return { qrCodeRef, isInitialized };\n}\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TonActions from './TonActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  isLedger?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TonContent({\n  isActive,\n  isStatic,\n  isLedger,\n  address,\n  onClose,\n}: OwnProps) {\n  const { verifyHardwareAddress } = getActions();\n\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'ton',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: true,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  const handleVerify = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    verifyHardwareAddress();\n  };\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_ton_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"ton\"\n        address={address!}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {isLedger && (\n        <div className={buildClassName(\n          styles.contentTitle, styles.contentTitleLedger, isStatic && styles.contentTitleLedgerStatic,\n        )}\n        >\n          {renderText(lang('$ledger_verify_address'))}\n          {' '}\n          <a href=\"#\" onClick={handleVerify} className={styles.dottedLink}>\n            {lang('Verify now')}\n          </a>\n        </div>\n      )}\n\n      {!isStatic && <TonActions isLedger={isLedger} onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TonContent);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiCountryCode } from '../../../api/types';\n\nimport { DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG, TRX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  countryCode?: ApiCountryCode;\n}\n\nfunction TronActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  countryCode,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const canBuyWithCard = countryCode !== 'RU';\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  // TRX purchase is not possible via the Dreamwalkers service (Russian), however in static mode we show the buy button\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled && (canBuyWithCard || isStatic);\n  const shouldRender = Boolean(isSwapAllowed || isOnRampAllowed || isStatic);\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'tron' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG,\n      tokenOutSlug: TRX.slug,\n      amountIn: '10',\n    });\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div\n          className={buildClassName(styles.actionButton, !canBuyWithCard && styles.disabled)}\n          onClick={canBuyWithCard ? handleBuyFiat : undefined}\n        >\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isStatic && (\n        <div className={buildClassName(styles.actionButton, styles.disabled)}>\n          <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n          {lang('Create Deposit Link')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  };\n})(TronActions));\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TronActions from './TronActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TronContent({\n  isActive,\n  isStatic,\n  address,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'tron',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: false,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_tron_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"tron\"\n        address={address!}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {!isStatic && <TronActions onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TronContent);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { TabWithProperties } from '../ui/TabList';\n\nimport { selectAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport TabList from '../ui/TabList';\nimport Transition from '../ui/Transition';\nimport TonActions from './content/TonActions';\nimport TonContent from './content/TonContent';\nimport TronActions from './content/TronActions';\nimport TronContent from './content/TronContent';\n\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  addressByChain?: Record<ApiChain, string>;\n  isLedger?: boolean;\n}\n\ntype OwnProps = {\n  isOpen?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n};\n\nconst TON_TAB_ID = 0;\nconst TRON_TAB_ID = 1;\n\nfunction Content({\n  isOpen, addressByChain, isStatic, isLedger, onClose,\n}: StateProps & OwnProps) {\n  // `lang.code` is used to force redrawing of the `Transition` content,\n  // since the height of the content differs from translation to translation.\n  const lang = useLang();\n\n  const { isPortrait } = useDeviceScreen();\n\n  const tabs = useMemo(() => {\n    const result: TabWithProperties[] = [];\n    if (addressByChain?.ton) {\n      result.push({\n        id: TON_TAB_ID,\n        title: 'TON',\n        className: styles.tab,\n      });\n    }\n    if (addressByChain?.tron) {\n      result.push({\n        id: TRON_TAB_ID,\n        title: 'TRON',\n        className: styles.tab,\n      });\n    }\n\n    return result;\n  }, [addressByChain?.ton, addressByChain?.tron]);\n\n  const [activeTab, setActiveTab] = useState<number>(tabs.length ? tabs[0].id : 0);\n\n  function renderActions() {\n    if (tabs[activeTab]?.id === TRON_TAB_ID) {\n      return <TronActions isStatic />;\n    }\n\n    return <TonActions isStatic isLedger={isLedger} />;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TON_TAB_ID:\n        return (\n          <TonContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            isLedger={isLedger}\n            address={addressByChain!.ton}\n            onClose={onClose}\n          />\n        );\n\n      case TRON_TAB_ID:\n        return (\n          <TronContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            address={addressByChain!.tron}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  if (!tabs.length) {\n    return undefined;\n  }\n\n  return (\n    <>\n      {isStatic && renderActions()}\n\n      {tabs.length > 1 && (\n        <TabList\n          withBorder\n          tabs={tabs}\n          activeTab={activeTab}\n          className={buildClassName(styles.tabs, !isStatic && styles.tabsInModal)}\n          onSwitchTab={setActiveTab}\n        />\n      )}\n      <Transition\n        key={`content_${lang.code}`}\n        activeKey={activeTab}\n        name={isPortrait ? 'slide' : 'slideFade'}\n        className={styles.contentWrapper}\n        slideClassName={buildClassName(styles.content, isStatic && styles.contentStatic, 'custom-scroll')}\n        shouldRestoreHeight={isStatic}\n      >\n        {renderContent}\n      </Transition>\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const account = selectAccount(global, global.currentAccountId!);\n\n    return {\n      addressByChain: account?.addressByChain,\n      isLedger: Boolean(account?.ledger),\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId))(Content),\n);\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { selectCurrentAccount, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Content from './Content';\n\nimport styles from './ReceiveModal.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n  isLedger?: boolean;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isOnRampDisabled: boolean;\n  isMultichainAccount: boolean;\n};\n\nfunction ReceiveModal({\n  isOpen,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isMultichainAccount,\n}: StateProps) {\n  const { closeReceiveModal } = getActions();\n\n  const lang = useLang();\n\n  const { isLandscape } = useDeviceScreen();\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const modalTitle = lang(isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  useEffect(() => {\n    if (isOpen && isLandscape) {\n      closeReceiveModal();\n    }\n  }, [isLandscape, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      dialogClassName={IS_IOS_APP ? styles.iosModalDialog : styles.modalDialog}\n      nativeBottomSheetKey=\"receive\"\n      onClose={closeReceiveModal}\n    >\n      <ModalHeader\n        title={modalTitle}\n        className={buildClassName(styles.receiveHeader, !isMultichainAccount && styles.receiveHeaderNoTabs)}\n        onClose={closeReceiveModal}\n      />\n      <Content\n        isOpen={isOpen}\n        onClose={closeReceiveModal}\n      />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n  const account = selectCurrentAccount(global);\n\n  return {\n    isOpen: global.isReceiveModalOpen,\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    isLedger: Boolean(account?.ledger),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(ReceiveModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"o0ZmVyIN\",\"purple\":\"DJCb7ytz\",\"tokenIcon\":\"O2XO33Bj\",\"chainIcon\":\"UKA4ZfVj\",\"green\":\"IHTEYaZx\",\"nftIcon\":\"kRGDvyHS\",\"image\":\"Q3m3aAJ1\",\"text\":\"LrHNEZly\",\"bold\":\"GQC2YXcS\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\n\nimport useLang from '../../hooks/useLang';\n\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TransactionBanner.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  imageUrl?: string;\n  text: string | TeactNode[];\n  withChainIcon?: boolean;\n  tokenOut?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  secondText?: string;\n  color?: 'purple' | 'green';\n  className?: string;\n}\n\nfunction TransactionBanner({\n  tokenIn,\n  imageUrl,\n  text,\n  withChainIcon,\n  tokenOut,\n  secondText,\n  color,\n  className,\n}: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.root,\n    color && styles[color],\n    className,\n  );\n\n  function renderNftIcon() {\n    return (\n      <div className={styles.nftIcon}>\n        <img src={imageUrl} alt=\"\" className={styles.image} />\n        {withChainIcon && tokenIn?.chain && (\n          <img\n            src={getChainNetworkIcon(tokenIn.chain)}\n            alt=\"\"\n            className={styles.chainIcon}\n            draggable={false}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={fullClassName}>\n      {tokenIn && !imageUrl && (\n        <TokenIcon\n          token={tokenIn}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n      {imageUrl && renderNftIcon()}\n      <span className={styles.text}>\n        {secondText\n          ? (\n            lang('%amount% to %address%', {\n              amount: <span className={styles.bold}>{text}</span>,\n              address: <span className={styles.bold}>{secondText}</span>,\n            }))\n          : <span className={styles.bold}>{text}</span>}\n      </span>\n      {tokenOut && (\n        <TokenIcon\n          token={tokenOut}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(TransactionBanner);\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"BQ2dFF1C\",\"amount\":\"ZK1jiZZ7\",\"amount_purple\":\"A4q4bGl9\",\"amountPurple\":\"A4q4bGl9\",\"amount_green\":\"juLGV08g\",\"amountGreen\":\"juLGV08g\",\"amountSymbol\":\"pIw09HQw\",\"amountFraction\":\"AxDVO85U\",\"buttons\":\"VBRINuzy\",\"buttonsAfterNft\":\"kg0TjtvC\",\"button\":\"ONW_pS7t\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './TransferResult.module.scss';\n\ninterface OwnProps {\n  playAnimation?: boolean;\n  color?: 'green' | 'purple';\n  noSign?: boolean;\n  amount?: bigint;\n  tokenSymbol?: string;\n  decimals?: number;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n}\n\nfunction TransferResult({\n  playAnimation,\n  amount = 0n,\n  tokenSymbol = TONCOIN.symbol,\n  decimals = TONCOIN.decimals,\n  noSign,\n  color,\n  firstButtonText,\n  secondButtonText,\n  onFirstButtonClick,\n  onSecondButtonClick,\n}: OwnProps) {\n  const amountString = toDecimal(amount, decimals);\n  const [wholePart, fractionPart] = formatCurrencyExtended(amountString, '', noSign, decimals).split('.');\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button className={styles.button} onClick={onFirstButtonClick}>{firstButtonText}</Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n\n      <div className={buildClassName(styles.amount, color && styles[`amount_${color}`], 'rounded-font')}>\n        {wholePart.trim().replace('\\u202F', '').replace('-', '')}\n        {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n        <span className={styles.amountSymbol}>{tokenSymbol}</span>\n      </div>\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(TransferResult);\n","import { useMemo, useRef } from '../lib/teact/teact';\n\n// Use this hook to bind `<Transition />` animation to changes in the dependency array.\n// Use optional parameter `noAnimation` if you want to prevent the animation even if the dependency array changes.\nexport function useTransitionActiveKey(deps: any[], noAnimation?: boolean): number {\n  const activeKey = useRef(0);\n  let didUpdate = false;\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useMemo(() => { activeKey.current += 1; didUpdate = true; }, deps);\n\n  if (noAnimation && didUpdate) activeKey.current -= 1;\n\n  return activeKey.current;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"cFsfR8fg\",\"content\":\"LQwjgmr0\",\"link\":\"uq1QRToN\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiToken } from '../../api/types';\n\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, formatCurrencySimple } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\n\nimport Transition from './Transition';\n\nimport styles from './AmountFieldMaxButton.module.scss';\n\ninterface OwnProps {\n  maxAmount?: bigint;\n  token?: Pick<ApiToken, 'symbol' | 'decimals'>;\n  isLoading?: boolean;\n  isSensitiveDataHidden?: boolean;\n  /** If true, the label will say \"All\" instead of \"Max\" and all the amount digits will be shown (made for unstaking) */\n  isAllMode?: boolean;\n  onAmountClick: NoneToVoidFunction;\n}\n\n/**\n * Put the element right above a <RichNumberInput />, it will take the space right to the input label without moving the\n * around content.\n */\nfunction AmountFieldMaxButton({\n  maxAmount,\n  token,\n  isLoading,\n  isSensitiveDataHidden,\n  isAllMode,\n  onAmountClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  const content = isLoading\n    ? lang('Loading...')\n    : !token || maxAmount === undefined\n      ? ''\n      : isSensitiveDataHidden\n        ? `*** ${token.symbol}`\n        : isAllMode\n          ? formatCurrencySimple(maxAmount, token.symbol, token.decimals)\n          : formatCurrency(toDecimal(maxAmount, token.decimals), token.symbol);\n\n  const transitionKey = useTransitionActiveKey([!content, token?.symbol, isLoading, isSensitiveDataHidden]);\n\n  return (\n    <Transition name=\"fade\" activeKey={transitionKey} className={styles.container}>\n      {content && (\n        <span className={styles.content}>\n          {lang(isAllMode ? '$all_balance' : '$max_balance', {\n            balance: (\n              <div\n                role=\"button\"\n                tabIndex={0}\n                onClick={() => onAmountClick()}\n                className={styles.link}\n              >\n                {content}\n              </div>\n            ),\n          })}\n        </span>\n      )}\n    </Transition>\n  );\n}\n\nexport default memo(AmountFieldMaxButton);\n","import { TONCOIN } from '../../config';\nimport withCache from '../../util/withCache';\n\nexport const getNumberRegex = withCache((decimals: number): RegExp => {\n  return decimals === 0\n    ? /^(\\d+)/\n    : new RegExp(`^(\\\\d+)([.,])?(\\\\d{1,${decimals}})?`);\n});\n\nexport function getNumberParts(value: string, decimals: number = TONCOIN.decimals) {\n  const regex = getNumberRegex(decimals);\n  return value.match(regex) || undefined;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport type { SensitiveDataMaskSkin } from '../common/SensitiveDataMask';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport { getNumberRegex } from '../../global/helpers/number';\nimport buildClassName from '../../util/buildClassName';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFontScale from '../../hooks/useFontScale';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SensitiveData from './SensitiveData';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: string;\n  value?: string;\n  error?: string;\n  suffix?: string;\n  zeroValue?: string;\n  decimals?: number;\n  className?: string;\n  isSensitiveData?: true;\n  isSensitiveDataHidden?: true;\n  sensitiveDataMaskSkin?: SensitiveDataMaskSkin;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  children?: TeactNode;\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberField({\n  id,\n  labelText,\n  value,\n  error,\n  suffix,\n  zeroValue,\n  decimals = FRACTION_DIGITS,\n  className,\n  isSensitiveData,\n  isSensitiveDataHidden,\n  sensitiveDataMaskSkin,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  children,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const contentRef = useRef<HTMLInputElement | null>(null);\n  const prevValueRef = useRef<string>('');\n  const { updateFontScale, isFontChangedRef } = useFontScale(contentRef, true);\n\n  const renderValue = useLastCallback((inputValue = '', noFallbackToPrev = false) => {\n    const contentEl = contentRef.current!;\n\n    const valueRegex = getNumberRegex(decimals);\n    const values = inputValue.match(valueRegex);\n\n    // eslint-disable-next-line no-null/no-null\n    if (values === null || values.length < 4 || values[0] === '') {\n      if (noFallbackToPrev || inputValue === '') {\n        prevValueRef.current = '';\n        contentEl.innerText = '';\n      } else {\n        renderValue(prevValueRef.current, true);\n      }\n\n      return;\n    }\n    const textContent = values?.[0] || '';\n    prevValueRef.current = inputValue;\n\n    const content = buildContentHtml(inputValue, suffix, decimals, true);\n    contentEl.innerHTML = content;\n\n    if (textContent.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale(content);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (value) {\n      renderValue(value);\n    } else if (zeroValue) {\n      contentRef.current!.innerHTML = zeroValue;\n    }\n  }, [decimals, renderValue, value, zeroValue]);\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.input,\n    styles.input_rich,\n    styles.input_large,\n    styles.disabled,\n    error && styles.error,\n    'rounded-font',\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    labelClassName,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {error && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {labelText && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        {isSensitiveData ? (\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={8}\n            rows={3}\n            cellSize={16}\n            maskSkin={sensitiveDataMaskSkin}\n            className={inputFullClass}\n            contentClassName={valueClassName}\n            maskClassName={styles.mask}\n          >\n            <div ref={contentRef} id={id} />\n          </SensitiveData>\n        ) : (\n          <div ref={contentRef} id={id} className={buildClassName(inputFullClass, valueClassName)} />\n        )}\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(RichNumberField);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"oJIiPolp\",\"welcome\":\"TiFPq3C6\",\"welcome_static\":\"Rv6oYnJ8\",\"welcomeStatic\":\"Rv6oYnJ8\",\"welcomeInformation\":\"Xg9cqUJJ\",\"welcomeInformation_static\":\"o_nJd5KS\",\"welcomeInformationStatic\":\"o_nJd5KS\",\"stakingApy\":\"HKeaaGYy\",\"textButton\":\"fole9hpS\",\"sticker\":\"bPhlS4F_\",\"sticker_static\":\"uaQ89610\",\"stickerStatic\":\"uaQ89610\",\"stakingSafeDialog\":\"zNAkvVGS\",\"ton\":\"dRmsmePr\",\"tonIcon\":\"nWRXjyrv\",\"tonName\":\"M_R_H7ar\",\"amountBottomWrapper\":\"LEdLaJfa\",\"amountBottomWrapper_static\":\"u8l2R2oR\",\"amountBottomWrapperStatic\":\"u8l2R2oR\",\"amountBottom\":\"MgCN1q08\",\"amountBottomRight\":\"VuUMtt0r\",\"amountBottomRight_error\":\"XziKGimY\",\"amountBottomRightError\":\"XziKGimY\",\"amountBottomRight_slide\":\"D7jfmDqZ\",\"amountBottomRightSlide\":\"D7jfmDqZ\",\"animating\":\"idaRXWqT\",\"from\":\"w5MTAdBs\",\"to\":\"OH6m_v4W\",\"balanceError\":\"XV91oi_1\",\"minAmountValue\":\"N25bZnkf\",\"amountInCurrency\":\"QVMu65Mz\",\"historyTotalValue\":\"ps_1E9fe\",\"stakingBalance\":\"ZzjyhAIi\",\"amountInput\":\"CVWcZDbx\",\"inputStatic\":\"ckTzdegT\",\"inputRichStatic\":\"tsi7Leof\",\"balanceResultWrapper\":\"vtSKtwOl\",\"balanceResultInput\":\"oiRjkkEM\",\"balanceResultLabel\":\"h10QGypW\",\"balanceStakedLabel\":\"DlWk_wtQ\",\"balanceStakedResult\":\"Zvcxz1_r\",\"balanceResult\":\"ANb8RM_U\",\"stakingInfoModal\":\"WPEajhsz\",\"stakingInfoModal_withHistory\":\"RmyjusO4\",\"stakingInfoModalWithHistory\":\"RmyjusO4\",\"stakingInfo\":\"jqjfDFur\",\"stakingInfo_modal\":\"WPEajhsz\",\"stakingInfoNoHistory\":\"JhvH7wqN\",\"stakingInfoModalContent\":\"adkWFcPE\",\"history\":\"vrPulHrK\",\"historyList\":\"Y0yHbYn0\",\"withBackground\":\"seOnXIX2\",\"stakingInfoLoading\":\"FpmrUch0\",\"stakingInfoLoadingAnimation\":\"HhFmzxoC\",\"stakingInfoClose\":\"hUegI624\",\"stakingInfoButtons\":\"p0aoyqxp\",\"stakingInfoButtons_withMargin\":\"pa9mJcSA\",\"stakingInfoButtonsWithMargin\":\"pa9mJcSA\",\"stakingInfoButton\":\"ANY2XY_3\",\"insufficientBalance\":\"rGOjgmuu\",\"unstakeTime\":\"AQ56tknq\",\"unstakeTime_purple\":\"LqS98rhM\",\"unstakeTimePurple\":\"LqS98rhM\",\"unstakeTimeIcon\":\"tyhEzoP5\",\"history_static\":\"s2VvvIeZ\",\"historyStatic\":\"s2VvvIeZ\",\"historyTotal\":\"saWAKbAc\",\"historyTitle\":\"Y0cCgJMS\",\"historyList_static\":\"axMdO17j\",\"historyListStatic\":\"axMdO17j\",\"transactionBanner\":\"qrdHJFDS\",\"unstakeInfo\":\"m1LUZiWL\",\"tokenDropdown\":\"A1GMBD3_\",\"tokenDropdownItem\":\"sV49vdb8\",\"tokenDropdownMenu\":\"SMF4FqKo\"};","import { Dialog } from 'native-dialog';\nimport React, {\n  memo, type TeactNode, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  JVAULT_URL,\n  NOMINATORS_STAKING_MIN_AMOUNT,\n  SHORT_FRACTION_DIGITS,\n  STAKING_MIN_AMOUNT,\n  TONCOIN,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { buildStakingDropdownItems } from '../../global/helpers/staking';\nimport {\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n} from '../../global/selectors';\nimport { bigintMax } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal, toBig, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { vibrate } from '../../util/haptics';\nimport { throttle } from '../../util/schedulers';\nimport { buildUserToken, getIsNativeToken, getNativeToken } from '../../util/tokens';\nimport calcJettonStakingApr from '../../util/ton/calcJettonStakingApr';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport AmountFieldMaxButton from '../ui/AmountFieldMaxButton';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport RichNumberField from '../ui/RichNumberField';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  isLoading?: boolean;\n  apiError?: string;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  fee?: bigint;\n  stakingState?: ApiStakingState;\n  states?: ApiStakingState[];\n  shouldUseNominators?: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst ACTIVE_STATES = new Set([StakingState.StakeInitial, StakingState.None]);\n\nconst runThrottled = throttle((cb) => cb(), 1500, true);\n\nfunction StakingInitial({\n  isActive,\n  isStatic,\n  isLoading,\n  apiError,\n  tokens,\n  tokenBySlug,\n  fee,\n  stakingState,\n  states,\n  shouldUseNominators,\n  isSensitiveDataHidden,\n}: OwnProps & StateProps) {\n  const {\n    submitStakingInitial, fetchStakingFee, cancelStaking, changeCurrentStaking,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [isSafeInfoModalOpen, openSafeInfoModal, closeSafeInfoModal] = useFlag();\n  const [amount, setAmount] = useState<bigint | undefined>();\n  const [isIncorrectAmount, setIsIncorrectAmount] = useState<boolean>(false);\n  const [isInsufficientBalance, setIsInsufficientBalance] = useState<boolean>(false);\n  const [isInsufficientFee, setIsInsufficientFee] = useState(false);\n  const [isBelowMinimumAmount, setIsBelowMinimumAmount] = useState(false);\n  const [shouldUseAllBalance, setShouldUseAllBalance] = useState<boolean>(false);\n\n  const {\n    type: stakingType,\n    tokenSlug,\n    balance: stakingBalance = 0n,\n  } = stakingState ?? {};\n\n  const token: UserToken | undefined = useMemo(() => {\n    if (!tokenSlug || !tokens || !tokenBySlug) return undefined;\n    let userToken = tokens.find(({ slug }) => slug === tokenSlug);\n    if (!userToken && tokenSlug in tokenBySlug) {\n      userToken = buildUserToken(tokenBySlug[tokenSlug]);\n    }\n    return userToken;\n  }, [tokenSlug, tokens, tokenBySlug]);\n  const { amount: balance = 0n, symbol, decimals = TONCOIN.decimals } = token ?? {};\n\n  let { annualYield = 0 } = stakingState ?? {};\n  if (stakingState?.type === 'jetton' && amount) {\n    annualYield = calcJettonStakingApr({\n      tvl: stakingState.tvl + amount,\n      dailyReward: stakingState.dailyReward,\n      decimals,\n    });\n  }\n\n  const isNativeToken = getIsNativeToken(token?.slug);\n  const nativeToken = useMemo(() => {\n    if (!tokens || !token) return undefined;\n    if (isNativeToken) return token;\n    const nativeSlug = getNativeToken(token.chain).slug;\n    return tokens.find(({ slug }) => slug === nativeSlug);\n  }, [tokens, token, isNativeToken]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const hasAmountError = Boolean(isInsufficientBalance || apiError);\n  const minAmount = stakingType === 'nominators' ? NOMINATORS_STAKING_MIN_AMOUNT : STAKING_MIN_AMOUNT;\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).stake;\n\n  const nativeAmount = isNativeToken && amount ? amount + networkFee : networkFee;\n  const doubleNetworkFee = networkFee * 2n;\n  const shouldLeaveForUnstake = isNativeToken && balance >= doubleNetworkFee;\n  const maxAmount = (() => {\n    let value = balance;\n    if (isNativeToken && value) {\n      value -= shouldLeaveForUnstake ? doubleNetworkFee : networkFee;\n    }\n    return bigintMax(0n, value);\n  })();\n\n  const validateAndSetAmount = useLastCallback((newAmount: bigint | undefined, noReset = false) => {\n    if (!noReset) {\n      setShouldUseAllBalance(false);\n      setIsIncorrectAmount(false);\n      setIsInsufficientBalance(false);\n      setIsBelowMinimumAmount(false);\n      setIsInsufficientFee(false);\n    }\n\n    if (newAmount === undefined) {\n      setAmount(undefined);\n      return;\n    }\n\n    if (Number.isNaN(newAmount) || newAmount < 0) {\n      setIsIncorrectAmount(true);\n      return;\n    }\n\n    if (newAmount < minAmount) {\n      setIsBelowMinimumAmount(true);\n    } else if (!maxAmount || newAmount > balance) {\n      setIsInsufficientBalance(true);\n    } else if (nativeBalance < networkFee || (isNativeToken && nativeAmount > balance)) {\n      setIsInsufficientFee(true);\n    }\n\n    setAmount(newAmount);\n  });\n\n  const dropDownItems = useMemo(() => {\n    if (!tokenBySlug || !states) {\n      return [];\n    }\n\n    return buildStakingDropdownItems({ tokenBySlug, states, shouldUseNominators });\n  }, [tokenBySlug, states, shouldUseNominators]);\n\n  useEffect(() => {\n    if (shouldUseAllBalance && maxAmount) {\n      const newAmount = maxAmount;\n\n      validateAndSetAmount(newAmount, true);\n    } else {\n      validateAndSetAmount(amount, true);\n    }\n  }, [amount, fee, shouldUseAllBalance, validateAndSetAmount, maxAmount]);\n\n  useEffect(() => {\n    if (!amount) {\n      return;\n    }\n\n    runThrottled(() => {\n      fetchStakingFee({\n        amount,\n      });\n    });\n  }, [amount, fetchStakingFee]);\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isSafeInfoModalOpen) {\n      const text = stakingState && stakingState.type === 'jetton'\n        ? [\n          // We use `replace` instead of `lang` argument to avoid JSX output\n          `${lang('$safe_staking_description_jetton1').replace('%jvault_link%', 'JVault')}`,\n          `${lang('$safe_staking_description_jetton2')}`,\n        ]\n        : [\n          `1. ${lang('$safe_staking_description1')}`,\n          `2. ${lang('$safe_staking_description2')}`,\n          `3. ${lang('$safe_staking_description3')}`,\n        ];\n\n      void Dialog.alert({\n        title: lang('Why is staking safe?'),\n        message: text.join('\\n\\n').replace(/\\*\\*/g, ''),\n      })\n        .then(closeSafeInfoModal);\n    }\n  }, [isSafeInfoModalOpen, lang, stakingState]);\n\n  const handleMaxAmountClick = useLastCallback(() => {\n    if (!maxAmount) {\n      return;\n    }\n\n    void vibrate();\n\n    setShouldUseAllBalance(true);\n  });\n\n  const canSubmit = amount\n    && maxAmount\n    && !isIncorrectAmount\n    && !isBelowMinimumAmount\n    && !isInsufficientFee\n    && !isInsufficientBalance;\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitStakingInitial({ amount });\n  });\n\n  const handleAmountChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? fromDecimal(stringValue, decimals) : undefined;\n    validateAndSetAmount(value);\n  });\n\n  function getError() {\n    if (isInsufficientBalance) {\n      return lang('Insufficient balance');\n    }\n\n    if (isInsufficientFee) {\n      return lang('$insufficient_fee', { fee: formatCurrency(toDecimal(networkFee), nativeToken?.symbol ?? '') });\n    }\n\n    if (isBelowMinimumAmount) {\n      return lang('$min_value', {\n        value: (\n          <span className={styles.minAmountValue}>\n            {formatCurrency(toDecimal(minAmount), symbol ?? '')}\n          </span>\n        ),\n      });\n    }\n\n    return apiError ? lang(apiError) : undefined;\n  }\n\n  function renderTopRight() {\n    return (\n      <AmountFieldMaxButton\n        maxAmount={maxAmount}\n        token={token}\n        isLoading={!token}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onAmountClick={handleMaxAmountClick}\n      />\n    );\n  }\n\n  function renderBottomRight() {\n    const error = getError();\n\n    const activeKey = isInsufficientBalance ? 0\n      : isInsufficientFee ? 1\n        : isBelowMinimumAmount ? 2\n          : apiError ? 3\n            : !stakingBalance && !hasAmountError ? 4\n              : 5;\n\n    let content: string | TeactNode[] | React.JSX.Element = ' ';\n\n    if (error) {\n      content = (\n        <span className={styles.balanceError}>{error}</span>\n      );\n    } else {\n      content = token ? lang('$fee_value', {\n        fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n      }) : '';\n    }\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountBottomRight, isIncorrectAmount && styles.amountBottomRight_error)}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"fade\"\n        activeKey={activeKey}\n      >\n        {content}\n      </Transition>\n    );\n  }\n\n  function renderJettonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton1', {\n            jvault_link: (\n              <a href={JVAULT_URL} target=\"_blank\" rel=\"noreferrer\"><b>JVault</b></a>\n            ),\n          }))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton2'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderTonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description1'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description2'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description3'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderSafeInfoModal() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isSafeInfoModalOpen}\n        title={lang('Why is staking safe?')}\n        onClose={closeSafeInfoModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        {stakingState && stakingState.type === 'jetton' ? renderJettonDescription() : renderTonDescription()}\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeSafeInfoModal}>{lang('Close')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  function renderStakingResult() {\n    const balanceResult = amount\n      ? toBig(amount).mul((annualYield / 100) + 1).round(SHORT_FRACTION_DIGITS).toString()\n      : '0';\n\n    return (\n      <RichNumberField\n        labelText={lang('Est. balance in a year')}\n        zeroValue=\"...\"\n        value={balanceResult}\n        decimals={decimals}\n        className={styles.balanceResultWrapper}\n        inputClassName={buildClassName(styles.balanceResultInput, isStatic && styles.inputRichStatic)}\n        labelClassName={styles.balanceResultLabel}\n        valueClassName={styles.balanceResult}\n      />\n    );\n  }\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    cancelStaking();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  return (\n    <form\n      className={isStatic ? undefined : modalStyles.transitionContent}\n      onSubmit={handleSubmit}\n    >\n      <div className={buildClassName(styles.welcome, isStatic && styles.welcome_static)}>\n        <AnimatedIconWithPreview\n          size={isStatic ? ANIMATED_STICKER_MIDDLE_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={buildClassName(styles.sticker, isStatic && styles.sticker_static)}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n        <div className={buildClassName(styles.welcomeInformation, isStatic && styles.welcomeInformation_static)}>\n          <div>{lang('Earn from your tokens while holding them', { symbol })}</div>\n          <div className={styles.stakingApy}>{lang('Est. %annual_yield%', { annual_yield: `${annualYield}%` })}</div>\n          <Button isText className={styles.textButton} onClick={openSafeInfoModal}>\n            {lang('Why this is safe')}\n          </Button>\n        </div>\n      </div>\n\n      {renderTopRight()}\n      <RichNumberInput\n        key=\"staking_amount\"\n        id=\"staking_amount\"\n        hasError={isIncorrectAmount || isInsufficientBalance}\n        value={amount === undefined ? undefined : toDecimal(amount)}\n        labelText={lang('Amount')}\n        onChange={handleAmountChange}\n        onPressEnter={handleSubmit}\n        decimals={decimals}\n        inputClassName={isStatic ? styles.inputRichStatic : undefined}\n        className={styles.amountInput}\n      >\n        <Dropdown\n          items={dropDownItems}\n          selectedValue={stakingState?.id}\n          className={styles.tokenDropdown}\n          itemClassName={styles.tokenDropdownItem}\n          onChange={handleChangeStaking}\n        />\n      </RichNumberInput>\n      <div className={buildClassName(styles.amountBottomWrapper, isStatic && styles.amountBottomWrapper_static)}>\n        <div className={styles.amountBottom}>\n          {renderBottomRight()}\n        </div>\n      </div>\n\n      {renderStakingResult()}\n\n      <div className={modalStyles.buttons}>\n        <Button\n          isPrimary\n          isSubmit\n          isDisabled={!canSubmit}\n          isLoading={isLoading}\n        >\n          {lang('$stake_asset', { symbol: token?.symbol })}\n        </Button>\n      </div>\n      {renderSafeInfoModal()}\n    </form>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const accountState = selectCurrentAccountState(global);\n      const tokens = selectCurrentAccountTokens(global);\n      const tokenBySlug = global.tokenInfo.bySlug;\n\n      const {\n        state,\n        isLoading,\n        fee,\n        error: apiError,\n      } = global.currentStaking;\n\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const stakingState = selectAccountStakingState(global, global.currentAccountId!);\n\n      return {\n        isLoading: isLoading && ACTIVE_STATES.has(state),\n        tokens,\n        tokenBySlug,\n        apiError,\n        fee,\n        stakingState,\n        states,\n        shouldUseNominators: accountState?.staking?.shouldUseNominators,\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(StakingInitial),\n);\n","import { DAYS_IN_YEAR } from '../../api/constants';\nimport { toBig } from '../decimals';\n\nexport default function calcJettonStakingApr({\n  tvl, dailyReward, decimals,\n}: {\n  tvl: bigint;\n  dailyReward: bigint;\n  decimals: number;\n}) {\n  if (!tvl) {\n    return 0;\n  }\n\n  const apr = toBig(dailyReward, decimals)\n    .div(toBig(tvl, decimals))\n    .mul(DAYS_IN_YEAR)\n    .mul(100)\n    .toFixed(2);\n\n  return Number(apr);\n}\n","export const SEC = 1000;\nexport const MINUTE = 60 * SEC;\nexport const DAYS_IN_YEAR = 365;\nexport const FIRST_TRANSACTIONS_LIMIT = 50;\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState, HardwareConnectState } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport {\n  selectAccountStakingState,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport StakingInitial from './StakingInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  stakingState?: ApiStakingState;\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isMultichainAccount: boolean;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.StakeInitial,\n  StakingState.StakePassword,\n  StakingState.StakeConnectHardware,\n  StakingState.StakeConfirmHardware,\n  StakingState.StakeComplete,\n]);\n\nfunction StakeModal({\n  state,\n  stakingState,\n  isLoading,\n  amount,\n  error,\n  tokenBySlug,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    startStaking,\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingPassword,\n    submitStakingHardware,\n    openStakingInfo,\n  } = getActions();\n\n  const { tokenSlug } = stakingState ?? {};\n\n  const token = tokenSlug && tokenBySlug ? tokenBySlug[tokenSlug] : undefined;\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n  const [renderedStakingAmount, setRenderedStakingAmount] = useState(amount);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.StakePassword) {\n      clearStakingError();\n      setStakingScreen({ state: StakingState.StakeInitial });\n    }\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setRenderedStakingAmount(amount);\n    submitStakingHardware();\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedStakingAmount(amount);\n    submitStakingPassword({ password });\n  });\n\n  const handleViewStakingInfoClick = useLastCallback(() => {\n    cancelStaking();\n    openStakingInfo();\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !amount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"purple\"\n        text={formatCurrency(toDecimal(amount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Staking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"staking\"\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Coins have been staked!')} onClose={cancelStaking} />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color=\"purple\"\n            playAnimation={isActive}\n            amount={renderedStakingAmount}\n            tokenSymbol={token?.symbol}\n            noSign\n            firstButtonText={lang('View')}\n            secondButtonText={lang('Stake More')}\n            onFirstButtonClick={handleViewStakingInfoClick}\n            onSecondButtonClick={startStaking}\n          />\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case StakingState.StakeInitial:\n        return (\n          <>\n            <ModalHeader title={lang('$stake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n            <StakingInitial isActive={isActive} />\n          </>\n        );\n\n      case StakingState.StakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.StakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.StakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.StakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"stake\"\n      forceFullNative={renderingKey === StakingState.StakePassword}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const tokenBySlug = global.tokenInfo.bySlug;\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    ...global.currentStaking,\n    stakingState,\n    tokenBySlug,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isMultichainAccount,\n  };\n})(StakeModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiJettonStakingState } from '../../api/types';\nimport type { HardwareConnectState, UserToken } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { SHORT_FRACTION_DIGITS, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './StakingClaimModal.module.scss';\n\ninterface StateProps {\n  stakingState?: ApiJettonStakingState;\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: StakingState;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.ClaimPassword,\n  StakingState.ClaimConfirmHardware,\n  StakingState.ClaimConnectHardware,\n]);\n\nfunction StakingClaimModal({\n  stakingState,\n  isOpen,\n  tokens,\n  isLoading,\n  address,\n  error,\n  state = StakingState.ClaimPassword,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isHardwareAccount,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n}: StateProps) {\n  const {\n    submitStakingClaim,\n    submitStakingClaimHardware,\n    cancelStakingClaim,\n    clearStakingError,\n  } = getActions();\n\n  const {\n    tokenSlug,\n    unclaimedRewards = 0n,\n  } = stakingState ?? {};\n\n  const lang = useLang();\n\n  const token = useMemo(() => tokens?.find(({ slug }) => slug === tokenSlug), [tokens, tokenSlug]);\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const { gas: networkFee, real: realNetworkFee } = getTonStakingFees('jetton').claim!;\n  const isNativeEnough = nativeBalance > networkFee;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = !isHardwareAccount && !getDoesUsePinPad();\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (!isNativeEnough) return;\n    submitStakingClaim({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (!isNativeEnough) return;\n    submitStakingClaimHardware();\n  });\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n    const content = isSensitiveDataHidden\n      ? `*** ${token!.symbol}`\n      : formatCurrency(toDecimal(unclaimedRewards, token!.decimals), token!.symbol, SHORT_FRACTION_DIGITS);\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={token}\n          withChainIcon={isMultichainAccount}\n          text={content}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={shortenAddress(address!)}\n        />\n        <div className={feeClassName}>\n          {token && renderText(lang('$fee_value_bold', {\n            fee: (\n              <Fee\n                terms={{ native: isNativeEnough ? realNetworkFee : networkFee }}\n                precision={isNativeEnough ? 'approximate' : 'lessThan'}\n                token={token}\n              />\n            ),\n          }))}\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case StakingState.ClaimConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelStakingClaim}\n          />\n        );\n\n      case StakingState.ClaimConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelStakingClaim}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case StakingState.ClaimPassword:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"claim\"\n            error={!isNativeEnough ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelStakingClaim}\n            onUpdate={clearStakingError}\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={withModalHeader ? lang('Confirm Rewards Claim') : undefined}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"staking-claim\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelStakingClaim}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const { addressByChain } = selectAccount(global, accountId!) || {};\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    state,\n    isLoading,\n    error,\n  } = global?.currentStaking || {};\n\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n  const tokens = selectCurrentAccountTokens(global);\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    stakingState: stakingState?.type === 'jetton' ? stakingState : undefined,\n    isOpen: IS_OPEN_STATES.has(state),\n    state,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, accountId!),\n    isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n  };\n})(StakingClaimModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"kJywiaI2\",\"passwordModalDialog\":\"FYtlcmCw\",\"transactionBanner\":\"yYT_DSGe\",\"operationInfoFee\":\"k75dvmdJ\",\"operationInfoFeeWithGap\":\"F2nQ3VmO\"};","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport { debounce } from '../util/schedulers';\n\nexport default function useDebouncedCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    return debounce(fnMemo, ms, !noFirst, !noLast);\n  }, [fnMemo, ms, noFirst, noLast]);\n}\n","import { useEffect, useMemo, useState } from '../lib/teact/teact';\n\nimport { throttle } from '../util/schedulers';\nimport windowSize from '../util/windowSize';\nimport useDebouncedCallback from './useDebouncedCallback';\n\nconst THROTTLE = 250;\n\nexport default function useWindowSize() {\n  const {\n    width: initialWidth,\n    height: initialHeight,\n    screenHeight: initialScreenHeight,\n  } = windowSize.get();\n  const [width, setWidth] = useState(initialWidth);\n  const [height, setHeight] = useState(initialHeight);\n  const [screenHeight, setScreenHeight] = useState(initialScreenHeight);\n  const [isResizing, setIsResizing] = useState(false);\n  const setIsResizingDebounced = useDebouncedCallback(setIsResizing, [setIsResizing], THROTTLE, true);\n\n  useEffect(() => {\n    const throttledSetIsResizing = throttle(() => {\n      setIsResizing(true);\n    }, THROTTLE, true);\n\n    const throttledSetSize = throttle(() => {\n      const { width: newWidth, height: newHeight, screenHeight: newScreenHeight } = windowSize.get();\n      setWidth(newWidth);\n      setHeight(newHeight);\n      setScreenHeight(newScreenHeight);\n      setIsResizingDebounced(false);\n    }, THROTTLE, false);\n\n    const handleResize = () => {\n      throttledSetIsResizing();\n      throttledSetSize();\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [setIsResizingDebounced]);\n\n  return useMemo(() => ({\n    width, height, screenHeight, isResizing,\n  }), [height, isResizing, screenHeight, width]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"nq4YjGn3\",\"icon\":\"jLdRlENh\",\"leftBlock\":\"nxAiUgO_\",\"amount\":\"x2kd8DjZ\",\"operationName\":\"uDw7ob8E\",\"date\":\"aJl0mknc\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatHumanDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport SensitiveData from '../ui/SensitiveData';\n\nimport styles from './StakingProfileItem.module.scss';\n\ninterface OwnProps {\n  tonToken: UserToken;\n  timestamp: number;\n  profit: string;\n  isSensitiveDataHidden?: true;\n}\n\nfunction StakingProfitItem({\n  tonToken, timestamp, profit, isSensitiveDataHidden,\n}: OwnProps) {\n  const lang = useLang();\n  const amountCols = useMemo(() => getPseudoRandomNumber(4, 10, timestamp.toString()), [timestamp]);\n\n  return (\n    <div className={styles.item}>\n      <i className={buildClassName(styles.icon, 'icon-earn')} aria-hidden />\n      <div className={styles.leftBlock}>\n        <div className={styles.operationName}>{lang('Earned')}</div>\n        <div className={styles.date}>{formatHumanDay(lang, timestamp)}, {formatTime(timestamp)}</div>\n      </div>\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cellSize={8}\n        rows={2}\n        cols={amountCols}\n        align=\"right\"\n        className={styles.amount}\n      >\n        {formatCurrencyExtended(profit, tonToken.symbol)}\n      </SensitiveData>\n    </div>\n  );\n}\n\nexport default memo(StakingProfitItem);\n","import React, {\n  memo, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingHistory, ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { Theme, UserToken } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, SHORT_FRACTION_DIGITS, TONCOIN } from '../../config';\nimport { buildStakingDropdownItems } from '../../global/helpers/staking';\nimport {\n  selectAccountStakingHistory,\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectAccountStakingTotalProfit,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\nimport StakingProfitItem from './StakingProfitItem';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  states?: ApiStakingState[];\n  stakingState?: ApiStakingState;\n  totalProfit: bigint;\n  stakingHistory?: ApiStakingHistory;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  endOfStakingCycle?: number;\n  theme: Theme;\n  shouldUseNominators?: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst HISTORY_SCROLL_APPEARANCE_HEIGHT_PX = 640;\n\nfunction StakingInfoContent({\n  states,\n  stakingState,\n  isActive,\n  isStatic,\n  totalProfit,\n  stakingHistory,\n  tokens,\n  tokenBySlug,\n  endOfStakingCycle,\n  theme,\n  shouldUseNominators,\n  isSensitiveDataHidden,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startStaking,\n    startUnstaking,\n    startStakingClaim,\n    fetchStakingHistory,\n    changeCurrentStaking,\n  } = getActions();\n\n  const {\n    id: stakingId,\n    tokenSlug,\n    balance: amount,\n    annualYield = 0,\n    isUnstakeRequested,\n  } = stakingState ?? {};\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => tokenSlug === slug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  const { decimals, symbol } = token ?? {};\n\n  const lang = useLang();\n  const isLoading = amount === undefined;\n  const hasHistory = Boolean(stakingHistory?.length);\n  const {\n    shouldRender: shouldRenderSpinner,\n    transitionClassNames: spinnerClassNames,\n  } = useShowTransition(isLoading && isActive);\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug)!, [tokens]);\n  const forceUpdate = useForceUpdate();\n  const { height } = useWindowSize();\n  const appTheme = useAppTheme(theme);\n  const {\n    shouldRender: shouldRenderTotalAmount,\n    transitionClassNames: totalAmountClassNames,\n  } = useShowTransition(!isSensitiveDataHidden);\n\n  const unclaimedRewards = stakingState?.type === 'jetton'\n    ? stakingState.unclaimedRewards\n    : undefined;\n\n  // Updates the unstaking countdown\n  useInterval(forceUpdate, isUnstakeRequested ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isActive) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isActive]);\n\n  const handleStakeClick = useLastCallback(() => {\n    onClose?.();\n    startStaking();\n  });\n\n  const handleUnstakeClick = useLastCallback(() => {\n    onClose?.();\n    startUnstaking();\n  });\n\n  const handleClaimClick = useLastCallback(() => {\n    onClose?.();\n    startStakingClaim();\n  });\n\n  let stakingResult = '0';\n  let balanceResult = '0';\n  if (amount) {\n    stakingResult = toBig(amount).round(SHORT_FRACTION_DIGITS).toString();\n    balanceResult = toBig(amount).mul((annualYield / 100) + 1).round(SHORT_FRACTION_DIGITS).toString();\n  }\n\n  const dropDownItems = useMemo(() => {\n    if (!tokenBySlug || !states) {\n      return [];\n    }\n\n    return buildStakingDropdownItems({ tokenBySlug, states, shouldUseNominators });\n  }, [tokenBySlug, states, shouldUseNominators]);\n\n  function renderUnstakeDescription() {\n    return (\n      <div className={buildClassName(styles.unstakeTime, styles.unstakeTime_purple)}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n        />\n        <div>\n          {Boolean(endOfStakingCycle) && lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, endOfStakingCycle)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderHistory() {\n    return (\n      <div className={buildClassName(styles.history, isStatic && styles.history_static)}>\n        {shouldRenderTotalAmount && (\n          <div className={buildClassName(styles.historyTotal, totalAmountClassNames)}>\n            {lang('$total', {\n              value: (\n                <span className={styles.historyTotalValue}>\n                  {formatCurrency(toDecimal(totalProfit), TONCOIN.symbol)}\n                </span>\n              ),\n            })}\n          </div>\n        )}\n        <div className={styles.historyTitle}>{lang('Earning History')}</div>\n        <div className={buildClassName(\n          styles.historyList,\n          isStatic && styles.historyList_static,\n          isStatic && 'custom-scroll',\n          !isStatic && height >= HISTORY_SCROLL_APPEARANCE_HEIGHT_PX && 'custom-scroll',\n        )}\n        >\n          {stakingHistory?.map((record) => (\n            <StakingProfitItem\n              key={record.timestamp}\n              profit={record.profit}\n              timestamp={record.timestamp}\n              tonToken={tonToken}\n              isSensitiveDataHidden={isSensitiveDataHidden}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.stakingInfo,\n    !isStatic && styles.stakingInfo_modal,\n    !hasHistory && styles.stakingInfoNoHistory,\n    isStatic && 'staking-info',\n  );\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    onClose?.();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  function renderRewards() {\n    const rewardString = toDecimal(unclaimedRewards!, decimals);\n\n    return (\n      <>\n        <RichNumberField\n          isSensitiveData\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          sensitiveDataMaskSkin=\"purple\"\n          labelText={lang('Accumulated Rewards')}\n          zeroValue=\"...\"\n          value={rewardString}\n          decimals={decimals}\n          suffix={symbol}\n          labelClassName={styles.balanceStakedLabel}\n          valueClassName={styles.balanceResult}\n        />\n        <div className={styles.stakingInfoButtons}>\n          <Button\n            className={styles.stakingInfoButton}\n            isDisabled={isLoading}\n            onClick={handleClaimClick}\n          >\n            {lang('Claim')}\n          </Button>\n        </div>\n      </>\n    );\n  }\n\n  function render() {\n    return (\n      <>\n        <div className={fullClassName}>\n          {!isStatic && (\n            <ModalHeader\n              title={lang('Staking')}\n              closeClassName={styles.stakingInfoClose}\n              onClose={onClose}\n            />\n          )}\n\n          <RichNumberField\n            isSensitiveData\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            sensitiveDataMaskSkin=\"purple\"\n            labelText={lang('Currently Staked')}\n            zeroValue=\"...\"\n            value={stakingResult}\n            decimals={decimals}\n            className={styles.stakingBalance}\n            labelClassName={styles.balanceStakedLabel}\n            valueClassName={styles.balanceStakedResult}\n          >\n            <div className={styles.stakingInfoLoading}>\n              {shouldRenderSpinner && (\n                <Spinner className={buildClassName(styles.stakingInfoLoadingAnimation, spinnerClassNames)} />\n              )}\n            </div>\n\n            <Dropdown\n              items={dropDownItems}\n              selectedValue={stakingId}\n              className={styles.tokenDropdown}\n              itemClassName={styles.tokenDropdownItem}\n              menuClassName={styles.tokenDropdownMenu}\n              onChange={handleChangeStaking}\n            />\n\n          </RichNumberField>\n          {isUnstakeRequested\n            ? renderUnstakeDescription()\n            : (\n              <>\n                <RichNumberField\n                  isSensitiveData\n                  isSensitiveDataHidden={isSensitiveDataHidden}\n                  sensitiveDataMaskSkin=\"purple\"\n                  labelText={lang('Est. balance in a year')}\n                  zeroValue=\"...\"\n                  value={balanceResult}\n                  decimals={decimals}\n                  suffix={symbol}\n                  labelClassName={styles.balanceStakedLabel}\n                  valueClassName={styles.balanceResult}\n                />\n                <div\n                  className={\n                    buildClassName(styles.stakingInfoButtons, !!unclaimedRewards && styles.stakingInfoButtonsWithMargin)\n                  }\n                >\n                  <Button\n                    className={styles.stakingInfoButton}\n                    isPrimary\n                    isDisabled={isLoading}\n                    onClick={handleStakeClick}\n                  >\n                    {lang('Stake More')}\n                  </Button>\n                  <Button\n                    className={styles.stakingInfoButton}\n                    isDisabled={isLoading}\n                    onClick={handleUnstakeClick}\n                  >\n                    {lang('Unstake')}\n                  </Button>\n                </div>\n                {!!unclaimedRewards && renderRewards()}\n              </>\n            )}\n        </div>\n\n        {hasHistory && renderHistory()}\n      </>\n    );\n  }\n\n  // No need to animate if it's in modal (`!isStatic`), because the modal is animated itself\n  const activeKey = useTransitionActiveKey([isStatic, stakingId], !isStatic);\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={activeKey}\n      shouldCleanup\n      className={styles.stakingTransition}\n      slideClassName={isStatic ? 'staking-info' : undefined}\n    >\n      {render()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const accountState = selectCurrentAccountState(global);\n\n  const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  const endOfStakingCycle = stakingState?.type === 'nominators'\n    ? stakingState.end\n    : global.stakingInfo?.round.end;\n\n  const stakingHistory = accountId ? selectAccountStakingHistory(global, accountId) : undefined;\n  const totalProfit = accountId ? selectAccountStakingTotalProfit(global, accountId) : 0n;\n\n  return {\n    stakingState,\n    states,\n    totalProfit,\n    stakingHistory,\n    tokens: selectCurrentAccountTokens(global),\n    tokenBySlug: global.tokenInfo.bySlug,\n    endOfStakingCycle,\n    theme: global.settings.theme,\n    shouldUseNominators: accountState?.staking?.shouldUseNominators,\n    isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n  };\n})(StakingInfoContent));\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TONCOIN } from '../../config';\nimport { selectAccountStakingHistory, selectAccountStakingState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport Modal from '../ui/Modal';\nimport StakingInfoContent from './StakingInfoContent';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokenSlug?: string;\n  hasHistory?: boolean;\n}\n\nfunction StakingInfoModal({\n  isOpen,\n  tokenSlug,\n  hasHistory,\n  onClose,\n}: OwnProps & StateProps) {\n  const { fetchStakingHistory } = getActions();\n  const withBackground = tokenSlug !== TONCOIN.slug;\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={buildClassName(styles.stakingInfoModalContent, withBackground && styles.withBackground)}\n      nativeBottomSheetKey=\"staking-info\"\n      onClose={onClose}\n      forceFullNative={hasHistory}\n    >\n      <StakingInfoContent isActive={isOpen} onClose={onClose} />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const stakingHistory = accountId\n    ? selectAccountStakingHistory(global, accountId)\n    : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  return {\n    tokenSlug: stakingState?.tokenSlug,\n    hasHistory: Boolean(stakingHistory?.length),\n  };\n})(StakingInfoModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../api/types';\nimport type {\n  GlobalState, HardwareConnectState, Theme, UserToken,\n} from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  IS_CAPACITOR,\n  STAKING_CYCLE_DURATION_MS,\n  TONCOIN,\n} from '../../config';\nimport { Big } from '../../lib/big.js';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { fromDecimal, toBig, toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { getIsMobileTelegramApp } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AmountFieldMaxButton from '../ui/AmountFieldMaxButton';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  tokens?: UserToken[];\n  stakingInfo: GlobalState['stakingInfo'];\n  baseCurrency?: ApiBaseCurrency;\n  isNominators?: boolean;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  theme: Theme;\n  isMultichainAccount: boolean;\n  stakingState?: ApiStakingState;\n  isSensitiveDataHidden?: true;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.UnstakeInitial,\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n  StakingState.UnstakeComplete,\n]);\n\nconst FULL_SIZE_NBS_STATES = new Set([\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n]);\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\n\nfunction UnstakeModal({\n  state,\n  isLoading,\n  error,\n  tokens,\n  stakingInfo,\n  baseCurrency,\n  isNominators,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isMultichainAccount,\n  theme,\n  amount,\n  stakingState,\n  isSensitiveDataHidden,\n}: StateProps) {\n  const {\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingInitial,\n    submitStakingPassword,\n    submitStakingHardware,\n    fetchStakingHistory,\n  } = getActions();\n\n  const {\n    type: stakingType,\n    tokenSlug,\n    balance: stakingBalance,\n  } = stakingState ?? {};\n\n  const endOfStakingCycle = stakingState?.type === 'nominators'\n    ? stakingState.end\n    : stakingInfo?.round?.end;\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).stake;\n\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const isNativeEnough = nativeToken && nativeToken.amount >= networkFee;\n  const instantAvailable = stakingType === 'liquid' ? stakingInfo?.liquid?.available ?? 0n : 0n;\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => slug === tokenSlug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  const logoPath = token\n    && (ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || token.image);\n\n  const [hasAmountError, setHasAmountError] = useState<boolean>(false);\n\n  const [isLongUnstake, setIsLongUnstake] = useState(false);\n\n  const [isInsufficientBalance, setIsInsufficientBalance] = useState(false);\n\n  const [unstakeAmount, setUnstakeAmount] = useState(isNominators ? stakingBalance : undefined);\n  const [successUnstakeAmount, setSuccessUnstakeAmount] = useState<bigint | undefined>(undefined);\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  useEffect(() => {\n    if (!stakingState) return;\n\n    let isInstantUnstake = true;\n\n    switch (stakingState.type) {\n      case 'nominators': {\n        isInstantUnstake = false;\n        break;\n      }\n      case 'liquid': {\n        isInstantUnstake = amount ? amount < instantAvailable : true;\n        break;\n      }\n      case 'jetton': {\n        isInstantUnstake = true;\n        break;\n      }\n    }\n\n    setIsLongUnstake(!isInstantUnstake);\n  }, [instantAvailable, amount, stakingState]);\n\n  const [unstakeDate, setUnstakeDate] = useState<number>(endOfStakingCycle ?? Date.now() + STAKING_CYCLE_DURATION_MS);\n  const forceUpdate = useForceUpdate();\n  const appTheme = useAppTheme(theme);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const amountInCurrency = token && token.price && unstakeAmount\n    ? toBig(unstakeAmount, token.decimals)\n      .mul(token.price)\n      .round(token.decimals, Big.roundHalfUp)\n      .toString()\n    : undefined;\n  const renderingAmountInCurrency = useCurrentOrPrev(amountInCurrency, true);\n  const isUnstakeDisabled = !isNativeEnough || isInsufficientBalance || !unstakeAmount;\n\n  const { shouldRender: shouldRenderCurrency, transitionClassNames: currencyClassNames } = useShowTransition(\n    Boolean(amountInCurrency),\n  );\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n      setUnstakeAmount(isNominators ? stakingBalance : undefined);\n      setHasAmountError(false);\n      setIsInsufficientBalance(false);\n    }\n  }, [isOpen, fetchStakingHistory, isNominators, stakingBalance]);\n\n  useSyncEffect(() => {\n    if (endOfStakingCycle) {\n      setUnstakeDate(endOfStakingCycle);\n    }\n  }, [endOfStakingCycle]);\n\n  const refreshUnstakeDate = useLastCallback(() => {\n    if (unstakeDate < Date.now()) {\n      fetchStakingHistory();\n    }\n    forceUpdate();\n  });\n\n  useInterval(refreshUnstakeDate, UPDATE_UNSTAKE_DATE_INTERVAL_MS);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.UnstakePassword) {\n      setStakingScreen({ state: StakingState.UnstakeInitial });\n    }\n  });\n\n  const handleStartUnstakeClick = useLastCallback(() => {\n    submitStakingInitial({ isUnstaking: true, amount: unstakeAmount });\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setSuccessUnstakeAmount(amount);\n\n    submitStakingPassword({ password, isUnstaking: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setSuccessUnstakeAmount(amount);\n    submitStakingHardware({ isUnstaking: true });\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !unstakeAmount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"green\"\n        text={formatCurrency(toDecimal(unstakeAmount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  const validateAndSetAmount = useLastCallback(\n    (newAmount: bigint | undefined, noReset = false) => {\n      if (!noReset) {\n        setHasAmountError(false);\n        setIsInsufficientBalance(false);\n      }\n\n      if (newAmount === undefined) {\n        setUnstakeAmount(undefined);\n        return;\n      }\n\n      if (newAmount < 0) {\n        setHasAmountError(true);\n        return;\n      }\n\n      if (!stakingBalance || newAmount > stakingBalance) {\n        setHasAmountError(true);\n        setIsInsufficientBalance(true);\n      }\n\n      setUnstakeAmount(newAmount);\n    },\n  );\n\n  const handleMaxAmountClick = useLastCallback(() => {\n    if (!stakingBalance) {\n      return;\n    }\n\n    validateAndSetAmount(stakingBalance);\n  });\n\n  const handleAmountChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? fromDecimal(stringValue, token?.decimals) : undefined;\n    validateAndSetAmount(value);\n  });\n\n  function renderBalance() {\n    return (\n      <AmountFieldMaxButton\n        maxAmount={stakingBalance}\n        token={token}\n        isLoading={stakingBalance === undefined || !token}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        isAllMode\n        onAmountClick={handleMaxAmountClick}\n      />\n    );\n  }\n\n  function renderCurrencyValue() {\n    return (\n      <span className={buildClassName(styles.amountInCurrency, currencyClassNames)}>\n        &thinsp;{formatCurrency(renderingAmountInCurrency || '0', shortBaseSymbol)}\n      </span>\n    );\n  }\n\n  function renderBottomRight() {\n    const activeKey = isInsufficientBalance ? 0\n      : !isNativeEnough ? 1\n        : instantAvailable ? 2\n          : 3;\n\n    let content: string | React.JSX.Element | TeactNode[] = token ? lang('$fee_value', {\n      fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n    }) : '';\n\n    if (token) {\n      if (isInsufficientBalance) {\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (!isNativeEnough) {\n        content = (\n          <span className={styles.balanceError}>\n            {lang('$insufficient_fee', {\n              fee: formatCurrency(toBig(networkFee), nativeToken?.symbol ?? ''),\n            })}\n          </span>\n        );\n      } else if (instantAvailable) {\n        content = lang('$unstake_up_to_information', {\n          value: formatCurrency(toDecimal(instantAvailable, token.decimals), token.symbol),\n        });\n      }\n    }\n\n    return (\n      <Transition\n        className={styles.amountBottomRight}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"fade\"\n        activeKey={activeKey}\n      >\n        {content}\n      </Transition>\n    );\n  }\n\n  function renderUnstakeTimer() {\n    return (\n      <div className={buildClassName(styles.unstakeTime)}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n        />\n        <div>\n          {lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, unstakeDate)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderUnstakeInfo() {\n    const shouldShowInfo = !isInsufficientBalance && unstakeAmount;\n\n    return (\n      <Transition name=\"fade\" activeKey={!shouldShowInfo ? 0 : !isLongUnstake ? 1 : 2}>\n        {!shouldShowInfo ? undefined\n          : (\n            !isLongUnstake\n              ? (\n                <div className={styles.unstakeInfo}>\n                  {lang('$unstake_information_instantly')}\n                </div>\n              )\n              : renderUnstakeTimer()\n          )}\n      </Transition>\n    );\n  }\n\n  function renderInitial() {\n    return (\n      <>\n        <ModalHeader title={lang('$unstake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n        <div className={modalStyles.transitionContent}>\n          {!isNominators && renderBalance()}\n          <RichNumberInput\n            key=\"unstaking_amount\"\n            id=\"unstaking_amount\"\n            hasError={hasAmountError}\n            value={unstakeAmount === undefined ? undefined : toDecimal(unstakeAmount, token?.decimals)}\n            labelText={lang('Amount to unstake')}\n            onChange={handleAmountChange}\n            className={styles.amountInput}\n            decimals={token?.decimals}\n            disabled={isNominators}\n          >\n            <div className={styles.ton}>\n              <img src={logoPath} alt=\"\" className={styles.tonIcon} />\n              <span className={styles.tonName}>{token?.symbol}</span>\n            </div>\n          </RichNumberInput>\n\n          <div className={styles.amountBottomWrapper}>\n            <div className={styles.amountBottom}>\n              {shouldRenderCurrency && renderCurrencyValue()}\n              {renderBottomRight()}\n            </div>\n          </div>\n\n          {renderUnstakeInfo()}\n\n          <div className={modalStyles.buttons}>\n            <Button\n              isPrimary\n              isLoading={isLoading}\n              isDisabled={isUnstakeDisabled}\n              onClick={handleStartUnstakeClick}\n            >\n              {lang('Unstake')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Unstaking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"unstaking\"\n          error={error}\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={getIsMobileTelegramApp() ? lang('Request is sent!') : lang('Request for unstaking is sent!')}\n          onClose={cancelStaking}\n        />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color=\"green\"\n            playAnimation={isActive}\n            amount={successUnstakeAmount}\n            tokenSymbol={token?.symbol}\n            noSign\n          />\n\n          {isLongUnstake && renderUnstakeTimer()}\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case StakingState.UnstakeInitial:\n        return renderInitial();\n\n      case StakingState.UnstakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.UnstakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.UnstakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.UnstakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"unstake\"\n      forceFullNative={FULL_SIZE_NBS_STATES.has(renderingKey)}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const tokens = selectCurrentAccountTokens(global);\n  const baseCurrency = global.settings.baseCurrency;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const isNominators = stakingState?.type === 'nominators';\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    ...global.currentStaking,\n    tokens,\n    stakingInfo: global.stakingInfo,\n    baseCurrency,\n    isNominators,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    theme: global.settings.theme,\n    isMultichainAccount,\n    stakingState,\n    isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n  };\n})(UnstakeModal));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport {\n  APP_INSTALL_URL,\n  APP_NAME,\n  APP_REPO_URL,\n  IS_ANDROID_DIRECT,\n  IS_FIREFOX_EXTENSION,\n} from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport {\n  IS_ANDROID_APP,\n  IS_CHROME_EXTENSION,\n  IS_EDGE,\n  IS_IOS_APP,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateAvailable.module.scss';\n\ninterface StateProps {\n  isAppUpdateAvailable?: boolean;\n  isAppUpdateRequired?: boolean;\n  newAppVersion?: string;\n}\n\nfunction UpdateAvailable({ isAppUpdateAvailable, newAppVersion, isAppUpdateRequired }: StateProps) {\n  const lang = useLang();\n\n  const { shouldRender, transitionClassNames } = useShowTransition(\n    (IS_ANDROID_DIRECT && isAppUpdateAvailable) || isAppUpdateRequired,\n  );\n\n  const handleClick = () => {\n    if (IS_WEB) {\n      window.location.reload();\n      return;\n    }\n\n    void openUrl(getUrl(newAppVersion), { isExternal: true });\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <button type=\"button\" className={buildClassName(styles.wrapper, transitionClassNames)} onClick={handleClick}>\n      <i className={buildClassName('icon icon-download-filled', styles.icon)} aria-hidden />\n      {lang('Update %app_name%', { app_name: APP_NAME })}\n    </button>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => ({\n  isAppUpdateAvailable: global.isAppUpdateAvailable,\n  newAppVersion: global.latestAppVersion,\n  isAppUpdateRequired: global.isAppUpdateRequired,\n}))(UpdateAvailable));\n\nfunction getUrl(appVersion?: string) {\n  if (IS_ANDROID_DIRECT) {\n    return appVersion\n      ? `${APP_REPO_URL}/releases/download/v${encodeURIComponent(appVersion || '')}/${encodeURIComponent(APP_NAME)}.apk`\n      : 'https://github.com/mytonwalletorg/mytonwallet/releases/latest';\n  }\n\n  if (IS_ANDROID_APP) {\n    return `${APP_INSTALL_URL}android-store`;\n  }\n\n  if (IS_IOS_APP) {\n    return `${APP_INSTALL_URL}ios`;\n  }\n\n  if (IS_CHROME_EXTENSION) {\n    return `${APP_INSTALL_URL}${IS_EDGE ? 'edge-extension' : 'chrome-extension'}`;\n  }\n\n  if (IS_FIREFOX_EXTENSION) {\n    return `${APP_INSTALL_URL}firefox-extension`;\n  }\n\n  return APP_INSTALL_URL;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"eU8arlH4\",\"icon\":\"X9C5VDdJ\"};","import type { ApiVestingInfo, ApiVestingPartStatus } from '../../../api/types';\n\nexport function calcVestingAmountByStatus(vesting: ApiVestingInfo[], statuses: ApiVestingPartStatus[]) {\n  return vesting.reduce((acc, currentVesting) => {\n    return acc + currentVesting.parts.reduce((currentAcc, part) => {\n      return currentAcc + (statuses.includes(part.status) ? part.amount : 0);\n    }, 0);\n  }, 0).toString();\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"Z3AdvY3j\",\"modalHeader\":\"UGaC6iSp\",\"passwordModalDialog\":\"TSf_GkYf\",\"amountWrapper\":\"nmSXdbkU\",\"close\":\"gj76sp0s\",\"inputWrapper\":\"WYLJUay4\",\"inputLabel\":\"af6G76Qu\",\"inputValue\":\"W2jkzSKT\",\"unfreezeInput\":\"laFaO54G\",\"unfreezeResult\":\"Da5SKOto\",\"buttons\":\"TDJhFbKs\",\"button\":\"q0MWzlSV\",\"unfreezeTime\":\"nOY_rRWD\",\"unfreezeTimeIcon\":\"B_mbvdNt\",\"actions\":\"qVDajNe7\",\"actionsTitle\":\"mwrjA2Wq\",\"actionsList\":\"Gvf3taGj\",\"block\":\"N60lIj1U\",\"vestingInfo\":\"aLa4cQLd\",\"blockTitle\":\"RlCMRY3O\",\"blockSubtitle\":\"A2xAIJdW\",\"part\":\"tbB7hrjM\",\"partInteractive\":\"Fi06J8yl\",\"active\":\"hNrDT2Be\",\"partIcon\":\"Bc1llfyb\",\"partValue\":\"oTZtwcWo\",\"transactionBanner\":\"pu3vP7ZP\",\"operationInfoFee\":\"V5IIeyTC\",\"operationInfoFeeWithGap\":\"ZROURKjf\",\"partName\":\"SkSkSLJA\",\"bold\":\"_7RDFG6sc\",\"date\":\"F8H8tP5h\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { Theme } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, SHORT_FRACTION_DIGITS } from '../../config';\nimport { selectCurrentAccountState, selectMycoin } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\n\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isUnfreezeRequested?: boolean;\n  vesting?: ApiVestingInfo[];\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst MY_TOKEN_SYMBOL = 'MY';\n\nfunction VestingModal({\n  isOpen,\n  isUnfreezeRequested,\n  vesting,\n  mycoin,\n  theme,\n}: StateProps) {\n  const { fetchStakingHistory, closeVestingModal, startClaimingVesting } = getActions();\n\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const currentlyFrozenAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['frozen', 'ready']);\n  }, [vesting]);\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const isDisabledUnfreeze = currentlyReadyToUnfreezeAmount === '0';\n  const appTheme = useAppTheme(theme);\n\n  useInterval(forceUpdate, isUnfreezeRequested ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  const handleStartClaimingVesting = useLastCallback(() => {\n    startClaimingVesting();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderUnfrozenDescription() {\n    return (\n      <div className={styles.unfreezeTime}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unfreezeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockBlue}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockBlue}\n        />\n        <div>\n          {lang('You will receive your unfrozen coins in a few minutes.')}\n        </div>\n      </div>\n    );\n  }\n\n  function renderVestingInfo(info: ApiVestingInfo) {\n    return (\n      <div key={info.id} className={styles.block}>\n        <div className={styles.vestingInfo}>\n          <div className={styles.blockTitle}>{info.title}</div>\n          <div className={styles.blockSubtitle}>\n            {lang('%volume% in %amount% parts', {\n              volume: <b>{formatCurrency(info.initialAmount, mycoin!.symbol, mycoin!.decimals)}</b>,\n              amount: info.parts.length.toString(),\n            })}\n          </div>\n        </div>\n        {info.parts.map((part) => {\n          const icon = part.status === 'frozen'\n            ? 'icon-snow'\n            : (part.status === 'missed' ? 'icon-missed' : part.status === 'unfrozen' ? 'icon-check' : 'icon-fire');\n          const title = part.status === 'frozen'\n            ? 'Frozen'\n            : (part.status === 'missed' ? 'Missed' : part.status === 'unfrozen' ? 'Unfrozen' : 'Ready to Unfreeze');\n          const isInteractive = !isUnfreezeRequested && part.status === 'ready';\n          const endsAt = part.status === 'frozen'\n            ? part.time\n            : part.status === 'ready'\n              ? part.timeEnd\n              : undefined;\n\n          return (\n            <div\n              key={part.id}\n              role={isInteractive ? 'button' : undefined}\n              className={buildClassName(styles.part, part.status, isInteractive && styles.partInteractive)}\n              onClick={isInteractive ? handleStartClaimingVesting : undefined}\n            >\n              <i\n                className={buildClassName(styles.partIcon, icon, part.status)}\n                aria-hidden\n              />\n              <div className={styles.partName}>\n                {lang(title)}\n                {Boolean(endsAt) && (\n                  <div className={styles.date}>\n                    {lang('until %date%', {\n                      date: (\n                        <>\n                          <span className={styles.bold}>{formatFullDay(lang.code!, endsAt)}</span>,\n                          {' '}{formatTime(endsAt)}\n                        </>),\n                    })}\n                  </div>\n                )}\n              </div>\n              <div className={buildClassName(styles.partValue, part.status)}>\n                {formatCurrency(part.amount, mycoin!.symbol, mycoin!.decimals)}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderVestingSchedule() {\n    return (\n      <div className={styles.actions}>\n        <div className={styles.actionsTitle}>{lang('Vesting Schedule')}</div>\n        <div className={buildClassName(styles.actionsList, 'custom-scroll')}>\n          {vesting?.map(renderVestingInfo)}\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <>\n        <div className={styles.amountWrapper}>\n          <ModalHeader\n            title={lang('Vesting')}\n            className={styles.modalHeader}\n            closeClassName={styles.close}\n            onClose={closeVestingModal}\n          />\n          <RichNumberField\n            labelText={lang('Vesting Balance')}\n            zeroValue=\"...\"\n            value={currentlyFrozenAmount || '0'}\n            decimals={SHORT_FRACTION_DIGITS}\n            suffix={MY_TOKEN_SYMBOL}\n            className={styles.inputWrapper}\n            labelClassName={styles.inputLabel}\n            valueClassName={styles.inputValue}\n          />\n          {isUnfreezeRequested\n            ? renderUnfrozenDescription()\n            : (\n              <>\n                <RichNumberField\n                  labelText={lang('Ready to Unfreeze')}\n                  zeroValue=\"...\"\n                  value={currentlyReadyToUnfreezeAmount}\n                  decimals={SHORT_FRACTION_DIGITS}\n                  suffix={MY_TOKEN_SYMBOL}\n                  className={styles.inputWrapper}\n                  inputClassName={styles.unfreezeInput}\n                  labelClassName={styles.inputLabel}\n                  valueClassName={styles.unfreezeResult}\n                />\n                <div className={styles.buttons}>\n                  <Button\n                    className={styles.button}\n                    isPrimary\n                    isDisabled={isDisabledUnfreeze}\n                    onClick={!isDisabledUnfreeze ? handleStartClaimingVesting : undefined}\n                  >\n                    {lang('Unfreeze')}\n                  </Button>\n                </div>\n              </>\n            )}\n        </div>\n        {renderVestingSchedule()}\n      </>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"vesting-info\"\n      forceFullNative\n      onClose={closeVestingModal}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const { info: vesting, unfreezeRequestedIds } = accountState?.vesting || {};\n\n  return {\n    isOpen: global.isVestingModalOpen,\n    vesting,\n    isUnfreezeRequested: Boolean(unfreezeRequestedIds?.length),\n    mycoin: selectMycoin(global),\n    theme: global.settings.theme,\n  };\n})(VestingModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { HardwareConnectState, UserToken } from '../../global/types';\nimport { VestingUnfreezeState } from '../../global/types';\n\nimport { CLAIM_AMOUNT, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectMycoin,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  vesting?: ApiVestingInfo[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: VestingUnfreezeState;\n  mycoin?: ApiTokenWithPrice;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n}\nfunction VestingPasswordModal({\n  isOpen,\n  vesting,\n  tokens,\n  isLoading,\n  address,\n  error,\n  mycoin,\n  state = VestingUnfreezeState.Password,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isHardwareAccount,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    submitClaimingVesting,\n    submitClaimingVestingHardware,\n    cancelClaimingVesting,\n    clearVestingError,\n  } = getActions();\n\n  const lang = useLang();\n  const {\n    amount: balance,\n  } = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]) || {};\n  const claimAmount = toBig(CLAIM_AMOUNT);\n  const hasAmountError = !balance || balance < CLAIM_AMOUNT;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = !isHardwareAccount && !getDoesUsePinPad();\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (hasAmountError) return;\n    submitClaimingVesting({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (hasAmountError) return;\n    submitClaimingVestingHardware();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={mycoin}\n          withChainIcon={isMultichainAccount}\n          text={formatCurrency(currentlyReadyToUnfreezeAmount, mycoin!.symbol, mycoin!.decimals)}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={shortenAddress(address!)}\n        />\n        <div className={feeClassName}>\n          {renderText(lang('$fee_value_bold', { fee: formatCurrency(claimAmount, TONCOIN.symbol) }))}\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case VestingUnfreezeState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelClaimingVesting}\n          />\n        );\n\n      case VestingUnfreezeState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelClaimingVesting}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case VestingUnfreezeState.Password:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"unfreeze\"\n            error={hasAmountError ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelClaimingVesting}\n            onUpdate={clearVestingError}\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={withModalHeader ? lang('Confirm Unfreezing') : undefined}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"vesting-confirm\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelClaimingVesting}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const accountState = selectCurrentAccountState(global);\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    isConfirmRequested: isOpen,\n    info: vesting,\n    isLoading,\n    error,\n    unfreezeState,\n  } = accountState?.vesting || {};\n  const tokens = selectCurrentAccountTokens(global);\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    isOpen,\n    vesting,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    state: unfreezeState,\n    mycoin: selectMycoin(global),\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(VestingPasswordModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"tGUq61Uw\",\"scrollContent\":\"m5XAGki9\",\"amountInput\":\"SZC58ifv\",\"amountInputBuy\":\"uBBR78Gi\",\"inputLabel\":\"EeV5B584\",\"amountInputInner\":\"L752Cv1F\",\"advancedSlippageContainer\":\"jiH3u0SA\",\"content\":\"dQUuISOK\",\"inputContainer\":\"IkAedzyb\",\"advancedSlippageButton\":\"nnFruaI2\",\"slippageLabel\":\"BCxUm5xP\",\"swapButtonWrapper\":\"eEwTqlEP\",\"swapButtonWrapperStatic\":\"z1UgQ2yi\",\"swapButton\":\"hrHymNJu\",\"footerBlock\":\"yPmfwG9j\",\"footerBlockStatic\":\"Edk19FlP\",\"dot\":\"ru4rAllW\",\"advancedBlock\":\"dx6Hf2xp\",\"advancedRow\":\"QPeOMoOM\",\"advancedDescription\":\"YzXjxATB\",\"advancedTooltip\":\"QdMU2Tgb\",\"advancedTooltipContainer\":\"VGq4FFXS\",\"advancedTooltipMessage\":\"VLNF6T4k\",\"advancedValue\":\"JTLP1WRv\",\"advancedSlippageError\":\"NW_aag3U\",\"advancedSlippage\":\"K4rGLITC\",\"advancedInput\":\"uWjxL_tL\",\"advancedInputValue\":\"Y_KEhiFS\",\"isEmpty\":\"lP4fP0kG\",\"advancedError\":\"X2kTDRkO\",\"advancedLink\":\"NlT_I8kT\",\"advancedLinkIcon\":\"A0XDmIY2\",\"advancedPlaceholder\":\"vvtzW7L0\",\"footerButtonWrapper\":\"_5_NPQXE0\",\"footerButton\":\"qzfAPYMD\",\"swapArrowIcon\":\"Vzdj7mTH\",\"changellyInfo\":\"gCMqbJwS\",\"priceImpact\":\"nwwHhwFa\",\"feeLine\":\"vz3aF88G\",\"priceImpactSticker\":\"YaZn9OUh\",\"priceImpactContent\":\"UUOZvXZT\",\"priceImpactTitle\":\"sbyrAyQC\",\"priceImpactArrow\":\"cEk2aQ7Z\",\"priceImpactDescription\":\"olGNOU3k\",\"swapCornerTop\":\"csDd7Ni1\",\"swapCornerBottom\":\"xyxUxtsY\",\"swapCornerStaticTop\":\"B7ECmlJ1\",\"swapCornerStaticBottom\":\"WuHn_HeC\",\"selectBlockchainBlock\":\"prVCHnG1\",\"inputAddressWrapper\":\"DTAq0std\",\"inputAddress\":\"b7EwDSEo\",\"blockchainHintWrapper\":\"ywkeppF2\",\"changellyDescription\":\"V7p8St7r\",\"blockchainHintText\":\"CBP3_LjF\",\"blockchainHintTextError\":\"t2EtyAQD\",\"inputButton\":\"IpN3STYq\",\"inputButtonShifted\":\"xDE5m07O\",\"changellyInfoStatic\":\"EvrCvWOD\",\"priceImpactStatic\":\"eoiWwJ0m\",\"changellyInfoTitle\":\"fwJQ9lpO\",\"changellyInfoDescription\":\"Y38OidS3\",\"changellyIcon\":\"ieB34P8k\",\"changellyInfoBlock\":\"aQOSkXKG\",\"blockchainButtons\":\"pQ9YM0ta\",\"changellyTextField\":\"cTKYWTLL\",\"textFieldWrapperFullWidth\":\"VR4c3lOH\",\"changellyImportantRed\":\"M_DwJtlB\",\"arrowContainer\":\"abK4XtWe\",\"arrowContainerInverted\":\"OSP7z62u\",\"arrow\":\"ZktBDvds\",\"arrowNew\":\"Z8CqJe5c\",\"arrowOld\":\"G_2MIwOh\",\"animateDisappear\":\"PpIbnc8v\",\"arrow-disappear\":\"VKHzIRP6\",\"arrowDisappear\":\"VKHzIRP6\",\"animateAppear\":\"STVPF9rF\",\"arrow-appear\":\"igBksUDT\",\"arrowAppear\":\"igBksUDT\",\"transactionBanner\":\"T1jLnRBM\",\"changellyDescriptionBold\":\"Vbj5MEAN\",\"qrCode\":\"MuLyFrfU\",\"qrCodeHidden\":\"Fn7oQpnQ\",\"textFieldLabel\":\"ak6Vmppj\"};","import type { TeactNode } from '../../../lib/teact/teact';\nimport React, { memo, useRef } from '../../../lib/teact/teact';\n\nimport type { DieselStatus, UserSwapToken } from '../../../global/types';\nimport { SwapErrorType, SwapType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrencySimple } from '../../../util/formatNumber';\n\nimport { useThrottledSignal } from '../../../hooks/useAsyncResolvers';\nimport useDerivedSignal from '../../../hooks/useDerivedSignal';\nimport useDerivedState from '../../../hooks/useDerivedState';\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Transition from '../../ui/Transition';\n\nimport styles from '../Swap.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  isEstimating?: boolean;\n  isSending?: boolean;\n  isNotEnoughNative?: boolean;\n  nativeToken?: UserSwapToken;\n  dieselStatus?: DieselStatus;\n  isPriceImpactError?: boolean;\n  canSubmit?: boolean;\n  errorType?: SwapErrorType;\n  limits?: {\n    fromMin?: string;\n    fromMax?: string;\n  };\n}\n\nconst BUTTON_ANIMATION_DURATION = 250 + ANIMATION_END_DELAY;\n\nfunction SwapSubmitButton({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  isEstimating,\n  isSending,\n  isNotEnoughNative,\n  nativeToken,\n  dieselStatus,\n  isPriceImpactError,\n  canSubmit,\n  errorType,\n  limits,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isErrorExist = errorType !== undefined;\n  const shouldSendingBeVisible = isSending && swapType === SwapType.CrosschainToWallet;\n  const isDisabled = !canSubmit || shouldSendingBeVisible;\n  const isLoading = isEstimating || shouldSendingBeVisible;\n\n  const errorMsgByType = {\n    [SwapErrorType.UnexpectedError]: lang('Unexpected Error'),\n    [SwapErrorType.InvalidPair]: lang('Invalid Pair'),\n    [SwapErrorType.NotEnoughLiquidity]: lang('Insufficient liquidity'),\n    [SwapErrorType.ChangellyMinSwap]: lang('Minimum amount', {\n      value: formatCurrencySimple(limits?.fromMin ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.ChangellyMaxSwap]: lang('Maximum amount', {\n      value: formatCurrencySimple(limits?.fromMax ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.NotEnoughForFee]: lang('Not Enough %symbol%', {\n      symbol: tokenIn?.symbol,\n    }),\n    [SwapErrorType.TooSmallAmount]: lang('$swap_too_small_amount'),\n  };\n\n  const isTouched = Boolean(amountIn || amountOut);\n\n  let text: string | TeactNode[] = '$swap_from_to';\n\n  if (isTouched) {\n    if (isErrorExist) {\n      text = errorMsgByType[errorType];\n    } else if (nativeToken) {\n      if (isNotEnoughNative && tokenIn?.chain === 'ton' && tokenIn?.tokenAddress) {\n        if (dieselStatus === 'not-available') {\n          text = lang('Not Enough %symbol%', { symbol: 'TON' });\n        } else if (dieselStatus === 'pending-previous') {\n          text = lang('Awaiting Previous Fee');\n        } else if (dieselStatus === 'not-authorized') {\n          text = lang('Authorize %token% Fee', { token: tokenIn?.symbol });\n        }\n      } else if (isNotEnoughNative) {\n        text = lang('Not Enough %symbol%', { symbol: nativeToken?.symbol });\n      }\n    }\n  }\n\n  const textStr = Array.isArray(text) ? text.join('') : text;\n\n  const shouldShowError = !isEstimating && (\n    isPriceImpactError\n    || isErrorExist\n    || (nativeToken && isNotEnoughNative && (\n      !dieselStatus\n      || dieselStatus === 'not-available'\n      || dieselStatus === 'pending-previous'\n    ))\n  );\n\n  const isDestructive = isTouched && shouldShowError;\n\n  const transitionKeyRef = useRef(0);\n  const render = useDerivedSignal(() => {\n    const renderedText = textStr === '$swap_from_to'\n      ? lang('$swap_from_to', {\n        from: tokenIn?.symbol,\n        icon: <i className={buildClassName('icon-chevron-right', styles.swapArrowIcon)} aria-hidden />,\n        to: tokenOut?.symbol,\n      })\n      : textStr;\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        className={styles.footerButtonWrapper}\n        activeKey={transitionKeyRef.current++}\n      >\n        <Button\n          isPrimary\n          isSubmit\n          className={styles.footerButton}\n          isDisabled={isDisabled}\n          isLoading={isLoading}\n          isDestructive={isDestructive}\n        >\n          {/* The <span> is to have inline content positioning to align the icon properly */}\n          <span>{renderedText}</span>\n        </Button>\n      </Transition>\n    );\n  }, [isDestructive, isDisabled, isLoading, lang, textStr, tokenIn?.symbol, tokenOut?.symbol]);\n\n  const renderThrottled = useThrottledSignal(render, BUTTON_ANIMATION_DURATION);\n  const rendered = useDerivedState(renderThrottled);\n\n  return rendered;\n}\n\nexport default memo(SwapSubmitButton);\n","import type { Scheduler } from '../util/schedulers';\nimport type { Signal } from '../util/signals';\n\nimport useDebouncedCallback from './useDebouncedCallback';\nimport useDerivedSignal from './useDerivedSignal';\nimport useThrottledCallback from './useThrottledCallback';\n\nexport function useThrottledResolver<T>(\n  resolver: () => T,\n  deps: any[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  return useThrottledCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, msOrSchedulerFn, noFirst);\n}\n\nexport function useThrottledSignal<T extends any>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n): Signal<T> {\n  const throttledResolver = useThrottledResolver(() => getValue(), [getValue], ms, noFirst);\n\n  return useDerivedSignal(\n    throttledResolver, [throttledResolver, getValue], true,\n  );\n}\n\nexport function useDebouncedResolver<T>(\n  resolver: () => T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  return useDebouncedCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, ms, noFirst, noLast);\n}\n\nexport function useDebouncedSignal<T extends any>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n  noLast = false,\n): Signal<T> {\n  const debouncedResolver = useDebouncedResolver(() => getValue(), [getValue], ms, noFirst, noLast);\n\n  return useDerivedSignal(\n    debouncedResolver, [debouncedResolver, getValue], true,\n  );\n}\n","import type { ApiSwapAsset } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { formatNumber } from '../formatNumber';\n\nconst BTC = new Set(['jWBTC', 'oWBTC', 'BTC']);\nconst USD = new Set(['jUSDT', 'oUSDT', 'USDT', 'jUSDC', 'oUSDC', 'USDC', 'USD']);\nconst FIAT = new Set(['USD', 'RUB', 'EUR', 'CNY']);\n\nconst LARGE_NUMBER = 1000;\n\nfunction getCurrencyPriority(symbol: string) {\n  if (FIAT.has(symbol)) return 5;\n  if (USD.has(symbol)) return 4;\n  if (BTC.has(symbol)) return 3;\n  if (symbol === TONCOIN.symbol) return 2;\n\n  return 1;\n}\n\nexport default function getSwapRate(\n  fromAmount?: string,\n  toAmount?: string,\n  fromToken?: Pick<ApiSwapAsset, 'symbol'>,\n  toToken?: Pick<ApiSwapAsset, 'symbol'>,\n  shouldTrimLargeNumber = false,\n) {\n  if (!fromAmount || !toAmount || !fromToken || !toToken) {\n    return undefined;\n  }\n\n  let firstCurrencySymbol = fromToken.symbol;\n  let secondCurrencySymbol = toToken.symbol;\n  let price: string;\n  const fromAmountBig = new Big(fromAmount);\n  const toAmountBig = new Big(toAmount);\n\n  if (fromAmountBig.eq(0) || toAmountBig.eq(0)) {\n    return undefined;\n  }\n\n  const fromPriority = getCurrencyPriority(firstCurrencySymbol);\n  const toPriority = getCurrencyPriority(secondCurrencySymbol);\n\n  if (toPriority < fromPriority) {\n    firstCurrencySymbol = toToken.symbol;\n    secondCurrencySymbol = fromToken.symbol;\n    const ratio = fromAmountBig.div(toAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  } else {\n    const ratio = toAmountBig.div(fromAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  }\n\n  return {\n    firstCurrencySymbol,\n    secondCurrencySymbol,\n    price,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"mdHmid9q\",\"container\":\"y7MeqLtP\",\"content\":\"M5luQatq\",\"button\":\"bmtS8v9y\",\"static\":\"VF77TUMq\",\"label\":\"Er8PXP6e\",\"labelText\":\"IIv2eCYK\",\"iconArrowRight\":\"jDHaQfBV\",\"dexList\":\"NlzL4Voz\",\"dexItem\":\"lL1VFeQA\",\"bestRate\":\"AC6eCyuu\",\"current\":\"_F70O58C\",\"dexValue\":\"J5iGiLKz\",\"dexTitle\":\"YT_HY2ps\",\"dexIcon\":\"V0Td82aA\",\"dexValueFractional\":\"jQ6cgMjD\",\"dexExchangeRate\":\"JAHr4SCc\",\"dexInfo\":\"sRFnXBUF\",\"dexInfoDisabled\":\"e9qAwzfb\",\"bestLabel\":\"gq26TBf_\",\"dexSubmitSlide\":\"i8eq5QM3\",\"dexSubmitButtons\":\"IfkI_jwY\",\"dexBestRateButton\":\"MevYjouy\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapDexLabel, ApiSwapEstimateVariant } from '../../api/types';\nimport type { GlobalState, UserSwapToken } from '../../global/types';\nimport { SwapInputSource } from '../../global/types';\n\nimport {\n  DEFAULT_OUR_SWAP_FEE,\n  SHORT_FRACTION_DIGITS,\n  SWAP_DEX_LABELS,\n  WHOLE_PART_DELIMITER,\n} from '../../config';\nimport { getNumberParts } from '../../global/helpers/number';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './SwapDexChooser.module.scss';\n\nimport DedustPath from '../../assets/logo/dedust.png';\nimport StonfiPath from '../../assets/logo/stonfi.png';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n}\n\nconst IS_WHOLE_PART_BIG_REGEX = /^\\d{5,}([.,]|$)/;\n\nfunction SwapDexChooser({\n  tokenIn,\n  tokenOut,\n  isStatic,\n  currentSwap: {\n    amountOut,\n    amountIn,\n    estimates,\n    currentDexLabel,\n    bestRateDexLabel,\n    inputSource,\n    ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  },\n}: OwnProps & StateProps) {\n  const { setSwapDex } = getActions();\n\n  const lang = useLang();\n\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [selectedDexLabel, setSelectedDexLabel] = useState<ApiSwapDexLabel | undefined>(currentDexLabel);\n  const renderedDexItems = useCurrentOrPrev(estimates?.length ? estimates : undefined, true);\n  const renderedCurrentDexLabel = useCurrentOrPrev(currentDexLabel, true);\n  const renderedBestRateDexLabel = useCurrentOrPrev(bestRateDexLabel, true);\n  const isBestRateSelected = Boolean(bestRateDexLabel && bestRateDexLabel === selectedDexLabel);\n  const confirmLabel = isBestRateSelected\n    ? lang('Use Best Rate')\n    : lang('Switch to %dex_name%', {\n      dex_name: selectedDexLabel ? SWAP_DEX_LABELS[selectedDexLabel] : '',\n    });\n\n  const { shouldRender, transitionClassNames } = useShowTransition(\n    !!estimates?.length && !!tokenOut && !!amountOut && !!amountIn,\n  );\n\n  const handleDexConfirm = useLastCallback(() => {\n    if (selectedDexLabel) {\n      setSwapDex({ dexLabel: selectedDexLabel });\n    }\n    closeModal();\n  });\n\n  function toggleDexMenu() {\n    if (isModalOpen) {\n      closeModal();\n    } else {\n      setSelectedDexLabel(currentDexLabel);\n      openModal();\n    }\n  }\n\n  const { shouldRender: shouldRenderBenefit, value: benefitAmount } = useMemo(() => {\n    return calculateBenefitAmount({\n      ourFeePercent,\n      decimals: inputSource === SwapInputSource.In ? tokenOut?.decimals : tokenIn?.decimals,\n      estimates,\n      inputSource,\n      bestRateDexLabel: renderedBestRateDexLabel,\n    });\n  }, [renderedBestRateDexLabel, estimates, inputSource, ourFeePercent, tokenIn?.decimals, tokenOut?.decimals]);\n\n  const renderedAmounts = useMemo<Record<ApiSwapDexLabel, TeactNode> | undefined>(() => {\n    if (!renderedDexItems?.length || renderedDexItems.length < 2) return undefined;\n\n    return renderedDexItems.reduce((acc, item) => {\n      const { fromAmount, toAmount, dexLabel } = item;\n      const amount = inputSource === SwapInputSource.In ? toAmount : fromAmount;\n      const token = inputSource === SwapInputSource.In ? tokenOut! : tokenIn!;\n\n      if (IS_WHOLE_PART_BIG_REGEX.test(amount)) {\n        const formattedAmount = formatDexItemAmount(amount, token);\n\n        if (formattedAmount) {\n          acc[dexLabel] = formattedAmount;\n        }\n      } else {\n        acc[dexLabel] = formatCurrency(amount, token.symbol);\n      }\n\n      return acc;\n    }, {} as Record<ApiSwapDexLabel, TeactNode>);\n  }, [inputSource, renderedDexItems, tokenIn, tokenOut]);\n\n  if (!shouldRender || !renderedDexItems?.length) return undefined;\n\n  const buttonContent = (\n    <>\n      {renderedBestRateDexLabel === renderedCurrentDexLabel && renderedDexItems.length > 1 && (\n        <span className={styles.label}><span className={styles.labelText}>{lang('Best Rate')}</span></span>\n      )}\n      {lang('via %dex_name%', {\n        dex_name: <strong>{SWAP_DEX_LABELS[renderedCurrentDexLabel!]}</strong>,\n      })}\n      {renderedDexItems.length > 1 && (\n        <i className={buildClassName('icon-chevron-right', styles.iconArrowRight)} aria-hidden />\n      )}\n    </>\n  );\n\n  if (renderedDexItems.length === 1) {\n    return (\n      <div className={buildClassName(styles.root, transitionClassNames)}>\n        <div className={styles.container}>\n          <span className={buildClassName(styles.content, isStatic && styles.static)}>{buttonContent}</span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderedDexItem(item: ApiSwapEstimateVariant) {\n    const rate = getSwapRate(item.fromAmount, item.toAmount, tokenIn, tokenOut);\n\n    return (\n      <div\n        key={item.dexLabel}\n        tabIndex={0}\n        role=\"button\"\n        className={buildClassName(\n          styles.dexItem,\n          renderedBestRateDexLabel === item.dexLabel && styles.bestRate,\n          selectedDexLabel === item.dexLabel && styles.current,\n        )}\n        onClick={() => { setSelectedDexLabel(item.dexLabel); }}\n      >\n        <div className={styles.dexTitle}>\n          <img\n            src={item.dexLabel === 'dedust' ? DedustPath : StonfiPath}\n            alt={SWAP_DEX_LABELS[item.dexLabel]}\n            className={styles.dexIcon}\n          />\n          {SWAP_DEX_LABELS[item.dexLabel]}\n        </div>\n        <div className={styles.dexValue}>{renderedAmounts?.[item.dexLabel]}</div>\n        <div className={styles.dexExchangeRate}>\n          {rate ? <>{rate.firstCurrencySymbol}&nbsp; {rate.price}&nbsp;{rate.secondCurrencySymbol}</> : undefined}\n        </div>\n        {item.dexLabel === renderedBestRateDexLabel && (\n          <span className={styles.bestLabel}>{lang('Best')}</span>\n        )}\n      </div>\n    );\n  }\n\n  function renderBenefitAmount() {\n    if (inputSource === SwapInputSource.Out) {\n      return (\n        <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n          {renderText(lang('You will spend %amount% **less**.', {\n            amount: <strong>{formatCurrency(benefitAmount, tokenIn!.symbol)}</strong>,\n          }))}\n        </p>\n      );\n    }\n\n    return (\n      <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n        {renderText(lang('You will receive %amount% **more**.', {\n          amount: <strong>{formatCurrency(benefitAmount, tokenOut!.symbol)}</strong>,\n        }))}\n      </p>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, transitionClassNames)}>\n      <div className={styles.container}>\n        <button\n          type=\"button\"\n          className={buildClassName(styles.button, isStatic && styles.static)}\n          onClick={toggleDexMenu}\n        >\n          {buttonContent}\n        </button>\n        <Modal\n          isOpen={isModalOpen}\n          isCompact\n          title={lang('Built-in DEX Aggregator')}\n          onClose={closeModal}\n        >\n          <div className={styles.dexList}>\n            {renderedDexItems.map((item) => renderedDexItem(item))}\n          </div>\n\n          <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n            {renderText(lang('$swap_dex_chooser_rate_title'))}\n          </p>\n          {shouldRenderBenefit && renderBenefitAmount()}\n\n          <div className={buildClassName(modalStyles.buttons, styles.dexSubmitButtons)}>\n            <Transition\n              activeKey={isBestRateSelected ? 0 : 1}\n              name=\"semiFade\"\n              slideClassName={styles.dexSubmitSlide}\n            >\n              <Button\n                isPrimary\n                className={buildClassName(modalStyles.buttonFullWidth, isBestRateSelected && styles.dexBestRateButton)}\n                onClick={handleDexConfirm}\n              >\n                {confirmLabel}\n              </Button>\n            </Transition>\n\n          </div>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    currentSwap: global.currentSwap,\n  };\n})(SwapDexChooser));\n\nfunction calculateBenefitAmount({\n  ourFeePercent,\n  decimals,\n  bestRateDexLabel,\n  estimates,\n  inputSource,\n}: {\n  ourFeePercent: number;\n  decimals?: number;\n  estimates?: ApiSwapEstimateVariant[];\n  bestRateDexLabel?: ApiSwapDexLabel;\n  inputSource?: SwapInputSource;\n}) {\n  if (!estimates || estimates.length < 2) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const bestRateEstimate = estimates.find(({ dexLabel }) => dexLabel === bestRateDexLabel);\n  const otherEstimate = estimates.find(({ dexLabel }) => dexLabel !== bestRateDexLabel);\n\n  if (!otherEstimate || !bestRateEstimate) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const isDirectSwap = inputSource === SwapInputSource.In;\n  const amountKey = isDirectSwap ? 'toAmount' : 'fromAmount';\n  const ourFeeValue = (Number(bestRateEstimate[amountKey]) / 100) * ourFeePercent;\n  const benefit = (fromDecimal(bestRateEstimate[amountKey], decimals) - fromDecimal(otherEstimate[amountKey], decimals))\n    * (isDirectSwap ? 1n : -1n);\n  const shouldRender = (benefit - fromDecimal(ourFeeValue, decimals)) > 0n;\n\n  return {\n    shouldRender,\n    value: toDecimal(benefit, decimals),\n  };\n}\n\nfunction formatDexItemAmount(toAmount: string, tokenOut: UserSwapToken): TeactNode | undefined {\n  const parts = getNumberParts(toAmount, SHORT_FRACTION_DIGITS);\n  if (!parts) return undefined;\n\n  const [, wholePartRaw, dotPart, fractionPart] = parts;\n  const fractionStr = fractionPart || dotPart\n    ? `.${(fractionPart || '').substring(0, SHORT_FRACTION_DIGITS)}`\n    : '';\n\n  const formattedWholePart = wholePartRaw.replace(/\\d(?=(\\d{3})+($))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return (\n    <>\n      {formattedWholePart}\n      <span className={styles.dexValueFractional}>{fractionStr}&thinsp;{tokenOut!.symbol}</span>\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"nLt5kPU7\",\"container\":\"DL3GDV2h\",\"tooltip\":\"pPTN8epJ\",\"arrow\":\"mw4HrHNN\",\"icon\":\"DsxlgjFS\"};","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport type { EmojiIcon } from './Emoji';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_TOUCH_ENV, REM } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport Emoji from './Emoji';\nimport Portal from './Portal';\n\nimport styles from './IconWithTooltip.module.scss';\n\ntype OwnProps = {\n  message: React.ReactNode;\n  emoji?: EmojiIcon;\n  iconClassName?: string;\n  tooltipClassName?: string;\n};\n\nconst ARROW_WIDTH = 0.6875 * REM;\nconst GAP = 2 * REM;\n\nconst IconWithTooltip: FC<OwnProps> = ({\n  message,\n  emoji,\n  iconClassName,\n  tooltipClassName,\n}) => {\n  const [isOpen, open, close] = useFlag();\n  const { transitionClassNames, shouldRender } = useShowTransition(isOpen);\n\n  // eslint-disable-next-line no-null/no-null\n  const iconRef = useRef<HTMLDivElement | null>(null);\n  // eslint-disable-next-line no-null/no-null\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const tooltipStyle = useRef<string | undefined>();\n  const arrowStyle = useRef<string | undefined>();\n\n  const randomTooltipKey = useUniqueId();\n\n  const handleClickOutside = useLastCallback((event: Event) => {\n    if (!(event.target as HTMLElement).closest(`[data-tooltip-key=\"${randomTooltipKey}\"]`)) {\n      close();\n    }\n  });\n\n  useEffect(() => {\n    if (!isOpen) return undefined;\n    document.addEventListener('touchstart', handleClickOutside);\n\n    return () => {\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [isOpen, close, handleClickOutside]);\n\n  useEffect(() => {\n    if (!iconRef.current || !tooltipRef.current) return;\n\n    const { top, left, width } = iconRef.current.getBoundingClientRect();\n    const {\n      width: tooltipWidth,\n      height: tooltipHeight,\n    } = tooltipRef.current.getBoundingClientRect();\n\n    const tooltipCenter = (window.innerWidth - tooltipWidth) / 2;\n    const arrowPosition = left - tooltipCenter + width / 2 - ARROW_WIDTH / 2;\n    const horizontalOffset = arrowPosition < GAP ? GAP - arrowPosition : 0;\n\n    const tooltipVerticalStyle = `top: ${top - tooltipHeight - ARROW_WIDTH}px;`;\n    const tooltipHorizontalStyle = `left: ${tooltipCenter - horizontalOffset}px;`;\n    const arrowHorizontalStyle = `left: ${arrowPosition + horizontalOffset}px;`;\n    const arrowVerticalStyle = `top: ${tooltipHeight - ARROW_WIDTH / 2 - 1}px;`;\n\n    tooltipStyle.current = `${tooltipVerticalStyle} ${tooltipHorizontalStyle}`;\n    arrowStyle.current = `${arrowVerticalStyle} ${arrowHorizontalStyle}`;\n  }, [shouldRender]);\n\n  function renderIcon() {\n    if (emoji) {\n      return (\n        <div\n          ref={iconRef}\n          className={buildClassName(styles.icon, iconClassName)}\n          onClick={IS_TOUCH_ENV ? stopEvent : undefined}\n          onMouseEnter={open}\n          onMouseLeave={close}\n        >\n          <Emoji from={emoji} />\n        </div>\n      );\n    }\n\n    return (\n      <i\n        ref={iconRef}\n        className={buildClassName(styles.icon, 'icon-question', iconClassName)}\n        onClick={IS_TOUCH_ENV ? stopEvent : undefined}\n        onMouseEnter={open}\n        onMouseLeave={close}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.wrapper} data-tooltip-key={randomTooltipKey}>\n      {shouldRender && (\n        <Portal>\n          <div\n            className={buildClassName(styles.container, transitionClassNames)}\n            onClick={stopEvent}\n            style={tooltipStyle.current}\n          >\n            <div\n              ref={tooltipRef}\n              className={buildClassName(styles.tooltip, tooltipClassName)}\n            >\n              {message}\n            </div>\n            <div className={styles.arrow} style={arrowStyle.current} />\n          </div>\n        </Portal>\n      )}\n      {renderIcon()}\n    </div>\n  );\n};\n\nexport default memo(IconWithTooltip);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { DieselStatus } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { explainSwapFee } from '../../util/fee/swapFee';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport Modal from '../ui/Modal';\nimport RichNumberInput from '../ui/RichNumberInput';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  showFullNetworkFee?: boolean;\n  onClose: () => void;\n  onNetworkFeeClick?: () => void;\n}\n\ninterface StateProps {\n  amountIn?: string;\n  amountOut?: string;\n  tokenIn?: ApiSwapAsset;\n  tokenOut?: ApiSwapAsset;\n  networkFee?: string;\n  realNetworkFee?: string;\n  swapType: SwapType;\n  slippage: number;\n  priceImpact?: number;\n  amountOutMin?: string;\n  ourFee?: string;\n  ourFeePercent?: number;\n  dieselStatus?: DieselStatus;\n  dieselFee?: string;\n  nativeTokenInBalance?: bigint;\n}\n\nconst SLIPPAGE_VALUES = [0.5, 1, 2, 5, 10];\nconst MAX_SLIPPAGE_VALUE = 50;\n\nexport const MAX_PRICE_IMPACT_VALUE = 5;\n\nfunction SwapSettingsContent({\n  onClose,\n  amountIn,\n  amountOut,\n  swapType,\n  tokenIn,\n  tokenOut,\n  slippage,\n  priceImpact,\n  networkFee,\n  realNetworkFee,\n  amountOutMin,\n  ourFee,\n  ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  dieselStatus,\n  dieselFee,\n  nativeTokenInBalance,\n  showFullNetworkFee,\n  onNetworkFeeClick,\n}: Omit<OwnProps, 'isOpen'> & StateProps) {\n  const { setSlippage } = getActions();\n  const lang = useLang();\n  const canEditSlippage = swapType === SwapType.OnChain;\n\n  const [isSlippageFocused, markSlippageFocused, unmarkSlippageFocused] = useFlag();\n\n  // In order to reset this state when the modal is closed, we rely on the fact that Modal unmounts the content when\n  // it's closed.\n  const [currentSlippage, setCurrentSlippage] = useState<number | undefined>(slippage);\n\n  const priceImpactError = (priceImpact ?? 0) >= MAX_PRICE_IMPACT_VALUE;\n  const slippageError = currentSlippage === undefined\n    ? 'Slippage not specified'\n    : currentSlippage > MAX_SLIPPAGE_VALUE\n      ? 'Slippage too high'\n      : '';\n\n  const handleSave = useLastCallback(() => {\n    setSlippage({ slippage: currentSlippage! });\n    onClose();\n  });\n\n  const handleInputChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? Number(stringValue) : undefined;\n    setCurrentSlippage(value);\n  });\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug: tokenIn?.slug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenIn, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  function renderSlippageValues() {\n    const slippageList = SLIPPAGE_VALUES.map((value, index) => {\n      return (\n        <div key={value} className={styles.advancedSlippageButton}>\n          <div\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => setCurrentSlippage(value)}\n            className={styles.balanceLink}\n          >{value}%\n          </div>\n          {index + 1 !== SLIPPAGE_VALUES.length && <i className={styles.dot} aria-hidden />}\n        </div>\n      );\n    });\n\n    return (\n      <div className={styles.advancedSlippageContainer}>\n        <span className={styles.advancedSlippage}>{slippageList}</span>\n      </div>\n    );\n  }\n\n  function renderSlippageError() {\n    return (\n      <div className={styles.advancedSlippageError}>\n        <span>{lang(slippageError)}</span>\n      </div>\n    );\n  }\n\n  function renderRate() {\n    const rate = getSwapRate(\n      amountIn,\n      amountOut,\n      tokenIn,\n      tokenOut,\n      true,\n    );\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Exchange Rate')}\n        </span>\n        <span className={styles.advancedValue}>\n          {rate\n            ? `${rate.firstCurrencySymbol}  ${rate.price} ${rate.secondCurrencySymbol}`\n            : <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderNetworkFee() {\n    const actualFee = showFullNetworkFee ? explainedFee.fullFee : explainedFee.realFee;\n    let feeElement = actualFee && tokenIn && (\n      <Fee\n        terms={actualFee.networkTerms}\n        precision={actualFee.precision}\n        token={tokenIn}\n      />\n    );\n\n    if (feeElement && onNetworkFeeClick) {\n      feeElement = (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.advancedLink}\n          onClick={() => onNetworkFeeClick()}\n        >\n          <span>{feeElement}</span>\n          <i className={buildClassName('icon-chevron-right', styles.advancedLinkIcon)} aria-hidden />\n        </span>\n      );\n    }\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Blockchain Fee')}\n        </span>\n        <span className={styles.advancedValue}>\n          {feeElement || <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderSlippageLabel() {\n    return (\n      <>\n        {lang('Slippage')}\n        <IconWithTooltip\n          message={(\n            <div className={styles.advancedTooltipMessage}>\n              <span>{lang('$swap_slippage_tooltip1')}</span>\n              <span>{lang('$swap_slippage_tooltip2')}</span>\n            </div>\n          )}\n          tooltipClassName={styles.advancedTooltipContainer}\n          iconClassName={buildClassName(\n            styles.advancedTooltip, slippageError && styles.advancedError,\n          )}\n        />\n      </>\n    );\n  }\n\n  return (\n    <>\n      {canEditSlippage && (\n        <div className={styles.advancedInput}>\n          {renderSlippageValues()}\n          <RichNumberInput\n            labelText={renderSlippageLabel()}\n            labelClassName={styles.slippageLabel}\n            value={currentSlippage?.toString()}\n            hasError={Boolean(slippageError)}\n            decimals={2}\n            suffix={isSlippageFocused ? '' : '%'}\n            size=\"normal\"\n            onChange={handleInputChange}\n            onFocus={markSlippageFocused}\n            onBlur={unmarkSlippageFocused}\n          />\n          {renderSlippageError()}\n        </div>\n      )}\n      <div className={styles.advancedBlock}>\n        {renderRate()}\n        {renderNetworkFee()}\n\n        {explainedFee.shouldShowOurFee && (\n          <div className={styles.advancedRow}>\n            <span className={styles.advancedDescription}>\n              {lang('Aggregator Fee')}\n              <IconWithTooltip\n                message={(\n                  <div className={styles.advancedTooltipMessage}>\n                    <span>{renderText(lang('$swap_aggregator_fee_tooltip', { percent: `${ourFeePercent}%` }))}</span>\n                  </div>\n                )}\n                tooltipClassName={styles.advancedTooltipContainer}\n                iconClassName={styles.advancedTooltip}\n              />\n            </span>\n            <span className={styles.advancedValue}>\n              {ourFee !== undefined\n                ? formatCurrency(ourFee, tokenIn?.symbol ?? '', undefined, true)\n                : <ValuePlaceholder />}\n            </span>\n          </div>\n        )}\n        {swapType === SwapType.OnChain && (\n          <>\n            <div className={styles.advancedRow}>\n              <span className={buildClassName(styles.advancedDescription, priceImpactError && styles.advancedError)}>\n                {lang('Price Impact')}\n                <IconWithTooltip\n                  message={(\n                    <div className={styles.advancedTooltipMessage}>\n                      <span>{lang('$swap_price_impact_tooltip1')}</span>\n                      <span>{lang('$swap_price_impact_tooltip2')}</span>\n                    </div>\n                  )}\n                  tooltipClassName={styles.advancedTooltipContainer}\n                  iconClassName={buildClassName(\n                    styles.advancedTooltip, priceImpactError && styles.advancedError,\n                  )}\n                />\n              </span>\n              <span className={buildClassName(styles.advancedValue, priceImpactError && styles.advancedError)}>\n                {priceImpact !== undefined ? `${priceImpact}%` : <ValuePlaceholder />}\n              </span>\n            </div>\n            <div className={styles.advancedRow}>\n              <span className={styles.advancedDescription}>\n                {lang('Minimum Received')}\n                <IconWithTooltip\n                  message={(\n                    <div className={styles.advancedTooltipMessage}>\n                      <span>{lang('$swap_minimum_received_tooltip1')}</span>\n                      <span>{lang('$swap_minimum_received_tooltip2')}</span>\n                    </div>\n                  )}\n                  tooltipClassName={styles.advancedTooltipContainer}\n                  iconClassName={styles.advancedTooltip}\n                />\n              </span>\n              <span className={styles.advancedValue}>\n                {amountOutMin !== undefined && tokenOut\n                  ? formatCurrency(amountOutMin, tokenOut.symbol)\n                  : <ValuePlaceholder />}\n              </span>\n            </div>\n          </>\n        )}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button\n          className={modalStyles.button}\n          onClick={onClose}\n        >\n          {lang('Close')}\n        </Button>\n        {canEditSlippage && (\n          <Button\n            isPrimary\n            isDisabled={Boolean(slippageError)}\n            className={modalStyles.button}\n            onClick={handleSave}\n          >\n            {lang('Save')}\n          </Button>\n        )}\n      </div>\n    </>\n  );\n}\n\nconst SwapSettings = memo(\n  withGlobal<Omit<OwnProps, 'isOpen'>>((global): StateProps => {\n    const {\n      tokenInSlug,\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n    } = global.currentSwap;\n\n    const nativeToken = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n    const nativeTokenInBalance = nativeToken ? selectCurrentAccountTokenBalance(global, nativeToken.slug) : undefined;\n\n    return {\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      swapType: selectSwapType(global),\n      tokenIn: selectCurrentSwapTokenIn(global),\n      tokenOut: selectCurrentSwapTokenOut(global),\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    };\n  })(SwapSettingsContent),\n);\n\nexport default function SwapSettingsModal({ isOpen, onClose, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} isCompact title={lang('Swap Details')}>\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      <SwapSettings onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nfunction ValuePlaceholder() {\n  const lang = useLang();\n  return <span className={styles.advancedPlaceholder}>{lang('No Data')}</span>;\n}\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { ApiChain, ApiToken } from '../../api/types';\nimport type {\n  Account, ActionPayloads, AssetPairs, GlobalState, UserSwapToken,\n} from '../../global/types';\nimport type { LangFn } from '../../hooks/useLang';\nimport type { ExplainedSwapFee } from '../../util/fee/swapFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport { SwapInputSource, SwapState, SwapType } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_SIZE_PX,\n  ANIMATION_LEVEL_MAX,\n  CHANGELLY_AML_KYC,\n  CHANGELLY_PRIVACY_POLICY,\n  CHANGELLY_TERMS_OF_USE,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { explainSwapFee, getMaxSwapAmount, isBalanceSufficientForSwap } from '../../util/fee/swapFee';\nimport { vibrate } from '../../util/haptics';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport SelectTokenButton from '../common/SelectTokenButton';\nimport AmountFieldMaxButton from '../ui/AmountFieldMaxButton';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport FeeLine from '../ui/FeeLine';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport SwapSubmitButton from './components/SwapSubmitButton';\nimport SwapDexChooser from './SwapDexChooser';\nimport SwapSettingsModal, { MAX_PRICE_IMPACT_VALUE } from './SwapSettingsModal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  currentSwap: GlobalState['currentSwap'];\n  accountId?: string;\n  tokens?: UserSwapToken[];\n  isMultichainAccount?: boolean;\n  swapType: SwapType;\n  isSensitiveDataHidden?: true;\n}\n\nconst ESTIMATE_REQUEST_INTERVAL = 1_000;\nconst SET_AMOUNT_DEBOUNCE_TIME = 500;\n\nfunction SwapInitial({\n  currentSwap: {\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn,\n    amountOut,\n    errorType,\n    isEstimating,\n    networkFee,\n    realNetworkFee,\n    priceImpact = 0,\n    inputSource,\n    limits,\n    isLoading,\n    pairs,\n    dieselStatus,\n    ourFee,\n    ourFeePercent,\n    dieselFee,\n  },\n  accountId,\n  addressByChain,\n  tokens,\n  isActive,\n  isStatic,\n  isMultichainAccount,\n  swapType,\n  isSensitiveDataHidden,\n}: OwnProps & StateProps) {\n  const {\n    setDefaultSwapParams,\n    setSwapAmountIn,\n    setSwapAmountOut,\n    switchSwapTokens,\n    estimateSwap,\n    setSwapScreen,\n    loadSwapPairs,\n    setSwapCexAddress,\n    authorizeDiesel,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const inputInRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const inputOutRef = useRef<HTMLDivElement>(null);\n\n  const currentTokenInSlug = tokenInSlug ?? TONCOIN.slug;\n  const currentTokenOutSlug = tokenOutSlug ?? DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n  const accountIdPrev = usePrevious(accountId, true);\n\n  const tokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenInSlug),\n    [currentTokenInSlug, tokens],\n  );\n  const tokenOut = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenOutSlug),\n    [currentTokenOutSlug, tokens],\n  );\n\n  const nativeTokenInSlug = isMultichainAccount || tokenIn?.chain === 'ton'\n    ? findChainConfig(tokenIn?.chain)?.nativeToken.slug\n    : undefined;\n  const nativeUserTokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === nativeTokenInSlug),\n    [nativeTokenInSlug, tokens],\n  );\n  const nativeTokenInBalance = nativeUserTokenIn?.amount ?? 0n;\n\n  const amountInBigint = amountIn && tokenIn ? fromDecimal(amountIn, tokenIn.decimals) : undefined;\n  const amountOutBigint = amountOut && tokenOut ? fromDecimal(amountOut, tokenOut.decimals) : undefined;\n  const balanceIn = tokenIn?.amount ?? 0n;\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenInSlug, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  const maxAmount = getMaxSwapAmount({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n  });\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForSwap({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n    amountIn,\n    nativeTokenInBalance,\n  });\n\n  const networkFeeBigint = networkFee !== undefined && nativeUserTokenIn\n    ? fromDecimal(networkFee, nativeUserTokenIn.decimals)\n    : 0n;\n  const isEnoughNative = nativeTokenInBalance >= networkFeeBigint;\n\n  const isDieselNotAuthorized = explainedFee.isGasless && dieselStatus === 'not-authorized';\n\n  const canSubmit = isDieselNotAuthorized || (\n    (amountInBigint ?? 0n) > 0n\n    && (amountOutBigint ?? 0n) > 0n\n    && isEnoughBalance\n    && (!explainedFee.isGasless || dieselStatus === 'available' || dieselStatus === 'stars-fee')\n    && !isEstimating\n    && errorType === undefined\n  );\n\n  const hasAmountInError = amountInBigint !== undefined && maxAmount !== undefined && amountInBigint > maxAmount;\n  const amountOutValue = (amountInBigint ?? 0n) <= 0n && inputSource === SwapInputSource.In\n    ? ''\n    : amountOut?.toString();\n  const isAmountGreaterThanBalance = balanceIn !== undefined && amountInBigint !== undefined\n    && amountInBigint > balanceIn;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && dieselStatus !== 'not-authorized' && dieselStatus !== 'pending-previous';\n\n  const isPriceImpactError = priceImpact >= MAX_PRICE_IMPACT_VALUE;\n  const isCrosschain = swapType === SwapType.CrosschainFromWallet || swapType === SwapType.CrosschainToWallet;\n\n  const [isBuyAmountInputDisabled, handleBuyAmountInputClick] = useReverseProhibited(\n    isCrosschain,\n    pairs?.bySlug,\n    currentTokenInSlug,\n    currentTokenOutSlug,\n    showNotification,\n    lang,\n  );\n\n  const handleEstimateSwap = useLastCallback(() => {\n    if ((!isActive || isBackgroundModeActive()) && !isEstimating) return;\n\n    estimateSwap();\n  });\n\n  const debounceSetAmountIn = useDebouncedCallback(\n    setSwapAmountIn, [setSwapAmountIn], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n  const debounceSetAmountOut = useDebouncedCallback(\n    setSwapAmountOut, [setSwapAmountOut], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n\n  const [currentSubModal, openSettingsModal, openFeeModal, closeSubModal] = useSubModals(explainedFee);\n\n  useEffect(() => {\n    if (!tokenInSlug && !tokenOutSlug) {\n      setDefaultSwapParams();\n    }\n  }, [tokenInSlug, tokenOutSlug]);\n\n  useEffect(() => {\n    if (isEstimating) {\n      handleEstimateSwap();\n    }\n\n    const intervalId = setInterval(handleEstimateSwap, ESTIMATE_REQUEST_INTERVAL);\n    return () => clearInterval(intervalId);\n  }, [isEstimating]);\n\n  useEffect(() => {\n    const shouldForceUpdate = accountId !== accountIdPrev;\n\n    if (currentTokenInSlug) {\n      loadSwapPairs({ tokenSlug: currentTokenInSlug, shouldForceUpdate });\n    }\n    if (currentTokenOutSlug) {\n      loadSwapPairs({ tokenSlug: currentTokenOutSlug, shouldForceUpdate });\n    }\n  }, [accountId, accountIdPrev, currentTokenInSlug, currentTokenOutSlug]);\n\n  const handleAmountInChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountIn({ amount: amount || undefined });\n    },\n  );\n\n  const handleSelectTokenInModalOpen = useLastCallback(() => {\n    setSwapScreen({ state: SwapState.SelectTokenFrom });\n  });\n\n  const handleSelectTokenOutModalOpen = useLastCallback(() => {\n    setSwapScreen({ state: SwapState.SelectTokenTo });\n  });\n\n  const handleAmountOutChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountOut({ amount: amount || undefined });\n    },\n  );\n\n  const handleMaxAmountClick = useLastCallback(() => {\n    if (maxAmount === undefined) {\n      return;\n    }\n\n    void vibrate();\n\n    const amount = toDecimal(maxAmount, tokenIn!.decimals);\n    setSwapAmountIn({ amount, isMaxAmount: true });\n  });\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    void vibrate();\n\n    if (isCrosschain) {\n      setSwapCexAddress({ toAddress: '' });\n      if (swapType === SwapType.CrosschainToWallet) {\n        setSwapScreen({ state: SwapState.Password });\n      } else if (\n        isMultichainAccount\n        && addressByChain![tokenIn!.chain as ApiChain]\n        && addressByChain![tokenOut!.chain as ApiChain]\n      ) {\n        setSwapCexAddress({ toAddress: addressByChain![tokenOut!.chain as ApiChain] });\n        setSwapScreen({ state: SwapState.Password });\n      } else {\n        setSwapScreen({ state: SwapState.Blockchain });\n      }\n      return;\n    }\n\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleSwitchTokens = useLastCallback(() => {\n    void vibrate();\n    switchSwapTokens();\n  });\n\n  function renderBalance() {\n    return (\n      <AmountFieldMaxButton\n        maxAmount={maxAmount}\n        token={tokenIn}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onAmountClick={handleMaxAmountClick}\n      />\n    );\n  }\n\n  function renderFee() {\n    const shouldShow = (amountIn && amountOut) // We aim to synchronize the disappearing of the fee with the DEX chooser disappearing\n      || ((amountIn || amountOut) && errorType); // Without this sub-condition the fee wouldn't be shown when the amount is outside the Changelly limits\n\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (shouldShow) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : undefined;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={tokenIn}\n        precision={precision}\n        keepDetailsButtonWithoutFee\n        onDetailsClick={openSettingsModal}\n        className={styles.feeLine}\n      />\n    );\n  }\n\n  function renderPriceImpactWarning() {\n    if (!priceImpact || !isPriceImpactError || isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.priceImpact, isStatic && styles.priceImpactStatic)}\n        onClick={openSettingsModal}\n      >\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.run}\n          previewUrl={ANIMATED_STICKERS_PATHS.runPreview}\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.priceImpactSticker}\n        />\n        <div className={styles.priceImpactContent}>\n          <span className={styles.priceImpactTitle}>\n            {lang('The exchange rate is below market value!', { value: `${priceImpact}%` })}\n            <i className={buildClassName(styles.priceImpactArrow, 'icon-chevron-right')} aria-hidden />\n          </span>\n          <span className={styles.priceImpactDescription}>\n            {lang('We do not recommend to perform an exchange, try to specify a lower amount.')}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (!isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div className={buildClassName(styles.changellyInfo, isStatic && styles.changellyInfoStatic)}>\n        <span className={styles.changellyInfoTitle}>\n          <i className={buildClassName('icon-changelly', styles.changellyIcon)} aria-hidden />\n          {lang('Cross-chain exchange provided by Changelly')}\n        </span>\n        <span className={styles.changellyInfoDescription}>\n          {\n            lang('$swap_changelly_agreement_message', {\n              terms: (\n                <a href={CHANGELLY_TERMS_OF_USE} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_terms_of_use')}\n                </a>\n              ),\n              policy: (\n                <a href={CHANGELLY_PRIVACY_POLICY} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_privacy_policy')}\n                </a>\n              ),\n              kyc: <a href={CHANGELLY_AML_KYC} target=\"_blank\" rel=\"noreferrer\">Changelly AML/KYC</a>,\n            })\n          }\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form className={isStatic ? undefined : modalStyles.transitionContent} onSubmit={handleSubmit}>\n        <div className={styles.content}>\n          <div ref={inputInRef} className={styles.inputContainer}>\n            {renderBalance()}\n            <RichNumberInput\n              id=\"swap-sell\"\n              labelText={lang('You sell')}\n              className={styles.amountInput}\n              hasError={hasAmountInError}\n              value={amountIn?.toString()}\n              isLoading={isEstimating && inputSource === SwapInputSource.Out}\n              onChange={handleAmountInChange}\n              onPressEnter={handleSubmit}\n              decimals={tokenIn?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerTop, isStatic && styles.swapCornerStaticTop)}\n              isStatic={isStatic}\n            >\n              <SelectTokenButton token={tokenIn as ApiToken} onClick={handleSelectTokenInModalOpen} />\n            </RichNumberInput>\n          </div>\n\n          <div className={buildClassName(styles.swapButtonWrapper, isStatic && styles.swapButtonWrapperStatic)}>\n            <AnimatedArrows onClick={handleSwitchTokens} />\n          </div>\n\n          <div ref={inputOutRef} className={styles.inputContainer}>\n            <RichNumberInput\n              id=\"swap-buy\"\n              labelText={lang('You buy')}\n              className={styles.amountInputBuy}\n              value={amountOutValue}\n              isLoading={isEstimating && inputSource === SwapInputSource.In}\n              disabled={isBuyAmountInputDisabled}\n              onChange={handleAmountOutChange}\n              onPressEnter={handleSubmit}\n              onInputClick={handleBuyAmountInputClick}\n              decimals={tokenOut?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerBottom, isStatic && styles.swapCornerStaticBottom)}\n              isStatic={isStatic}\n            >\n              <SelectTokenButton token={tokenOut as ApiToken} onClick={handleSelectTokenOutModalOpen} />\n            </RichNumberInput>\n          </div>\n        </div>\n        <SwapDexChooser tokenIn={tokenIn} tokenOut={tokenOut} isStatic={isStatic} />\n\n        <div className={buildClassName(styles.footerBlock, isStatic && styles.footerBlockStatic)}>\n          {renderFee()}\n          {renderPriceImpactWarning()}\n          {renderChangellyInfo()}\n\n          <SwapSubmitButton\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            amountIn={amountIn}\n            amountOut={amountOut}\n            swapType={swapType}\n            isEstimating={isEstimating}\n            isNotEnoughNative={!isEnoughNative}\n            nativeToken={nativeUserTokenIn}\n            dieselStatus={dieselStatus}\n            isSending={isLoading}\n            isPriceImpactError={isPriceImpactError}\n            canSubmit={canSubmit}\n            errorType={errorType}\n            limits={limits}\n          />\n        </div>\n      </form>\n      <SwapSettingsModal\n        isOpen={currentSubModal === 'settings'}\n        onClose={closeSubModal}\n        onNetworkFeeClick={openFeeModal}\n        showFullNetworkFee={hasInsufficientFeeError}\n      />\n      <FeeDetailsModal\n        isOpen={currentSubModal === 'feeDetails'}\n        onClose={closeSubModal}\n        fullFee={explainedFee.fullFee?.networkTerms}\n        realFee={explainedFee.realFee?.networkTerms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={tokenIn}\n      />\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const account = selectCurrentAccount(global);\n\n      return {\n        accountId: global.currentAccountId,\n        currentSwap: global.currentSwap,\n        tokens: selectSwapTokens(global),\n        addressByChain: account?.addressByChain,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        swapType: selectSwapType(global),\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(SwapInitial),\n);\n\nfunction useReverseProhibited(\n  isCrosschain: boolean,\n  pairsBySlug: Record<string, AssetPairs> | undefined,\n  currentTokenInSlug: string,\n  currentTokenOutSlug: string,\n  showNotification: (arg: ActionPayloads['showNotification']) => void,\n  lang: LangFn,\n) {\n  const isReverseProhibited = isCrosschain\n    || pairsBySlug?.[currentTokenInSlug]?.[currentTokenOutSlug]?.isReverseProhibited;\n  const isBuyAmountInputDisabled = isReverseProhibited;\n\n  const handleBuyAmountInputClick = useMemo(() => {\n    return isReverseProhibited\n      ? () => {\n        void vibrate();\n        showNotification({ message: lang('$swap_reverse_prohibited') });\n      }\n      : undefined;\n  }, [isReverseProhibited, lang, showNotification]);\n\n  return [isBuyAmountInputDisabled, handleBuyAmountInputClick] as const;\n}\n\nfunction AnimatedArrows({ onClick }: { onClick?: NoneToVoidFunction }) {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const shouldAnimate = (animationLevel === ANIMATION_LEVEL_MAX);\n  const [hasAnimation, startAnimation, stopAnimation] = useFlag(false);\n\n  const handleClick = useLastCallback(() => {\n    if (shouldAnimate) {\n      startAnimation();\n      window.setTimeout(() => {\n        stopAnimation();\n      }, 350);\n    }\n\n    onClick?.();\n  });\n\n  function renderArrow(isInverted?: boolean) {\n    return (\n      <div className={buildClassName(styles.arrowContainer, isInverted && styles.arrowContainerInverted)}>\n        <div className={styles.arrow}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowOld, hasAnimation && styles.animateDisappear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowNew, hasAnimation && styles.animateAppear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.swapButton} onClick={handleClick}>\n      {renderArrow()}\n      {renderArrow(true)}\n    </div>\n  );\n}\n\nfunction useSubModals(explainedFee: ExplainedSwapFee) {\n  const isFeeModalAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [currentModal, setCurrentModal] = useState<'settings' | 'feeDetails'>();\n\n  const openSettings = useLastCallback(() => setCurrentModal('settings'));\n  const openFeeDetailsIfAvailable = useMemo(\n    () => (isFeeModalAvailable ? () => setCurrentModal('feeDetails') : undefined),\n    [isFeeModalAvailable],\n  );\n  const close = useLastCallback(() => setCurrentModal(undefined));\n\n  return [currentModal, openSettings, openFeeDetailsIfAvailable, close] as const;\n}\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport { IS_CAPACITOR } from '../config';\nimport { getIsMobileTelegramApp } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nlet isQrScannerSupported = getIsMobileTelegramApp();\n\nexport default function useQrScannerSupport() {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    if (!IS_CAPACITOR || isQrScannerSupported) return;\n\n    void BarcodeScanner\n      .isSupported()\n      .then((result) => {\n        isQrScannerSupported = result.supported;\n        forceUpdate();\n      });\n  });\n\n  return isQrScannerSupported;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OW45fd9i\",\"static\":\"h6wiRr_r\",\"nft\":\"HmnTdlh8\",\"image\":\"H3EA9Tak\",\"name\":\"_gZbYTeY\",\"expander\":\"T7bQHi3K\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { NftTransfer } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './NftChips.module.scss';\n\ninterface OwnProps {\n  nfts: NftTransfer[];\n  isStatic?: boolean;\n}\n\nconst LIMIT = 10;\n\nfunction NftChips({ nfts, isStatic }: OwnProps) {\n  const lang = useLang();\n  const [isCollapsed, , expand] = useFlag(true);\n  const shouldRenderExpander = isCollapsed && nfts.length > LIMIT + 1;\n  const renderedNfts = useMemo(\n    () => (shouldRenderExpander ? nfts.slice(0, LIMIT) : nfts),\n    [shouldRenderExpander, nfts],\n  );\n\n  function renderNft(nft: NftTransfer) {\n    return (\n      <div key={nft.address} className={styles.nft}>\n        <img src={nft.thumbnail} alt={nft.name} className={styles.image} />\n        <span className={styles.name}>{nft.name || nft.address}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, isStatic && styles.static, 'custom-scroll')}>\n      {renderedNfts.map(renderNft)}\n      {shouldRenderExpander && (\n        <button type=\"button\" className={styles.expander} onClick={() => expand()}>\n          +{lang('%amount% NFTs', { amount: nfts.length - LIMIT })}\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(NftChips);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"NvbEOoOC\",\"inputButton\":\"AryS2PDZ\",\"inputButtonClear\":\"P0VxxOpY\",\"inputButtonTransition\":\"lRz9la7D\",\"inputButtonShifted\":\"KYWbK7EG\",\"amountInput\":\"lJJMNmjc\",\"help\":\"LugNLsCQ\",\"label\":\"erx70q4_\",\"amountBottomWrapper\":\"pzJTzb6I\",\"amountBottom\":\"NwaO39Nr\",\"amountBottomRight\":\"Zkzr1Luh\",\"amountBottomRight_slide\":\"M4tMPnH0\",\"amountBottomRightSlide\":\"M4tMPnH0\",\"Transition\":\"xqhpp_RM\",\"transition\":\"xqhpp_RM\",\"Transition_slide-from\":\"VsOZiVJz\",\"transitionSlideFrom\":\"VsOZiVJz\",\"Transition_slide-to\":\"OKWgH5Dr\",\"transitionSlideTo\":\"OKWgH5Dr\",\"amountBottomRight_static\":\"EY9Piz6P\",\"amountBottomRightStatic\":\"EY9Piz6P\",\"balanceError\":\"Jag9KEHr\",\"amountInCurrency\":\"GgT8dw74\",\"description\":\"s8vGyddw\",\"addressWidget\":\"fVQ8S1pD\",\"inputReadOnly\":\"Pne6FnQc\",\"inputReadOnly_words\":\"NH87E1kW\",\"inputReadOnlyWords\":\"NH87E1kW\",\"currencySymbol\":\"aNzt5kkC\",\"commentInputWrapper\":\"eBKrZtom\",\"sticker\":\"ZDG5rllO\",\"sticker_sizeSmall\":\"ol7Kgi48\",\"stickerSizeSmall\":\"ol7Kgi48\",\"buttonLoading\":\"PYuzODzS\",\"buttonText\":\"Cso7xEQu\",\"button-loading-spinner\":\"Kx52LskK\",\"buttonLoadingSpinner\":\"Kx52LskK\",\"savedAddressBubble\":\"keyC_8Hs\",\"savedAddressItem\":\"WI13wV5I\",\"savedAddressName\":\"ZEsl45OR\",\"savedAddressNameText\":\"HLnOPUyB\",\"iconLedger\":\"bdYXzf2H\",\"savedAddressAddress\":\"sDGTQ4jr\",\"savedAddressDelete\":\"ozjjQpYQ\",\"savedAddressDeleteInner\":\"UWDrZutz\",\"savedAddressDeleteIcon\":\"rO6SGoH9\",\"chainIcon\":\"g2vfXFiv\",\"tokenDropdown\":\"NHWRtRzL\",\"tokenDropdownItem\":\"Qkrt8RTy\",\"inputStatic\":\"RJsBtjCe\",\"inputRichStatic\":\"BrNIQCUa\",\"inputWithIcon\":\"uMO1BRcS\",\"commentLabel\":\"SXy2g5zj\",\"footer\":\"yVExFE73\",\"footer_shifted\":\"NGWUkuR3\",\"footerShifted\":\"NGWUkuR3\",\"buttons\":\"oMCN3Z8P\",\"button\":\"U6ZAbMe2\",\"warningTooltipContainer\":\"lcmy9IMt\",\"transactionBanner\":\"Pxmu6Hot\",\"infoBox\":\"vKJsXVsk\",\"burnWarning\":\"CWZdgy5e\",\"error\":\"pUMdj3j5\",\"spinner\":\"gigiDFmZ\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { ApiBaseCurrency, ApiChain, ApiNft } from '../../api/types';\nimport type { Account, SavedAddress, UserToken } from '../../global/types';\nimport type { ExplainedTransferFee } from '../../util/fee/transferFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport type { DropdownItem } from '../ui/Dropdown';\nimport { TransferState } from '../../global/types';\n\nimport { PRICELESS_TOKEN_HASHES, STAKED_TOKEN_SLUGS, TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { SECOND } from '../../util/dateFormat';\nimport { fromDecimal, toBig, toDecimal } from '../../util/decimals';\nimport { isDnsDomain } from '../../util/dns';\nimport { stopEvent } from '../../util/domEvents';\nimport {\n  explainApiTransferFee, getMaxTransferAmount, isBalanceSufficientForTransfer,\n} from '../../util/fee/transferFee';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { vibrate } from '../../util/haptics';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { debounce } from '../../util/schedulers';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { IS_ANDROID, IS_CLIPBOARDS_SUPPORTED, IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport AmountFieldMaxButton from '../ui/AmountFieldMaxButton';\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport FeeLine from '../ui/FeeLine';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport Menu from '../ui/Menu';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  toAddress?: string;\n  amount?: bigint;\n  comment?: string;\n  shouldEncrypt?: boolean;\n  isLoading?: boolean;\n  fee?: bigint;\n  realFee?: bigint;\n  tokenSlug: string;\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  currentAccountId?: string;\n  accounts?: Record<string, Account>;\n  isEncryptedCommentSupported: boolean;\n  isMemoRequired?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  nfts?: ApiNft[];\n  binPayload?: string;\n  stateInit?: string;\n  diesel?: ApiFetchEstimateDieselResult;\n  isDieselAuthorizationStarted?: boolean;\n  isMultichainAccount: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst SAVED_ADDRESS_OPEN_DELAY = 300;\nconst COMMENT_MAX_SIZE_BYTES = 5000;\nconst SHORT_ADDRESS_SHIFT = 11;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_ADDRESS_SHIFT * 2;\nconst COMMENT_DROPDOWN_ITEMS = [\n  { value: 'raw', name: 'Comment or Memo' },\n  { value: 'encrypted', name: 'Encrypted Message' },\n];\nconst ACTIVE_STATES = new Set([TransferState.Initial, TransferState.None]);\nconst AUTHORIZE_DIESEL_INTERVAL_MS = SECOND;\n\nconst INPUT_CLEAR_BUTTON_ID = 'input-clear-button';\n\nconst runDebounce = debounce((cb) => cb(), 500, false);\n\nfunction doesSavedAddressFitSearch(savedAddress: SavedAddress, search: string) {\n  const searchQuery = search.toLowerCase();\n  const { address, name } = savedAddress;\n\n  return (\n    address.toLowerCase().startsWith(searchQuery)\n    || address.toLowerCase().endsWith(searchQuery)\n    || name.toLowerCase().split(/\\s+/).some((part) => part.startsWith(searchQuery))\n  );\n}\n\nfunction TransferInitial({\n  isStatic,\n  tokenSlug,\n  toAddress = '',\n  amount,\n  comment = '',\n  shouldEncrypt,\n  tokens,\n  fee,\n  realFee,\n  savedAddresses,\n  accounts,\n  currentAccountId,\n  isEncryptedCommentSupported,\n  isMemoRequired,\n  isLoading,\n  baseCurrency,\n  nfts,\n  binPayload,\n  stateInit,\n  diesel,\n  isDieselAuthorizationStarted,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n}: OwnProps & StateProps) {\n  const {\n    submitTransferInitial,\n    showNotification,\n    fetchTransferFee,\n    fetchNftFee,\n    changeTransferToken,\n    setTransferAmount,\n    setTransferToAddress,\n    setTransferComment,\n    setTransferShouldEncrypt,\n    cancelTransfer,\n    requestOpenQrScanner,\n    showDialog,\n    authorizeDiesel,\n    fetchTransferDieselState,\n  } = getActions();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    // Token and amount can't be selected in the NFT transfer form, so they are overwritten once for convenience\n    tokenSlug = TONCOIN.slug;\n    amount = undefined;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  const toAddressRef = useRef<HTMLInputElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const addressBookTimeoutRef = useRef<number>(null);\n\n  const lang = useLang();\n\n  const transferToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const {\n    amount: balance,\n    decimals,\n    price,\n    symbol,\n    chain,\n    codeHash,\n  } = transferToken || {};\n\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const [isAddressFocused, markAddressFocused, unmarkAddressFocused] = useFlag();\n  const [isAddressBookOpen, openAddressBook, closeAddressBook] = useFlag();\n  const [savedAddressForDeletion, setSavedAddressForDeletion] = useState<string | undefined>();\n  const [savedChainForDeletion, setSavedChainForDeletion] = useState<ApiChain | undefined>();\n  const toAddressShort = toAddress.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n    ? shortenAddress(toAddress, SHORT_ADDRESS_SHIFT) || ''\n    : toAddress;\n  const isAddressValid = chain ? isValidAddressOrDomain(toAddress, chain) : undefined;\n  const otherAccountIds = useMemo(() => {\n    return accounts ? Object.keys(accounts).filter((accountId) => accountId !== currentAccountId) : [];\n  }, [currentAccountId, accounts]);\n  const shouldUseAddressBook = useMemo(() => {\n    return otherAccountIds.length > 0 || (savedAddresses && savedAddresses.length > 0);\n  }, [otherAccountIds.length, savedAddresses]);\n\n  const nativeToken = useMemo(() => {\n    return tokens?.find((token) => !token.tokenAddress && token.chain === chain);\n  }, [tokens, chain])!;\n\n  const isToncoin = tokenSlug === TONCOIN.slug;\n\n  const shouldDisableClearButton = !toAddress && !(comment || binPayload) && !shouldEncrypt\n    && !(isNftTransfer ? isStatic : amount !== undefined);\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const amountInCurrency = price && amount\n    ? toBig(amount, decimals).mul(price).round(decimals, Big.roundHalfUp).toString()\n    : undefined;\n  const renderingAmountInCurrency = useCurrentOrPrev(amountInCurrency, true);\n  const withPasteButton = shouldRenderPasteButton && toAddress === '';\n  const withAddressClearButton = !!toAddress.length;\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const explainedFee = useMemo(\n    () => explainApiTransferFee({\n      fee, realFee, diesel, tokenSlug,\n    }),\n    [fee, realFee, diesel, tokenSlug],\n  );\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForTransfer({\n    tokenBalance: balance,\n    nativeTokenBalance: nativeToken.amount,\n    transferAmount: isNftTransfer ? 0n : amount,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isAmountMissing = !isNftTransfer && !amount;\n\n  const isDisabledDebounce = useRef(false);\n\n  const maxAmount = getMaxTransferAmount({\n    tokenBalance: balance,\n    tokenSlug,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isDieselNotAuthorized = diesel?.status === 'not-authorized';\n  const authorizeDieselInterval = isDieselNotAuthorized && isDieselAuthorizationStarted\n    ? AUTHORIZE_DIESEL_INTERVAL_MS\n    : undefined;\n\n  const { shouldRender: shouldRenderCurrency, transitionClassNames: currencyClassNames } = useShowTransition(\n    Boolean(amountInCurrency),\n  );\n\n  const updateDieselState = useLastCallback(() => {\n    fetchTransferDieselState({ tokenSlug });\n  });\n\n  useInterval(updateDieselState, authorizeDieselInterval);\n\n  const dropDownItems = useMemo(() => {\n    if (!tokens) {\n      return [];\n    }\n\n    return tokens.reduce<DropdownItem[]>((acc, token) => {\n      if ((token.amount > 0 && !token.isDisabled) || token.slug === tokenSlug) {\n        acc.push({\n          value: token.slug,\n          icon: ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || token.image,\n          overlayIcon: isMultichainAccount ? getChainNetworkIcon(token.chain) : undefined,\n          name: token.symbol,\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [isMultichainAccount, tokenSlug, tokens]);\n\n  useEffect(() => {\n    if (\n      isToncoin\n      && balance && amount && fee\n      && amount < balance\n      && fee < balance\n      && amount + fee >= balance\n    ) {\n      setTransferAmount({ amount: balance - fee });\n    }\n  }, [isToncoin, amount, balance, fee]);\n\n  // Note: this effect doesn't watch amount changes mainly because it's tricky to program a fee recalculation avoidance\n  // when the amount changes due to a fee change. And it's not needed because the fee doesn't depend on the amount.\n  useEffect(() => {\n    if (isAmountMissing || !isAddressValid) {\n      return;\n    }\n\n    const runFunction = () => {\n      if (isNftTransfer) {\n        fetchNftFee({\n          toAddress,\n          comment,\n          nfts: nfts ?? [],\n        });\n      } else {\n        fetchTransferFee({\n          tokenSlug,\n          toAddress,\n          comment,\n          shouldEncrypt,\n          binPayload,\n          stateInit,\n        });\n      }\n    };\n\n    if (!isDisabledDebounce.current) {\n      runDebounce(runFunction);\n    } else {\n      isDisabledDebounce.current = false;\n      runFunction();\n    }\n  }, [\n    isAmountMissing, binPayload, comment, shouldEncrypt, isAddressValid, isNftTransfer, nfts, stateInit, toAddress,\n    tokenSlug,\n  ]);\n\n  useEffect(() => {\n    if (STAKED_TOKEN_SLUGS.has(tokenSlug) || PRICELESS_TOKEN_HASHES.has(codeHash ?? '')) {\n      showDialog({\n        title: lang('Warning!'),\n        message: lang('$service_token_transfer_warning'),\n      });\n    }\n  }, [tokenSlug, codeHash, lang]);\n\n  const handleTokenChange = useLastCallback((slug: string) => {\n    changeTransferToken({ tokenSlug: slug });\n  });\n\n  const handleAddressBookClose = useLastCallback(() => {\n    if (!shouldUseAddressBook || !isAddressBookOpen) return;\n\n    closeAddressBook();\n\n    if (addressBookTimeoutRef.current) {\n      window.clearTimeout(addressBookTimeoutRef.current);\n    }\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    const el = toAddressRef.current!;\n\n    // `selectionStart` is only updated in the next frame after `focus` event\n    requestAnimationFrame(() => {\n      const caretPosition = el.selectionStart!;\n      markAddressFocused();\n\n      // Restore caret position after input field value has been focused and expanded\n      requestAnimationFrame(() => {\n        const newCaretPosition = caretPosition <= SHORT_ADDRESS_SHIFT + 3\n          ? caretPosition\n          : Math.max(0, el.value.length - (toAddressShort.length - caretPosition));\n\n        el.setSelectionRange(newCaretPosition, newCaretPosition);\n        if (newCaretPosition > SHORT_ADDRESS_SHIFT * 2) {\n          el.scrollLeft = el.scrollWidth - el.clientWidth;\n        }\n      });\n    });\n\n    if (shouldUseAddressBook) {\n      // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n      if (IS_ANDROID) {\n        addressBookTimeoutRef.current = window.setTimeout(openAddressBook, SAVED_ADDRESS_OPEN_DELAY);\n      } else {\n        openAddressBook();\n      }\n    }\n  });\n\n  const handleAddressBlur = useLastCallback((e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    unmarkAddressFocused();\n\n    if (e.relatedTarget?.id === INPUT_CLEAR_BUTTON_ID) {\n      handleAddressBookClose();\n\n      return;\n    }\n\n    if (isDnsDomain(toAddress) && toAddress !== toAddress.toLowerCase()) {\n      setTransferToAddress({ toAddress: toAddress.toLowerCase().trim() });\n    } else if (toAddress !== toAddress.trim()) {\n      setTransferToAddress({ toAddress: toAddress.trim() });\n    }\n\n    requestAnimationFrame(() => {\n      handleAddressBookClose();\n    });\n  });\n\n  const handleAddressInput = useLastCallback((newToAddress: string) => {\n    setTransferToAddress({ toAddress: newToAddress });\n  });\n\n  const handleAddressClearClick = useLastCallback(() => {\n    setTransferToAddress({ toAddress: undefined });\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    requestOpenQrScanner();\n    cancelTransfer();\n  });\n\n  const handleClear = useLastCallback(() => {\n    if (isStatic) {\n      cancelTransfer({ shouldReset: true });\n    } else {\n      handleAddressClearClick();\n      setTransferAmount({ amount: undefined });\n      setTransferComment({ comment: undefined });\n      setTransferShouldEncrypt({ shouldEncrypt: false });\n    }\n  });\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        isDisabledDebounce.current = true;\n        setTransferToAddress({ toAddress: text.trim() });\n      }\n    } catch (err: any) {\n      showNotification({ message: lang('Error reading clipboard') });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  const handleAddressBookItemClick = useLastCallback(\n    (address: string) => {\n      isDisabledDebounce.current = true;\n      setTransferToAddress({ toAddress: address });\n      closeAddressBook();\n    },\n  );\n\n  const handleDeleteSavedAddressClick = useLastCallback(\n    (address: string) => {\n      setSavedAddressForDeletion(address);\n      setSavedChainForDeletion(chain);\n      closeAddressBook();\n    },\n  );\n\n  const closeDeleteSavedAddressModal = useLastCallback(() => {\n    setSavedAddressForDeletion(undefined);\n    setSavedChainForDeletion(undefined);\n  });\n\n  const handleAmountChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? fromDecimal(stringValue, decimals) : undefined;\n    if (value === undefined || value >= 0) {\n      setTransferAmount({ amount: value });\n    }\n  });\n\n  const handleMaxAmountClick = useLastCallback(() => {\n    if (!balance) {\n      return;\n    }\n\n    void vibrate();\n    isDisabledDebounce.current = true;\n    setTransferAmount({ amount: maxAmount });\n  });\n\n  const handlePaste = useLastCallback(() => {\n    isDisabledDebounce.current = true;\n  });\n\n  const handleCommentChange = useLastCallback((value) => {\n    setTransferComment({ comment: trimStringByMaxBytes(value, COMMENT_MAX_SIZE_BYTES) });\n  });\n\n  const hasToAddressError = toAddress.length > 0 && !isAddressValid;\n  const isAmountGreaterThanBalance = !isNftTransfer && balance !== undefined && amount !== undefined\n    && amount > balance;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && diesel?.status !== 'not-authorized' && diesel?.status !== 'pending-previous';\n  const hasAmountError = !isNftTransfer && amount !== undefined && (\n    (maxAmount !== undefined && amount > maxAmount)\n    || hasInsufficientFeeError // Ideally, the insufficient fee error message should be displayed somewhere else\n  );\n  const isCommentRequired = Boolean(toAddress) && isMemoRequired;\n  const hasCommentError = isCommentRequired && !comment;\n\n  const canSubmit = isDieselNotAuthorized || Boolean(\n    isAddressValid\n    && !isAmountMissing && !hasAmountError\n    && isEnoughBalance\n    && !hasCommentError\n    && (!explainedFee.isGasless || diesel?.status === 'available' || diesel?.status === 'stars-fee')\n    && !(isNftTransfer && !nfts?.length),\n  );\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitTransferInitial({\n      tokenSlug,\n      amount: amount ?? 0n,\n      toAddress,\n      comment,\n      binPayload,\n      shouldEncrypt,\n      nfts,\n      withDiesel: explainedFee.isGasless,\n      isGaslessWithStars: diesel?.status === 'stars-fee',\n      stateInit,\n    });\n  });\n\n  const handleCommentOptionsChange = useLastCallback((option: string) => {\n    setTransferShouldEncrypt({ shouldEncrypt: option === 'encrypted' });\n  });\n\n  const [isFeeModalOpen, openFeeModal, closeFeeModal] = useFeeModal(explainedFee);\n\n  const renderedSavedAddresses = useMemo(() => {\n    if (!savedAddresses || savedAddresses.length === 0) {\n      return undefined;\n    }\n\n    return savedAddresses\n      .filter((item) => {\n        // NFT transfer is only available on the TON blockchain\n        return (!isNftTransfer || item.chain === 'ton') && doesSavedAddressFitSearch(item, toAddress);\n      })\n      .map((item) => renderAddressItem({\n        key: `saved-${item.address}-${item.chain}`,\n        address: item.address,\n        name: item.name,\n        chain: isMultichainAccount ? item.chain : undefined,\n        deleteLabel: lang('Delete'),\n        onClick: handleAddressBookItemClick,\n        onDeleteClick: handleDeleteSavedAddressClick,\n      }));\n  }, [savedAddresses, isNftTransfer, toAddress, isMultichainAccount, lang]);\n\n  const renderedOtherAccounts = useMemo(() => {\n    if (otherAccountIds.length === 0) return undefined;\n\n    const addressesToBeIgnored = savedAddresses?.map((item) => `${item.chain}:${item.address}`) ?? [];\n    const uniqueAddresses = new Set<string>();\n    const otherAccounts = otherAccountIds\n      .reduce((acc, accountId) => {\n        const account = accounts![accountId];\n\n        Object.keys(account.addressByChain).forEach((currentChain) => {\n          const currentAddress = account.addressByChain[currentChain as ApiChain];\n          const key = `${currentChain}:${currentAddress}`;\n          if (\n            !uniqueAddresses.has(key)\n            // NFT transfer is only available on the TON blockchain\n            && (!isNftTransfer || currentChain === 'ton')\n            && (isMultichainAccount || currentChain === TONCOIN.chain)\n            && !addressesToBeIgnored.includes(`${currentChain}:${currentAddress}`)\n          ) {\n            uniqueAddresses.add(key);\n            acc.push({\n              name: account.title || shortenAddress(currentAddress)!,\n              address: currentAddress,\n              chain: currentChain as ApiChain,\n              isHardware: account.isHardware,\n            });\n          }\n        });\n\n        return acc;\n      }, [] as (SavedAddress & { isHardware?: boolean })[]);\n\n    return otherAccounts.filter(\n      (item) => doesSavedAddressFitSearch(item, toAddress),\n    ).map(({\n      address, name, chain: addressChain, isHardware,\n    }) => renderAddressItem({\n      key: `address-${address}-${addressChain}`,\n      address,\n      name,\n      chain: isMultichainAccount ? addressChain : undefined,\n      isHardware,\n      onClick: handleAddressBookItemClick,\n    }));\n  }, [otherAccountIds, savedAddresses, accounts, isMultichainAccount, isNftTransfer, toAddress]);\n\n  const shouldRenderSuggestions = !!renderedSavedAddresses?.length || !!renderedOtherAccounts?.length;\n\n  function renderAddressBook() {\n    if (!shouldRenderSuggestions) return undefined;\n\n    return (\n      <Menu\n        positionX=\"right\"\n        type=\"suggestion\"\n        noBackdrop\n        bubbleClassName={styles.savedAddressBubble}\n        isOpen={isAddressBookOpen}\n        onClose={closeAddressBook}\n      >\n        {renderedSavedAddresses}\n        {renderedOtherAccounts}\n      </Menu>\n    );\n  }\n\n  function renderBottomRight() {\n    let transitionKey = 0;\n    let content: TeactNode = ' ';\n\n    if (amount) {\n      if (isAmountGreaterThanBalance) {\n        transitionKey = 1;\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (hasInsufficientFeeError) {\n        transitionKey = 2;\n        content = <span className={styles.balanceError}>{lang('Insufficient fee')}</span>;\n      }\n    }\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountBottomRight, isStatic && styles.amountBottomRight_static)}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"fade\"\n        activeKey={transitionKey}\n      >\n        {content}\n      </Transition>\n    );\n  }\n\n  function renderInputActions() {\n    return (\n      <Transition className={styles.inputButtonTransition} activeKey={toAddress.length ? 0 : 1} name=\"fade\">\n        {toAddress.length ? (\n          <Button\n            isSimple\n            id={INPUT_CLEAR_BUTTON_ID}\n            className={buildClassName(styles.inputButton, styles.inputButtonClear)}\n            onClick={handleAddressClearClick}\n            ariaLabel={lang('Clear')}\n          >\n            <i className=\"icon-close-filled\" aria-hidden />\n          </Button>\n        ) : (\n          <>\n            {isQrScannerSupported && (\n              <Button\n                isSimple\n                className={buildClassName(styles.inputButton, withPasteButton && styles.inputButtonShifted)}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </>\n        )}\n      </Transition>\n    );\n  }\n\n  function renderBalance() {\n    if (isNftTransfer) return undefined;\n\n    return (\n      <AmountFieldMaxButton\n        maxAmount={maxAmount}\n        token={transferToken}\n        isLoading={maxAmount === undefined}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onAmountClick={handleMaxAmountClick}\n      />\n    );\n  }\n\n  function renderTokens() {\n    return (\n      <Dropdown\n        items={dropDownItems}\n        selectedValue={tokenSlug}\n        className={styles.tokenDropdown}\n        itemClassName={styles.tokenDropdownItem}\n        onChange={handleTokenChange}\n      />\n    );\n  }\n\n  function renderCurrencyValue() {\n    return (\n      <span className={buildClassName(styles.amountInCurrency, currencyClassNames)}>\n        &thinsp;{formatCurrency(renderingAmountInCurrency || '0', shortBaseSymbol, undefined, true)}\n      </span>\n    );\n  }\n\n  function renderCommentLabel() {\n    return (\n      <Dropdown\n        items={isEncryptedCommentSupported ? COMMENT_DROPDOWN_ITEMS : [COMMENT_DROPDOWN_ITEMS[0]]}\n        selectedValue={COMMENT_DROPDOWN_ITEMS[shouldEncrypt ? 1 : 0].value}\n        theme=\"light\"\n        disabled={chain === 'tron'}\n        menuPositionHorizontal=\"left\"\n        shouldTranslateOptions\n        className={styles.commentLabel}\n        onChange={handleCommentOptionsChange}\n      />\n    );\n  }\n\n  function renderCommentField() {\n    if (binPayload || stateInit) {\n      return (\n        <>\n          {binPayload && (\n            <>\n              <div className={styles.label}>{lang('Signing Data')}</div>\n              <InteractiveTextField\n                text={binPayload}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          {stateInit && (\n            <>\n              <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n              <InteractiveTextField\n                text={stateInit}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n        </>\n      );\n    }\n\n    return (\n      <Input\n        wrapperClassName={styles.commentInputWrapper}\n        className={isStatic ? styles.inputStatic : undefined}\n        label={renderCommentLabel()}\n        placeholder={isCommentRequired ? lang('Required') : lang('Optional')}\n        value={comment}\n        isMultiline\n        isDisabled={chain === 'tron'}\n        onInput={handleCommentChange}\n        isRequired={isCommentRequired}\n      />\n    );\n  }\n\n  const withButton = isQrScannerSupported || withPasteButton || withAddressClearButton;\n\n  function renderButtonText() {\n    if (diesel?.status === 'not-authorized') {\n      return lang('Authorize %token% Fee', { token: symbol! });\n    }\n    if (diesel?.status === 'pending-previous') {\n      return lang('Awaiting Previous Fee');\n    }\n    return lang('$send_token_symbol', isNftTransfer ? 'NFT' : symbol || 'TON');\n  }\n\n  const shouldIgnoreErrors = isAddressBookOpen && shouldRenderSuggestions;\n\n  function renderFee() {\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (!isAmountMissing) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : explainedFee.realFee;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={transferToken}\n        precision={precision}\n        onDetailsClick={openFeeModal}\n      />\n    );\n  }\n\n  return (\n    <>\n      <form\n        className={isStatic ? undefined : modalStyles.transitionContent}\n        onSubmit={handleSubmit}\n        onPaste={handlePaste}\n      >\n        {nfts?.length === 1 && <NftInfo nft={nfts[0]} isStatic={isStatic} withMediaViewer />}\n        {Boolean(nfts?.length) && nfts!.length > 1 && <NftChips nfts={nfts!} isStatic={isStatic} />}\n\n        <Input\n          ref={toAddressRef}\n          className={buildClassName(isStatic && styles.inputStatic, withButton && styles.inputWithIcon)}\n          isRequired\n          label={lang('Recipient Address')}\n          placeholder={lang('Wallet address or domain')}\n          value={isAddressFocused ? toAddress : toAddressShort}\n          error={hasToAddressError && !shouldIgnoreErrors ? (lang('Incorrect address') as string) : undefined}\n          autoCorrect={false}\n          onInput={handleAddressInput}\n          onFocus={handleAddressFocus}\n          onBlur={handleAddressBlur}\n        >\n          {renderInputActions()}\n        </Input>\n\n        {shouldUseAddressBook && renderAddressBook()}\n\n        {renderBalance()}\n        {!isNftTransfer && (\n          <>\n            <RichNumberInput\n              key=\"amount\"\n              id=\"amount\"\n              hasError={hasAmountError}\n              value={amount === undefined ? undefined : toDecimal(amount, decimals)}\n              labelText={lang('Amount')}\n              onChange={handleAmountChange}\n              onPressEnter={handleSubmit}\n              decimals={decimals}\n              className={styles.amountInput}\n              inputClassName={isStatic ? styles.inputRichStatic : undefined}\n            >\n              {renderTokens()}\n            </RichNumberInput>\n\n            <div className={styles.amountBottomWrapper}>\n              <div className={styles.amountBottom}>\n                {shouldRenderCurrency && renderCurrencyValue()}\n                {renderBottomRight()}\n              </div>\n            </div>\n          </>\n        )}\n\n        {chain === 'ton' && renderCommentField()}\n\n        <div className={buildClassName(styles.footer, isStatic && chain !== 'ton' && styles.footer_shifted)}>\n          {renderFee()}\n\n          <div className={styles.buttons}>\n            <Button\n              isDisabled={shouldDisableClearButton || isLoading}\n              className={styles.button}\n              onClick={handleClear}\n            >\n              {lang('Clear')}\n            </Button>\n            <Button\n              isPrimary\n              isSubmit\n              isDisabled={!canSubmit}\n              isLoading={isLoading}\n              className={styles.button}\n            >\n              {renderButtonText()}\n            </Button>\n          </div>\n        </div>\n      </form>\n      <DeleteSavedAddressModal\n        isOpen={Boolean(savedAddressForDeletion)}\n        address={savedAddressForDeletion}\n        chain={savedChainForDeletion}\n        onClose={closeDeleteSavedAddressModal}\n      />\n      <FeeDetailsModal\n        isOpen={isFeeModalOpen}\n        onClose={closeFeeModal}\n        fullFee={explainedFee.fullFee?.terms}\n        realFee={explainedFee.realFee?.terms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={transferToken}\n      />\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        toAddress,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        tokenSlug,\n        isLoading,\n        state,\n        nfts,\n        binPayload,\n        isMemoRequired,\n        diesel,\n        stateInit,\n      } = global.currentTransfer;\n\n      const isLedger = selectIsHardwareAccount(global);\n      const accountState = selectCurrentAccountState(global);\n      const baseCurrency = global.settings.baseCurrency;\n\n      return {\n        toAddress,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        nfts,\n        tokenSlug,\n        binPayload,\n        stateInit,\n        tokens: selectCurrentAccountTokens(global),\n        savedAddresses: accountState?.savedAddresses,\n        isEncryptedCommentSupported: !isLedger && !nfts?.length && !isMemoRequired,\n        isMemoRequired,\n        isLoading: isLoading && ACTIVE_STATES.has(state),\n        baseCurrency,\n        currentAccountId: global.currentAccountId,\n        accounts: selectNetworkAccounts(global),\n        diesel,\n        isDieselAuthorizationStarted: accountState?.isDieselAuthorizationStarted,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n      };\n    },\n    (global, { isStatic }, stickToFirst) => {\n      if (!isStatic) {\n        return stickToFirst(global.currentAccountId);\n      }\n\n      const { nfts, tokenSlug = TONCOIN.slug } = global.currentTransfer;\n      const key = nfts?.length ? `${nfts[0].address}_${nfts.length}` : tokenSlug;\n\n      return stickToFirst(`${global.currentAccountId}_${key}`);\n    },\n  )(TransferInitial),\n);\n\nfunction trimStringByMaxBytes(str: string, maxBytes: number) {\n  const decoder = new TextDecoder('utf-8');\n  const encoded = new TextEncoder().encode(str);\n\n  return decoder.decode(encoded.slice(0, maxBytes)).replace(/\\uFFFD/g, '');\n}\n\nfunction renderAddressItem({\n  key,\n  address,\n  name,\n  chain,\n  isHardware,\n  deleteLabel,\n  onClick,\n  onDeleteClick,\n}: {\n  key: string;\n  address: string;\n  name?: string;\n  chain?: ApiChain;\n  isHardware?: boolean;\n  deleteLabel?: string;\n  onClick: (address: string) => void;\n  onDeleteClick?: (address: string) => void;\n}) {\n  const isSavedAddress = !!onDeleteClick;\n  const handleDeleteClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    onDeleteClick!(address);\n  };\n\n  return (\n    <div\n      key={key}\n      tabIndex={-1}\n      role=\"button\"\n      onMouseDown={IS_TOUCH_ENV ? undefined : () => onClick(address)}\n      onClick={IS_TOUCH_ENV ? () => onClick(address) : undefined}\n      className={styles.savedAddressItem}\n    >\n      <span className={styles.savedAddressName}>\n        <span className={styles.savedAddressNameText}>\n          {name || shortenAddress(address)}\n        </span>\n        {isHardware && <i className={buildClassName(styles.iconLedger, 'icon-ledger')} aria-hidden />}\n      </span>\n      {isSavedAddress && (\n        <span className={styles.savedAddressDelete}>\n          <span tabIndex={-1} role=\"button\" className={styles.savedAddressDeleteInner} onMouseDown={handleDeleteClick}>\n            {deleteLabel}\n          </span>\n        </span>\n      )}\n      {name && (\n        <span className={styles.savedAddressAddress}>\n          {chain && <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-hidden />}\n          {shortenAddress(address)}\n        </span>\n      )}\n      {isSavedAddress && (\n        <span\n          className={styles.savedAddressDeleteIcon}\n          role=\"button\"\n          tabIndex={-1}\n          onMouseDown={handleDeleteClick}\n          onClick={stopEvent}\n          aria-label={deleteLabel}\n        >\n          <i className=\"icon-trash\" aria-hidden />\n        </span>\n      )}\n    </div>\n  );\n}\n\nfunction useFeeModal(explainedFee: ExplainedTransferFee) {\n  const isAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [isOpen, open, close] = useFlag(false);\n  const openIfAvailable = isAvailable ? open : undefined;\n  return [isOpen, openIfAvailable, close] as const;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oiB1R7GB\",\"tabs\":\"Sue0UN3j\",\"notAllTabs\":\"QLxHVfeT\",\"tab\":\"qUqbpDN6\",\"active\":\"PSKCyspY\",\"tab_purple\":\"Hw7rCAOU\",\"tabPurple\":\"Hw7rCAOU\",\"tab_purpleText\":\"Y4BNELoX\",\"tabPurpleText\":\"Y4BNELoX\",\"tabDelimiter\":\"CLfyAuI6\",\"tabDecoration\":\"SSnDTAfy\",\"tabIcon\":\"nIk_Y_3d\",\"tabText\":\"IfCQ498V\",\"contentHeader\":\"LzaI7YWC\",\"firstActive\":\"G0Sd_POg\",\"contentHeaderInner\":\"rWtZ588N\",\"lastActive\":\"Y80L38VI\",\"contentBg\":\"ibE61V3n\",\"contentFooter\":\"WvrNEDxt\",\"contentSlideStaked\":\"F0M6K6CS\",\"tab-0\":\"NmGloXOI\",\"tab0\":\"NmGloXOI\",\"tab-1\":\"S7XD0emA\",\"tab1\":\"S7XD0emA\",\"slideContent\":\"bTsglo_e\",\"transitionContent\":\"YJuoqMiV\",\"slideContentAddBuy\":\"QO6jMpRA\",\"transferSlideContent\":\"PkpRKi3Q\",\"spinner\":\"KCsGLTLM\"};","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { StakingStateStatus } from '../../../../global/helpers/staking';\nimport type { Theme } from '../../../../global/types';\nimport { ActiveTab } from '../../../../global/types';\n\nimport {\n  ANIMATED_STICKER_ICON_PX,\n  DEFAULT_LANDSCAPE_ACTION_TAB_ID,\n  IS_STAKING_DISABLED,\n  TONCOIN,\n} from '../../../../config';\nimport { requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport { selectAccountState, selectCurrentAccountSettings } from '../../../../global/selectors';\nimport { ACCENT_COLORS } from '../../../../util/accentColor/constants';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getChainBySlug } from '../../../../util/tokens';\nimport { IS_TOUCH_ENV } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport Content from '../../../receive/Content';\nimport StakingInfoContent from '../../../staking/StakingInfoContent';\nimport StakingInitial from '../../../staking/StakingInitial';\nimport SwapInitial from '../../../swap/SwapInitial';\nimport TransferInitial from '../../../transfer/TransferInitial';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Transition, { ACTIVE_SLIDE_CLASS_NAME, TO_SLIDE_CLASS_NAME } from '../../../ui/Transition';\n\nimport styles from './LandscapeActions.module.scss';\n\ninterface OwnProps {\n  stakingStatus: StakingStateStatus;\n  isLedger?: boolean;\n  theme: Theme;\n}\n\ninterface StateProps {\n  activeTabIndex?: ActiveTab;\n  nfts?: ApiNft[];\n  tokenSlug: string;\n  isTransferWithComment: boolean;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isOnRampDisabled: boolean;\n  accentColorIndex?: number;\n}\n\nconst TABS = [ActiveTab.Receive, ActiveTab.Transfer, ActiveTab.Swap, ActiveTab.Stake];\nconst ANIMATED_STICKER_SPEED = 2;\nlet activeTransferKey = 0;\n\nfunction LandscapeActions({\n  stakingStatus,\n  isLedger,\n  theme,\n  activeTabIndex = DEFAULT_LANDSCAPE_ACTION_TAB_ID,\n  nfts,\n  tokenSlug,\n  isTransferWithComment,\n  isTestnet,\n  isSwapDisabled,\n  isOnRampDisabled,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const { setLandscapeActionsActiveTabIndex: setActiveTabIndex } = getActions();\n\n  const lang = useLang();\n\n  const isStaking = activeTabIndex === ActiveTab.Stake && stakingStatus !== 'inactive';\n\n  const {\n    renderedBgHelpers,\n    transitionRef,\n  } = useTabHeightAnimation(\n    styles.slideContent,\n    styles.transferSlideContent,\n    isStaking ? styles.contentSlideStaked : undefined,\n    isStaking,\n  );\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const isStakingAllowed = !isTestnet && !IS_STAKING_DISABLED;\n  const areNotAllTabs = !isSwapAllowed || !isStakingAllowed;\n  const isLastTab = (!isStakingAllowed && !isSwapAllowed && activeTabIndex === ActiveTab.Transfer)\n    || (!isStakingAllowed && isSwapAllowed && activeTabIndex === ActiveTab.Swap)\n    || (isStakingAllowed && activeTabIndex === ActiveTab.Stake);\n  const transferKey = useMemo(() => nfts?.map((nft) => nft.address).join(',') || tokenSlug, [nfts, tokenSlug]);\n\n  const [isAddBuyAnimating, playAddBuyAnimation, stopAddBuyAnimation] = useFlag();\n  const [isSendAnimating, playSendAnimation, stopSendAnimation] = useFlag();\n  const [isSwapAnimating, playSwapAnimation, stopSwapAnimation] = useFlag();\n  const [isStakeAnimating, playStakeAnimation, stopStakeAnimation] = useFlag();\n  const appTheme = useAppTheme(theme);\n  const stickerPaths = ANIMATED_STICKERS_PATHS[appTheme];\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n\n  const buttonTransitionKeyRef = useRef(0);\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [accentColor]);\n\n  useSyncEffect(() => {\n    activeTransferKey += 1;\n  }, [transferKey]);\n\n  useEffect(() => {\n    if (\n      (!isSwapAllowed && activeTabIndex === ActiveTab.Swap)\n      || (!isStakingAllowed && activeTabIndex === ActiveTab.Stake)\n    ) {\n      setActiveTabIndex({ index: ActiveTab.Transfer });\n    }\n  }, [activeTabIndex, isTestnet, isLedger, isSwapAllowed, isStakingAllowed]);\n\n  function renderCurrentTab(isActive: boolean, isPrev: boolean) {\n    switch (activeTabIndex) {\n      case ActiveTab.Receive:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentAddBuy)}>\n            <Content isOpen={isActive} isStatic />\n          </div>\n        );\n\n      case ActiveTab.Transfer:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentTransfer)}>\n            <Transition\n              activeKey={activeTransferKey}\n              name={isPrev ? 'semiFade' : 'none'}\n              direction={!isTransferWithComment ? 'inverse' : undefined}\n              shouldCleanup\n              slideClassName={styles.transferSlideContent}\n            >\n              <TransferInitial key={activeTransferKey} isStatic />\n            </Transition>\n          </div>\n        );\n\n      case ActiveTab.Swap:\n        return (\n          <div className={styles.slideContent}>\n            <SwapInitial isStatic isActive={isActive} />\n          </div>\n        );\n\n      case ActiveTab.Stake:\n        return (\n          <div className={styles.slideContent}>\n            {\n              stakingStatus === 'inactive'\n                ? <StakingInitial isStatic isActive={isActive} />\n                : <StakingInfoContent isStatic isActive={isActive} />\n            }\n          </div>\n        );\n\n      default:\n        return undefined;\n    }\n  }\n\n  function handleSelectTab(index: ActiveTab, onTouchStart: NoneToVoidFunction) {\n    if (IS_TOUCH_ENV) onTouchStart();\n\n    setActiveTabIndex({ index }, { forceOnHeavyAnimation: true });\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={buildClassName(styles.tabs, areNotAllTabs && styles.notAllTabs)}>\n        <div\n          className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Receive && styles.active)}\n          onMouseEnter={!IS_TOUCH_ENV ? playAddBuyAnimation : undefined}\n          onClick={() => {\n            handleSelectTab(ActiveTab.Receive, playAddBuyAnimation);\n          }}\n        >\n          <AnimatedIconWithPreview\n            play={isAddBuyAnimating}\n            size={ANIMATED_STICKER_ICON_PX}\n            speed={ANIMATED_STICKER_SPEED}\n            className={styles.tabIcon}\n            key={accentColor}\n            color={accentColor}\n            nonInteractive\n            forceOnHeavyAnimation\n            tgsUrl={stickerPaths.iconAdd}\n            iconPreviewClass=\"icon-action-add\"\n            onEnded={stopAddBuyAnimation}\n          />\n          <span className={styles.tabText}>{lang(isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add')}</span>\n\n          <span className={styles.tabDecoration} aria-hidden />\n        </div>\n        <div\n          className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Transfer && styles.active)}\n          onMouseEnter={!IS_TOUCH_ENV ? playSendAnimation : undefined}\n          onClick={() => {\n            handleSelectTab(ActiveTab.Transfer, playSendAnimation);\n          }}\n        >\n          <AnimatedIconWithPreview\n            play={isSendAnimating}\n            size={ANIMATED_STICKER_ICON_PX}\n            speed={ANIMATED_STICKER_SPEED}\n            className={styles.tabIcon}\n            key={accentColor}\n            color={accentColor}\n            nonInteractive\n            forceOnHeavyAnimation\n            tgsUrl={stickerPaths.iconSend}\n            iconPreviewClass=\"icon-action-send\"\n            onEnded={stopSendAnimation}\n          />\n          <span className={styles.tabText}>{lang('Send')}</span>\n          <span className={styles.tabDecoration} aria-hidden />\n          <span className={styles.tabDelimiter} aria-hidden />\n        </div>\n        {isSwapAllowed && (\n          <div\n            className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Swap && styles.active)}\n            onMouseEnter={!IS_TOUCH_ENV ? playSwapAnimation : undefined}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Swap, playSwapAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isSwapAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths.iconSwap}\n              iconPreviewClass=\"icon-action-swap\"\n              onEnded={stopSwapAnimation}\n            />\n            <span className={styles.tabText}>{lang('Swap')}</span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n        {isStakingAllowed && (\n          <div\n            className={buildClassName(\n              styles.tab,\n              activeTabIndex === ActiveTab.Stake && styles.active,\n              isStaking && styles.tab_purple,\n              stakingStatus !== 'inactive' && styles.tab_purpleText,\n            )}\n            onMouseEnter={!IS_TOUCH_ENV ? playStakeAnimation : undefined}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Stake, playStakeAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isStakeAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths[stakingStatus !== 'inactive' ? 'iconEarnPurple' : 'iconEarn']}\n              iconPreviewClass={buildClassName(\n                'icon-action-earn',\n                stakingStatus !== 'inactive' && styles.tab_purpleText,\n              )}\n              onEnded={stopStakeAnimation}\n            />\n            <span className={styles.tabText}>\n              {lang({ inactive: 'Earn', active: 'Earning', unstakeRequested: '$unstaking_short' }[stakingStatus])}\n            </span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n      </div>\n\n      <div\n        className={buildClassName(\n          styles.contentHeader,\n          activeTabIndex === ActiveTab.Receive && styles.firstActive,\n          isLastTab && styles.lastActive,\n        )}\n      >\n        <div className={buildClassName(styles.contentHeaderInner, isStaking && styles.contentSlideStaked)} />\n      </div>\n      {renderedBgHelpers}\n\n      <Transition\n        ref={transitionRef}\n        name=\"slideFade\"\n        activeKey={activeTabIndex}\n        renderCount={TABS.length}\n        className={buildClassName(styles.transitionContent, 'static-container')}\n      >\n        {renderCurrentTab}\n      </Transition>\n    </div>\n  );\n}\n\nfunction useTabHeightAnimation(\n  slideClassName: string,\n  transferSlideClassName: string,\n  contentBackgroundClassName?: string,\n  isUnstaking = false,\n) {\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentBgRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentFooterRef = useRef<HTMLDivElement>(null);\n\n  const lastHeightRef = useRef<number>();\n\n  const adjustBg = useLastCallback((noTransition = false) => {\n    const activeSlideSelector = `.${slideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const toSlideSelector = `.${slideClassName}.${TO_SLIDE_CLASS_NAME}`;\n    const suffix = isUnstaking ? ' .staking-info' : '';\n    // eslint-disable-next-line max-len\n    const transferQuery = `${activeSlideSelector} .${transferSlideClassName}.${TO_SLIDE_CLASS_NAME}, ${activeSlideSelector} .${transferSlideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const query = `${toSlideSelector}${suffix}, ${activeSlideSelector}${suffix}`;\n    const slide = transitionRef.current?.querySelector(transferQuery) || transitionRef.current?.querySelector(query)!;\n    const rect = slide.getBoundingClientRect();\n    const shouldRenderWithoutTransition = !lastHeightRef.current || noTransition;\n\n    if (lastHeightRef.current === rect.height || !contentBgRef.current) return;\n\n    requestMutation(() => {\n      if (!contentBgRef.current || !contentFooterRef.current) return;\n\n      const contentBgStyle = contentBgRef.current.style;\n      const contentFooterStyle = contentFooterRef.current!.style;\n\n      if (shouldRenderWithoutTransition) {\n        contentBgStyle.transition = 'none';\n        contentFooterStyle.transition = 'none';\n      }\n\n      contentBgStyle.transform = `scaleY(calc(${rect.height} / 100))`;\n      contentFooterStyle.transform = `translateY(${Math.floor(rect.height)}px)`;\n\n      if (shouldRenderWithoutTransition) {\n        requestMutation(() => {\n          if (!contentBgRef.current || !contentFooterRef.current) return;\n\n          contentBgRef.current.style.transition = '';\n          contentFooterRef.current.style.transition = '';\n        });\n      }\n\n      lastHeightRef.current = rect.height;\n    });\n  });\n\n  useEffect(() => {\n    adjustBg(true);\n\n    const componentObserver = new ResizeObserver((entries) => {\n      if (!entries.length) return;\n      adjustBg();\n    });\n\n    if (transitionRef.current) {\n      componentObserver.observe(transitionRef.current);\n    }\n\n    return () => {\n      componentObserver.disconnect();\n    };\n  }, [adjustBg]);\n\n  const renderedBgHelpers = useMemo(() => {\n    return (\n      <>\n        <div ref={contentBgRef} className={buildClassName(styles.contentBg, contentBackgroundClassName)} />\n        <div ref={contentFooterRef} className={buildClassName(styles.contentFooter, contentBackgroundClassName)} />\n      </>\n    );\n  }, [contentBackgroundClassName]);\n\n  return {\n    renderedBgHelpers,\n    transitionRef,\n  };\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectAccountState(global, global.currentAccountId!) ?? {};\n\n      const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n      const { nfts, tokenSlug } = global.currentTransfer;\n      const isTransferWithComment = getChainBySlug(tokenSlug) === TONCOIN.chain;\n\n      return {\n        activeTabIndex: accountState?.landscapeActionsActiveTabIndex,\n        isTestnet: global.settings.isTestnet,\n        nfts,\n        tokenSlug,\n        isTransferWithComment,\n        isSwapDisabled,\n        isOnRampDisabled,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(LandscapeActions),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oAYeit4x\",\"buttons\":\"Xw7VtigI\",\"button\":\"f9uDJdvE\",\"button_purple\":\"DSist0sY\",\"buttonPurple\":\"DSist0sY\",\"buttonIcon\":\"iQddp8Ac\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { StakingStateStatus } from '../../../../global/helpers/staking';\n\nimport { IS_CORE_WALLET, IS_STAKING_DISABLED } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\n\nimport styles from './PortraitActions.module.scss';\n\ninterface OwnProps {\n  isTestnet?: boolean;\n  stakingStatus: StakingStateStatus;\n  onEarnClick: NoneToVoidFunction;\n  isLedger?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n}\n\nfunction PortraitActions({\n  isTestnet,\n  stakingStatus,\n  onEarnClick,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n}: OwnProps) {\n  const {\n    startTransfer, startSwap, openReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const isStakingAllowed = !isTestnet && !IS_STAKING_DISABLED;\n  const addBuyButtonName = IS_CORE_WALLET\n    ? 'Receive'\n    : (isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  const handleStartSwap = useLastCallback(() => {\n    void vibrate();\n\n    startSwap();\n  });\n\n  const handleStartTransfer = useLastCallback(() => {\n    void vibrate();\n\n    startTransfer({ isPortrait: true });\n  });\n\n  const handleAddBuyClick = useLastCallback(() => {\n    void vibrate();\n\n    openReceiveModal();\n  });\n\n  const handleEarnClick = useLastCallback(() => {\n    void vibrate();\n\n    onEarnClick();\n  });\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.buttons}>\n        <Button\n          isSimple\n          className={styles.button}\n          onClick={handleAddBuyClick}\n        >\n          <i className={buildClassName(styles.buttonIcon, 'icon-action-add')} aria-hidden />\n          {lang(addBuyButtonName)}\n        </Button>\n        <Button\n          isSimple\n          className={styles.button}\n          onClick={handleStartTransfer}\n        >\n          <i className={buildClassName(styles.buttonIcon, 'icon-action-send')} aria-hidden />\n          {lang('Send')}\n        </Button>\n        {isSwapAllowed && (\n          <Button\n            isSimple\n            className={styles.button}\n            onClick={handleStartSwap}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-swap')} aria-hidden />\n            {lang('Swap')}\n          </Button>\n        )}\n        {isStakingAllowed && (\n          <Button\n            isSimple\n            className={buildClassName(styles.button, stakingStatus !== 'inactive' && styles.button_purple)}\n            onClick={handleEarnClick}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-earn')} aria-hidden />\n            {lang({ inactive: 'Earn', active: 'Earning', unstakeRequested: '$unstaking_short' }[stakingStatus])}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(PortraitActions);\n","// extracted by mini-css-extract-plugin\nexport default {\"containerWrapper\":\"wKxh3a3S\",\"isLoading\":\"iGGNu8pc\",\"center\":\"JhiFICIH\",\"container\":\"DeiKNEF2\",\"backstage\":\"Z0VKHxKs\",\"tokenCard\":\"lPzc1tFZ\",\"containerInner\":\"CJuAKeNp\",\"balanceTransition\":\"Q_lPdCwD\",\"primaryValue\":\"_jSits6S\",\"primaryFractionPart\":\"L4sI_b_K\",\"iconCaret\":\"S_WiTJlv\",\"iconCaretSmall\":\"AyZvbJo1\",\"iconCaretFraction\":\"UPrAgVuY\",\"currencySwitcher\":\"JRDSCLUm\",\"addressContainer\":\"Hscx8f3y\",\"address\":\"xtFe1Hpt\",\"icon\":\"Z4odaM4f\",\"menuItem\":\"DYEcCh8V\",\"menuIcon\":\"reCfAfE0\",\"menuItemName\":\"XG4JwTZX\",\"menuFontIcon\":\"SR492iSb\",\"menuExplorerIcon\":\"F5fuBEwJ\",\"explorerButton\":\"a6nY4qXV\",\"changeSpoiler\":\"u3xBtJOM\",\"blurred\":\"VWmNqmzU\",\"change\":\"p0ADnah2\",\"changeCourseUp\":\"_4aE_WOLG\",\"changeCourseDown\":\"YOGTFZhO\",\"tokenInfo\":\"bGU6MKkV\",\"tokenLogo\":\"KjXvLECZ\",\"tokenInfoHeader\":\"JX6roGM_\",\"tokenInfoSubheader\":\"RxOFnjoX\",\"tokenAmount\":\"eIbQBxJS\",\"tokenName\":\"BnrECUAN\",\"tokenValue\":\"FJv4OzYN\",\"tokenChange\":\"GGm5XDND\",\"tokenChangeSensitiveData\":\"f4V9saRa\",\"tokenChangeSpoiler\":\"_12taTXqz\",\"tokenTitle\":\"RmC9TfSK\",\"tokenHistoryPrice\":\"_4dlU8cE\",\"tokenCurrentPrice\":\"gV90_PgX\",\"tokenPriceDate\":\"iPGWJEAe\",\"apy\":\"NuM0o0NU\",\"tokenExplorerButton\":\"OG4bpDUn\",\"chart\":\"lKplVEJ6\",\"chartImg\":\"RidGreTo\",\"backButton\":\"rzhYg9wP\",\"periodChooser\":\"fJhqjFVE\",\"periodChooserHidden\":\"xPL1t22b\",\"periodItem\":\"il0Zz8yE\",\"periodItem_active\":\"fcYKEjig\",\"periodItemActive\":\"fcYKEjig\",\"periodInput\":\"PIahT0n2\",\"dapp\":\"LHIzI0Gu\",\"dappIcon\":\"dwmUjn3W\",\"loadingDotsContainer\":\"iRUbIPAX\",\"cardCustomBackground\":\"A2ptDHpn\",\"visible\":\"aEg2wczx\",\"black\":\"ah_6og0J\",\"platinum\":\"nnklDXWY\",\"gold\":\"c4y77fMq\",\"silver\":\"M9_HMKD7\",\"borderShine_down\":\"VoOVf4tq\",\"borderShineDown\":\"VoOVf4tq\",\"borderShine_left\":\"dWc8MTsx\",\"borderShineLeft\":\"dWc8MTsx\",\"borderShine_up\":\"k8VOGUyt\",\"borderShineUp\":\"k8VOGUyt\",\"borderShine_right\":\"tqABUy73\",\"borderShineRight\":\"tqABUy73\"};","import type { ApiStakingState } from '../../../../../api/types';\nimport type { UserToken } from '../../../../../global/types';\n\nimport { Big } from '../../../../../lib/big.js';\nimport { calcBigChangeValue } from '../../../../../util/calcChangeValue';\nimport { toBig } from '../../../../../util/decimals';\nimport { formatNumber } from '../../../../../util/formatNumber';\nimport { buildCollectionByKey } from '../../../../../util/iteratees';\nimport { round } from '../../../../../util/math';\n\nimport styles from '../Card.module.scss';\n\nexport function calculateFullBalance(tokens: UserToken[], stakingStates?: ApiStakingState[]) {\n  const stakingStateBySlug = buildCollectionByKey(stakingStates ?? [], 'tokenSlug');\n\n  const primaryValue = tokens.reduce((acc, token) => {\n    const stakingState = stakingStateBySlug[token.slug];\n\n    if (stakingState) {\n      let stakingAmount = toBig(stakingState.balance, token.decimals);\n      if (stakingState.type === 'jetton') {\n        stakingAmount = stakingAmount.plus(toBig(stakingState.unclaimedRewards, token.decimals));\n      }\n      acc = acc.plus(stakingAmount.mul(token.price));\n    }\n\n    return acc.plus(token.totalValue);\n  }, Big(0));\n\n  const [primaryWholePart, primaryFractionPart] = formatNumber(primaryValue).split('.');\n  const changeValue = tokens.reduce((acc, token) => {\n    return acc.plus(calcBigChangeValue(token.totalValue, token.change24h));\n  }, Big(0)).round(4).toNumber();\n\n  const changePercent = round(primaryValue ? (changeValue / (primaryValue.toNumber() - changeValue)) * 100 : 0, 2);\n  const changeClassName = changePercent > 0\n    ? styles.changeCourseUp\n    : (changePercent < 0 ? styles.changeCourseDown : undefined);\n  const changePrefix = changeValue > 0 ? '' : changeValue < 0 ? '' : undefined;\n\n  return {\n    primaryValue: primaryValue.toString(),\n    primaryWholePart,\n    primaryFractionPart,\n    changeClassName,\n    changePrefix,\n    changePercent,\n    changeValue,\n  };\n}\n","import { Big } from '../lib/big.js';\n\nexport function calcChangeValue(currentPrice: number, changeFactor: number) {\n  return currentPrice - currentPrice / (1 + changeFactor);\n}\n\nexport function calcBigChangeValue(currentPrice: Big | string, changeFactor: Big | number) {\n  currentPrice = Big(currentPrice);\n  changeFactor = Big(changeFactor);\n  return currentPrice.minus(currentPrice.div(changeFactor.plus(1)));\n}\n","import type { ApiNft } from '../../../../../api/types';\nimport type { SensitiveDataMaskSkin } from '../../../../common/SensitiveDataMask';\n\nexport default function getSensitiveDataMaskSkinFromCardNft(cardNft?: ApiNft): SensitiveDataMaskSkin {\n  const { mtwCardType, mtwCardTextType } = cardNft?.metadata || {};\n\n  return mtwCardType === 'gold'\n    ? 'cardGoldText'\n    : mtwCardType === 'silver' || mtwCardTextType === 'dark'\n      ? 'cardDarkText'\n      : 'cardLightText';\n}\n","import { useState } from '../lib/teact/teact';\n\nimport useInterval from './useInterval';\n\nconst ONE_SECOND = 1000;\nconst SHOW_INDICATOR_DELAY_MS = 2 * ONE_SECOND;\n\nexport default function useUpdateIndicator(updateStartedAt?: number) {\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  useInterval(() => {\n    if (!updateStartedAt) {\n      setIsUpdating(false);\n      return;\n    }\n\n    const timeElapsedSinceLastUpdateStarted = Date.now() - updateStartedAt;\n\n    setIsUpdating(timeElapsedSinceLastUpdateStarted > SHOW_INDICATOR_DELAY_MS);\n  }, ONE_SECOND, false);\n\n  return isUpdating;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"XUXxtxF8\",\"icon\":\"uN651IGD\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './MintCardButton.module.scss';\n\ninterface StateProps {\n  isCardMinting?: boolean;\n  hasCardsInfo?: boolean;\n}\n\nfunction MintCardButton({\n  isCardMinting,\n  hasCardsInfo,\n}: StateProps) {\n  const { openMintCardModal } = getActions();\n\n  const lang = useLang();\n  const {\n    shouldRender: shouldRenderMintCardsButton,\n    transitionClassNames: mintCardsButtonClassNames,\n  } = useShowTransition(hasCardsInfo || isCardMinting);\n\n  if (!shouldRenderMintCardsButton) return undefined;\n\n  return (\n    <button\n      type=\"button\"\n      className={buildClassName(styles.button, mintCardsButtonClassNames)}\n      aria-label={lang('Mint Cards')}\n      title={lang('Mint Cards')}\n      onClick={() => openMintCardModal()}\n    >\n      <i className={isCardMinting ? 'icon-magic-wand-loading' : 'icon-magic-wand'} aria-hidden />\n      {isCardMinting && (\n        <AnimatedIconWithPreview\n          play\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.icon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS.clockWhite}\n          previewUrl={ANIMATED_STICKERS_PATHS.clockWhitePreview}\n        />\n      )}\n    </button>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const { config } = selectCurrentAccountState(global) || {};\n\n  return {\n    hasCardsInfo: Boolean(config?.cardsInfo),\n    isCardMinting: accountState?.isCardMinting,\n  };\n})(MintCardButton));\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MAX } from '../../config';\nimport { throttleWithTickEnd } from '../../util/schedulers';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLang from '../../hooks/useLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport styles from './AnimatedCounter.module.scss';\n\ntype OwnProps = {\n  text: string;\n  isDisabled?: boolean;\n};\n\nconst ANIMATION_TIME = 200;\nconst MAX_SIMULTANEOUS_ANIMATIONS = 10;\n\nlet scheduledAnimationsCounter = 0;\n\nconst resetCounterOnTickEnd = throttleWithTickEnd(() => {\n  scheduledAnimationsCounter = 0;\n});\n\nconst AnimatedCounter: FC<OwnProps> = ({\n  text,\n  isDisabled,\n}) => {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const { isRtl } = useLang();\n\n  const prevText = usePrevious(text);\n  const forceUpdate = useForceUpdate();\n\n  const shouldAnimate = scheduleAnimation(\n    !isDisabled && animationLevel === ANIMATION_LEVEL_MAX && prevText !== undefined && prevText !== text,\n  );\n\n  const characters = useMemo(() => {\n    return shouldAnimate ? renderAnimatedCharacters(text, prevText) : text;\n  }, [shouldAnimate, prevText, text]);\n\n  useEffect(() => {\n    if (!shouldAnimate) return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      forceUpdate();\n    }, ANIMATION_TIME);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [shouldAnimate, text]);\n\n  return (\n    <span className={!isDisabled && styles.root} dir={isRtl ? 'rtl' : undefined}>\n      {characters}\n    </span>\n  );\n};\n\nexport default memo(AnimatedCounter);\n\nfunction scheduleAnimation(condition: boolean) {\n  if (!condition || scheduledAnimationsCounter >= MAX_SIMULTANEOUS_ANIMATIONS) return false;\n\n  if (scheduledAnimationsCounter === 0) {\n    resetCounterOnTickEnd();\n  }\n\n  scheduledAnimationsCounter++;\n\n  return true;\n}\n\nfunction renderAnimatedCharacters(text: string, prevText?: string) {\n  const elements: React.ReactNode[] = [];\n  const textLength = text.length;\n  const prevTextLength = prevText?.length ?? 0;\n\n  for (let i = 0; i <= textLength; i++) {\n    const charIndex = textLength - i;\n    const prevTextCharIndex = prevTextLength - i;\n\n    if (prevText && prevTextCharIndex >= 0 && text[charIndex] !== prevText[prevTextCharIndex]) {\n      elements.unshift(\n        <div className={styles.characterContainer}>\n          <div className={styles.character}>{text[charIndex] ?? ''}</div>\n          <div className={styles.characterOld}>{prevText[prevTextCharIndex]}</div>\n          <div className={styles.characterNew}>{text[charIndex] ?? ''}</div>\n        </div>,\n      );\n    } else {\n      elements.unshift(<span>{text[charIndex] ?? ''}</span>);\n    }\n  }\n\n  return elements;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UizaBW8F\",\"character-container\":\"o6dPPa5S\",\"characterContainer\":\"o6dPPa5S\",\"character\":\"wT7hwE_a\",\"character-old\":\"pSP5fUMh\",\"characterOld\":\"pSP5fUMh\",\"character-disappear\":\"duRfv5fl\",\"characterDisappear\":\"duRfv5fl\",\"character-new\":\"FtEeojTc\",\"characterNew\":\"FtEeojTc\",\"character-appear\":\"pwumvTMk\",\"characterAppear\":\"pwumvTMk\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiTonWalletVersion } from '../../../../api/chains/ton/types';\nimport type { Account, AccountSettings } from '../../../../global/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { selectNetworkAccounts } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { vibrate } from '../../../../util/haptics';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { getTelegramApp } from '../../../../util/telegram';\nimport trapFocus from '../../../../util/trapFocus';\nimport { getIsMobileTelegramApp } from '../../../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../../../hooks/useFocusAfterAnimation';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../../../hooks/useQrScannerSupport';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport Button from '../../../ui/Button';\nimport AccountButton from './AccountButton';\n\nimport styles from './AccountSelector.module.scss';\n\ninterface OwnProps {\n  canEdit?: boolean;\n  forceClose?: boolean;\n  accountClassName?: string;\n  accountSelectorClassName?: string;\n  menuButtonClassName?: string;\n  noSettingsButton?: boolean;\n  withAccountSelector?: boolean;\n  isInsideSticky?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  currentAccount?: Account;\n  accounts?: Record<string, Account>;\n  shouldForceAccountEdit?: boolean;\n  currentWalletVersion?: ApiTonWalletVersion;\n  isAppLockEnabled?: boolean;\n  isFullscreen?: boolean;\n  isSensitiveDataHidden?: boolean;\n  settingsByAccountId?: Record<string, AccountSettings>;\n}\n\nconst ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG = 2;\n\nfunction AccountSelector({\n  currentAccountId,\n  currentAccount,\n  canEdit,\n  forceClose,\n  accountClassName,\n  accountSelectorClassName,\n  menuButtonClassName,\n  noSettingsButton,\n  withAccountSelector,\n  accounts,\n  isInsideSticky,\n  shouldForceAccountEdit,\n  currentWalletVersion,\n  isAppLockEnabled,\n  isFullscreen,\n  isSensitiveDataHidden,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const {\n    switchAccount,\n    renameAccount,\n    openAddAccountModal,\n    openSettings,\n    requestOpenQrScanner,\n    openSettingsWithState,\n    setIsManualLockActive,\n    setIsSensitiveDataHidden,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const modalRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const lang = useLang();\n  const [isOpen, openAccountSelector, closeAccountSelector] = useFlag(false);\n  const [isEdit, openEdit, closeEdit] = useFlag(shouldForceAccountEdit);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen && !isEdit, undefined, undefined, 'slow');\n  const [inputValue, setInputValue] = useState<string>(currentAccount?.title || '');\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const isMultichainAccount = Boolean(currentAccount?.addressByChain.tron);\n  const noSettingsOrQrSupported = noSettingsButton || (isInsideSticky && isQrScannerSupported);\n  const withAddW5Button = currentWalletVersion !== 'W5' && !currentAccount?.isHardware && !isMultichainAccount;\n\n  const accountsAmount = useMemo(() => Object.keys(accounts || {}).length, [accounts]);\n\n  useEffect(() => {\n    if (isOpen && forceClose) {\n      closeAccountSelector();\n    }\n  }, [forceClose, isOpen]);\n\n  useEffectWithPrevDeps(([prevShouldForceAccountEdit]) => {\n    if (prevShouldForceAccountEdit && !shouldForceAccountEdit) {\n      closeEdit();\n    }\n  }, [shouldForceAccountEdit]);\n\n  useEffect(\n    () => (shouldRender ? captureEscKeyListener(closeAccountSelector) : undefined),\n    [closeAccountSelector, isOpen, shouldRender],\n  );\n  useEffect(\n    () => (isEdit ? captureEscKeyListener(closeEdit) : undefined),\n    [closeEdit, isEdit],\n  );\n  useEffect(() => (shouldRender && modalRef.current ? trapFocus(modalRef.current) : undefined), [shouldRender]);\n  useFocusAfterAnimation(inputRef, !isEdit);\n  useEffect(() => {\n    if (isEdit) {\n      setInputValue(currentAccount?.title || '');\n    }\n  }, [currentAccount?.title, isEdit]);\n\n  const handleOpenAccountSelector = () => {\n    openAccountSelector();\n  };\n\n  const handleSensitiveDataToggle = useLastCallback(() => {\n    setIsSensitiveDataHidden({ isHidden: !isSensitiveDataHidden });\n  });\n\n  const handleSwitchAccount = useLastCallback((accountId: string) => {\n    void vibrate();\n    closeAccountSelector();\n    switchAccount({ accountId });\n  });\n\n  const handleSaveClick = useLastCallback(() => {\n    renameAccount({ accountId: currentAccountId, title: inputValue.trim() });\n    closeAccountSelector();\n    closeEdit();\n  });\n\n  const handleAddWalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openAddAccountModal();\n  });\n  useEffect(() => {\n    if (isEdit && isInsideSticky) { handleSaveClick(); }\n  }, [isEdit, isInsideSticky]);\n\n  const handleAddV5WalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  const handleInputKeyDown = useLastCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.code === 'Enter') {\n      handleSaveClick();\n    } else {\n      setInputValue(e.currentTarget.value);\n    }\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    requestOpenQrScanner();\n    closeAccountSelector();\n  });\n\n  const handleFullscreenToggle = useLastCallback(() => {\n    if (isFullscreen) {\n      getTelegramApp()?.exitFullscreen();\n    } else {\n      getTelegramApp()?.requestFullscreen();\n    }\n  });\n\n  const handleManualLock = useLastCallback(() => {\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n  });\n\n  function renderButton(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    isHardware?: boolean,\n    title?: string,\n  ) {\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n    const isActive = accountId === currentAccountId;\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        addressByChain={addressByChain}\n        isHardware={isHardware}\n        isActive={isActive}\n        title={title}\n        canEditAccount={canEdit}\n        cardBackgroundNft={cardBackgroundNft}\n        onClick={handleSwitchAccount}\n        onEdit={openEdit}\n      />\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.container,\n    transitionClassNames,\n    accountSelectorClassName,\n  );\n  const accountTitleClassName = buildClassName(\n    styles.accountTitle,\n    withAccountSelector && styles.accountTitleInteractive,\n    accountClassName,\n    isQrScannerSupported && !noSettingsOrQrSupported && styles.accountTitleShort,\n  );\n\n  function renderCurrentAccount() {\n    return (\n      <>\n        <div className={accountTitleClassName} onClick={withAccountSelector ? handleOpenAccountSelector : undefined}>\n          <span className={styles.accountTitleInner}>\n            {currentAccount?.title || shortenAddress(currentAccount?.addressByChain?.ton || '')}\n          </span>\n          {withAccountSelector && (\n            <i className={buildClassName('icon icon-caret-down', styles.arrowIcon)} aria-hidden />\n          )}\n        </div>\n        <div className={buildClassName(styles.menuButtons, isInsideSticky && styles.inStickyCard)}>\n          {!isInsideSticky && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang(isSensitiveDataHidden ? 'Show Sensitive Data' : 'Hide Sensitive Data')}\n              onClick={handleSensitiveDataToggle}\n            >\n              <i className={isSensitiveDataHidden ? 'icon-eye' : 'icon-eye-closed'} aria-hidden />\n            </Button>\n          )}\n          {isAppLockEnabled && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('App Lock')}\n              onClick={handleManualLock}\n            >\n              <i className=\"icon-manual-lock\" aria-hidden />\n            </Button>\n          )}\n          {!noSettingsOrQrSupported && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('Main menu')}\n              onClick={openSettings}\n            >\n              <i className=\"icon-cog\" aria-hidden />\n            </Button>\n          )}\n          {isQrScannerSupported && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('Scan QR Code')}\n              onClick={handleQrScanClick}\n            >\n              <i className=\"icon-qr-scanner\" aria-hidden />\n            </Button>\n          )}\n          {getIsMobileTelegramApp() && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('Toggle fullscreen')}\n              onClick={handleFullscreenToggle}\n            >\n              <i className={isFullscreen ? 'icon-fullscreen-exit' : 'icon-fullscreen'} aria-hidden />\n            </Button>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  function renderInput() {\n    return (\n      <div className={buildClassName(styles.inputContainer, 'account-edit-input')}>\n        <input\n          ref={inputRef}\n          className={styles.input}\n          value={inputValue}\n          onKeyDown={handleInputKeyDown}\n          onChange={(e) => setInputValue(e.target.value)}\n        />\n        <Button isSimple className={styles.saveButton} onClick={handleSaveClick}>{lang('Done')}</Button>\n      </div>\n    );\n  }\n\n  function renderAccountsSelector() {\n    const dialogFullClassName = buildClassName(\n      styles.dialog,\n      accountsAmount <= ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG && styles.dialog_compact,\n    );\n\n    return (\n      <div\n        ref={modalRef}\n        className={fullClassName}\n        tabIndex={-1}\n        role=\"dialog\"\n      >\n        <div className={styles.backdrop} onClick={() => closeAccountSelector()} />\n        <div className={dialogFullClassName}>\n          {accounts && Object.entries(accounts).map(\n            ([accountId, { title, addressByChain, isHardware }]) => {\n              return renderButton(accountId, addressByChain, isHardware, title);\n            },\n          )}\n          {withAddW5Button && (\n            <Button className={styles.createAccountButton} onClick={handleAddV5WalletClick}>\n              {lang('Switch to W5')}\n              <i className={buildClassName(styles.createAccountIcon, 'icon-versions')} aria-hidden />\n            </Button>\n          )}\n          <Button className={styles.createAccountButton} onClick={handleAddWalletClick}>\n            {lang('Add Wallet')}\n            <i className={buildClassName(styles.createAccountIcon, 'icon-plus')} aria-hidden />\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {!isEdit && renderCurrentAccount()}\n      {isEdit && !isInsideSticky && renderInput()}\n\n      {shouldRender && renderAccountsSelector()}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      isFullscreen,\n      shouldForceAccountEdit,\n      walletVersions,\n      settings: {\n        isAppLockEnabled,\n        byAccountId: settingsByAccountId,\n        isSensitiveDataHidden,\n      },\n    } = global;\n\n    const accounts = selectNetworkAccounts(global);\n    const currentAccountId = global.currentAccountId!;\n\n    return {\n      currentAccountId,\n      currentAccount: accounts?.[currentAccountId],\n      accounts,\n      shouldForceAccountEdit,\n      currentWalletVersion: walletVersions?.currentVersion,\n      isAppLockEnabled,\n      settingsByAccountId,\n      isFullscreen,\n      isSensitiveDataHidden,\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n)(AccountSelector));\n","import React, { memo, type TeactNode, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiChain } from '../../../../api/types';\nimport type { Account } from '../../../../global/types';\n\nimport { selectAccount } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { openUrl } from '../../../../util/openUrl';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport getChainNetworkIcon from '../../../../util/swap/getChainNetworkIcon';\nimport { getExplorerAddressUrl, getExplorerName } from '../../../../util/url';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Menu from '../../../ui/Menu';\n\nimport menuStyles from '../../../ui/Dropdown.module.scss';\nimport styles from './Card.module.scss';\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  isTestnet?: boolean;\n  isHardwareAccount?: boolean;\n  withTextGradient?: boolean;\n}\n\nfunction CardAddress({\n  addressByChain, isTestnet, isHardwareAccount, withTextGradient,\n}: StateProps) {\n  const { showNotification } = getActions();\n\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag(false);\n  const chains = useMemo(() => Object.keys(addressByChain || {}) as ApiChain[], [addressByChain]);\n  const explorerTitle = lang('View on Explorer');\n  const chainDropdownItems = useMemo(() => {\n    if (chains.length < 2) return undefined;\n\n    return chains.map((key) => ({\n      value: addressByChain![key],\n      name: shortenAddress(addressByChain![key])!,\n      icon: getChainNetworkIcon(key),\n      fontIcon: 'copy',\n      chain: key,\n      label: (lang('View address on %ton_explorer_name%', {\n        ton_explorer_name: getExplorerName(key),\n      }) as TeactNode[]\n      ).join(''),\n    }));\n  }, [addressByChain, chains, lang]);\n\n  const handleCopyAddress = useLastCallback((address: string) => {\n    showNotification({ message: lang('Address was copied!') as string, icon: 'icon-copy' });\n    void copyTextToClipboard(address);\n  });\n\n  const handleItemClick = useLastCallback((e: React.MouseEvent, address: string) => {\n    handleCopyAddress(address);\n    closeMenu();\n  });\n\n  const handleExplorerClick = useLastCallback((e: React.MouseEvent, chain: ApiChain, address: string) => {\n    void openUrl(getExplorerAddressUrl(chain, address, isTestnet)!);\n    closeMenu();\n  });\n\n  function renderAddressMenu() {\n    return (\n      <Menu\n        isOpen={isMenuOpen}\n        type=\"dropdown\"\n        onClose={closeMenu}\n      >\n        {chainDropdownItems!.map((item, index) => {\n          const fullButtonClassName = buildClassName(\n            menuStyles.button,\n            index > 0 && menuStyles.separator,\n            styles.menuItem,\n          );\n\n          return (\n            <div key={item.value} className={fullButtonClassName}>\n              <img src={item.icon} alt=\"\" className={buildClassName('icon', menuStyles.itemIcon, styles.menuIcon)} />\n              <span\n                className={buildClassName(menuStyles.itemName, styles.menuItemName)}\n                tabIndex={0}\n                role=\"button\"\n                onClick={(e) => handleItemClick(e, item.value)}\n              >\n                {item.name}\n                <i\n                  className={buildClassName(`icon icon-${item.fontIcon}`, menuStyles.fontIcon, styles.menuFontIcon)}\n                  aria-hidden\n                />\n              </span>\n              <i\n                tabIndex={0}\n                role=\"button\"\n                className={buildClassName(menuStyles.close, 'icon icon-tonexplorer-small', styles.menuExplorerIcon)}\n                aria-label={item.label}\n                onClick={(e) => handleExplorerClick(e, item.chain, item.value)}\n              />\n            </div>\n          );\n        })}\n      </Menu>\n    );\n  }\n\n  if (chainDropdownItems) {\n    return (\n      <div className={styles.addressContainer}>\n        <button\n          type=\"button\"\n          className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n          onClick={() => openMenu()}\n        >\n          <span className={buildClassName(styles.itemName, 'itemName')}>\n            {lang('Multichain')}\n          </span>\n          <i className={buildClassName(styles.icon, 'icon-caret-down')} aria-hidden />\n        </button>\n        {renderAddressMenu()}\n      </div>\n    );\n  }\n\n  const chain = chains[0];\n  if (!chain) return undefined;\n\n  return (\n    <div className={styles.addressContainer}>\n      {isHardwareAccount && <i className={buildClassName(styles.icon, 'icon-ledger')} aria-hidden />}\n      <button\n        type=\"button\"\n        className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n        aria-label={lang('Copy wallet address')}\n        onClick={() => handleCopyAddress(addressByChain![chain])}\n      >\n        {shortenAddress(addressByChain![chain])}\n        <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n      </button>\n      <a\n        href={getExplorerAddressUrl(chain, addressByChain![chain], isTestnet)}\n        className={styles.explorerButton}\n        title={explorerTitle}\n        aria-label={explorerTitle}\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n      >\n        <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain, isHardware } = selectAccount(global, global.currentAccountId!) || {};\n\n  return {\n    addressByChain,\n    isTestnet: global.settings.isTestnet,\n    isHardwareAccount: isHardware,\n  };\n})(CardAddress));\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency } from '../../../../api/types';\n\nimport { CURRENCY_LIST } from '../../../../config';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\ninterface OwnProps {\n  isOpen: boolean;\n  excludedCurrency?: string;\n  menuPositionHorizontal?: 'right' | 'left';\n  onClose: NoneToVoidFunction;\n  onChange?: (currency: ApiBaseCurrency) => void;\n}\n\ninterface StateProps {\n  currentCurrency?: ApiBaseCurrency;\n}\n\nfunction CurrencySwitcher({\n  isOpen,\n  currentCurrency,\n  excludedCurrency,\n  menuPositionHorizontal,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { changeBaseCurrency } = getActions();\n\n  const currencyList = useMemo(\n    () => CURRENCY_LIST.filter((item) => item.value !== excludedCurrency),\n    [excludedCurrency],\n  );\n\n  const handleBaseCurrencyChange = useLastCallback((currency: string) => {\n    onClose();\n\n    if (currency === currentCurrency) return;\n\n    changeBaseCurrency({ currency: currency as ApiBaseCurrency });\n    onChange?.(currency as ApiBaseCurrency);\n  });\n\n  return (\n    <DropdownMenu\n      isOpen={isOpen}\n      onClose={onClose}\n      items={currencyList}\n      shouldTranslateOptions\n      selectedValue={currentCurrency}\n      menuPositionHorizontal={menuPositionHorizontal}\n      onSelect={handleBaseCurrencyChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    currentCurrency: global.settings.baseCurrency,\n  };\n})(CurrencySwitcher));\n","import { useEffect } from '../lib/teact/teact';\n\nimport { getCachedImageUrl } from '../util/getCachedImageUrl';\nimport useAsync from './useAsync';\n\nexport function useCachedImage(src?: string) {\n  const { result: imageUrl } = useAsync(\n    () => (src ? getCachedImageUrl(src) : Promise.resolve(undefined)),\n    [src],\n  );\n\n  useEffect(() => {\n    return imageUrl ? () => {\n      URL.revokeObjectURL(imageUrl);\n    } : undefined;\n  }, [imageUrl]);\n\n  return { imageUrl };\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst useAsync = <T>(fn: () => Promise<T>, deps: any[], defaultValue?: T) => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | undefined>();\n  const [result, setResult] = useState<T | undefined>(defaultValue);\n  useEffect(() => {\n    setIsLoading(true);\n    let wasCancelled = false;\n    fn().then((res) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setResult(res);\n    }, (err) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setError(err);\n    });\n    return () => {\n      wasCancelled = true;\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps);\n  return { isLoading, error, result };\n};\n\nexport default useAsync;\n","import { IMAGE_CACHE_NAME } from '../config';\n\nexport async function getCachedImageUrl(url: string) {\n  const cache = await caches.open(IMAGE_CACHE_NAME);\n\n  const cachedResponse = await cache.match(url);\n  if (cachedResponse) {\n    const blob = await cachedResponse.blob();\n\n    return URL.createObjectURL(blob);\n  }\n\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(`Image loading error: ${response.statusText}. URL: ${url}`);\n  }\n\n  await cache.put(url, response.clone());\n  const blob = await response.blob();\n\n  return URL.createObjectURL(blob);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UUXTSSNb\",\"sticky\":\"GydVN6zu\",\"image\":\"GnuUYTcY\",\"borderShine_down\":\"eZtdmQCz\",\"borderShineDown\":\"eZtdmQCz\",\"borderShine_left\":\"u_5j0LEw\",\"borderShineLeft\":\"u_5j0LEw\",\"borderShine_up\":\"DBu8v2wg\",\"borderShineUp\":\"DBu8v2wg\",\"borderShine_right\":\"iOyJF5OB\",\"borderShineRight\":\"iOyJF5OB\",\"borderShine_radioactive\":\"omctwMWw\",\"borderShineRadioactive\":\"omctwMWw\",\"shadow\":\"rm7OVuVh\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCardNftImageUrl } from '../../../../util/url';\n\nimport { useCachedImage } from '../../../../hooks/useCachedImage';\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useFlag from '../../../../hooks/useFlag';\nimport useMediaTransition from '../../../../hooks/useMediaTransition';\n\nimport styles from './CustomCardBackground.module.scss';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft: ApiNft;\n  noShowAnimation?: boolean;\n  shouldHide?: boolean;\n  onLoad?: (hasGradient: boolean, className?: string) => void;\n  onTransitionEnd: NoneToVoidFunction;\n}\n\nfunction CustomCardBackground({\n  isSticky,\n  nft,\n  noShowAnimation,\n  shouldHide,\n  onLoad,\n  onTransitionEnd,\n}: OwnProps) {\n  const { imageUrl } = useCachedImage(nft ? getCardNftImageUrl(nft) : undefined);\n  const [isLoaded, markLoaded] = useFlag();\n  const transitionClassNames = useMediaTransition(noShowAnimation || (isLoaded && !shouldHide));\n\n  const {\n    borderShineType,\n    withTextGradient,\n    classNames: cardClassName,\n  } = useCardCustomization(nft);\n\n  function handleLoad() {\n    markLoaded();\n\n    onLoad?.(withTextGradient, cardClassName);\n  }\n\n  const rootClassName = buildClassName(\n    styles.root,\n    isSticky && styles.sticky,\n    cardClassName,\n    borderShineType && styles[`borderShine_${borderShineType}`],\n    isLoaded && !shouldHide && styles.loaded,\n    shouldHide && styles.hide,\n  );\n\n  const withShadow = nft.metadata?.mtwCardType === 'standard';\n\n  return (\n    <div className={buildClassName(rootClassName, transitionClassNames)} onTransitionEnd={onTransitionEnd}>\n      {imageUrl && (\n        <img\n          src={imageUrl}\n          alt={nft.name}\n          className={styles.image}\n          onLoad={handleLoad}\n        />\n      )}\n      {withShadow && <div className={styles.shadow} />}\n    </div>\n  );\n}\n\nexport default memo(CustomCardBackground);\n","import React, { memo, useRef } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffectWithPrevDeps from '../../../../hooks/useSyncEffectWithPrevDeps';\n\nimport CustomCardBackground from './CustomCardBackground';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft?: ApiNft;\n  onCardChange: (hasGradient: boolean, className?: string) => void;\n}\n\nfunction CustomCardManager({ isSticky, nft, onCardChange }: OwnProps) {\n  const prevNftRef = useRef<ApiNft | undefined>(undefined);\n  const forceUpdate = useForceUpdate();\n\n  useSyncEffectWithPrevDeps(([prevNft, prevNftAddress]) => {\n    if (nft?.address !== prevNftAddress) {\n      prevNftRef.current = prevNft;\n    }\n\n    if (!nft) {\n      onCardChange(false, undefined);\n    }\n  }, [nft, nft?.address]);\n\n  const prevNft = prevNftRef.current;\n\n  const isMountRef = useRef(true);\n  const noShowAnimation = nft && isMountRef.current;\n  isMountRef.current = false;\n\n  const handleTransitionEnd = useLastCallback(() => {\n    prevNftRef.current = undefined;\n    forceUpdate();\n  });\n\n  return (\n    <div teactFastList>\n      {prevNft && (\n        <CustomCardBackground\n          key={prevNft.address}\n          isSticky={isSticky}\n          nft={prevNft}\n          shouldHide={!nft}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n      {nft && (\n        <CustomCardBackground\n          key={nft.address}\n          isSticky={isSticky}\n          nft={nft}\n          noShowAnimation={noShowAnimation}\n          onLoad={onCardChange}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(CustomCardManager);\n","import { useRef } from '../lib/teact/teact';\n\nimport useSyncEffect from './useSyncEffect';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useSyncEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import type { UserToken } from '../../../global/types';\nimport type { RGBColor } from '../../../util/colors';\n\nimport {\n  STAKED_TON_SLUG, TONCOIN, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG, TRX,\n} from '../../../config';\nimport { deltaE, hex2rgb } from '../../../util/colors';\n\nconst TOKEN_CARD_COLORS: Record<string, RGBColor> = {\n  green: [80, 135, 51],\n  orange: [173, 84, 54],\n  pink: [154, 60, 144],\n  purple: [104, 48, 149],\n  red: [156, 52, 75],\n  sea: [43, 116, 123],\n  tegro: [3, 93, 229],\n  blue: [47, 108, 173],\n};\n\nexport const TOKEN_EXCEPTION_COLORS: Record<string, string> = {\n  [TONCOIN.slug]: 'blue',\n  [TRX.slug]: 'red',\n  [TRC20_USDT_MAINNET_SLUG]: 'green',\n  [TRC20_USDT_TESTNET_SLUG]: 'green',\n  [STAKED_TON_SLUG]: 'green',\n};\n\nconst DISTANCE_THRESHOLD = 35;\n\nexport function calculateTokenCardColor(token?: UserToken): string {\n  let closestColor = 'blue';\n  let smallestDistance = Infinity;\n\n  if (!token) return closestColor;\n\n  if (TOKEN_EXCEPTION_COLORS[token.slug]) {\n    return TOKEN_EXCEPTION_COLORS[token.slug];\n  }\n\n  if (!token.color) return closestColor;\n\n  const tokenRgbColor = hex2rgb(token.color);\n\n  Object.entries(TOKEN_CARD_COLORS).forEach(([colorName, colorValue]) => {\n    const distance = deltaE(tokenRgbColor, colorValue);\n    if (distance < smallestDistance) {\n      smallestDistance = distance;\n      closestColor = colorName;\n    }\n  });\n\n  if (smallestDistance > DISTANCE_THRESHOLD) {\n    return 'blue';\n  }\n\n  return closestColor;\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiHistoryList } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport {\n  disableTelegramMiniAppSwipeToClose,\n  enableTelegramMiniAppSwipeToClose,\n} from '../../util/telegram';\n\nimport useLang from '../../hooks/useLang';\n\nimport Transition from '../ui/Transition';\n\ninterface OwnProps {\n  width: number;\n  height: number;\n  prices: ApiHistoryList;\n  selectedIndex: number;\n  className?: string;\n  imgClassName?: string;\n  onSelectIndex: (index: number) => void;\n  isUpdating?: boolean;\n}\n\nconst IS_SMOOTH = true;\nconst PATH_SMOOTHING = 0.0001;\nconst MIN_CHART_HEIGHT = 0.000000001;\n\nfunction TokenPriceChart({\n  width,\n  height,\n  prices,\n  selectedIndex,\n  className,\n  imgClassName,\n  onSelectIndex,\n  isUpdating,\n}: OwnProps) {\n  const lang = useLang();\n\n  const boundingPoints = useMemo(() => {\n    const priceValues = prices.map(([, price]) => price);\n    const min = Math.min(...priceValues);\n    const max = Math.max(...priceValues);\n\n    return {\n      width: prices.length - 1,\n      height: Math.max(MIN_CHART_HEIGHT, max - min),\n      min,\n    };\n  }, [prices]);\n\n  const points = useMemo(() => {\n    const scaleX = width / boundingPoints.width;\n    const scaleY = height / boundingPoints.height;\n\n    return prices.map(([, y], i) => ({ x: i * scaleX + 3, y: (y - boundingPoints.min) * scaleY + 3 }));\n  }, [boundingPoints.height, boundingPoints.min, boundingPoints.width, height, width, prices]);\n\n  function getBasisPoint(i: number) {\n    const indexesCount = points.length - 1;\n    const index = i < 0 ? 0 : i > indexesCount ? indexesCount : i;\n    const point = points[index];\n    const ratio = 1 - PATH_SMOOTHING;\n    const tangent = index / indexesCount;\n    const firstPoint = points[0];\n    const distance = {\n      x: points[indexesCount].x - firstPoint.x,\n      y: points[indexesCount].y - firstPoint.y,\n    };\n\n    return {\n      x: ratio * point.x + (1 - ratio) * (firstPoint.x + tangent * distance.x),\n      y: ratio * point.y + (1 - ratio) * (firstPoint.y + tangent * distance.y),\n    };\n  }\n\n  function getCurvePath(i: number) {\n    const pCurrent = getBasisPoint(i);\n    const pMinus1 = getBasisPoint(i - 1);\n    const pMinus2 = getBasisPoint(i - 2);\n\n    const x1 = (2 * pMinus2.x + pMinus1.x) / 3;\n    const y1 = (2 * pMinus2.y + pMinus1.y) / 3;\n    const x2 = (pMinus2.x + 2 * pMinus1.x) / 3;\n    const y2 = (pMinus2.y + 2 * pMinus1.y) / 3;\n    const x3 = (pMinus2.x + 4 * pMinus1.x + pCurrent.x) / 6;\n    const y3 = (pMinus2.y + 4 * pMinus1.y + pCurrent.y) / 6;\n\n    return `C ${x1} ${y1} ${x2} ${y2} ${x3} ${y3}`;\n  }\n\n  function getLinePath(point: { x: number; y: number }) {\n    return `L ${point.x} ${point.y}`;\n  }\n\n  function getPath() {\n    let d = points.reduce((acc, point, i) => {\n      const partialPath = IS_SMOOTH\n        ? getCurvePath(i)\n        : getLinePath(point);\n      return i === 0\n        ? `M ${point.x} ${point.y} `\n        : `${acc} ${partialPath} `;\n    }, '');\n\n    if (IS_SMOOTH) {\n      d += getCurvePath(points.length);\n      d += getLinePath(points[points.length - 1]);\n    }\n\n    return d;\n  }\n\n  function renderSvg() {\n    const activePoint = points[selectedIndex] || points[points.length - 1];\n\n    const svg = `<svg viewBox=\"0 0 ${width + 6} ${height + 6}\" height=\"${height + 6}\" width=\"${width + 6}\"\n        xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: scale(1,-1)\">\n        <g fill=\"none\" stroke=\"white\">\n          <path stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"${getPath()}\" style=\"stroke-linecap: round\" />\n          <circle r=\"2.5\" fill=\"white\" cx=\"${activePoint.x}\" cy=\"${activePoint.y}\" />\n        </g>\n      </svg>`;\n\n    return `data:image/svg+xml;utf8,${(svg)}`;\n  }\n\n  function handleMouseMove(e: React.MouseEvent<HTMLDivElement> | React.TouchEvent<HTMLDivElement>) {\n    const { x: containerX, width: containerWidth } = e.currentTarget.getBoundingClientRect();\n    const { clientX } = 'touches' in e ? e.touches[0] : e;\n    const segmentHalfWidth = (containerWidth / points.length) / 2;\n    const x = clientX - containerX - segmentHalfWidth;\n    const nextIndex = Math.max(0, Math.min(Math.round(points.length * (x / containerWidth)), points.length - 1));\n\n    onSelectIndex(nextIndex);\n  }\n\n  function handleTouchStart(e: React.TouchEvent<HTMLDivElement>) {\n    handleMouseMove(e);\n\n    disableTelegramMiniAppSwipeToClose();\n  }\n\n  function handleMouseLeave() {\n    onSelectIndex(-1);\n\n    enableTelegramMiniAppSwipeToClose();\n  }\n\n  return (\n    <div\n      className={className}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      onTouchStart={handleTouchStart}\n      onTouchMove={handleMouseMove}\n      onTouchEnd={handleMouseLeave}\n      onTouchCancel={handleMouseLeave}\n    >\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"semiFade\" shouldCleanup>\n        <img\n          src={renderSvg()}\n          className={buildClassName(imgClassName, isUpdating && 'glare-image')}\n          alt={lang('Currency History')}\n        />\n      </Transition>\n    </div>\n  );\n}\n\nexport default memo(TokenPriceChart);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TokenPeriod } from '../../../../global/types';\n\nimport { HISTORY_PERIODS } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './ChartHistorySwitcher.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  onChange?: (period: TokenPeriod) => void;\n}\n\ninterface StateProps {\n  currentPeriod?: TokenPeriod;\n}\n\nconst ITEMS = HISTORY_PERIODS.map((key) => ({ value: key, name: key === 'ALL' ? 'All' : key }));\n\nfunction ChartHistorySwitcher({\n  isOpen,\n  currentPeriod,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { setCurrentTokenPeriod } = getActions();\n\n  const handlePeriodChange = useLastCallback((period: string) => {\n    onClose();\n\n    if (period === currentPeriod) return;\n\n    void vibrate();\n\n    setCurrentTokenPeriod({ period: period as TokenPeriod });\n    onChange?.(period as TokenPeriod);\n  });\n\n  return (\n    <DropdownMenu\n      isOpen={isOpen}\n      onClose={onClose}\n      items={ITEMS}\n      className={styles.menuWrapper}\n      bubbleClassName={styles.menu}\n      buttonClassName={styles.menuItem}\n      selectedValue={currentPeriod}\n      menuPositionHorizontal=\"right\"\n      onSelect={handlePeriodChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    currentPeriod: accountState?.currentTokenPeriod,\n  };\n})(ChartHistorySwitcher));\n","// extracted by mini-css-extract-plugin\nexport default {\"menuWrapper\":\"Lfs6oB99\",\"menu\":\"EJsuJXfx\",\"menuItem\":\"J7O_MmwF\"};","import type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../../../api/types';\nimport type { PriceHistoryPeriods, TokenPeriod, UserToken } from '../../../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, HISTORY_PERIODS, IS_CORE_WALLET, TONCOIN } from '../../../../config';\nimport { selectAccountStakingStates, selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatShortDay, SECOND } from '../../../../util/dateFormat';\nimport { toBig, toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { vibrate } from '../../../../util/haptics';\nimport { handleOpenUrl } from '../../../../util/openUrl';\nimport { round } from '../../../../util/round';\nimport { getExplorerName, getExplorerTokenUrl } from '../../../../util/url';\nimport { IS_IOS } from '../../../../util/windowEnvironment';\nimport { ASSET_LOGO_PATHS } from '../../../ui/helpers/assetLogos';\nimport { calculateTokenCardColor } from '../../helpers/cardColors';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useInterval from '../../../../hooks/useInterval';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\nimport useTimeout from '../../../../hooks/useTimeout';\n\nimport TokenPriceChart from '../../../common/TokenPriceChart';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport ChartHistorySwitcher from './ChartHistorySwitcher';\nimport CurrencySwitcher from './CurrencySwitcher';\n\nimport styles from './Card.module.scss';\n\nimport tonUrl from '../../../../assets/coins/ton.svg';\n\ninterface OwnProps {\n  token: UserToken;\n  classNames: string;\n  isUpdating?: boolean;\n  onYieldClick: (stakingId?: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  period?: TokenPeriod;\n  baseCurrency?: ApiBaseCurrency;\n  historyPeriods?: PriceHistoryPeriods;\n  tokenAddress?: string;\n  isTestnet?: boolean;\n  stakingStates?: ApiStakingState[];\n  isSensitiveDataHidden?: true;\n}\n\nconst OFFLINE_TIMEOUT = 120000; // 2 minutes\n\nconst CHART_DIMENSIONS = { width: 300, height: 64 };\nconst INTERVAL = 5 * SECOND;\n\nconst DEFAULT_PERIOD = HISTORY_PERIODS[0];\n\nfunction TokenCard({\n  isTestnet,\n  token,\n  classNames,\n  period = DEFAULT_PERIOD,\n  isUpdating,\n  baseCurrency,\n  historyPeriods,\n  tokenAddress,\n  stakingStates,\n  isSensitiveDataHidden,\n  onYieldClick,\n  onClose,\n}: OwnProps & StateProps) {\n  const { loadPriceHistory } = getActions();\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n  const [isHistoryMenuOpen, openHistoryMenu, closeHistoryMenu] = useFlag(false);\n\n  const shouldUseDefaultCurrency = baseCurrency === undefined || baseCurrency === token.symbol;\n  const chartCurrency = shouldUseDefaultCurrency ? DEFAULT_PRICE_CURRENCY : baseCurrency;\n\n  const currencySymbol = getShortCurrencySymbol(chartCurrency);\n\n  const [selectedHistoryIndex, setSelectedHistoryIndex] = useState(-1);\n\n  useSyncEffect(([prevHistoryIndex]) => {\n    if (!IS_IOS) return;\n\n    if (prevHistoryIndex !== undefined) {\n      void vibrate();\n    }\n  }, [selectedHistoryIndex]);\n\n  const {\n    slug, symbol, amount, image, name, price: lastPrice, decimals,\n  } = token;\n\n  const { annualYield, yieldType, id: stakingId } = useMemo(() => {\n    if (IS_CORE_WALLET) return undefined;\n\n    return stakingStates?.reduce((bestState, state) => {\n      if (state.tokenSlug === slug && (!bestState || state.balance > bestState.balance)) {\n        return state;\n      }\n      return bestState;\n    }, undefined as ApiStakingState | undefined);\n  }, [stakingStates, slug]) ?? {};\n\n  const logoPath = slug === TONCOIN.slug\n    ? tonUrl\n    : image || ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS];\n\n  const refreshHistory = useLastCallback((newPeriod?: TokenPeriod) => {\n    loadPriceHistory({ slug, period: newPeriod ?? period });\n  });\n\n  const handleCurrencyChange = useLastCallback((currency: ApiBaseCurrency) => {\n    loadPriceHistory({ slug, period, currency });\n  });\n\n  useInterval(refreshHistory, INTERVAL);\n\n  const history = historyPeriods?.[period];\n\n  const tokenLastUpdatedAt = history?.length ? history[history.length - 1][0] * 1000 : undefined;\n  const tokenLastHistoryPrice = history?.length ? history[history.length - 1][1] : lastPrice;\n  const selectedHistoryPoint = history?.[selectedHistoryIndex];\n  const price = selectedHistoryPoint?.[1]\n    ?? (shouldUseDefaultCurrency ? tokenLastHistoryPrice : undefined)\n    ?? lastPrice;\n  // To prevent flickering with spoiler\n  const tokenChangePrice = isSensitiveDataHidden ? lastPrice : price;\n  const isLoading = !tokenLastUpdatedAt || (Date.now() - tokenLastUpdatedAt > OFFLINE_TIMEOUT);\n  const dateStr = selectedHistoryPoint\n    ? formatShortDay(lang.code!, selectedHistoryPoint[0] * 1000, true, true)\n    : (isLoading && tokenLastUpdatedAt ? formatShortDay(lang.code!, tokenLastUpdatedAt, true, false) : lang('Now'));\n\n  useTimeout(forceUpdate, isLoading ? undefined : OFFLINE_TIMEOUT, [tokenLastUpdatedAt]);\n\n  const initialPrice = useMemo(() => {\n    return history?.find(([, value]) => Boolean(value))?.[1];\n  }, [history]);\n\n  const change = (initialPrice && price) ? price - initialPrice : 0;\n  const amountChange = (initialPrice && tokenChangePrice) ? tokenChangePrice - initialPrice : 0;\n\n  const value = toBig(amount, decimals).mul(price).toString();\n  const changePrefix = change === undefined ? change : change > 0 ? '' : change < 0 ? '' : 0;\n\n  const changeValue = amountChange ? Math.abs(round(amountChange, 4)) : 0;\n  const changePercent = change ? Math.abs(round((change / initialPrice!) * 100, 2)) : 0;\n\n  const withChange = Boolean(change !== undefined);\n  const historyStartDay = history?.length ? new Date(history![0][0] * 1000) : undefined;\n  const withExplorerButton = Boolean(token.cmcSlug || tokenAddress);\n  const shouldHideChartPeriodSwitcher = !history?.length && token.priceUsd === 0;\n\n  const color = useMemo(() => calculateTokenCardColor(token), [token]);\n\n  function renderExplorerLink() {\n    const url = getExplorerTokenUrl(token.chain, token.cmcSlug, tokenAddress, isTestnet);\n    if (!url) return undefined;\n\n    const title = (lang(\n      'Open on %ton_explorer_name%',\n      { ton_explorer_name: getExplorerName(token.chain) },\n    ) as TeactNode[]).join('');\n\n    return (\n      <>\n        {'  '}\n        <a\n          href={url}\n          title={title}\n          aria-label={title}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className={styles.tokenExplorerButton}\n          onClick={handleOpenUrl}\n        >\n          <i className=\"icon-tonexplorer-small\" aria-hidden />\n        </a>\n      </>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.container, styles.tokenCard, classNames, color, 'token-card')}>\n      <div className={styles.tokenInfo}>\n        <Button className={styles.backButton} isSimple onClick={onClose} ariaLabel={lang('Back')}>\n          <i className=\"icon-chevron-left\" aria-hidden />\n        </Button>\n        <img className={styles.tokenLogo} src={logoPath} alt={token.name} />\n        <div className={styles.tokenInfoHeader}>\n          <b className={styles.tokenAmount}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              maskSkin=\"cardLightText\"\n              cols={10}\n              rows={2}\n              cellSize={8}\n            >\n              {formatCurrency(toDecimal(amount, token.decimals), symbol)}\n            </SensitiveData>\n          </b>\n          {withChange && (\n            <div className={styles.tokenValue}>\n              <SensitiveData\n                isActive={isSensitiveDataHidden}\n                maskSkin=\"cardLightText\"\n                align=\"right\"\n                cols={10}\n                rows={2}\n                cellSize={8}\n              >\n                <div className={styles.currencySwitcher} role=\"button\" tabIndex={0} onClick={openCurrencyMenu}>\n                  &thinsp;{formatCurrency(value, currencySymbol, undefined, true)}\n                  <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n                </div>\n                <CurrencySwitcher\n                  isOpen={isCurrencyMenuOpen}\n                  menuPositionHorizontal=\"right\"\n                  excludedCurrency={token.symbol}\n                  onClose={closeCurrencyMenu}\n                  onChange={handleCurrencyChange}\n                />\n              </SensitiveData>\n            </div>\n          )}\n        </div>\n        <div className={styles.tokenInfoSubheader}>\n          <span className={styles.tokenTitle}>\n            <span className={styles.tokenName}>{name}</span>\n            {yieldType && (\n              <span className={styles.apy} onClick={() => onYieldClick(stakingId)}>\n                {yieldType} {annualYield}%\n              </span>\n            )}\n          </span>\n          {withChange && Boolean(changeValue) && (\n            <div className={styles.tokenChange}>\n              {changePrefix}&thinsp;\n              {Math.abs(changePercent)}% \n              <SensitiveData\n                isActive={isSensitiveDataHidden}\n                align=\"right\"\n                maskSkin=\"cardLightText\"\n                cols={6}\n                rows={2}\n                cellSize={8}\n                className={styles.tokenChangeSensitiveData}\n                maskClassName={styles.tokenChangeSpoiler}\n              >\n                {formatCurrency(Math.abs(changeValue), currencySymbol)}\n              </SensitiveData>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <Transition activeKey={!history ? 0 : history.length ? HISTORY_PERIODS.indexOf(period) + 1 : -1} name=\"fade\">\n        {!history ? (\n          <div className={buildClassName(styles.isLoading)}>\n            <Spinner color=\"white\" className={styles.center} />\n          </div>\n        ) : history?.length ? (\n          <>\n            <TokenPriceChart\n              className={styles.chart}\n              imgClassName={styles.chartImg}\n              width={CHART_DIMENSIONS.width}\n              height={CHART_DIMENSIONS.height}\n              prices={history!}\n              selectedIndex={selectedHistoryIndex}\n              onSelectIndex={setSelectedHistoryIndex}\n              isUpdating={isUpdating}\n            />\n\n            <div className={styles.tokenHistoryPrice}>\n              {formatCurrency(history![0][1], currencySymbol, 2, true)}\n              <div className={styles.tokenPriceDate}>{formatShortDay(lang.code!, historyStartDay!)}</div>\n            </div>\n          </>\n        ) : undefined}\n      </Transition>\n\n      <span\n        className={buildClassName(styles.periodChooser, shouldHideChartPeriodSwitcher && styles.periodChooserHidden)}\n        role=\"button\"\n        tabIndex={0}\n        onClick={openHistoryMenu}\n      >\n        {period === 'ALL' ? 'All' : period}\n        <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n        <ChartHistorySwitcher\n          isOpen={isHistoryMenuOpen}\n          onChange={refreshHistory}\n          onClose={closeHistoryMenu}\n        />\n      </span>\n\n      <div className={styles.tokenCurrentPrice}>\n        {formatCurrency(price, currencySymbol, selectedHistoryIndex === -1 ? 2 : 4, true)}\n        <div className={styles.tokenPriceDate}>\n          {dateStr}\n          {withExplorerButton && renderExplorerLink()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global, ownProps): StateProps => {\n    const slug = ownProps.token.slug;\n    const accountState = selectCurrentAccountState(global);\n    const tokenAddress = global.tokenInfo.bySlug[slug]?.tokenAddress;\n    const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n\n    return {\n      isTestnet: global.settings.isTestnet,\n      period: accountState?.currentTokenPeriod,\n      baseCurrency: global.settings.baseCurrency,\n      historyPeriods: global.tokenPriceHistory.bySlug[ownProps.token.slug],\n      tokenAddress,\n      stakingStates,\n      isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n    };\n  })(TokenCard),\n);\n","import type { Ref } from 'react';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { UserToken } from '../../../../global/types';\n\nimport { IS_CORE_WALLET, IS_EXTENSION } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { IS_IOS, IS_SAFARI } from '../../../../util/windowEnvironment';\nimport { calculateFullBalance } from './helpers/calculateFullBalance';\nimport getSensitiveDataMaskSkinFromCardNft from './helpers/getSensitiveDataMaskSkinFromCardNft';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useFlag from '../../../../hooks/useFlag';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\n\nimport MintCardButton from '../../../mintCard/MintCardButton';\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport AccountSelector from './AccountSelector';\nimport CardAddress from './CardAddress';\nimport CurrencySwitcher from './CurrencySwitcher';\nimport CustomCardManager from './CustomCardManager';\nimport TokenCard from './TokenCard';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  ref?: Ref<HTMLDivElement>;\n  forceCloseAccountSelector?: boolean;\n  onTokenCardClose: NoneToVoidFunction;\n  onYieldClick: (stakingId?: string) => void;\n}\n\ninterface StateProps {\n  tokens?: UserToken[];\n  activeDappOrigin?: string;\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  balanceUpdateStartedAt?: number;\n  cardNft?: ApiNft;\n  isSensitiveDataHidden?: true;\n  isNftBuyingDisabled: boolean;\n}\n\nfunction Card({\n  ref,\n  tokens,\n  activeDappOrigin,\n  currentTokenSlug,\n  forceCloseAccountSelector,\n  onTokenCardClose,\n  onYieldClick,\n  baseCurrency,\n  stakingStates,\n  isSensitiveDataHidden,\n  isNftBuyingDisabled,\n  balanceUpdateStartedAt,\n  cardNft,\n}: OwnProps & StateProps) {\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const [customCardClassName, setCustomCardClassName] = useState<string | undefined>(undefined);\n  const [withTextGradient, setWithTextGradient] = useState<boolean>(false);\n  const { isPortrait } = useDeviceScreen();\n\n  const isUpdating = useUpdateIndicator(balanceUpdateStartedAt);\n\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n  const currentToken = useMemo(() => {\n    return tokens ? tokens.find((token) => token.slug === currentTokenSlug) : undefined;\n  }, [currentTokenSlug, tokens]);\n  const renderedToken = useCurrentOrPrev(currentToken, true);\n  const {\n    shouldRender: shouldRenderTokenCard,\n    transitionClassNames: tokenCardTransitionClassNames,\n  } = useShowTransition(Boolean(currentTokenSlug), undefined, true);\n  const sensitiveDataMaskSkin = getSensitiveDataMaskSkinFromCardNft(cardNft);\n\n  const handleCardChange = useLastCallback((hasGradient: boolean, className?: string) => {\n    setCustomCardClassName(className);\n    setWithTextGradient(hasGradient);\n  });\n\n  const dappDomain = useMemo(() => {\n    if (!activeDappOrigin) {\n      return undefined;\n    }\n\n    let value: string | undefined;\n    try {\n      value = new URL(activeDappOrigin).hostname;\n    } catch (err) {\n      value = shortenAddress(activeDappOrigin);\n    }\n\n    return value;\n  }, [activeDappOrigin]);\n  const renderingDappDomain = useCurrentOrPrev(dappDomain, true);\n\n  const values = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n\n  const {\n    shouldRender: shouldRenderDappElement,\n    transitionClassNames: dappClassNames,\n  } = useShowTransition(Boolean(dappDomain));\n\n  const shouldRenderDapp = IS_EXTENSION && shouldRenderDappElement;\n\n  useHistoryBack({\n    isActive: Boolean(currentTokenSlug),\n    onBack: onTokenCardClose,\n  });\n\n  useEffect(\n    () => (shouldRenderTokenCard ? captureEscKeyListener(onTokenCardClose) : undefined),\n    [shouldRenderTokenCard, onTokenCardClose],\n  );\n\n  const {\n    primaryValue, primaryWholePart, primaryFractionPart, changeClassName, changePrefix, changePercent, changeValue,\n  } = values || {};\n\n  function renderLoader() {\n    return (\n      <div className={buildClassName(styles.isLoading)}>\n        <Spinner color=\"white\" className={styles.center} />\n      </div>\n    );\n  }\n\n  function renderBalance() {\n    const iconCaretClassNames = buildClassName(\n      'icon',\n      'icon-caret-down',\n      primaryFractionPart || shortBaseSymbol.length > 1 ? styles.iconCaretFraction : styles.iconCaret,\n    );\n    const noAnimationCounter = !isUpdating || IS_SAFARI || IS_IOS;\n    return (\n      <>\n        <Transition\n          activeKey={isUpdating && !isSensitiveDataHidden ? 1 : 0}\n          name=\"fade\"\n          shouldCleanup\n          className={styles.balanceTransition}\n        >\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            maskSkin={sensitiveDataMaskSkin}\n            rows={3}\n            cols={14}\n            cellSize={13.33}\n            maskClassName={styles.blurred}\n          >\n            <div className={buildClassName(styles.primaryValue, 'rounded-font')}>\n              <span\n                className={buildClassName(\n                  styles.currencySwitcher,\n                  isUpdating && 'glare-text',\n                  !isUpdating && withTextGradient && 'gradientText',\n                )}\n                role=\"button\"\n                tabIndex={0}\n                onClick={openCurrencyMenu}\n              >\n                {shortBaseSymbol.length === 1 && shortBaseSymbol}\n                <AnimatedCounter isDisabled={noAnimationCounter} text={primaryWholePart ?? ''} />\n                {primaryFractionPart && (\n                  <span className={styles.primaryFractionPart}>\n                    <AnimatedCounter isDisabled={noAnimationCounter} text={`.${primaryFractionPart}`} />\n                  </span>\n                )}\n                {shortBaseSymbol.length > 1 && (\n                  <span className={styles.primaryFractionPart}>\n                &nbsp;{shortBaseSymbol}\n                  </span>\n                )}\n                <i className={iconCaretClassNames} aria-hidden />\n              </span>\n            </div>\n          </SensitiveData>\n        </Transition>\n        <CurrencySwitcher isOpen={isCurrencyMenuOpen} onClose={closeCurrencyMenu} />\n        {primaryValue !== '0' && (\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            maskSkin={sensitiveDataMaskSkin}\n            rows={2}\n            cols={11}\n            cellSize={12}\n            className={styles.changeSpoiler}\n            maskClassName={styles.blurred}\n          >\n            <div className={buildClassName(styles.change, changeClassName, 'rounded-font')}>\n              {changePrefix}\n            &thinsp;\n              <AnimatedCounter text={`${Math.abs(changePercent!)}%`} />\n              {'  '}\n              <AnimatedCounter text={formatCurrency(Math.abs(changeValue!), shortBaseSymbol)} />\n            </div>\n          </SensitiveData>\n        )}\n      </>\n    );\n  }\n\n  return (\n    <div ref={ref} className={styles.containerWrapper}>\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"fade\" shouldCleanup className={styles.loadingDotsContainer}>\n        {isUpdating ? <LoadingDots isActive isDoubled /> : undefined}\n      </Transition>\n\n      <div className={buildClassName(styles.container, currentTokenSlug && styles.backstage, customCardClassName)}>\n        <CustomCardManager nft={cardNft} onCardChange={handleCardChange} />\n\n        <div className={buildClassName(styles.containerInner, customCardClassName)}>\n          <AccountSelector\n            withAccountSelector={!IS_CORE_WALLET}\n            noSettingsButton={isPortrait}\n            accountClassName={buildClassName(withTextGradient && 'gradientText')}\n            forceClose={forceCloseAccountSelector}\n            canEdit={!IS_CORE_WALLET}\n          />\n          {shouldRenderDapp && (\n            <div className={buildClassName(styles.dapp, dappClassNames)}>\n              <i className={buildClassName(styles.dappIcon, 'icon-laptop')} aria-hidden />\n              {renderingDappDomain}\n            </div>\n          )}\n          {values ? renderBalance() : renderLoader()}\n          <CardAddress withTextGradient={withTextGradient} />\n          {!IS_CORE_WALLET && !isNftBuyingDisabled && <MintCardButton />}\n        </div>\n      </div>\n\n      {shouldRenderTokenCard && (\n        <TokenCard\n          token={renderedToken!}\n          classNames={tokenCardTransitionClassNames}\n          isUpdating={isUpdating}\n          onYieldClick={onYieldClick}\n          onClose={onTokenCardClose}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectCurrentAccountState(global);\n      const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n      const { cardBackgroundNft: cardNft } = selectCurrentAccountSettings(global) || {};\n\n      return {\n        tokens: selectCurrentAccountTokens(global),\n        activeDappOrigin: accountState?.activeDappOrigin,\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        stakingStates,\n        balanceUpdateStartedAt: global.balanceUpdateStartedAt,\n        cardNft,\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        isNftBuyingDisabled: global.restrictions.isNftBuyingDisabled,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Card),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"d8E3jNRv\",\"background\":\"sWp81HgH\",\"noNoise\":\"MHtSlPVW\",\"content\":\"duM9JHY8\",\"account\":\"NEB0Tl4P\",\"menuButton\":\"ucgPS0OB\",\"balance\":\"EDIvoE0D\",\"balanceFractionPart\":\"kBYrVlBo\",\"iconCaret\":\"EDC1Bcor\",\"iconCaretFraction\":\"uTPq0gij\",\"currencySwitcher\":\"JdDnaL44\",\"darkText\":\"raaB0_Hf\",\"lightText\":\"p4Ksvslm\",\"cardBackground\":\"NxJpWlzN\"};","import React, { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { UserToken } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountSettings,\n  selectCurrentAccountTokens,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { IS_ELECTRON, IS_MAC_OS } from '../../../../util/windowEnvironment';\nimport { calculateFullBalance } from './helpers/calculateFullBalance';\nimport getSensitiveDataMaskSkinFromCardNft from './helpers/getSensitiveDataMaskSkinFromCardNft';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport SensitiveData from '../../../ui/SensitiveData';\nimport AccountSelector from './AccountSelector';\nimport CurrencySwitcher from './CurrencySwitcher';\nimport CustomCardManager from './CustomCardManager';\n\nimport styles from './StickyCard.module.scss';\n\ninterface OwnProps {\n  classNames?: string;\n}\n\ninterface StateProps {\n  tokens?: UserToken[];\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  cardNft?: ApiNft;\n  isSensitiveDataHidden?: true;\n}\n\nfunction StickyCard({\n  classNames,\n  tokens,\n  baseCurrency,\n  stakingStates,\n  cardNft,\n  isSensitiveDataHidden,\n}: OwnProps & StateProps) {\n  const [customCardClassName, setCustomCardClassName] = useState<string | undefined>(undefined);\n  const [withTextGradient, setWithTextGradient] = useState<boolean>(false);\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n\n  const values = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n\n  const handleCardChange = useLastCallback((hasGradient: boolean, className?: string) => {\n    setCustomCardClassName(className);\n    setWithTextGradient(hasGradient);\n  });\n\n  const sensitiveDataMaskSkin = getSensitiveDataMaskSkinFromCardNft(cardNft);\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const { primaryWholePart, primaryFractionPart } = values || {};\n\n  const iconCaretClassNames = buildClassName(\n    'icon',\n    'icon-caret-down',\n    styles.iconCaret,\n    primaryFractionPart && styles.iconCaretFraction,\n  );\n\n  return (\n    <div className={styles.root}>\n      <div className={buildClassName(styles.background, cardNft && styles.noNoise, classNames)}>\n        {!IS_CORE_WALLET && (<CustomCardManager isSticky nft={cardNft} onCardChange={handleCardChange} />)}\n        <div className={buildClassName(styles.content, customCardClassName)}>\n          <AccountSelector\n            isInsideSticky\n            accountClassName={buildClassName(styles.account, withTextGradient && 'gradientText')}\n            accountSelectorClassName=\"sticky-card-account-selector\"\n            menuButtonClassName={styles.menuButton}\n            noSettingsButton\n            withAccountSelector={!(IS_ELECTRON && IS_MAC_OS) && !IS_CORE_WALLET}\n          />\n          <div className={styles.balance}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              shouldHoldSize\n              align=\"center\"\n              maskSkin={sensitiveDataMaskSkin}\n              cols={10}\n              rows={2}\n              cellSize={9.5}\n            >\n              <span\n                role=\"button\"\n                tabIndex={0}\n                className={buildClassName(styles.currencySwitcher, withTextGradient && 'gradientText')}\n                onClick={openCurrencyMenu}\n              >\n                {shortBaseSymbol.length === 1 && shortBaseSymbol}\n                {primaryWholePart}\n                {primaryFractionPart && <span className={styles.balanceFractionPart}>.{primaryFractionPart}</span>}\n                {shortBaseSymbol.length > 1 && (\n                  <span className={styles.balanceFractionPart}>&nbsp;{shortBaseSymbol}</span>\n                )}\n                <i className={iconCaretClassNames} aria-hidden />\n              </span>\n              <CurrencySwitcher isOpen={isCurrencyMenuOpen} onClose={closeCurrencyMenu} />\n            </SensitiveData>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const { cardBackgroundNft: cardNft } = selectCurrentAccountSettings(global) || {};\n      const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n\n      return {\n        tokens: selectCurrentAccountTokens(global),\n        baseCurrency: global.settings.baseCurrency,\n        cardNft,\n        stakingStates,\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(StickyCard),\n);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n}\n\nfunction HideNftModal({\n  isOpen,\n  selectedNftsToHide,\n}: OwnProps) {\n  const {\n    addNftsToBlacklist,\n    closeNftCollection,\n    closeHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleHide = useLastCallback(() => {\n    addNftsToBlacklist({\n      addresses: selectedNftsToHide!.addresses,\n    });\n    if (selectedNftsToHide?.isCollection) closeNftCollection();\n    closeHideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeHideNftModal}\n      title={lang('Hide NFTs')}\n    >\n      <p className={modalStyles.text}>\n        {\n          selectedNftsToHide?.isCollection\n            ? lang(\n              'Are you sure you want to hide this NFT collection containing %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n            : lang(\n              'Are you sure you want to hide these %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n        }\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeHideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleHide} className={modalStyles.button}>\n          {lang('Hide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(HideNftModal);\n","import { useRef } from '../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../global/types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\nimport useForceUpdate from './useForceUpdate';\nimport useLastCallback from './useLastCallback';\nimport usePrevious from './usePrevious';\nimport usePrevious2 from './usePrevious2';\nimport useSyncEffect from './useSyncEffect';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype ResetScroll = () => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n  slug?: string,\n  isActive?: boolean,\n  withResetOnInactive = false,\n): [ListId[]?, GetMore?, ResetScroll?] => {\n  const requestParamsRef = useRef<{\n    direction?: LoadMoreDirection;\n    offsetId?: ListId;\n  }>();\n\n  const currentStateRef = useRef<{ viewportIds: ListId[]; isOnTop: boolean } | undefined>();\n  if (!currentStateRef.current && listIds && !isDisabled) {\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n  }\n\n  const forceUpdate = useForceUpdate();\n\n  if (isDisabled) {\n    requestParamsRef.current = {};\n  }\n\n  const prevSlug = usePrevious2(slug);\n\n  const resetScroll: ResetScroll = useLastCallback(() => {\n    if (!listIds?.length) return;\n\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n    requestParamsRef.current = {};\n  });\n\n  useSyncEffect(() => {\n    if (slug !== prevSlug || (withResetOnInactive && !isActive)) {\n      resetScroll();\n    }\n  }, [isActive, prevSlug, slug, withResetOnInactive]);\n\n  const prevListIds = usePrevious(listIds);\n  const prevIsDisabled = usePrevious(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { viewportIds, isOnTop } = currentStateRef.current || {};\n    const currentMiddleId = viewportIds && !isOnTop ? viewportIds[Math.round(viewportIds.length / 2)] : undefined;\n    const defaultOffsetId = currentMiddleId && listIds.includes(currentMiddleId) ? currentMiddleId : listIds[0];\n    const { offsetId = defaultOffsetId, direction = LoadMoreDirection.Forwards } = requestParamsRef.current || {};\n    const { newViewportIds, newIsOnTop } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    requestParamsRef.current = {};\n\n    if (!viewportIds || !areSortedArraysEqual(viewportIds, newViewportIds)) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n    }\n  } else if (!listIds) {\n    currentStateRef.current = undefined;\n  }\n\n  const getMore: GetMore = useLastCallback(({\n    direction,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    if (!isActive) return;\n\n    const { viewportIds } = currentStateRef.current || {};\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    requestParamsRef.current = { direction, offsetId };\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal, newIsOnTop,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      loadMoreBackwards({ offsetId });\n    }\n  });\n\n  return isDisabled ? [listIds] : [currentStateRef.current?.viewportIds, getMore, resetScroll];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection >= 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return {\n    newViewportIds,\n    areSomeLocal,\n    areAllLocal,\n    newIsOnTop: newViewportIds[0] === sourceIds[0],\n  };\n}\n\nexport default useInfiniteScroll;\n","import type { RefObject, UIEvent } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../../global/types';\n\nimport { requestForcedReflow } from '../../lib/fasterdom/fasterdom';\nimport buildStyle from '../../util/buildStyle';\nimport { SECOND } from '../../util/dateFormat';\nimport resetScroll from '../../util/resetScroll';\nimport { debounce } from '../../util/schedulers';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLayoutEffectWithPrevDeps from '../../hooks/useLayoutEffectWithPrevDeps';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLDivElement>;\n  style?: string;\n  className?: string;\n  items?: any[];\n  itemSelector?: string;\n  preloadBackwards?: number;\n  sensitiveArea?: number;\n  withAbsolutePositioning?: boolean;\n  maxHeight?: number;\n  noScrollRestore?: boolean;\n  noScrollRestoreOnTop?: boolean;\n  noFastList?: boolean;\n  cacheBuster?: any;\n  beforeChildren?: React.ReactNode;\n  scrollContainerClosest?: string;\n  children: React.ReactNode;\n  onLoadMore?: ({ direction }: { direction: LoadMoreDirection }) => void;\n  onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n  onWheel?: (e: React.WheelEvent<HTMLDivElement>) => void;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  onKeyDown?: (e: React.KeyboardEvent<any>) => void;\n  onDragOver?: (e: React.DragEvent<HTMLDivElement>) => void;\n  onDragLeave?: (e: React.DragEvent<HTMLDivElement>) => void;\n};\n\nconst DEFAULT_LIST_SELECTOR = '.ListItem';\nconst DEFAULT_PRELOAD_BACKWARDS = 20;\nconst DEFAULT_SENSITIVE_AREA = 800;\n\nconst InfiniteScroll: FC<OwnProps> = ({\n  ref,\n  style,\n  className,\n  items,\n  itemSelector = DEFAULT_LIST_SELECTOR,\n  preloadBackwards = DEFAULT_PRELOAD_BACKWARDS,\n  sensitiveArea = DEFAULT_SENSITIVE_AREA,\n  withAbsolutePositioning,\n  maxHeight,\n  // Used to turn off restoring scroll position (e.g. for frequently re-ordered chat or user lists)\n  noScrollRestore = false,\n  noScrollRestoreOnTop = false,\n  noFastList,\n  // Used to re-query `listItemElements` if rendering is delayed by transition\n  cacheBuster,\n  beforeChildren,\n  scrollContainerClosest,\n  children,\n  onLoadMore,\n  onScroll,\n  onWheel,\n  onClick,\n  onKeyDown,\n  onDragOver,\n  onDragLeave,\n}: OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const stateRef = useRef<{\n    listItemElements?: NodeListOf<HTMLDivElement>;\n    isScrollTopJustUpdated?: boolean;\n    currentAnchor?: HTMLDivElement | undefined;\n    currentAnchorTop?: number;\n  }>({});\n\n  const [loadMoreBackwards, loadMoreForwards] = useMemo(() => {\n    if (!onLoadMore) {\n      return [];\n    }\n\n    return [\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Backwards });\n      }, SECOND, true, false),\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Forwards });\n      }, SECOND, true, false),\n    ];\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [onLoadMore, items]);\n\n  // Initial preload\n  useEffect(() => {\n    if (!loadMoreBackwards) {\n      return;\n    }\n\n    if (preloadBackwards > 0 && (!items || items.length < preloadBackwards)) {\n      loadMoreBackwards();\n      return;\n    }\n\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n\n    const { scrollHeight, clientHeight } = scrollContainer;\n    if (clientHeight && scrollHeight <= clientHeight) {\n      loadMoreBackwards();\n    }\n  }, [items, loadMoreBackwards, preloadBackwards, scrollContainerClosest]);\n\n  // Restore `scrollTop` after adding items\n  useLayoutEffectWithPrevDeps(([prevItems]) => {\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n    const state = stateRef.current;\n\n    const listItemElements = scrollContainer.querySelectorAll<HTMLDivElement>(itemSelector);\n    state.listItemElements = listItemElements;\n\n    if (!prevItems?.length) return;\n\n    requestForcedReflow(() => {\n      let newScrollTop: number;\n\n      if (state.currentAnchor && Array.from(listItemElements).includes(state.currentAnchor)) {\n        const { scrollTop } = scrollContainer;\n        const newAnchorTop = state.currentAnchor!.getBoundingClientRect().top;\n        newScrollTop = scrollTop + (newAnchorTop - state.currentAnchorTop!);\n      } else {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          state.currentAnchor = nextAnchor;\n          state.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n        }\n      }\n\n      if (withAbsolutePositioning || noScrollRestore) {\n        return undefined;\n      }\n\n      const { scrollTop } = scrollContainer;\n      if (noScrollRestoreOnTop && scrollTop === 0) {\n        return undefined;\n      }\n\n      return () => {\n        resetScroll(scrollContainer, newScrollTop);\n\n        state.isScrollTopJustUpdated = true;\n      };\n    });\n  }, [\n    items, itemSelector, noScrollRestore, noScrollRestoreOnTop, cacheBuster, withAbsolutePositioning,\n    scrollContainerClosest,\n  ]);\n\n  const handleScroll = useLastCallback((e: UIEvent<HTMLDivElement>) => {\n    if (loadMoreForwards && loadMoreBackwards) {\n      const {\n        isScrollTopJustUpdated, currentAnchor, currentAnchorTop,\n      } = stateRef.current;\n      const listItemElements = stateRef.current.listItemElements!;\n\n      if (isScrollTopJustUpdated) {\n        stateRef.current.isScrollTopJustUpdated = false;\n        return;\n      }\n\n      const listLength = listItemElements.length;\n      const scrollContainer = scrollContainerClosest\n        ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n        : containerRef.current!;\n      const { scrollTop, scrollHeight, offsetHeight } = scrollContainer;\n      const top = listLength ? listItemElements[0].offsetTop : 0;\n      const isNearTop = scrollTop <= top + sensitiveArea;\n      const bottom = listLength\n        ? listItemElements[listLength - 1].offsetTop + listItemElements[listLength - 1].offsetHeight\n        : scrollHeight;\n      const isNearBottom = bottom - (scrollTop + offsetHeight) <= sensitiveArea;\n      let isUpdated = false;\n\n      if (isNearTop) {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingUp = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop > currentAnchorTop\n          );\n\n          if (isMovingUp) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreForwards();\n          }\n        }\n      }\n\n      if (isNearBottom) {\n        const nextAnchor = listItemElements[listLength - 1];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingDown = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop < currentAnchorTop\n          );\n\n          if (isMovingDown) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreBackwards();\n          }\n        }\n      }\n\n      if (!isUpdated) {\n        if (currentAnchor?.offsetParent) {\n          stateRef.current.currentAnchorTop = currentAnchor.getBoundingClientRect().top;\n        } else {\n          const nextAnchor = listItemElements[0];\n\n          if (nextAnchor) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n          }\n        }\n      }\n    }\n\n    if (onScroll) {\n      onScroll(e);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (!scrollContainerClosest) return undefined;\n\n    const closestScrollContainer = containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer) return undefined;\n\n    const handleNativeScroll = (e: Event) => handleScroll(e as unknown as UIEvent<HTMLDivElement>);\n\n    closestScrollContainer.addEventListener('scroll', handleNativeScroll);\n\n    return () => {\n      closestScrollContainer.removeEventListener('scroll', handleNativeScroll);\n    };\n  }, [handleScroll, scrollContainerClosest]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      onScroll={handleScroll}\n      onWheel={onWheel}\n      teactFastList={!noFastList && !withAbsolutePositioning}\n      onKeyDown={onKeyDown}\n      onDragOver={onDragOver}\n      onDragLeave={onDragLeave}\n      onClick={onClick}\n      style={style}\n    >\n      {beforeChildren}\n      {withAbsolutePositioning && items?.length ? (\n        <div\n          teactFastList={!noFastList}\n          style={buildStyle('position: relative', IS_ANDROID && `height: ${maxHeight}px`)}\n        >\n          {children}\n        </div>\n      ) : children}\n    </div>\n  );\n};\n\nexport default InfiniteScroll;\n","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import { IS_IOS } from './windowEnvironment';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\nexport default resetScroll;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"k3PjQTgC\",\"panel\":\"ZX_ET6v1\",\"emptyList\":\"y3OrMGkQ\",\"text\":\"W7PJUQAi\",\"header\":\"vhx2gdHr\",\"description\":\"iQxbUd1C\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, ANIMATED_STICKER_SMALL_SIZE_PX } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\n\nimport styles from './NewWalletGreeting.module.scss';\n\ninterface Props {\n  isActive?: boolean;\n  isMutlichainAccount?: boolean;\n  mode: 'panel' | 'emptyList';\n}\n\nfunction NewWalletGreeting({ isActive, isMutlichainAccount, mode }: Props) {\n  const lang = useLang();\n\n  return (\n    <div className={buildClassName(styles.container, styles[mode])}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n        size={mode === 'emptyList' ? ANIMATED_STICKER_BIG_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n      />\n\n      <div className={styles.text}>\n        <p className={styles.header}>\n          {lang(isMutlichainAccount\n            ? 'You have just created a new multichain wallet'\n            : 'You have just created a new wallet')}\n        </p>\n        <p className={styles.description}>\n          {lang(\n            isMutlichainAccount\n              ? 'Now you can transfer tokens from your TON and TRON wallets.'\n              : 'You can now transfer your tokens from another wallet or exchange.',\n          )}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(NewWalletGreeting);\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"dtfXKrc1\",\"active\":\"s5rKiBWU\",\"itemLast\":\"Lj95SXyq\",\"icon\":\"_ICqu0z2\",\"iconSwap\":\"FyZFW3rR\",\"iconFromToken\":\"Asq4Q63m\",\"iconToToken\":\"pQba4LaN\",\"iconWaiting\":\"sjVip3sq\",\"iconError\":\"mGFBcSmx\",\"header\":\"ysalRrTJ\",\"subheader\":\"mn7fmzAk\",\"operationName\":\"cQDrPzK7\",\"address\":\"Rymf6Lfn\",\"amount\":\"SFuQDDGL\",\"addressValue\":\"eBNgO37m\",\"chainIcon\":\"taalmW1o\",\"commentIcon\":\"axmClUqA\",\"comment\":\"m3tsD5Lh\",\"scamImage\":\"TqSKLa3F\",\"swapAmount\":\"enfXRStc\",\"swapArrowRight\":\"ZcG2fXCw\",\"swapSell\":\"tnzn3bEs\",\"swapBuy\":\"Q2WugE4t\",\"swapHold\":\"LuAdiHBF\",\"swapError\":\"XhetBWmN\",\"isSwapErrorMessage\":\"shgP3pO5\",\"nft\":\"ak_LCBLa\",\"nonInteractive\":\"VYPqbBxQ\",\"nftImage\":\"sjeAoWgh\",\"nftData\":\"qHIX_uIs\",\"nftName\":\"eCN9f1Sr\",\"nftCollection\":\"EoWXh7mx\",\"colorPositive\":\"VizBDkzf\",\"colorNegative\":\"Oy9tOgXm\",\"received\":\"x4oZwp8K\",\"nftWithComment\":\"KZh31z_P\",\"colorStake\":\"BmmX90To\",\"takesAddressSpace\":\"kKU1dGwT\"};","import type { Ref, RefObject } from 'react';\nimport type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../../api/types';\nimport type { Account, AppTheme } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, TONCOIN, WHOLE_PART_DELIMITER } from '../../../../config';\nimport { getIsInternalSwap, resolveSwapAsset } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../../util/formatNumber';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport getSwapRate from '../../../../util/swap/getSwapRate';\nimport { REM } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\n\nimport styles from './Transaction.module.scss';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug?: Record<string, ApiSwapAsset>;\n  isLast: boolean;\n  activity: ApiSwapActivity;\n  isActive: boolean;\n  appTheme: AppTheme;\n  addressByChain?: Account['addressByChain'];\n  isSensitiveDataHidden?: true;\n  onClick: (id: string) => void;\n};\n\nconst SWAP_HEIGHT = 4 * REM;\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending', 'hold']);\nconst CHANGELLY_EXPIRED_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['expired', 'failed']);\n\nfunction Swap({\n  ref,\n  tokensBySlug,\n  activity,\n  isLast,\n  isActive,\n  appTheme,\n  addressByChain,\n  isSensitiveDataHidden,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  const {\n    id,\n    timestamp,\n    status,\n    from,\n    to,\n    cex,\n  } = activity;\n\n  const fromToken = useMemo(() => {\n    if (!from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, from);\n  }, [from, tokensBySlug]);\n  const toToken = useMemo(() => {\n    if (!to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, to);\n  }, [to, tokensBySlug]);\n\n  const fromAmount = Number(activity.fromAmount);\n  const toAmount = Number(activity.toAmount);\n  const isPending = status === 'pending'\n    || CHANGELLY_PENDING_STATUSES.has(cex?.status ?? '');\n  const isError = ONCHAIN_ERROR_STATUSES.has(status)\n    || CHANGELLY_EXPIRED_STATUSES.has(cex?.status ?? '');\n  const isHold = cex?.status === 'hold';\n  const amountCols = useMemo(() => getPseudoRandomNumber(5, 13, timestamp.toString()), [timestamp]);\n\n  const isFromToncoin = from === TONCOIN.slug;\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken,\n    to: toToken,\n    toAddress: cex?.payoutAddress,\n    addressByChain,\n  });\n\n  const handleClick = useLastCallback(() => {\n    onClick(id);\n  });\n\n  function renderIcon() {\n    return (\n      <div className={buildClassName(styles.icon, styles.iconSwap)} aria-hidden>\n        {fromToken && <TokenIcon token={fromToken} size=\"x-middle\" className={styles.iconFromToken} />}\n        {toToken && <TokenIcon token={toToken} size=\"x-middle\" className={styles.iconToToken} />}\n        {isPending && (\n          <AnimatedIconWithPreview\n            play\n            size={ANIMATED_STICKER_TINY_ICON_PX}\n            className={styles.iconWaiting}\n            nonInteractive\n            noLoop={false}\n            forceOnHeavyAnimation\n            tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n            previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n          />\n        )}\n        {isError && <i className={buildClassName(styles.iconError, 'icon-close-filled')} aria-hidden />}\n      </div>\n    );\n  }\n\n  function renderAmount() {\n    const statusClass = buildClassName(isError && styles.swapError, isHold && styles.swapHold);\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={amountCols}\n        rows={2}\n        cellSize={8}\n        align=\"right\"\n        contentClassName={buildClassName(styles.amount, styles.swapAmount)}\n      >\n        <span className={buildClassName(styles.swapSell, statusClass)}>\n          {formatCurrencyExtended(\n            Math.abs(fromAmount),\n            fromToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n        <i\n          className={buildClassName(styles.swapArrowRight, 'icon-chevron-right', statusClass)}\n          aria-hidden\n        />\n        <span className={buildClassName(styles.swapBuy, statusClass)}>\n          {formatCurrencyExtended(\n            Math.abs(toAmount),\n            toToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n      </SensitiveData>\n    );\n  }\n\n  function renderErrorMessage() {\n    const date: string | TeactNode[] = formatTime(timestamp);\n    let state = '';\n    const cexStatus = cex?.status;\n\n    if (cexStatus === 'expired' || cexStatus === 'overdue') {\n      state = lang('Expired');\n    } else if (cexStatus === 'refunded') {\n      state = lang('Refunded');\n    } else if (cexStatus === 'hold') {\n      state = lang('On Hold');\n    } else if (cexStatus === 'failed' || isError) {\n      state = lang('Failed');\n    } else if (cexStatus === 'waiting' && !isFromToncoin && !isInternalSwap) {\n      // Skip the 'waiting' status for transactions from Toncoin to account or from Tron to Ton\n      // inside the multichain wallet for delayed status updates from hangelly\n      state = lang('Waiting for Payment');\n    } else if (isPending) {\n      state = lang('In Progress');\n    }\n\n    return (\n      <div className={buildClassName(isError && styles.isSwapErrorMessage)}>\n        {date}{state ? `${WHOLE_PART_DELIMITER}${WHOLE_PART_DELIMITER}${state}` : ''}\n      </div>\n    );\n  }\n\n  function renderTitle() {\n    if (isHold || isError) {\n      return lang('SwapTitle');\n    } else if (isPending) {\n      return lang('Swapping');\n    }\n\n    return lang('Swapped');\n  }\n\n  function renderCurrency() {\n    const rate = getSwapRate(activity.fromAmount, activity.toAmount, fromToken, toToken);\n\n    if (!rate) return undefined;\n\n    const [priceWhole, priceFraction] = rate.price.split('.');\n\n    return (\n      <span className={styles.address}>\n        {rate.firstCurrencySymbol}{'  '}\n        <span className={styles.addressValue}>\n          {priceWhole}\n          <small>.{priceFraction}{' '}{rate.secondCurrencySymbol}</small>\n        </span>\n      </span>\n    );\n  }\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      key={id}\n      className={buildClassName(\n        styles.item,\n        isLast && styles.itemLast,\n        isActive && styles.active,\n      )}\n      onClick={handleClick}\n      isSimple\n    >\n      {renderIcon()}\n      <div className={styles.header}>\n        <div className={styles.operationName}>\n          {renderTitle()}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {renderErrorMessage()}\n        {renderCurrency()}\n      </div>\n    </Button>\n  );\n}\n\nexport default memo(Swap);\n\nexport function getSwapHeight() {\n  return SWAP_HEIGHT;\n}\n","import type { Ref, RefObject } from 'react';\nimport type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { ApiTokenWithPrice, ApiTransactionActivity, ApiYieldType } from '../../../../api/types';\nimport type { AppTheme, SavedAddress } from '../../../../global/types';\nimport { MediaType } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, FRACTION_DIGITS, TONCOIN, TRANSACTION_ADDRESS_SHIFT } from '../../../../config';\nimport {\n  DNS_TRANSACTION_TYPES,\n  getIsTxIdLocal,\n  getTransactionAmountDisplayMode,\n  getTransactionTitle,\n  isScamTransaction, shouldShowTransactionAddress,\n  shouldShowTransactionComment,\n  STAKING_TRANSACTION_TYPES,\n} from '../../../../util/activities';\nimport { bigintAbs } from '../../../../util/bigint';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { formatCurrencyExtended } from '../../../../util/formatNumber';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { REM } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\n\nimport styles from './Transaction.module.scss';\n\nimport scamImg from '../../../../assets/scam.svg';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  transaction: ApiTransactionActivity;\n  isLast: boolean;\n  isActive: boolean;\n  withChainIcon?: boolean;\n  annualYield: number;\n  yieldType?: ApiYieldType;\n  appTheme: AppTheme;\n  savedAddresses?: SavedAddress[];\n  doesNftExist?: boolean;\n  isSensitiveDataHidden?: true;\n  onClick: (id: string) => void;\n};\n\nconst TRANSACTION_HEIGHT = 4 * REM;\nconst NFT_EXTRA_HEIGHT = 3.875 * REM;\nconst COMMENT_EXTRA_HEIGHT = 2.375 * REM;\nconst ADDRESS_RELEASE_HEIGHT = 1.25 * REM;\n\nfunction Transaction({\n  ref,\n  tokensBySlug,\n  transaction,\n  isActive,\n  annualYield,\n  yieldType,\n  savedAddresses,\n  isLast,\n  appTheme,\n  withChainIcon,\n  doesNftExist,\n  isSensitiveDataHidden,\n  onClick,\n}: OwnProps) {\n  const { openMediaViewer } = getActions();\n  const lang = useLang();\n\n  const {\n    txId,\n    amount,\n    fromAddress,\n    toAddress,\n    timestamp,\n    comment,\n    encryptedComment,\n    isIncoming,\n    type,\n    metadata,\n    slug,\n    nft,\n  } = transaction;\n\n  const isStake = type === 'stake';\n  const isStaking = STAKING_TRANSACTION_TYPES.has(type);\n  const isDnsOperation = DNS_TRANSACTION_TYPES.has(type);\n\n  const token = tokensBySlug?.[slug];\n  const { chain } = token || {};\n  const address = isIncoming ? fromAddress : toAddress;\n  const savedAddressName = useMemo(() => {\n    return address && chain && savedAddresses?.find((item) => item.address === address && item.chain === chain)?.name;\n  }, [address, chain, savedAddresses]);\n  const addressName = savedAddressName || metadata?.name;\n  const isLocal = getIsTxIdLocal(txId);\n  const amountCols = useMemo(() => getPseudoRandomNumber(5, 13, timestamp.toString()), [timestamp]);\n  const doAttachmentsTakeAddressSpace = shouldGiveAddressSpaceToAttachment(transaction);\n\n  let operationColorClass: string | undefined;\n  let waitingIconName: keyof typeof ANIMATED_STICKERS_PATHS.light.preview = 'iconClockGray';\n  if (type === 'burn') {\n    operationColorClass = styles.colorNegative;\n    waitingIconName = 'iconClockRed';\n  } else if (isIncoming) {\n    operationColorClass = styles.colorPositive;\n    waitingIconName = 'iconClockGreen';\n  } else if (isStake) {\n    operationColorClass = styles.colorStake;\n    waitingIconName = 'iconClockPurpleWhite';\n  }\n\n  const handleClick = useLastCallback(() => {\n    onClick(txId);\n  });\n\n  const handleNftClick = useLastCallback((event: React.MouseEvent) => {\n    event.stopPropagation();\n    openMediaViewer({ mediaId: nft!.address, mediaType: MediaType.Nft, txId });\n  });\n\n  function renderNft() {\n    return (\n      <div\n        className={buildClassName(\n          styles.nft,\n          !doesNftExist && styles.nonInteractive,\n          isIncoming && styles.received,\n          comment && styles.nftWithComment,\n          operationColorClass,\n          doAttachmentsTakeAddressSpace && styles.takesAddressSpace,\n          'transaction-nft',\n        )}\n        onClick={doesNftExist ? handleNftClick : undefined}\n        data-nft-address={nft?.address}\n        data-tx-id={txId}\n      >\n        <img src={nft!.thumbnail} alt={nft!.name} className={styles.nftImage} />\n        <div className={styles.nftData}>\n          <div className={styles.nftName}>{nft!.name}</div>\n          <div className={styles.nftCollection}>{nft!.collectionName}</div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderComment() {\n    const className = buildClassName(\n      styles.comment,\n      isIncoming && styles.received,\n      operationColorClass,\n      doAttachmentsTakeAddressSpace && styles.takesAddressSpace,\n    );\n\n    return (\n      <div className={className}>\n        {encryptedComment && <i className={buildClassName(styles.commentIcon, 'icon-lock')} aria-hidden />}\n        {encryptedComment ? <i>{lang('Encrypted Message')}</i> : comment}\n      </div>\n    );\n  }\n\n  function renderIcon() {\n    let iconName: string;\n    if (isStaking) {\n      iconName = 'icon-earn';\n    } else if (type === 'callContract' || type === 'contractDeploy') {\n      iconName = 'icon-cog';\n    } else if (isDnsOperation) {\n      iconName = 'icon-globe-alt';\n    } else if (type === 'mint') {\n      iconName = 'icon-magic-wand';\n    } else if (type === 'burn') {\n      iconName = 'icon-fire';\n    } else if (type === 'auctionBid') {\n      iconName = 'icon-auction-alt';\n    } else if (type === 'liquidityDeposit') {\n      iconName = 'icon-can-in';\n    } else if (type === 'liquidityWithdraw') {\n      iconName = 'icon-can-out';\n    } else if (isIncoming) {\n      iconName = 'icon-receive-alt';\n    } else {\n      iconName = 'icon-send-alt';\n    }\n\n    return (\n      <i className={buildClassName(styles.icon, iconName, operationColorClass)} aria-hidden>\n        {isLocal && (\n          <AnimatedIconWithPreview\n            play\n            size={ANIMATED_STICKER_TINY_ICON_PX}\n            className={styles.iconWaiting}\n            nonInteractive\n            noLoop={false}\n            forceOnHeavyAnimation\n            tgsUrl={ANIMATED_STICKERS_PATHS[appTheme][waitingIconName]}\n            previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview[waitingIconName]}\n          />\n        )}\n      </i>\n    );\n  }\n\n  function renderAmount() {\n    const amountDisplayMode = getTransactionAmountDisplayMode(transaction);\n    let content: TeactNode;\n    let isSensitiveData = false;\n\n    if (amountDisplayMode !== 'hide') {\n      const noSign = amountDisplayMode === 'noSign';\n      content = formatCurrencyExtended(\n        toDecimal(noSign ? bigintAbs(amount) : amount, token?.decimals ?? FRACTION_DIGITS),\n        token?.symbol || TONCOIN.symbol,\n        noSign,\n      );\n      isSensitiveData = true;\n    } else if (isDnsOperation) {\n      content = 'TON DNS';\n    } else if (nft) {\n      content = 'NFT';\n    } else {\n      return undefined;\n    }\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden && isSensitiveData}\n        cols={amountCols}\n        rows={2}\n        cellSize={8}\n        align=\"right\"\n        className={buildClassName(styles.amount, operationColorClass)}\n      >\n        {content}\n      </SensitiveData>\n    );\n  }\n\n  function renderAddress() {\n    const isAddressShown = shouldShowTransactionAddress(transaction);\n\n    return (\n      <div className={styles.address}>\n        {isAddressShown && lang(isIncoming ? '$transaction_from' : '$transaction_to', {\n          address: (\n            <span className={styles.addressValue}>\n              {withChainIcon && Boolean(chain) && (\n                <i\n                  className={buildClassName(styles.chainIcon, `icon-chain-${chain.toLowerCase()}`)}\n                  aria-label={chain}\n                />\n              )}\n              {addressName || shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)}\n            </span>\n          ),\n        })}\n        {!isAddressShown && isStake && lang('at %annual_yield%', {\n          annual_yield: <span className={styles.addressValue}>{yieldType} {annualYield}%</span>,\n        })}\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      key={txId}\n      className={buildClassName(styles.item, isLast && styles.itemLast, isActive && styles.active)}\n      onClick={handleClick}\n      isSimple\n    >\n      {renderIcon()}\n      <div className={styles.header}>\n        <div className={styles.operationName}>\n          {getTransactionTitle(transaction, false, lang)}\n          {isScamTransaction(transaction) && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {formatTime(timestamp)}\n        {renderAddress()}\n      </div>\n      {nft && renderNft()}\n      {shouldShowTransactionComment(transaction) && renderComment()}\n    </Button>\n  );\n}\n\nexport default memo(Transaction);\n\nexport function getTransactionHeight(transaction: ApiTransactionActivity) {\n  return TRANSACTION_HEIGHT\n    + (transaction.nft ? NFT_EXTRA_HEIGHT : 0)\n    + (shouldShowTransactionComment(transaction) ? COMMENT_EXTRA_HEIGHT : 0)\n    - (shouldGiveAddressSpaceToAttachment(transaction) ? ADDRESS_RELEASE_HEIGHT : 0);\n}\n\nfunction shouldGiveAddressSpaceToAttachment(transaction: ApiTransactionActivity) {\n  return !transaction.isIncoming\n    && (transaction.nft || shouldShowTransactionComment(transaction))\n    && !(shouldShowTransactionAddress(transaction) || transaction.type === 'stake');\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"qI7nEtyA\",\"emptyListTitle\":\"ddnxH_YM\",\"emptyListLoading\":\"BUMeW3vl\",\"greeting\":\"HZCBxAlC\",\"sticker\":\"L93gae4c\",\"loaderThreshold\":\"tFv_lTfa\",\"itemLoading\":\"aJcdkBz7\",\"date\":\"t2U79mme\",\"date_withLoadingDots\":\"vFLWFB14\",\"dateWithLoadingDots\":\"vFLWFB14\",\"loadingDots\":\"Ig34AhI2\",\"dateContainer\":\"ubrkPkql\",\"dateSlide\":\"rHTS83Rc\",\"listItem\":\"ebD9lZA7\",\"listGroup\":\"fUr4n5dv\"};","import React, {\n  memo, useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiActivity, ApiNft, ApiStakingState, ApiSwapAsset, ApiTokenWithPrice,\n} from '../../../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../../../global/types';\nimport { ContentTab } from '../../../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n} from '../../../../config';\nimport { getIsTinyOrScamTransaction } from '../../../../global/helpers';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsFirstTransactionsLoaded,\n  selectIsMultichainAccount,\n  selectIsNewWallet,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatHumanDay, getDayStartAt, SECOND } from '../../../../util/dateFormat';\nimport { buildCollectionByKey } from '../../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../../util/poisoningHash';\nimport { REM } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport { getIsPortrait, useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useThrottledCallback from '../../../../hooks/useThrottledCallback';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport NewWalletGreeting from './NewWalletGreeting';\nimport Swap, { getSwapHeight } from './Swap';\nimport Transaction, { getTransactionHeight } from './Transaction';\n\nimport styles from './Activities.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  totalTokensAmount: number;\n}\n\ntype StateProps = {\n  currentAccountId: string;\n  slug?: string;\n  isNewWallet: boolean;\n  isMultichainAccount: boolean;\n  addressByChain?: Account['addressByChain'];\n  areTinyTransfersHidden?: boolean;\n  byId?: Record<string, ApiActivity>;\n  idsBySlug?: Record<string, string[]>;\n  idsMain?: string[];\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug?: Record<string, ApiSwapAsset>;\n  currentActivityId?: string;\n  savedAddresses?: SavedAddress[];\n  isMainHistoryEndReached?: boolean;\n  isHistoryEndReachedBySlug?: Record<string, boolean>;\n  alwaysShownSlugs?: string[];\n  activitiesUpdateStartedAt?: number;\n  theme: Theme;\n  isFirstTransactionsLoaded?: boolean;\n  isSensitiveDataHidden?: true;\n  stakingStates?: ApiStakingState[];\n  nftsByAddress?: Record<string, ApiNft>;\n};\n\ninterface ActivityOffsetInfo {\n  offset: number;\n  height: number;\n  isFirst: boolean;\n  isFirstInDay: boolean;\n  isLastInDay: boolean;\n}\n\nconst FURTHER_SLICE = 30;\nconst THROTTLE_TIME = SECOND;\n\nconst LIST_TOP_PADDING = 0.5 * REM;\nconst DATE_HEADER_HEIGHT = 2.125 * REM;\n\nfunction Activities({\n  isActive,\n  currentAccountId,\n  isNewWallet,\n  isMultichainAccount,\n  addressByChain,\n  slug,\n  idsBySlug,\n  idsMain,\n  byId,\n  tokensBySlug,\n  swapTokensBySlug,\n  areTinyTransfersHidden,\n  currentActivityId,\n  savedAddresses,\n  isMainHistoryEndReached,\n  isHistoryEndReachedBySlug,\n  alwaysShownSlugs,\n  activitiesUpdateStartedAt = 0,\n  theme,\n  isFirstTransactionsLoaded,\n  isSensitiveDataHidden,\n  stakingStates,\n  nftsByAddress,\n}: Omit<OwnProps, 'totalTokensAmount'> & StateProps) {\n  const {\n    fetchTokenTransactions, fetchAllTransactions, showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isLandscape } = useDeviceScreen();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const isUpdating = useUpdateIndicator(activitiesUpdateStartedAt);\n\n  const appTheme = useAppTheme(theme);\n\n  const stakingStateBySlug = useMemo(() => {\n    return stakingStates ? buildCollectionByKey(stakingStates, 'tokenSlug') : {};\n  }, [stakingStates]);\n\n  const ids = useMemo(() => {\n    let idList: string[] | undefined;\n\n    const bySlug = idsBySlug ?? {};\n\n    if (byId) {\n      if (slug) {\n        idList = bySlug[slug] ?? [];\n      } else {\n        idList = idsMain;\n      }\n    }\n\n    if (!idList) {\n      return undefined;\n    }\n\n    return idList;\n  }, [byId, slug, idsBySlug, idsMain]);\n\n  const activityList = useMemo(() => {\n    if (!ids) {\n      return undefined;\n    }\n\n    const allActivities = ids\n      .map((id) => byId?.[id])\n      .filter((activity) => {\n        if (activity?.shouldHide) {\n          return false;\n        }\n        if (activity?.kind === 'swap') {\n          return Boolean(!slug || activity.from === slug || activity.to === slug);\n        } else {\n          return Boolean(\n            activity?.slug\n            && (!slug || activity.slug === slug)\n            && (\n              !areTinyTransfersHidden\n              || (slug && tokensBySlug[activity.slug]?.quote.priceUsd === 0)\n              || !getIsTinyOrScamTransaction(activity, tokensBySlug[activity.slug])\n              || alwaysShownSlugs?.includes(activity.slug)\n            )\n            && !getIsTransactionWithPoisoning(activity),\n          );\n        }\n      }) as ApiActivity[];\n\n    if (!allActivities.length) {\n      return [];\n    }\n\n    return allActivities;\n  }, [areTinyTransfersHidden, byId, alwaysShownSlugs, ids, slug, tokensBySlug]);\n\n  const { activityIds, activitiesById } = useMemo(() => {\n    const activityIdList: string[] = [];\n    const activityMap: Record<string, ApiActivity> = {};\n\n    activityList?.forEach((activity) => {\n      activityIdList.push(activity.id);\n      activityMap[activity.id] = activity;\n    });\n\n    return { activityIds: activityIdList, activitiesById: activityMap };\n  }, [activityList]);\n\n  const isHistoryEndReached = useMemo(() => {\n    if (slug) {\n      return !!isHistoryEndReachedBySlug?.[slug];\n    }\n\n    return !!isMainHistoryEndReached;\n  }, [isHistoryEndReachedBySlug, isMainHistoryEndReached, slug]);\n\n  const loadMore = useLastCallback(() => {\n    if (slug) {\n      fetchTokenTransactions({ slug, limit: FURTHER_SLICE * 2, shouldLoadWithBudget: true });\n    } else {\n      fetchAllTransactions({ limit: FURTHER_SLICE * 2, shouldLoadWithBudget: true });\n    }\n  });\n\n  const throttledLoadMore = useThrottledCallback(loadMore, [loadMore], THROTTLE_TIME, true);\n\n  const [viewportIds, getMore, resetScroll] = useInfiniteScroll(\n    throttledLoadMore, activityIds, undefined, FURTHER_SLICE, slug, isActive,\n  );\n\n  const isActivitiesEmpty = !activityList || !activityList.length;\n\n  const activityOffsetInfoById = useMemo(() => {\n    const offsetMap: Record<string, ActivityOffsetInfo> = {};\n\n    let offset = 0;\n    let lastActivityDayStart = 0;\n\n    activityIds.forEach((id, index) => {\n      const activity = activitiesById[id];\n      if (!activity) return;\n\n      let height = activity.kind === 'transaction' ? getTransactionHeight(activity) : getSwapHeight();\n\n      const isFirst = index === 0;\n      if (isFirst) {\n        height += LIST_TOP_PADDING;\n      }\n\n      const activityDayStart = getDayStartAt(activity.timestamp);\n      const isNewDay = lastActivityDayStart !== activityDayStart;\n      if (isNewDay) {\n        lastActivityDayStart = activityDayStart;\n        height += DATE_HEADER_HEIGHT;\n        if (index > 0) {\n          offsetMap[activityIds[index - 1]].isLastInDay = true;\n        }\n      }\n\n      offsetMap[id] = {\n        offset,\n        height,\n        isFirst,\n        isFirstInDay: isNewDay,\n        isLastInDay: index === activityIds.length - 1, // Also gets overwritten a few lines above\n      };\n\n      offset += height;\n    });\n\n    return offsetMap;\n  }, [activitiesById, activityIds]);\n\n  const currentContainerHeight = useMemo(\n    () => {\n      const lastViewportId = viewportIds![viewportIds!.length - 1];\n      const activityOffset = activityOffsetInfoById[lastViewportId];\n\n      return activityOffset ? activityOffset.offset + activityOffset.height : 0;\n    },\n    [activityOffsetInfoById, viewportIds],\n  );\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, { height: isLandscape ? '' : `${currentContainerHeight}px` });\n  }, [isLandscape, currentContainerHeight]);\n\n  useEffect(() => {\n    if (!isHistoryEndReached && ids && isActivitiesEmpty) {\n      throttledLoadMore();\n    }\n  }, [ids, isActivitiesEmpty, isHistoryEndReached, throttledLoadMore]);\n\n  useEffect(() => {\n    if (!isActive && !isLandscape) {\n      resetScroll?.();\n    }\n  }, [isActive, isLandscape, resetScroll]);\n\n  const handleActivityClick = useLastCallback((id: string) => {\n    showActivityInfo({ id });\n  });\n\n  if (!currentAccountId) {\n    return undefined;\n  }\n\n  function renderActivity(activity: ApiActivity, isLast: boolean, isActivityActive: boolean) {\n    const isSwap = activity.kind === 'swap';\n\n    if (isSwap) {\n      return (\n        <Swap\n          key={activity.id}\n          activity={activity}\n          tokensBySlug={swapTokensBySlug}\n          isLast={isLast}\n          isActive={isActivityActive}\n          appTheme={appTheme}\n          addressByChain={addressByChain}\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          onClick={handleActivityClick}\n        />\n      );\n    } else {\n      const doesNftExist = Boolean(activity.nft && nftsByAddress?.[activity.nft.address]);\n\n      return (\n        <Transaction\n          key={activity.id}\n          transaction={activity}\n          tokensBySlug={tokensBySlug}\n          isActive={isActivityActive}\n          annualYield={stakingStateBySlug[activity.slug]?.annualYield}\n          yieldType={stakingStateBySlug[activity.slug]?.yieldType}\n          isLast={isLast}\n          savedAddresses={savedAddresses}\n          withChainIcon={isMultichainAccount}\n          appTheme={appTheme}\n          doesNftExist={doesNftExist}\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          onClick={handleActivityClick}\n        />\n      );\n    }\n  }\n\n  function renderDate(dateValue: number, isFirst?: boolean) {\n    const formattedDate = formatHumanDay(lang, dateValue);\n    const date = <div className={styles.date}>{formattedDate}</div>;\n\n    if (!isFirst) {\n      return date;\n    }\n\n    const dateWithLoader = (\n      <div className={buildClassName(styles.date, styles.date_withLoadingDots)}>\n        {formattedDate}\n        <LoadingDots isActive isDoubled className={styles.loadingDots} />\n      </div>\n    );\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        activeKey={isUpdating ? 1 : 0}\n        className={styles.dateContainer}\n        slideClassName={styles.dateSlide}\n      >\n        {isUpdating ? dateWithLoader : date}\n      </Transition>\n    );\n  }\n\n  function renderHistory() {\n    return viewportIds!.map((id) => {\n      const activityInfo = activityOffsetInfoById[id];\n      const activity = activitiesById[id];\n      if (!activity) return undefined;\n\n      const isActivityActive = activity.id === currentActivityId;\n\n      return (\n        <div\n          key={id}\n          style={`top: ${activityInfo.offset}px`}\n          className={buildClassName('ListItem', styles.listItem)}\n        >\n          {activityInfo.isFirstInDay && renderDate(activity.timestamp, activityInfo.isFirst)}\n          {renderActivity(activity, activityInfo.isLastInDay, isActivityActive)}\n        </div>\n      );\n    });\n  }\n\n  if (isActivitiesEmpty && !isFirstTransactionsLoaded) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (isNewWallet) {\n    return (\n      <div className={buildClassName(isLandscape && styles.greeting)}>\n        <NewWalletGreeting\n          isActive={isActive}\n          isMutlichainAccount={isMultichainAccount}\n          mode={isLandscape ? 'emptyList' : 'panel'}\n        />\n      </div>\n    );\n  }\n\n  if (isHistoryEndReached && isActivitiesEmpty) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No Activity')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName('custom-scroll', styles.listGroup)}\n      scrollContainerClosest={!isLandscape && isActive ? '.app-slide-content' : undefined}\n      items={viewportIds}\n      preloadBackwards={FURTHER_SLICE}\n      withAbsolutePositioning\n      maxHeight={currentContainerHeight}\n      onLoadMore={getMore}\n    >\n      {renderHistory()}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const account = selectCurrentAccount(global);\n      const accountState = selectCurrentAccountState(global);\n      const accountSettings = selectCurrentAccountSettings(global);\n      const isFirstTransactionsLoaded = selectIsFirstTransactionsLoaded(global, global.currentAccountId!);\n      const isNewWallet = selectIsNewWallet(global, isFirstTransactionsLoaded);\n      const slug = accountState?.currentTokenSlug;\n      const stakingStates = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const {\n        idsBySlug, byId, isMainHistoryEndReached, isHistoryEndReachedBySlug, idsMain,\n      } = accountState?.activities ?? {};\n      const { byAddress } = accountState?.nfts || {};\n\n      return {\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        currentAccountId: global.currentAccountId!,\n        slug,\n        byId,\n        isNewWallet,\n        idsBySlug,\n        idsMain,\n        tokensBySlug: global.tokenInfo.bySlug,\n        swapTokensBySlug: global.swapTokenInfo?.bySlug,\n        areTinyTransfersHidden: global.settings.areTinyTransfersHidden,\n        savedAddresses: accountState?.savedAddresses,\n        isMainHistoryEndReached,\n        isHistoryEndReachedBySlug,\n        currentActivityId: accountState?.currentActivityId,\n        alwaysShownSlugs: accountSettings?.alwaysShownSlugs,\n        activitiesUpdateStartedAt: global.activitiesUpdateStartedAt,\n        theme: global.settings.theme,\n        isFirstTransactionsLoaded,\n        addressByChain: account?.addressByChain,\n        stakingStates,\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        nftsByAddress: byAddress,\n      };\n    },\n    (global, { totalTokensAmount }, stickToFirst) => {\n      const accountState = selectCurrentAccountState(global);\n      const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n        getIsPortrait() ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n      );\n\n      return stickToFirst((\n        accountState?.activeContentTab === ContentTab.Activity\n        || (accountState?.activeContentTab === ContentTab.Assets && shouldShowSeparateAssetsPanel)\n      ) && global.currentAccountId);\n    },\n  )(Activities),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"y_zyRtG4\",\"vestingIcon\":\"vKLHR9fe\",\"percent\":\"JLnToFoo\",\"active\":\"gcp9pSal\",\"iconArrow\":\"zzgzZR90\",\"iconChevron\":\"WLJ2jON8\",\"primaryCell\":\"MWjR4yCQ\",\"secondaryCell\":\"zBTGbg76\",\"subtitle\":\"v9EXZKHv\",\"amountChange\":\"fvwKm83g\",\"name\":\"IJaceq0j\",\"name_text\":\"JMnoFXEt\",\"nameText\":\"JMnoFXEt\",\"secondaryValue\":\"yB7hzLme\",\"secondaryValue_staked\":\"Fy56cR9i\",\"secondaryValueStaked\":\"Fy56cR9i\",\"change\":\"ka5acfM4\",\"change_up\":\"VR0vGdiX\",\"changeUp\":\"VR0vGdiX\",\"change_down\":\"osD2vwqW\",\"changeDown\":\"osD2vwqW\",\"dot\":\"zJntRecr\",\"label\":\"jN5w9AWO\",\"apyLabel\":\"xWg00BgF\",\"apyLabel_staked\":\"UeDUf_9U\",\"apyLabelStaked\":\"UeDUf_9U\",\"chainLabel\":\"B9HfGrEc\",\"tokenIcon\":\"BcTpLjhN\",\"secondaryValue_vesting\":\"rE0JGav4\",\"secondaryValueVesting\":\"rE0JGav4\",\"secondaryValue_vestingUnfreeze\":\"LHgVJV2I\",\"secondaryValueVestingUnfreeze\":\"LHgVJV2I\"};","import React, { memo, useMemo } from '../../../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiYieldType } from '../../../../api/types';\nimport type { StakingStateStatus } from '../../../../global/helpers/staking';\nimport type { AppTheme, UserToken } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, IS_CORE_WALLET, TOKEN_WITH_LABEL } from '../../../../config';\nimport { Big } from '../../../../lib/big.js';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcChangeValue } from '../../../../util/calcChangeValue';\nimport { DAY, formatFullDay } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport { round } from '../../../../util/round';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\n\nimport styles from './Token.module.scss';\n\ninterface OwnProps {\n  token: UserToken;\n  stakingId?: string;\n  // Undefined means that it's not a staked token\n  stakingStatus?: StakingStateStatus;\n  vestingStatus?: 'frozen' | 'readyToUnfreeze';\n  unfreezeEndDate?: number;\n  amount?: string;\n  isInvestorView?: boolean;\n  classNames?: string;\n  style?: string;\n  annualYield?: number;\n  yieldType?: ApiYieldType;\n  isActive?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  appTheme: AppTheme;\n  withChainIcon?: boolean;\n  isSensitiveDataHidden?: true;\n  onClick: (slug: string) => void;\n}\n\nconst UNFREEZE_DANGER_DURATION = 7 * DAY;\n\nfunction Token({\n  token,\n  amount,\n  stakingId,\n  stakingStatus,\n  vestingStatus,\n  unfreezeEndDate,\n  annualYield,\n  isInvestorView,\n  classNames,\n  style,\n  appTheme,\n  isActive,\n  baseCurrency,\n  withChainIcon,\n  isSensitiveDataHidden,\n  yieldType,\n  onClick,\n}: OwnProps) {\n  const {\n    name,\n    symbol,\n    slug,\n    amount: tokenAmount,\n    price,\n    change24h: change,\n    decimals,\n  } = token;\n\n  const lang = useLang();\n\n  const isVesting = Boolean(vestingStatus?.length);\n  const renderedAmount = amount ?? toDecimal(tokenAmount, decimals, true);\n  const value = Big(renderedAmount).mul(price).toString();\n  const changeClassName = change > 0 ? styles.change_up : change < 0 ? styles.change_down : undefined;\n  const changeValue = Math.abs(round(calcChangeValue(Number(value), change), 4));\n  const changePercent = Math.abs(round(change * 100, 2));\n  const withYield = !IS_CORE_WALLET && annualYield !== undefined;\n  const fullClassName = buildClassName(styles.container, isActive && styles.active, classNames);\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const withLabel = Boolean(!isVesting && TOKEN_WITH_LABEL[slug]);\n  const amountCols = useMemo(() => getPseudoRandomNumber(4, 12, name), [name]);\n  const fiatAmountCols = 5 + (amountCols % 6);\n\n  const {\n    shouldRender: shouldRenderYield,\n    transitionClassNames: renderYieldClassNames,\n  } = useShowTransition(withYield);\n\n  const handleClick = useLastCallback(() => {\n    onClick(stakingId ?? slug);\n  });\n\n  function renderYield() {\n    const labelClassName = buildClassName(\n      styles.label,\n      styles.apyLabel,\n      stakingStatus && styles.apyLabel_staked,\n      renderYieldClassNames,\n    );\n\n    return (\n      <span className={labelClassName}>\n        {yieldType} {annualYield}%\n      </span>\n    );\n  }\n\n  function renderChangeIcon() {\n    if (change === 0) {\n      return undefined;\n    }\n\n    return (\n      <i\n        className={buildClassName(styles.iconArrow, change > 0 ? 'icon-arrow-up' : 'icon-arrow-down')}\n        aria-hidden\n      />\n    );\n  }\n\n  function renderStakingIcon() {\n    if (stakingStatus === 'active') {\n      return (\n        <i\n          className={buildClassName('icon-percent', styles.percent)}\n          aria-hidden\n        />\n      );\n    }\n\n    return (\n      <AnimatedIconWithPreview\n        play\n        size={ANIMATED_STICKER_TINY_ICON_PX}\n        className={styles.percent}\n        nonInteractive\n        noLoop={false}\n        tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n        previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n      />\n    );\n  }\n\n  function renderInvestorView() {\n    return (\n      <Button className={fullClassName} isSimple style={style} onClick={handleClick}>\n        <TokenIcon\n          size=\"large\"\n          token={token}\n          withChainIcon={withChainIcon}\n          className={styles.tokenIcon}\n        >\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {shouldRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={fiatAmountCols}\n              rows={2}\n              cellSize={8}\n            >\n              <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n            </SensitiveData>\n            <i className={styles.dot} aria-hidden />\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={amountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\"\n            className={buildClassName(\n              styles.secondaryValue,\n              stakingStatus && styles.secondaryValue_staked,\n              isVesting && styles.secondaryValue_vesting,\n              isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n            )}\n          >\n            <AnimatedCounter text={formatCurrency(value, shortBaseSymbol)} />\n          </SensitiveData>\n          {unfreezeEndDate ? (\n            <div\n              className={buildClassName(\n                styles.change,\n                (unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down,\n              )}\n            >\n              {lang('Unfreeze')}\n              {' '}\n              {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n            </div>\n          ) : (\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={fiatAmountCols}\n              rows={2}\n              cellSize={8}\n              align=\"right\" className={buildClassName(styles.change, changeClassName)}>\n              {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n              <i className={styles.dot} aria-hidden />\n              <AnimatedCounter text={formatCurrency(changeValue, shortBaseSymbol, undefined, true)} />\n            </SensitiveData>\n          )}\n        </div>\n      </Button>\n    );\n  }\n\n  function renderDefaultView() {\n    const totalAmount = Big(renderedAmount).mul(price);\n    const canRenderYield = annualYield !== undefined;\n\n    return (\n      <Button className={fullClassName} style={style} onClick={handleClick} isSimple>\n        <TokenIcon\n          token={token}\n          size=\"large\"\n          withChainIcon={withChainIcon}\n          className={styles.tokenIcon}\n        >\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {canRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n            {!stakingStatus && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                {unfreezeEndDate ? (\n                  <span className={(unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down}>\n                    {lang('Unfreeze')}\n                    {' '}\n                    {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n                  </span>\n                ) : (\n                  <span className={changeClassName}>\n                    {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n                  </span>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={amountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\" className={buildClassName(\n              styles.secondaryValue,\n              stakingStatus && styles.secondaryValue_staked,\n              isVesting && styles.secondaryValue_vesting,\n              isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n            )}\n          >\n            <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n          </SensitiveData>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={fiatAmountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\"\n            className={styles.subtitle}\n          >\n            {totalAmount.gt(0) ? '' : ''}&thinsp;\n            <AnimatedCounter text={formatCurrency(totalAmount, shortBaseSymbol, undefined, true)} />\n          </SensitiveData>\n        </div>\n      </Button>\n    );\n  }\n\n  return isInvestorView ? renderInvestorView() : renderDefaultView();\n}\n\nexport default memo(Token);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"EmokOdHM\",\"wrapperLoading\":\"QP7e6eAO\",\"emptyList\":\"XSZ9FBiN\",\"emptyListSeparate\":\"SHa5wmx_\",\"noTokens\":\"KNRqFMNX\",\"noTokens_text\":\"XwRCmsa8\",\"noTokensText\":\"XwRCmsa8\",\"noTokens_header\":\"qDi9Fjks\",\"noTokensHeader\":\"qDi9Fjks\",\"noTokens_description\":\"Lxfq6_5v\",\"noTokensDescription\":\"Lxfq6_5v\",\"openSettingsButton\":\"L2IEb5c3\"};","import React, {\n  memo, useLayoutEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiBaseCurrency, ApiStakingState, ApiTokenWithPrice, ApiVestingInfo,\n} from '../../../../api/types';\nimport type { Theme, UserToken } from '../../../../global/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_SMALL_SIZE_PX, IS_CORE_WALLET } from '../../../../config';\nimport { getIsActiveStakingState, getStakingStateStatus } from '../../../../global/helpers/staking';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n  selectMycoin,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { toDecimal } from '../../../../util/decimals';\nimport { buildCollectionByKey } from '../../../../util/iteratees';\nimport { REM } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useVesting from '../../../../hooks/useVesting';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport Spinner from '../../../ui/Spinner';\nimport Token from './Token';\n\nimport styles from './Assets.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isSeparatePanel?: boolean;\n  onTokenClick: (slug: string) => void;\n  onStakedTokenClick: (stakingId?: string) => void;\n};\n\ninterface StateProps {\n  tokens?: UserToken[];\n  vesting?: ApiVestingInfo[];\n  isInvestorViewEnabled?: boolean;\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n  isMultichainAccount: boolean;\n  isSensitiveDataHidden?: true;\n  states?: ApiStakingState[];\n}\n\nconst LIST_SLICE = 30;\nconst TOKEN_HEIGHT_REM = 4;\n\nfunction Assets({\n  isActive,\n  tokens,\n  vesting,\n  isInvestorViewEnabled,\n  isSeparatePanel,\n  currentTokenSlug,\n  onTokenClick,\n  onStakedTokenClick,\n  baseCurrency,\n  mycoin,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n  theme,\n  states,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const { openSettingsWithState } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const renderedTokens = useCurrentOrPrev(tokens, true);\n  const renderedMycoin = useCurrentOrPrev(mycoin, true);\n\n  const userMycoin = useMemo(() => {\n    if (!renderedTokens || !renderedMycoin) return undefined;\n\n    return renderedTokens.find(({ slug }) => slug === renderedMycoin.slug);\n  }, [renderedMycoin, renderedTokens]);\n\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const appTheme = useAppTheme(theme);\n\n  const activeStates = useMemo(() => {\n    if (IS_CORE_WALLET) return [];\n\n    return states?.filter(getIsActiveStakingState) ?? [];\n  }, [states]);\n\n  const stakedTokens = useMemo(() => {\n    return activeStates.reduce((prevValue, state) => {\n      const token = tokens?.find(({ slug }) => slug === state.tokenSlug);\n      if (token) {\n        prevValue[state.tokenSlug] = { token, state };\n      }\n      return prevValue;\n    }, {} as Record<string, { token: UserToken; state: ApiStakingState }>);\n  }, [tokens, activeStates]);\n\n  const { shouldRender: shouldRenderStakedTokens, transitionClassNames: stakedTokenClassNames } = useShowTransition(\n    Boolean(Object.keys(stakedTokens).length),\n  );\n\n  const {\n    shouldRender: shouldRenderVestingToken,\n    transitionClassNames: vestingTokenClassNames,\n    amount: vestingAmount,\n    vestingStatus,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  } = useVesting({ vesting, userMycoin, isDisabled: IS_CORE_WALLET });\n\n  const tokenSlugs = useMemo(() => (\n    renderedTokens\n      ?.filter(({ isDisabled }) => !isDisabled)\n      .map(({ slug }) => slug)\n  ), [renderedTokens]);\n  const [viewportSlugs, getMore] = useInfiniteScroll(\n    undefined, tokenSlugs, undefined, undefined, undefined, isActive, isPortrait,\n  );\n  const viewportIndex = useMemo(() => {\n    if (!viewportSlugs) return -1;\n\n    let index = tokenSlugs!.indexOf(viewportSlugs[0]);\n    if (shouldRenderStakedTokens) {\n      index += Object.keys(stakedTokens).length;\n    }\n    if (shouldRenderVestingToken) {\n      index++;\n    }\n\n    return index;\n  }, [shouldRenderStakedTokens, shouldRenderVestingToken, tokenSlugs, viewportSlugs, stakedTokens]);\n  const tokensBySlug = useMemo(() => (\n    renderedTokens ? buildCollectionByKey(renderedTokens, 'slug') : undefined\n  ), [renderedTokens]);\n  const withAbsolutePositioning = tokenSlugs && tokenSlugs.length > LIST_SLICE;\n\n  const currentContainerHeight = useMemo(() => {\n    if (!withAbsolutePositioning || !viewportSlugs?.length || viewportIndex < 0) return undefined;\n\n    return (viewportIndex + viewportSlugs.length) * TOKEN_HEIGHT_REM * REM;\n  }, [viewportIndex, viewportSlugs?.length, withAbsolutePositioning]);\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, {\n      height: currentContainerHeight && !isLandscape ? `${currentContainerHeight}px` : '',\n    });\n  }, [isLandscape, currentContainerHeight]);\n\n  const handleOpenTokenSettings = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  const stateByTokenSlug = buildCollectionByKey(states ?? [], 'tokenSlug');\n\n  function renderVestingToken() {\n    return (\n      <Token\n        key=\"vesting\"\n        token={userMycoin!}\n        vestingStatus={vestingStatus}\n        unfreezeEndDate={unfreezeEndDate}\n        amount={vestingAmount}\n        isInvestorView={isInvestorViewEnabled}\n        classNames={vestingTokenClassNames}\n        baseCurrency={baseCurrency}\n        appTheme={appTheme}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onClick={onVestingTokenClick}\n      />\n    );\n  }\n\n  function renderStakedTokens() {\n    return Object.values(stakedTokens).map(({ state, token }) => {\n      const {\n        annualYield, yieldType, balance: stakingBalance, id,\n      } = state;\n      const stakingStatus = getStakingStateStatus(state);\n\n      return (\n        <Token\n          key={`staking-${id}`}\n          token={token}\n          stakingId={id}\n          stakingStatus={stakingStatus}\n          annualYield={annualYield}\n          yieldType={yieldType}\n          amount={toDecimal(stakingBalance, token.decimals)}\n          isInvestorView={isInvestorViewEnabled}\n          classNames={stakedTokenClassNames}\n          baseCurrency={baseCurrency}\n          appTheme={appTheme}\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          onClick={onStakedTokenClick}\n        />\n      );\n    });\n  }\n\n  function renderToken(token: UserToken, indexInViewport: number) {\n    const style = withAbsolutePositioning\n      ? `position: absolute; top: ${(viewportIndex + indexInViewport) * TOKEN_HEIGHT_REM}rem`\n      : undefined;\n\n    const {\n      annualYield,\n      yieldType,\n    } = (!(token.slug in stakedTokens) && stateByTokenSlug[token.slug]) || {};\n\n    return (\n      <Token\n        classNames=\"token-list-item\"\n        style={style}\n        key={token.slug}\n        token={token}\n        annualYield={annualYield}\n        yieldType={yieldType}\n        isInvestorView={isInvestorViewEnabled}\n        isActive={token.slug === currentTokenSlug}\n        baseCurrency={baseCurrency}\n        withChainIcon={isMultichainAccount}\n        appTheme={appTheme}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onClick={onTokenClick}\n      />\n    );\n  }\n\n  const isEmpty = !shouldRenderVestingToken && !shouldRenderStakedTokens && !tokenSlugs?.length;\n\n  if (isEmpty) {\n    return (\n      <div className={styles.noTokens}>\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_SMALL_SIZE_PX}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n        <div className={styles.noTokensText}>\n          <span className={styles.noTokensHeader}>{lang('No tokens yet')}</span>\n          <span className={styles.noTokensDescription}>{lang('$no_tokens_description')}</span>\n          <Button\n            onClick={handleOpenTokenSettings}\n            isPrimary\n            isSmall\n            className={styles.openSettingsButton}\n          >\n            {lang('Add Tokens')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName(styles.wrapper, isSeparatePanel && !renderedTokens && styles.wrapperLoading)}\n      scrollContainerClosest={!isLandscape && isActive ? '.app-slide-content' : undefined}\n      items={viewportSlugs}\n      itemSelector=\".token-list-item\"\n      withAbsolutePositioning={withAbsolutePositioning}\n      maxHeight={currentContainerHeight}\n      onLoadMore={getMore}\n    >\n      {!renderedTokens && (\n        <div key=\"loading\" className={isSeparatePanel ? styles.emptyListSeparate : styles.emptyList}>\n          <Spinner />\n        </div>\n      )}\n      {shouldRenderVestingToken && renderVestingToken()}\n      {shouldRenderStakedTokens && renderStakedTokens()}\n      {viewportSlugs?.map((tokenSlug, i) => renderToken(tokensBySlug![tokenSlug], i))}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId!;\n      const tokens = selectCurrentAccountTokens(global);\n      const accountState = selectCurrentAccountState(global);\n      const { isInvestorViewEnabled } = global.settings;\n\n      const states = selectAccountStakingStates(global, accountId);\n\n      return {\n        tokens,\n        vesting: accountState?.vesting?.info,\n        isInvestorViewEnabled,\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        mycoin: selectMycoin(global),\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        theme: global.settings.theme,\n        states,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Assets),\n);\n","import { useEffect, useMemo } from '../lib/teact/teact';\nimport { getActions } from '../global';\n\nimport type { ApiVestingInfo } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { calcVestingAmountByStatus } from '../components/main/helpers/calcVestingAmountByStatus';\nimport useLastCallback from './useLastCallback';\nimport useShowTransition from './useShowTransition';\n\nexport default function useVesting(\n  { vesting, userMycoin, isDisabled }: {\n    vesting?: ApiVestingInfo[];\n    userMycoin?: UserToken;\n    isDisabled?: boolean;\n  },\n) {\n  const { loadMycoin, openVestingModal } = getActions();\n\n  const hasVesting = !isDisabled && Boolean(vesting?.length);\n  const isMycoinLoaded = Boolean(userMycoin);\n\n  useEffect(() => {\n    if (isMycoinLoaded || !hasVesting) return;\n\n    loadMycoin();\n  }, [hasVesting, isMycoinLoaded]);\n\n  const amount = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    return calcVestingAmountByStatus(vesting!, ['frozen', 'ready']);\n  }, [hasVesting, vesting]);\n\n  const unfreezeEndDate = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    for (const { parts } of vesting!) {\n      for (const part of parts) {\n        if (part.status === 'ready') {\n          return new Date(part.timeEnd).getTime();\n        }\n      }\n    }\n\n    return undefined;\n  }, [hasVesting, vesting]);\n\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(Boolean(hasVesting && isMycoinLoaded && userMycoin && amount !== '0'));\n\n  const onVestingTokenClick = useLastCallback(() => {\n    openVestingModal();\n  });\n\n  return {\n    shouldRender,\n    transitionClassNames,\n    amount,\n    vestingStatus: unfreezeEndDate ? 'readyToUnfreeze' as const : 'frozen' as const,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aKYq5U9K\",\"backButton\":\"_XXYEoWI\",\"backIcon\":\"bCLB_xx7\",\"content\":\"ADFSqjjF\",\"title\":\"L1JCMSY4\",\"amount\":\"hsn7RdaK\",\"menuButton\":\"vvSB5YmR\",\"menu\":\"X205Pp2C\",\"menuItem\":\"S3NdyNSK\",\"sendAllButton\":\"PREqGxPp\",\"burnAllButton\":\"AsupPLFP\",\"buttonIcon\":\"clmFLMte\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n} from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getExplorerName, getExplorerNftCollectionUrl } from '../../../../util/url';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMenuPosition from '../../../../hooks/useMenuPosition';\n\nimport Button from '../../../ui/Button';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ninterface StateProps {\n  isTestnet?: boolean;\n  nfts?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n}\n\nconst MENU_ITEMS: DropdownItem[] = [{\n  name: 'Send All',\n  value: 'sendAll',\n}, {\n  name: 'Getgems',\n  value: 'getgems',\n  fontIcon: 'external',\n}, {\n  name: getExplorerName('ton'),\n  value: 'tonExplorer',\n  fontIcon: 'external',\n},\n...(!IS_CORE_WALLET ? [{\n  name: 'Hide All',\n  value: 'hideAll',\n}] : []), {\n  name: 'Burn All',\n  value: 'burnAll',\n  isDangerous: true,\n}, {\n  name: 'Select All',\n  value: 'selectAll',\n  withSeparator: true,\n}];\n\nfunction NftCollectionHeader({\n  isTestnet,\n  nfts,\n  currentCollectionAddress,\n}: StateProps) {\n  const {\n    closeNftCollection,\n    selectNfts,\n    startTransfer,\n    burnNfts,\n    openHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuPosition);\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLButtonElement>(null);\n\n  const nftFromCurrentCollection = useMemo(() => {\n    if (!currentCollectionAddress || !nfts) {\n      return undefined;\n    }\n\n    return Object.values(nfts).find((nft) => nft.collectionAddress === currentCollectionAddress);\n  }, [currentCollectionAddress, nfts]);\n  const amount = useMemo(() => {\n    if (!currentCollectionAddress || !nfts) {\n      return undefined;\n    }\n\n    return Object.values(nfts).reduce((acc, nft) => {\n      return nft.collectionAddress === currentCollectionAddress ? acc + 1 : acc;\n    }, 0);\n  }, [currentCollectionAddress, nfts]);\n  const renderedNft = useCurrentOrPrev(nftFromCurrentCollection, true);\n  const renderedAmount = useCurrentOrPrev(amount, true);\n\n  const isActive = Boolean(currentCollectionAddress);\n\n  useHistoryBack({\n    isActive,\n    onBack: closeNftCollection,\n  });\n\n  useEffect(() => (isActive ? captureEscKeyListener(closeNftCollection) : undefined), [isActive]);\n\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleMenuItemClick = useLastCallback((value: string) => {\n    switch (value) {\n      case 'sendAll': {\n        const collectionNfts = Object.values(nfts!).filter((nft) => {\n          return nft.collectionAddress === currentCollectionAddress && !nft.isOnSale;\n        });\n\n        startTransfer({\n          nfts: collectionNfts,\n          isPortrait: getIsPortrait(),\n        });\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        void openUrl(`${getgemsBaseUrl}collection/${renderedNft?.collectionAddress}`);\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftCollectionUrl(renderedNft?.collectionAddress, isTestnet);\n        if (url) {\n          void openUrl(url);\n        }\n        break;\n      }\n\n      case 'selectAll': {\n        const addresses = Object.values(nfts || {})\n          .filter((nft) => nft.collectionAddress === currentCollectionAddress && !nft.isOnSale)\n          .map((nft) => nft.address);\n        selectNfts({ addresses });\n        break;\n      }\n\n      case 'burnAll': {\n        const collectionNfts = Object.values(nfts!).filter((nft) => {\n          return nft.collectionAddress === currentCollectionAddress && !nft.isOnSale;\n        });\n        burnNfts({ nfts: collectionNfts });\n\n        break;\n      }\n\n      case 'hideAll': {\n        const collectionNfts = Object.values(nfts!)\n          .filter((nft) => {\n            return nft.collectionAddress === currentCollectionAddress;\n          })\n          .map((nft) => nft.address);\n        openHideNftModal({ addresses: collectionNfts, isCollection: true });\n      }\n    }\n  });\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuPosition({ x, y });\n  });\n  const handleMenuClose = useLastCallback(() => {\n    setMenuPosition(undefined);\n  });\n\n  if (!renderedNft) {\n    return undefined;\n  }\n\n  return (\n    <div className={styles.root}>\n      <Button className={styles.backButton} isSimple isText onClick={closeNftCollection}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.content}>\n        <div className={styles.title}>{renderedNft?.collectionName || lang('Unnamed Collection')}</div>\n        <div className={styles.amount}>\n          {renderedAmount! > 1 ? lang('%amount% NFTs', { amount: renderedAmount }) : lang('1 NFT')}\n        </div>\n      </div>\n\n      <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n        <i className=\"icon-menu-dots\" aria-hidden />\n      </Button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        withPortal\n        shouldTranslateOptions\n        menuPositionHorizontal=\"right\"\n        menuPosition={positionY}\n        menuStyle={menuStyle}\n        transformOriginX={transformOriginX}\n        transformOriginY={transformOriginY}\n        buttonClassName={styles.menuItem}\n        bubbleClassName={styles.menu}\n        items={MENU_ITEMS}\n        onSelect={handleMenuItemClick}\n        onClose={handleMenuClose}\n      />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    byAddress: nfts,\n    currentCollectionAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    nfts,\n    currentCollectionAddress,\n  };\n})(NftCollectionHeader));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Radio.module.scss';\n\ninterface OwnProps {\n  id?: string;\n  name: string;\n  value: string;\n  className?: string;\n  isChecked?: boolean;\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nfunction Radio({\n  id, name, value, isChecked, className, onChange,\n}: OwnProps) {\n  return (\n    <div className={buildClassName(styles.root, className, isChecked && styles.checked)}>\n      <input\n        id={id}\n        type=\"radio\"\n        name={name}\n        className=\"visually-hidden\"\n        value={value}\n        checked={isChecked}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nexport default memo(Radio);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OyHWXuOj\",\"checked\":\"BCTrjQeD\"};","import { useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { ApiNft } from '../../../api/types';\nimport type { DropdownItem } from '../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n  MTW_CARDS_COLLECTION,\n  TON_DNS_COLLECTION,\n} from '../../../config';\nimport { openUrl } from '../../../util/openUrl';\nimport { getExplorerName, getExplorerNftUrl } from '../../../util/url';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nconst ON_SALE_ITEM: DropdownItem = {\n  name: 'Cannot be sent',\n  value: 'send',\n  description: 'NFT is for sale',\n  isDisabled: true,\n};\nconst TON_DNS_ITEM: DropdownItem = {\n  name: 'Configure DNS',\n  value: 'tondns',\n  fontIcon: 'external',\n};\nconst SEND_ITEM: DropdownItem = {\n  name: 'Send',\n  value: 'send',\n};\nconst FRAGMENT_ITEM: DropdownItem = {\n  name: 'Fragment',\n  value: 'fragment',\n  fontIcon: 'external',\n};\nconst GETGEMS_ITEM: DropdownItem = {\n  name: 'Getgems',\n  value: 'getgems',\n  fontIcon: 'external',\n};\nconst TON_EXPLORER_ITEM: DropdownItem = {\n  name: getExplorerName('ton'),\n  value: 'tonExplorer',\n  fontIcon: 'external',\n};\nconst COLLECTION_ITEM: DropdownItem = {\n  name: 'Collection',\n  value: 'collection',\n};\nconst HIDE_ITEM: DropdownItem = {\n  name: 'Hide',\n  value: 'hide',\n};\nconst NOT_SCAM: DropdownItem = {\n  name: 'Not Scam',\n  value: 'not_scam',\n};\nconst UNHIDE: DropdownItem = {\n  name: 'Unhide',\n  value: 'unhide',\n};\nconst BURN_ITEM: DropdownItem = {\n  name: 'Burn',\n  value: 'burn',\n  isDangerous: true,\n};\nconst SELECT_ITEM: DropdownItem = {\n  name: 'Select',\n  value: 'select',\n  withSeparator: true,\n};\nconst INSTALL_CARD: DropdownItem = {\n  name: 'Install Card',\n  value: 'installCard',\n};\nconst RESET_CARD: DropdownItem = {\n  name: 'Reset Card',\n  value: 'resetCard',\n};\nconst INSTALL_ACCENT_COLOR: DropdownItem = {\n  name: 'Apply Palette',\n  value: 'installAccentColor',\n};\nconst RESET_ACCENT_COLOR: DropdownItem = {\n  name: 'Reset Palette',\n  value: 'resetAccentColor',\n};\n\nexport default function useNftMenu({\n  nft,\n  isNftBlacklisted,\n  isNftWhitelisted,\n  isNftInstalled,\n  isNftAccentColorInstalled,\n}: {\n  nft?: ApiNft;\n  isNftBlacklisted?: boolean;\n  isNftWhitelisted?: boolean;\n  isNftInstalled?: boolean;\n  isNftAccentColorInstalled?: boolean;\n}) {\n  const {\n    startTransfer,\n    selectNfts,\n    openNftCollection,\n    burnNfts,\n    addNftsToBlacklist,\n    addNftsToWhitelist,\n    closeMediaViewer,\n    openUnhideNftModal,\n    setCardBackgroundNft,\n    clearCardBackgroundNft,\n    installAccentColorFromNft,\n    clearAccentColorFromNft,\n  } = getActions();\n\n  const handleMenuItemSelect = useLastCallback((value: string) => {\n    const { isTestnet } = getGlobal().settings;\n\n    switch (value) {\n      case 'send': {\n        startTransfer({\n          isPortrait: getIsPortrait(),\n          nfts: [nft!],\n        });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftUrl(nft!.address, isTestnet)!;\n\n        void openUrl(url);\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        const getgemsUrl = nft!.collectionAddress\n          ? `${getgemsBaseUrl}collection/${nft!.collectionAddress}/${nft!.address}`\n          : `${getgemsBaseUrl}nft/${nft!.address}`;\n\n        void openUrl(getgemsUrl);\n        break;\n      }\n\n      case 'tondns': {\n        const url = `https://dns.ton.org/#${(nft!.name || '').replace(/\\.ton$/i, '')}`;\n\n        void openUrl(url);\n        break;\n      }\n\n      case 'installCard': {\n        setCardBackgroundNft({ nft: nft! });\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetCard': {\n        clearCardBackgroundNft();\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'installAccentColor': {\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetAccentColor': {\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'fragment': {\n        let url: string;\n        const { collectionName, name, metadata: { fragmentUrl } } = nft!;\n\n        if (fragmentUrl) {\n          url = fragmentUrl;\n        } else if (collectionName?.toLowerCase().includes('numbers')) {\n          url = `https://fragment.com/number/${name?.replace(/[^0-9]/g, '')}`;\n        } else {\n          url = `https://fragment.com/username/${encodeURIComponent(name?.substring(1) || '')}`;\n        }\n\n        void openUrl(url);\n        break;\n      }\n\n      case 'collection': {\n        openNftCollection({ address: nft!.collectionAddress! }, { forceOnHeavyAnimation: true });\n\n        break;\n      }\n\n      case 'hide': {\n        addNftsToBlacklist({ addresses: [nft!.address] });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'not_scam': {\n        openUnhideNftModal({ address: nft!.address, name: nft!.name });\n\n        break;\n      }\n\n      case 'unhide': {\n        addNftsToWhitelist({ addresses: [nft!.address] });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'burn': {\n        burnNfts({ nfts: [nft!] });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'select': {\n        selectNfts({ addresses: [nft!.address] });\n        break;\n      }\n    }\n  });\n\n  const menuItems = useMemo(() => {\n    if (!nft) return [];\n\n    const {\n      collectionAddress, isOnSale, isOnFragment, isScam,\n    } = nft;\n    const isTonDns = nft.collectionAddress === TON_DNS_COLLECTION;\n    const isCard = !IS_CORE_WALLET && nft.collectionAddress === MTW_CARDS_COLLECTION;\n\n    return [\n      ...(isTonDns ? [TON_DNS_ITEM] : []),\n      ...(isCard ? [!isNftInstalled ? INSTALL_CARD : RESET_CARD] : []),\n      ...(isCard ? [!isNftAccentColorInstalled ? INSTALL_ACCENT_COLOR : RESET_ACCENT_COLOR] : []),\n      {\n        ...(isOnSale ? ON_SALE_ITEM : SEND_ITEM),\n        ...(isCard && { withSeparator: true }),\n      },\n      ...(isOnFragment ? [FRAGMENT_ITEM] : []),\n      GETGEMS_ITEM,\n      TON_EXPLORER_ITEM,\n      ...(collectionAddress ? [COLLECTION_ITEM] : []),\n      ...(!IS_CORE_WALLET ? [\n        ...((!isScam && !isNftBlacklisted) || isNftWhitelisted ? [HIDE_ITEM] : []),\n        ...(isScam && !isNftWhitelisted ? [NOT_SCAM] : []),\n        ...(!isScam && isNftBlacklisted ? [UNHIDE] : []),\n      ] : []),\n      ...(!isOnSale ? [\n        BURN_ITEM,\n        SELECT_ITEM,\n      ] : []),\n    ];\n  }, [nft, isNftInstalled, isNftAccentColorInstalled, isNftBlacklisted, isNftWhitelisted]);\n\n  return { menuItems, handleMenuItemSelect };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"Zwrm7aDb\",\"icon\":\"lGtsxpv1\",\"menu\":\"Pc0Y7YGI\",\"menuBubble\":\"UhvMK8mg\",\"item\":\"AZjbQROQ\"};","import React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\n\nimport { selectCurrentAccountSettings, selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { stopEvent } from '../../../../util/domEvents';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMenuPosition from '../../../../hooks/useMenuPosition';\nimport { usePrevDuringAnimationSimple } from '../../../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from '../../../mediaViewer/hooks/useNftMenu';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../../../ui/Menu';\n\nimport styles from './NftMenu.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  menuPosition?: IAnchorPosition;\n  onOpen: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n}\n\nfunction NftMenu({\n  nft,\n  menuPosition,\n  onOpen,\n  onClose,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  cardBackgroundNft,\n  accentColorNft,\n}: OwnProps & StateProps) {\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft, isNftBlacklisted, isNftWhitelisted, isNftInstalled, isNftAccentColorInstalled,\n  });\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLButtonElement>(null);\n  const isOpen = Boolean(menuPosition);\n\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const lang = useLang();\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleButtonClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    if (isOpen) {\n      onClose();\n    } else {\n      onOpen();\n    }\n  };\n\n  return (\n    <>\n      <button\n        ref={ref}\n        type=\"button\"\n        className={styles.button}\n        aria-label={lang('NFT Menu')}\n        onClick={handleButtonClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-menu-dots')} aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isOpen}\n        withPortal\n        menuPositionHorizontal=\"right\"\n        menuPosition={positionY}\n        menuStyle={menuStyle}\n        transformOriginX={transformOriginX}\n        transformOriginY={transformOriginY}\n        items={menuItems}\n        shouldTranslateOptions\n        className={styles.menu}\n        bubbleClassName={styles.menuBubble}\n        buttonClassName={styles.item}\n        shouldCleanup\n        onClose={onClose}\n        onSelect={handleMenuItemSelect}\n      />\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n\n  return {\n    blacklistedNftAddresses, whitelistedNftAddresses, cardBackgroundNft, accentColorNft,\n  };\n})(NftMenu));\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"ITYna3lB\",\"emptyListContent\":\"VvA3zcqe\",\"emptyListTitle\":\"dfDaqpor\",\"emptyListText\":\"T93VHAYd\",\"emptyListLoading\":\"AmFNUCBn\",\"emptyListButton\":\"MQHqPBS8\",\"sticker\":\"e1KDXttI\",\"list\":\"dpiMguJa\",\"landscapeList\":\"UaTzvOas\",\"item\":\"wdIabR9U\",\"image\":\"P5UTNS9t\",\"item_onSale\":\"TcBQN9hf\",\"itemOnSale\":\"TcBQN9hf\",\"nonInteractive\":\"O3ePb4wF\",\"itemWithMenu\":\"AFzPXqVX\",\"imageWrapper\":\"wvB9itFX\",\"warning\":\"qtSm9QOQ\",\"imageSelected\":\"xeApkBtH\",\"fullImage\":\"tWs_EVqC\",\"infoWrapper\":\"v0SE1VHL\",\"title\":\"KokxXqZI\",\"collection\":\"_xEjK2pw\",\"radio\":\"VqbpRLGL\",\"notcoinVoucherButton\":\"GIjQ3tN4\",\"notcoinVoucherIcon\":\"mfxV4144\"};","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { ObserveFn } from '../../../../hooks/useIntersectionObserver';\nimport { type IAnchorPosition, MediaType } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport { vibrate } from '../../../../util/haptics';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { IS_ANDROID, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport { useIsIntersecting } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Image from '../../../ui/Image';\nimport Radio from '../../../ui/Radio';\nimport NftMenu from './NftMenu';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  selectedAddresses?: string[];\n  observeIntersection: ObserveFn;\n}\n\ninterface UseLottieReturnType {\n  isLottie: boolean;\n  shouldPlay?: boolean;\n  noLoop?: boolean;\n  markHover?: NoneToVoidFunction;\n  unmarkHover?: NoneToVoidFunction;\n}\n\nfunction Nft({ nft, selectedAddresses, observeIntersection }: OwnProps) {\n  const { openMediaViewer, selectNfts, clearNftSelection } = getActions();\n\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const {\n    isLottie, shouldPlay, noLoop, markHover, unmarkHover,\n  } = useLottie(nft, ref, observeIntersection);\n\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition>();\n  const isSelectionEnabled = !!selectedAddresses && selectedAddresses.length > 0;\n  const isSelected = useMemo(() => selectedAddresses?.includes(nft.address), [selectedAddresses, nft.address]);\n  const isMenuOpen = Boolean(menuPosition);\n  const {\n    shouldRender: shouldRenderWarning,\n    transitionClassNames: warningTransitionClassNames,\n  } = useShowTransition(isSelectionEnabled && nft.isOnSale);\n\n  const fullClassName = buildClassName(\n    styles.item,\n    !isSelectionEnabled && nft.isOnSale && styles.item_onSale,\n    isMenuOpen && styles.itemWithMenu,\n    isSelectionEnabled && nft.isOnSale && styles.nonInteractive,\n  );\n\n  function handleClick() {\n    if (isSelectionEnabled) {\n      if (isSelected) {\n        clearNftSelection({ address: nft.address });\n      } else {\n        selectNfts({ addresses: [nft.address] });\n      }\n      return;\n    }\n\n    void vibrate();\n    openMediaViewer({ mediaId: nft.address, mediaType: MediaType.Nft });\n  }\n\n  const handleOpenMenu = useLastCallback(() => {\n    const { right: x, y } = ref.current!.getBoundingClientRect();\n    setMenuPosition({ x, y });\n  });\n\n  const handleCloseMenu = useLastCallback(() => {\n    setMenuPosition(undefined);\n  });\n\n  return (\n    <div\n      key={nft.address}\n      ref={ref}\n      data-nft-address={nft.address}\n      className={fullClassName}\n      onMouseEnter={markHover}\n      onMouseLeave={unmarkHover}\n      onClick={!isSelectionEnabled || !nft.isOnSale ? handleClick : undefined}\n    >\n      {isSelectionEnabled && !nft.isOnSale && (\n        <Radio\n          isChecked={isSelected}\n          name=\"nft\"\n          value={nft.address}\n          className={styles.radio}\n        />\n      )}\n      {!isSelectionEnabled && (\n        <NftMenu\n          nft={nft}\n          menuPosition={menuPosition}\n          onOpen={handleOpenMenu}\n          onClose={handleCloseMenu}\n        />\n      )}\n      {isLottie ? (\n        <div\n          className={styles.imageWrapper}\n        >\n          <AnimatedIconWithPreview\n            shouldStretch\n            play={shouldPlay}\n            noLoop={noLoop}\n            tgsUrl={nft.metadata!.lottie}\n            previewUrl={nft.thumbnail}\n            noPreviewTransition\n            className={buildClassName(styles.image, isSelected && styles.imageSelected)}\n          />\n        </div>\n      ) : (\n        <Image\n          url={nft.thumbnail}\n          className={styles.imageWrapper}\n          imageClassName={buildClassName(styles.image, isSelected && styles.imageSelected)}\n        />\n      )}\n      {shouldRenderWarning && (\n        <div className={buildClassName(styles.warning, warningTransitionClassNames)}>\n          {lang('For sale. Cannot be sent and burned')}\n        </div>\n      )}\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>{nft.name || shortenAddress(nft.address, 4)}</b>\n      </div>\n      <div className={styles.collection}>{nft.collectionName}</div>\n    </div>\n  );\n}\n\nexport default memo(Nft);\n\nfunction useLottie(\n  nft: ApiNft,\n  ref: React.RefObject<HTMLDivElement>,\n  observeIntersection: ObserveFn,\n): UseLottieReturnType {\n  const isLottie = Boolean(nft.metadata?.lottie);\n\n  const isIntersecting = useIsIntersecting(ref, isLottie ? observeIntersection : undefined);\n  const [isHover, markHover, unmarkHover] = useFlag();\n\n  if (!isLottie) {\n    return { isLottie };\n  }\n\n  const shouldPlay = isIntersecting || isHover;\n  const noLoop = !isHover;\n\n  return {\n    isLottie,\n    shouldPlay,\n    noLoop,\n    ...!(IS_IOS || IS_ANDROID) && {\n      markHover,\n      unmarkHover,\n    },\n  };\n}\n","import React, { memo, useEffect, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  NFT_MARKETPLACE_TITLE,\n  NFT_MARKETPLACE_URL,\n} from '../../../../config';\nimport renderText from '../../../../global/helpers/renderText';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getHostnameFromUrl } from '../../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport { useIntersectionObserver } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport Nft from './Nft';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  orderedAddresses?: string[];\n  selectedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  isNftBuyingDisabled?: boolean;\n}\n\nconst INTERSECTION_THROTTLE = 200;\n\nfunction Nfts({\n  isActive,\n  orderedAddresses,\n  selectedAddresses,\n  byAddress,\n  currentCollectionAddress,\n  isNftBuyingDisabled,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n}: OwnProps & StateProps) {\n  const { clearNftsSelection } = getActions();\n\n  const lang = useLang();\n  const { isPortrait, isLandscape } = useDeviceScreen();\n  const hasSelection = Boolean(selectedAddresses?.length);\n\n  useEffect(clearNftsSelection, [clearNftsSelection, isActive, currentCollectionAddress]);\n  useEffect(() => (hasSelection ? captureEscKeyListener(clearNftsSelection) : undefined), [hasSelection]);\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n\n    return orderedAddresses\n      .map((address) => byAddress[address])\n      .filter((nft) => {\n        if (!nft) return false;\n\n        return !currentCollectionAddress || nft.collectionAddress === currentCollectionAddress;\n      })\n      .filter((nft) => (\n        !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n      ) && !blacklistedNftAddressesSet.has(nft.address));\n  }, [\n    byAddress, currentCollectionAddress, orderedAddresses, blacklistedNftAddresses, whitelistedNftAddresses,\n  ]);\n\n  const { observe: observeIntersection } = useIntersectionObserver({\n    throttleMs: INTERSECTION_THROTTLE,\n    isDisabled: !nfts?.length,\n  });\n\n  function handleNftMarketplaceClick(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    stopEvent(e);\n\n    void openUrl(NFT_MARKETPLACE_URL, {\n      title: NFT_MARKETPLACE_TITLE,\n      subtitle: getHostnameFromUrl(NFT_MARKETPLACE_URL),\n    });\n  }\n\n  if (nfts === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (nfts.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={isPortrait ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.emptyListContent}>\n          <p className={styles.emptyListTitle}>{lang('No NFTs yet')}</p>\n          {!isNftBuyingDisabled && (\n            <>\n              <p className={styles.emptyListText}>\n                {renderText(lang('$nft_explore_offer'), isPortrait ? ['simple_markdown'] : undefined)}\n              </p>\n              <button type=\"button\" className={styles.emptyListButton} onClick={handleNftMarketplaceClick}>\n                {lang('Open %nft_marketplace%', { nft_marketplace: NFT_MARKETPLACE_TITLE })}\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={nfts.length}\n      shouldCleanup\n      slideClassName={buildClassName(styles.list, isLandscape && styles.landscapeList)}\n    >\n      {nfts.map((nft) => (\n        <Nft\n          key={nft.address}\n          nft={nft}\n          selectedAddresses={selectedAddresses}\n          observeIntersection={observeIntersection}\n        />\n      ))}\n    </Transition>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        orderedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        selectedAddresses,\n      } = selectCurrentAccountState(global)?.nfts || {};\n      const { isNftBuyingDisabled } = global.restrictions;\n\n      const {\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n      } = selectCurrentAccountState(global) || {};\n\n      return {\n        orderedAddresses,\n        selectedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        isNftBuyingDisabled,\n      };\n    },\n    (global, _, stickToFirst) => {\n      const {\n        currentCollectionAddress,\n      } = selectCurrentAccountState(global)?.nfts || {};\n\n      return stickToFirst(`${global.currentAccountId}_${currentCollectionAddress || 'all'}`);\n    },\n  )(Nfts),\n);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport { type IAnchorPosition } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\n\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMenuPosition from '../../../../hooks/useMenuPosition';\n\nimport Button from '../../../ui/Button';\nimport { type DropdownItem } from '../../../ui/Dropdown';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ninterface StateProps {\n  byAddress?: Record<string, ApiNft>;\n  selectedAddresses?: string[];\n  currentCollectionAddress?: string;\n}\n\nconst MENU_ITEMS: DropdownItem[] = [{\n  name: 'Send',\n  value: 'send',\n},\n...(!IS_CORE_WALLET ? [{\n  name: 'Hide',\n  value: 'hide',\n}] : []), {\n  name: 'Burn',\n  value: 'burn',\n  isDangerous: true,\n}, {\n  name: 'Select All',\n  value: 'select-all',\n  withSeparator: true,\n}];\n\nfunction NftSelectionHeader({ selectedAddresses, byAddress, currentCollectionAddress }: StateProps) {\n  const {\n    selectAllNfts, clearNftsSelection, startTransfer, burnNfts, openHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n  const amount = selectedAddresses?.length ?? 1;\n  const isActive = Boolean(selectedAddresses?.length);\n\n  useHistoryBack({\n    isActive,\n    onBack: clearNftsSelection,\n  });\n\n  useEffect(() => (isActive ? captureEscKeyListener(clearNftsSelection) : undefined), [isActive]);\n\n  const handleSendClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    startTransfer({\n      isPortrait: getIsPortrait(),\n      nfts,\n    });\n  });\n\n  const handleBurnClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    burnNfts({ nfts });\n  });\n\n  const handleHideClick = useLastCallback(() => {\n    clearNftsSelection();\n\n    openHideNftModal({ addresses: selectedAddresses!, isCollection: false });\n  });\n\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuPosition);\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLButtonElement>(null);\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuPosition({ x, y });\n  });\n  const handleMenuClose = useLastCallback(() => {\n    setMenuPosition(undefined);\n  });\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleMenuItemClick = useLastCallback((value: string) => {\n    switch (value) {\n      case 'send': {\n        handleSendClick();\n        break;\n      }\n      case 'hide': {\n        handleHideClick();\n        break;\n      }\n      case 'burn': {\n        handleBurnClick();\n        break;\n      }\n      case 'select-all': {\n        selectAllNfts({ collectionAddress: currentCollectionAddress });\n        break;\n      }\n    }\n  });\n\n  return (\n    <div className={styles.root}>\n      <Button className={styles.backButton} isSimple isText onClick={clearNftsSelection}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n      <div className={styles.content}>\n        <div className={styles.title}>\n          {amount > 1 ? lang('%amount% NFTs Selected', { amount }) : lang('1 NFT Selected')}\n        </div>\n      </div>\n      <div>\n        <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n          <i className=\"icon-menu-dots\" aria-hidden />\n        </Button>\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          withPortal\n          shouldTranslateOptions\n          menuPositionHorizontal=\"right\"\n          menuPosition={positionY}\n          menuStyle={menuStyle}\n          transformOriginX={transformOriginX}\n          transformOriginY={transformOriginY}\n          buttonClassName={styles.menuItem}\n          bubbleClassName={styles.menu}\n          items={MENU_ITEMS}\n          onSelect={handleMenuItemClick}\n          onClose={handleMenuClose}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    selectedAddresses, byAddress, currentCollectionAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return { selectedAddresses, byAddress, currentCollectionAddress };\n})(NftSelectionHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"contentPanel\":\"i_rtpHaE\",\"landscapeContentPanel\":\"UzEmZry2\",\"container\":\"wmmKI_Q8\",\"landscapeContainer\":\"xwYhKvej\",\"assetsPanel\":\"LsCBKsIM\",\"portraitContainer\":\"joLgqn25\",\"tabsContainer\":\"qxl4O9Cg\",\"tabsContainerStuck\":\"dFLD_EZz\",\"tabsContent\":\"VjN3P9Zv\",\"tabs\":\"q8lTUtx5\",\"tab\":\"Sd0JpmLp\",\"slides\":\"vxe8iSc4\",\"slide\":\"MU2eE1B1\"};","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\nimport { ContentTab, SettingsState } from '../../../../global/types';\n\nimport {\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  IS_TELEGRAM_APP,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  NOTCOIN_VOUCHERS_ADDRESS,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n} from '../../../../config';\nimport { requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport { getIsActiveStakingState } from '../../../../global/helpers/staking';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectEnabledTokensCountMemoizedFor,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getStatusBarHeight } from '../../../../util/capacitor';\nimport { captureEvents, SwipeDirection } from '../../../../util/captureEvents';\nimport { getTelegramApp } from '../../../../util/telegram';\nimport { IS_TOUCH_ENV, STICKY_CARD_INTERSECTION_THRESHOLD } from '../../../../util/windowEnvironment';\nimport windowSize from '../../../../util/windowSize';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport CategoryHeader from '../../../explore/CategoryHeader';\nimport Explore from '../../../explore/Explore';\nimport TabList from '../../../ui/TabList';\nimport Transition from '../../../ui/Transition';\nimport HideNftModal from '../../modals/HideNftModal';\nimport Activity from './Activities';\nimport Assets from './Assets';\nimport NftCollectionHeader from './NftCollectionHeader';\nimport Nfts from './Nfts';\nimport NftSelectionHeader from './NftSelectionHeader';\n\nimport styles from './Content.module.scss';\n\ninterface OwnProps {\n  onStakedTokenClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokensCount: number;\n  nfts?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  selectedAddresses?: string[];\n  activeContentTab?: ContentTab;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  states?: ApiStakingState[];\n  hasVesting: boolean;\n  isFullscreen?: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  currentSiteCategoryId?: number;\n}\n\nlet activeNftKey = 0;\n\nfunction Content({\n  activeContentTab,\n  tokensCount,\n  nfts,\n  currentCollectionAddress,\n  selectedAddresses,\n  onStakedTokenClick,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  selectedNftsToHide,\n  states,\n  hasVesting,\n  isFullscreen,\n  currentSiteCategoryId,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    showTokenActivity,\n    setActiveContentTab,\n    openNftCollection,\n    closeNftCollection,\n    openSettingsWithState,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  // eslint-disable-next-line no-null/no-null\n  const tabsRef = useRef<HTMLDivElement>(null);\n  const hasNftSelection = Boolean(selectedAddresses?.length);\n\n  const numberOfStaking = useMemo(() => {\n    return states?.filter(getIsActiveStakingState).length ?? 0;\n  }, [states]);\n\n  useSyncEffect(() => {\n    if (currentCollectionAddress) {\n      activeNftKey += 1;\n    } else {\n      activeNftKey = 0;\n    }\n  }, [currentCollectionAddress]);\n\n  const handleNftCollectionClick = useLastCallback((address: string) => {\n    openNftCollection({ address }, { forceOnHeavyAnimation: true });\n  });\n\n  const handleNftsMenuButtonClick = useLastCallback((value: string) => {\n    if (value === 'hidden_nfts') {\n      openSettingsWithState({ state: SettingsState.HiddenNfts });\n    } else {\n      handleNftCollectionClick(value);\n    }\n  });\n\n  const nftCollections = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n    const collections = Object.values(nfts ?? {})\n      .filter((nft) => (\n        !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n      ) && !blacklistedNftAddressesSet.has(nft.address))\n      .reduce((acc, nft) => {\n        if (nft.collectionAddress) {\n          acc[nft.collectionAddress] = nft.collectionName || lang('Unnamed collection');\n        }\n\n        return acc;\n      }, {} as Record<string, string>);\n    const collentionAddresses = Object.keys(collections);\n    collentionAddresses.sort((left, right) => collections[left].localeCompare(collections[right]));\n\n    return collentionAddresses.map<DropdownItem>((key) => {\n      return {\n        id: key,\n        name: collections[key],\n        value: key,\n      };\n    });\n  }, [lang, nfts, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  const shouldRenderHiddenNftsSection = useMemo(() => {\n    if (IS_CORE_WALLET) return false;\n\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    return Object.values(nfts ?? {}).some(\n      (nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden,\n    );\n  }, [blacklistedNftAddresses, nfts]);\n\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n\n  const totalTokensAmount = tokensCount + (hasVesting ? 1 : 0) + numberOfStaking;\n  const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n    isPortrait ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n  );\n\n  const tabs = useMemo(\n    () => [\n      ...(\n        !shouldShowSeparateAssetsPanel\n          ? [{ id: ContentTab.Assets, title: lang('Assets'), className: styles.tab }]\n          : []\n      ),\n      { id: ContentTab.Activity, title: lang('Activity'), className: styles.tab },\n      ...(!isPortrait && !IS_CORE_WALLET\n        ? [{ id: ContentTab.Explore, title: lang('Explore'), className: styles.tab }]\n        : []),\n      {\n        id: ContentTab.Nft,\n        title: lang('NFT'),\n        className: styles.tab,\n        menuItems: shouldRenderHiddenNftsSection\n          ? [\n            ...nftCollections,\n            {\n              name: lang('Hidden NFTs'),\n              value: 'hidden_nfts',\n              withSeparator: true,\n            } as DropdownItem,\n          ]\n          : nftCollections,\n        onMenuItemClick: handleNftsMenuButtonClick,\n      },\n      ...(nftCollections.some(({ value }) => value === NOTCOIN_VOUCHERS_ADDRESS) ? [{\n        id: ContentTab.NotcoinVouchers,\n        title: 'NOT Vouchers',\n        className: styles.tab,\n      }] : []),\n    ],\n    [lang, nftCollections, shouldShowSeparateAssetsPanel, shouldRenderHiddenNftsSection, isPortrait],\n  );\n\n  const activeTabIndex = useMemo(\n    () => {\n      const tabIndex = tabs.findIndex((tab) => tab.id === activeContentTab);\n\n      if (tabIndex === -1) {\n        return ContentTab.Assets;\n      }\n\n      return tabIndex;\n    },\n    [tabs, activeContentTab],\n  );\n\n  useEffectOnce(() => {\n    if (activeContentTab === undefined) {\n      setActiveContentTab({ tab: ContentTab.Assets });\n    }\n  });\n\n  const handleSwitchTab = useLastCallback((tab: ContentTab) => {\n    if (tab === ContentTab.NotcoinVouchers) {\n      selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n      setActiveContentTab({ tab: ContentTab.Nft });\n      handleNftCollectionClick(NOTCOIN_VOUCHERS_ADDRESS);\n\n      return;\n    }\n\n    selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n    setActiveContentTab({ tab });\n  });\n\n  useHistoryBack({\n    isActive: activeTabIndex !== 0,\n    onBack: () => handleSwitchTab(ContentTab.Assets),\n  });\n\n  useEffect(() => {\n    const stickyElm = tabsRef.current;\n    if (!isPortrait || !stickyElm) return undefined;\n\n    const safeAreaTop = IS_CAPACITOR\n      ? getStatusBarHeight()\n      : IS_TELEGRAM_APP\n        ? getTelegramApp()!.safeAreaInset.top + getTelegramApp()!.contentSafeAreaInset.top\n        : windowSize.get().safeAreaTop;\n    const rootMarginTop = STICKY_CARD_INTERSECTION_THRESHOLD - safeAreaTop - 1;\n\n    const observer = new IntersectionObserver(([e]) => {\n      requestMutation(() => {\n        e.target.classList.toggle(styles.tabsContainerStuck, e.intersectionRatio < 1);\n      });\n    }, {\n      rootMargin: `${rootMarginTop}px 0px 0px 0px`,\n      threshold: [1],\n    });\n    observer.observe(stickyElm);\n\n    return () => {\n      observer.unobserve(stickyElm);\n    };\n  }, [isPortrait, tabsRef, isFullscreen]);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureEvents(transitionRef.current!, {\n      includedClosestSelector: '.swipe-container',\n      excludedClosestSelector: '.dapps-feed',\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Left) {\n          const tab = tabs[Math.min(tabs.length - 1, activeTabIndex + 1)];\n          handleSwitchTab(tab.id);\n          return true;\n        } else if (direction === SwipeDirection.Right) {\n          if (currentCollectionAddress) {\n            closeNftCollection();\n          } else {\n            const tab = tabs[Math.max(0, activeTabIndex - 1)];\n            handleSwitchTab(tab.id);\n          }\n          return true;\n        }\n\n        return false;\n      },\n      selectorToPreventScroll: '.custom-scroll',\n    });\n  }, [tabs, handleSwitchTab, activeTabIndex, currentCollectionAddress]);\n\n  const handleClickAsset = useLastCallback((slug: string) => {\n    showTokenActivity({ slug });\n  });\n\n  const containerClassName = buildClassName(\n    styles.container,\n    IS_TOUCH_ENV && 'swipe-container',\n    isPortrait ? styles.portraitContainer : styles.landscapeContainer,\n  );\n\n  function renderTabsPanel() {\n    if (hasNftSelection) {\n      return <NftSelectionHeader />;\n    }\n\n    if (!isPortrait && currentSiteCategoryId) {\n      return <CategoryHeader id={currentSiteCategoryId} />;\n    }\n\n    return currentCollectionAddress ? <NftCollectionHeader key=\"collection\" /> : (\n      <TabList\n        tabs={tabs}\n        activeTab={activeTabIndex}\n        onSwitchTab={handleSwitchTab}\n        className={buildClassName(styles.tabs, 'content-tabslist')}\n      />\n    );\n  }\n\n  function renderCurrentTab(isActive: boolean) {\n    // When assets are shown separately, there is effectively no tab with index 0,\n    // so we fall back to next tab to not break parent's component logic.\n    if (activeTabIndex === 0 && shouldShowSeparateAssetsPanel) {\n      return <Activity isActive={isActive} totalTokensAmount={totalTokensAmount} />;\n    }\n\n    switch (tabs[activeTabIndex].id) {\n      case ContentTab.Assets:\n        return <Assets isActive={isActive} onTokenClick={handleClickAsset} onStakedTokenClick={onStakedTokenClick} />;\n      case ContentTab.Activity:\n        return <Activity isActive={isActive} totalTokensAmount={totalTokensAmount} />;\n      case ContentTab.Nft:\n        return (\n          <Transition\n            activeKey={activeNftKey}\n            name={isPortrait ? 'slide' : 'slideFade'}\n            className=\"nfts-container\"\n          >\n            <Nfts key={currentCollectionAddress || 'all'} isActive={isActive} />\n          </Transition>\n        );\n      case ContentTab.Explore:\n        return <Explore isActive={isActive} />;\n      default:\n        return undefined;\n    }\n  }\n\n  function renderContent() {\n    const activeKey = hasNftSelection || (!isPortrait && currentSiteCategoryId)\n      ? 2\n      : (currentCollectionAddress ? 1 : 0);\n\n    return (\n      <>\n        <div ref={tabsRef} className={styles.tabsContainer}>\n          <Transition activeKey={activeKey} name=\"slideFade\" className={styles.tabsContent}>\n            {renderTabsPanel()}\n          </Transition>\n        </div>\n        <Transition\n          ref={transitionRef}\n          name={isPortrait ? 'slide' : 'slideFade'}\n          activeKey={activeTabIndex}\n          renderCount={tabs.length}\n          className={buildClassName(styles.slides, 'content-transition')}\n          slideClassName={buildClassName(styles.slide, 'custom-scroll')}\n        >\n          {renderCurrentTab}\n        </Transition>\n      </>\n    );\n  }\n\n  return (\n    <div className={containerClassName}>\n      {shouldShowSeparateAssetsPanel && (\n        <div className={styles.assetsPanel}>\n          <Assets\n            isActive\n            isSeparatePanel\n            onStakedTokenClick={onStakedTokenClick}\n            onTokenClick={handleClickAsset}\n          />\n        </div>\n      )}\n      <div className={buildClassName(isPortrait ? styles.contentPanel : styles.landscapeContentPanel)}>\n        {renderContent()}\n      </div>\n      <HideNftModal\n        isOpen={Boolean(selectedNftsToHide?.addresses.length)}\n        selectedNftsToHide={selectedNftsToHide}\n      />\n\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const {\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        vesting,\n        nfts: {\n          byAddress: nfts,\n          currentCollectionAddress,\n          selectedAddresses,\n        } = {},\n        currentSiteCategoryId,\n      } = selectCurrentAccountState(global) ?? {};\n\n      const tokens = selectCurrentAccountTokens(global);\n      const tokensCount = selectEnabledTokensCountMemoizedFor(global.currentAccountId!)(tokens);\n      const hasVesting = Boolean(vesting?.info?.length);\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n\n      return {\n        nfts,\n        currentCollectionAddress,\n        selectedAddresses,\n        tokensCount,\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        states,\n        hasVesting,\n        currentSiteCategoryId,\n        isFullscreen: global.isFullscreen,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Content),\n);\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { Theme } from '../global/types';\n\ninterface Props {\n  isActive: boolean;\n  currentTheme: Theme;\n  lightColor: string;\n  darkColor: string;\n}\n\nexport default function useBrowserUiColor({\n  isActive,\n  currentTheme,\n  lightColor,\n  darkColor,\n}: Props) {\n  useEffect(() => {\n    const metaElementLight = getThemeColorMetaElement(true);\n    const metaElementDark = getThemeColorMetaElement();\n    const lightContent = currentTheme === 'dark' ? darkColor : lightColor;\n    const darkContent = currentTheme === 'light' ? lightColor : darkColor;\n\n    if (isActive) {\n      metaElementLight.setAttribute('content', lightContent);\n      metaElementDark.setAttribute('content', darkContent);\n    }\n\n    return () => {\n      metaElementLight.remove();\n      metaElementDark.remove();\n    };\n  }, [lightColor, isActive, darkColor, currentTheme]);\n}\n\nfunction getThemeColorMetaElement(isLight?: boolean) {\n  let metaThemeColor = document.querySelector(\n    `meta[name=\"theme-color\"][media=\"(prefers-color-scheme: ${isLight ? 'light' : 'dark'})\"]`,\n  );\n\n  if (!metaThemeColor) {\n    metaThemeColor = document.createElement('meta');\n    metaThemeColor.setAttribute('name', 'theme-color');\n    metaThemeColor.setAttribute('media', `(prefers-color-scheme: ${isLight ? 'light' : 'dark'})`);\n    document.getElementsByTagName('head')[0].appendChild(metaThemeColor);\n  }\n\n  return metaThemeColor;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"nDlx2B3w\",\"container\":\"H35Oa6Xc\",\"testnetWarning\":\"FeOh0iRA\",\"wrapper\":\"PUMHiqAW\",\"wrapper_landscape\":\"j9PIExiC\",\"wrapperLandscape\":\"j9PIExiC\",\"icon\":\"l3sBnS54\",\"text\":\"WFekTm0y\",\"closeButton\":\"tQS1IhkF\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { Theme } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useBrowserUiColor from '../../../../hooks/useBrowserUiColor';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  isRequired: boolean;\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  theme: Theme;\n};\n\nconst UI_BG_RED_LIGHT = '#F36A6B';\nconst UI_BG_RED_DARK = '#C44646';\n\nfunction BackupWarning({ isRequired, theme, onOpenBackupWallet }: OwnProps & StateProps) {\n  const { shouldRender, transitionClassNames } = useShowTransition(isRequired, undefined, true);\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  useBrowserUiColor({\n    isActive: isRequired,\n    currentTheme: theme,\n    lightColor: UI_BG_RED_LIGHT,\n    darkColor: UI_BG_RED_DARK,\n  });\n\n  const handleClick = () => {\n    onOpenBackupWallet();\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape, transitionClassNames)}\n      onClick={handleClick}\n    >\n      {lang('Wallet is not backed up')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>\n        {lang('Back up wallet to have full access to it')}\n      </p>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      return {\n        theme: global.settings.theme,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(BackupWarning),\n);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { MYTONWALLET_PROMO_URL } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { openUrl } from '../../../../util/openUrl';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype StateProps = {\n  isSecurityWarningHidden?: boolean;\n};\n\nfunction SecurityWarning({ isSecurityWarningHidden }: StateProps) {\n  const { closeSecurityWarning } = getActions();\n\n  const { shouldRender, transitionClassNames } = useShowTransition(!isSecurityWarningHidden, undefined, true);\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  function handleClick() {\n    void openUrl(MYTONWALLET_PROMO_URL);\n  }\n\n  const handleClose = useLastCallback((e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n\n    closeSecurityWarning();\n  });\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape, transitionClassNames)}\n      onClick={handleClick}\n    >\n      {lang('Consider More Secure Version')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>{lang('Install our native app or browser extension.')}</p>\n\n      <button type=\"button\" className={styles.closeButton} aria-label={lang('Close')} onClick={handleClose}>\n        <i className=\"icon-close\" aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    return {\n      isSecurityWarningHidden: global.settings.isSecurityWarningHidden,\n    };\n  })(SecurityWarning),\n);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport { IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\n\nimport BackupWarning from './BackupWarning';\nimport SecurityWarning from './SecurityWarning';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  isTestnet?: boolean;\n  isBackupRequired: boolean;\n};\n\nconst IS_UNSAFE_WEB = !IS_CORE_WALLET && !IS_ELECTRON && !IS_EXTENSION && !IS_IOS && !IS_ANDROID && !IS_TELEGRAM_APP;\n\nfunction Warnings({ isBackupRequired, isTestnet, onOpenBackupWallet }: OwnProps & StateProps) {\n  const { isPortrait } = useDeviceScreen();\n  const lang = useLang();\n\n  return (\n    <>\n      {isTestnet && (\n        <div className={isPortrait ? styles.portraitContainer : styles.container}>\n          <div className={styles.testnetWarning}>{lang('Testnet Version')}</div>\n        </div>\n      )}\n\n      <BackupWarning isRequired={isBackupRequired} onOpenBackupWallet={onOpenBackupWallet} />\n      {IS_UNSAFE_WEB && <SecurityWarning />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      return {\n        isBackupRequired: Boolean(selectCurrentAccountState(global)?.isBackupRequired),\n        isTestnet: global.settings.isTestnet,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Warnings),\n);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState } from '../../api/types';\nimport { ActiveTab, ContentTab, type Theme } from '../../global/types';\n\nimport { IS_CAPACITOR, IS_CORE_WALLET } from '../../config';\nimport { getStakingStateStatus } from '../../global/helpers/staking';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n} from '../../global/selectors';\nimport { useAccentColor } from '../../util/accentColor';\nimport buildClassName from '../../util/buildClassName';\nimport { getStatusBarHeight } from '../../util/capacitor';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport { setStatusBarStyle } from '../../util/switchTheme';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_TOUCH_ENV, STICKY_CARD_INTERSECTION_THRESHOLD,\n} from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePreventPinchZoomGesture from '../../hooks/usePreventPinchZoomGesture';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport InvoiceModal from '../receive/InvoiceModal';\nimport ReceiveModal from '../receive/ReceiveModal';\nimport StakeModal from '../staking/StakeModal';\nimport StakingClaimModal from '../staking/StakingClaimModal';\nimport StakingInfoModal from '../staking/StakingInfoModal';\nimport UnstakeModal from '../staking/UnstakeModal';\nimport UpdateAvailable from '../ui/UpdateAvailable';\nimport VestingModal from '../vesting/VestingModal';\nimport VestingPasswordModal from '../vesting/VestingPasswordModal';\nimport { LandscapeActions, PortraitActions } from './sections/Actions';\nimport Card from './sections/Card';\nimport StickyCard from './sections/Card/StickyCard';\nimport Content from './sections/Content';\nimport Warnings from './sections/Warnings';\n\nimport styles from './Main.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  currentTokenSlug?: string;\n  stakingState?: ApiStakingState;\n  isTestnet?: boolean;\n  isLedger?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n};\n\nconst UPDATE_SWAPS_INTERVAL_NOT_FOCUSED = 15000; // 15 sec\nconst UPDATE_SWAPS_INTERVAL = 3000; // 3 sec\n\nfunction Main({\n  isActive,\n  currentTokenSlug,\n  stakingState,\n  isTestnet,\n  isLedger,\n  isStakingInfoModalOpen,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isMediaViewerOpen,\n  theme,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    openBackupWalletModal,\n    setActiveContentTab,\n    closeStakingInfo,\n    openStakingInfoOrStart,\n    changeCurrentStaking,\n    setLandscapeActionsActiveTabIndex,\n    loadExploreSites,\n    openReceiveModal,\n    updatePendingSwaps,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const cardRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const portraitContainerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const landscapeContainerRef = useRef<HTMLDivElement>(null);\n  const [canRenderStickyCard, setCanRenderStickyCard] = useState(false);\n  const [shouldRenderDarkStatusBar, setShouldRenderDarkStatusBar] = useState(false);\n  const safeAreaTop = IS_CAPACITOR ? getStatusBarHeight() : windowSize.get().safeAreaTop;\n  const [isFocused, markIsFocused, unmarkIsFocused] = useFlag(!isBackgroundModeActive());\n\n  const stakingStatus = stakingState ? getStakingStateStatus(stakingState) : 'inactive';\n\n  useBackgroundMode(unmarkIsFocused, markIsFocused);\n\n  useOpenFromMainBottomSheet('receive', openReceiveModal);\n  usePreventPinchZoomGesture(isMediaViewerOpen);\n\n  const { isPortrait, isLandscape } = useDeviceScreen();\n  const {\n    shouldRender: shouldRenderStickyCard,\n    transitionClassNames: stickyCardTransitionClassNames,\n  } = useShowTransition(canRenderStickyCard);\n\n  useEffectOnce(() => {\n    if (IS_CORE_WALLET) return;\n\n    loadExploreSites({ isLandscape });\n  });\n\n  useEffect(() => {\n    setStatusBarStyle({\n      forceDarkBackground: shouldRenderDarkStatusBar,\n    });\n  }, [shouldRenderDarkStatusBar]);\n\n  useInterval(updatePendingSwaps, isFocused ? UPDATE_SWAPS_INTERVAL : UPDATE_SWAPS_INTERVAL_NOT_FOCUSED);\n\n  useEffect(() => {\n    if (!isPortrait || !isActive) {\n      setCanRenderStickyCard(false);\n      return undefined;\n    }\n\n    const rootMarginTop = STICKY_CARD_INTERSECTION_THRESHOLD - safeAreaTop;\n    const observer = new IntersectionObserver((entries) => {\n      const { isIntersecting, boundingClientRect: { left, width } } = entries[0];\n      setCanRenderStickyCard(entries.length > 0 && !isIntersecting && left < width);\n    }, { rootMargin: `${rootMarginTop}px 0px 0px` });\n\n    const cardTopSideObserver = new IntersectionObserver((entries) => {\n      const { isIntersecting } = entries[0];\n\n      setShouldRenderDarkStatusBar(!isIntersecting);\n    }, { rootMargin: `-${safeAreaTop}px 0px 0px`, threshold: [1] });\n    const cardElement = cardRef.current;\n\n    if (cardElement) {\n      observer.observe(cardElement);\n      cardTopSideObserver.observe(cardElement);\n    }\n\n    return () => {\n      if (cardElement) {\n        observer.unobserve(cardElement);\n        cardTopSideObserver.unobserve(cardElement);\n        setShouldRenderDarkStatusBar(false);\n      }\n    };\n  }, [isActive, isPortrait, safeAreaTop]);\n\n  const handleTokenCardClose = useLastCallback(() => {\n    selectToken({ slug: undefined });\n    setActiveContentTab({ tab: ContentTab.Assets });\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isPortrait || !portraitContainerRef.current || !currentTokenSlug) {\n      return undefined;\n    }\n\n    return captureEvents(portraitContainerRef.current!, {\n      excludedClosestSelector: '.token-card',\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Right) {\n          handleTokenCardClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [currentTokenSlug, handleTokenCardClose, isPortrait]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor(isPortrait ? portraitContainerRef : landscapeContainerRef, appTheme, accentColorIndex);\n\n  const handleEarnClick = useLastCallback((stakingId?: string) => {\n    if (stakingId) changeCurrentStaking({ stakingId });\n\n    if (isPortrait) {\n      openStakingInfoOrStart();\n    } else {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n  });\n\n  function renderPortraitLayout() {\n    return (\n      <div ref={portraitContainerRef} className={styles.portraitContainer}>\n        <div className={styles.head}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n          <Card\n            ref={cardRef}\n            forceCloseAccountSelector={shouldRenderStickyCard}\n            onTokenCardClose={handleTokenCardClose}\n            onYieldClick={handleEarnClick}\n          />\n          {shouldRenderStickyCard && (\n            <StickyCard\n              classNames={stickyCardTransitionClassNames}\n            />\n          )}\n          <PortraitActions\n            isTestnet={isTestnet}\n            stakingStatus={stakingStatus}\n            isLedger={isLedger}\n            isSwapDisabled={isSwapDisabled}\n            isOnRampDisabled={isOnRampDisabled}\n            onEarnClick={handleEarnClick}\n          />\n        </div>\n\n        <Content onStakedTokenClick={handleEarnClick} />\n      </div>\n    );\n  }\n\n  function renderLandscapeLayout() {\n    return (\n      <div ref={landscapeContainerRef} className={styles.landscapeContainer}>\n        <div className={buildClassName(styles.sidebar, 'custom-scroll')}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n          <Card onTokenCardClose={handleTokenCardClose} onYieldClick={handleEarnClick} />\n          <LandscapeActions stakingStatus={stakingStatus} isLedger={isLedger} theme={theme} />\n        </div>\n        <div className={styles.main}>\n          <Content onStakedTokenClick={handleEarnClick} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {!IS_DELEGATED_BOTTOM_SHEET && (isPortrait ? renderPortraitLayout() : renderLandscapeLayout())}\n\n      <StakeModal />\n      <StakingInfoModal isOpen={isStakingInfoModalOpen} onClose={closeStakingInfo} />\n      <ReceiveModal />\n      <InvoiceModal />\n      <UnstakeModal />\n      <StakingClaimModal />\n      <VestingModal />\n      <VestingPasswordModal />\n      {!IS_ELECTRON && !IS_DELEGATED_BOTTOM_SHEET && <UpdateAvailable />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const { ledger } = selectCurrentAccount(global) || {};\n      const accountState = selectCurrentAccountState(global);\n      const { currentTokenSlug } = accountState ?? {};\n\n      const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n\n      const stakingState = global.currentAccountId\n        ? selectAccountStakingState(global, global.currentAccountId)\n        : undefined;\n\n      return {\n        stakingState,\n        currentTokenSlug,\n        isTestnet: global.settings.isTestnet,\n        isLedger: Boolean(ledger),\n        isStakingInfoModalOpen: global.isStakingInfoModalOpen,\n        isMediaViewerOpen: Boolean(global.mediaViewer?.mediaId),\n        isSwapDisabled,\n        isOnRampDisabled,\n        theme: global.settings.theme,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Main),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"c4YKj_bz\",\"head\":\"rfAUzAO1\",\"landscapeContainer\":\"nZyFvDbE\",\"sidebar\":\"mpB6taR7\",\"main\":\"Sr6Y7sw5\"};","import React, { memo } from '../../../lib/teact/teact';\n\nimport { IS_CAPACITOR } from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\n\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  onClearError: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AddAccountPasswordModal({\n  isActive,\n  isLoading,\n  error,\n  onClearError,\n  onSubmit,\n  onBack,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        operationType=\"passcode\"\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={onClearError}\n      />\n    </>\n  );\n}\n\nexport default memo(AddAccountPasswordModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"ZNc8nV1w\",\"modalContent\":\"BGrP96yj\",\"modalText\":\"KUwFv7ti\",\"button\":\"LBe89K7I\",\"button_single\":\"MTmELA24\",\"buttonSingle\":\"MTmELA24\",\"modalButtons\":\"cYtg8tBc\",\"importText\":\"nnhxqZYR\",\"importButtons\":\"Gnbk4xJi\",\"importButtonsWithMargin\":\"yX8s5GFD\",\"sticker\":\"EZgbjNjA\",\"ledgerButton\":\"BB2l0HAn\",\"walletVersionBlock\":\"Ai_X8CqD\",\"walletVersionText\":\"d8gw7TAv\"};","import React, { memo, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { LedgerWalletInfo } from '../../../util/ledger/types';\nimport { type Account, type HardwareConnectState, SettingsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, APP_NAME } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { selectFirstNonHardwareAccount, selectNetworkAccounts } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_LEDGER_SUPPORTED } from '../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport LedgerConnect from '../../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../../ledger/LedgerSelectWallets';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\nimport AddAccountPasswordModal from './AddAccountPasswordModal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './AddAccountModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isLoading?: boolean;\n  error?: string;\n\n  firstNonHardwareAccount?: Account;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isOtherVersionsExist?: boolean;\n}\n\nconst enum RenderingState {\n  Initial,\n  Password,\n\n  ConnectHardware,\n  SelectAccountsHardware,\n}\n\nfunction AddAccountModal({\n  isOpen,\n  isLoading,\n  error,\n  hardwareWallets,\n  firstNonHardwareAccount,\n  accounts,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isOtherVersionsExist,\n}: StateProps) {\n  const {\n    addAccount,\n    clearAccountError,\n    closeAddAccountModal,\n    afterSelectHardwareWallets,\n    openSettingsWithState,\n    clearAccountLoading,\n  } = getActions();\n\n  const lang = useLang();\n  const [renderingKey, setRenderingKey] = useState<number>(RenderingState.Initial);\n\n  const [isNewAccountImporting, setIsNewAccountImporting] = useState<boolean>(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    clearAccountError();\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    setIsNewAccountImporting(false);\n    clearAccountLoading();\n  });\n\n  const handleNewAccountClick = useLastCallback(() => {\n    if (!firstNonHardwareAccount) {\n      addAccount({\n        method: 'createAccount',\n        password: '',\n      });\n      return;\n    }\n\n    setRenderingKey(RenderingState.Password);\n    setIsNewAccountImporting(false);\n  });\n\n  const handleImportAccountClick = useLastCallback(() => {\n    if (!firstNonHardwareAccount) {\n      addAccount({\n        method: 'importMnemonic',\n        password: '',\n      });\n      return;\n    }\n\n    setRenderingKey(RenderingState.Password);\n    setIsNewAccountImporting(true);\n  });\n\n  const handleImportHardwareWalletClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.ConnectHardware);\n  });\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    closeAddAccountModal();\n  });\n\n  const handleHardwareWalletConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setRenderingKey(RenderingState.SelectAccountsHardware);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isNewAccountImporting ? 'importMnemonic' : 'createAccount', password });\n  });\n\n  const handleOpenSettingWalletVersion = useLastCallback(() => {\n    closeAddAccountModal();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  function renderSelector(isActive?: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Add Wallet')} onClose={closeAddAccountModal} />\n        <AnimatedIconWithPreview\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n          tgsUrl={ANIMATED_STICKERS_PATHS.forge}\n          previewUrl={ANIMATED_STICKERS_PATHS.forgePreview}\n        />\n        <p className={styles.modalText}>\n          {renderText(lang('$add_account_description1', { app_name: APP_NAME }))}\n        </p>\n\n        <div className={styles.modalButtons}>\n          <Button\n            isPrimary\n            className={buildClassName(styles.button, styles.button_single)}\n            onClick={handleNewAccountClick}\n          >\n            {lang('Create Wallet')}\n          </Button>\n          <span className={styles.importText}>{lang('or import from')}</span>\n          <div className={buildClassName(\n            styles.importButtons,\n            !isOtherVersionsExist && styles.importButtonsWithMargin,\n          )}\n          >\n            <Button\n              className={buildClassName(styles.button, !IS_LEDGER_SUPPORTED && styles.button_single)}\n              onClick={handleImportAccountClick}\n            >\n              {lang('Secret Words')}\n            </Button>\n            {IS_LEDGER_SUPPORTED && (\n              <Button\n                className={buildClassName(styles.button, styles.ledgerButton)}\n                onClick={handleImportHardwareWalletClick}\n              >\n                {lang('Ledger')}\n              </Button>\n            )}\n          </div>\n          {isOtherVersionsExist && (\n            <div className={styles.walletVersionBlock}>\n              <span>\n                {lang('$wallet_switch_version_1', {\n                  action: (\n                    <div\n                      role=\"button\"\n                      tabIndex={0}\n                      onClick={handleOpenSettingWalletVersion}\n                      className={styles.walletVersionText}\n                    >\n                      {lang('$wallet_switch_version_2')}\n                    </div>\n                  ),\n                })}\n              </span>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case RenderingState.Initial:\n        return renderSelector(isActive);\n      case RenderingState.Password:\n        return (\n          <AddAccountPasswordModal\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onClearError={clearAccountError}\n            onSubmit={handleSubmit}\n            onBack={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleHardwareWalletConnected}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.SelectAccountsHardware:\n        return (\n          <LedgerSelectWallets\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"add-account\"\n      forceFullNative={renderingKey === RenderingState.Password}\n      onCloseAnimationEnd={handleModalClose}\n      onClose={closeAddAccountModal}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={renderingKey === RenderingState.Initial ? RenderingState.Password : undefined}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const { byId: versionById } = global.walletVersions ?? {};\n  const versions = versionById?.[global.currentAccountId!];\n  const isOtherVersionsExist = !!versions?.length;\n\n  const {\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    isOpen: global.isAddAccountModalOpen,\n    isLoading: global.accounts?.isLoading,\n    error: global.accounts?.error,\n\n    accounts,\n    firstNonHardwareAccount,\n    hardwareState,\n    hardwareWallets,\n    isLedgerConnected,\n    isTonAppConnected,\n    isOtherVersionsExist,\n  };\n})(AddAccountModal));\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsForm from '../common/backup/CheckWordsForm';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isInModal?: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n  buttonLabel: string;\n  onSubmit: NoneToVoidFunction;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicCheck({\n  isActive, isInModal, mnemonic, checkIndexes, buttonLabel, onCancel, onSubmit, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Let\\'s Check!')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          {lang('Lets make sure your secrets words are recorded correctly.')}\n        </p>\n\n        <CheckWordsForm\n          descriptionClassName={buildClassName(styles.info, styles.small)}\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n          isInModal={isInModal}\n          errorClassName={buildClassName(styles.error, styles.small)}\n          onSubmit={onSubmit}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button}>{lang('Back')}</Button>\n          <Button isPrimary forFormId=\"check_mnemonic_form\" className={modalStyles.button}>{buttonLabel}</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicCheck);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsList from '../common/backup/SecretWordsList';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onClose: NoneToVoidFunction;\n  onNext?: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, mnemonic, onNext, onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const wordsCount = mnemonic?.length || 0;\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('%1$d Secret Words', wordsCount) as string} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <SecretWordsList mnemonic={mnemonic} />\n        {onNext && (\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={onNext}>{lang('Let\\'s Check')}</Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  privateKeyHex?: string;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, privateKeyHex, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Private Key')} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          <Emoji from=\"\" />{' '}{renderText(lang('$mnemonic_warning'))}\n        </p>\n        <p className={styles.privateKey}>\n          {privateKeyHex}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onSubmit: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction SafetyRules({ isActive, onSubmit, onClose }: OwnProps) {\n  const lang = useLang();\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n  const canSubmit = writedownAccepted && openWalletAccepted && canBeStolenAccepted;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Safety Rules')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <SafetyRulesContent\n          customStickerClassName={styles.modalSticker}\n          customButtonWrapperClassName={modalStyles.buttons}\n          isFullSizeButton={false}\n          isActive={isActive}\n          isFirstCheckboxSelected={writedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          onFirstCheckboxClick={setWritedownAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SafetyRules);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { IS_CAPACITOR, MNEMONIC_COUNT } from '../../../config';\nimport { selectMnemonicForCheck } from '../../../global/actions/api/auth';\nimport { selectCurrentAccountState } from '../../../global/selectors';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { callApi } from '../../../api';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport MnemonicCheck from '../../auth/MnemonicCheck';\nimport MnemonicList from '../../auth/MnemonicList';\nimport MnemonicPrivateKey from '../../auth/MnemonicPrivateKey';\nimport SafetyRules from '../../auth/SafetyRules';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './BackupModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  currentAccountId?: string;\n  isBackupRequired?: boolean;\n};\n\nenum SLIDES {\n  confirm,\n  password,\n  mnemonic,\n  check,\n}\n\nfunction BackupModal({\n  isOpen, currentAccountId, onClose, isBackupRequired,\n}: OwnProps & StateProps) {\n  const { setIsBackupRequired, setIsPinAccepted, clearIsPinAccepted } = getActions();\n\n  const lang = useLang();\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.password);\n  const [checkIndexes, setCheckIndexes] = useState<number[]>([]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | undefined>();\n\n  const mnemonicRef = useRef<string[] | undefined>(undefined);\n  const noResetFullNativeOnBlur = currentSlide === SLIDES.confirm || currentSlide === SLIDES.password;\n\n  useEffect(() => {\n    mnemonicRef.current = undefined;\n  }, [isOpen]);\n\n  const handleSafetyConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.mnemonic);\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    setIsLoading(true);\n    mnemonicRef.current = await callApi('fetchMnemonic', currentAccountId!, password);\n\n    if (!mnemonicRef.current) {\n      setError('Wrong password, please try again.');\n      setIsLoading(false);\n      void vibrateOnError();\n      return;\n    }\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n      clearIsPinAccepted();\n    }\n\n    setIsLoading(false);\n    setNextKey(SLIDES.check);\n    setCurrentSlide(SLIDES.mnemonic);\n  });\n\n  const handleBackupErrorUpdate = useLastCallback(() => {\n    setError(undefined);\n  });\n\n  const handleCheckMnemonic = useLastCallback(() => {\n    setCheckIndexes(selectMnemonicForCheck(mnemonicRef.current?.length || MNEMONIC_COUNT));\n    setCurrentSlide(SLIDES.check);\n    setNextKey(undefined);\n  });\n\n  const handleRestartCheckMnemonic = useLastCallback(() => {\n    setCurrentSlide(SLIDES.mnemonic);\n    setNextKey(SLIDES.check);\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setIsLoading(false);\n    setError(undefined);\n    setCurrentSlide(SLIDES.confirm);\n    setNextKey(SLIDES.password);\n  });\n\n  const handleCheckMnemonicSubmit = useLastCallback(() => {\n    setIsBackupRequired({ isMnemonicChecked: true });\n    onClose();\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    const mnemonic = mnemonicRef.current;\n\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return (\n          <SafetyRules\n            isActive={isActive}\n            onSubmit={handleSafetyConfirm}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.password:\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={onClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error}\n              withCloseButton={IS_CAPACITOR}\n              submitLabel={lang('$back_up_auth')}\n              cancelLabel={lang('Cancel')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={onClose}\n              onUpdate={handleBackupErrorUpdate}\n            />\n          </>\n        );\n\n      case SLIDES.mnemonic:\n        return mnemonic && isMnemonicPrivateKey(mnemonic) ? (\n          <MnemonicPrivateKey\n            privateKeyHex={mnemonic![0]}\n            onClose={onClose}\n          />\n        ) : (\n          <MnemonicList\n            isActive={isActive}\n            mnemonic={mnemonic}\n            onNext={isBackupRequired ? handleCheckMnemonic : undefined}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.check:\n        return (\n          <MnemonicCheck\n            isActive={isActive}\n            isInModal\n            mnemonic={mnemonicRef.current as string[]}\n            checkIndexes={checkIndexes}\n            buttonLabel={lang('Done')}\n            onSubmit={handleCheckMnemonicSubmit}\n            onCancel={handleRestartCheckMnemonic}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"backup\"\n      forceFullNative={currentSlide === SLIDES.password}\n      noResetFullNativeOnBlur={noResetFullNativeOnBlur}\n      onClose={onClose}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isBackupRequired } = selectCurrentAccountState(global) || {};\n  return { currentAccountId: global.currentAccountId, isBackupRequired };\n})(BackupModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"S7OzI0EB\"};","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChain, ApiCountryCode } from '../../../api/types';\nimport type { Theme } from '../../../global/types';\n\nimport { selectAccount } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport useLang from '../../../hooks/useLang';\n\nimport Modal from '../../ui/Modal';\nimport Spinner from '../../ui/Spinner';\n\nimport styles from './OnRampWidgetModal.module.scss';\n\ninterface StateProps {\n  chain?: ApiChain;\n  address?: string;\n  countryCode?: ApiCountryCode;\n  theme: Theme;\n}\n\nconst ANIMATION_TIMEOUT = 200;\n\nfunction OnRampWidgetModal({\n  chain, address, countryCode, theme,\n}: StateProps) {\n  const {\n    closeOnRampWidgetModal,\n    showError,\n  } = getActions();\n\n  const isOpen = Boolean(chain) && Boolean(address);\n  const lang = useLang();\n  const animationTimeoutRef = useRef<number>();\n  const [isAnimationInProgress, setIsAnimationInProgress] = useState(true);\n  const [isLoading, setIsLoading] = useState(true);\n  const [iframeSrc, setIframeSrc] = useState('');\n  const appTheme = useAppTheme(theme);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setIsAnimationInProgress(true);\n      setIsLoading(true);\n      setIframeSrc('');\n    }\n\n    return () => window.clearTimeout(animationTimeoutRef.current);\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n\n    if (countryCode === 'RU') {\n      setIframeSrc(`https://dreamwalkers.io/ru/mytonwallet/?wallet=${address}&give=CARDRUB&take=TON&type=buy`);\n      return;\n    }\n\n    void (async () => {\n      const response = await callApi('getMoonpayOnrampUrl', chain, address!, appTheme);\n\n      if (response && 'error' in response) {\n        showError({ error: response.error });\n      } else {\n        setIframeSrc(response?.url || '');\n      }\n    })();\n  }, [address, appTheme, chain, countryCode, isOpen]);\n\n  const onIframeLoaded = () => {\n    setIsLoading(false);\n\n    animationTimeoutRef.current = window.setTimeout(() => {\n      setIsAnimationInProgress(false);\n    }, ANIMATION_TIMEOUT);\n  };\n\n  function renderContent() {\n    if (!iframeSrc) return undefined;\n\n    return (\n      <iframe\n        title=\"On Ramp Widget\"\n        onLoad={onIframeLoaded}\n        className={buildClassName(styles.iframe, !isLoading && styles.fadeIn)}\n        width=\"100%\"\n        height=\"100%\"\n        frameBorder=\"none\"\n        allow=\"autoplay; camera; microphone; payment\"\n        src={iframeSrc}\n      >\n        {lang('Cannot load widget')}\n      </iframe>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      title={lang('Buy with Card')}\n      dialogClassName={styles.modalDialog}\n      forceFullNative\n      nativeBottomSheetKey=\"onramp-widget\"\n      onClose={closeOnRampWidgetModal}\n    >\n      <div className={styles.content}>\n        <div className={buildClassName(\n          styles.loaderContainer,\n          !isLoading && styles.fadeOut,\n          !isAnimationInProgress && styles.inactive,\n        )}\n        >\n          <Spinner />\n        </div>\n        {renderContent()}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const { countryCode } = global.restrictions;\n  const { chainForOnRampWidgetModal: chain } = global;\n\n  return {\n    chain,\n    address: chain && addressByChain?.[chain],\n    countryCode,\n    theme: global.settings.theme,\n  };\n})(OnRampWidgetModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"LcOFGyVq\",\"content\":\"ccR1JZvK\",\"iframe\":\"l_Jb77z9\",\"loaderContainer\":\"RfEkSEyB\",\"fadeOut\":\"X5xveqOQ\",\"fade-out-opacity\":\"MtIO76aE\",\"fadeOutOpacity\":\"MtIO76aE\",\"fadeIn\":\"ZRxV9CWH\",\"fade-in-opacity\":\"clpdzldq\",\"fadeInOpacity\":\"clpdzldq\",\"inactive\":\"m3F53tk6\"};","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"D1xdmb1p\",\"square\":\"cQ9fX2T7\",\"squareInner\":\"Y5_NorwC\",\"closeButton\":\"CxvvAWsI\",\"flashLightButton\":\"GRYD1l1J\",\"flashLightButtonEnabled\":\"om10jZuu\",\"documentRoot\":\"Fq9FxTrz\",\"scanner\":\"D8GViz8d\",\"scannerStarted\":\"MmIKemUX\"};","import type { StartScanOptions } from '@capacitor-mlkit/barcode-scanning';\nimport { BarcodeFormat, BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\nimport React, { memo, useRef, useState } from '../../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../../../lib/teact/teact-dom';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { pause } from '../../../util/schedulers';\nimport { DPR, IS_DELEGATING_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useEffectOnce from '../../../hooks/useEffectOnce';\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './QrScannerModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ntype Point = [number, number];\ntype Square = [Point, Point, Point, Point];\n\nconst START_SCAN_DELAY_MS = IS_IOS ? 160 : 360;\nconst MODAL_ANIMATION_DURATION_MS = IS_IOS ? 650 : 500;\nconst DESTROY_SCANNER_DELAY_MS = IS_IOS ? 250 : 500;\n\nfunction QrScannerModal({ isOpen, onClose }: OwnProps) {\n  const {\n    handleQrCode,\n  } = getActions();\n\n  const [isFlashlightAvailable, setIsFlashlightAvailable] = useState(false);\n  const [isFlashlightEnabled, setIsFlashlightEnabled] = useState(false);\n  const [isScannerStarted, setIsScannerStarted] = useState(false);\n\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const scanSquareRef = useRef<HTMLDivElement>(null);\n\n  useEffectOnce(() => {\n    void BarcodeScanner\n      .isTorchAvailable()\n      .then((result) => {\n        setIsFlashlightAvailable(result.available);\n      });\n    void BarcodeScanner\n      .isTorchEnabled()\n      .then((result) => {\n        setIsFlashlightEnabled(result.enabled);\n      });\n  });\n\n  const onCloseAnimationEnd = useLastCallback(async () => {\n    removeExtraClass(document.documentElement, styles.documentRoot);\n    await BarcodeScanner.stopScan();\n  });\n\n  const handleClose = useLastCallback(() => {\n    setIsScannerStarted(false);\n    onClose();\n  });\n\n  const startScan = useLastCallback(async () => {\n    const options: StartScanOptions = {\n      formats: [BarcodeFormat.QrCode],\n    };\n\n    const scanAreaCoordinates = getDomNodeDimensions(scanSquareRef.current);\n\n    await BarcodeScanner.removeAllListeners();\n    const listener = await BarcodeScanner.addListener(\n      'barcodeScanned',\n      async (event) => {\n        let { cornerPoints: qrCodeCoordinates } = event.barcode;\n        qrCodeCoordinates = qrCodeCoordinates ? sortCoordinatesClockwise(qrCodeCoordinates) : undefined;\n\n        if (\n          !scanAreaCoordinates\n          || !qrCodeCoordinates\n          || isQrCodeOutsideScanArea(scanAreaCoordinates, qrCodeCoordinates)\n        ) {\n          return;\n        }\n\n        await listener.remove();\n        await vibrateOnSuccess();\n        handleQrCode({ data: event.barcode.rawValue });\n        handleClose();\n        await pause(DESTROY_SCANNER_DELAY_MS);\n        if (IS_IOS) {\n          removeExtraClass(document.documentElement, styles.documentRoot);\n        }\n      },\n    );\n\n    setIsScannerStarted(true);\n    await BarcodeScanner.startScan(options);\n  });\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    let startScanTimeoutId: number;\n    let documentClassModifyTimeoutId: number;\n    if (isOpen) {\n      startScanTimeoutId = window.setTimeout(startScan, START_SCAN_DELAY_MS);\n      documentClassModifyTimeoutId = window.setTimeout(() => {\n        addExtraClass(document.documentElement, styles.documentRoot);\n      }, MODAL_ANIMATION_DURATION_MS);\n    } else if (prevIsOpen) {\n      handleClose();\n    }\n\n    return () => {\n      if (startScanTimeoutId) window.clearTimeout(startScanTimeoutId);\n      if (documentClassModifyTimeoutId) window.clearTimeout(documentClassModifyTimeoutId);\n    };\n  }, [isOpen, handleClose, startScan]);\n\n  const handleFlashlightClick = useLastCallback(async () => {\n    if (isFlashlightEnabled) {\n      await BarcodeScanner.disableTorch();\n    } else {\n      await BarcodeScanner.enableTorch();\n    }\n    setIsFlashlightEnabled(!isFlashlightEnabled);\n  });\n\n  const flashlightButtonClassName = buildClassName(\n    styles.flashLightButton,\n    isFlashlightEnabled && styles.flashLightButtonEnabled,\n  );\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      nativeBottomSheetKey=\"qr-scanner\"\n      forceFullNative\n      onCloseAnimationEnd={onCloseAnimationEnd}\n    >\n      <div className={buildClassName(styles.scanner, isScannerStarted && styles.scannerStarted)}>\n        <div\n          className={styles.closeButton}\n          aria-label={lang('Close')}\n          role=\"button\"\n          tabIndex={0}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </div>\n\n        {isFlashlightAvailable && (\n          <div\n            className={flashlightButtonClassName}\n            onClick={handleFlashlightClick}\n            aria-label={lang('Toggle Flashlight')}\n            role=\"button\"\n            tabIndex={0}\n          >\n            <i className=\"icon-flashlight\" aria-hidden />\n          </div>\n        )}\n\n        <div className={styles.title}>{lang('Scan QR Code')}</div>\n\n        <div className={styles.square} ref={scanSquareRef}>\n          <div className={styles.squareInner} />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(QrScannerModal);\n\nfunction sortCoordinatesClockwise(coordinates: Square): Square {\n  coordinates.sort((a, b) => a[1] - b[1]);\n\n  const topHalf = coordinates.slice(0, 2) as [Point, Point];\n  const bottomHalf = coordinates.slice(2) as [Point, Point];\n\n  topHalf.sort((a, b) => b[0] - a[0]);\n  bottomHalf.sort((a, b) => a[0] - b[0]);\n\n  return [...topHalf, ...bottomHalf];\n}\n\nfunction getDomNodeDimensions(node: HTMLDivElement | null): Square | undefined {\n  if (!node) {\n    return undefined;\n  }\n\n  const scanSquareRect = node.getBoundingClientRect();\n  const scaledRect = {\n    left: scanSquareRect.left * DPR,\n    right: scanSquareRect.right * DPR,\n    top: scanSquareRect.top * DPR,\n    bottom: scanSquareRect.bottom * DPR,\n    width: scanSquareRect.width * DPR,\n    height: scanSquareRect.height * DPR,\n  };\n\n  return [\n    [scaledRect.left, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top + scaledRect.height],\n    [scaledRect.left, scaledRect.top + scaledRect.height],\n  ];\n}\n\nfunction isQrCodeOutsideScanArea(scanArea: Square, qrCodeCoordinates: Square): boolean {\n  return (\n    scanArea[0][0] > qrCodeCoordinates[0][0]\n    || scanArea[0][1] > qrCodeCoordinates[0][1]\n    || scanArea[1][0] < qrCodeCoordinates[1][0]\n    || scanArea[1][1] > qrCodeCoordinates[1][1]\n    || scanArea[2][0] < qrCodeCoordinates[2][0]\n    || scanArea[2][1] < qrCodeCoordinates[2][1]\n    || scanArea[3][0] > qrCodeCoordinates[3][0]\n    || scanArea[3][1] < qrCodeCoordinates[3][1]\n  );\n}\n","import React, {\n  memo, useEffect, useLayoutEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport captureKeyboardListeners from '../../../util/captureKeyboardListeners';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './SignatureModal.module.scss';\n\ntype StateProps = {\n  dataHex?: string;\n  error?: string;\n  isSigned?: boolean;\n};\n\nconst enum SLIDES {\n  confirm,\n  password,\n  complete,\n}\n\nfunction SignatureModal({\n  dataHex, error, isSigned,\n}: StateProps) {\n  const { submitSignature, clearSignatureError, cancelSignature } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.password);\n\n  useLayoutEffect(() => {\n    if (dataHex) {\n      setCurrentSlide(SLIDES.confirm);\n      setNextKey(SLIDES.password);\n      openModal();\n    }\n  }, [dataHex, openModal]);\n\n  useLayoutEffect(() => {\n    if (isSigned) {\n      setCurrentSlide(SLIDES.complete);\n      setNextKey(undefined);\n    }\n  }, [isSigned]);\n\n  useEffect(() => (\n    currentSlide === SLIDES.complete\n      ? captureKeyboardListeners({ onEnter: closeModal })\n      : undefined\n  ), [closeModal, currentSlide]);\n\n  const handleConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.complete);\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitSignature({ password });\n  });\n\n  function renderConfirm() {\n    return (\n      <>\n        <ModalHeader title={lang('Confirmation')} onClose={closeModal} />\n        <div className={modalStyles.transitionContent}>\n          <div className={transferStyles.label}>{lang('Signing Data')}</div>\n          <div className={transferStyles.inputReadOnly}>\n            {dataHex}\n          </div>\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n          <div className={modalStyles.buttons}>\n            <Button className={modalStyles.button} onClick={closeModal}>{lang('Cancel')}</Button>\n            <Button isPrimary className={modalStyles.button} onClick={handleConfirm}>{lang('Sign')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Enter Password')} onClose={closeModal} />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          submitLabel={lang('Sign')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={closeModal}\n          onUpdate={clearSignatureError}\n        />\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Done!')} onClose={closeModal} />\n\n        <div className={buildClassName(modalStyles.transitionContent, modalStyles.transitionContent_simple)}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <div className={styles.description}>\n            {lang('Signing was confirmed!')}\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={closeModal}>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return renderConfirm();\n\n      case SLIDES.password:\n        return renderPasswordForm(isActive);\n\n      case SLIDES.complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isModalOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={closeModal}\n      onCloseAnimationEnd={cancelSignature}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const {\n      dataHex, error, isSigned,\n    } = global.currentSignature || {};\n\n    return {\n      dataHex, error, isSigned,\n    };\n  },\n)(SignatureModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"nrINNy28\",\"error\":\"IHEwWBxd\",\"sticker\":\"wlPR2AOa\",\"description\":\"bgrj6VK3\"};","import { useRef } from '../lib/teact/teact';\n\nimport useForceUpdate from './useForceUpdate';\nimport usePrevious from './usePrevious';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function usePrevDuringAnimation<T>(current: T, duration?: number) {\n  const prev = usePrevious(current, true);\n  const timeoutRef = useRef<number>();\n  const forceUpdate = useForceUpdate();\n  // eslint-disable-next-line no-null/no-null\n  const isCurrentPresent = current !== undefined && current !== null;\n  // eslint-disable-next-line no-null/no-null\n  const isPrevPresent = prev !== undefined && prev !== null;\n\n  if (isCurrentPresent && timeoutRef.current) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = undefined;\n  }\n\n  useSyncEffect(() => {\n    // When `current` becomes empty\n    if (duration && !isCurrentPresent && isPrevPresent && !timeoutRef.current) {\n      timeoutRef.current = window.setTimeout(() => {\n        timeoutRef.current = undefined;\n        forceUpdate();\n      }, duration);\n    }\n  }, [duration, forceUpdate, isCurrentPresent, isPrevPresent]);\n\n  return !timeoutRef.current || !duration || isCurrentPresent ? current : prev;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"time\":\"AsvSkk14\",\"timeWarning\":\"CZBR69BT\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport type { LangFn } from '../../hooks/useLang';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Countdown.module.scss';\n\ninterface OwnProps {\n  timestamp: number;\n  deadline: number;\n  onCompleted?: NoneToVoidFunction;\n}\n\nconst WARNING_TIME = 5 * 60; // 5 minutes in seconds;\n\nfunction Countdown({\n  timestamp,\n  deadline,\n  onCompleted,\n}: OwnProps) {\n  const lang = useLang();\n  const initialSeconds = Math.floor((timestamp + deadline - Date.now()) / SECOND);\n  const [secondsLeft, setSecondsLeft] = useState(Math.max(initialSeconds, 0));\n  const shouldShowWarning = secondsLeft <= WARNING_TIME;\n\n  useEffect(() => {\n    const timerId = setTimeout(() => {\n      if (secondsLeft <= 0) return;\n\n      setSecondsLeft(Math.floor((timestamp + deadline - Date.now()) / SECOND));\n    }, SECOND);\n\n    if (secondsLeft <= 0) {\n      onCompleted?.();\n    }\n\n    return () => clearTimeout(timerId);\n  }, [secondsLeft, onCompleted, timestamp, deadline]);\n\n  return (\n    <span className={buildClassName(\n      styles.time,\n      shouldShowWarning && styles.timeWarning,\n    )}\n    >\n      {formatTime(lang, secondsLeft)}\n    </span>\n  );\n}\n\nfunction formatTime(lang: LangFn, seconds: number): string {\n  const pad = (num: number) => num.toString().padStart(2, '0');\n\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const remainingSeconds = seconds % 60;\n\n  let formattedTime = hours > 0 ? `${hours}:` : '';\n  formattedTime += `${hours > 0 ? pad(minutes) : minutes}:`;\n  formattedTime += pad(remainingSeconds);\n\n  return formattedTime;\n}\n\nexport default memo(Countdown);\n","// extracted by mini-css-extract-plugin\nexport default {\"infoBlock\":\"DqUj918m\",\"infoRow\":\"suN_Ci9f\",\"noIcon\":\"SUjgosvS\",\"noCurrency\":\"RjCLBwiu\",\"infoRowIcon\":\"kaMx21E_\",\"infoRowToken\":\"iNWWwjqK\",\"label\":\"uLUQH_M3\",\"infoRowChain\":\"NcAsWeQk\",\"infoRowAmount\":\"TzvDf_Jl\",\"infoRowAmountGreen\":\"I6xrY9jc\",\"infoRowAmountError\":\"iiFYcyID\",\"infoRowCurrency\":\"zab5hSsH\",\"infoRowCurrencyValue\":\"Q3pxLMbG\",\"infoSeparator\":\"ZO00ZPul\",\"infoSeparatorIcon\":\"fPy_1zLl\",\"infoSeparatorIconError\":\"GP0AJq0W\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { UserSwapToken } from '../../global/types';\n\nimport { TOKEN_WITH_LABEL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport SensitiveData from '../ui/SensitiveData';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './SwapTokensInfo.module.scss';\n\ninterface OwnProps {\n  isSensitiveDataHidden?: true;\n  tokenIn?: UserSwapToken | ApiSwapAsset;\n  amountIn?: string;\n  tokenOut?: UserSwapToken | ApiSwapAsset;\n  amountOut?: string;\n  isError?: boolean;\n}\n\nfunction SwapTokensInfo({\n  isSensitiveDataHidden, tokenIn, amountIn, tokenOut, amountOut, isError = false,\n}: OwnProps) {\n  const amountInCols = useMemo(() => getPseudoRandomNumber(5, 13, amountIn ?? ''), [amountIn]);\n  const amountOutCols = useMemo(() => getPseudoRandomNumber(5, 13, amountOut ?? ''), [amountOut]);\n\n  function renderTokenInfo(\n    amountCols: number,\n    token?: UserSwapToken | ApiSwapAsset,\n    amount = '0',\n    isReceived = false,\n  ) {\n    const amountWithSign = isReceived ? amount : -amount;\n    const withLabel = Boolean(token && TOKEN_WITH_LABEL[token.slug]);\n\n    return (\n      <div className={buildClassName(styles.infoRow, !token && styles.noIcon, isReceived && styles.noCurrency)}>\n        {Boolean(token) && (\n          <TokenIcon\n            token={token}\n            withChainIcon\n            className={styles.infoRowIcon}\n          />\n        )}\n\n        <span className={styles.infoRowToken}>\n          {token?.name}\n          {withLabel && (\n            <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[token!.slug]}</span>\n          )}\n        </span>\n        <SensitiveData\n          isActive={isSensitiveDataHidden}\n          cols={amountCols}\n          rows={2}\n          cellSize={8}\n          align=\"right\"\n          className={buildClassName(\n            styles.infoRowAmount,\n            isReceived && styles.infoRowAmountGreen,\n            isError && styles.infoRowAmountError,\n          )}\n        >\n          {formatCurrencyExtended(amountWithSign, token?.symbol ?? '')}\n        </SensitiveData>\n        <span className={styles.infoRowChain}>{getChainNetworkName(token?.chain)}</span>\n        {!isReceived && renderCurrency(amountIn, amountOut, tokenIn, tokenOut)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.infoBlock}>\n      {renderTokenInfo(amountInCols, tokenIn, amountIn)}\n      <div className={styles.infoSeparator}>\n        <i\n          className={buildClassName(\n            styles.infoSeparatorIcon,\n            isError && styles.infoSeparatorIconError,\n            isError ? 'icon-close' : 'icon-arrow-down',\n          )}\n          aria-hidden\n        />\n      </div>\n      {renderTokenInfo(amountOutCols, tokenOut, amountOut, true)}\n    </div>\n  );\n}\n\nexport default memo(SwapTokensInfo);\n\nfunction renderCurrency(amountIn?: string, amountOut?: string, fromToken?: ApiSwapAsset, toToken?: ApiSwapAsset) {\n  const rate = getSwapRate(amountIn, amountOut, fromToken, toToken);\n  if (!rate) return undefined;\n\n  return (\n    <span className={styles.infoRowCurrency}>\n      {rate.firstCurrencySymbol} \n      <span className={styles.infoRowCurrencyValue}>\n        {rate.price}{' '}{rate.secondCurrencySymbol}\n      </span>\n    </span>\n  );\n}\n","import React from '../../lib/teact/teact';\n\nimport type { OwnProps as FeeProps } from '../ui/Fee';\n\nimport useLang from '../../hooks/useLang';\n\nimport Fee from '../ui/Fee';\nimport LoadingDots from '../ui/LoadingDots';\nimport Transition from '../ui/Transition';\n\nimport styles from './TransactionFee.module.scss';\n\ninterface OwnProps extends Pick<FeeProps, 'terms' | 'token' | 'precision'> {\n  isLoading?: boolean;\n  className?: string;\n}\n\nexport default function TransactionFee({ terms, token, precision, isLoading, className }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div className={className}>\n      <div className={styles.label}>\n        {lang('Fee')}\n      </div>\n      <div className={styles.field}>\n        <Transition activeKey={isLoading ? 1 : 0} name=\"fade\" className={styles.field_transition}>\n          {isLoading\n            ? <LoadingDots isActive className={styles.field_loading} />\n            : <Fee terms={terms} token={token} precision={precision} />\n          }\n        </Transition>\n      </div>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"label\":\"FHA1HU_P\",\"field\":\"OgExpTBf\",\"field_transition\":\"JaS_WGfX\",\"fieldTransition\":\"JaS_WGfX\",\"field_loading\":\"SFz4gihZ\",\"fieldLoading\":\"SFz4gihZ\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"E6N6MD3z\",\"unstakeModal\":\"gnNvHGfL\",\"passwordFormContent\":\"KL1uqo4o\",\"passwordFormContentInModal\":\"CZ9Kse33\",\"sticker\":\"AeVBXxbG\",\"footer\":\"rQ0tvCAk\",\"copyButtonWrapper\":\"VtMfi0Xs\",\"feeField\":\"fSQYvfg1\",\"comment\":\"jxc6euua\",\"button\":\"eww3tEAs\",\"buttonWide\":\"ND5LbWGY\",\"unstakeTime\":\"hDTeTwua\",\"unstakeTimeIcon\":\"tZ2WbGH0\",\"scamImage\":\"BASL0DzO\",\"scamAddress\":\"km7wfY2m\",\"modalTitle\":\"yadTct7r\",\"transactionHeader\":\"uAQ2u0Hd\",\"headerTitle\":\"J16GqrT7\",\"headerDate\":\"fiJguUso\",\"infoBlock\":\"NGumnj62\",\"textFieldWrapper\":\"UGOei_Ih\",\"swapSupportBlock\":\"mVgCbbey\",\"textFieldLabel\":\"lXDi3LO1\",\"advancedTooltip\":\"hr8oR5Ry\",\"advancedTooltipContainer\":\"t6X1h79H\",\"errorCexBlock\":\"Qr0LqmBg\",\"errorCexMessage\":\"uSKXuCCa\",\"errorCexEmail\":\"cQ1RlviM\",\"changellyInfoBlock\":\"IZsujzDG\",\"changellyDescription\":\"IgVxAVQB\",\"changellyDescriptionBold\":\"EOk33hg6\",\"qrCode\":\"DfLLakci\",\"qrCodeHidden\":\"L9e2rlZo\",\"scamWarning\":\"OAz9rga6\"};","import React, { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../api/types';\nimport type { Account, Theme } from '../../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  CHANGELLY_LIVE_CHAT_URL,\n  CHANGELLY_SECURITY_EMAIL,\n  CHANGELLY_SUPPORT_EMAIL,\n  CHANGELLY_WAITING_DEADLINE,\n  TONCOIN,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { getIsInternalSwap, getIsSupportedChain, resolveSwapAsset } from '../../../global/helpers';\nimport { selectCurrentAccount, selectCurrentAccountState } from '../../../global/selectors';\nimport { parseTxId } from '../../../util/activities';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../util/formatNumber';\nimport getChainNetworkName from '../../../util/swap/getChainNetworkName';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport Countdown from '../../common/Countdown';\nimport SwapTokensInfo from '../../common/SwapTokensInfo';\nimport TransactionFee from '../../common/TransactionFee';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\ntype StateProps = {\n  addressByChain?: Account['addressByChain'];\n  activity?: ApiSwapActivity;\n  tokensBySlug?: Record<string, ApiSwapAsset>;\n  theme: Theme;\n  isSwapDisabled?: boolean;\n  isSensitiveDataHidden?: true;\n};\n\nconst CHANGELLY_EXPIRE_CHECK_STATUSES = new Set(['new', 'waiting']);\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending']);\nconst CHANGELLY_ERROR_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['failed', 'expired']);\n\nfunction SwapActivityModal({\n  activity, tokensBySlug, theme, addressByChain, isSwapDisabled, isSensitiveDataHidden,\n}: StateProps) {\n  const {\n    fetchActivityDetails,\n    startSwap,\n    closeActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = Boolean(activity);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedActivity = usePrevDuringAnimation(activity, animationDuration);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    id,\n    hashes,\n    timestamp,\n    networkFee = '0',\n    ourFee = '0',\n    shouldLoadDetails,\n  } = renderedActivity ?? {};\n  const { payinAddress, payoutAddress, payinExtraId } = renderedActivity?.cex || {};\n\n  let fromAmount = '0';\n  let toAmount = '0';\n  let isPending = true;\n  let isError = false;\n  let shouldRenderCexInfo = false;\n  let isCex = false;\n  let isCexError = false;\n  let isCexHold = false;\n  let isCexWaiting = false;\n  let isCexPending = false;\n  let isExpired = false;\n  let cexTransactionId = '';\n  let title = '';\n  let cexErrorMessage = '';\n  let isFromToncoin = true;\n  let isCountdownFinished = false;\n\n  const fromToken = useMemo(() => {\n    if (!renderedActivity?.from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.from);\n  }, [renderedActivity?.from, tokensBySlug]);\n\n  const toToken = useMemo(() => {\n    if (!renderedActivity?.to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.to);\n  }, [renderedActivity?.to, tokensBySlug]);\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken, to: toToken, toAddress: payoutAddress, addressByChain,\n  });\n\n  if (renderedActivity) {\n    const {\n      status, from, cex,\n    } = renderedActivity;\n    fromAmount = renderedActivity.fromAmount;\n    toAmount = renderedActivity.toAmount;\n    isFromToncoin = from === TONCOIN.slug;\n    isCex = Boolean(cex);\n\n    if (cex) {\n      isCountdownFinished = timestamp\n        ? (timestamp + CHANGELLY_WAITING_DEADLINE - Date.now() < 0)\n        : false;\n      isExpired = CHANGELLY_EXPIRE_CHECK_STATUSES.has(cex.status) && isCountdownFinished;\n      shouldRenderCexInfo = cex.status !== 'finished';\n      isPending = !isExpired && CHANGELLY_PENDING_STATUSES.has(cex.status);\n      isCexPending = isPending;\n      isCexError = isExpired || CHANGELLY_ERROR_STATUSES.has(cex.status);\n      isCexHold = cex.status === 'hold';\n      // Skip the 'waiting' status for transactions from Toncoin to other chains\n      // or from TRON to TON inside a multichain wallet for delayed status updates from hangelly\n      isCexWaiting = cex.status === 'waiting' && !isExpired && !isInternalSwap && !isFromToncoin;\n      cexTransactionId = cex.transactionId;\n    } else {\n      isPending = status === 'pending';\n      isError = ONCHAIN_ERROR_STATUSES.has(status!);\n    }\n\n    if (isPending) {\n      title = lang('Swapping');\n    } else if (isCexHold) {\n      title = lang('Swap On Hold');\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'overdue') {\n        title = lang('Swap Expired');\n        cexErrorMessage = lang('You have not sent the coins to the specified address.');\n      } else if (cexStatus === 'refunded') {\n        title = lang('Swap Refunded');\n        cexErrorMessage = lang('Exchange failed and coins were refunded to your wallet.');\n      } else {\n        title = lang('Swap Failed');\n      }\n    } else if (isError) {\n      title = lang('Swap Failed');\n    } else {\n      title = lang('Swapped');\n    }\n  }\n\n  const transactionHash = id ? isCex ? hashes?.[0] : parseTxId(id).hash : undefined;\n  const transactionUrl = getExplorerTransactionUrl('ton', transactionHash);\n\n  const shouldShowQrCode = !payinExtraId && toToken?.chain === 'ton' && !isInternalSwap;\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive: Boolean(payinAddress),\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    startSwap({\n      tokenInSlug: fromToken!.slug,\n      tokenOutSlug: toToken!.slug,\n      amountIn: fromAmount,\n    });\n  });\n\n  useEffect(() => {\n    if (id) fetchActivityDetails({ id });\n  }, [id]);\n\n  function renderHeader() {\n    return (\n      <div className={styles.transactionHeader}>\n        <div className={styles.headerTitle}>\n          {title}\n          {isPending && (\n            <AnimatedIconWithPreview\n              play={isOpen}\n              size={ANIMATED_STICKER_TINY_ICON_PX}\n              nonInteractive\n              noLoop={false}\n              tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClock}\n              previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClock}\n            />\n          )}\n        </div>\n        {!!timestamp && (\n          <div className={styles.headerDate}>\n            {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooterButton() {\n    let isButtonVisible = true;\n    let buttonText = 'Swap Again';\n\n    if (isCexWaiting) {\n      return (\n        <Button onClick={handleClose} className={styles.button}>\n          {lang('Close')}\n        </Button>\n      );\n    }\n\n    if (isCexHold) {\n      isButtonVisible = false;\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity?.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'refunded' || cexStatus === 'overdue') {\n        buttonText = 'Try Again';\n      }\n    }\n\n    if (!isButtonVisible) {\n      return undefined;\n    }\n\n    return (\n      <Button onClick={handleSwapClick} className={styles.button}>\n        {lang(buttonText)}\n      </Button>\n    );\n  }\n\n  function renderCexInformation() {\n    if (isCexHold) {\n      return (\n        <div className={styles.textFieldWrapper}>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_kyc_security', {\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SECURITY_EMAIL}\n                </span>),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n            />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.textFieldWrapper, styles.swapSupportBlock)}>\n        {cexErrorMessage && <span className={styles.errorCexMessage}>{cexErrorMessage}</span>}\n\n        {isCexPending && (\n          <span className={buildClassName(styles.changellyDescription)}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        )}\n        {isCountdownFinished && (\n          <>\n            <span className={styles.changellyDescription}>\n              {lang('$swap_changelly_support', {\n                livechat: (\n                  <a\n                    href={CHANGELLY_LIVE_CHAT_URL}\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                    className={styles.changellyDescriptionBold}\n                  >\n                    {lang('Changelly Live Chat')}\n                  </a>),\n                email: (\n                  <span className={styles.changellyDescriptionBold}>\n                    {CHANGELLY_SUPPORT_EMAIL}\n                  </span>),\n              })}\n            </span>\n            {cexTransactionId && (\n              <InteractiveTextField\n                text={cexTransactionId}\n                copyNotification={lang('Transaction ID was copied!')}\n                noSavedAddress\n                noExplorer\n              />\n            )}\n          </>\n        )}\n      </div>\n    );\n  }\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n        />\n      </div>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain=\"ton\"\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n        />\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (!(Number(networkFee) || shouldLoadDetails) || !fromToken) {\n      return undefined;\n    }\n\n    const terms = isFromToncoin ? {\n      native: Big(networkFee).add(ourFee).toString(),\n    } : {\n      native: networkFee,\n      token: ourFee,\n    };\n\n    return (\n      <TransactionFee\n        terms={terms}\n        token={fromToken}\n        precision={activity?.status === 'pending' ? 'approximate' : 'exact'}\n        isLoading={shouldLoadDetails}\n        className={styles.feeField}\n      />\n    );\n  }\n\n  function renderAddress() {\n    if (!payinAddress) return undefined;\n    const token = isFromToncoin ? toToken : fromToken;\n    const chain = getIsSupportedChain(token?.chain) ? token.chain : undefined;\n\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {isFromToncoin\n            ? lang('Your %blockchain% Address', { blockchain: toToken?.name })\n            : lang('Address for %blockchain% transfer', { blockchain: fromToken?.name })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={isFromToncoin ? payoutAddress : payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          noDimming\n        />\n      </div>\n    );\n  }\n\n  function renderSwapInfo() {\n    if (isCexWaiting) {\n      if (isInternalSwap) return undefined;\n      const chain = getIsSupportedChain(fromToken?.chain) ? fromToken.chain : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          {renderFee()}\n          <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n            value: (\n              <span className={styles.changellyDescriptionBold}>\n                {formatCurrencyExtended(Number(fromAmount), fromToken?.symbol ?? '', true)}\n              </span>\n            ),\n            blockchain: (\n              <span className={styles.changellyDescriptionBold}>\n                {getChainNetworkName(fromToken?.chain)}\n              </span>\n            ),\n            time: <Countdown timestamp={timestamp ?? 0} deadline={CHANGELLY_WAITING_DEADLINE} />,\n          })}\n          </span>\n          <InteractiveTextField\n            chain={chain}\n            address={payinAddress}\n            copyNotification={lang('Address was copied!')}\n            noSavedAddress\n            noExplorer\n            noDimming\n          />\n          {renderMemo()}\n          {shouldShowQrCode && (\n            <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderFee()}\n        {!isInternalSwap && renderAddress()}\n        {!isInternalSwap && renderMemo()}\n      </>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <div className={modalStyles.transitionContent}>\n        <SwapTokensInfo\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          tokenIn={fromToken}\n          amountIn={fromAmount}\n          tokenOut={toToken}\n          amountOut={toAmount}\n          isError={isError || isCexError}\n        />\n        <div className={styles.infoBlock}>\n          {renderSwapInfo()}\n          {shouldRenderCexInfo && renderCexInformation()}\n          {transactionUrl && renderTransactionId()}\n        </div>\n        {!isSwapDisabled && (\n          <div className={styles.footer}>\n            {renderFooterButton()}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      title={renderHeader()}\n      titleClassName={styles.modalTitle}\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"swap-activity\"\n      onClose={handleClose}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n    const account = selectCurrentAccount(global);\n    const { isSwapDisabled } = global.restrictions;\n    const { theme, isSensitiveDataHidden } = global.settings;\n\n    const id = accountState?.currentActivityId;\n    const activity = id ? accountState?.activities?.byId[id] : undefined;\n\n    return {\n      activity: activity?.kind === 'swap' ? activity : undefined,\n      tokensBySlug: global.swapTokenInfo?.bySlug,\n      theme,\n      addressByChain: account?.addressByChain,\n      isSwapDisabled: isSwapDisabled || global.settings.isTestnet,\n      isSensitiveDataHidden,\n    };\n  })(SwapActivityModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"amountSensitiveData\":\"__I8XE5D\",\"withStatus\":\"MeZ5UFq3\",\"amount\":\"Qy2zkhK5\",\"status\":\"COF5DpZg\",\"amountSymbol\":\"AgH98knQ\",\"amountFraction\":\"F1teTrIV\",\"operationPositive\":\"cuIyqZ4t\",\"operationScam\":\"zrLwT6fF\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport { bigintAbs } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport SensitiveData from '../ui/SensitiveData';\n\nimport styles from './TransactionAmount.module.scss';\n\ninterface OwnProps {\n  amount: bigint;\n  decimals?: number;\n  isIncoming?: boolean;\n  isScam?: boolean;\n  tokenSymbol?: string;\n  status?: string;\n  noSign?: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nfunction TransactionAmount({\n  isIncoming,\n  isScam,\n  amount,\n  decimals,\n  tokenSymbol,\n  status,\n  noSign = false,\n  isSensitiveDataHidden,\n}: OwnProps) {\n  const amountString = toDecimal(noSign ? bigintAbs(amount) : amount, decimals);\n  const [wholePart, fractionPart] = formatCurrencyExtended(amountString, '', noSign, decimals).split('.');\n  const withStatus = Boolean(status);\n\n  return (\n    <SensitiveData\n      isActive={isSensitiveDataHidden}\n      cols={12}\n      rows={withStatus ? 7 : 4}\n      align=\"center\"\n      cellSize={withStatus ? 17 : 18}\n      className={styles.amountSensitiveData}\n    >\n      <div\n        className={buildClassName(\n          styles.amount,\n          status && styles.withStatus,\n          isIncoming && !isScam && styles.operationPositive,\n          isScam && styles.operationScam,\n          'rounded-font',\n        )}>\n        {wholePart.trim().replace('\\u202F', '')}\n        {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n        <span className={styles.amountSymbol}>{tokenSymbol || TONCOIN.symbol}</span>\n      </div>\n      {withStatus && (\n        <div className={buildClassName(\n          styles.status,\n          isIncoming && !isScam && styles.operationPositive,\n          isScam && styles.operationScam,\n        )}\n        >\n          {status}\n        </div>\n      )}\n    </SensitiveData>\n  );\n}\n\nexport default memo(TransactionAmount);\n","import type { TeactNode } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiNft,\n  ApiStakingCommonData,\n  ApiStakingState,\n  ApiTokenWithPrice,\n  ApiToncoinStakingState,\n  ApiTransactionActivity,\n} from '../../../api/types';\nimport type { SavedAddress, Theme } from '../../../global/types';\nimport { ActiveTab } from '../../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  STAKING_CYCLE_DURATION_MS,\n  TONCOIN,\n} from '../../../config';\nimport { getStakingStateStatus } from '../../../global/helpers/staking';\nimport { selectAccountStakingStates, selectCurrentAccountState } from '../../../global/selectors';\nimport {\n  getIsTxIdLocal,\n  getTransactionAmountDisplayMode,\n  getTransactionTitle,\n  isScamTransaction,\n  parseTxId,\n  shouldShowTransactionAddress,\n  STAKING_TRANSACTION_TYPES,\n} from '../../../util/activities';\nimport { bigintAbs } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatRelativeHumanDateTime, formatTime } from '../../../util/dateFormat';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { getNativeToken } from '../../../util/tokens';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { callApi } from '../../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport TransactionAmount from '../../common/TransactionAmount';\nimport TransactionFee from '../../common/TransactionFee';\nimport NftInfo from '../../transfer/NftInfo';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\nimport scamImg from '../../../assets/scam.svg';\n\ntype StateProps = {\n  transaction?: ApiTransactionActivity;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  savedAddresses?: SavedAddress[];\n  isTestnet?: boolean;\n  stakingInfo?: ApiStakingCommonData;\n  stakingStates?: ApiStakingState[];\n  isLongUnstakeRequested?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n  isSensitiveDataHidden?: true;\n  nftsByAddress?: Record<string, ApiNft>;\n};\n\nconst enum SLIDES {\n  initial,\n  password,\n}\n\nfunction TransactionModal({\n  transaction,\n  tokensBySlug,\n  savedAddresses,\n  isTestnet,\n  stakingInfo,\n  stakingStates,\n  isLongUnstakeRequested,\n  isMediaViewerOpen,\n  theme,\n  isSensitiveDataHidden,\n  nftsByAddress,\n}: StateProps) {\n  const {\n    fetchActivityDetails,\n    startTransfer,\n    startStaking,\n    startUnstaking,\n    closeActivityInfo,\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    setLandscapeActionsActiveTabIndex,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.initial);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.password);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedTransaction = usePrevDuringAnimation(transaction, animationDuration);\n  const [unstakeDate, setUnstakeDate] = useState<number>(Date.now() + STAKING_CYCLE_DURATION_MS);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    fromAddress,\n    toAddress,\n    amount,\n    comment,\n    encryptedComment,\n    fee,\n    id,\n    isIncoming,\n    slug,\n    timestamp,\n    nft,\n    shouldLoadDetails,\n  } = renderedTransaction || {};\n  const isLocal = Boolean(id && getIsTxIdLocal(id));\n  const isUnstaking = renderedTransaction?.type === 'unstake';\n  const isNftTransfer = Boolean(renderedTransaction?.nft);\n\n  const token = slug ? tokensBySlug?.[slug] : undefined;\n  const chain = token?.chain;\n\n  const nativeToken = token ? getNativeToken(token.chain) : undefined;\n  const address = isIncoming ? fromAddress : toAddress;\n  const savedAddressName = useMemo(() => {\n    return address && chain && savedAddresses?.find((item) => item.address === address && item.chain === chain)?.name;\n  }, [address, chain, savedAddresses]);\n  const addressName = savedAddressName || transaction?.metadata?.name;\n  const isTransactionWithPoisoning = isIncoming && getIsTransactionWithPoisoning(renderedTransaction!);\n  const isScam = Boolean(transaction) && isScamTransaction(transaction);\n  const isModalOpen = Boolean(transaction) && !isMediaViewerOpen;\n  const transactionHash = chain && id ? parseTxId(id).hash : undefined;\n  const doesNftExist = Boolean(nft && nftsByAddress?.[nft.address]);\n\n  const [decryptedComment, setDecryptedComment] = useState<string>();\n  const [passwordError, setPasswordError] = useState<string>();\n\n  const transactionUrl = chain ? getExplorerTransactionUrl(chain, transactionHash, isTestnet) : undefined;\n\n  const [withUnstakeTimer, setWithUnstakeTimer] = useState(false);\n\n  const {\n    shouldRender: shouldRenderTransactionId,\n    transitionClassNames: transactionIdClassNames,\n  } = useShowTransition(Boolean((!isLocal || chain === 'tron') && transactionUrl));\n\n  const state = useMemo(() => {\n    return stakingStates?.find((staking): staking is ApiToncoinStakingState => {\n      return staking.tokenSlug === TONCOIN.slug && staking.balance > 0n;\n    });\n  }, [stakingStates]);\n\n  const stakingStatus = state && getStakingStateStatus(state);\n  const startOfStakingCycle = state?.type === 'nominators' ? state.start : stakingInfo?.round?.start;\n  const endOfStakingCycle = state?.type === 'nominators' ? state.end : stakingInfo?.round?.end;\n\n  useEffect(() => {\n    if (transaction?.type !== 'unstakeRequest' || !startOfStakingCycle) {\n      return;\n    }\n\n    const shouldDisplayTimer = Boolean(stakingStatus === 'unstakeRequested' || isLongUnstakeRequested)\n      && transaction.timestamp >= startOfStakingCycle;\n    setWithUnstakeTimer(shouldDisplayTimer);\n  }, [stakingStatus, startOfStakingCycle, transaction, isLongUnstakeRequested]);\n\n  const {\n    shouldRender: shouldRenderUnstakeTimer,\n    transitionClassNames: unstakeTimerClassNames,\n  } = useShowTransition(withUnstakeTimer);\n\n  useSyncEffect(() => {\n    if (renderedTransaction) {\n      setDecryptedComment(undefined);\n    }\n  }, [renderedTransaction]);\n\n  useSyncEffect(() => {\n    if (endOfStakingCycle) {\n      setUnstakeDate(endOfStakingCycle);\n    }\n  }, [endOfStakingCycle]);\n\n  useEffect(() => {\n    if (id) fetchActivityDetails({ id });\n  }, [id]);\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const openPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(undefined);\n  });\n\n  const closePasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.initial);\n    setNextKey(SLIDES.password);\n    clearPasswordError();\n  });\n\n  const openHiddenComment = useLastCallback(() => {\n    if (!encryptedComment) {\n      return;\n    }\n\n    openPasswordSlide();\n  });\n\n  const handleSendClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    startTransfer({\n      isPortrait,\n      tokenSlug: slug || TONCOIN.slug,\n      toAddress: address,\n      amount: bigintAbs(amount!),\n      comment: !isIncoming ? comment : undefined,\n    });\n  });\n\n  const handleStartStakingClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n      return;\n    }\n\n    startStaking();\n  });\n\n  const handleUnstakeMoreClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n\n    startUnstaking();\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    const result = await callApi(\n      'decryptComment',\n      getGlobal().currentAccountId!,\n      encryptedComment!,\n      fromAddress!,\n      password,\n    );\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    closePasswordSlide();\n    setDecryptedComment(result);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    if (getDoesUsePinPad()) {\n      clearIsPinAccepted();\n    }\n  });\n\n  function renderHeader() {\n    return (\n      <div\n        className={buildClassName(\n          modalStyles.header,\n          modalStyles.header_wideContent,\n        )}\n      >\n        <div className={buildClassName(modalStyles.title, styles.modalTitle)}>\n          <div className={styles.headerTitle}>\n            {transaction && getTransactionTitle(transaction, isLocal, lang)}\n            {isLocal && (\n              <AnimatedIconWithPreview\n                play={isModalOpen}\n                size={ANIMATED_STICKER_TINY_ICON_PX}\n                nonInteractive\n                noLoop={false}\n                tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClock}\n                previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClock}\n              />\n            )}\n            {isScam && isIncoming && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n          </div>\n          {!!timestamp && (\n            <div className={styles.headerDate}>\n              {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n            </div>\n          )}\n        </div>\n        <Button\n          isRound\n          className={modalStyles.closeButton}\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      </div>\n    );\n  }\n\n  function renderTransactionWithPoisoningWarning() {\n    return (\n      <div className={styles.scamWarning}>\n        {lang('This address mimics another address that you previously interacted with.')}\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (!(fee || shouldLoadDetails) || !nativeToken) {\n      return undefined;\n    }\n\n    return (\n      <TransactionFee\n        terms={{ native: fee }}\n        token={nativeToken}\n        precision={isLocal ? 'approximate' : 'exact'}\n        isLoading={shouldLoadDetails}\n        className={styles.feeField}\n      />\n    );\n  }\n\n  function renderComment() {\n    if (!comment && !encryptedComment) {\n      return undefined;\n    }\n\n    const spoiler = encryptedComment\n      ? lang('Message is encrypted.')\n      : isScam\n        ? lang('Scam comment is hidden.')\n        : undefined;\n\n    return (\n      <>\n        <div className={transferStyles.label}>{lang('Comment')}</div>\n        <InteractiveTextField\n          text={encryptedComment ? decryptedComment : comment}\n          spoiler={spoiler}\n          spoilerRevealText={encryptedComment ? lang('Decrypt') : lang('Display')}\n          spoilerCallback={openHiddenComment}\n          copyNotification={lang('Comment was copied!')}\n          className={styles.copyButtonWrapper}\n          textClassName={styles.comment}\n        />\n      </>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div className={buildClassName(styles.textFieldWrapper, transactionIdClassNames)}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain={chain}\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderUnstakeTimer() {\n    return (\n      <div className={buildClassName(styles.unstakeTime, unstakeTimerClassNames)}>\n        <AnimatedIconWithPreview\n          play={isModalOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n        />\n        <div>\n          {lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, unstakeDate)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const isStaking = STAKING_TRANSACTION_TYPES.has(renderedTransaction?.type);\n    const canUnstake = (isUnstaking || transaction?.type === 'unstakeRequest') && stakingStatus === 'active';\n    const buttons: TeactNode[] = [];\n\n    if (!isStaking && !isIncoming && !isNftTransfer) {\n      buttons.push(\n        <Button onClick={handleSendClick} className={styles.button}>\n          {lang('Repeat')}\n        </Button>,\n      );\n    }\n    if (!IS_CORE_WALLET && isStaking) {\n      buttons.push(\n        <Button\n          onClick={handleStartStakingClick}\n          className={buildClassName(styles.button, canUnstake && styles.buttonWide)}\n        >\n          {lang('Stake Again')}\n        </Button>,\n      );\n    }\n    if (canUnstake) {\n      buttons.push(\n        <Button onClick={handleUnstakeMoreClick} className={buildClassName(styles.button, styles.buttonWide)}>\n          {lang('Unstake More')}\n        </Button>,\n      );\n    }\n\n    return buttons.length ? <div className={styles.footer}>{buttons}</div> : undefined;\n  }\n\n  function renderTransactionContent() {\n    const amountDisplayMode = transaction && getTransactionAmountDisplayMode(transaction);\n\n    return (\n      <div className={modalStyles.transitionContent}>\n        {amountDisplayMode !== 'hide' && (\n          <TransactionAmount\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            isIncoming={isIncoming}\n            isScam={isScam}\n            amount={amount ?? 0n}\n            decimals={token?.decimals}\n            tokenSymbol={token?.symbol}\n            status={isUnstaking && !shouldRenderUnstakeTimer ? lang('Successfully') : undefined}\n            noSign={amountDisplayMode === 'noSign'}\n          />\n        )}\n        {nft && <NftInfo nft={nft} withMediaViewer={doesNftExist} withTonExplorer />}\n\n        {isTransactionWithPoisoning && renderTransactionWithPoisoningWarning()}\n\n        {transaction && shouldShowTransactionAddress(transaction) && (\n          <>\n            <div className={transferStyles.label}>{lang(isIncoming ? 'Sender' : 'Recipient')}</div>\n            <InteractiveTextField\n              chain={chain}\n              addressName={addressName}\n              address={address!}\n              isScam={isScam && !isIncoming}\n              copyNotification={lang('Address was copied!')}\n              className={styles.copyButtonWrapper}\n              textClassName={isScam && isIncoming ? styles.scamAddress : undefined}\n            />\n          </>\n        )}\n\n        {renderFee()}\n        {renderComment()}\n        {shouldRenderTransactionId && renderTransactionId()}\n        {shouldRenderUnstakeTimer && renderUnstakeTimer()}\n\n        {renderFooter()}\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.initial:\n        return (\n          <>\n            {renderHeader()}\n            {renderTransactionContent()}\n          </>\n        );\n      case SLIDES.password:\n        if (!encryptedComment) return undefined;\n\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={handleClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              error={passwordError}\n              withCloseButton={IS_CAPACITOR}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              submitLabel={lang('Send')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={closePasswordSlide}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      hasCloseButton\n      nativeBottomSheetKey=\"transaction-info\"\n      forceFullNative={currentSlide === SLIDES.password}\n      dialogClassName={buildClassName(styles.modalDialog, isUnstaking && styles.unstakeModal)}\n      onClose={handleClose}\n      onCloseAnimationEnd={closePasswordSlide}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountId = global.currentAccountId!;\n    const accountState = selectCurrentAccountState(global);\n\n    const txId = accountState?.currentActivityId;\n    const activity = txId ? accountState?.activities?.byId[txId] : undefined;\n    const savedAddresses = accountState?.savedAddresses;\n    const { byAddress } = accountState?.nfts || {};\n\n    const stakingInfo = global.stakingInfo;\n    const stakingStates = selectAccountStakingStates(global, accountId);\n    const { isTestnet, theme, isSensitiveDataHidden } = global.settings;\n\n    return {\n      transaction: activity?.kind === 'transaction' ? activity : undefined,\n      tokensBySlug: global.tokenInfo?.bySlug,\n      savedAddresses,\n      isTestnet,\n      isLongUnstakeRequested: accountState?.isLongUnstakeRequested,\n      isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n      theme,\n      stakingInfo,\n      stakingStates,\n      isSensitiveDataHidden,\n      nftsByAddress: byAddress,\n    };\n  })(TransactionModal),\n);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { selectCurrentAccountState } from '../../../global/selectors';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  nftAddress?: string;\n  nftName?: string;\n}\n\nfunction UnhideNftModal({\n  isOpen,\n  nftAddress,\n  nftName,\n}: StateProps) {\n  const { addNftsToWhitelist, closeUnhideNftModal } = getActions();\n\n  const lang = useLang();\n\n  const handleUnhide = useLastCallback(() => {\n    addNftsToWhitelist({ addresses: [nftAddress!] });\n    closeUnhideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeUnhideNftModal}\n      title={lang('Unhide NFT')}\n    >\n      <p className={modalStyles.text}>\n        {lang('$unhide_nft_warning', { name: <b>{nftName}</b> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeUnhideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleUnhide} className={modalStyles.button}>\n          {lang('Unhide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    isUnhideNftModalOpen,\n    selectedNftToUnhide,\n  } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    isOpen: isUnhideNftModalOpen,\n    nftAddress: selectedNftToUnhide?.address,\n    nftName: selectedNftToUnhide?.name,\n  };\n})(UnhideNftModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\n\nimport styles from './Notification.module.scss';\n\ntype OwnProps = {\n  containerId?: string;\n  message: string;\n  icon?: string;\n  onDismiss: () => void;\n};\n\nconst DURATION_MS = 5000;\nconst ANIMATION_DURATION = 250;\n\nconst Notification: FC<OwnProps> = ({\n  icon, message, containerId, onDismiss,\n}) => {\n  const [isOpen, setIsOpen] = useState(true);\n  // eslint-disable-next-line no-null/no-null\n  const timerRef = useRef<number | undefined>(null);\n\n  const { transitionClassNames } = useShowTransition(isOpen);\n\n  const closeAndDismiss = useLastCallback(() => {\n    setIsOpen(false);\n    setTimeout(onDismiss, ANIMATION_DURATION);\n  });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(closeAndDismiss) : undefined), [isOpen, closeAndDismiss]);\n\n  useEffect(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n        timerRef.current = undefined;\n      }\n    };\n  }, [closeAndDismiss]);\n\n  const handleMouseEnter = useLastCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = undefined;\n    }\n  });\n\n  const handleMouseLeave = useLastCallback(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n  });\n\n  return (\n    <Portal\n      className={buildClassName(styles.container, IS_ELECTRON && styles.container_electron)}\n      containerId={containerId}\n    >\n      <div\n        className={buildClassName(styles.notification, transitionClassNames)}\n        onClick={closeAndDismiss}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <div className={styles.content}>\n          {icon && <i className={buildClassName(styles.icon, icon)} aria-hidden />}\n          {message}\n        </div>\n      </div>\n    </Portal>\n  );\n};\n\nexport default Notification;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"h7PLFJQu\",\"container_electron\":\"I0vM5N9Z\",\"containerElectron\":\"I0vM5N9Z\",\"notification\":\"cBuXIi04\",\"content\":\"FOpmIM3s\",\"icon\":\"yRP0zVnL\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { NotificationType } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\n\nimport Notification from '../ui/Notification';\n\ntype StateProps = {\n  notifications: NotificationType[];\n};\n\nfunction Notifications({ notifications }: StateProps) {\n  const { dismissNotification } = getActions();\n\n  if (!notifications.length) {\n    return undefined;\n  }\n\n  return (\n    <div id=\"Notifications\">\n      {notifications.map(({ message, icon }) => (\n        <Notification\n          key={message}\n          icon={icon}\n          message={message}\n          // eslint-disable-next-line react/jsx-no-bind\n          onDismiss={dismissNotification}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['notifications']),\n)(Notifications));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"A0PipQQQ\",\"header\":\"Gbi50r5P\",\"headerTransition\":\"lDJDJyJx\",\"actions\":\"U5k3MGwt\",\"actionButton\":\"iX71Jk4y\",\"actionIcon\":\"TYO_mnqL\",\"menuButton\":\"g5Mpmfqz\",\"menuButton_active\":\"Jb3ZSQ8D\",\"menuButtonActive\":\"Jb3ZSQ8D\",\"menuItem\":\"nZ_OU1oY\",\"slides\":\"X2XelzZ1\",\"slide\":\"piyY_yBE\",\"slide_active\":\"sCCso48U\",\"slideActive\":\"sCCso48U\",\"slide_moving\":\"NMBicc6s\",\"slideMoving\":\"NMBicc6s\",\"content\":\"BjD2X1I7\",\"image\":\"BA7uSk12\",\"contentDescription\":\"XeanWEkZ\",\"contentTextWrapper\":\"fJxRvPrW\",\"contentText\":\"gAnXMdfd\",\"navigation\":\"mO73YmbZ\",\"portraitContainer\":\"PDCSQygm\",\"navigation_prev\":\"Mx1XT28C\",\"navigationPrev\":\"Mx1XT28C\",\"navigation_next\":\"FmNwnO3_\",\"navigationNext\":\"FmNwnO3_\",\"mediaInfo\":\"lzTnItyh\",\"mediaInfoTitle\":\"Iork7lBy\",\"mediaInfoDescription\":\"gVhA_SZL\",\"descriptionText\":\"VjBacQN8\",\"tooltip\":\"j_sdE8In\",\"ghost\":\"FjT6eSrl\",\"ghost_roundedOpening\":\"GUrvismB\",\"ghostRoundedOpening\":\"GUrvismB\",\"ghost_roundedClosing\":\"oGeErVyy\",\"ghostRoundedClosing\":\"oGeErVyy\",\"ghostImage\":\"oaQkWH7i\",\"scamImage\":\"HAC1deVa\"};","import { MediaType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY, MOBILE_SCREEN_MAX_WIDTH } from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { applyStyles } from '../../../util/animation';\nimport { stopEvent } from '../../../util/domEvents';\nimport { isElementInViewport } from '../../../util/isElementInViewport';\nimport { REM } from '../../../util/windowEnvironment';\nimport windowSize from '../../../util/windowSize';\n\nimport styles from '../MediaViewer.module.scss';\n\nexport const ANIMATION_DURATION = 200;\n\n// Header height + bottom padding, keep in sync with styles.image max-height\nconst OCCUPIED_HEIGHT = 14 * REM;\n\nexport function animateOpening(\n  type: MediaType, mediaId: string, mediaUrl?: string, txId?: string, hiddenNfts?: 'user' | 'scam',\n) {\n  const { image: fromImage } = getNode(type, mediaId, txId, hiddenNfts);\n  if (!fromImage || !mediaUrl) {\n    return;\n  }\n\n  requestMutation(async () => {\n    document.body.classList.add('ghost-animating');\n\n    const { width: windowWidth, height: windowHeight } = windowSize.get();\n    const { width: mediaWidth, height: mediaHeight } = await getImageDimension(mediaUrl);\n\n    const availableHeight = windowHeight - OCCUPIED_HEIGHT;\n    const offsetTop = (windowWidth <= MOBILE_SCREEN_MAX_WIDTH ? 8 : 7) * REM;\n\n    const { width: toWidth, height: toHeight } = calculateDimensions(\n      windowWidth,\n      availableHeight,\n      mediaWidth,\n      mediaHeight,\n    );\n\n    const toLeft = (windowWidth - toWidth) / 2;\n    const toTop = offsetTop + (availableHeight - toHeight) / 2;\n\n    const {\n      top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n    } = fromImage.getBoundingClientRect();\n\n    const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n    const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n    const fromScaleX = fromWidth / toWidth;\n    const fromScaleY = fromHeight / toHeight;\n\n    requestMutation(() => {\n      const ghost = createGhost(fromImage);\n      applyShape(ghost, type, true);\n      applyStyles(ghost, {\n        top: `${toTop}px`,\n        left: `${toLeft}px`,\n        width: `${toWidth}px`,\n        height: `${toHeight}px`,\n        transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n      });\n\n      document.body.appendChild(ghost);\n\n      requestMutation(() => {\n        ghost.style.transform = '';\n        clearShape(ghost, type, true);\n\n        setTimeout(() => {\n          requestMutation(() => {\n            if (document.body.contains(ghost)) {\n              document.body.removeChild(ghost);\n            }\n            document.body.classList.remove('ghost-animating');\n          });\n        }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n      });\n    });\n  });\n}\n\nexport function animateClosing(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  const { container, image: toImage } = getNode(type, mediaId, txId, hiddenNfts);\n  const fromImage = document.querySelector<HTMLImageElement>(\n    `.${styles.slide_active} img, .${styles.slide_active} canvas`,\n  );\n  if (!fromImage || !toImage) {\n    return;\n  }\n\n  const {\n    top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n  } = fromImage.getBoundingClientRect();\n  const {\n    top: targetTop, left: toLeft, width: toWidth, height: toHeight,\n  } = toImage.getBoundingClientRect();\n\n  let toTop = targetTop;\n  if (!isElementInViewport(toImage)) {\n    const { height: windowHeight } = windowSize.get();\n    toTop = targetTop < fromTop ? -toHeight : windowHeight;\n  }\n\n  const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n  const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n  const fromScaleX = fromWidth / toWidth;\n  const fromScaleY = fromHeight / toHeight;\n\n  const existingGhost = document.querySelector<HTMLDivElement>(`.${styles.ghost}`);\n  const ghost = existingGhost || createGhost(fromImage);\n\n  let ghostStyles: Record<string, string>;\n  if (existingGhost) {\n    const {\n      top, left, width, height,\n    } = existingGhost.getBoundingClientRect();\n    const scaleX = width / toWidth;\n    const scaleY = height / toHeight;\n\n    ghostStyles = {\n      transition: 'none',\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      transformOrigin: 'top left',\n      transform: `translate3d(${left - toLeft}px, ${top - toTop}px, 0) scale(${scaleX}, ${scaleY})`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n    };\n  } else {\n    ghostStyles = {\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n      transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n    };\n  }\n\n  requestMutation(() => {\n    applyShape(ghost, type);\n    applyStyles(ghost, ghostStyles);\n    if (!existingGhost) document.body.appendChild(ghost);\n    document.body.classList.add('ghost-animating');\n    if (container) {\n      container.classList.add('ghost-target');\n    }\n\n    requestMutation(() => {\n      if (existingGhost) {\n        existingGhost.style.transition = '';\n      }\n\n      ghost.style.transform = '';\n\n      setTimeout(() => {\n        requestMutation(() => {\n          if (document.body.contains(ghost)) {\n            document.body.removeChild(ghost);\n          }\n          document.body.classList.remove('ghost-animating');\n          if (container) {\n            container.classList.remove('ghost-target');\n          }\n        });\n      }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n    });\n  });\n}\n\nfunction getNode(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  let image: HTMLImageElement | HTMLCanvasElement | undefined;\n  let container: HTMLElement | undefined;\n  if (type === MediaType.Nft) {\n    container = document.querySelector(\n      txId\n        ? `.transaction-nft[data-tx-id=\"${txId}\"][data-nft-address=\"${mediaId}\"]`\n        : hiddenNfts\n          ? `.hidden-nfts-${hiddenNfts} [data-nft-address=\"${mediaId}\"]`\n          : `.nfts-container > .Transition_slide-active [data-nft-address=\"${mediaId}\"]`,\n    ) as HTMLElement;\n    image = container?.querySelector('img, canvas') as HTMLImageElement | HTMLCanvasElement;\n  }\n  return { container, image };\n}\n\nfunction createGhost(source: HTMLImageElement | HTMLCanvasElement) {\n  const ghost = document.createElement('div');\n  ghost.classList.add(styles.ghost);\n\n  const img = new Image();\n  img.classList.add(styles.ghostImage);\n  img.draggable = false;\n  img.oncontextmenu = stopEvent;\n  img.src = source instanceof HTMLImageElement\n    ? source.src\n    : source.parentElement?.parentElement?.dataset.previewUrl || '';\n\n  ghost.appendChild(img);\n\n  return ghost;\n}\n\nfunction calculateDimensions(\n  availableWidth: number,\n  availableHeight: number,\n  mediaWidth: number,\n  mediaHeight: number,\n) {\n  const aspectRatio = mediaHeight / mediaWidth;\n  const calculatedWidth = Math.min(mediaWidth, availableWidth);\n  const calculatedHeight = Math.round(calculatedWidth * aspectRatio);\n\n  if (calculatedHeight > availableHeight) {\n    return {\n      width: Math.round(availableHeight / aspectRatio),\n      height: availableHeight,\n    };\n  }\n\n  return {\n    width: calculatedWidth,\n    height: Math.round(calculatedWidth * aspectRatio),\n  };\n}\n\nfunction applyShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.add(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nfunction clearShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.remove(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nasync function getImageDimension(url: string) {\n  const img = new Image();\n  img.src = url;\n  await new Promise((resolve) => {\n    img.onload = resolve;\n  });\n  return { width: img.width, height: img.height };\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport usePrevious from '../../hooks/usePrevious';\nimport useShowTransition from '../../hooks/useShowTransition';\n\ntype OwnProps = {\n  isOpen: boolean;\n  isCustom?: boolean;\n  isHidden?: boolean;\n  id?: string;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n  noCloseTransition?: boolean;\n  shouldAnimateFirstRender?: boolean;\n  style?: string;\n  children: React.ReactNode;\n  ref?: React.LegacyRef<HTMLDivElement>;\n};\n\nconst ShowTransition: FC<OwnProps> = ({\n  isOpen,\n  isHidden,\n  isCustom,\n  id,\n  className,\n  onClick,\n  children,\n  noCloseTransition,\n  shouldAnimateFirstRender,\n  style,\n  ref,\n}) => {\n  const prevIsOpen = usePrevious(isOpen);\n  const prevChildren = usePrevious(children);\n  const fromChildrenRef = useRef<React.ReactNode>();\n  const isFirstRender = prevIsOpen === undefined;\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(\n    isOpen && !isHidden,\n    undefined,\n    isFirstRender && !shouldAnimateFirstRender,\n    isCustom ? false : undefined,\n    noCloseTransition,\n  );\n\n  if (prevIsOpen && !isOpen) {\n    fromChildrenRef.current = prevChildren;\n  }\n\n  return (\n    (shouldRender || isHidden) && (\n      <div\n        id={id}\n        ref={ref}\n        className={buildClassName(className, transitionClassNames)}\n        onClick={onClick}\n        style={style}\n      >\n        {isOpen ? children : fromChildrenRef.current!}\n      </div>\n    )\n  );\n};\n\nexport default ShowTransition;\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport { MediaType } from '../../global/types';\n\nimport { selectCurrentAccountSettings, selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePrevDuringAnimationSimple } from '../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from './hooks/useNftMenu';\n\nimport DropdownMenu from '../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../ui/Menu';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n  // eslint-disable-next-line react/no-unused-prop-types\n  mediaId?: string;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  nft?: ApiNft;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n};\n\nfunction Actions({\n  onClose, nft, blacklistedNftAddresses, whitelistedNftAddresses, cardBackgroundNft, accentColorNft,\n}: StateProps & OwnProps) {\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft!.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft!.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft, isNftBlacklisted, isNftWhitelisted, isNftInstalled, isNftAccentColorInstalled,\n  });\n\n  const handleSelect = useLastCallback((value: string) => {\n    if (value === 'send') {\n      onClose();\n    }\n\n    handleMenuItemSelect(value);\n  });\n\n  return (\n    <div className={styles.actions}>\n      <button\n        type=\"button\"\n        aria-label={lang('More actions')}\n        className={buildClassName(styles.actionButton, styles.menuButton, isMenuOpen && styles.menuButton_active)}\n        onClick={openMenu}\n      >\n        <i className=\"icon icon-more\" aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        items={menuItems}\n        menuPosition=\"top\"\n        menuPositionHorizontal=\"right\"\n        shouldTranslateOptions\n        onClose={closeMenu}\n        className=\"component-theme-dark\"\n        buttonClassName={styles.menuItem}\n        onSelect={handleSelect}\n      />\n\n      <button\n        type=\"button\"\n        aria-label={lang('Close')}\n        className={styles.actionButton}\n        onClick={onClose}\n      >\n        <i className={buildClassName('icon-windows-close', styles.actionIcon)} aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (!mediaId || mediaType !== MediaType.Nft) return {};\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n\n  return {\n    nft, blacklistedNftAddresses, whitelistedNftAddresses, cardBackgroundNft, accentColorNft,\n  };\n})(Actions));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { GETGEMS_BASE_MAINNET_URL, GETGEMS_BASE_TESTNET_URL } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { handleOpenUrl } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n  // eslint-disable-next-line react/no-unused-prop-types\n  mediaId?: string;\n};\n\ntype StateProps = {\n  title?: string;\n  description?: string;\n  descriptionUrl?: string;\n};\n\nfunction MediaInfo({ title, description, descriptionUrl }: OwnProps & StateProps) {\n  const lang = useLang();\n\n  return (\n    <div className={styles.mediaInfo}>\n      <span className={styles.mediaInfoTitle}>{title}</span>\n      <a\n        href={descriptionUrl}\n        target=\"_blank\"\n        aria-label={lang('Open NFT Collection')}\n        className={styles.mediaInfoDescription}\n        rel=\"noreferrer\"\n        onClick={handleOpenUrl}\n      >\n        <span className={styles.descriptionText}>{description}</span>\n        <i className={buildClassName('icon-tooltip', styles.tooltip)} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (!mediaId || mediaType !== MediaType.Nft) return {};\n\n  const isTestnet = global.settings.isTestnet;\n\n  const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  return {\n    title: nft.name || shortenAddress(nft.address, 4),\n    description: nft.collectionName,\n    descriptionUrl: `${getgemsBaseUrl}collection/${nft.collectionAddress}`,\n  };\n})(MediaInfo));\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useEffectOnce from './useEffectOnce';\n\n// Allows to use signal value as \"silent\" dependency in hooks (not causing updates)\nexport function useSignalRef<T>(getValue: Signal<T>) {\n  const ref = useRef<T>(getValue());\n\n  useEffectOnce(() => {\n    return getValue.subscribe(() => {\n      ref.current = getValue();\n    });\n  });\n\n  return ref;\n}\n","import { useEffect } from '../../../lib/teact/teact';\n\nimport { createSignal } from '../../../util/signals';\n\nconst [getZoomChange, setZoomChange] = createSignal(1);\n\nexport default function useZoomChange() {\n  useEffect(() => {\n    return () => {\n      setZoomChange(1);\n    };\n  }, []);\n\n  return [getZoomChange, setZoomChange] as const;\n}\n","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './MediaViewer.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  // eslint-disable-next-line react/no-unused-prop-types\n  mediaId: string;\n}\n\ninterface StateProps {\n  alt?: string;\n  thumbnail?: string;\n  image?: string;\n  lottie?: string;\n  description?: string;\n  isScam?: boolean;\n  whitelistedMediaIds?: string[];\n}\n\nconst ANIMATED_ICON_SIZE = 250; // Preview size (500px) / 2\n\nfunction Media({\n  mediaId, alt, thumbnail, image, lottie, description, isScam, whitelistedMediaIds,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const src = image || thumbnail;\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement | null>(null);\n  const { isPortrait } = useDeviceScreen();\n\n  useEffect(() => {\n    const element = ref.current!;\n    const { height } = element.getBoundingClientRect();\n    requestMutation(() => {\n      // Inner scroll requires max-height to be set\n      element.style.setProperty('--max-height', `${height}px`);\n    });\n  }, [isPortrait]);\n\n  const isNftWhiteListed = useMemo(() => {\n    return whitelistedMediaIds?.includes(mediaId);\n  }, [mediaId, whitelistedMediaIds]);\n\n  return (\n    <div className={styles.content}>\n      {lottie ? (\n        <AnimatedIconWithPreview\n          size={ANIMATED_ICON_SIZE}\n          shouldStretch\n          play\n          noLoop={false}\n          tgsUrl={lottie}\n          previewUrl={src}\n          className={styles.image}\n          noPreviewTransition\n        />\n      ) : (\n        <img src={src} alt={alt} className={styles.image} />\n      )}\n      <div className={styles.contentDescription} ref={ref}>\n        {description && (\n          <div className={styles.contentTextWrapper}>\n            <div className={buildClassName(styles.contentText, 'custom-scroll')} dir=\"auto\">\n              {isScam && !isNftWhiteListed && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n              {description}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (mediaType !== MediaType.Nft) return {};\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  const { whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n\n  return {\n    alt: nft.name,\n    thumbnail: nft.thumbnail,\n    image: nft.image,\n    lottie: nft.metadata?.lottie,\n    description: nft.description,\n    isScam: nft.isScam,\n    whitelistedMediaIds: whitelistedNftAddresses,\n  };\n})(Media));\n","import React, {\n  memo, useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { RealTouchEvent } from '../../util/captureEvents';\n\nimport { animateNumber, timingFunctions } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport {\n  captureEvents,\n  IOS_SCREEN_EDGE_THRESHOLD,\n  SWIPE_DIRECTION_THRESHOLD,\n  SWIPE_DIRECTION_TOLERANCE,\n} from '../../util/captureEvents';\nimport { clamp, isBetween, round } from '../../util/math';\nimport { debounce } from '../../util/schedulers';\nimport { IS_IOS, IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useDerivedState from '../../hooks/useDerivedState';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSignal from '../../hooks/useSignal';\nimport { useSignalRef } from '../../hooks/useSignalRef';\nimport useWindowSize from '../../hooks/useWindowSize';\nimport useZoomChange from './hooks/useZoomChangeSignal';\n\nimport Media from './Media';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  mediaId?: string;\n  getMediaId: (fromId?: string, direction?: number) => string | undefined;\n  selectMedia: (id: string) => void;\n  withAnimation: boolean;\n  onClose: () => void;\n}\n\ntype Transform = {\n  x: number;\n  y: number;\n  scale: number;\n};\n\nenum SwipeDirection {\n  Horizontal,\n  Vertical,\n}\n\nconst SWIPE_X_THRESHOLD = 50; // px\nconst SWIPE_Y_THRESHOLD = 50; // px\nconst SLIDES_GAP = IS_TOUCH_ENV ? 40 : 0; // px\nconst ANIMATION_DURATION = 350; // ms\nconst DEBOUNCE_SELECT_MEDIA = 350; // ms\nconst DEBOUNCE_SWIPE = 500; // ms\nconst DOUBLE_TAP_ZOOM = 3;\nconst CLICK_Y_THRESHOLD = 80; // px\nconst MAX_ZOOM = 4;\nconst MIN_ZOOM = 1;\n\nconst { easeOutCubic, easeOutQuart } = timingFunctions;\n\nlet cancelAnimation: Function | undefined;\nlet cancelZoomAnimation: Function | undefined;\n\nfunction Slides({\n  isOpen, mediaId, selectMedia, getMediaId, withAnimation, onClose,\n}: OwnProps) {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const activeSlideRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const leftSlideRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const rightSlideRef = useRef<HTMLDivElement>(null);\n  const lastTransformRef = useRef<Transform>({ x: 0, y: 0, scale: 1 });\n  const swipeDirectionRef = useRef<SwipeDirection | undefined>(undefined);\n  const initialContentRectRef = useRef<DOMRect | undefined>(undefined);\n  const isReleasedRef = useRef(false);\n  const [getZoomChange] = useZoomChange();\n  const prevZoomChangeRef = useRef(getZoomChange());\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [getTransform, setTransform] = useSignal<Transform>({ x: 0, y: 0, scale: 1 });\n  const transformRef = useSignalRef(getTransform);\n  const [getActiveMediaId, setActiveMediaId] = useSignal<string | undefined>(mediaId);\n  const activeMediaIdRef = useSignalRef(getActiveMediaId);\n  const isScaled = useDerivedState(() => getTransform().scale !== 1, [getTransform]);\n  const activeMediaId = useDerivedState(getActiveMediaId);\n  const { height: windowHeight, width: windowWidth, isResizing } = useWindowSize();\n\n  useHistoryBack({\n    isActive: isOpen,\n    onBack: onClose,\n    shouldBeReplaced: true,\n  });\n\n  const selectMediaDebounced = useDebouncedCallback(selectMedia, [selectMedia], DEBOUNCE_SELECT_MEDIA, true);\n  const clearSwipeDirectionDebounced = useDebouncedCallback(() => {\n    swipeDirectionRef.current = undefined;\n  }, [], DEBOUNCE_SWIPE, true);\n\n  const clickXThreshold = IS_TOUCH_ENV ? 40 : windowWidth / 10;\n\n  useEffect(() => {\n    const { scale, x, y } = transformRef.current;\n    // Only update active media if slide is in default position\n    if (x === 0 && y === 0 && scale === 1) {\n      setActiveMediaId(mediaId);\n    }\n  }, [mediaId, setActiveMediaId, transformRef]);\n\n  useLayoutEffect(() => {\n    const { x, y, scale } = getTransform();\n    if (leftSlideRef.current) {\n      leftSlideRef.current.style.transform = getTransformStyle(-windowWidth + x - SLIDES_GAP);\n    }\n    if (activeSlideRef.current) {\n      activeSlideRef.current.style.transform = getTransformStyle(x, y, scale);\n    }\n    if (rightSlideRef.current) {\n      rightSlideRef.current.style.transform = getTransformStyle(windowWidth + x + SLIDES_GAP);\n    }\n  }, [getTransform, windowWidth]);\n\n  const changeSlide = useLastCallback((direction: number, dryRun = false) => {\n    let lastTransform = lastTransformRef.current;\n    const mId = getMediaId(activeMediaIdRef.current, direction);\n    if (dryRun) return mId !== undefined;\n    if (mId === undefined) return false;\n    const offset = (windowWidth + SLIDES_GAP) * direction;\n    const transform = transformRef.current;\n    const x = transform.x + offset;\n    setActiveMediaId(mId);\n    selectMediaDebounced(mId);\n    lastTransform = { x: 0, y: 0, scale: 1 };\n    if (!withAnimation) {\n      setTransform(lastTransform);\n      return true;\n    }\n    cancelAnimation = animateNumber({\n      from: x,\n      to: 0,\n      duration: ANIMATION_DURATION,\n      timing: easeOutCubic,\n      onUpdate: (value) => setTransform({\n        y: 0,\n        x: value,\n        scale: 1,\n      }),\n    });\n    return true;\n  });\n\n  const handleNextSlide = useLastCallback(() => changeSlide(1));\n  const handlePrevSlide = useLastCallback(() => changeSlide(-1));\n\n  useEffect(() => {\n    if (!containerRef.current || activeMediaIdRef.current === undefined) {\n      return undefined;\n    }\n    let lastTransform = lastTransformRef.current;\n    const lastDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    const lastZoomCenter = {\n      x: 0,\n      y: 0,\n    };\n    const panDelta = {\n      x: 0,\n      y: 0,\n    };\n    let lastGestureTime = Date.now();\n    let content: HTMLElement | null;\n    const setLastGestureTime = debounce(() => {\n      lastGestureTime = Date.now();\n    }, 500, false, true);\n\n    const changeSlideOnClick = (e: MouseEvent): [boolean, boolean] => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return [false, false];\n      let direction = 0;\n      if (windowHeight - e.pageY < CLICK_Y_THRESHOLD) {\n        return [false, false];\n      }\n      if (e.pageX < clickXThreshold) {\n        direction = -1;\n      } else if (e.pageX > windowWidth - clickXThreshold) {\n        direction = 1;\n      }\n      const hasNextSlide = changeSlide(direction, !IS_TOUCH_ENV);\n      const isInThreshold = direction !== 0;\n      return [isInThreshold, hasNextSlide];\n    };\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return;\n      switch (e.key) {\n        case 'Left': // IE/Edge specific value\n        case 'ArrowLeft':\n          changeSlide(-1);\n          break;\n\n        case 'Right': // IE/Edge specific value\n        case 'ArrowRight':\n          changeSlide(1);\n          break;\n      }\n    };\n\n    const calculateOffsetBoundaries = (\n      { x, y, scale }: Transform,\n      offsetTop = 0,\n    ): [Transform, boolean, boolean] => {\n      const initialContentRect = initialContentRectRef.current;\n      if (!initialContentRect) return [{ x, y, scale }, true, true];\n      // Get current content boundaries\n      let inBoundsX = true;\n      let inBoundsY = true;\n\n      const centerX = (windowWidth - windowWidth * scale) / 2;\n      const centerY = (windowHeight - windowHeight * scale) / 2;\n\n      // If content is outside window we calculate offset boundaries\n      // based on initial content rect and current scale\n      const minOffsetX = Math.max(-initialContentRect.left * scale, centerX);\n      const maxOffsetX = windowWidth - initialContentRect.right * scale;\n      inBoundsX = isBetween(x, maxOffsetX, minOffsetX);\n      x = clamp(x, maxOffsetX, minOffsetX);\n\n      const minOffsetY = Math.max(-initialContentRect.top * scale + offsetTop, centerY);\n      const maxOffsetY = windowHeight - initialContentRect.bottom * scale;\n      inBoundsY = isBetween(y, maxOffsetY, minOffsetY);\n      y = clamp(y, maxOffsetY, minOffsetY);\n\n      return [{ x, y, scale }, inBoundsX, inBoundsY];\n    };\n\n    const onRelease = (e: MouseEvent | RealTouchEvent | WheelEvent) => {\n      // This allows to prevent onRelease triggered by debounced wheel event\n      // after onRelease was triggered manually in onDrag\n      if (isReleasedRef.current) {\n        isReleasedRef.current = false;\n        return;\n      }\n      if (e.type === 'mouseup') {\n        setIsMouseDown(false);\n      }\n      const transform = transformRef.current;\n      const { y, scale } = transform;\n      let x = transform.x;\n      const absX = Math.abs(x);\n      const absY = Math.abs(y);\n\n      clearSwipeDirectionDebounced();\n\n      // If scale is less than 1 we need to bounce back\n      if (scale < 1) {\n        lastTransform = { x: 0, y: 0, scale: 1 };\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [0, 0, 1],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      if (scale > 1) {\n        // Get current content boundaries\n        const s1 = Math.min(scale, MAX_ZOOM);\n        const scaleFactor = s1 / scale;\n\n        // Calculate new position based on the last zoom center to keep the zoom center\n        // at the same position when bouncing back from max zoom\n        let x1 = x * scaleFactor + (lastZoomCenter.x - scaleFactor * lastZoomCenter.x);\n        let y1 = y * scaleFactor + (lastZoomCenter.y - scaleFactor * lastZoomCenter.y);\n\n        // Arbitrary pan velocity coefficient\n        const k = 0.15;\n\n        // If scale didn't change, we need to add inertia to pan gesture\n        if (e.type !== 'wheel' && lastTransform.scale === scale) {\n          // Calculate user gesture velocity\n          const Vx = Math.abs(lastDragOffset.x) / (Date.now() - lastGestureTime);\n          const Vy = Math.abs(lastDragOffset.y) / (Date.now() - lastGestureTime);\n\n          // Add extra distance based on gesture velocity and last pan delta\n          x1 -= Math.abs(lastDragOffset.x) * Vx * k * panDelta.x;\n          y1 -= Math.abs(lastDragOffset.y) * Vy * k * panDelta.y;\n        }\n\n        [lastTransform] = calculateOffsetBoundaries({ x: x1, y: y1, scale: s1 });\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      lastTransform = {\n        x,\n        y,\n        scale,\n      };\n      if (absY >= SWIPE_Y_THRESHOLD) {\n        onClose();\n        return;\n      }\n      // Bounce back if vertical swipe is below threshold\n      if (absY > 0) {\n        cancelAnimation = animateNumber({\n          from: y,\n          to: 0,\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: 0,\n            y: value,\n            scale,\n          }),\n        });\n        return;\n      }\n      // Get horizontal swipe direction\n      const direction = x < 0 ? 1 : -1;\n      const mId = getMediaId(activeMediaIdRef.current, x < 0 ? 1 : -1);\n      // Get the direction of the last pan gesture.\n      // Could be different from the total horizontal swipe direction\n      // if user starts a swipe in one direction and then changes the direction\n      // we need to cancel slide transition\n      const dirX = panDelta.x < 0 ? -1 : 1;\n      if (mId !== undefined && absX >= SWIPE_X_THRESHOLD && direction === dirX) {\n        const offset = (windowWidth + SLIDES_GAP) * direction;\n        // If image is shifted by more than SWIPE_X_THRESHOLD,\n        // We shift everything by one screen width and then set new active message id\n        x += offset;\n        setActiveMediaId(mId);\n        selectMediaDebounced(mId);\n      }\n      // Then we always return to the original position\n      cancelAnimation = animateNumber({\n        from: x,\n        to: 0,\n        duration: ANIMATION_DURATION,\n        timing: easeOutCubic,\n        onUpdate: (value) => setTransform({\n          y: 0,\n          x: value,\n          scale: scale ?? 1,\n        }),\n      });\n    };\n\n    const cleanup = captureEvents(containerRef.current, {\n      isNotPassive: true,\n      withNativeDrag: true,\n      excludedClosestSelector: `${styles.header}, .${styles.contentDescription}`,\n      minZoom: MIN_ZOOM,\n      maxZoom: MAX_ZOOM,\n      doubleTapZoom: DOUBLE_TAP_ZOOM,\n      withWheelDrag: true,\n      onCapture: (e) => {\n        const { x, y, scale } = transformRef.current;\n        if (e.type === 'mousedown') {\n          setIsMouseDown(true);\n          if (scale !== 1) {\n            e.preventDefault();\n            return;\n          }\n        }\n        lastGestureTime = Date.now();\n        if (x === 0 && y === 0 && scale === 1) {\n          if (!activeSlideRef.current) return;\n          content = activeSlideRef.current.querySelector('img, video');\n          if (!content) return;\n          // Store initial content rect, without transformations\n          initialContentRectRef.current = content.getBoundingClientRect();\n        }\n      },\n      onDrag: (event, captureEvent, {\n        dragOffsetX,\n        dragOffsetY,\n      }, cancelDrag) => {\n        if (isReleasedRef.current) return;\n        // Avoid conflicts with swipe-to-back gestures\n        if (IS_IOS && captureEvent.type === 'touchstart') {\n          const { pageX } = (captureEvent as RealTouchEvent).touches[0];\n          if (pageX <= IOS_SCREEN_EDGE_THRESHOLD || pageX >= windowWidth - IOS_SCREEN_EDGE_THRESHOLD) {\n            return;\n          }\n        }\n        if (cancelAnimation) {\n          cancelAnimation();\n          cancelAnimation = undefined;\n        }\n        panDelta.x = lastDragOffset.x - dragOffsetX;\n        panDelta.y = lastDragOffset.y - dragOffsetY;\n        lastDragOffset.x = dragOffsetX;\n        lastDragOffset.y = dragOffsetY;\n        const absOffsetX = Math.abs(dragOffsetX);\n        const absOffsetY = Math.abs(dragOffsetY);\n        const { x, y, scale } = transformRef.current;\n\n        // If user is inactive but is still touching the screen\n        // we reset last gesture time\n        setLastGestureTime();\n\n        // If image is scaled we just need to pan it\n        if (scale !== 1) {\n          const x1 = lastTransform.x + dragOffsetX;\n          const y1 = lastTransform.y + dragOffsetY;\n          if (['wheel', 'mousemove'].includes(event.type)) {\n            const [transform, inBoundsX, inBoundsY] = calculateOffsetBoundaries({ x: x1, y: y1, scale });\n            if (cancelDrag) cancelDrag(!inBoundsX, !inBoundsY);\n            setTransform(transform);\n            return;\n          }\n          if ('touches' in event && event.touches.length === 1) {\n            setTransform({\n              x: x1,\n              y: y1,\n              scale,\n            });\n          }\n          return;\n        }\n        if (event.type === 'mousemove') return;\n        if (swipeDirectionRef.current !== SwipeDirection.Vertical) {\n          // If user is swiping horizontally or horizontal shift is dominant\n          // we change only horizontal position\n          if (swipeDirectionRef.current === SwipeDirection.Horizontal\n              || Math.abs(x) > SWIPE_DIRECTION_THRESHOLD || absOffsetX / absOffsetY > SWIPE_DIRECTION_TOLERANCE) {\n            swipeDirectionRef.current = SwipeDirection.Horizontal;\n            const limit = windowWidth + SLIDES_GAP;\n            const x1 = clamp(dragOffsetX, -limit, limit);\n            setTransform({\n              x: x1,\n              y: 0,\n              scale,\n            });\n            // We know that at this point onRelease will trigger slide change,\n            // We can trigger onRelease directly instead of waiting for the debounced callback\n            // to avoid a delay\n            if (event.type === 'wheel' && Math.abs(x1) > SWIPE_X_THRESHOLD * 2) {\n              onRelease(event);\n              isReleasedRef.current = true;\n            }\n            return;\n          }\n        }\n        // If vertical shift is dominant we change only vertical position\n        if (swipeDirectionRef.current === SwipeDirection.Vertical\n            || Math.abs(y) > SWIPE_DIRECTION_THRESHOLD || absOffsetY / absOffsetX > SWIPE_DIRECTION_TOLERANCE) {\n          swipeDirectionRef.current = SwipeDirection.Vertical;\n          const limit = windowHeight;\n          const y1 = clamp(dragOffsetY, -limit, limit);\n          setTransform({\n            x: 0,\n            y: y1,\n            scale,\n          });\n          if (event.type === 'wheel' && Math.abs(y1) > SWIPE_Y_THRESHOLD * 2) {\n            onRelease(event);\n            isReleasedRef.current = true;\n          }\n        }\n      },\n      onZoom: (e, {\n        zoom,\n        zoomFactor,\n        initialCenterX,\n        initialCenterY,\n        dragOffsetX,\n        dragOffsetY,\n        currentCenterX,\n        currentCenterY,\n      }) => {\n        if (cancelAnimation) cancelAnimation();\n        initialCenterX = initialCenterX || windowWidth / 2;\n        initialCenterY = initialCenterY || windowHeight / 2;\n        currentCenterX = currentCenterX || windowWidth / 2;\n        currentCenterY = currentCenterY || windowHeight / 2;\n\n        // Calculate current scale based on zoom factor and limits, add zoom margin for bounce back effect\n        const scale = zoom ?? clamp(lastTransform.scale * zoomFactor!, MIN_ZOOM * 0.5, MAX_ZOOM * 3);\n        const scaleFactor = scale / lastTransform.scale;\n        const offsetX = Math.abs(Math.min(lastTransform.x, 0));\n        const offsetY = Math.abs(Math.min(lastTransform.y, 0));\n\n        // Save last zoom center for bounce back effect\n        lastZoomCenter.x = currentCenterX;\n        lastZoomCenter.y = currentCenterY;\n\n        // Calculate new center relative to the shifted image\n        const scaledCenterX = offsetX + initialCenterX;\n        const scaledCenterY = offsetY + initialCenterY;\n\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (scaledCenterX - scaleFactor * scaledCenterX);\n        const scaleOffsetY = (scaledCenterY - scaleFactor * scaledCenterY);\n\n        const [transform] = calculateOffsetBoundaries({\n          x: lastTransform.x + scaleOffsetX + dragOffsetX,\n          y: lastTransform.y + scaleOffsetY + dragOffsetY,\n          scale,\n        });\n\n        setTransform(transform);\n      },\n      onClick(e) {\n        setIsMouseDown(false);\n        const [isInThreshold, hasNextSlide] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          if (IS_TOUCH_ENV) return;\n          if (!hasNextSlide) onClose();\n          return;\n        }\n        if (lastTransform.scale !== 1 || IS_TOUCH_ENV) return;\n        onClose();\n      },\n      onDoubleClick(e, {\n        centerX,\n        centerY,\n      }) {\n        const [isInThreshold] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          return;\n        }\n        if (!IS_TOUCH_ENV && e.type !== 'wheel') return;\n        const { x, y, scale } = transformRef.current;\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (centerX - DOUBLE_TAP_ZOOM * centerX);\n        const scaleOffsetY = (centerY - DOUBLE_TAP_ZOOM * centerY);\n        if (scale === 1) {\n          if (x !== 0 || y !== 0) return;\n          lastTransform = calculateOffsetBoundaries({\n            x: scaleOffsetX,\n            y: scaleOffsetY,\n            scale: DOUBLE_TAP_ZOOM,\n          })[0];\n        } else {\n          lastTransform = {\n            x: 0,\n            y: 0,\n            scale: 1,\n          };\n        }\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => {\n            const transform = {\n              x: value[0],\n              y: value[1],\n              scale: value[2],\n            };\n            setTransform(transform);\n          },\n        });\n      },\n      onRelease,\n    });\n    document.addEventListener('keydown', handleKeyDown, false);\n    return () => {\n      cleanup();\n      document.removeEventListener('keydown', handleKeyDown, false);\n    };\n  },\n  [\n    onClose,\n    setTransform,\n    getMediaId,\n    windowWidth,\n    windowHeight,\n    clickXThreshold,\n    selectMediaDebounced,\n    clearSwipeDirectionDebounced,\n    withAnimation,\n    setIsMouseDown,\n    transformRef,\n    setActiveMediaId,\n    activeMediaIdRef,\n    changeSlide,\n  ]);\n\n  useEffect(() => {\n    const zoomChange = getZoomChange();\n    const hasZoomChanged = prevZoomChangeRef.current !== undefined\n      && prevZoomChangeRef.current !== zoomChange;\n    if (!containerRef.current || !hasZoomChanged) return;\n    prevZoomChangeRef.current = zoomChange;\n    const { scale } = transformRef.current;\n    const dir = zoomChange > 0 ? -1 : +1;\n    const minZoom = MIN_ZOOM * 0.6;\n    const maxZoom = MAX_ZOOM * 3;\n    let steps = 100;\n    let prevValue = 0;\n    if (scale <= minZoom && dir > 0) return;\n    if (scale >= maxZoom && dir < 0) return;\n    if (scale === 1 && dir > 0) steps = 20;\n    if (cancelZoomAnimation) cancelZoomAnimation();\n    cancelZoomAnimation = animateNumber({\n      from: dir,\n      to: dir * steps,\n      duration: ANIMATION_DURATION,\n      timing: easeOutQuart,\n      onUpdate: (value) => {\n        if (!containerRef.current) return;\n        const delta = round(value - prevValue, 2);\n        prevValue = value;\n        // To reuse existing logic we trigger wheel event for zoom buttons\n        const wheelEvent = new WheelEvent('wheel', {\n          deltaY: delta,\n          ctrlKey: true,\n        });\n        containerRef.current.dispatchEvent(wheelEvent);\n      },\n    });\n  }, [getZoomChange, transformRef]);\n\n  // eslint-disable-next-line no-null/no-null\n  if (activeMediaId === undefined) return null;\n\n  const nextMediaId = getMediaId(activeMediaId, 1);\n  const prevMediaId = getMediaId(activeMediaId, -1);\n  const hasPrev = prevMediaId !== undefined;\n  const hasNext = nextMediaId !== undefined;\n  const isMoving = isMouseDown && isScaled;\n\n  return (\n    <div className={styles.slides} ref={containerRef}>\n      <div className={styles.slide} ref={leftSlideRef}>\n        {hasPrev && !isScaled && !isResizing && (\n          <Media mediaId={prevMediaId} />\n        )}\n      </div>\n      <div\n        className={buildClassName(styles.slide, styles.slide_active, isMoving && styles.slide_moving)}\n        ref={activeSlideRef}\n      >\n        <Media mediaId={activeMediaId} />\n      </div>\n      <div className={styles.slide} ref={rightSlideRef}>\n        {hasNext && !isScaled && !isResizing && (\n          <Media mediaId={nextMediaId} />\n        )}\n      </div>\n      {hasPrev && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handlePrevSlide}\n          className={buildClassName(styles.navigation, styles.navigation_prev)}\n          aria-label={lang('Previous')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n      {hasNext && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handleNextSlide}\n          className={buildClassName(styles.navigation, styles.navigation_next)}\n          aria-label={lang('Next')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Slides);\n\nfunction getTransformStyle(x = 0, y = 0, scale = 1) {\n  return `translate3d(${x.toFixed(3)}px, ${y.toFixed(3)}px, 0px) scale(${scale.toFixed(3)})`;\n}\n","import React, {\n  beginHeavyAnimation,\n  memo, useEffect, useLayoutEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport { MediaType } from '../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { animateClosing, animateOpening, ANIMATION_DURATION } from './helpers/ghostAnimation';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport ShowTransition from '../ui/ShowTransition';\nimport Transition from '../ui/Transition';\nimport Actions from './Actions';\nimport MediaInfo from './MediaInfo';\nimport Slides from './Slides';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface StateProps {\n  mediaId?: string;\n  txId?: string;\n  hiddenNfts?: 'user' | 'scam';\n  noGhostAnimation?: boolean;\n  mediaIds: string[];\n  mediaUrl?: string;\n  mediaType: MediaType;\n  mediaByIds?: Record<string, ApiNft>;\n  blacklistedIds: string[];\n  withAnimation: boolean;\n}\n\nfunction MediaViewer({\n  mediaId, mediaIds, mediaType, mediaUrl, withAnimation, mediaByIds, blacklistedIds, txId, hiddenNfts, noGhostAnimation,\n}: StateProps) {\n  const { closeMediaViewer, openMediaViewer } = getActions();\n\n  const isOpen = Boolean(mediaId);\n  const lang = useLang();\n  const prevMediaId = usePrevious(mediaId);\n  const prevTxId = usePrevious(txId);\n  const prevHiddenNfts = usePrevious(hiddenNfts);\n  const prevNoGhostAnimation = usePrevious(noGhostAnimation);\n  const headerAnimation = withAnimation ? 'slideFade' : 'none';\n  const shouldAnimateOpening = withAnimation && isOpen && !prevMediaId && !noGhostAnimation;\n  const shouldAnimateClosing = withAnimation && !isOpen && !!prevMediaId && !prevNoGhostAnimation;\n\n  const handleClose = useLastCallback(() => closeMediaViewer());\n\n  const renderedMediaIds = useMemo(() => {\n    return mediaIds.filter((id) => {\n      const media = mediaByIds?.[id];\n      return media && !media.isHidden && !blacklistedIds.includes(id);\n    });\n  }, [blacklistedIds, mediaByIds, mediaIds]);\n  const selectedMediaIndex = renderedMediaIds.indexOf(mediaId!);\n\n  const getMediaId = useLastCallback((fromId?: string, direction?: number): string | undefined => {\n    if (fromId === undefined) return undefined;\n    const index = renderedMediaIds.indexOf(fromId);\n    if ((direction === -1 && index > 0) || (direction === 1 && index < renderedMediaIds.length - 1)) {\n      return renderedMediaIds[index + direction];\n    }\n    return undefined;\n  });\n\n  const selectMedia = useLastCallback((id: string) => {\n    openMediaViewer({ mediaType, mediaId: id });\n  });\n\n  useLayoutEffect(() => {\n    document.body.classList.toggle('is-media-viewer-open', isOpen);\n  }, [isOpen]);\n\n  useEffect(() => (isOpen ? captureEscKeyListener(handleClose) : undefined), [handleClose, isOpen]);\n\n  useEffect(() => {\n    if (shouldAnimateOpening) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateOpening(mediaType, mediaId, mediaUrl, txId, hiddenNfts);\n    }\n    if (shouldAnimateClosing) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateClosing(mediaType, prevMediaId, prevTxId, prevHiddenNfts);\n    }\n  }, [\n    shouldAnimateOpening,\n    shouldAnimateClosing,\n    mediaId,\n    mediaType,\n    mediaUrl,\n    prevMediaId,\n    txId,\n    prevTxId,\n    hiddenNfts,\n    prevHiddenNfts,\n  ]);\n\n  return (\n    <ShowTransition\n      className={buildClassName(styles.root, 'opacity-transition', 'slow')}\n      isOpen={isOpen}\n      shouldAnimateFirstRender\n      isCustom\n    >\n      <div className={styles.header} dir={lang.isRtl ? 'rtl' : undefined}>\n        <Transition activeKey={selectedMediaIndex} name={headerAnimation} className={styles.headerTransition}>\n          <MediaInfo mediaId={mediaId} />\n        </Transition>\n        <Actions mediaId={mediaId} onClose={handleClose} />\n      </div>\n      <Slides\n        isOpen={isOpen}\n        mediaId={mediaId}\n        getMediaId={getMediaId}\n        selectMedia={selectMedia}\n        withAnimation={withAnimation}\n        onClose={handleClose}\n      />\n    </ShowTransition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    mediaId, mediaType = MediaType.Nft, txId, hiddenNfts, noGhostAnimation,\n  } = global.mediaViewer || {};\n  const animationLevel = global.settings?.animationLevel;\n  const accountState = selectCurrentAccountState(global);\n\n  let mediaIds: string[] = MEMO_EMPTY_ARRAY;\n  let mediaUrl: string | undefined;\n  let mediaByIds: Record<string, ApiNft> | undefined;\n  let blacklistedIds: string[] = MEMO_EMPTY_ARRAY;\n\n  if (mediaType === MediaType.Nft) {\n    const { orderedAddresses, byAddress } = accountState?.nfts || {};\n    const { blacklistedNftAddresses } = accountState || {};\n    const nft = byAddress?.[mediaId!];\n    mediaUrl = (!nft?.metadata?.lottie && nft?.image) || nft?.thumbnail;\n    mediaIds = orderedAddresses || MEMO_EMPTY_ARRAY;\n    mediaByIds = byAddress;\n    if (blacklistedNftAddresses?.length) {\n      blacklistedIds = blacklistedNftAddresses;\n    }\n  }\n\n  return {\n    mediaId,\n    txId,\n    hiddenNfts,\n    noGhostAnimation,\n    mediaIds,\n    mediaType,\n    mediaUrl,\n    mediaByIds,\n    blacklistedIds,\n    withAnimation: animationLevel > 0,\n  };\n})(MediaViewer));\n","import windowSize from './windowSize';\n\nexport function isElementInViewport(el: HTMLElement) {\n  if (el.style.display === 'none') {\n    return false;\n  }\n\n  const rect = el.getBoundingClientRect();\n  const { height: windowHeight } = windowSize.get();\n\n  return (rect.top <= windowHeight) && ((rect.top + rect.height) >= 0);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TyYDeoPI\",\"standard\":\"ZzhmGZX8\",\"silver\":\"VOCPN2H2\",\"gold\":\"eIy_VriQ\",\"platinum\":\"ThB2aK4u\",\"black\":\"pSEqHC9v\",\"list\":\"VuKYnODy\",\"term\":\"De4BJ4HR\",\"icon\":\"WsbPBan7\",\"data\":\"SmGuh0xn\",\"button\":\"hn6cNzho\",\"currencyIcon\":\"uJl349yd\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiMtwCardType } from '../../api/types';\n\nimport { DEFAULT_FEE, TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal } from '../../util/decimals';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\n\nimport styles from './CardPros.module.scss';\n\ninterface OwnProps {\n  type: ApiMtwCardType;\n  price?: number;\n  balance?: bigint;\n}\n\nfunction CardPros({ type, price, balance }: OwnProps) {\n  const { startCardMinting } = getActions();\n\n  const lang = useLang();\n  const isEnoughBalance = price && balance ? fromDecimal(price, TONCOIN.decimals) + DEFAULT_FEE < balance : false;\n\n  const handleSubmit = useLastCallback(() => {\n    startCardMinting({ type });\n  });\n\n  return (\n    <div className={buildClassName(styles.root, styles[type])}>\n      <dl className={styles.list}>\n        <dt className={styles.term}>\n          {lang('Unique')}\n          <i className={buildClassName(styles.icon, 'icon-diamond')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>\n          {lang('Get a card with unique background and personalized palette for wallet interface.')}\n        </dd>\n\n        <dt className={styles.term}>\n          {lang('Transferable')}\n          <i className={buildClassName(styles.icon, 'icon-swap')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>{lang('Easily send your upgraded card to any of your friends.')}</dd>\n\n        <dt className={styles.term}>\n          {lang('Tradable')}\n          <i className={buildClassName(styles.icon, 'icon-auction')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>{lang('Sell or auction your card on third-party NFT marketplaces.')}</dd>\n      </dl>\n\n      {!!price && (\n        <Button\n          isPrimary\n          isDisabled={!isEnoughBalance}\n          className={styles.button}\n          onClick={isEnoughBalance ? handleSubmit : undefined}\n        >\n          {lang('Upgrade for %currency% %amount%', {\n            amount: price,\n            currency: <i className={buildClassName(styles.currencyIcon, 'icon-ton')} aria-label=\"TON\" />,\n          })}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(CardPros);\n","// extracted by mini-css-extract-plugin\nexport default {\"dialog\":\"CjwvIYmY\",\"transition\":\"Tv22S5Gs\",\"transitionSlide\":\"zUSYH0x7\",\"content\":\"LpuTVkiG\",\"slide\":\"ZfVQ8KGW\",\"standard\":\"k0gL3sAb\",\"black\":\"MUamKAQw\",\"slideInner\":\"k2_YXVBE\",\"video\":\"wpccVVfq\",\"cardType\":\"CzdRPvVS\",\"close\":\"IBwesrC_\",\"navigation\":\"cIoUkENQ\",\"navigationLeft\":\"GF_wLd9i\",\"navigationRight\":\"y5oAUrMg\",\"navigationIcon\":\"aSeq5lrl\",\"avaliability\":\"OGLS5EQO\",\"progress\":\"Q3dzQZod\",\"soldOut\":\"VyfNbKU1\",\"amount\":\"wozoyd4S\",\"amountInner\":\"ZgsWpsHL\",\"amountLeft\":\"XMt08mOm\",\"amountSold\":\"F8mchLc4\",\"dots\":\"HY5hRBmJ\",\"dot\":\"tOktKTIK\",\"dotActive\":\"ZMU4FK04\",\"sticker\":\"eto_LEBm\",\"resultWithTime\":\"hlrWLhQ2\",\"resultTimeIcon\":\"W1LXu50q\"};","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiCardInfo, ApiCardsInfo, ApiMtwCardType } from '../../api/types';\nimport type { LangFn } from '../../hooks/useLang';\n\nimport { MTW_CARDS_MINT_BASE_URL } from '../../config';\nimport { selectCurrentToncoinBalance } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport { formatNumber } from '../../util/formatNumber';\nimport { round } from '../../util/round';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Transition from '../ui/Transition';\nimport CardPros from './CardPros';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './MintCardModal.module.scss';\n\ninterface OwnProps {\n  cardsInfo: ApiCardsInfo;\n}\n\ninterface StateProps {\n  tonBalance: bigint;\n}\n\nenum CardSlides {\n  Standard = 0,\n  Silver,\n  Gold,\n  Platinum,\n  Black,\n}\n\nconst TOTAL_SLIDES = Object.values(CardSlides).length / 2;\n\nfunction CardRoster({ cardsInfo, tonBalance }: OwnProps & StateProps) {\n  const { closeMintCardModal } = getActions();\n\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  const [currentSlide, setCurrentSlide] = useState<number>(CardSlides.Standard);\n  const [nextKey, setNextKey] = useState<number>(CardSlides.Silver);\n\n  const showNextSlide = useLastCallback(() => {\n    setCurrentSlide((current) => (current === CardSlides.Black ? CardSlides.Standard : current + 1));\n    setNextKey((current) => (current === CardSlides.Black ? CardSlides.Standard : current + 1));\n  });\n\n  const showPrevSlide = useLastCallback(() => {\n    setCurrentSlide((current) => (current === CardSlides.Standard ? CardSlides.Black : current - 1));\n    setNextKey((current) => (current === CardSlides.Standard ? CardSlides.Black : current - 1));\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureEvents(transitionRef.current!, {\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Left) {\n          showNextSlide();\n          return true;\n        } else if (direction === SwipeDirection.Right) {\n          showPrevSlide();\n          return true;\n        }\n\n        return false;\n      },\n      selectorToPreventScroll: '.custom-scroll',\n    });\n  }, []);\n\n  function renderControls() {\n    return (\n      <>\n        <Button\n          isRound\n          className={buildClassName(styles.close, modalStyles.closeButton)}\n          ariaLabel={lang('Close')}\n          onClick={closeMintCardModal}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n        <button\n          className={buildClassName(styles.navigation, styles.navigationLeft)}\n          type=\"button\"\n          aria-label={lang('Prev')}\n          onClick={() => showPrevSlide()}\n        >\n          <i className={buildClassName(styles.navigationIcon, 'icon-chevron-left')} aria-hidden />\n        </button>\n        <button\n          className={buildClassName(styles.navigation, styles.navigationRight)}\n          type=\"button\"\n          onClick={() => showNextSlide()}\n          aria-label={lang('Next')}\n        >\n          <i className={buildClassName(styles.navigationIcon, 'icon-chevron-right')} aria-hidden />\n        </button>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    const defaultProps = {\n      lang,\n      tonBalance,\n      currentKey,\n    };\n\n    switch (currentKey) {\n      case CardSlides.Standard:\n        return renderMediaCard({\n          ...defaultProps,\n          title: 'Standard Card',\n          type: 'standard',\n          cardInfo: cardsInfo?.standard,\n        });\n\n      case CardSlides.Silver:\n        return renderMediaCard({\n          ...defaultProps,\n          title: 'Silver Card',\n          type: 'silver',\n          cardInfo: cardsInfo?.silver,\n        });\n\n      case CardSlides.Gold:\n        return renderMediaCard({\n          ...defaultProps,\n          title: 'Gold Card',\n          type: 'gold',\n          cardInfo: cardsInfo?.gold,\n        });\n\n      case CardSlides.Platinum:\n        return renderMediaCard({\n          ...defaultProps,\n          title: 'Platinum Card',\n          type: 'platinum',\n          cardInfo: cardsInfo?.platinum,\n        });\n\n      case CardSlides.Black:\n        return renderMediaCard({\n          ...defaultProps,\n          title: 'Black Card',\n          type: 'black',\n          cardInfo: cardsInfo?.black,\n        });\n    }\n  }\n\n  return (\n    <>\n      {renderControls()}\n      <Transition\n        ref={transitionRef}\n        name=\"semiFade\"\n        className={buildClassName(styles.transition, 'custom-scroll')}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    tonBalance: selectCurrentToncoinBalance(global),\n  };\n})(CardRoster));\n\nfunction renderMediaCard({\n  lang,\n  title,\n  type,\n  cardInfo,\n  tonBalance,\n  currentKey,\n}: {\n  lang: LangFn;\n  title: string;\n  type: ApiMtwCardType;\n  cardInfo?: ApiCardInfo;\n  tonBalance?: bigint;\n  currentKey: number;\n}) {\n  return (\n    (\n      <div className={styles.content}>\n        <div className={buildClassName(styles.slide, styles[type])}>\n          <video\n            autoPlay\n            muted\n            loop\n            playsInline\n            poster={`${MTW_CARDS_MINT_BASE_URL}mtw_card_${type}.avif`}\n            className={styles.video}\n          >\n            <source\n              src={`${MTW_CARDS_MINT_BASE_URL}mtw_card_${type}.h264.mp4`}\n              type=\"video/mp4; codecs=avc1.4D401E,mp4a.40.2\"\n            />\n          </video>\n          <div className={styles.slideInner}>\n            {renderDots(currentKey)}\n            <div className={styles.cardType}>{title}</div>\n            {renderAvailability(lang, cardInfo)}\n          </div>\n        </div>\n        <CardPros type={type} price={cardInfo?.price} balance={tonBalance} />\n      </div>\n    )\n  );\n}\n\nfunction renderDots(currentKey: number) {\n  return (\n    <div className={styles.dots}>\n      {Array.from({ length: TOTAL_SLIDES }).map((_, index) => {\n        return (\n          <div key={index} className={buildClassName(styles.dot, index === currentKey && styles.dotActive)} />\n        );\n      })}\n    </div>\n  );\n}\n\nfunction renderAvailability(lang: LangFn, cardInfo?: ApiCardInfo) {\n  const { all, notMinted } = cardInfo || {};\n  if (!all || !notMinted) {\n    return (\n      <div className={styles.avaliability}>\n        <div className={styles.soldOut}>{lang('This card has been sold out')}</div>\n      </div>\n    );\n  }\n\n  const sold = all - notMinted;\n  const leftAmount = lang('%amount% left', { amount: formatNumber(notMinted) });\n  const soldAmount = lang('%amount% sold', { amount: formatNumber(sold) });\n\n  return (\n    <div className={styles.avaliability}>\n      <div\n        className={styles.progress}\n        style={`--progress: ${round(notMinted / all, 2)};}`}\n      >\n        <div className={buildClassName(styles.amount, styles.amountInner, styles.amountLeft)}>{leftAmount}</div>\n        <div className={buildClassName(styles.amount, styles.amountInner, styles.amountSold)}>{soldAmount}</div>\n      </div>\n      <div className={buildClassName(styles.amount, styles.amountLeft)}>{leftAmount}</div>\n      <div className={buildClassName(styles.amount, styles.amountSold)}>{soldAmount}</div>\n    </div>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiCardsInfo } from '../../api/types';\nimport type { HardwareConnectState, Theme } from '../../global/types';\nimport { MintCardState } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport CardRoster from './CardRoster';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './MintCardModal.module.scss';\n\ninterface StateProps {\n  isOpen: boolean;\n  cardsInfo?: ApiCardsInfo;\n  isLoading?: boolean;\n  state?: MintCardState;\n  error?: string;\n  theme: Theme;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n}\n\nfunction MintCardModal({\n  isOpen,\n  cardsInfo,\n  isLoading,\n  state,\n  error,\n  theme,\n  isLedgerConnected,\n  isTonAppConnected,\n  hardwareState,\n} : StateProps) {\n  const {\n    closeMintCardModal, clearMintCardError, submitMintCard, submitMintCardHardware,\n  } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitMintCard({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    submitMintCardHardware();\n  });\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Enter Password')} onClose={closeMintCardModal} />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          isLoading={isLoading}\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={closeMintCardModal}\n          onUpdate={clearMintCardError}\n        />\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Card has been upgraded!')} onClose={closeMintCardModal} />\n\n        <div className={buildClassName(modalStyles.transitionContent, modalStyles.transitionContent_simple)}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n\n          <div className={buildClassName(styles.resultWithTime)}>\n            <AnimatedIconWithPreview\n              play={isActive}\n              size={ANIMATED_STICKER_TINY_ICON_PX}\n              className={styles.resultTimeIcon}\n              nonInteractive\n              noLoop={false}\n              tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n              previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n            />\n            <div>\n              {renderText(lang('$mint_card_result'))}\n            </div>\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button\n              isPrimary\n              className={modalStyles.buttonFullWidth}\n              onClick={closeMintCardModal}\n            >\n              {lang('Done')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case MintCardState.Initial:\n        return (<CardRoster cardsInfo={cardsInfo!} />);\n\n      case MintCardState.Password:\n        return renderPasswordForm(isActive);\n\n      case MintCardState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleHardwareSubmit}\n            onClose={closeMintCardModal}\n          />\n        );\n\n      case MintCardState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={closeMintCardModal}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case MintCardState.Done:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      forceFullNative\n      nativeBottomSheetKey=\"mint-card\"\n      dialogClassName={styles.dialog}\n      onClose={closeMintCardModal}\n    >\n      <Transition\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        name={resolveSlideTransitionName()}\n        className={buildClassName(styles.transition, 'custom-scroll')}\n        slideClassName={styles.transitionSlide}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentMintCard } = global;\n  const { config } = selectCurrentAccountState(global) || {};\n  const { cardsInfo } = config || {};\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    isOpen: currentMintCard?.state !== undefined,\n    cardsInfo,\n    isLoading: currentMintCard?.isLoading,\n    state: currentMintCard?.state,\n    error: currentMintCard?.error,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    theme: global.settings.theme,\n  };\n})(MintCardModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"B2lzpHP0\",\"warning\":\"egsZTzXN\",\"accountLink\":\"mSBmBqo6\",\"accountLink_inner\":\"FsSJDg8c\",\"accountLinkInner\":\"FsSJDg8c\",\"penultimate\":\"T7L1H3Tm\"};","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { Account, AccountState } from '../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { selectCurrentAccountState, selectNetworkAccounts } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { shortenAddress } from '../../../util/shortenAddress';\nimport { IS_IOS_APP } from '../../../util/windowEnvironment';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './LogOutModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: (shouldCloseSettings: boolean) => void;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  hasManyAccounts: boolean;\n  accounts: Record<string, Account>;\n  accountStates: Record<string, AccountState>;\n  isBackupRequired?: boolean;\n}\n\ninterface LinkAccount {\n  id: string;\n  title: string;\n}\n\nfunction LogOutModal({\n  isOpen,\n  currentAccountId,\n  hasManyAccounts,\n  accounts,\n  accountStates,\n  isBackupRequired,\n  onClose,\n}: OwnProps & StateProps) {\n  const { signOut, switchAccount } = getActions();\n\n  const lang = useLang();\n  const [isLogOutFromAllAccounts, setIsLogOutFromAllAccounts] = useState<boolean>(IS_CORE_WALLET);\n\n  const accountsWithoutBackups = useMemo(() => {\n    if (!hasManyAccounts) {\n      return [];\n    }\n\n    return Object.entries(accounts).reduce<LinkAccount[]>((acc, [id, { title, addressByChain }]) => {\n      if (id !== currentAccountId && accountStates[id]?.isBackupRequired) {\n        acc.push({\n          id,\n          title: title || shortenAddress(addressByChain.ton)!,\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [accounts, accountStates, currentAccountId, hasManyAccounts]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsLogOutFromAllAccounts(IS_CORE_WALLET);\n    }\n  }, [isOpen]);\n\n  const handleSwitchAccount = (accountId: string) => {\n    onClose(false);\n    switchAccount({ accountId });\n  };\n\n  const handleLogOut = useLastCallback(() => {\n    onClose(!isLogOutFromAllAccounts && hasManyAccounts);\n    signOut({ level: IS_CORE_WALLET ? 'all' : isLogOutFromAllAccounts ? 'network' : 'account' });\n  });\n\n  const handleClose = useLastCallback(() => {\n    onClose(false);\n  });\n\n  function renderAccountLink(account: LinkAccount, idx: number) {\n    const { id, title } = account;\n    const fullClassName = buildClassName(\n      styles.accountLink,\n      idx + 2 === accountsWithoutBackups.length && styles.penultimate,\n    );\n\n    return (\n      <span className={fullClassName}>\n        <a\n          key={id}\n          href=\"#\"\n          className={styles.accountLink_inner}\n          onClick={(e: React.MouseEvent) => {\n            e.preventDefault();\n            handleSwitchAccount(id);\n          }}\n        >\n          {title}\n        </a>\n      </span>\n    );\n  }\n\n  function renderBackupWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b> {lang('$logout_without_backup_warning')}\n      </p>\n    );\n  }\n\n  function renderBackupForAccountsWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b>{' '}\n        {lang('$logout_accounts_without_backup_warning', {\n          links: <>{accountsWithoutBackups.map(renderAccountLink)}</>,\n        })}\n      </p>\n    );\n  }\n\n  const shouldRenderWarningForAnotherAccounts = isLogOutFromAllAccounts && accountsWithoutBackups.length > 0;\n  const shouldRenderWarningForCurrentAccount = isBackupRequired && !shouldRenderWarningForAnotherAccounts;\n  // Sibling button has wider text on iOS due to App Store \"Remove Wallet\" requirements\n  const cancelButtonClassNames = buildClassName(modalStyles.button, IS_IOS_APP && modalStyles.shortButton);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={IS_IOS_APP ? lang('Remove Wallet') : lang('Log Out')}\n      onClose={handleClose}\n    >\n      <p className={buildClassName(modalStyles.text, modalStyles.text_noExtraMargin)}>\n        {renderText(lang('$logout_warning', '12/24'))}\n      </p>\n      {!IS_CORE_WALLET && hasManyAccounts && (\n        <Checkbox\n          id=\"logount_all_accounts\"\n          className={styles.checkbox}\n          checked={isLogOutFromAllAccounts}\n          onChange={setIsLogOutFromAllAccounts}\n        >\n          {renderText(lang('$logout_confirm'))}\n        </Checkbox>\n      )}\n\n      {shouldRenderWarningForCurrentAccount && renderBackupWarning()}\n      {shouldRenderWarningForAnotherAccounts && renderBackupForAccountsWarning()}\n\n      <div className={modalStyles.buttons}>\n        <Button className={cancelButtonClassNames} onClick={handleClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isDestructive onClick={handleLogOut} className={modalStyles.button}>\n          {IS_IOS_APP ? lang('Remove Wallet') : lang('Exit')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const accounts = selectNetworkAccounts(global) || {};\n    const currentAccountState = selectCurrentAccountState(global);\n    const accountIds = Object.keys(accounts);\n    const hasManyAccounts = accountIds.length > 1;\n\n    return {\n      currentAccountId: global.currentAccountId!,\n      hasManyAccounts,\n      accounts,\n      accountStates: global.byAccountId,\n      isBackupRequired: currentAccountState?.isBackupRequired,\n    };\n  })(LogOutModal),\n);\n","import type { ChangeEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Switcher.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  name?: string;\n  value?: string;\n  label?: string;\n  checked?: boolean;\n  className?: string;\n  onChange?: (e: ChangeEvent<HTMLInputElement>) => void;\n  onCheck?: (isChecked: boolean) => void;\n  shouldStopPropagation?: boolean;\n};\n\nfunction Switcher({\n  id,\n  name,\n  value,\n  label,\n  checked = false,\n  className,\n  onChange,\n  onCheck,\n  shouldStopPropagation,\n}: OwnProps) {\n  function handleChange(e: ChangeEvent<HTMLInputElement>) {\n    onChange?.(e);\n    onCheck?.(e.currentTarget.checked);\n  }\n\n  return (\n    <label\n      className={buildClassName(styles.container, className)}\n      title={label}\n      aria-label={label}\n      onClick={shouldStopPropagation ? (e) => e.stopPropagation() : undefined}\n      tabIndex={0}\n      role=\"button\"\n    >\n      <input\n        type=\"checkbox\"\n        id={id}\n        name={name}\n        value={value}\n        checked={checked}\n        className={styles.input}\n        onChange={handleChange}\n      />\n      <span className={styles.widget} />\n    </label>\n  );\n}\n\nexport default memo(Switcher);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"pDx55knh\",\"input\":\"cLbaNjJ_\",\"widget\":\"tiLjiStY\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"v8rRtn7B\",\"sticker\":\"CC8Q5sJb\",\"stickerHuge\":\"bQ7CA6_X\",\"error\":\"iEiAdwiC\",\"step\":\"TI5caump\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CreatePasswordForm from '../../ui/CreatePasswordForm';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOff({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { disableBiometrics } = getActions();\n\n  const lang = useLang();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric?: boolean) => {\n    disableBiometrics({ password, isPasswordNumeric });\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case BiometricsState.TurnOffBiometricConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Confirmation')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              {error ? (\n                <div className={styles.error}>{lang(error)}</div>\n              ) : (\n                <div className={styles.step}>{lang('Please verify the operation.')}</div>\n              )}\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffCreatePassword:\n        return (\n          <>\n            <ModalHeader title={lang('Create Password')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isActive}\n                isLoading={isLoading}\n                formId=\"biometrics-create-password\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n              />\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Disabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOff);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TurnOffWaning({ isOpen, onClose }: OwnProps) {\n  const { openBiometricsTurnOff } = getActions();\n\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={lang('Turn Off Biometrics')}\n      onClose={onClose}\n    >\n      <p className={modalStyles.text}>\n        {lang('If you turn off biometric protection, you will need to create a password.')}\n      </p>\n\n      <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n        <Button className={modalStyles.button} onClick={onClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isPrimary className={modalStyles.button} onClick={openBiometricsTurnOff}>\n          {lang('Continue')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOffWaning);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_ELECTRON } from '../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOn({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { enableBiometrics } = getActions();\n\n  const lang = useLang();\n  const [localError, setLocalError] = useState<string | undefined>();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const shouldDisablePasswordForm = Boolean(state !== BiometricsState.TurnOnPasswordConfirmation);\n\n  useEffect(() => {\n    if (isOpen) {\n      setLocalError('');\n    }\n  }, [isOpen]);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError(undefined);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (shouldDisablePasswordForm) {\n      return;\n    }\n\n    try {\n      enableBiometrics({ password });\n    } catch (err: any) {\n      setLocalError(err.message || 'Unknown error.');\n    }\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case BiometricsState.TurnOnPasswordConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Turn On Biometrics')} onClose={onClose} />\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error || localError}\n              operationType=\"passcode\"\n              help={lang('Enabling biometric confirmation will reset the password.')}\n              submitLabel={lang('Continue')}\n              onSubmit={handleSubmit}\n              onCancel={onClose}\n              onUpdate={handleClearError}\n            />\n          </>\n        );\n\n      case BiometricsState.TurnOnRegistration:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>{lang('Step 1 of 2. Registration')}</div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnVerification:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>\n                {lang(IS_ELECTRON ? 'Verification' : 'Step 2 of 2. Verification')}\n              </div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Enabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOn);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport BiometricsTurnOff from './TurnOff';\nimport BiometricsTurnOffWarning from './TurnOffWarning';\nimport BiometricsTurnOn from './TurnOn';\n\ninterface StateProps {\n  state: BiometricsState;\n  error?: string;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nfunction Biometrics({\n  state, error, isLoading, isInsideModal,\n}: StateProps) {\n  const { closeBiometricSettings } = getActions();\n\n  const isTurnOnBiometricsOpened = state === BiometricsState.TurnOnPasswordConfirmation\n    || state === BiometricsState.TurnOnRegistration\n    || state === BiometricsState.TurnOnVerification\n    || state === BiometricsState.TurnOnComplete;\n  const isTurnOffBiometricsOpened = state === BiometricsState.TurnOffBiometricConfirmation\n    || state === BiometricsState.TurnOffCreatePassword\n    || state === BiometricsState.TurnOffComplete;\n  const isTurnOffBiometricsWarningOpened = state === BiometricsState.TurnOffWarning;\n\n  return (\n    <>\n      <BiometricsTurnOn\n        isOpen={isTurnOnBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOff\n        isOpen={isTurnOffBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOffWarning isOpen={isTurnOffBiometricsWarningOpened} onClose={closeBiometricSettings} />\n    </>\n  );\n}\n\nexport default memo(withGlobal((global) => {\n  const { biometrics: { state, error } } = global;\n\n  return {\n    state,\n    error,\n    isLoading: global.auth.isLoading,\n  };\n})(Biometrics));\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { PIN_LENGTH } from '../../../config';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport PinPad from '../../ui/PinPad';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isPinAccepted?: boolean;\n  error?: string;\n  isNativeBiometricsEnabled?: boolean;\n}\n\nfunction NativeBiometricsTurnOn({\n  isActive,\n  isPinAccepted,\n  error,\n  isNativeBiometricsEnabled,\n  handleBackClick,\n}: OwnProps & StateProps) {\n  const { enableNativeBiometrics, clearNativeBiometricsError } = getActions();\n\n  const lang = useLang();\n  const { isSmallHeight } = useDeviceScreen();\n  const [pin, setPin] = useState<string>('');\n  const pinPadType = pin.length !== PIN_LENGTH\n    ? undefined\n    : (isPinAccepted ? 'success' : (error ? 'error' : undefined));\n  const pinTitle = isPinAccepted\n    ? 'Correct'\n    : (error && pin.length === PIN_LENGTH ? error : 'Enter your code');\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    setPin('');\n  }, [isActive]);\n\n  useEffectWithPrevDeps(([prevIsEnabled]) => {\n    if (isNativeBiometricsEnabled && !prevIsEnabled) {\n      handleBackClick();\n    }\n  }, [isNativeBiometricsEnabled, handleBackClick]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    enableNativeBiometrics({ password });\n  });\n\n  return (\n    <div className={styles.slide}>\n      <div className={buildClassName(styles.content, styles.contentFullSize)}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n\n        <div className={styles.pinPadHeader}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n            previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n            noLoop={false}\n            nonInteractive\n            className={styles.stickerNativeBiometric}\n          />\n\n          {!isSmallHeight && <div className={styles.pinPadTitle}>{lang('Confirm Passcode')}</div>}\n        </div>\n\n        <PinPad\n          isActive={isActive}\n          onClearError={clearNativeBiometricsError}\n          title={lang(pinTitle)}\n          type={pinPadType}\n          length={PIN_LENGTH}\n          value={pin}\n          onChange={setPin}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { nativeBiometricsError, isPinAccepted } = global;\n\n  return {\n    isPinAccepted,\n    error: nativeBiometricsError,\n    isNativeBiometricsEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsTurnOn));\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { AnimationLevel, Theme } from '../../global/types';\n\nimport {\n  ANIMATION_LEVEL_MAX,\n  ANIMATION_LEVEL_MIN,\n  IS_CORE_WALLET,\n  MTW_CARDS_WEBSITE,\n} from '../../config';\nimport { selectCurrentAccountSettings, selectCurrentAccountState } from '../../global/selectors';\nimport { ACCENT_COLORS } from '../../util/accentColor/constants';\nimport buildClassName from '../../util/buildClassName';\nimport getAccentColorsFromNfts from '../../util/getAccentColorsFromNfts';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { openUrl } from '../../util/openUrl';\nimport switchAnimationLevel from '../../util/switchAnimationLevel';\nimport switchTheme from '../../util/switchTheme';\nimport { IS_ELECTRON, IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Spinner from '../ui/Spinner';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\nimport darkThemeImg from '../../assets/theme/theme_dark.png';\nimport lightThemeImg from '../../assets/theme/theme_light.png';\nimport systemThemeImg from '../../assets/theme/theme_system.png';\n\ninterface OwnProps {\n  isActive?: boolean;\n  theme: Theme;\n  handleBackClick: () => void;\n  animationLevel: AnimationLevel;\n  isInsideModal?: boolean;\n  isTrayIconEnabled: boolean;\n  onTrayIconEnabledToggle: VoidFunction;\n}\n\ninterface StateProps {\n  accentColorIndex?: number;\n  nftsByAddress?: Record<string, ApiNft>;\n  nftAddresses?: string[];\n  isMintingCardsAvailable?: boolean;\n  isNftBuyingDisabled: boolean;\n}\n\nconst SWITCH_THEME_DURATION_MS = 300;\nconst THEME_OPTIONS = [{\n  value: 'light',\n  name: 'Light',\n  icon: lightThemeImg,\n}, {\n  value: 'system',\n  name: 'System',\n  icon: systemThemeImg,\n}, {\n  value: 'dark',\n  name: 'Dark',\n  icon: darkThemeImg,\n}];\n\nfunction SettingsAppearance({\n  isActive,\n  theme,\n  animationLevel,\n  accentColorIndex,\n  nftAddresses,\n  nftsByAddress,\n  isInsideModal,\n  isTrayIconEnabled,\n  isMintingCardsAvailable,\n  isNftBuyingDisabled,\n  onTrayIconEnabledToggle,\n  handleBackClick,\n}: OwnProps & StateProps) {\n  const {\n    setTheme,\n    setAnimationLevel,\n    openMintCardModal,\n    installAccentColorFromNft,\n    clearAccentColorFromNft,\n    showNotification,\n  } = getActions();\n\n  const lang = useLang();\n  const [isAvailableAccentLoading, setIsAvailableAccentLoading] = useState(false);\n  const [availableAccentColorIds, setAvailableAccentColorIds] = useState<number[]>(MEMO_EMPTY_ARRAY);\n  const [nftByColorIndexes, setNftsByColorIndex] = useState<Record<number, ApiNft>>({});\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const appTheme = useAppTheme(theme);\n\n  useEffect(() => {\n    if (IS_CORE_WALLET) return;\n\n    void (async () => {\n      setIsAvailableAccentLoading(true);\n      const result = await getAccentColorsFromNfts(nftAddresses, nftsByAddress);\n      if (result) {\n        setAvailableAccentColorIds(result.availableAccentColorIds);\n        setNftsByColorIndex(result.nftsByColorIndex);\n      } else {\n        setAvailableAccentColorIds(MEMO_EMPTY_ARRAY);\n        setNftsByColorIndex({});\n      }\n      setIsAvailableAccentLoading(false);\n    })();\n  }, [nftsByAddress, nftAddresses]);\n\n  const sortedColors = useMemo(() => {\n    return ACCENT_COLORS[appTheme]\n      .map((color, index) => ({ color, index }))\n      .sort((a, b) => {\n        return Number(!availableAccentColorIds.includes(a.index)) - Number(!availableAccentColorIds.includes(b.index));\n      });\n  }, [appTheme, availableAccentColorIds]);\n\n  const handleThemeChange = useLastCallback((newTheme: string) => {\n    document.documentElement.classList.add('no-transitions');\n    setTheme({ theme: newTheme as Theme });\n    switchTheme(newTheme as Theme, isInsideModal);\n    setTimeout(() => {\n      document.documentElement.classList.remove('no-transitions');\n    }, SWITCH_THEME_DURATION_MS);\n  });\n\n  const handleAnimationLevelToggle = useLastCallback(() => {\n    const level = animationLevel === ANIMATION_LEVEL_MIN ? ANIMATION_LEVEL_MAX : ANIMATION_LEVEL_MIN;\n    setAnimationLevel({ level });\n    switchAnimationLevel(level);\n  });\n\n  function handleAccentColorClick(colorIndex?: number) {\n    const isLocked = colorIndex !== undefined ? !availableAccentColorIds.includes(colorIndex) : false;\n\n    if (isLocked) {\n      showNotification({ message: lang('Get a unique MyTonWallet Card to unlock new palettes.') });\n    } else if (colorIndex === undefined) {\n      clearAccentColorFromNft();\n    } else {\n      installAccentColorFromNft({ nft: nftByColorIndexes[colorIndex] });\n    }\n  }\n\n  const handleUnlockNewPalettesClick = useLastCallback(() => {\n    if (isMintingCardsAvailable) {\n      openMintCardModal();\n    } else {\n      void openUrl(MTW_CARDS_WEBSITE);\n    }\n  });\n\n  function renderThemes() {\n    return THEME_OPTIONS.map(({ name, value, icon }) => {\n      return (\n        <div\n          key={value}\n          className={buildClassName(styles.theme, value === theme && styles.theme_active)}\n          onClick={() => handleThemeChange(value)}\n        >\n          <div className={buildClassName(styles.themeIcon, value === theme && styles.themeIcon_active)}>\n            <img src={icon} alt=\"\" className={styles.themeImg} aria-hidden />\n          </div>\n          <span>{lang(name)}</span>\n        </div>\n      );\n    });\n  }\n\n  function renderColorButton(color?: string, index?: number) {\n    const isSelected = accentColorIndex === index;\n    const isLocked = index !== undefined ? !availableAccentColorIds.includes(index) : false;\n\n    return (\n      <button\n        key={color || 'default'}\n        type=\"button\"\n        disabled={isSelected}\n        style={color ? `--current-accent-color: ${color}` : undefined}\n        className={buildClassName(styles.colorButton, isSelected && styles.colorButtonCurrent)}\n        aria-label={lang('Change Palette')}\n        onClick={() => handleAccentColorClick(index)}\n      >\n        {isAvailableAccentLoading && isLocked && <Spinner color=\"white\" />}\n        {!isAvailableAccentLoading && isLocked && (\n          <i\n            className={buildClassName(styles.iconLock, 'icon-lock', color === '#FFFFFF' && styles.iconLockInverted)}\n            aria-hidden\n          />\n        )}\n      </button>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Appearance')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Appearance')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <p className={styles.blockTitle}>{lang('Theme')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={styles.themeWrapper}>\n            {renderThemes()}\n          </div>\n        </div>\n\n        {!IS_CORE_WALLET && !isNftBuyingDisabled && (\n          <>\n            <p className={styles.blockTitle}>{lang('Palette')}</p>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={styles.colorList}>\n                {renderColorButton()}\n                {sortedColors.map(({ color, index }) => renderColorButton(color, index))}\n              </div>\n              <div\n                className={styles.subBlockAsButton}\n                role=\"button\"\n                tabIndex={0}\n                onClick={() => handleUnlockNewPalettesClick()}\n              >\n                {lang('Unlock New Palettes')}\n              </div>\n            </div>\n            <p className={styles.blockDescription}>{lang('Get a unique MyTonWallet Card to unlock new palettes.')}</p>\n          </>\n        )}\n\n        <p className={styles.blockTitle}>{lang('Other')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleAnimationLevelToggle}>\n            {lang('Enable Animations')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Enable Animations')}\n              checked={animationLevel !== ANIMATION_LEVEL_MIN}\n            />\n          </div>\n          {IS_ELECTRON && IS_WINDOWS && (\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={onTrayIconEnabledToggle}>\n              {lang('Display Tray Icon')}\n\n              <Switcher\n                className={styles.menuSwitcher}\n                label={lang('Display Tray Icon')}\n                checked={isTrayIconEnabled}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    orderedAddresses: nftAddresses,\n    byAddress: nftsByAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  const { config: { cardsInfo } = {} } = selectCurrentAccountState(global) || {};\n\n  return {\n    accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n    nftAddresses,\n    nftsByAddress,\n    isMintingCardsAvailable: Boolean(cardsInfo),\n    isNftBuyingDisabled: global.restrictions.isNftBuyingDisabled,\n  };\n})(SettingsAppearance));\n","import type { ApiNft } from '../api/types';\n\nimport { MTW_CARDS_COLLECTION } from '../config';\nimport { getAccentColorIndexFromNft } from './accentColor';\nimport { compact, unique } from './iteratees';\nimport { logDebugError } from './logs';\n\nexport default async function getAccentColorsFromNfts(\n  nftAddresses?: string[],\n  nftsByAddress?: Record<string, ApiNft>,\n) {\n  try {\n    const nftCards = (nftAddresses || []).reduce((result, nftAddress) => {\n      const nft = nftsByAddress?.[nftAddress];\n      if (nft?.collectionAddress === MTW_CARDS_COLLECTION) {\n        result.push(nft);\n      }\n      return result;\n    }, [] as ApiNft[]);\n\n    if (!nftCards.length) {\n      return undefined;\n    }\n\n    const colors = await Promise.all(nftCards.map((nft) => getAccentColorIndexFromNft(nft)));\n    const nftsByColorIndex = colors.reduce((result, colorIndex, i) => {\n      if (colorIndex !== undefined) {\n        result[colorIndex] = nftCards[i];\n      }\n      return result;\n    }, {} as Record<number, ApiNft>);\n\n    const availableAccentColorIds = unique(compact(colors));\n\n    return {\n      availableAccentColorIds,\n      nftsByColorIndex,\n    };\n  } catch (err: any) {\n    logDebugError('[getAccentColorsFromNfts]: Error fetching accent colors', err);\n    return undefined;\n  }\n}\n","import React, {\n  memo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { UserToken } from '../../../global/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteTokenModal.module.scss';\n\ninterface OwnProps {\n  token?: UserToken;\n}\n\nfunction DeleteTokenModal({ token }: OwnProps) {\n  const {\n    deleteToken,\n  } = getActions();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const lang = useLang();\n\n  useSyncEffect(() => {\n    if (token) {\n      setIsOpen(true);\n    }\n  }, [token]);\n\n  const handleClose = useLastCallback(() => {\n    setIsOpen(false);\n  });\n\n  const handleDeleteToken = useLastCallback(() => {\n    handleClose();\n    deleteToken({ slug: token!.slug });\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={handleClose}\n      title={lang('Delete Token')}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>\n        {lang('Are you sure you want to delete?', { token: <strong>{token?.name}</strong> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={handleClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteToken} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteTokenModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"yflPd0zm\",\"description\":\"KH236kiH\"};","import type { RefObject } from 'react';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { clamp } from '../../util/math';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Draggable.module.scss';\n\ntype TPoint = {\n  x: number;\n  y: number;\n};\n\ntype Offset = {\n  top?: number;\n  bottom?: number;\n  left?: number;\n  right?: number;\n};\n\ntype DraggableState = {\n  isDragging: boolean;\n  scrollTop: number;\n  origin: TPoint;\n  translation: TPoint;\n  width?: number;\n  height?: number;\n};\n\ntype OwnProps = {\n  children: React.ReactNode;\n  onDrag: (translation: TPoint, id: number | string) => void;\n  onDragEnd: NoneToVoidFunction;\n  id: number | string;\n  style?: string;\n  knobStyle?: string;\n  isDisabled?: boolean;\n  offset?: Offset;\n  parentRef?: RefObject<HTMLDivElement>;\n  scrollRef?: RefObject<HTMLDivElement>;\n  className?: string;\n  onClick: (e: React.MouseEvent | React.TouchEvent) => void;\n};\n\nconst ZERO_POINT: TPoint = { x: 0, y: 0 };\n\nconst DEFAULT_OFFSET: Offset = {\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0,\n};\n\nconst EDGE_THRESHOLD = 150;\n\nfunction Draggable({\n  children,\n  id,\n  onDrag,\n  onDragEnd,\n  style: externalStyle,\n  knobStyle,\n  isDisabled,\n  offset = DEFAULT_OFFSET,\n  parentRef,\n  scrollRef,\n  className,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const buttonRef = useRef<HTMLDivElement>(null);\n\n  const scrollIntervalId = useRef<number>();\n\n  const [state, setState] = useState<DraggableState>({\n    isDragging: false,\n    scrollTop: 0,\n    origin: ZERO_POINT,\n    translation: ZERO_POINT,\n  });\n\n  const lastMousePosition = useRef<TPoint>({ x: 0, y: 0 });\n\n  const updateDraggablePosition = () => {\n    if (!state.isDragging || !ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  };\n\n  const stopContinuousScroll = () => {\n    if (scrollIntervalId.current !== undefined) {\n      cancelAnimationFrame(scrollIntervalId.current);\n      scrollIntervalId.current = undefined;\n    }\n  };\n\n  const startContinuousScroll = (scrollContainer: HTMLElement, speed: number) => {\n    const animateScroll = () => {\n      scrollContainer.scrollBy(0, speed);\n      updateDraggablePosition();\n      scrollIntervalId.current = requestAnimationFrame(animateScroll);\n    };\n\n    stopContinuousScroll();\n    animateScroll();\n  };\n\n  const setInitialState = (e: React.MouseEvent | TouchEvent) => {\n    const origin = getClientCoordinate(e);\n    const scrollTop = scrollRef?.current?.scrollTop ?? 0;\n\n    setState({\n      ...state,\n      isDragging: true,\n      origin,\n      scrollTop,\n      width: ref.current?.offsetWidth,\n      height: ref.current?.offsetHeight,\n    });\n  };\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setInitialState(e);\n  };\n\n  const handleTouchStart = useLastCallback((e: TouchEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    setInitialState(e);\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.clearScrollPatch();\n    }\n  });\n\n  const handleMouseMove = useLastCallback((e: MouseEvent | TouchEvent) => {\n    if (!ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const { x, y } = getClientCoordinate(e);\n    lastMousePosition.current = { x, y };\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    const scrollRect = scrollRef.current.getBoundingClientRect();\n    const distanceFromTop = y - scrollRect.top;\n    const distanceFromBottom = scrollRect.bottom - y;\n\n    if (distanceFromTop < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        -scaledEase((EDGE_THRESHOLD - distanceFromTop) / EDGE_THRESHOLD),\n      );\n    } else if (distanceFromBottom < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        scaledEase((EDGE_THRESHOLD - distanceFromBottom) / EDGE_THRESHOLD),\n      );\n    } else {\n      stopContinuousScroll();\n    }\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  });\n\n  const handleMouseUp = useLastCallback(() => {\n    setState((current) => ({\n      ...current,\n      isDragging: false,\n      width: undefined,\n      height: undefined,\n    }));\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.applyScrollPatch();\n    }\n\n    onDragEnd();\n  });\n\n  const handleClick = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (state.isDragging) {\n      return;\n    }\n\n    onClick(e);\n  });\n\n  useEffect(() => {\n    const dragButtonRef = buttonRef.current;\n\n    if (dragButtonRef) {\n      dragButtonRef.addEventListener('touchstart', handleTouchStart, { passive: false });\n    }\n\n    if (state.isDragging) {\n      window.addEventListener('touchmove', handleMouseMove);\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('touchend', handleMouseUp);\n      window.addEventListener('touchcancel', handleMouseUp);\n      window.addEventListener('mouseup', handleMouseUp);\n    } else {\n      stopContinuousScroll();\n      window.removeEventListener('touchmove', handleMouseMove);\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('touchend', handleMouseUp);\n      window.removeEventListener('touchcancel', handleMouseUp);\n      window.removeEventListener('mouseup', handleMouseUp);\n\n      setState((current) => ({\n        ...current,\n        translation: ZERO_POINT,\n      }));\n    }\n\n    return () => {\n      if (state.isDragging) {\n        stopContinuousScroll();\n        window.removeEventListener('touchmove', handleMouseMove);\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('touchend', handleMouseUp);\n        window.removeEventListener('touchcancel', handleMouseUp);\n        window.removeEventListener('mouseup', handleMouseUp);\n\n        if (dragButtonRef) {\n          dragButtonRef.removeEventListener('touchstart', handleTouchStart);\n        }\n      }\n    };\n  }, [handleMouseMove, handleMouseUp, handleTouchStart, state.isDragging, buttonRef, isDisabled]);\n\n  const fullClassName = buildClassName(styles.container, className, state.isDragging && styles.isDragging);\n\n  const cssStyles = useMemo(() => {\n    return buildStyle(\n      state.isDragging && `transform: translate(${state.translation.x}px, ${state.translation.y}px)`,\n      state.width ? `width: ${state.width}px` : undefined,\n      state.height ? `height: ${state.height}px` : undefined,\n      externalStyle,\n    );\n  }, [externalStyle, state.height, state.isDragging, state.translation.x, state.translation.y, state.width]);\n\n  return (\n    <div style={cssStyles} className={fullClassName} ref={ref} onClick={handleClick}>\n      {!isDisabled && (\n        <div\n          ref={buttonRef}\n          aria-label={lang('i18n_dragToSort')}\n          tabIndex={0}\n          role=\"button\"\n          className={buildClassName(styles.knob, 'div-button', 'draggable-knob')}\n          onMouseDown={handleMouseDown}\n          style={knobStyle}\n        >\n          <i className=\"icon icon-sort\" aria-hidden />\n        </div>\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(Draggable);\n\nfunction getClientCoordinate(e: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent) {\n  let x;\n  let y;\n\n  if ('touches' in e) {\n    x = e.touches[0].clientX;\n    y = e.touches[0].clientY;\n  } else {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  return { x, y };\n}\n\nfunction scaledEase(n: number) {\n  return 5 * (n ** 3) + 1;\n}\n\nfunction calculateConstrainedTranslation(\n  state: DraggableState,\n  lastMousePosition: TPoint,\n  lastScrollTop: number,\n  draggableElement: HTMLDivElement,\n  parentElement: HTMLDivElement,\n  offset: Offset,\n) {\n  const translation = {\n    x: lastMousePosition.x - state.origin.x,\n    y: lastMousePosition.y - state.origin.y + lastScrollTop - state.scrollTop,\n  };\n\n  const {\n    top = 0, right = 0, bottom = 0, left = 0,\n  } = offset;\n\n  const parentRect = parentElement.getBoundingClientRect();\n  const draggableRect = draggableElement.getBoundingClientRect();\n\n  const minX = -draggableElement.offsetLeft + left;\n  const maxX = parentRect.width - draggableRect.width - draggableElement.offsetLeft + right;\n  const minY = -draggableElement.offsetTop + top;\n  const maxY = parentRect.height - draggableRect.height - draggableElement.offsetTop + bottom;\n\n  return {\n    x: clamp(translation.x, minX, maxX),\n    y: clamp(translation.y, minY, maxY),\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"kWQHzIMD\",\"isDragging\":\"k0c5WDAy\",\"knob\":\"UpzQzcvs\"};","import type { RefObject } from 'react';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiBaseCurrency } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { DEFAULT_ENABLED_TOKEN_SLUGS } from '../../config';\nimport { bigintMultiplyToNumber } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { isBetween } from '../../util/math';\n\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TokenIcon from '../common/TokenIcon';\nimport DeleteTokenModal from '../main/modals/DeleteTokenModal';\nimport AnimatedCounter from '../ui/AnimatedCounter';\nimport Draggable from '../ui/Draggable';\nimport SensitiveData from '../ui/SensitiveData';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface SortState {\n  orderedTokenSlugs?: string[];\n  dragOrderTokenSlugs?: string[];\n  draggedIndex?: number;\n}\n\ninterface OwnProps {\n  parentContainer: RefObject<HTMLDivElement>;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  isSortByValueEnabled?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  withChainIcon?: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst TOKEN_HEIGHT_PX = 64;\nconst TOP_OFFSET = 48;\n\nfunction SettingsTokens({\n  parentContainer,\n  tokens,\n  orderedSlugs,\n  isSortByValueEnabled,\n  baseCurrency,\n  withChainIcon,\n  isSensitiveDataHidden,\n}: OwnProps) {\n  const {\n    openSettingsWithState,\n    updateOrderedSlugs,\n    rebuildOrderedSlugs,\n    toggleTokenVisibility,\n  } = getActions();\n  const lang = useLang();\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  // eslint-disable-next-line no-null/no-null\n  const tokensRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const sortableContainerRef = useRef<HTMLDivElement>(null);\n\n  const [tokenToDelete, setTokenToDelete] = useState<UserToken | undefined>();\n  const [state, setState] = useState<SortState>({\n    orderedTokenSlugs: orderedSlugs,\n    dragOrderTokenSlugs: orderedSlugs,\n    draggedIndex: undefined,\n  });\n\n  useEffectOnce(() => {\n    rebuildOrderedSlugs();\n  });\n\n  useEffect(() => {\n    if (!arraysAreEqual(orderedSlugs, state.orderedTokenSlugs)) {\n      setState({\n        orderedTokenSlugs: orderedSlugs,\n        dragOrderTokenSlugs: orderedSlugs,\n        draggedIndex: undefined,\n      });\n    }\n  }, [orderedSlugs, state.orderedTokenSlugs]);\n\n  const handleOpenAddTokenPage = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.SelectTokenList });\n  });\n\n  const handleDrag = useLastCallback((translation: { x: number; y: number }, id: string | number) => {\n    const delta = Math.round(translation.y / TOKEN_HEIGHT_PX);\n    const index = state.orderedTokenSlugs?.indexOf(id as string) ?? 0;\n    const dragOrderTokenSlugs = state.orderedTokenSlugs?.filter((tokenSlug) => tokenSlug !== id);\n\n    if (!dragOrderTokenSlugs || !isBetween(index + delta, 0, orderedSlugs?.length ?? 0)) {\n      return;\n    }\n\n    dragOrderTokenSlugs.splice(index + delta, 0, id as string);\n    setState((current) => ({\n      ...current,\n      draggedIndex: index,\n      dragOrderTokenSlugs,\n    }));\n  });\n\n  const handleDragEnd = useLastCallback(() => {\n    setState((current) => {\n      updateOrderedSlugs({\n        orderedSlugs: current.dragOrderTokenSlugs!,\n      });\n\n      return {\n        ...current,\n        orderedTokenSlugs: current.dragOrderTokenSlugs,\n        draggedIndex: undefined,\n      };\n    });\n  });\n\n  const handleTokenVisibility = useLastCallback((token: UserToken, e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    toggleTokenVisibility({ slug: token.slug, shouldShow: Boolean(token.isDisabled) });\n  });\n\n  const handleDeleteToken = useLastCallback((token: UserToken, e: React.MouseEvent<HTMLSpanElement>) => {\n    e.stopPropagation();\n    setTokenToDelete(token);\n  });\n\n  function renderToken(token: UserToken, index: number) {\n    const {\n      symbol, name, amount, price, slug, isDisabled,\n    } = token;\n\n    const totalAmount = bigintMultiplyToNumber(amount, price);\n    const isDragged = state.draggedIndex === index;\n\n    const draggedTop = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.orderedTokenSlugs);\n    const top = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.dragOrderTokenSlugs);\n\n    const style = `top: ${isDragged ? draggedTop : top}px;`;\n    const knobStyle = 'left: 1rem;';\n\n    const isDeleteButtonVisible = amount === 0n && !DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug);\n\n    const isDragDisabled = isSortByValueEnabled || tokens!.length <= 1;\n\n    return (\n      <Draggable\n        key={slug}\n        id={slug}\n        onDrag={handleDrag}\n        onDragEnd={handleDragEnd}\n        style={style}\n        knobStyle={knobStyle}\n        isDisabled={isDragDisabled}\n        className={buildClassName(styles.item, styles.item_token, !isSortByValueEnabled && styles.draggable)}\n        offset={{ top: TOP_OFFSET }}\n        parentRef={tokensRef}\n        scrollRef={parentContainer}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={(e) => handleTokenVisibility(token, e)}\n      >\n        <TokenIcon token={token} withChainIcon={withChainIcon} />\n        <div className={styles.tokenInfo}>\n          <div className={styles.tokenTitle}>\n            {name}\n          </div>\n          <div className={styles.tokenDescription}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={4 + (top % 6)}\n              rows={2}\n              cellSize={8}\n              contentClassName={styles.tokenAmount}\n            >\n              <AnimatedCounter text={formatCurrency(toDecimal(totalAmount, token.decimals, true), shortBaseSymbol)} />\n              <i className={styles.dot} aria-hidden />\n              <AnimatedCounter text={formatCurrency(toDecimal(amount, token.decimals), symbol)} />\n            </SensitiveData>\n            {isDeleteButtonVisible && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                <span className={styles.deleteText} onClick={(e) => handleDeleteToken(token, e)}>\n                  {lang('Delete')}\n                </span>\n              </>\n            )}\n          </div>\n        </div>\n        <Switcher\n          className={styles.menuSwitcher}\n          checked={!isDisabled}\n        />\n      </Draggable>\n    );\n  }\n\n  return (\n    <>\n      <p className={styles.blockTitle}>{lang('My Tokens')}</p>\n      <div className={styles.contentRelative} ref={sortableContainerRef}>\n        <div\n          className={buildClassName(styles.settingsBlock, styles.sortableContainer)}\n          style={`height: ${(tokens?.length ?? 0) * TOKEN_HEIGHT_PX + TOP_OFFSET}px`}\n          ref={tokensRef}\n        >\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenAddTokenPage}>\n            {lang('Add Token')}\n            <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n          </div>\n\n          {tokens?.map(renderToken)}\n        </div>\n      </div>\n\n      <DeleteTokenModal token={tokenToDelete} />\n    </>\n  );\n}\n\nfunction arraysAreEqual<T>(arr1: T[] = [], arr2: T[] = []) {\n  return arr1.length === arr2.length && arr1.every((value, index) => value === arr2[index]);\n}\n\nfunction getOffsetBySlug(slug: string, list: string[] = []) {\n  const realIndex = list.indexOf(slug);\n  const index = realIndex === -1 ? list.length : realIndex;\n  return getOffsetByIndex(index);\n}\n\nfunction getOffsetByIndex(index: number) {\n  return index * TOKEN_HEIGHT_PX + TOP_OFFSET;\n}\n\nexport default memo(SettingsTokens);\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiNft } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { CURRENCY_LIST, DEFAULT_PRICE_CURRENCY, TINY_TRANSFER_MAX_COST } from '../../config';\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport SettingsTokens from './SettingsTokens';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  onBack: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isInvestorViewEnabled?: boolean;\n  isSortByValueEnabled?: boolean;\n  areTinyTransfersHidden?: boolean;\n  areTokensWithNoCostHidden?: boolean;\n  isSensitiveDataHidden?: true;\n  baseCurrency?: ApiBaseCurrency;\n  isMultichainAccount: boolean;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  nftsByAddress?: Record<string, ApiNft>;\n  blacklistedNftAddresses: string[];\n  whitelistedNftAddresses: string[];\n}\n\nfunction SettingsAssets({\n  isActive,\n  isInsideModal,\n  isInvestorViewEnabled,\n  isSortByValueEnabled,\n  isSensitiveDataHidden,\n  areTinyTransfersHidden,\n  areTokensWithNoCostHidden,\n  baseCurrency,\n  isMultichainAccount,\n  tokens,\n  orderedSlugs,\n  nftsByAddress,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  onBack,\n}: OwnProps & StateProps) {\n  const {\n    toggleTinyTransfersHidden,\n    toggleInvestorView,\n    toggleTokensWithNoCost,\n    toggleSortByValue,\n    changeBaseCurrency,\n    setSettingsState,\n  } = getActions();\n\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n  useHistoryBack({ isActive, onBack });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleTinyTransfersHiddenToggle = useLastCallback(() => {\n    toggleTinyTransfersHidden({ isEnabled: !areTinyTransfersHidden });\n  });\n\n  const handleInvestorViewToggle = useLastCallback(() => {\n    toggleInvestorView({ isEnabled: !isInvestorViewEnabled });\n  });\n\n  const handleOpenHiddenNfts = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.HiddenNfts });\n  });\n\n  const handleTokensWithNoPriceToggle = useLastCallback(() => {\n    toggleTokensWithNoCost({ isEnabled: !areTokensWithNoCostHidden });\n  });\n\n  const handleSortByValueToggle = useLastCallback(() => {\n    toggleSortByValue({ isEnabled: !isSortByValueEnabled });\n  });\n\n  const [localBaseCurrency, setLocalBaseCurrency] = useState(baseCurrency);\n\n  const handleBaseCurrencyChange = useLastCallback((currency: string) => {\n    setLocalBaseCurrency(currency as ApiBaseCurrency);\n    changeBaseCurrency({ currency: currency as ApiBaseCurrency });\n  });\n\n  const {\n    shouldRenderHiddenNftsSection,\n    hiddenNftsCount,\n  } = useMemo(() => {\n    const nfts = Object.values(nftsByAddress || {});\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedAddressesSet = new Set(whitelistedNftAddresses);\n    const shouldRender = nfts.some((nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden);\n    const hiddenNfts = nfts.filter(\n      (nft) => !whitelistedAddressesSet.has(nft.address) && (blacklistedAddressesSet.has(nft.address) || nft.isHidden),\n    );\n\n    return {\n      shouldRenderHiddenNftsSection: shouldRender,\n      hiddenNftsCount: hiddenNfts.length,\n    };\n  }, [nftsByAddress, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Assets & Activity')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBack}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBack} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Assets & Activity')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n        ref={scrollContainerRef}\n      >\n        <div className={styles.settingsBlock}>\n          <Dropdown\n            label={lang('Base Currency')}\n            items={CURRENCY_LIST}\n            selectedValue={baseCurrency ?? DEFAULT_PRICE_CURRENCY}\n            theme=\"light\"\n            shouldTranslateOptions\n            className={buildClassName(styles.item, styles.item_small)}\n            onChange={handleBaseCurrencyChange}\n            isLoading={localBaseCurrency !== baseCurrency}\n          />\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleInvestorViewToggle}>\n            <div className={styles.blockWithTooltip}>\n              {lang('Investor View')}\n\n              <IconWithTooltip\n                message={lang('Focus on asset value rather than current balance')}\n                tooltipClassName={styles.tooltip}\n                iconClassName={styles.iconQuestion}\n              />\n\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Investor View')}\n              checked={isInvestorViewEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTinyTransfersHiddenToggle}>\n            <div className={styles.blockWithTooltip}>\n              {lang('Hide Tiny Transfers')}\n\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$tiny_transfers_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.tooltip, styles.tooltip_wide)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tiny Transfers')}\n              checked={areTinyTransfersHidden}\n            />\n          </div>\n        </div>\n        {\n          shouldRenderHiddenNftsSection && (\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenHiddenNfts}>\n                {lang('Hidden NFTs')}\n                <div className={styles.itemInfo}>\n                  {hiddenNftsCount}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            </div>\n          )\n        }\n        <p className={styles.blockTitle}>{lang('Token Settings')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleSortByValueToggle}>\n            {lang('Sort By Cost')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Sort By Cost')}\n              checked={isSortByValueEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTokensWithNoPriceToggle}>\n            <div className={styles.blockWithTooltip}>\n              {lang('Hide Tokens With No Cost')}\n\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$hide_tokens_no_cost_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.tooltip, styles.tooltip_wide)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tokens With No Cost')}\n              checked={areTokensWithNoCostHidden}\n            />\n          </div>\n        </div>\n\n        <SettingsTokens\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          parentContainer={scrollContainerRef}\n          tokens={tokens}\n          orderedSlugs={orderedSlugs}\n          isSortByValueEnabled={isSortByValueEnabled}\n          baseCurrency={baseCurrency}\n          withChainIcon={isMultichainAccount}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n    isSensitiveDataHidden,\n  } = global.settings;\n\n  const {\n    orderedSlugs,\n  } = selectCurrentAccountSettings(global) ?? {};\n\n  const {\n    blacklistedNftAddresses = MEMO_EMPTY_ARRAY,\n    whitelistedNftAddresses = MEMO_EMPTY_ARRAY,\n    nfts: {\n      byAddress: nftsByAddress,\n    } = {},\n  } = selectCurrentAccountState(global) || {};\n\n  return {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n    tokens: selectCurrentAccountTokens(global),\n    orderedSlugs,\n    nftsByAddress,\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    isSensitiveDataHidden,\n  };\n})(SettingsAssets));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ofWxr4DU\",\"description\":\"XlFYElV7\",\"buttons\":\"gixyiSx7\",\"button\":\"Uez1mztb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiDapp } from '../../../api/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './DisconnectDappModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  dapp?: ApiDapp;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DisconnectDappModal({ isOpen, dapp, onClose }: OwnProps) {\n  const {\n    deleteAllDapps,\n    deleteDapp,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteAllDapps = useLastCallback(() => {\n    void deleteAllDapps();\n    onClose();\n  });\n\n  const handleDeleteDapp = useLastCallback(() => {\n    void deleteDapp({ origin: dapp!.origin });\n    onClose();\n  });\n\n  const title = dapp ? lang('Disconnect Dapp') : lang('Disconnect Dapps');\n  const description = dapp\n    ? lang('Are you sure you want to disconnect?', { dappname: <strong>{dapp.name}</strong> })\n    : lang('Are you sure you want to disconnect all websites?');\n  const onDisconnect = dapp ? handleDeleteDapp : handleDeleteAllDapps;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={onClose}\n      title={title}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>{description}</p>\n      <div className={styles.buttons}>\n        <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={onDisconnect} className={styles.button}>\n          {lang('Disconnect')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DisconnectDappModal);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport type { ApiDapp } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, APP_NAME } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport DappInfo from '../dapps/DappInfo';\nimport DisconnectDappModal from '../main/modals/DisconnectDappModal';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  dapps: ApiDapp[];\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDapps({\n  isActive,\n  dapps,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isDisconnectModalOpen, openDisconnectModal, closeDisconnectModal] = useFlag();\n  const [dappToDelete, setDappToDelete] = useState<ApiDapp | undefined>();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleDisconnectDapp = useLastCallback((origin: string) => {\n    const dapp = dapps.find((d) => d.origin === origin);\n    setDappToDelete(dapp);\n    openDisconnectModal();\n  });\n\n  const handleDisconnectAll = useLastCallback(() => {\n    setDappToDelete(undefined);\n    openDisconnectModal();\n  });\n\n  function renderDapp(dapp: ApiDapp) {\n    const {\n      iconUrl, name, url, origin,\n    } = dapp;\n\n    return (\n      <DappInfo\n        key={origin}\n        iconUrl={iconUrl}\n        name={name}\n        url={url}\n        origin={origin}\n        className={styles.dapp}\n        onDisconnect={handleDisconnectDapp}\n      />\n    );\n  }\n\n  function renderDapps() {\n    const dappList = dapps.map(renderDapp);\n\n    return (\n      <div className={styles.dapps}>\n        <div className={styles.disconnectAllBlock}>\n          <Button\n            className={styles.disconnectButton}\n            isSimple\n            onClick={handleDisconnectAll}\n          >\n            {lang('Disconnect All Dapps')}\n          </Button>\n          <p className={styles.blockDescription}>{lang('$dapps-description', { app_name: APP_NAME })}</p>\n        </div>\n\n        <p className={styles.blockTitle}>{lang('Logged in with %app_name%', { app_name: APP_NAME })}</p>\n\n        <div className={styles.block}>\n          {dappList}\n        </div>\n      </div>\n    );\n  }\n\n  function renderEmptyDappsMessage(isPlaying: boolean) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isPlaying}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No active connections')}</p>\n      </div>\n    );\n  }\n\n  const content = dapps.length === 0\n    ? renderEmptyDappsMessage(isActive)\n    : renderDapps();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Dapps')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Dapps')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition activeKey={dapps.length === 0 ? 0 : 1} name=\"fade\">\n          {content}\n        </Transition>\n      </div>\n      <DisconnectDappModal isOpen={isDisconnectModalOpen} onClose={closeDisconnectModal} dapp={dappToDelete} />\n    </div>\n  );\n}\n\nexport default memo(SettingsDapps);\n","import type { Platforms } from '@twa-dev/types';\n\nimport {\n  IS_AIR_APP,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_FIREFOX_EXTENSION,\n  IS_OPERA_EXTENSION,\n  IS_PACKAGED_ELECTRON,\n  IS_TELEGRAM_APP,\n} from '../config';\nimport { getTelegramApp } from './telegram';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from './windowEnvironment';\n\nexport type BuildPlatform = Platforms\n| 'web'\n| 'extension'\n| 'firefox-extension'\n| 'opera-extension'\n| 'electron'\n| 'android'\n| 'android-air'\n| 'android-air-direct'\n| 'android-direct'\n| 'ios'\n| 'ios-air'\n| 'telegram-unknown';\n\nexport function getBuildPlatform(): BuildPlatform {\n  if (IS_FIREFOX_EXTENSION) return 'firefox-extension';\n  if (IS_OPERA_EXTENSION) return 'opera-extension';\n  if (IS_EXTENSION) return 'extension';\n\n  if (IS_CAPACITOR) {\n    if (IS_AIR_APP) {\n      if (IS_IOS) return 'ios-air';\n      if (IS_ANDROID_DIRECT) return 'android-air-direct';\n      if (IS_ANDROID) return 'android-air';\n    }\n    if (IS_ANDROID_DIRECT) return 'android-direct';\n    if (IS_ANDROID) return 'android';\n    if (IS_IOS) return 'ios';\n  }\n\n  if (IS_TELEGRAM_APP) {\n    return getTelegramApp()?.platform || 'telegram-unknown';\n  }\n\n  if (IS_ELECTRON) return 'electron';\n\n  return 'web';\n}\n\nexport function getFlagsValue() {\n  return {\n    IS_ANDROID_DIRECT,\n    IS_CAPACITOR,\n    IS_TELEGRAM_APP,\n    IS_EXTENSION,\n    IS_FIREFOX_EXTENSION,\n    IS_PACKAGED_ELECTRON,\n    IS_AIR_APP,\n    IS_ELECTRON,\n    IS_OPERA_EXTENSION,\n  };\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNetwork } from '../../api/types';\nimport type { Account } from '../../global/types';\n\nimport {\n  APP_ENV,\n  APP_VERSION,\n  IS_CORE_WALLET,\n  IS_EXTENSION,\n} from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { getBuildPlatform, getFlagsValue } from '../../util/getBuildPlatform';\nimport { getPlatform } from '../../util/getPlatform';\nimport { getLogs } from '../../util/logs';\nimport { getLogsFromNative } from '../../util/multitab';\nimport { shareFile } from '../../util/share';\nimport { callApi } from '../../api';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: () => void;\n  isTestnet?: boolean;\n  isCopyStorageEnabled?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId?: string;\n  accountsById?: Record<string, Account>;\n}\n\nconst NETWORK_OPTIONS = [{\n  value: 'mainnet',\n  name: 'Mainnet',\n}, {\n  value: 'testnet',\n  name: 'Testnet',\n}];\n\nfunction SettingsDeveloperOptions({\n  isOpen,\n  onClose,\n  isTestnet,\n  isCopyStorageEnabled,\n  currentAccountId,\n  accountsById,\n}: OwnProps & StateProps) {\n  const {\n    startChangingNetwork,\n    copyStorageData,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n  const currentNetwork = NETWORK_OPTIONS[isTestnet ? 1 : 0].value;\n\n  const handleNetworkChange = useLastCallback((newNetwork: string) => {\n    startChangingNetwork({ network: newNetwork as ApiNetwork });\n    onClose();\n  });\n\n  const handleDownloadLogs = useLastCallback(async () => {\n    const logsString = await getLogsString({ currentAccountId, accountsById });\n\n    if (IS_EXTENSION) {\n      await copyTextToClipboard(logsString);\n      showNotification({ message: lang('Logs were copied!') as string, icon: 'icon-copy' });\n      onClose();\n    } else {\n      const filename = `${IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet'}_logs_${new Date().toISOString()}.json`;\n      await shareFile(filename, logsString, 'application/json');\n    }\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      noBackdropClose\n      isCompact\n    >\n      <div className={styles.developerTitle}>\n        {lang('Developer Options')}\n      </div>\n\n      <div className={styles.settingsBlock}>\n        <Dropdown\n          label={lang('Network')}\n          items={NETWORK_OPTIONS}\n          selectedValue={currentNetwork}\n          theme=\"light\"\n          arrow=\"chevron\"\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={handleNetworkChange}\n        />\n      </div>\n\n      {isCopyStorageEnabled && (\n        <>\n          <p className={styles.blockTitle}>{lang('Dangerous')}</p>\n          <div className={styles.settingsBlock}>\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={() => copyStorageData()}>\n              {lang('Copy Storage Data')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n            </div>\n          </div>\n        </>\n      )}\n\n      <div\n        className={buildClassName(styles.settingsBlock, styles.logBlock)}\n        onClick={handleDownloadLogs}\n      >\n        <div className={buildClassName(styles.item, styles.item_small)}>\n          {\n            IS_EXTENSION\n              ? (\n                <>\n                  {lang('Copy Logs')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n                </>\n              ) : lang('Download Logs')\n          }\n        </div>\n      </div>\n\n      <Button\n        className={styles.developerCloseButton}\n        onClick={onClose}\n      >\n        {lang('Close')}\n      </Button>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const currentAccountId = global.currentAccountId;\n\n  const accountsById = global.accounts?.byId;\n\n  return {\n    currentAccountId,\n    accountsById,\n  };\n})(SettingsDeveloperOptions));\n\nasync function getLogsString(\n  {\n    currentAccountId,\n    accountsById,\n  }: StateProps,\n) {\n  const accountsInfo = accountsById && Object.keys(accountsById).reduce((acc, accountId) => {\n    const { addressByChain, isHardware } = accountsById[accountId];\n    acc[accountId] = {\n      addressByChain,\n      isHardware,\n    };\n    return acc;\n  }, {} as any);\n\n  const [mainLogs, bottomSheetLogs, apiLogs = []] = await Promise.all([\n    getLogs(),\n    getLogsFromNative(),\n    callApi('getLogs'),\n  ]);\n\n  const time = new Date();\n  const timezoneOffset = -time.getTimezoneOffset();\n\n  return JSON.stringify(\n    {\n      time,\n      timezone: `UTC${timezoneOffset < 0 ? '-' : '+'}${Math.abs(timezoneOffset) / 60}`,\n      environment: APP_ENV,\n      version: APP_VERSION,\n      platform: getPlatform(),\n      navigatorPlatform: navigator.platform,\n      userAgent: navigator.userAgent,\n      build: getBuildPlatform(),\n      flags: getFlagsValue(),\n      currentAccountId,\n      accountsInfo,\n      logs: [\n        ...mainLogs.map((log) => ({ ...log, context: 'main' })),\n        ...bottomSheetLogs.map((log) => ({ ...log, context: 'bottomSheet' })),\n        ...apiLogs.map((log) => ({ ...log, context: 'api' })),\n      ].sort((a, b) => a.time.getTime() - b.time.getTime()),\n    },\n    undefined,\n    2,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDisclaimer({ isActive, handleBackClick, isInsideModal }: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title=\"\"\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          />\n          <div className={styles.sideTitle}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsDisclaimer);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport Button from '../../ui/Button';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n}\n\nfunction HiddenByUserNft({ nft }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus } = getActions();\n  const lang = useLang();\n\n  const [isNftHidden, , unmarkNftHidden] = useFlag(true);\n\n  const handleUnhide = useLastCallback(() => {\n    removeNftSpecialStatus({ address: nft.address });\n  });\n\n  const {\n    transitionClassNames,\n  } = useShowTransition(isNftHidden, handleUnhide);\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function handleNftClick() {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'user',\n    });\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.item, transitionClassNames)}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name || lang('Untitled')}</span>\n        {\n          nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>\n        }\n      </div>\n\n      <Button\n        isSmall\n        isPrimary\n        isText\n        className={styles.nftButtonUnhide}\n        onClick={unmarkNftHidden}\n        shouldStopPropagation\n      >\n        {lang('Unhide')}\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(HiddenByUserNft);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Switcher from '../../ui/Switcher';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  isWhitelisted?: boolean;\n}\n\nfunction ProbablyScamNft({ nft, isWhitelisted }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus, openUnhideNftModal } = getActions();\n  const lang = useLang();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  const handleNftClick = useLastCallback(() => {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'scam',\n    });\n  });\n\n  const handleSwitcherClick = useLastCallback((e: React.ChangeEvent) => {\n    e.stopPropagation();\n    if (isWhitelisted) {\n      removeNftSpecialStatus({ address: nft.address });\n    } else {\n      openUnhideNftModal({ address: nft.address, name: nft.name! });\n    }\n  });\n\n  return (\n    <div\n      className={styles.item}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name}</span>\n        {nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>}\n      </div>\n\n      <Switcher\n        className={styles.menuSwitcher}\n        label={lang('Show')}\n        checked={isWhitelisted}\n        onChange={handleSwitcherClick}\n        shouldStopPropagation\n      />\n    </div>\n  );\n}\n\nexport default memo(ProbablyScamNft);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport HiddenByUserNft from './nfts/HiddenByUserNft';\nimport ProbablyScamNft from './nfts/ProbablyScamNft';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  orderedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n}\n\nfunction SettingsHiddenNfts({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  orderedAddresses,\n  byAddress,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    return orderedAddresses\n      .map((address) => byAddress[address])\n      .filter(Boolean);\n  }, [\n    byAddress, orderedAddresses,\n  ]);\n\n  const hiddenByUserNfts = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    return nfts?.filter((nft) => blacklistedNftAddressesSet.has(nft.address));\n  }, [nfts, blacklistedNftAddresses]);\n\n  const probablyScamNfts = useMemo(() => {\n    return nfts?.filter((nft) => nft.isHidden);\n  }, [nfts]);\n\n  const whitelistedNftAddressesSet = useMemo(() => {\n    return new Set(whitelistedNftAddresses);\n  }, [whitelistedNftAddresses]);\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function renderHiddenByUserNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Hidden By Me')}</p>\n        <div className={buildClassName(styles.block, !areSettingsInModal && 'hidden-nfts-user')}>\n          {hiddenByUserNfts!.map((nft) => <HiddenByUserNft key={nft.address} nft={nft} />)}\n        </div>\n      </>\n    );\n  }\n\n  function renderProbablyScamNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Probably Scam')}</p>\n        <div className={\n          buildClassName(styles.block, styles.settingsBlockWithDescription, !areSettingsInModal && 'hidden-nfts-scam')\n        }\n        >\n          {\n            probablyScamNfts!.map(\n              (nft) => (\n                <ProbablyScamNft\n                  key={nft.address}\n                  nft={nft}\n                  isWhitelisted={whitelistedNftAddressesSet.has(nft.address)}\n                />\n              ),\n            )\n          }\n        </div>\n        <p className={styles.blockDescription}>\n          {lang('$settings_nft_probably_scam_description')}\n        </p>\n      </>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Hidden NFTs')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Hidden NFTs')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {Boolean(hiddenByUserNfts?.length) && renderHiddenByUserNfts()}\n        {Boolean(probablyScamNfts?.length) && renderProbablyScamNfts()}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectCurrentAccountState(global) ?? {};\n  const {\n    orderedAddresses,\n    byAddress,\n  } = selectCurrentAccountState(global)?.nfts ?? {};\n  return {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    orderedAddresses,\n    byAddress,\n  };\n})(SettingsHiddenNfts));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { LangCode } from '../../global/types';\n\nimport { LANG_LIST } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { setLanguage } from '../../util/langProvider';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport checkmarkImg from '../../assets/settings/settings_checkmark.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  langCode: LangCode;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsLanguage({\n  isActive,\n  langCode,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const {\n    changeLanguage,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const handleLanguageChange = useLastCallback((newLangCode: LangCode) => {\n    void setLanguage(newLangCode, () => {\n      changeLanguage({ langCode: newLangCode });\n    });\n  });\n\n  function renderLanguages() {\n    return LANG_LIST.map(({ name, nativeName, langCode: lc }) => (\n      <div\n        key={lc}\n        className={buildClassName(styles.item, styles.item_lang)}\n        onClick={() => handleLanguageChange(lc)}\n      >\n        <div className={styles.languageInfo}>\n          <span className={styles.languageMain}>{name}</span>\n          <span className={styles.languageNative}>{nativeName}</span>\n        </div>\n\n        {langCode === lc && <img src={checkmarkImg} alt={name} />}\n      </div>\n    ));\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Language')}\n          onBackButtonClick={handleBackClick}\n          className={buildClassName(styles.modalHeader, styles.languageHeader)}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Language')}</span>\n        </div>\n      )}\n      <div className={buildClassName(styles.content, 'custom-scroll')}>\n        <div className={styles.block}>\n          {renderLanguages()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsLanguage);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account, AccountSettings, GlobalState } from '../../global/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../config';\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  accounts?: Record<string, Account>;\n  canPlaySounds?: boolean;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  pushNotifications: GlobalState['pushNotifications'];\n}\n\nfunction SettingsPushNotifications({\n  isActive,\n  handleBackClick,\n  accounts,\n  canPlaySounds,\n  pushNotifications: {\n    enabledAccounts,\n    isAvailable: arePushNotificationsAvailable,\n  },\n  isInsideModal,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const { toggleNotifications, toggleNotificationAccount, toggleCanPlaySounds } = getActions();\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const arePushNotificationsEnabled = Boolean(Object.keys(enabledAccounts).length);\n  const headerTitle = arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds');\n\n  const handlePushNotificationsToggle = useLastCallback(() => {\n    toggleNotifications({ isEnabled: !arePushNotificationsEnabled });\n  });\n\n  const handleCanPlaySoundToggle = useLastCallback(() => {\n    toggleCanPlaySounds({ isEnabled: !canPlaySounds });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  function renderAccount(accountId: string, address: string, title?: string, isHardware?: boolean) {\n    const onClick = () => {\n      toggleNotificationAccount({ accountId });\n    };\n\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n\n    const isDisabled = enabledAccounts\n      && !enabledAccounts[accountId]\n      && Object.keys(enabledAccounts).length >= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT;\n\n    return (\n      <AccountButton\n        className={buildClassName(\n          styles.account,\n          isDisabled ? styles.accountDisabled : undefined,\n        )}\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        isHardware={isHardware}\n        withCheckbox\n        isLoading={isDisabled}\n        isActive={Boolean(enabledAccounts && enabledAccounts[accountId])}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        className={styles.settingsBlock}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, isHardware }]) => {\n            return renderAccount(accountId, addressByChain.ton, title, isHardware);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={headerTitle}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{headerTitle}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {arePushNotificationsAvailable && (\n          <>\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handlePushNotificationsToggle}>\n                {lang('Push Notifications')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Push Notifications')}\n                  checked={arePushNotificationsEnabled}\n                />\n              </div>\n            </div>\n            <p className={styles.blockTitle}>{\n              lang(\n                'Select up to %count% wallets for notifications',\n                { count: MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT },\n              )\n            }\n            </p>\n            {renderAccounts()}\n          </>\n        )}\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleCanPlaySoundToggle}>\n            {lang('Play Sounds')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Play Sounds')}\n              checked={canPlaySounds}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  return {\n    accounts,\n    canPlaySounds: global.settings.canPlaySounds,\n    pushNotifications: global.pushNotifications,\n    settingsByAccountId: global.settings.byAccountId,\n  };\n})(SettingsPushNotifications));\n","export var AndroidSettings;\r\n(function (AndroidSettings) {\r\n    /**\r\n     * Show settings for accessibility modules\r\n     */\r\n    AndroidSettings[\"Accessibility\"] = \"accessibility\";\r\n    /**\r\n     * Show add account screen for creating a new account\r\n     */\r\n    AndroidSettings[\"Account\"] = \"account\";\r\n    /**\r\n     * Show settings to allow entering/exiting airplane mode\r\n     */\r\n    AndroidSettings[\"AirplaneMode\"] = \"airplane_mode\";\r\n    /**\r\n     * Show settings to allow configuration of APNs\r\n     */\r\n    AndroidSettings[\"Apn\"] = \"apn\";\r\n    /**\r\n     * Show screen of details about a particular application\r\n     */\r\n    AndroidSettings[\"ApplicationDetails\"] = \"application_details\";\r\n    /**\r\n     * Show settings to allow configuration of application development-related settings\r\n     */\r\n    AndroidSettings[\"ApplicationDevelopment\"] = \"application_development\";\r\n    /**\r\n     * Show settings to allow configuration of application-related settings\r\n     */\r\n    AndroidSettings[\"Application\"] = \"application\";\r\n    /**\r\n     * Show settings to allow configuration of application-specific notifications\r\n     */\r\n    AndroidSettings[\"AppNotification\"] = \"app_notification\";\r\n    /**\r\n     * Show screen for controlling which apps can ignore battery optimizations\r\n     */\r\n    AndroidSettings[\"BatteryOptimization\"] = \"battery_optimization\";\r\n    /**\r\n     * Show settings to allow configuration of Bluetooth\r\n     */\r\n    AndroidSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Show settings for video captioning\r\n     */\r\n    AndroidSettings[\"Captioning\"] = \"captioning\";\r\n    /**\r\n     * Show settings to allow configuration of cast endpoints\r\n     */\r\n    AndroidSettings[\"Cast\"] = \"cast\";\r\n    /**\r\n     * Show settings for selection of 2G/3G/4G\r\n     */\r\n    AndroidSettings[\"DataRoaming\"] = \"data_roaming\";\r\n    /**\r\n     * Show settings to allow configuration of date and time\r\n     */\r\n    AndroidSettings[\"Date\"] = \"date\";\r\n    /**\r\n     * Show settings to allow configuration of display\r\n     */\r\n    AndroidSettings[\"Display\"] = \"display\";\r\n    /**\r\n     * Show Daydream settings\r\n     */\r\n    AndroidSettings[\"Dream\"] = \"dream\";\r\n    /**\r\n     * Show Home selection settings\r\n     */\r\n    AndroidSettings[\"Home\"] = \"home\";\r\n    /**\r\n     *    Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * Show settings to enable/disable input method subtypes\r\n     */\r\n    AndroidSettings[\"KeyboardSubType\"] = \"keyboard_subtype\";\r\n    /**\r\n     * Show settings to allow configuration of locale\r\n     */\r\n    AndroidSettings[\"Locale\"] = \"locale\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    AndroidSettings[\"Location\"] = \"location\";\r\n    /**\r\n     *    Show settings to manage installed applications\r\n     */\r\n    AndroidSettings[\"ManageApplications\"] = \"manage_applications\";\r\n    /**\r\n     * Show settings to manage all applications\r\n     */\r\n    AndroidSettings[\"ManageAllApplications\"] = \"manage_all_applications\";\r\n    /**\r\n     * Show settings for memory card storage\r\n     */\r\n    AndroidSettings[\"MemoryCard\"] = \"memory_card\";\r\n    /**\r\n     * Show settings for selecting the network operator\r\n     */\r\n    AndroidSettings[\"Network\"] = \"network\";\r\n    /**\r\n     * Show NFC Sharing settings\r\n     */\r\n    AndroidSettings[\"NfcSharing\"] = \"nfcsharing\";\r\n    /**\r\n     * Show NFC Tap & Pay settings\r\n     */\r\n    AndroidSettings[\"NfcPayment\"] = \"nfc_payment\";\r\n    /**\r\n     * Show NFC settings\r\n     */\r\n    AndroidSettings[\"NfcSettings\"] = \"nfc_settings\";\r\n    /**\r\n     * Show the top level print settings\r\n     */\r\n    AndroidSettings[\"Print\"] = \"print\";\r\n    /**\r\n     * Show settings to allow configuration of privacy options\r\n     */\r\n    AndroidSettings[\"Privacy\"] = \"privacy\";\r\n    /**\r\n     * Show settings to allow configuration of quick launch shortcuts\r\n     */\r\n    AndroidSettings[\"QuickLaunch\"] = \"quick_launch\";\r\n    /**\r\n     * Show settings for global search\r\n     */\r\n    AndroidSettings[\"Search\"] = \"search\";\r\n    /**\r\n     * Show settings to allow configuration of security and location privacy\r\n     */\r\n    AndroidSettings[\"Security\"] = \"security\";\r\n    /**\r\n     * Show system settings\r\n     */\r\n    AndroidSettings[\"Settings\"] = \"settings\";\r\n    /**\r\n     * Show the regulatory information screen for the device\r\n     */\r\n    AndroidSettings[\"ShowRegulatoryInfo\"] = \"show_regulatory_info\";\r\n    /**\r\n     * Show settings to a llow configuration of sound and volume\r\n     */\r\n    AndroidSettings[\"Sound\"] = \"sound\";\r\n    /**\r\n     * Show settings for internal storage\r\n     */\r\n    AndroidSettings[\"Storage\"] = \"storage\";\r\n    /**\r\n     * Show settings to allow configuration of sync settings\r\n     */\r\n    AndroidSettings[\"Sync\"] = \"sync\";\r\n    /**\r\n     * Show settings to control access to usage information\r\n     */\r\n    AndroidSettings[\"Usage\"] = \"usage\";\r\n    /**\r\n     * Show settings to manage the user input dictionary\r\n     */\r\n    AndroidSettings[\"UserDictionary\"] = \"user_dictionary\";\r\n    /**\r\n     * Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"VoiceInput\"] = \"voice_input\";\r\n    /**\r\n     * Show settings to allow configuration of Wi-Fi\r\n     */\r\n    AndroidSettings[\"Wifi\"] = \"wifi\";\r\n    /**\r\n     * Show settings to allow configuration of a static IP address for Wi-Fi\r\n     */\r\n    AndroidSettings[\"WifiIp\"] = \"wifi_ip\";\r\n    /**\r\n     * Show settings to allow configuration of wireless controls such as Wi-Fi, Bluetooth and Mobile networks\r\n     */\r\n    AndroidSettings[\"Wireless\"] = \"wireless\";\r\n})(AndroidSettings || (AndroidSettings = {}));\r\nexport var IOSSettings;\r\n(function (IOSSettings) {\r\n    /**\r\n     * Settings > About page\r\n     */\r\n    IOSSettings[\"About\"] = \"about\";\r\n    /**\r\n     * Opens your app-specific settings screen. Note that this is the only officially supported settings screen by Apple.\r\n     */\r\n    IOSSettings[\"App\"] = \"app\";\r\n    /**\r\n     * Used to set if and when the screen should be automatically locked.\r\n     */\r\n    IOSSettings[\"AutoLock\"] = \"autoLock\";\r\n    /**\r\n     * Bluetooth settings. Allows the users to enable/disable bluetooth and to search for devices.\r\n     */\r\n    IOSSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Date and time settings.\r\n     */\r\n    IOSSettings[\"DateTime\"] = \"dateTime\";\r\n    /**\r\n     * FaceTime settings.\r\n     */\r\n    IOSSettings[\"FaceTime\"] = \"facetime\";\r\n    /**\r\n     * Opens iOS general settings screen.\r\n     */\r\n    IOSSettings[\"General\"] = \"general\";\r\n    /**\r\n     * Keyboard settings.\r\n     */\r\n    IOSSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * iCloud settings.\r\n     */\r\n    IOSSettings[\"ICloud\"] = \"iCloud\";\r\n    /**\r\n     * iCloud Storage and Backup settings.\r\n     */\r\n    IOSSettings[\"ICloudStorageBackup\"] = \"iCloudStorageBackup\";\r\n    /**\r\n     * Language and region settings.\r\n     */\r\n    IOSSettings[\"International\"] = \"international\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    IOSSettings[\"LocationServices\"] = \"locationServices\";\r\n    /**\r\n     * Music settings.\r\n     */\r\n    IOSSettings[\"Music\"] = \"music\";\r\n    /**\r\n     * Notes settings.\r\n     */\r\n    IOSSettings[\"Notes\"] = \"notes\";\r\n    /**\r\n     * Notifications settings.\r\n     */\r\n    IOSSettings[\"Notifications\"] = \"notifications\";\r\n    /**\r\n     * Phone settings.\r\n     */\r\n    IOSSettings[\"Phone\"] = \"phone\";\r\n    /**\r\n     * Photos settings.\r\n     */\r\n    IOSSettings[\"Photos\"] = \"photos\";\r\n    /**\r\n     * Allows the user to manage configuration profiles that are installed on the phone.\r\n     */\r\n    IOSSettings[\"ManagedConfigurationList\"] = \"managedConfigurationList\";\r\n    /**\r\n     * Screen where the user can reset the phone to factory settings.\r\n     */\r\n    IOSSettings[\"Reset\"] = \"reset\";\r\n    /**\r\n     * Ringtone settings.\r\n     */\r\n    IOSSettings[\"Ringtone\"] = \"ringtone\";\r\n    /**\r\n     * Used to set phone volume, vibration settings, etc.\r\n     */\r\n    IOSSettings[\"Sounds\"] = \"sounds\";\r\n    /**\r\n     * Software update screen.\r\n     */\r\n    IOSSettings[\"SoftwareUpdate\"] = \"softwareUpdate\";\r\n    /**\r\n     * Store settings.\r\n     */\r\n    IOSSettings[\"Store\"] = \"store\";\r\n    /**\r\n     * Tracking settings.\r\n     */\r\n    IOSSettings[\"Tracking\"] = \"tracking\";\r\n    /**\r\n     * Wallpaper settings.\r\n     */\r\n    IOSSettings[\"Wallpaper\"] = \"wallpaper\";\r\n    /**\r\n     * WiFi settings.\r\n     */\r\n    IOSSettings[\"WiFi\"] = \"wifi\";\r\n    /**\r\n     * Tethering settings (used to create a hotspot with mobile data).\r\n     */\r\n    IOSSettings[\"Tethering\"] = \"tethering\";\r\n    /**\r\n     * Do Not Disturb settings.\r\n     */\r\n    IOSSettings[\"DoNotDisturb\"] = \"doNotDisturb\";\r\n    /**\r\n     * Touch id passcode settings.\r\n     */\r\n    IOSSettings[\"TouchIdPasscode\"] = \"touchIdPasscode\";\r\n    /**\r\n     * Screen Time settings.\r\n     */\r\n    IOSSettings[\"ScreenTime\"] = \"screenTime\";\r\n    /**\r\n     * Accessibility settings.\r\n     */\r\n    IOSSettings[\"Accessibility\"] = \"accessibility\";\r\n})(IOSSettings || (IOSSettings = {}));\r\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\r\nconst NativeSettings = registerPlugin('NativeSettings', {\r\n    web: () => import('./web').then(m => new m.NativeSettingsWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { NativeSettings };\r\n//# sourceMappingURL=index.js.map","import React, { memo, useRef, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Collapsible.scss';\n\nconst CLASSES = {\n  collapsible: 'collapsible',\n  shown: 'shown',\n  open: 'open',\n  content: 'content',\n} as const;\n\ninterface OwnProps {\n  children: TeactJsx;\n  isShown: boolean;\n}\n\nconst DELAY = 200;\n\nfunction Collapsible({ children, isShown }: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const isOpenRef = useRef(isShown);\n  const [shouldRender, setShouldRender] = useState(isShown);\n  const prevIsShown = usePrevious(isShown);\n  const hideTimeoutRef = useRef<number>();\n\n  function toggleOpen() {\n    if (!containerRef.current) return;\n    containerRef.current.classList.toggle(CLASSES.open);\n    isOpenRef.current = !isOpenRef.current;\n  }\n\n  if (prevIsShown !== undefined && prevIsShown !== isShown) {\n    if (isShown && !isOpenRef.current) {\n      setShouldRender(true);\n      if (hideTimeoutRef.current) window.clearTimeout(hideTimeoutRef.current);\n      setTimeout(() => requestMutation(toggleOpen), DELAY);\n    } else {\n      requestMutation(toggleOpen);\n      hideTimeoutRef.current = window.setTimeout(() => {\n        setShouldRender(false);\n      }, DELAY);\n    }\n  }\n\n  const render = <div className={CLASSES.content}>{children}</div>;\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName(CLASSES.collapsible, isShown && CLASSES.shown, isOpenRef.current && CLASSES.open)}\n    >\n      {shouldRender ? render : undefined}\n    </div>\n  );\n}\n\nexport default memo(Collapsible);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport styles from '../Settings.module.scss';\n\nimport privateKeyImg from '../../../assets/settings/settings_private-key.svg';\nimport secretWordsImg from '../../../assets/settings/settings_secret-words.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  isMultichainAccount: boolean;\n  hasMnemonicWallet?: boolean;\n  onBackClick: () => void;\n  onOpenSecretWordsSafetyRules: () => void;\n  onOpenPrivateKeySafetyRules: () => void;\n  openSettingsSlide: () => void;\n}\n\nfunction Backup({\n  isActive,\n  isInsideModal,\n  isMultichainAccount,\n  hasMnemonicWallet,\n  onBackClick,\n  onOpenSecretWordsSafetyRules,\n  onOpenPrivateKeySafetyRules,\n  openSettingsSlide,\n}: OwnProps) {\n  const lang = useLang();\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          onBackButtonClick={openSettingsSlide}\n          className={styles.modalHeader}\n          withNotch={isScrolled}\n          title={lang('$back_up_security')}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('$back_up_security')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {hasMnemonicWallet && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenSecretWordsSafetyRules}>\n                <img className={styles.menuIcon} src={secretWordsImg} alt={lang('View Secret Words')} />\n                {lang('View Secret Words')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            { isMultichainAccount && (\n              <p className={styles.blockDescription}>\n                {lang('Can be imported to any multichain wallet supporting TON.')}\n              </p>\n            )}\n          </>\n        )}\n\n        {(isMultichainAccount || !hasMnemonicWallet) && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenPrivateKeySafetyRules}>\n                <img className={styles.menuIcon} src={privateKeyImg} alt={lang('View TON Private Key')} />\n                {lang('View TON Private Key')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            <p className={styles.blockDescription}>\n              {lang('Can be imported to non-multichain wallets for TON.')}\n            </p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Backup);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  privateKey?: string;\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  privateKey,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$private_key_description'))}\n      </p>\n      <p className={styles.warning}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <InteractiveTextField\n        noExplorer\n        text={privateKey}\n        copyNotification={lang('Your private key was copied!')}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          className={styles.footerButton}\n          onClick={onSubmit}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"gDO3tqgH\",\"buttonWrapper\":\"SCRKWYe1\",\"footerButton\":\"_xKVE3tH\",\"modalSticker\":\"vnMzCftS\"};","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport PrivateKeyContent from '../../common/backup/PrivateKeyContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isBackupSlideActive?: boolean;\n  isInsideModal?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupPrivateKey({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [privateKey, setPrivateKey] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    async function loadPrivateKey() {\n      if (isBackupSlideActive && enteredPassword) {\n        const privateKeyResult = await callApi('fetchPrivateKey', currentAccountId!, enteredPassword);\n\n        setPrivateKey(privateKeyResult);\n      } else {\n        setPrivateKey(undefined);\n      }\n    }\n    void loadPrivateKey();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Private Key')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Private Key')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <PrivateKeyContent\n          isActive={isActive}\n          privateKey={privateKey}\n          buttonText={lang('Close')}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupPrivateKey);\n","import React, { memo, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SafetyRulesContent from '../../common/backup/SafetyRulesContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n  isInsideModal?: boolean;\n  backupType: 'key' | 'words';\n}\n\nfunction BackupSafetyRules({\n  isActive,\n  onBackClick,\n  isInsideModal,\n  onSubmit,\n  backupType,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setWritedownAccepted(false);\n    setOpenWalletAccepted(false);\n    setCanBeStolenAccepted(false);\n    onBackClick();\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Safety Rules')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_one'\n              : '$safety_rules_one',\n          )}\n          textSecond={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_two'\n              : '$safety_rules_two',\n          )}\n          textThird={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_three'\n              : '$safety_rules_three',\n          )}\n          isFirstCheckboxSelected={writedownAccepted}\n          onFirstCheckboxClick={setWritedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSafetyRules);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SecretWordsContent from '../../common/backup/SecretWordsContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isInsideModal?: boolean;\n  isBackupSlideActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupSecretWords({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [mnemonic, setMnemonic] = useState<string[] | undefined>(undefined);\n  const wordsCount = mnemonic?.length || 0;\n\n  useEffect(() => {\n    async function loadMnemonic() {\n      if (isBackupSlideActive && enteredPassword) {\n        const mnemonicResult = await callApi('fetchMnemonic', currentAccountId!, enteredPassword);\n\n        setMnemonic(mnemonicResult);\n      } else {\n        setMnemonic(undefined);\n      }\n    }\n    void loadMnemonic();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('%1$d Secret Words', wordsCount) as string}\n          withNotch={isScrolled}\n          className={settingsStyles.modalHeader}\n          onBackButtonClick={onBackClick}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText className={settingsStyles.headerBack} onClick={onBackClick}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={onSubmit}\n          buttonText={lang('Close')}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSecretWords);\n","import { Dialog } from 'native-dialog';\nimport React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport {\n  getIsFaceIdAvailable,\n  getIsNativeBiometricAuthSupported,\n  getIsTouchIdAvailable,\n} from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { getIsTelegramBiometricsRestricted, getTelegramApp } from '../../../util/telegram';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Switcher from '../../ui/Switcher';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from '../Settings.module.scss';\n\nimport biometricsImg from '../../../assets/settings/settings_biometrics.svg';\nimport faceIdImg from '../../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  onEnable: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n}\n\nfunction NativeBiometricsToggle({ isBiometricAuthEnabled, onEnable }: OwnProps & StateProps) {\n  const { disableNativeBiometrics } = getActions();\n  const isFaceId = getIsFaceIdAvailable() || (!getIsNativeBiometricAuthSupported() && IS_IOS);\n  const isTouchId = getIsTouchIdAvailable();\n\n  const lang = useLang();\n  const [isWarningModalOpen, openWarningModal, closeWarningModal] = useFlag();\n  const switcherTitle = isFaceId ? 'Face ID' : (isTouchId ? 'Touch ID' : lang('Biometric Authentication'));\n  const warningTitle = isFaceId\n    ? 'Turn Off Face ID'\n    : (isTouchId ? 'Turn Off Touch ID' : 'Turn Off Biometrics');\n  const warningDescription = isFaceId\n    ? 'Are you sure you want to disable Face ID?'\n    : (isTouchId ? 'Are you sure you want to disable Touch ID?' : 'Are you sure you want to disable biometrics?');\n\n  const icon = isFaceId ? faceIdImg : biometricsImg;\n\n  const handleConfirmDisableBiometrics = useLastCallback(() => {\n    closeWarningModal();\n    disableNativeBiometrics();\n  });\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isWarningModalOpen) {\n      Dialog.confirm({\n        title: lang(warningTitle),\n        message: lang(warningDescription),\n        okButtonTitle: lang('Yes'),\n        cancelButtonTitle: lang('Cancel'),\n      })\n        .then(({ value }) => {\n          if (value) {\n            handleConfirmDisableBiometrics();\n          }\n        })\n        .finally(closeWarningModal);\n    }\n  }, [handleConfirmDisableBiometrics, isWarningModalOpen, lang, warningDescription, warningTitle]);\n\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (getIsTelegramBiometricsRestricted()) {\n      getTelegramApp()?.BiometricManager.openSettings();\n      return;\n    }\n\n    if (isBiometricAuthEnabled) {\n      openWarningModal();\n    } else {\n      onEnable();\n    }\n  });\n\n  function renderDisableNativeBiometricsWarning() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isWarningModalOpen}\n        title={lang(warningTitle)}\n        onClose={closeWarningModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        <p className={modalStyles.text}>\n          {renderText(lang(warningDescription))}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeWarningModal}>{lang('Cancel')}</Button>\n          <Button onClick={handleConfirmDisableBiometrics}>{lang('Yes')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n        <div className={styles.item} onClick={handleBiometricAuthToggle}>\n          <img className={styles.menuIcon} src={icon} alt=\"\" />\n          {switcherTitle}\n\n          <Switcher\n            className={styles.menuSwitcher}\n            label={switcherTitle}\n            checked={isBiometricAuthEnabled}\n          />\n        </div>\n        {renderDisableNativeBiometricsWarning()}\n      </div>\n      <p className={styles.blockDescription}>{\n        lang('To avoid entering the passcode every time, you can use biometrics.')\n      }\n      </p>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    isBiometricAuthEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsToggle));\n","import { AndroidSettings, IOSSettings, NativeSettings } from 'capacitor-native-settings';\nimport { Dialog } from 'native-dialog';\nimport React, {\n  memo, useLayoutEffect, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AutolockValueType } from '../../global/types';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_HUGE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  APP_NAME,\n  AUTOLOCK_OPTIONS_LIST,\n  IS_CAPACITOR,\n  PIN_LENGTH,\n} from '../../config';\nimport {\n  selectIsBiometricAuthEnabled,\n  selectIsMultichainAccount,\n  selectIsNativeBiometricAuthEnabled,\n  selectIsPasswordPresent,\n} from '../../global/selectors';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../util/haptics';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { pause } from '../../util/schedulers';\nimport { getIsTelegramBiometricsRestricted } from '../../util/telegram';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED, IS_ELECTRON, IS_IOS, IS_IOS_APP,\n} from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Collapsible from '../ui/Collapsible';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\nimport Dropdown, { type DropdownItem } from '../ui/Dropdown';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport PinPad from '../ui/PinPad';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Backup from './backup/Backup';\nimport BackupPrivateKey from './backup/BackupPrivateKey';\nimport BackupSafetyRules from './backup/BackupSafetyRules';\nimport BackupSecretWords from './backup/BackupSecretWords';\nimport NativeBiometricsToggle from './biometrics/NativeBiometricsToggle';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport biometricsImg from '../../assets/settings/settings_biometrics.svg';\nimport backupImg from '../../assets/settings/settings_install-app.svg';\n\nexport const enum SLIDES {\n  password,\n  settings,\n  newPassword,\n  createNewPin,\n  confirmNewPin,\n  passwordChanged,\n  backup,\n  safetyRules,\n  privateKey,\n  secretWords,\n}\n\nconst SWITCH_CONFIRM_PASSCODE_PAUSE_MS = 500;\nconst CHANGE_PASSWORD_PAUSE_MS = 1500;\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n  isAutoUpdateEnabled: boolean;\n  onAutoUpdateEnabledToggle: VoidFunction;\n  onSettingsClose: VoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  isPasswordNumeric?: boolean;\n  isPasswordPresent: boolean;\n  isMultichainAccount: boolean;\n  isAppLockEnabled?: boolean;\n  autolockValue?: AutolockValueType;\n  isLoading?: boolean;\n  currentAccountId: string;\n}\n\nconst INITIAL_CHANGE_PASSWORD_SLIDE = getDoesUsePinPad() ? SLIDES.createNewPin : SLIDES.newPassword;\n\nconst DEFAULT_AUTOLOCK_OPTION: AutolockValueType = 'never';\n\nfunction SettingsSecurity({\n  isActive,\n  handleBackClick: navigateBackToSettings,\n  isInsideModal,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  isPasswordNumeric,\n  isPasswordPresent,\n  isMultichainAccount,\n  isAppLockEnabled,\n  autolockValue = DEFAULT_AUTOLOCK_OPTION,\n  isAutoUpdateEnabled,\n  currentAccountId,\n  onSettingsClose,\n  onAutoUpdateEnabledToggle,\n  isLoading,\n}: OwnProps & StateProps) {\n  const {\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    disableNativeBiometrics,\n    enableNativeBiometrics,\n    openBiometricsTurnOffWarning,\n    openBiometricsTurnOn,\n    setSettingsState,\n    setAppLockValue,\n    setIsAuthLoading,\n  } = getActions();\n\n  const lang = useLang();\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.password);\n  const previousSlide = usePrevious(currentSlide);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.settings);\n  const [passwordError, setPasswordError] = useState<string>();\n  const [password, setPassword] = useState<string>();\n  const [backupType, setBackupType] = useState<'key' | 'words' | undefined>(undefined);\n  const [hasMnemonicWallet, setHasMnemonicWallet] = useState<boolean>(false);\n\n  // For Capacitor only\n  const [pinValue, setPinValue] = useState<string>('');\n  const [confirmPinValue, setConfirmPinValue] = useState<string>('');\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const cleanup = useLastCallback((shouldKeepCurrentPassword?: boolean) => {\n    if (!shouldKeepCurrentPassword) setPassword(undefined);\n    setPinValue('');\n    setConfirmPinValue('');\n    clearPasswordError();\n    clearIsPinAccepted();\n  });\n\n  const handleBackToSettingsClick = useLastCallback(() => {\n    navigateBackToSettings();\n    cleanup();\n  });\n\n  const openConfirmNewPinSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.confirmNewPin);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openSettingsSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.settings);\n    setNextKey(undefined);\n    cleanup(true);\n  });\n\n  const openBackupPage = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      openSettingsSlide();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    setNextKey(SLIDES.safetyRules);\n  });\n\n  const openNewPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(INITIAL_CHANGE_PASSWORD_SLIDE);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openPasswordChangedSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.passwordChanged);\n    setNextKey(SLIDES.settings);\n  });\n\n  useLayoutEffect(() => {\n    if (password === undefined && isActive) setCurrentSlide(SLIDES.password);\n    else if (!isActive) cleanup();\n  }, [password, isActive]);\n\n  useHistoryBack({ isActive, onBack: handleBackToSettingsClick });\n\n  const handlePasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    const result = await callApi('verifyPassword', enteredPassword);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    const mnemonic = await callApi('fetchMnemonic', currentAccountId!, enteredPassword);\n\n    setHasMnemonicWallet(Boolean(mnemonic && !isMnemonicPrivateKey(mnemonic)));\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    openSettingsSlide();\n    setPassword(enteredPassword);\n  });\n\n  const handleNewPasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    await callApi('changePassword', password!, enteredPassword);\n    setIsAuthLoading({ isLoading: true });\n    setPassword(enteredPassword);\n    if (isNativeBiometricAuthEnabled) {\n      disableNativeBiometrics();\n      await enableNativeBiometrics({ password: enteredPassword });\n    }\n    if (getDoesUsePinPad()) {\n      openSettingsSlide();\n    } else {\n      openPasswordChangedSlide();\n    }\n    setIsAuthLoading({ isLoading: undefined });\n  });\n\n  const handlePinSubmit = useLastCallback(async (enteredPassword: string) => {\n    setPinValue(enteredPassword);\n    await vibrateOnSuccess(true);\n    await pause(SWITCH_CONFIRM_PASSCODE_PAUSE_MS);\n    openConfirmNewPinSlide();\n  });\n\n  const handleConfirmPinSubmit = useLastCallback(async (enteredPassword: string) => {\n    if (enteredPassword === pinValue) {\n      setPasswordError(lang('New code set successfully'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      await handleNewPasswordSubmit(enteredPassword);\n    } else {\n      setPasswordError(lang('Codes dont match'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      cleanup(true);\n      setCurrentSlide(SLIDES.createNewPin);\n    }\n  });\n\n  const handleChangePasswordClick = useLastCallback(() => {\n    setNextKey(INITIAL_CHANGE_PASSWORD_SLIDE);\n    openNewPasswordSlide();\n  });\n\n  const handleOpenPrivateKeySafetyRules = useLastCallback(() => {\n    setBackupType('key');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.privateKey);\n  });\n\n  const handleOpenSecretWordsSafetyRules = useLastCallback(() => {\n    setBackupType('words');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.secretWords);\n  });\n\n  const handleOpenBackupWallet = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      if (hasMnemonicWallet) handleOpenSecretWordsSafetyRules();\n      else handleOpenPrivateKeySafetyRules();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    // Resetting next key to undefined unmounts and destroys components with mnemonic and private key\n    setNextKey(undefined);\n  });\n\n  const handleOpenPrivateKey = useLastCallback(() => {\n    setCurrentSlide(SLIDES.privateKey);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleOpenSecretWords = useLastCallback(() => {\n    setCurrentSlide(SLIDES.secretWords);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleAppLockToggle = useLastCallback(() => {\n    setAppLockValue({ value: autolockValue, isEnabled: !isAppLockEnabled });\n  });\n\n  const handleAutolockChange = useLastCallback((value: string) => {\n    setAppLockValue({ value: value as AutolockValueType, isEnabled: true });\n  });\n\n  // Biometrics\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (isBiometricAuthEnabled) {\n      openBiometricsTurnOffWarning();\n    } else {\n      openBiometricsTurnOn();\n    }\n  });\n  const handleNativeBiometricsTurnOnOpen = useLastCallback(async () => {\n    if (getIsNativeBiometricAuthSupported()) {\n      setSettingsState({ state: SettingsState.NativeBiometricsTurnOn });\n      return;\n    }\n\n    const warningDescription = IS_IOS\n      ? 'To use this feature, first enable Face ID in your phone settings.'\n      : 'To use this feature, first enable biometrics in your phone settings.';\n\n    const { value } = await Dialog.confirm({\n      title: lang('Warning!'),\n      message: lang(warningDescription),\n      okButtonTitle: lang('Open Settings'),\n      cancelButtonTitle: lang('Cancel'),\n    });\n    if (value) {\n      await NativeSettings.open({\n        optionAndroid: AndroidSettings.ApplicationDetails,\n        optionIOS: IOSSettings.App,\n      });\n    }\n  });\n\n  // The `getIsTelegramBiometricsRestricted` case is required to display a toggle switch.\n  // When activated, it will show a warning to the user indicating that they need to grant\n  // the appropriate permissions for biometric authentication to function properly.\n  const shouldRenderNativeBiometrics = isPasswordPresent\n    && (getIsNativeBiometricAuthSupported() || IS_IOS_APP || getIsTelegramBiometricsRestricted());\n  const shouldRenderMinifiedPinPad = isInsideModal && getDoesUsePinPad();\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Security')}\n            withNotch={isScrolled}\n            onBackButtonClick={handleBackToSettingsClick}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Security')}</span>\n          </div>\n        )}\n        <div\n          className={buildClassName(styles.content, 'custom-scroll')}\n          onScroll={handleContentScroll}\n        >\n          <div className={styles.settingsBlock}>\n            <div className={buildClassName(styles.item)} onClick={handleOpenBackupWallet}>\n              <img className={styles.menuIcon} src={backupImg} alt={lang('$back_up_security')} />\n              {lang('$back_up_security')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          {shouldRenderNativeBiometrics && (\n            <NativeBiometricsToggle\n              onEnable={handleNativeBiometricsTurnOnOpen}\n            />\n          )}\n          {isPasswordPresent && IS_BIOMETRIC_AUTH_SUPPORTED && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={styles.item} onClick={handleBiometricAuthToggle}>\n                  <img className={styles.menuIcon} src={biometricsImg} alt={lang('Biometric Authentication')} />\n                  {lang('Biometric Authentication')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Biometric Authentication')}\n                    checked={isBiometricAuthEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>{\n                lang('To avoid entering the passcode every time, you can use biometrics.')\n              }\n              </p>\n            </>\n          )}\n\n          {!(isBiometricAuthEnabled && !isNativeBiometricAuthEnabled) && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <Button\n                  className={styles.changePasswordButton}\n                  isSimple\n                  onClick={handleChangePasswordClick}\n                >\n                  {isPasswordNumeric ? lang('Change Passcode') : lang('Change Password')}\n                </Button>\n              </div>\n              <p className={styles.blockDescription}>{lang('The passcode will be changed for all your wallets.')}</p>\n            </>\n          )}\n\n          {isPasswordPresent && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.itemSmall)} onClick={handleAppLockToggle}>\n                  {lang('App Lock')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Allow App Lock')}\n                    checked={isAppLockEnabled}\n                  />\n                </div>\n                <Collapsible isShown={!!isAppLockEnabled}>\n                  <Dropdown\n                    label={lang('Auto-Lock')}\n                    items={AUTOLOCK_OPTIONS_LIST as unknown as DropdownItem[]}\n                    selectedValue={autolockValue}\n                    theme=\"light\"\n                    shouldTranslateOptions\n                    className={buildClassName(styles.item, styles.item_small)}\n                    onChange={handleAutolockChange}\n                  />\n                </Collapsible>\n              </div>\n              <p className={styles.blockDescription}>{lang('$app_lock_description', { app_name: APP_NAME })}</p>\n            </>\n          )}\n\n          {IS_ELECTRON && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.item_small)} onClick={onAutoUpdateEnabledToggle}>\n                  {lang('Auto-Updates')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Auto-Updates')}\n                    checked={isAutoUpdateEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>\n                {lang('Turn this off so you can manually download updates and verify signatures.')}\n              </p>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.settings:\n        return renderSettings();\n      case SLIDES.password:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={isPasswordNumeric ? lang('Confirm Passcode') : lang('Confirm Password')}\n                onBackButtonClick={handleBackToSettingsClick}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Enter Password')}</span>\n              </div>\n            )}\n            <PasswordForm\n              isActive={isSlideActive && isActive}\n              error={passwordError}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              forceBiometricsInMain={!isInsideModal}\n              placeholder={lang('Enter your current password')}\n              submitLabel={lang('Continue')}\n              onCancel={handleBackToSettingsClick}\n              onSubmit={handlePasswordSubmit}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n      case SLIDES.newPassword:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Change Password')}\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Change Password')}</span>\n              </div>\n            )}\n            <div className={buildClassName(modalStyles.transitionContent, styles.content)}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isSlideActive}\n                size={ANIMATED_STICKER_BIG_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isSlideActive}\n                isLoading={isLoading}\n                onSubmit={handleNewPasswordSubmit}\n                onCancel={openSettingsSlide}\n                formId=\"auth-create-password\"\n              />\n            </div>\n          </>\n        );\n      case SLIDES.createNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && lang('Change Passcode')}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {!shouldRenderMinifiedPinPad && <div className={styles.pinPadTitle}>{lang('Change Passcode')}</div>}\n            </div>\n            <PinPad\n              isActive={isActive}\n              title={lang('Enter your new code')}\n              length={PIN_LENGTH}\n              value={pinValue}\n              onChange={setPinValue}\n              onSubmit={handlePinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.confirmNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && (\n                  passwordError && pinValue === confirmPinValue\n                    ? lang('Passcode Changed!')\n                    : lang('Change Passcode')\n                )}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {\n                !shouldRenderMinifiedPinPad && (\n                  <div className={styles.pinPadTitle}>\n                    {\n                      passwordError && pinValue === confirmPinValue\n                        ? lang('Passcode Changed!')\n                        : lang('Change Passcode')\n                    }\n                  </div>\n                )\n              }\n            </div>\n\n            <PinPad\n              isActive={isActive}\n              title={!passwordError ? lang('Re-enter your new code') : passwordError}\n              type={passwordError ? (pinValue === confirmPinValue ? 'success' : 'error') : undefined}\n              length={PIN_LENGTH}\n              value={confirmPinValue}\n              onChange={setConfirmPinValue}\n              onSubmit={handleConfirmPinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.passwordChanged:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Password Changed!')}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={buildClassName(styles.header, styles.onlyTextHeader)}>\n                <span className={styles.headerTitle}>{lang('Password Changed!')}</span>\n              </div>\n            )}\n            <div className={styles.content}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={openSettingsSlide} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n      case SLIDES.backup:\n        return (\n          <Backup\n            isActive={isActive && isSlideActive}\n            isMultichainAccount={isMultichainAccount}\n            openSettingsSlide={openSettingsSlide}\n            isInsideModal={isInsideModal}\n            onOpenPrivateKeySafetyRules={handleOpenPrivateKeySafetyRules}\n            onOpenSecretWordsSafetyRules={handleOpenSecretWordsSafetyRules}\n            onBackClick={handleBackToSettingsClick}\n            hasMnemonicWallet={hasMnemonicWallet}\n          />\n        );\n      case SLIDES.safetyRules:\n        return (\n          <BackupSafetyRules\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            backupType={backupType!}\n            onBackClick={openBackupPage}\n            onSubmit={\n              backupType === 'key'\n                ? handleOpenPrivateKey\n                : handleOpenSecretWords\n            }\n          />\n        );\n      case SLIDES.secretWords:\n        return (\n          <BackupSecretWords\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.secretWords || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId!}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n      case SLIDES.privateKey:\n        return (\n          <BackupPrivateKey\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.privateKey || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId!}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Transition\n      direction={previousSlide === SLIDES.password && currentSlide === SLIDES.settings ? 1 : 'auto'}\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(styles.slide, isInsideModal && modalStyles.transitionSlide)}\n      activeKey={currentSlide}\n      nextKey={nextKey}\n      shouldCleanup\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isPasswordNumeric, autolockValue, isAppLockEnabled,\n  } = global.settings;\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const isMultichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n\n  return {\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    isMultichainAccount,\n    isPasswordNumeric,\n    isPasswordPresent,\n    isAppLockEnabled,\n    autolockValue,\n    isLoading: global.auth.isLoading,\n    currentAccountId: global.currentAccountId!,\n  };\n})(SettingsSecurity));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TokenSelector from '../common/TokenSelector';\nimport Button from '../ui/Button';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\nfunction SettingsTokenList({\n  isActive,\n  isInsideModal,\n  handleBackClick,\n}: OwnProps) {\n  const { addToken } = getActions();\n\n  const lang = useLang();\n\n  const handleTokenSelect = useLastCallback((token: UserToken | UserSwapToken) => {\n    addToken({ token: token as UserToken });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  function renderHeader() {\n    return (\n      <div className={buildClassName(styles.header, isInsideModal && styles.headerInsideModal)}>\n        <Button\n          isSimple\n          isText\n          className={buildClassName(styles.headerBack, isInsideModal && styles.isInsideModal)}\n          onClick={handleBackClick}\n        >\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n        <span className={styles.headerTitle}>{lang('Select Token')}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.slide, styles.withTopSpace)}>\n      <TokenSelector\n        isActive={isActive}\n        shouldHideMyTokens\n        shouldHideNotSupportedTokens\n        header={renderHeader()}\n        onTokenSelect={handleTokenSelect}\n        onBack={handleBackClick}\n        onClose={handleBackClick}\n      />\n    </div>\n  );\n}\n\nexport default memo(SettingsTokenList);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nexport interface Wallet {\n  address: string;\n  version: ApiTonWalletVersion;\n  totalBalance: string;\n  tokens: string[];\n}\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n  wallets?: Wallet[];\n  currentVersion?: ApiTonWalletVersion;\n}\n\nfunction SettingsWalletVersion({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  currentVersion,\n  wallets,\n}: OwnProps) {\n  const {\n    closeSettings,\n    importAccountByVersion,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleAddWallet = useLastCallback((version: ApiTonWalletVersion) => {\n    closeSettings();\n    importAccountByVersion({ version });\n  });\n\n  function renderWallets() {\n    return wallets?.map((v) => {\n      return (\n        <div\n          key={v.address}\n          className={buildClassName(styles.item, styles.item_wallet_version)}\n          onClick={() => handleAddWallet(v.version)}\n        >\n          <div className={styles.walletVersionInfo}>\n            <span className={styles.walletVersionTitle}>{v.version}</span>\n            <span className={styles.walletVersionAddress}>{shortenAddress(v.address)}</span>\n          </div>\n          <div className={styles.walletVersionInfoRight}>\n            <span className={styles.walletVersionTokens}>\n              {v.tokens.join(', ')}\n            </span>\n            <span className={styles.walletVersionAmount}>\n              &thinsp;{v.totalBalance}\n            </span>\n          </div>\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      );\n    });\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Wallet Versions')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Wallet Versions')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <div className={styles.blockWalletVersionText}>\n          <span>{lang('$current_wallet_version', { version: <strong>{currentVersion}</strong> })}</span>\n          <span>{lang('You have tokens on other versions of your wallet. You can import them from here.')}</span>\n        </div>\n        <div className={styles.block}>\n          {renderWallets()}\n        </div>\n        <div className={styles.blockWalletVersionReadMore}>\n          {lang('$read_more_about_wallet_version', {\n            ton_link: (\n              <a href=\"https://docs.ton.org/participate/wallets/contracts\" target=\"_blank\" rel=\"noreferrer\">\n                ton.org\n              </a>\n            ),\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsWalletVersion);\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\nimport type { ApiDapp, ApiWalletInfo } from '../../api/types';\nimport type {\n  Account, GlobalState, HardwareConnectState, UserToken,\n} from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\nimport type { Wallet } from './SettingsWalletVersion';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER,\n  APP_NAME,\n  APP_VERSION,\n  HELPCENTER_URL,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  IS_EXTENSION,\n  LANG_LIST,\n  MTW_CARDS_WEBSITE,\n  MTW_TIPS_CHANNEL_NAME,\n  PROXY_HOSTS,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  SUPPORT_USERNAME,\n  TELEGRAM_WEB_URL,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { openUrl } from '../../util/openUrl';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport useTelegramMiniAppSwipeToClose from '../../util/telegram/hooks/useTelegramMiniAppSwipeToClose';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DAPP_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_LEDGER_SUPPORTED,\n  IS_TOUCH_ENV,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../ledger/LedgerSelectWallets';\nimport LogOutModal from '../main/modals/LogOutModal';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Biometrics from './biometrics/Biometrics';\nimport SettingsNativeBiometricsTurnOn from './biometrics/NativeBiometricsTurnOn';\nimport SettingsAbout from './SettingsAbout';\nimport SettingsAppearance from './SettingsAppearance';\nimport SettingsAssets from './SettingsAssets';\nimport SettingsDapps from './SettingsDapps';\nimport SettingsDeveloperOptions from './SettingsDeveloperOptions';\nimport SettingsDisclaimer from './SettingsDisclaimer';\nimport SettingsHiddenNfts from './SettingsHiddenNfts';\nimport SettingsLanguage from './SettingsLanguage';\nimport SettingsPushNotifications from './SettingsPushNotifications';\nimport SettingsSecurity from './SettingsSecurity';\nimport SettingsTokenList from './SettingsTokenList';\nimport SettingsWalletVersion from './SettingsWalletVersion';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport aboutImg from '../../assets/settings/settings_about.svg';\nimport appearanceImg from '../../assets/settings/settings_appearance.svg';\nimport assetsActivityImg from '../../assets/settings/settings_assets-activity.svg';\nimport connectedDappsImg from '../../assets/settings/settings_connected-dapps.svg';\nimport disclaimerImg from '../../assets/settings/settings_disclaimer.svg';\nimport exitImg from '../../assets/settings/settings_exit.svg';\nimport helpcenterImg from '../../assets/settings/settings_helpcenter.svg';\nimport installAppImg from '../../assets/settings/settings_install-app.svg';\nimport installDesktopImg from '../../assets/settings/settings_install-desktop.svg';\nimport installMobileImg from '../../assets/settings/settings_install-mobile.svg';\nimport languageImg from '../../assets/settings/settings_language.svg';\nimport ledgerImg from '../../assets/settings/settings_ledger.svg';\nimport mtwCardsImg from '../../assets/settings/settings_mtw-cards.svg';\nimport upgradeImg from '../../assets/settings/settings_mytonwallet.svg';\nimport notifications from '../../assets/settings/settings_notifications.svg';\nimport securityImg from '../../assets/settings/settings_security.svg';\nimport supportImg from '../../assets/settings/settings_support.svg';\nimport telegramImg from '../../assets/settings/settings_telegram-menu.svg';\nimport tipsImg from '../../assets/settings/settings_tips.svg';\nimport tonLinksImg from '../../assets/settings/settings_ton-links.svg';\nimport tonMagicImg from '../../assets/settings/settings_ton-magic.svg';\nimport tonProxyImg from '../../assets/settings/settings_ton-proxy.svg';\nimport walletVersionImg from '../../assets/settings/settings_wallet-version.svg';\n\ntype OwnProps = {\n  isActive: boolean;\n  isInsideModal?: boolean;\n};\n\ntype StateProps = {\n  settings: GlobalState['settings'];\n  dapps: ApiDapp[];\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isHardwareAccount?: boolean;\n  currentVersion?: ApiTonWalletVersion;\n  versions?: ApiWalletInfo[];\n  isCopyStorageEnabled?: boolean;\n  supportAccountsCount?: number;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isRemoteTab?: boolean;\n  arePushNotificationsAvailable?: boolean;\n  isNftBuyingDisabled?: boolean;\n};\n\nconst AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE = 5;\nconst SUPPORT_ACCOUNTS_COUNT_DEFAULT = 1;\n\nfunction Settings({\n  settings: {\n    state,\n    theme,\n    animationLevel,\n    isTestnet,\n    langCode,\n    isTonProxyEnabled,\n    isTonMagicEnabled,\n    isDeeplinkHookEnabled,\n    baseCurrency,\n  },\n  dapps,\n  isActive,\n  isOpen = false,\n  tokens,\n  isInsideModal,\n  isHardwareAccount,\n  currentVersion,\n  versions,\n  isCopyStorageEnabled,\n  supportAccountsCount = SUPPORT_ACCOUNTS_COUNT_DEFAULT,\n  accounts,\n  hardwareWallets,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isRemoteTab,\n  arePushNotificationsAvailable,\n  isNftBuyingDisabled,\n}: OwnProps & StateProps) {\n  const {\n    setSettingsState,\n    openSettingsHardwareWallet,\n    closeSettings,\n    toggleDeeplinkHook,\n    toggleTonProxy,\n    toggleTonMagic,\n    getDapps,\n    clearIsPinAccepted,\n    afterSelectHardwareWallets,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  const { renderingKey } = useModalTransitionKeys(state, isOpen);\n  const { disableSwipeToClose, enableSwipeToClose } = useTelegramMiniAppSwipeToClose(isOpen);\n  const [clicksAmount, setClicksAmount] = useState<number>(isTestnet ? AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE : 0);\n  const prevRenderingKeyRef = useStateRef(usePrevious2(renderingKey));\n\n  const [isDeveloperModalOpen, openDeveloperModal, closeDeveloperModal] = useFlag();\n  const [isLogOutModalOpened, openLogOutModal, closeLogOutModal] = useFlag();\n  const isInitialScreen = renderingKey === SettingsState.Initial;\n\n  const activeLang = useMemo(() => LANG_LIST.find((l) => l.langCode === langCode), [langCode]);\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n\n  const wallets = useMemo(() => {\n    return versions?.map((v) => {\n      const tonBalance = formatCurrency(toDecimal(v.balance), tonToken?.symbol ?? '');\n      const balanceInCurrency = formatCurrency(\n        toBig(v.balance).mul(tonToken?.price ?? 0).round(tonToken?.decimals),\n        shortBaseSymbol,\n      );\n\n      const accountTokens = [tonBalance];\n\n      return {\n        address: v.address,\n        version: v.version,\n        totalBalance: balanceInCurrency,\n        tokens: accountTokens,\n      } satisfies Wallet;\n    }) ?? [];\n  }, [shortBaseSymbol, tonToken, versions]);\n\n  const {\n    transitionClassNames: telegramLinkClassNames,\n    shouldRender: isTelegramLinkRendered,\n  } = useShowTransition(isTonMagicEnabled);\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleSlideAnimationStop = useLastCallback(() => {\n    if (prevRenderingKeyRef.current === SettingsState.NativeBiometricsTurnOn) {\n      clearIsPinAccepted();\n    }\n  });\n\n  const handleCloseSettings = useLastCallback(() => {\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n  });\n\n  useHistoryBack({\n    isActive: isActive && isInitialScreen,\n    onBack: handleCloseSettings,\n    shouldIgnoreForTelegram: isInsideModal,\n  });\n\n  useHideBottomBar(isOpen && !isInitialScreen);\n\n  const handlCloseDeveloperModal = useLastCallback(() => {\n    closeDeveloperModal();\n\n    if (IS_CORE_WALLET) {\n      handleCloseSettings();\n    }\n  });\n\n  const handleConnectedDappsOpen = useLastCallback(() => {\n    getDapps();\n    setSettingsState({ state: SettingsState.Dapps });\n  });\n\n  function handleAppearanceOpen() {\n    setSettingsState({ state: SettingsState.Appearance });\n  }\n\n  function handlePushNotificationsOpen() {\n    setSettingsState({ state: SettingsState.PushNotifications });\n  }\n\n  function handleSecurityOpen() {\n    setSettingsState({ state: SettingsState.Security });\n  }\n\n  function handleAssetsOpen() {\n    setSettingsState({ state: SettingsState.Assets });\n  }\n\n  function handleLanguageOpen() {\n    setSettingsState({ state: SettingsState.Language });\n  }\n\n  function handleAboutOpen() {\n    setSettingsState({ state: SettingsState.About });\n  }\n\n  function handleDisclaimerOpen() {\n    setSettingsState({ state: SettingsState.Disclaimer });\n  }\n\n  const handleBackClick = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.Initial });\n  });\n\n  const handleBackClickToAssets = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.Assets });\n  });\n\n  const handleOpenWalletVersion = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.WalletVersion });\n  });\n\n  const handleDeeplinkHookToggle = useLastCallback(() => {\n    toggleDeeplinkHook({ isEnabled: !isDeeplinkHookEnabled });\n  });\n\n  const handleTonProxyToggle = useLastCallback(() => {\n    toggleTonProxy({ isEnabled: !isTonProxyEnabled });\n  });\n\n  const handleTonMagicToggle = useLastCallback(() => {\n    toggleTonMagic({ isEnabled: !isTonMagicEnabled });\n  });\n\n  function handleClickInstallApp() {\n    void openUrl('https://mytonwallet.io/get', { isExternal: true });\n  }\n\n  function handleClickInstallOnDesktop() {\n    void openUrl('https://mytonwallet.io/get/desktop', { isExternal: true });\n  }\n\n  function handleClickInstallOnMobile() {\n    void openUrl('https://mytonwallet.io/get/mobile', { isExternal: true });\n  }\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    handleCloseSettings();\n  });\n\n  const handleLedgerConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setSettingsState({ state: SettingsState.LedgerSelectWallets });\n  });\n\n  const [isTrayIconEnabled, setIsTrayIconEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsTrayIconEnabled().then(setIsTrayIconEnabled);\n  }, []);\n\n  const handleTrayIconEnabledToggle = useLastCallback(() => {\n    setIsTrayIconEnabled(!isTrayIconEnabled);\n    void window.electron?.setIsTrayIconEnabled(!isTrayIconEnabled);\n  });\n\n  const [isAutoUpdateEnabled, setIsAutoUpdateEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsAutoUpdateEnabled);\n  }, []);\n\n  const handleAutoUpdateEnabledToggle = useLastCallback(() => {\n    setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n    void window.electron?.setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n  });\n\n  const handleBackOrCloseAction = useLastCallback(() => {\n    if (isInitialScreen) {\n      if (isInsideModal) handleCloseSettings();\n    } else {\n      handleBackClick();\n    }\n  });\n\n  const handleCloseLogOutModal = useLastCallback((shouldCloseSettings: boolean) => {\n    closeLogOutModal();\n    if (shouldCloseSettings) {\n      handleCloseSettings();\n    }\n  });\n\n  function handleOpenHardwareModal() {\n    openSettingsHardwareWallet();\n  }\n\n  const handleMultipleClick = () => {\n    if (clicksAmount + 1 >= AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE) {\n      openDeveloperModal();\n    } else {\n      setClicksAmount(clicksAmount + 1);\n    }\n  };\n\n  useEffect(\n    () => captureEscKeyListener(isInsideModal ? handleBackOrCloseAction : handleBackClick),\n    [isInsideModal],\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: () => {\n        if (IS_DELEGATED_BOTTOM_SHEET) {\n          handleBackClick();\n        } else {\n          handleBackOrCloseAction();\n        }\n\n        disableSwipeToClose();\n      },\n      onCancel: () => {\n        setSettingsState({ state: prevRenderingKeyRef.current! });\n\n        enableSwipeToClose();\n      },\n    });\n  }, [disableSwipeToClose, enableSwipeToClose, prevRenderingKeyRef]);\n\n  function renderHandleDeeplinkButton() {\n    return (\n      <div className={styles.item} onClick={handleDeeplinkHookToggle}>\n        <img className={styles.menuIcon} src={tonLinksImg} alt={lang('Handle ton:// links')} />\n        {lang('Handle ton:// links')}\n\n        <Switcher\n          className={styles.menuSwitcher}\n          label={lang('Handle ton:// links')}\n          checked={isDeeplinkHookEnabled}\n        />\n      </div>\n    );\n  }\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Settings')}\n            withNotch={isScrolled}\n            onClose={!isPortrait ? handleCloseSettings : undefined}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button\n              isSimple\n              isText\n              onClick={handleCloseSettings}\n              className={buildClassName(styles.headerBack, isPortrait && styles.hidden)}\n            >\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Settings')}</span>\n          </div>\n        )}\n\n        <div\n          className={buildClassName(styles.content, 'custom-scroll', styles.withBottomSpace)}\n          onScroll={handleContentScroll}\n        >\n          {IS_CORE_WALLET && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={upgradeImg} alt={lang('Upgrade to MyTonWallet')} />\n                {lang('Upgrade to MyTonWallet')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {!IS_CORE_WALLET && IS_WEB && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                {lang('Install App')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {IS_EXTENSION && (\n            <div className={styles.block}>\n              {PROXY_HOSTS && (\n                <div className={styles.item} onClick={handleTonProxyToggle}>\n                  <img className={styles.menuIcon} src={tonProxyImg} alt={lang('TON Proxy')} />\n                  {lang('TON Proxy')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Toggle TON Proxy')}\n                    checked={isTonProxyEnabled}\n                  />\n                </div>\n              )}\n              <div className={styles.item} onClick={handleTonMagicToggle}>\n                <img className={styles.menuIcon} src={tonMagicImg} alt={lang('TON Magic')} />\n                {lang('TON Magic')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Toggle TON Magic')}\n                  checked={isTonMagicEnabled}\n                />\n              </div>\n              {isTelegramLinkRendered && (\n                <div className={buildClassName(styles.item, telegramLinkClassNames)} onClick={handleOpenTelegramWeb}>\n                  <img className={styles.menuIcon} src={telegramImg} alt={lang('Open Telegram Web')} />\n                  {lang('Open Telegram Web')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n          {IS_ELECTRON && (\n            <div className={styles.block}>\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handlePushNotificationsOpen}>\n              <img\n                className={styles.menuIcon}\n                src={notifications}\n                alt={arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n              />\n              {arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            <div className={styles.item} onClick={handleAppearanceOpen}>\n              <img className={styles.menuIcon} src={appearanceImg} alt={lang('Appearance')} />\n              {lang('Appearance')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            {!SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY && (\n              <div className={styles.item} onClick={handleAssetsOpen}>\n                <img className={styles.menuIcon} src={assetsActivityImg} alt={lang('Assets & Activity')} />\n                {lang('Assets & Activity')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {!isHardwareAccount && (\n              <div className={styles.item} onClick={handleSecurityOpen}>\n                <img className={styles.menuIcon} src={securityImg} alt={lang('Security')} />\n                {lang('Security')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {IS_DAPP_SUPPORTED && (\n              <div className={styles.item} onClick={handleConnectedDappsOpen}>\n                <img className={styles.menuIcon} src={connectedDappsImg} alt={lang('Connected Dapps')} />\n                {lang('Connected Dapps')}\n\n                <div className={styles.itemInfo}>\n                  {dapps.length ? dapps.length : ''}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n            {!IS_CORE_WALLET && (\n              <div className={styles.item} onClick={handleLanguageOpen}>\n                <img className={styles.menuIcon} src={languageImg} alt={lang('Language')} />\n                {lang('Language')}\n                <div className={styles.itemInfo}>\n                  {activeLang?.name}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {(!!versions?.length || IS_LEDGER_SUPPORTED) && (\n            <div className={styles.block}>\n              {!!versions?.length && (\n                <div className={styles.item} onClick={handleOpenWalletVersion}>\n                  <img className={styles.menuIcon} src={walletVersionImg} alt={lang('Wallet Versions')} />\n                  {lang('Wallet Versions')}\n\n                  <div className={styles.itemInfo}>\n                    {currentVersion}\n                    <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                  </div>\n                </div>\n              )}\n              {IS_LEDGER_SUPPORTED && (\n                <div className={styles.item} onClick={handleOpenHardwareModal}>\n                  <img className={styles.menuIcon} src={ledgerImg} alt={lang('Connect Ledger')} />\n                  {lang('Connect Ledger')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <>\n              {!isNftBuyingDisabled && (\n                <div className={styles.block}>\n                  <a\n                    href={MTW_CARDS_WEBSITE}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={styles.item}\n                  >\n                    <img className={styles.menuIcon} src={mtwCardsImg} alt={lang('MyTonWallet Cards NFT')} />\n                    {lang('MyTonWallet Cards NFT')}\n\n                    <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                  </a>\n                </div>\n              )}\n              <div className={styles.block}>\n                <a\n                  href={`https://t.me/${MTW_TIPS_CHANNEL_NAME[langCode as never] ?? MTW_TIPS_CHANNEL_NAME.en}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={tipsImg} alt={lang('MyTonWallet Tips')} />\n                  {lang('MyTonWallet Tips')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                <a\n                  href={HELPCENTER_URL[langCode as never] ?? HELPCENTER_URL.en}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={helpcenterImg} alt={lang('Help Center')} />\n                  {lang('Help Center')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                {supportAccountsCount > 0 && (\n                  <a\n                    href={`https://t.me/${SUPPORT_USERNAME}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={styles.item}\n                  >\n                    <img className={styles.menuIcon} src={supportImg} alt={lang('Get Support')} />\n                    {lang('Get Support')}\n\n                    <div className={styles.itemInfo}>\n                      <span className={styles.small}>@{SUPPORT_USERNAME}</span>\n                      <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                    </div>\n                  </a>\n                )}\n              </div>\n            </>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handleDisclaimerOpen}>\n              <img className={styles.menuIcon} src={disclaimerImg} alt={lang('Use Responsibly')} />\n              {lang('Use Responsibly')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          {!IS_CORE_WALLET && IS_CAPACITOR && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnDesktop}>\n                <img className={styles.menuIcon} src={installDesktopImg} alt={lang('Install on Desktop')} />\n                {lang('Install on Desktop')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && IS_ELECTRON && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnMobile}>\n                <img className={styles.menuIcon} src={installMobileImg} alt={lang('Install on Mobile')} />\n                {lang('Install on Mobile')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <div className={styles.block}>\n              {!IS_CORE_WALLET && IS_EXTENSION && (\n                <div className={styles.item} onClick={handleClickInstallApp}>\n                  <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                  {lang('Install App')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {!IS_CORE_WALLET && (\n                <div className={styles.item} onClick={handleAboutOpen}>\n                  <img className={styles.menuIcon} src={aboutImg} alt=\"\" />\n                  {lang('About %app_name%', { app_name: APP_NAME })}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={buildClassName(styles.item, styles.item_red)} onClick={openLogOutModal}>\n              <img className={styles.menuIcon} src={exitImg} alt={lang('Exit')} />\n              {lang('Exit')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          <div className={styles.version} onClick={handleMultipleClick}>\n            {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          </div>\n        </div>\n        <SettingsDeveloperOptions\n          isOpen={isDeveloperModalOpen}\n          isTestnet={isTestnet}\n          isCopyStorageEnabled={isCopyStorageEnabled}\n          onClose={handlCloseDeveloperModal}\n        />\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SettingsState.Initial:\n        return renderSettings();\n      case SettingsState.PushNotifications:\n        return (\n          <SettingsPushNotifications\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Appearance:\n        return (\n          <SettingsAppearance\n            isActive={isSlideActive}\n            theme={theme}\n            animationLevel={animationLevel}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isTrayIconEnabled={isTrayIconEnabled}\n            onTrayIconEnabledToggle={handleTrayIconEnabledToggle}\n          />\n        );\n      case SettingsState.Assets:\n        return (\n          <SettingsAssets\n            isActive={isSlideActive}\n            isInsideModal={isInsideModal}\n            onBack={handleBackClick}\n          />\n        );\n      case SettingsState.Security:\n        return (\n          <SettingsSecurity\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isAutoUpdateEnabled={isAutoUpdateEnabled}\n            onAutoUpdateEnabledToggle={handleAutoUpdateEnabledToggle}\n            onSettingsClose={handleCloseSettings}\n          />\n        );\n      case SettingsState.Dapps:\n        return (\n          <SettingsDapps\n            isActive={isSlideActive}\n            dapps={dapps}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Language:\n        return (\n          <SettingsLanguage\n            isActive={isSlideActive}\n            langCode={langCode}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.About:\n        return (\n          <SettingsAbout\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            theme={theme}\n          />\n        );\n      case SettingsState.Disclaimer:\n        return (\n          <SettingsDisclaimer\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.NativeBiometricsTurnOn:\n        return (\n          <SettingsNativeBiometricsTurnOn\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n          />\n        );\n      case SettingsState.SelectTokenList:\n        return (\n          <SettingsTokenList\n            isActive={isSlideActive}\n            isInsideModal={isInsideModal}\n            handleBackClick={handleBackClickToAssets}\n          />\n        );\n      case SettingsState.WalletVersion:\n        return (\n          <SettingsWalletVersion\n            isActive={isSlideActive}\n            currentVersion={currentVersion}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            wallets={wallets}\n          />\n        );\n      case SettingsState.LedgerConnectHardware:\n        return (\n          <div className={styles.slide}>\n            <LedgerConnect\n              isActive={isSlideActive}\n              isStatic={!isInsideModal}\n              shouldDelegateToNative={IS_DELEGATING_BOTTOM_SHEET && !isInsideModal}\n              state={hardwareState}\n              isLedgerConnected={isLedgerConnected}\n              isTonAppConnected={isTonAppConnected}\n              isRemoteTab={isRemoteTab}\n              className={styles.nestedTransition}\n              onBackButtonClick={handleBackClick}\n              onConnected={handleLedgerConnected}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.LedgerSelectWallets:\n        return (\n          <div className={styles.slide}>\n            <LedgerSelectWallets\n              isActive={isSlideActive}\n              isStatic={!isInsideModal}\n              accounts={accounts}\n              hardwareWallets={hardwareWallets}\n              onBackButtonClick={handleBackClick}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.HiddenNfts:\n        return (\n          <SettingsHiddenNfts\n            isActive={isSlideActive}\n            handleBackClick={handleBackClickToAssets}\n            isInsideModal={isInsideModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <Transition\n        ref={transitionRef}\n        name={resolveSlideTransitionName()}\n        className={buildClassName(isInsideModal ? modalStyles.transition : styles.transitionContainer, 'custom-scroll')}\n        activeKey={renderingKey}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        withSwipeControl\n        onStop={getDoesUsePinPad() ? handleSlideAnimationStop : undefined}\n      >\n        {renderContent}\n      </Transition>\n      <LogOutModal isOpen={isLogOutModalOpened} onClose={handleCloseLogOutModal} />\n      {IS_BIOMETRIC_AUTH_SUPPORTED && <Biometrics isInsideModal={isInsideModal} />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const isHardwareAccount = selectIsHardwareAccount(global);\n  const accounts = selectNetworkAccounts(global);\n  const { isCopyStorageEnabled, supportAccountsCount = 1, isNftBuyingDisabled } = global.restrictions;\n\n  const { currentVersion, byId: versionsById } = global.walletVersions ?? {};\n  const versions = versionsById?.[global.currentAccountId!];\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const {\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n  } = global.hardware;\n\n  return {\n    settings: global.settings,\n    dapps,\n    isOpen: global.areSettingsOpen,\n    tokens: selectCurrentAccountTokens(global),\n    isHardwareAccount,\n    currentVersion,\n    versions,\n    isCopyStorageEnabled,\n    supportAccountsCount,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n    hardwareWallets,\n    accounts,\n    isNftBuyingDisabled,\n    arePushNotificationsAvailable: global.pushNotifications.isAvailable,\n  };\n})(Settings));\n\nfunction handleOpenTelegramWeb() {\n  window.open(TELEGRAM_WEB_URL, '_blank', 'noopener');\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { IS_EXTENSION } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  children: React.ReactNode;\n  isOpen?: boolean;\n  onClose: () => void;\n}\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n}\n\nfunction SettingsModal({\n  children, isOpen, onClose, isMediaViewerOpen,\n}: OwnProps & StateProps) {\n  const fullDialogClassName = buildClassName(\n    styles.modalDialog,\n    !(IS_ELECTRON || IS_EXTENSION) && styles.modalDialogWeb,\n  );\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      dialogClassName={fullDialogClassName}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"settings\"\n      forceFullNative\n      onClose={onClose}\n    >\n      {children}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n  };\n})(SettingsModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { SwapState, SwapType, type UserSwapToken } from '../../global/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { vibrate } from '../../util/haptics';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { IS_CLIPBOARDS_SUPPORTED } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Input from '../ui/Input';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  swapType?: SwapType;\n  toAddress?: string;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n}\n\nconst SHORT_ADDRESS_SHIFT = 14;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_ADDRESS_SHIFT * 2;\n\nfunction SwapBlockchain({\n  isActive,\n  swapType,\n  toAddress = '',\n  tokenIn,\n  tokenOut,\n}: OwnProps) {\n  const {\n    cancelSwap,\n    setSwapCexAddress,\n    showNotification,\n    setSwapScreen,\n    requestOpenQrScanner,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  // eslint-disable-next-line no-null/no-null\n  const toAddressRef = useRef<HTMLInputElement>(null);\n\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const [isAddressFocused, markAddressFocused, unmarkAddressFocused] = useFlag();\n  const [hasToAddressError, setHasToAddressError] = useState(false);\n  const [canContinue, setCanContinue] = useState(swapType !== SwapType.CrosschainFromWallet);\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const withPasteButton = shouldRenderPasteButton && toAddress === '';\n\n  const toAddressShort = toAddress.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n    ? shortenAddress(toAddress, SHORT_ADDRESS_SHIFT) || ''\n    : toAddress;\n\n  const handleCancelClick = useLastCallback(() => {\n    setHasToAddressError(false);\n    setCanContinue(false);\n    setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancelClick,\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    const el = toAddressRef.current!;\n\n    // `selectionStart` is only updated in the next frame after `focus` event\n    requestAnimationFrame(() => {\n      const caretPosition = el.selectionStart!;\n      markAddressFocused();\n\n      // Restore caret position after input field value has been focused and expanded\n      requestAnimationFrame(() => {\n        const newCaretPosition = caretPosition <= SHORT_ADDRESS_SHIFT + 3\n          ? caretPosition\n          : Math.max(0, el.value.length - (toAddressShort.length - caretPosition));\n\n        el.setSelectionRange(newCaretPosition, newCaretPosition);\n        if (newCaretPosition > SHORT_ADDRESS_SHIFT * 2) {\n          el.scrollLeft = el.scrollWidth - el.clientWidth;\n        }\n      });\n    });\n  });\n\n  const validateToAddress = useLastCallback(async (address: string) => {\n    if (!address.length) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    const response = await callApi('swapCexValidateAddress', {\n      slug: tokenOut?.slug!,\n      address,\n    });\n\n    if (!response) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    setHasToAddressError(!response.result);\n    setCanContinue(response.result);\n  });\n\n  const handleAddressBlur = useLastCallback(() => {\n    unmarkAddressFocused();\n  });\n\n  const handleAddressInput = useLastCallback((newToAddress: string) => {\n    setSwapCexAddress({ toAddress: newToAddress.trim() });\n  });\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        setSwapCexAddress({ toAddress: text.trim() });\n        await validateToAddress(text.trim());\n      }\n    } catch (error) {\n      showNotification({\n        message: lang('Error reading clipboard'),\n      });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  useEffect(() => {\n    void validateToAddress(toAddress);\n  }, [toAddress, validateToAddress]);\n\n  const submitPassword = useLastCallback(() => {\n    void vibrate();\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    requestOpenQrScanner();\n    cancelSwap();\n  });\n\n  function renderInfo() {\n    const text = hasToAddressError\n      ? lang('Incorrect address.')\n      : lang('Please provide an address of your wallet in %blockchain% blockchain to receive bought tokens.', {\n        blockchain: getChainNetworkName(tokenOut?.chain),\n      });\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={hasToAddressError ? 0 : 1}\n        slideClassName={styles.blockchainHintWrapper}\n      >\n        <span className={buildClassName(\n          styles.blockchainHintText,\n          hasToAddressError && styles.blockchainHintTextError,\n        )}\n        >\n          {text}\n        </span>\n      </Transition>\n    );\n  }\n\n  function renderInputAddress() {\n    if (swapType !== SwapType.CrosschainFromWallet) return undefined;\n\n    return (\n      <>\n        <div className={styles.inputAddress}>\n          <Input\n            ref={toAddressRef}\n            isRequired\n            placeholder={lang('Your address on another blockchain')}\n            value={isAddressFocused ? toAddress : toAddressShort}\n            onInput={handleAddressInput}\n            onFocus={handleAddressFocus}\n            onBlur={handleAddressBlur}\n            wrapperClassName={styles.inputAddressWrapper}\n          >\n            {isQrScannerSupported && (\n              <Button\n                isSimple\n                className={buildClassName(styles.inputButton, withPasteButton && styles.inputButtonShifted)}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </Input>\n        </div>\n        {renderInfo()}\n      </>\n    );\n  }\n\n  const title = (lang('$swap_from_to', {\n    from: tokenIn?.symbol,\n    icon: <i className={buildClassName('icon-chevron-right', styles.swapArrowIcon)} aria-hidden />,\n    to: tokenOut?.symbol,\n  }) as TeactNode[]);\n\n  return (\n    <>\n      <ModalHeader title={title} onClose={cancelSwap} />\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n          previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n        />\n\n        {renderInputAddress()}\n\n        <div className={buildClassName(styles.blockchainButtons, modalStyles.footerButtons)}>\n          <Button onClick={handleCancelClick} className={modalStyles.buttonHalfWidth}>{lang('Close')}</Button>\n          <Button\n            isPrimary\n            isDisabled={!canContinue}\n            className={modalStyles.buttonHalfWidth}\n            onClick={submitPassword}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapBlockchain);\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"TY_nyPoa\",\"buttons\":\"JuY14PzG\",\"button\":\"e8xjMuq6\",\"changellyInfoBlock\":\"n91WXWIY\",\"changellyDescription\":\"nOPyXt4f\",\"changellyDescriptionBold\":\"bTumpDcM\",\"changellyTextField\":\"qcMvwyr2\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { Account, UserSwapToken } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport { selectCurrentAccount } from '../../global/selectors';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport SwapTokensInfo from './SwapTokensInfo';\n\nimport styles from './SwapResult.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  playAnimation?: boolean;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n  isFirstButtonDisabled?: boolean;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  isSensitiveDataHidden?: true;\n}\n\nfunction SwapResult({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  playAnimation,\n  firstButtonText,\n  secondButtonText,\n  swapType,\n  toAddress = '',\n  addressByChain,\n  isSensitiveDataHidden,\n  onFirstButtonClick,\n  onSecondButtonClick,\n  isFirstButtonDisabled,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress, addressByChain,\n  });\n  const isToAddressInCurrentWallet = useMemo(() => {\n    return Boolean(toAddress && Object.values(addressByChain ?? {}).some((address) => address === toAddress));\n  }, [addressByChain, toAddress]);\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button\n            className={styles.button}\n            onClick={onFirstButtonClick}\n            isDisabled={isFirstButtonDisabled}\n          >\n            {firstButtonText}\n          </Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  function renderSticker() {\n    if (swapType === SwapType.CrosschainFromWallet && !isInternalSwap) return undefined;\n\n    return (\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n    );\n  }\n\n  function renderTimeWarning() {\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (swapType !== SwapType.CrosschainFromWallet || isToAddressInCurrentWallet) {\n      return undefined;\n    }\n    const chain = getIsSupportedChain(tokenOut?.chain) ? tokenOut.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {\n            lang('$swap_changelly_from_ton_description', {\n              blockchain: (\n                <span className={styles.changellyDescriptionBold}>\n                  {getChainNetworkName(tokenOut?.chain)}\n                </span>\n              ),\n            })\n          }\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={toAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {renderSticker()}\n\n      <SwapTokensInfo\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        tokenIn={tokenIn}\n        amountIn={amountIn}\n        tokenOut={tokenOut}\n        amountOut={amountOut}\n      />\n\n      {swapType !== SwapType.OnChain && renderTimeWarning()}\n      {renderChangellyInfo()}\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    addressByChain: selectCurrentAccount(global)?.addressByChain,\n    isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n  };\n})(SwapResult));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { SwapType, UserSwapToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SwapResult from '../common/SwapResult';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onInfoClick: NoneToVoidFunction;\n  onStartSwap: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n  isDetailsDisabled?: boolean;\n}\n\nfunction SwapComplete({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  toAddress,\n  onInfoClick,\n  onStartSwap,\n  onClose,\n  isDetailsDisabled,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang('Swap Placed')} onClose={onClose} />\n\n      <div className={buildClassName(styles.scrollContent, 'custom-scroll')}>\n        <SwapResult\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n          swapType={swapType}\n          toAddress={toAddress}\n          playAnimation={isActive}\n          firstButtonText={lang('Details')}\n          secondButtonText={lang('Repeat')}\n          onFirstButtonClick={onInfoClick}\n          onSecondButtonClick={onStartSwap}\n          isFirstButtonDisabled={isDetailsDisabled}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapComplete);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n}\n\nfunction SwapPassword({\n  isActive,\n  isLoading,\n  error,\n  children,\n  onSubmit,\n  onBack,\n}: OwnProps) {\n  const { cancelSwap, clearSwapError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Swap')} onClose={cancelSwap} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={IS_CAPACITOR}\n        error={error}\n        operationType=\"swap\"\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={clearSwapError}\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(SwapPassword);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, UserSwapToken } from '../../global/types';\n\nimport {\n  CHANGELLY_LIVE_CHAT_URL, CHANGELLY_SUPPORT_EMAIL, CHANGELLY_WAITING_DEADLINE,\n} from '../../config';\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrCode from '../../hooks/useQrCode';\n\nimport Countdown from '../common/Countdown';\nimport SwapTokensInfo from '../common/SwapTokensInfo';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  payinAddress?: string;\n  payoutAddress?: string;\n  payinExtraId?: string;\n  activity?: ApiActivity;\n  addressByChain?: Account['addressByChain'];\n  onClose: NoneToVoidFunction;\n}\n\nfunction SwapWaitTokens({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  payinAddress,\n  payoutAddress,\n  payinExtraId,\n  activity,\n  addressByChain,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isExpired, setIsExpired] = useState(false);\n\n  const timestamp = useMemo(() => Date.now(), []);\n\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const shouldShowQrCode = !payinExtraId;\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress: payoutAddress, addressByChain,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const handleTimeout = useLastCallback(() => {\n    setIsExpired(true);\n  });\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          chain=\"ton\"\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderInfo() {\n    if (isExpired) {\n      const cexTransactionId = activity && 'cex' in activity ? activity.cex?.transactionId : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyImportantRed}>\n            {lang('The time for sending coins is over.')}\n          </span>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_support', {\n              livechat: (\n                <a\n                  href={CHANGELLY_LIVE_CHAT_URL}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  className={styles.changellyDescriptionBold}\n                >\n                  {lang('Changelly Live Chat')}\n                </a>),\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SUPPORT_EMAIL}\n                </span>),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n              className={styles.changellyTextField}\n            />\n          )}\n        </div>\n      );\n    }\n\n    if (isInternalSwap) {\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyDescription}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        </div>\n      );\n    }\n\n    const chain = getIsSupportedChain(tokenIn?.chain) ? tokenIn.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n          value: (\n            <span className={styles.changellyDescriptionBold}>\n              {formatCurrencyExtended(Number(amountIn), tokenIn?.symbol ?? '', true)}\n            </span>\n          ),\n          blockchain: (\n            <span className={styles.changellyDescriptionBold}>\n              {getChainNetworkName(tokenIn?.chain)}\n            </span>\n          ),\n          time: <Countdown\n            timestamp={timestamp}\n            deadline={CHANGELLY_WAITING_DEADLINE}\n            onCompleted={handleTimeout}\n          />,\n        })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          noDimming\n          className={styles.changellyTextField}\n        />\n        {renderMemo()}\n        {shouldShowQrCode && (\n          <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n        )}\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <ModalHeader\n        title={lang(isExpired ? 'Swap Expired' : (isInternalSwap ? 'Swapping' : 'Waiting for Payment'))}\n        onClose={onClose}\n      />\n\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <SwapTokensInfo\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n        />\n\n        <Transition\n          name=\"fade\"\n          activeKey={isExpired ? 1 : 0}\n        >\n          {renderInfo()}\n        </Transition>\n\n        <div className={modalStyles.buttons}>\n          <Button isPrimary onClick={onClose}>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapWaitTokens);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, GlobalState, UserSwapToken, UserToken } from '../../global/types';\nimport { SwapState, SwapType } from '../../global/types';\n\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TokenSelector from '../common/TokenSelector';\nimport TransactionBanner from '../common/TransactionBanner';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport SwapBlockchain from './SwapBlockchain';\nimport SwapComplete from './SwapComplete';\nimport SwapInitial from './SwapInitial';\nimport SwapPassword from './SwapPassword';\nimport SwapWaitTokens from './SwapWaitTokens';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n  swapType: SwapType;\n  swapTokens?: UserSwapToken[];\n  activityById?: Record<string, ApiActivity>;\n  addressByChain?: Account['addressByChain'];\n}\n\nconst FULL_SIZE_NBS_STATES = [SwapState.Password, SwapState.SelectTokenFrom, SwapState.SelectTokenTo];\n\nfunction SwapModal({\n  currentSwap: {\n    state,\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn = '0',\n    amountOut = '0',\n    isLoading,\n    error,\n    activityId,\n    toAddress,\n    payinAddress,\n    payoutAddress,\n    payinExtraId,\n    shouldResetOnClose,\n  },\n  swapType,\n  swapTokens,\n  activityById,\n  addressByChain,\n}: StateProps) {\n  const {\n    startSwap,\n    cancelSwap,\n    setSwapScreen,\n    submitSwap,\n    showActivityInfo,\n    submitSwapCex,\n    addSwapToken,\n    setSwapTokenIn,\n    setSwapTokenOut,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const isOpen = state !== SwapState.None;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const tokenIn = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenInSlug),\n    [tokenInSlug, swapTokens],\n  );\n\n  const tokenOut = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenOutSlug),\n    [swapTokens, tokenOutSlug],\n  );\n\n  const [renderedSwapType, setRenderedSwapType] = useState(swapType);\n  const [renderedTransactionAmountIn, setRenderedTransactionAmountIn] = useState(amountIn);\n  const [renderedTransactionAmountOut, setRenderedTransactionAmountOut] = useState(amountOut);\n  const [renderedTransactionTokenIn, setRenderedTransactionTokenIn] = useState(tokenIn);\n  const [renderedTransactionTokenOut, setRenderedTransactionTokenOut] = useState(tokenOut);\n  const [renderedActivity, setRenderedActivity] = useState<ApiActivity | undefined>();\n\n  useEffect(() => {\n    if (!isOpen || !activityId || !activityById?.[activityId]) {\n      setRenderedActivity(undefined);\n      return;\n    }\n\n    const activity = activityById[activityId];\n    setRenderedActivity(activity);\n\n    if (activity.kind === 'swap' && swapType === SwapType.CrosschainToWallet) {\n      const status = activity.cex?.status;\n      if (status === 'exchanging' || status === 'confirming') {\n        setSwapScreen({ state: SwapState.Complete });\n      }\n    }\n  }, [activityById, activityId, isOpen, swapType]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedTransactionAmountIn(amountIn);\n    setRenderedTransactionAmountOut(amountOut);\n    setRenderedTransactionTokenIn(tokenIn);\n    setRenderedTransactionTokenOut(tokenOut);\n    setRenderedSwapType(swapType);\n\n    if (swapType === SwapType.OnChain) {\n      submitSwap({ password });\n      return;\n    }\n\n    submitSwapCex({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === SwapState.Password) {\n      if (swapType === SwapType.CrosschainFromWallet) {\n        setSwapScreen({ state: SwapState.Blockchain });\n      } else {\n        setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n      }\n      return;\n    }\n\n    if (state === SwapState.SelectTokenTo || state === SwapState.SelectTokenFrom) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n\n    if (state === SwapState.Blockchain) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    if (!activityId) return;\n\n    cancelSwap({ shouldReset: true });\n    showActivityInfo({ id: activityId });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelSwap({ shouldReset: isPortrait || shouldResetOnClose });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelSwap({ shouldReset: true });\n  });\n\n  const handleTokenSelect = useLastCallback((token: UserSwapToken | UserToken) => {\n    addSwapToken({ token: token as UserSwapToken });\n    const setToken = renderingKey === SwapState.SelectTokenTo ? setSwapTokenOut : setSwapTokenIn;\n    setToken({ tokenSlug: token.slug });\n  });\n\n  const handleStartSwap = useLastCallback(() => {\n    startSwap({\n      amountIn: renderedTransactionAmountIn,\n      tokenInSlug: renderedTransactionTokenIn?.slug,\n      tokenOutSlug: renderedTransactionTokenOut?.slug,\n    });\n  });\n\n  function renderSwapShortInfo() {\n    if (!tokenIn || !tokenOut || !amountIn || !amountOut) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={tokenIn}\n        withChainIcon\n        tokenOut={tokenOut}\n        text={formatCurrencyExtended(amountIn, tokenIn.symbol ?? '', true)}\n        secondText={formatCurrencyExtended(amountOut, tokenOut.symbol ?? '', true)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SwapState.Initial:\n        return (\n          <>\n            <ModalHeader\n              title={lang('SwapTitle')}\n              onClose={cancelSwap}\n            />\n            <SwapInitial isActive={isActive} />\n          </>\n        );\n      case SwapState.Blockchain:\n        return (\n          <SwapBlockchain\n            isActive={isActive}\n            toAddress={toAddress}\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            swapType={swapType}\n          />\n        );\n      case SwapState.WaitTokens:\n        return (\n          <SwapWaitTokens\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            payinAddress={payinAddress}\n            payoutAddress={payoutAddress}\n            payinExtraId={payinExtraId}\n            addressByChain={addressByChain}\n            activity={renderedActivity}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case SwapState.Password:\n        return (\n          <SwapPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onBack={handleBackClick}\n          >\n            {renderSwapShortInfo()}\n          </SwapPassword>\n        );\n      case SwapState.Complete: {\n        return (\n          <SwapComplete\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            swapType={renderedSwapType}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n            onInfoClick={handleTransactionInfoClick}\n            onStartSwap={handleStartSwap}\n            isDetailsDisabled={!activityId}\n          />\n        );\n      }\n      case SwapState.SelectTokenFrom:\n      case SwapState.SelectTokenTo:\n        return (\n          <TokenSelector\n            isActive={isActive}\n            shouldUseSwapTokens\n            shouldFilter={currentKey === SwapState.SelectTokenTo}\n            onTokenSelect={handleTokenSelect}\n            onBack={handleBackClick}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  const forceFullNative = FULL_SIZE_NBS_STATES.includes(renderingKey)\n    // Crosschain exchanges have additional information that may cause the height of the modal to be insufficient\n    || (renderingKey === SwapState.Complete && renderedSwapType !== SwapType.OnChain);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={cancelSwap}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"swap\"\n      forceFullNative={forceFullNative}\n      hasCloseButton\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const account = selectCurrentAccount(global);\n  const activityById = accountState?.activities?.byId;\n\n  return {\n    currentSwap: global.currentSwap,\n    swapType: selectSwapType(global),\n    swapTokens: selectSwapTokens(global),\n    activityById,\n    addressByChain: account?.addressByChain,\n  };\n})(SwapModal));\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TransferResult from '../common/TransferResult';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport styles from '../common/TransferResult.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  amount?: bigint;\n  symbol: string;\n  txId?: string;\n  tokenSlug: string;\n  toAddress?: string;\n  comment?: string;\n  decimals?: number;\n  nfts?: ApiNft[];\n  onInfoClick: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferComplete({\n  isActive,\n  amount,\n  symbol,\n  txId,\n  tokenSlug,\n  toAddress,\n  comment,\n  decimals,\n  nfts,\n  onInfoClick,\n  onClose,\n}: OwnProps) {\n  const { startTransfer } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isNftTransfer = Boolean(nfts?.length);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    return isActive\n      ? captureKeyboardListeners({ onEnter: onClose })\n      : undefined;\n  }, [isActive, onClose]);\n\n  const handleTransactionRepeatClick = useLastCallback(() => {\n    startTransfer({\n      isPortrait,\n      tokenSlug,\n      toAddress,\n      amount,\n      comment,\n    });\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang(isNftTransfer ? 'NFT has been sent!' : 'Coins have been sent!')} onClose={onClose} />\n\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? (\n          <>\n            <AnimatedIconWithPreview\n              play={isActive}\n              noLoop={false}\n              nonInteractive\n              className={styles.sticker}\n              tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n              previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n            />\n            {nfts!.length === 1 ? <NftInfo nft={nfts![0]} /> : <NftChips nfts={nfts!} />}\n            {Boolean(txId) && (\n              <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n                <Button className={styles.button} onClick={onInfoClick}>{lang('Details')}</Button>\n              </div>\n            )}\n          </>\n        ) : (\n          <TransferResult\n            playAnimation={isActive}\n            amount={amount ? -amount : undefined}\n            tokenSymbol={symbol}\n            firstButtonText={txId ? lang('Details') : undefined}\n            secondButtonText={lang('Repeat')}\n            onFirstButtonClick={onInfoClick}\n            onSecondButtonClick={handleTransactionRepeatClick}\n            decimals={decimals}\n          />\n        )}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferComplete);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './AmountWithFeeTextField.module.scss';\n\ninterface OwnProps {\n  amount: string;\n  label: string;\n  currency?: string;\n  symbol?: string;\n  feeText?: TeactNode;\n  className?: string;\n  labelClassName?: string;\n}\n\nfunction AmountWithFeeTextField({\n  amount,\n  label,\n  currency = '',\n  symbol,\n  feeText,\n  className,\n  labelClassName,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <div className={buildClassName(styles.label, labelClassName)}>{label}</div>\n      <div className={buildClassName(styles.root, className)}>\n        {formatCurrencyExtended(amount, currency, true)}\n        {symbol && <span className={styles.suffix}>{symbol}</span>}\n        {Boolean(feeText) && (\n          <>\n            <div className={styles.feeLabel}>{lang('Fee')}</div>\n            <span className={styles.feeConfirm}>\n              {feeText}\n            </span>\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AmountWithFeeTextField);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ghrNkOZk\",\"suffix\":\"LPchTYAT\",\"label\":\"vEby849g\",\"feeLabel\":\"XPUDvAqg\",\"feeConfirm\":\"SkacqSTU\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiToken } from '../../api/types';\nimport type { GlobalState, SavedAddress, UserToken } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  BURN_ADDRESS,\n  BURN_CHUNK_DURATION_APPROX_SEC,\n  NFT_BATCH_SIZE,\n  NOTCOIN_EXCHANGERS,\n  STARS_SYMBOL,\n  TONCOIN,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { explainApiTransferFee } from '../../util/fee/transferFee';\nimport { vibrate } from '../../util/haptics';\nimport { getChainBySlug } from '../../util/tokens';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AmountWithFeeTextField from '../ui/AmountWithFeeTextField';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  savedAddresses?: SavedAddress[];\n  token?: UserToken | ApiToken;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  currentTransfer: GlobalState['currentTransfer'];\n}\n\nfunction TransferConfirm({\n  currentTransfer: {\n    tokenSlug,\n    amount,\n    toAddress,\n    resolvedAddress,\n    fee,\n    realFee,\n    comment,\n    shouldEncrypt,\n    promiseId,\n    isLoading,\n    toAddressName,\n    isToNewAddress,\n    isScam,\n    binPayload,\n    nfts,\n    isGaslessWithStars,\n    diesel,\n    stateInit,\n  },\n  token,\n  isActive,\n  savedAddresses,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const { submitTransferConfirm } = getActions();\n\n  const lang = useLang();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    tokenSlug = TONCOIN.slug;\n  }\n\n  const chain = getChainBySlug(tokenSlug);\n  const savedAddressName = useMemo(() => {\n    return toAddress && savedAddresses?.find((item) => {\n      return item.address === toAddress && item.chain === chain;\n    })?.name;\n  }, [toAddress, chain, savedAddresses]);\n  const addressName = savedAddressName || toAddressName;\n  const isBurning = resolvedAddress === BURN_ADDRESS;\n  const isNotcoinBurning = resolvedAddress === NOTCOIN_EXCHANGERS[0];\n  const explainedFee = explainApiTransferFee({\n    fee,\n    realFee,\n    diesel,\n    tokenSlug,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  const handleConfirm = useLastCallback(() => {\n    void vibrate();\n    submitTransferConfirm();\n  });\n\n  function renderNfts() {\n    if (nfts!.length === 1) {\n      return <NftInfo nft={nfts![0]} withMediaViewer />;\n    }\n\n    return <NftChips nfts={nfts!} />;\n  }\n\n  function renderFee() {\n    if (!explainedFee.realFee || !token) {\n      return undefined;\n    }\n\n    const feeText = (\n      <Fee\n        terms={explainedFee.realFee.terms}\n        precision={explainedFee.realFee.precision}\n        token={token}\n        symbolClassName={styles.currencySymbol}\n      />\n    );\n\n    return isNftTransfer ? (\n      <>\n        <div className={styles.label}>{lang('Fee')}</div>\n        <div className={styles.inputReadOnly}>{feeText}</div>\n      </>\n    ) : (\n      <AmountWithFeeTextField\n        label={lang('Amount')}\n        amount={toDecimal(amount ?? 0n, token?.decimals)}\n        symbol={token?.symbol ?? ''}\n        feeText={feeText}\n      />\n    );\n  }\n\n  function renderComment() {\n    if (binPayload || stateInit) {\n      return (\n        <>\n          {binPayload && (\n            <>\n              <div className={styles.label}>{lang('Signing Data')}</div>\n              <InteractiveTextField\n                text={binPayload}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          {stateInit && (\n            <>\n              <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n              <InteractiveTextField\n                text={stateInit}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n        </>\n      );\n    }\n\n    if (!comment) {\n      return undefined;\n    }\n\n    return (\n      <>\n        <div className={styles.label}>{shouldEncrypt ? lang('Encrypted Message') : lang('Comment or Memo')}</div>\n        <div className={buildClassName(styles.inputReadOnly, styles.inputReadOnly_words, styles.commentInputWrapper)}>\n          {comment}\n        </div>\n      </>\n    );\n  }\n\n  const burningDurationMin = nfts?.length\n    ? (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60\n    : undefined;\n\n  const submitBtnText = lang(\n    (isBurning || isNotcoinBurning)\n      ? 'Burn NFT'\n      : isGaslessWithStars\n        ? 'Pay fee with %stars_symbol%'\n        : 'Confirm',\n    isGaslessWithStars ? { stars_symbol: STARS_SYMBOL } : undefined,\n  );\n\n  return (\n    <>\n      <ModalHeader title={lang('Is it all ok?')} onClose={onClose} />\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? renderNfts() : (\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_SMALL_SIZE_PX}\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={buildClassName(styles.sticker, styles.sticker_sizeSmall)}\n            tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n            previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          />\n        )}\n        <div className={styles.label}>\n          {lang('Receiving Address')}\n          {isToNewAddress && (\n            <IconWithTooltip\n              emoji=\"\"\n              message={lang('This address is new and never received transfers before.')}\n              tooltipClassName={styles.warningTooltipContainer}\n            />\n          )}\n        </div>\n        <InteractiveTextField\n          chain={chain}\n          address={resolvedAddress!}\n          addressName={addressName}\n          isScam={isScam}\n          copyNotification={lang('Address was copied!')}\n          className={styles.addressWidget}\n        />\n\n        {renderFee()}\n        {renderComment()}\n\n        {nfts && (isBurning || (isNotcoinBurning && nfts?.length > 1)) && (\n          <div className={styles.burnWarning}>\n            {(\n              nfts?.length === 1 ? (\n                renderText(lang('Are you sure you want to burn this NFT? It will be lost forever.'))\n              ) : ([\n                renderText(lang('$multi_burn_nft_warning', { amount: nfts.length })),\n                ' ',\n                renderText(lang('$multi_send_nft_warning', { duration: burningDurationMin })),\n              ])\n            )}\n          </div>\n        )}\n\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsInsideContentWithScroll)}>\n          <Button className={modalStyles.button} onClick={promiseId ? onClose : onBack}>\n            {promiseId ? lang('Cancel') : lang('Edit')}\n          </Button>\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDestructive={isBurning || isScam}\n            className={modalStyles.button}\n            onClick={handleConfirm}\n          >\n            {submitBtnText}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    currentTransfer: global.currentTransfer,\n  };\n})(TransferConfirm));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\n\nimport {\n  BURN_ADDRESS, BURN_CHUNK_DURATION_APPROX_SEC, NFT_BATCH_SIZE, NOTCOIN_EXCHANGERS,\n} from '../../config';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Spinner from '../ui/Spinner';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  nfts: ApiNft[];\n  sentNftsCount?: number;\n  toAddress?: string;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferMultiNftProcess({\n  nfts,\n  sentNftsCount = 0,\n  toAddress,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isInProgress = sentNftsCount < nfts.length;\n  const isBurning = toAddress === BURN_ADDRESS;\n  const isNotcoinBurning = toAddress === NOTCOIN_EXCHANGERS[0];\n\n  const title = isInProgress ? lang(\n    `${(isBurning || isNotcoinBurning) ? 'Burning' : 'Sending'}: %n% of %m% NFTs...`,\n    { n: sentNftsCount, m: nfts.length },\n  ) : lang('Sent');\n  const duration = (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60;\n\n  return (\n    <>\n      <ModalHeader title={title} />\n\n      <div className={modalStyles.transitionContent}>\n        {isInProgress && (\n          <>\n            <Spinner className={styles.spinner} />\n            <div className={styles.infoBox}>{lang('$multi_send_nft_warning', { duration })}</div>\n          </>\n        )}\n        {nfts!.length === 1 ? <NftInfo nft={nfts![0]} /> : <NftChips nfts={nfts!} />}\n        {!isInProgress && (\n          <div className={modalStyles.buttons}>\n            <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferMultiNftProcess);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { STARS_SYMBOL } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  isBurning?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  isGaslessWithStars?: boolean;\n}\n\nfunction TransferPassword({\n  isActive, isLoading, isBurning, error, children, onSubmit, onCancel, isGaslessWithStars,\n}: OwnProps) {\n  const {\n    cancelTransfer,\n    clearTransferError,\n  } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  const title = isBurning ? 'Confirm Burning' : 'Confirm Sending';\n  const submitLabel = isGaslessWithStars\n    ? lang('Pay fee with %stars_symbol%', { stars_symbol: STARS_SYMBOL })\n    : lang('Send');\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang(title)} onClose={cancelTransfer} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={Boolean(children)}\n        operationType=\"transfer\"\n        error={error}\n        submitLabel={submitLabel}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearTransferError}\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(TransferPassword);\n","import React, {\n  memo, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  GlobalState, HardwareConnectState, SavedAddress, UserToken,\n} from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { BURN_ADDRESS, NFT_BATCH_SIZE } from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious from '../../hooks/usePrevious';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport TransferComplete from './TransferComplete';\nimport TransferConfirm from './TransferConfirm';\nimport TransferInitial from './TransferInitial';\nimport TransferMultiNftProcess from './TransferMultiNftProcess';\nimport TransferPassword from './TransferPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface StateProps {\n  currentTransfer: GlobalState['currentTransfer'];\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isMediaViewerOpen?: boolean;\n  isMultichainAccount: boolean;\n}\n\nconst SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS = 762; // Computed empirically\n\nfunction TransferModal({\n  currentTransfer: {\n    state,\n    amount,\n    toAddress,\n    comment,\n    error,\n    isLoading,\n    txId,\n    tokenSlug,\n    nfts,\n    sentNftsCount,\n    diesel,\n  },\n  tokens, savedAddresses, hardwareState, isLedgerConnected, isTonAppConnected, isMediaViewerOpen, isMultichainAccount,\n}: StateProps) {\n  const {\n    submitTransferConfirm,\n    submitTransferPassword,\n    submitTransferHardware,\n    setTransferScreen,\n    cancelTransfer,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = state !== TransferState.None;\n\n  const { screenHeight } = useWindowSize();\n  const selectedToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const decimals = selectedToken?.decimals;\n  const renderedTransactionAmount = usePrevious(amount, true);\n  const symbol = selectedToken?.symbol || '';\n  const isNftTransfer = Boolean(nfts?.length);\n  const isBurning = toAddress === BURN_ADDRESS;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  useEffect(() => (\n    state === TransferState.Confirm\n      ? captureKeyboardListeners({ onEnter: () => submitTransferConfirm() })\n      : undefined\n  ), [state, submitTransferConfirm]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    submitTransferPassword({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm) {\n      setTransferScreen({ state: TransferState.Initial });\n    }\n    if (state === TransferState.Password) {\n      setTransferScreen({ state: TransferState.Confirm });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n    showActivityInfo({ id: txId! });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelTransfer({ shouldReset: isPortrait });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitTransferHardware();\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return (\n          <>\n            <ModalHeader title={lang(isNftTransfer ? 'Send NFT' : 'Send')} onClose={handleModalCloseWithReset} />\n            <TransferInitial />\n          </>\n        );\n      case TransferState.Confirm:\n        return (\n          <TransferConfirm\n            isActive={isActive}\n            token={selectedToken}\n            savedAddresses={savedAddresses}\n            onBack={isPortrait ? handleBackClick : handleModalClose}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.Password:\n        return (\n          <TransferPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            isBurning={isBurning}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onCancel={handleModalCloseWithReset}\n            isGaslessWithStars={diesel?.status === 'stars-fee'}\n          >\n            <TransactionBanner\n              tokenIn={selectedToken}\n              imageUrl={nfts?.[0]?.thumbnail}\n              withChainIcon={isMultichainAccount}\n              text={isNftTransfer\n                ? (nfts!.length > 1 ? lang('%amount% NFTs', { amount: nfts!.length }) : nfts![0]?.name || 'NFT')\n                : formatCurrency(toDecimal(amount!, decimals), symbol)}\n              className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n              secondText={shortenAddress(toAddress!)}\n            />\n          </TransferPassword>\n        );\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleLedgerConnect}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={handleModalCloseWithReset}\n            onTryAgain={submitTransferHardware}\n          />\n        );\n      case TransferState.Complete:\n        return (nfts?.length || 0) <= NFT_BATCH_SIZE ? (\n          <TransferComplete\n            isActive={isActive}\n            nfts={nfts}\n            amount={renderedTransactionAmount}\n            symbol={symbol}\n            txId={txId}\n            tokenSlug={tokenSlug}\n            toAddress={toAddress}\n            comment={comment}\n            onInfoClick={handleTransactionInfoClick}\n            onClose={handleModalCloseWithReset}\n            decimals={decimals}\n          />\n        ) : (\n          <TransferMultiNftProcess\n            nfts={nfts!}\n            sentNftsCount={sentNftsCount}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"transfer\"\n      forceFullNative={screenHeight <= SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS || renderingKey === TransferState.Password}\n      onClose={handleModalCloseWithReset}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    currentTransfer: global.currentTransfer,\n    tokens: selectCurrentAccountTokens(global),\n    savedAddresses: accountState?.savedAddresses,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(TransferModal));\n","import React, { memo, useRef } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport styles from './ConfettiContainer.module.scss';\n\ntype StateProps = {\n  lastRequestedAt?: number;\n};\n\ninterface Confetti {\n  pos: {\n    x: number;\n    y: number;\n  };\n  velocity: {\n    x: number;\n    y: number;\n  };\n  size: number;\n  color: string;\n  flicker: number;\n  flickerFrequency: number;\n  rotation: number;\n  lastDrawnAt: number;\n  frameCount: number;\n}\n\nconst CONFETTI_FADEOUT_TIMEOUT = 10000;\nconst DEFAULT_CONFETTI_SIZE = 10;\nconst CONFETTI_COLORS = ['#E8BC2C', '#D0049E', '#02CBFE', '#5723FD', '#FE8C27', '#6CB859'];\n\nfunction ConfettiContainer({ lastRequestedAt }: StateProps) {\n  // eslint-disable-next-line no-null/no-null\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const confettiRef = useRef<Confetti[]>([]);\n  const isRafStartedRef = useRef(false);\n  const windowSize = useWindowSize();\n  const forceUpdate = useForceUpdate();\n  const { isPortrait } = useDeviceScreen();\n\n  const defaultConfettiAmount = isPortrait ? 50 : 100;\n\n  const invokeGenerateConfetti = useLastCallback((w: number, h: number) => {\n    generateConfetti(confettiRef, w, h, defaultConfettiAmount);\n  });\n\n  const updateCanvas = useLastCallback(() => {\n    if (!canvasRef.current || !isRafStartedRef.current) {\n      return;\n    }\n    const canvas = canvasRef.current;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      return;\n    }\n\n    const { width: canvasWidth, height: canvasHeight } = canvas;\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    const confettiToRemove: Set<Confetti> = new Set([]);\n    confettiRef.current.forEach((c, i) => {\n      const {\n        pos,\n        velocity,\n        size,\n        color,\n        flicker,\n        flickerFrequency,\n        rotation,\n        lastDrawnAt,\n        frameCount,\n      } = c;\n      const diff = (Date.now() - lastDrawnAt) / 1000;\n\n      const newPos = {\n        x: pos.x + velocity.x * diff,\n        y: pos.y + velocity.y * diff,\n      };\n\n      const newVelocity = {\n        x: velocity.x * 0.98, // Air Resistance\n        y: velocity.y += diff * 1000, // Gravity\n      };\n\n      const newFlicker = size * Math.abs(Math.sin(frameCount * flickerFrequency));\n      const newRotation = 5 * frameCount * flickerFrequency * (Math.PI / 180);\n\n      const newFrameCount = frameCount + 1;\n      const newLastDrawnAt = Date.now();\n\n      const shouldRemove = newPos.y > canvasHeight + c.size;\n      if (shouldRemove) {\n        confettiToRemove.add(c);\n        return;\n      }\n\n      confettiRef.current[i] = {\n        ...c,\n        pos: newPos,\n        velocity: newVelocity,\n        flicker: newFlicker,\n        rotation: newRotation,\n        lastDrawnAt: newLastDrawnAt,\n        frameCount: newFrameCount,\n      };\n      ctx.fillStyle = color;\n      ctx.beginPath();\n      ctx.ellipse(\n        pos.x,\n        pos.y,\n        size,\n        flicker,\n        rotation,\n        0,\n        2 * Math.PI,\n      );\n      ctx.fill();\n    });\n\n    confettiRef.current = confettiRef.current.filter((c) => !confettiToRemove.has(c));\n    if (confettiRef.current.length) {\n      requestMeasure(updateCanvas);\n    } else {\n      isRafStartedRef.current = false;\n    }\n  });\n\n  useSyncEffect(([prevConfettiTime]) => {\n    let hideTimeout: number;\n    if (lastRequestedAt && prevConfettiTime !== lastRequestedAt) {\n      invokeGenerateConfetti(windowSize.width, windowSize.height);\n      hideTimeout = window.setTimeout(forceUpdate, CONFETTI_FADEOUT_TIMEOUT);\n\n      if (!isRafStartedRef.current) {\n        isRafStartedRef.current = true;\n        requestMeasure(updateCanvas);\n      }\n    }\n\n    return () => {\n      window.clearTimeout(hideTimeout);\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- Old timeout should be cleared only if new confetti is generated\n  }, [lastRequestedAt, forceUpdate, updateCanvas]);\n\n  if (!lastRequestedAt || Date.now() - lastRequestedAt > CONFETTI_FADEOUT_TIMEOUT) {\n    return undefined;\n  }\n  return (\n    <div id=\"Confetti\" className={styles.root}>\n      <canvas ref={canvasRef} width={windowSize.width} height={windowSize.height} />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    lastRequestedAt: global.confettiRequestedAt,\n  };\n})(ConfettiContainer));\n\nfunction generateConfetti(confettiRef: { current: Confetti[] }, width : number, height: number, amount: number) {\n  for (let i = 0; i < amount; i++) {\n    const leftSide = i % 2;\n    const pos = {\n      x: width * (leftSide ? -0.1 : 1.1),\n      y: height * 0.75,\n    };\n    const randomX = Math.random() * width * 1.5;\n    const randomY = -height / 2 - Math.random() * height;\n    const velocity = {\n      x: leftSide ? randomX : randomX * -1,\n      y: randomY,\n    };\n\n    const randomColor = CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)];\n    const size = DEFAULT_CONFETTI_SIZE;\n    confettiRef.current.push({\n      pos,\n      size,\n      color: randomColor,\n      velocity,\n      flicker: size,\n      flickerFrequency: Math.random() * 0.2,\n      rotation: 0,\n      lastDrawnAt: Date.now(),\n      frameCount: 0,\n    });\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"NEu40vNs\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TransferState } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\nimport Spinner from './Spinner';\n\nimport styles from './LoadingOverlay.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n};\n\nfunction LoadingOverlay({ isOpen }: StateProps) {\n  const { closeLoadingOverlay } = getActions();\n\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen);\n\n  if (!shouldRender) return undefined;\n\n  return (\n    <Portal>\n      <div className={buildClassName(styles.root, transitionClassNames)} onClick={() => closeLoadingOverlay()}>\n        <Spinner color=\"white\" />\n      </div>\n    </Portal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global) => {\n    const isDpppModalOpen = (\n      global.dappConnectRequest?.state !== undefined || global.currentDappTransfer.state !== TransferState.None\n    );\n\n    return {\n      isOpen: global.isLoadingOverlayOpen && !isDpppModalOpen,\n    };\n  },\n)(LoadingOverlay));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"JqqCZr7K\"};","// extracted by mini-css-extract-plugin\nexport default {\"containerInner\":\"_8bq050R\",\"appSlide\":\"xYgMXl3B\",\"appSlide_fastTransition\":\"cumlVCAy\",\"appSlideFastTransition\":\"cumlVCAy\",\"appSlideTransparent\":\"ZZvRsvlT\",\"appSlideContent\":\"BY5oYr5T\",\"transitionContainer\":\"XDsN0suQ\",\"loading\":\"VPmyx3Yj\"};","import React, { memo, useEffect, useLayoutEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\nimport { AppState } from '../global/types';\n\nimport {\n  APP_NAME,\n  INACTIVE_MARKER,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n} from '../config';\nimport { selectCurrentAccountSettings } from '../global/selectors';\nimport { useAccentColor } from '../util/accentColor';\nimport { setActiveTabChangeListener } from '../util/activeTabMonitor';\nimport buildClassName from '../util/buildClassName';\nimport { MINUTE } from '../util/dateFormat';\nimport { resolveRender } from '../util/renderPromise';\nimport {\n  IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS, IS_LINUX,\n} from '../util/windowEnvironment';\nimport { updateSizes } from '../util/windowSize';\nimport { callApi } from '../api';\n\nimport { useAppIntersectionObserver } from '../hooks/useAppIntersectionObserver';\nimport useAppTheme from '../hooks/useAppTheme';\nimport useBackgroundMode from '../hooks/useBackgroundMode';\nimport { useDeviceScreen } from '../hooks/useDeviceScreen';\nimport useFlag from '../hooks/useFlag';\nimport useInterval from '../hooks/useInterval';\nimport useSyncEffect from '../hooks/useSyncEffect';\nimport useTimeout from '../hooks/useTimeout';\n\nimport AppInactive from './AppInactive';\nimport AppLocked from './AppLocked';\nimport Auth from './auth/Auth';\nimport DappConnectModal from './dapps/DappConnectModal';\nimport DappTransferModal from './dapps/DappTransferModal';\nimport Dialogs from './Dialogs';\nimport ElectronHeader from './electron/ElectronHeader';\nimport Explore from './explore/Explore';\nimport LedgerModal from './ledger/LedgerModal';\nimport Main from './main/Main';\nimport AddAccountModal from './main/modals/AddAccountModal';\nimport BackupModal from './main/modals/BackupModal';\nimport OnRampWidgetModal from './main/modals/OnRampWidgetModal';\nimport QrScannerModal from './main/modals/QrScannerModal';\nimport SignatureModal from './main/modals/SignatureModal';\nimport SwapActivityModal from './main/modals/SwapActivityModal';\nimport TransactionModal from './main/modals/TransactionModal';\nimport UnhideNftModal from './main/modals/UnhideNftModal';\nimport Notifications from './main/Notifications';\nimport BottomBar from './main/sections/Actions/BottomBar';\nimport MediaViewer from './mediaViewer/MediaViewer';\nimport MintCardModal from './mintCard/MintCardModal';\nimport Settings from './settings/Settings';\nimport SettingsModal from './settings/SettingsModal';\nimport SwapModal from './swap/SwapModal';\nimport TransferModal from './transfer/TransferModal';\nimport ConfettiContainer from './ui/ConfettiContainer';\nimport InAppBrowser from './ui/InAppBrowser';\nimport LoadingOverlay from './ui/LoadingOverlay';\nimport Transition from './ui/Transition';\n\n// import Test from './components/test/TestNoRedundancy';\nimport styles from './App.module.scss';\n\ninterface StateProps {\n  appState: AppState;\n  accountId?: string;\n  isBackupWalletModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isExploreOpen?: boolean;\n  isFullscreen: boolean;\n  areSettingsOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n}\n\nconst APP_STATES_WITH_BOTTOM_BAR = new Set([AppState.Main, AppState.Settings, AppState.Explore]);\nconst APP_UPDATE_INTERVAL = (IS_ELECTRON && !IS_LINUX) || IS_ANDROID_DIRECT\n  ? 5 * MINUTE\n  : undefined;\nconst PRERENDER_MAIN_DELAY = 1200;\nlet mainKey = 0;\n\nconst APP_STATE_RENDER_COUNT = Object.keys(AppState).length / 2;\n\nfunction App({\n  appState,\n  accountId,\n  isBackupWalletModalOpen,\n  isHardwareModalOpen,\n  isQrScannerOpen,\n  isExploreOpen,\n  isFullscreen,\n  areSettingsOpen,\n  theme,\n  accentColorIndex,\n}: StateProps) {\n  const {\n    closeBackupWalletModal,\n    closeHardwareWalletModal,\n    closeSettings,\n    cancelCaching,\n    closeQrScanner,\n    checkAppVersion,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait;\n\n  const [isInactive, markInactive] = useFlag(false);\n  const [canPrerenderMain, prerenderMain] = useFlag();\n\n  const renderingKey = isInactive\n    ? AppState.Inactive\n    : areSettingsOpen && !areSettingsInModal\n      ? AppState.Settings\n      : isExploreOpen && isPortrait\n        ? AppState.Explore : appState;\n  const withBottomBar = isPortrait && APP_STATES_WITH_BOTTOM_BAR.has(renderingKey);\n  const transitionName = withBottomBar\n    ? 'semiFade'\n    : isPortrait\n      ? (IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade')\n      : 'semiFade';\n\n  useTimeout(\n    prerenderMain,\n    renderingKey === AppState.Auth && !canPrerenderMain ? PRERENDER_MAIN_DELAY : undefined,\n  );\n\n  useInterval(checkAppVersion, IS_CORE_WALLET ? undefined : APP_UPDATE_INTERVAL);\n\n  useEffect(() => {\n    document.documentElement.classList.toggle('with-bottombar', withBottomBar);\n  }, [withBottomBar]);\n\n  useEffect(() => {\n    updateSizes();\n    setActiveTabChangeListener(() => {\n      document.title = `${APP_NAME} ${INACTIVE_MARKER}`;\n\n      markInactive();\n      closeSettings();\n      cancelCaching();\n    });\n  }, [markInactive]);\n\n  useBackgroundMode(() => {\n    void callApi('setIsAppFocused', false);\n  }, () => {\n    void callApi('setIsAppFocused', true);\n  });\n\n  useLayoutEffect(() => {\n    document.documentElement.classList.add('is-rendered');\n    resolveRender();\n  }, []);\n  useLayoutEffect(() => {\n    document.documentElement.classList.toggle('is-fullscreen', isFullscreen);\n    requestAnimationFrame(updateSizes);\n  }, [isFullscreen]);\n\n  useSyncEffect(() => {\n    if (accountId) {\n      mainKey += 1;\n    }\n  }, [accountId]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor('body', appTheme, accentColorIndex);\n\n  useAppIntersectionObserver();\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case AppState.Auth:\n        return <Auth />;\n      case AppState.Main: {\n        const slideFullClassName = buildClassName(\n          styles.appSlide,\n          styles.appSlideContent,\n          'custom-scroll',\n          'app-slide-content',\n        );\n        return (\n          <Transition\n            name=\"semiFade\"\n            activeKey={mainKey}\n            shouldCleanup\n            nextKey={renderingKey === AppState.Auth && canPrerenderMain ? mainKey + 1 : undefined}\n            slideClassName={slideFullClassName}\n          >\n            <Main\n              key={mainKey}\n              isActive={isActive}\n            />\n          </Transition>\n        );\n      }\n      case AppState.Explore:\n        return <Explore isActive={isActive} />;\n      case AppState.Settings:\n        return <Settings isActive={isActive} />;\n      case AppState.Ledger:\n        return <LedgerModal isOpen onClose={handleCloseBrowserTab} />;\n      case AppState.Inactive:\n        return <AppInactive />;\n    }\n  }\n\n  return (\n    <>\n      {IS_ELECTRON && !IS_LINUX && <ElectronHeader withTitle />}\n\n      <Transition\n        name={transitionName}\n        activeKey={renderingKey}\n        renderCount={APP_STATE_RENDER_COUNT}\n        shouldCleanup={!withBottomBar}\n        className={styles.transitionContainer}\n        slideClassName={\n          buildClassName(styles.appSlide, withBottomBar && styles.appSlide_fastTransition, 'custom-scroll')\n        }\n      >\n        {renderContent}\n      </Transition>\n\n      {areSettingsInModal && (\n        <SettingsModal\n          isOpen={areSettingsOpen}\n          onClose={closeSettings}\n        >\n          <Settings isActive={!!areSettingsOpen} isInsideModal />\n        </SettingsModal>\n      )}\n      <AppLocked />\n      <MediaViewer />\n      {!isInactive && (\n        <>\n          <LedgerModal isOpen={isHardwareModalOpen} onClose={closeHardwareWalletModal} />\n          <BackupModal\n            isOpen={isBackupWalletModalOpen}\n            onClose={closeBackupWalletModal}\n          />\n          <TransferModal />\n          {!IS_CORE_WALLET && (\n            <>\n              <SwapModal />\n              <MintCardModal />\n            </>\n          )}\n          <SignatureModal />\n          <TransactionModal />\n          <SwapActivityModal />\n          <DappConnectModal />\n          <DappTransferModal />\n          <AddAccountModal />\n          <OnRampWidgetModal />\n          <UnhideNftModal />\n          {!IS_DELEGATED_BOTTOM_SHEET && <Notifications />}\n          {IS_CAPACITOR && (\n            <QrScannerModal\n              isOpen={isQrScannerOpen}\n              onClose={closeQrScanner}\n            />\n          )}\n          {!IS_DELEGATED_BOTTOM_SHEET && <Dialogs />}\n          {!IS_DELEGATED_BOTTOM_SHEET && <ConfettiContainer />}\n          {IS_CAPACITOR && !IS_DELEGATED_BOTTOM_SHEET && <InAppBrowser />}\n          {!IS_DELEGATED_BOTTOM_SHEET && <LoadingOverlay />}\n        </>\n      )}\n      {withBottomBar && <BottomBar />}\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    appState: global.appState,\n    accountId: global.currentAccountId,\n    isBackupWalletModalOpen: global.isBackupWalletModalOpen,\n    isHardwareModalOpen: global.isHardwareModalOpen,\n    isExploreOpen: global.isExploreOpen,\n    areSettingsOpen: global.areSettingsOpen,\n    isQrScannerOpen: global.isQrScannerOpen,\n    isFullscreen: Boolean(global.isFullscreen),\n    theme: global.settings.theme,\n    accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n  };\n})(App));\n\nasync function handleCloseBrowserTab() {\n  const tab = await chrome.tabs.getCurrent();\n  if (!tab?.id) return;\n  await chrome.tabs.remove(tab.id);\n}\n","import { ElectronEvent } from '../electron/types';\n\nimport { processDeeplink } from './deeplink';\n\nexport function initElectron() {\n  window.electron?.on(ElectronEvent.DEEPLINK, ({ url }: { url: string }) => {\n    void processDeeplink(url);\n  });\n}\n","import './global/actions';\nimport './global/init';\nimport './util/handleError';\nimport './util/bigintPatch';\n\nimport React from './lib/teact/teact';\nimport TeactDOM from './lib/teact/teact-dom';\nimport { getActions, getGlobal } from './global';\n\nimport {\n  DEBUG, IS_CAPACITOR, IS_TELEGRAM_APP, STRICTERDOM_ENABLED,\n} from './config';\nimport { requestMutation } from './lib/fasterdom/fasterdom';\nimport { enableStrict } from './lib/fasterdom/stricterdom';\nimport { betterView } from './util/betterView';\nimport { fixIosAppStorage, initCapacitor } from './util/capacitor';\nimport { initElectron } from './util/electron';\nimport { initFocusScrollController } from './util/focusScroll';\nimport { forceLoadFonts } from './util/fonts';\nimport { logSelfXssWarnings } from './util/logs';\nimport { initMultitab } from './util/multitab';\nimport { initTelegramApp } from './util/telegram';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP,\n} from './util/windowEnvironment';\n\nimport App from './components/App';\n\nimport './styles/index.scss';\n\nif (DEBUG) {\n  // eslint-disable-next-line no-console\n  console.log('>>> INIT');\n}\n\nif (STRICTERDOM_ENABLED) {\n  enableStrict();\n}\n\nif (IS_CAPACITOR) {\n  void initCapacitor();\n}\n\nif (IS_ELECTRON) {\n  void initElectron();\n}\n\nif (IS_TELEGRAM_APP) {\n  void initTelegramApp();\n}\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  initMultitab({ noPubGlobal: true });\n} else if (IS_DELEGATED_BOTTOM_SHEET) {\n  initMultitab();\n}\n\ninitFocusScrollController();\n\nvoid (async () => {\n  if (IS_IOS_APP) {\n    await fixIosAppStorage();\n  }\n\n  await window.electron?.restoreStorage();\n\n  getActions().init();\n  getActions().initApi();\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> START INITIAL RENDER');\n  }\n\n  requestMutation(() => {\n    TeactDOM.render(\n      <App />,\n      document.getElementById('root')!,\n    );\n\n    forceLoadFonts();\n    betterView();\n  });\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> FINISH INITIAL RENDER');\n  }\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn('GLOBAL STATE', getGlobal());\n  });\n\n  if (window.top === window) {\n    logSelfXssWarnings();\n  }\n})();\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\n\nexport function forceLoadFonts() {\n  const el = document.createElement('div');\n  el.textContent = '';\n  el.classList.add('visually-hidden');\n  document.body.appendChild(el);\n\n  requestMutation(() => {\n    document.body.removeChild(el);\n  });\n}\n"],"names":["leafPrototypes","getProto","inProgress","dataWebpackPrefix","CapacitorPlatforms","win","defaultPlatformMap","Map","set","name","capPlatforms","currentPlatform","platforms","addPlatform","platform","setPlatform","has","get","createCapacitorPlatforms","initPlatforms","globalThis","self","window","g","ExceptionCode","CapacitorException","Error","constructor","message","code","data","super","this","Capacitor","_a","_b","_c","_d","_e","capCustomPlatform","CapacitorCustomPlatform","cap","Plugins","getPlatform","androidBridge","webkit","messageHandlers","bridge","getPlatformId","isNativePlatform","isPluginAvailable","pluginName","plugin","registeredPlugins","getPluginHeader","PluginHeaders","find","h","registerPlugin","jsImplementations","registeredPlugin","console","warn","proxy","pluginHeader","jsImplementation","createPluginMethodWrapper","prop","remove","wrapper","args","p","async","loadPluginImplementation","then","impl","fn","bind","Unimplemented","methodHeader","methods","m","rtype","options","nativePromise","toString","callback","nativeCallback","createPluginMethod","Object","defineProperty","value","writable","configurable","addListener","removeListener","addListenerNative","eventName","call","callbackId","Promise","resolve","Proxy","_","Set","keys","convertFileSrc","filePath","handleError","err","error","pluginMethodNoop","_target","reject","Exception","DEBUG","isLoggingEnabled","isNative","createCapacitor","initCapacitorGlobal","WebPlugin","config","listeners","retainedEventArguments","windowListeners","listenerFunc","firstListener","push","windowListener","registered","addWindowListener","sendRetainedArgumentsForEvent","removeAllListeners","listener","removeWindowListener","notifyListeners","retainUntilConsumed","forEach","hasListeners","length","registerWindowListener","windowEventName","pluginEventName","handler","event","unimplemented","msg","unavailable","Unavailable","index","indexOf","splice","handle","addEventListener","removeEventListener","arg","encode","str","encodeURIComponent","replace","decodeURIComponent","escape","decode","CapacitorCookiesPluginWeb","getCookies","cookies","document","cookie","cookieMap","split","key","trim","setCookie","encodedKey","encodedValue","expires","path","domain","url","deleteCookie","clearCookies","Date","toUTCString","clearAllCookies","web","buildRequestInit","extra","output","assign","method","headers","type","originalKeys","map","k","toLocaleLowerCase","reduce","acc","normalizeHttpHeaders","body","includes","params","URLSearchParams","entries","FormData","form","append","Headers","delete","JSON","stringify","CapacitorHttpPluginWeb","request","requestInit","webFetchExtra","urlParams","shouldEncode","accumulator","entry","item","Array","isArray","slice","substr","buildUrlParams","shouldEncodeUrlParams","response","fetch","contentType","blob","responseType","ok","reader","FileReader","onload","base64String","result","onerror","readAsDataURL","readBlobAsBase64","json","text","status","post","put","patch","Directory","Encoding","ImpactStyle","NotificationType","ONE_TON","TOKEN_TRANSFER_FORWARD_AMOUNT","NFT_TRANSFER_AMOUNT","NFT_TRANSFER_FORWARD_AMOUNT","TON_GAS","stakeNominators","unstakeNominators","stakeLiquid","unstakeLiquid","stakeJettonsForward","JettonStakingGas","STAKE_JETTONS","stakeJettons","unstakeJettons","UNSTAKE_JETTONS","claimJettons","JETTON_TRANSFER","SIMPLE_UPDATE_REQUEST","changeDns","TON_GAS_REAL","STAKE_COMMENT","UNSTAKE_COMMENT","DEFAULT_DECIMALS","DEFAULT_IS_BOUNCEABLE","WALLET_IS_BOUNCEABLE","WORKCHAIN","Workchain","BaseChain","TRANSFER_TIMEOUT_SEC","W5_MAX_MESSAGES","OpCode","JettonOpCode","TeleitemOpCode","ContractType","Excesses","Ok","Wallet","Staking","JettonStakingOpCodes","GET_STATIC_DATA","REPORT_STATIC_DATA","GET_STORAGE_DATA","REPORT_STORAGE_DATA","EXCESSES","TRANSFER_JETTON","INTERNAL_TRANSFER","TRANSFER_NOTIFICATION","PROVIDE_WALLET_ADDRESS","TAKE_WALLET_ADDRESS","BURN_JETTON","ADD_REWARDS","SEND_CLAIMED_REWARDS","SEND_UNSTAKED_JETTONS","APPROVE_STAKE","CANCEL_STAKE","ADD_REWARD_JETTONS","CLAIM_COMMISSIONS","REQUEST_UPDATE_REWARDS","CLAIM_REWARDS","RECEIVE_JETTONS","UNSTAKE_REQUEST","CANCEL_UNSTAKE_REQUEST","UPDATE_REWARDS","CONFIRM_TRANSFER","DEPLOY_NEW_POOL","SEND_COMMISSIONS","SET_CODE","CHANGE_CREATION_FEE","CHANGE_CONTENT","UPDATE_CODES","MIN_RESERVE","DEPLOY_POOL","NOTIFICATION","BURN_JETTONS","CANCEL_UNSTAKE","APPROVE_TRANSFER","SAVE_UPDATED_REWARDS","MIN_EXCESS","SEND_STAKED_JETTONS","Dividers","COMMISSION_DIVIDER","REWARDS_DIVIDER","DISTRIBUTION_SPEED_DIVIDER","BigInt","DISTRIBUTED_REWARDS_DIVIDER","ApiBaseError","displayError","ApiUserRejectsError","arguments","undefined","ApiServerError","statusCode","ApiCommonError","ServerError","ApiUnsupportedVersionError","UnsupportedVersion","ApiHardwareBlindSigningNotEnabled","ApiTransactionError","HardwareBlindSigningNotEnabled","handleServerError","callbackState","createWindowProvider","worker","api","channel","target","sendToOrigin","transferables","postMessage","e","_e$error","_e$error2","logDebugError","stack","_e$reason","_e$reason2","reason","handleErrors","_message$data","onUpdate","origin","update","_api$init","promise","init","messageId","withCallback","_len","callbackArgs","_key","lastArg","obj","ArrayBuffer","ImageBitmap","arrayBuffer","isCanceled","onMessage","createPostMessageInterface","windowMethods","WINDOW_PROVIDER_CHANNEL","HEALTH_CHECK_TIMEOUT","HEALTH_CHECK_MIN_DELAY","updateCallback","connector","isInitialized","initApi","initArgs","Worker","URL","createConnector","IS_IOS","ensureWorkerPing","setTimeout","callApi","fnName","logDebugApi","callApiWithThrow","_len2","_key2","startedAt","now","isResolved","race","pause","_worker","terminate","ApiAuthError","ApiTransactionDraftError","ApiLiquidUnstakeMode","APP_ENV","process","IS_CORE_WALLET","APP_NAME","APP_VERSION","APP_ENV_MARKER","DEBUG_MORE","DEBUG_API","IS_PRODUCTION","IS_TEST","IS_EXTENSION","IS_FIREFOX_EXTENSION","IS_OPERA_EXTENSION","env","IS_PACKAGED_ELECTRON","IS_CAPACITOR","IS_ANDROID_DIRECT","IS_AIR_APP","IS_TELEGRAM_APP","ELECTRON_HOST_URL","INACTIVE_MARKER","PRODUCTION_URL","BETA_URL","APP_INSTALL_URL","APP_REPO_URL","BOT_USERNAME","STRICTERDOM_ENABLED","DEBUG_ALERT_MSG","PIN_LENGTH","NATIVE_BIOMETRICS_USERNAME","NATIVE_BIOMETRICS_SERVER","IS_BIP39_MNEMONIC_ENABLED","MNEMONIC_COUNT","MNEMONIC_COUNTS","PRIVATE_KEY_HEX_LENGTH","MNEMONIC_CHECK_COUNT","MOBILE_SCREEN_MAX_WIDTH","ANIMATION_END_DELAY","ANIMATED_STICKER_TINY_ICON_PX","ANIMATED_STICKER_ICON_PX","ANIMATED_STICKER_TINY_SIZE_PX","ANIMATED_STICKER_SMALL_SIZE_PX","ANIMATED_STICKER_MIDDLE_SIZE_PX","ANIMATED_STICKER_BIG_SIZE_PX","ANIMATED_STICKER_HUGE_SIZE_PX","DEFAULT_LANDSCAPE_ACTION_TAB_ID","TRANSACTION_ADDRESS_SHIFT","WHOLE_PART_DELIMITER","DEFAULT_SLIPPAGE_VALUE","GLOBAL_STATE_CACHE_DISABLED","GLOBAL_STATE_CACHE_KEY","ANIMATION_LEVEL_MIN","ANIMATION_LEVEL_MED","ANIMATION_LEVEL_MAX","ANIMATION_LEVEL_DEFAULT","THEME_DEFAULT","MAIN_ACCOUNT_ID","TONCENTER_MAINNET_URL","TONCENTER_MAINNET_KEY","TONCENTER_TESTNET_URL","TONCENTER_TESTNET_KEY","FRACTION_DIGITS","SHORT_FRACTION_DIGITS","MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT","SUPPORT_USERNAME","MTW_TIPS_CHANNEL_NAME","en","ru","MTW_CARDS_BASE_URL","MTW_CARDS_MINT_BASE_URL","MYTONWALLET_PROMO_URL","TELEGRAM_WEB_URL","NFT_MARKETPLACE_URL","NFT_MARKETPLACE_TITLE","GETGEMS_BASE_MAINNET_URL","GETGEMS_BASE_TESTNET_URL","HELPCENTER_URL","EMPTY_HASH_VALUE","CHANGELLY_SUPPORT_EMAIL","CHANGELLY_LIVE_CHAT_URL","CHANGELLY_SECURITY_EMAIL","CHANGELLY_TERMS_OF_USE","CHANGELLY_PRIVACY_POLICY","CHANGELLY_AML_KYC","CHANGELLY_WAITING_DEADLINE","PROXY_HOSTS","TINY_TRANSFER_MAX_COST","IMAGE_CACHE_NAME","LANG_CACHE_NAME","LANG_LIST","langCode","nativeName","rtl","IS_STAKING_DISABLED","STAKING_CYCLE_DURATION_MS","DEFAULT_FEE","LIQUID_POOL","LIQUID_JETTON","STAKING_MIN_AMOUNT","NOMINATORS_STAKING_MIN_AMOUNT","MIN_ACTIVE_STAKING_REWARDS","TONCONNECT_PROTOCOL_VERSION","TONCONNECT_WALLET_JSBRIDGE_KEY","MTW_CARDS_WEBSITE","MTW_CARDS_COLLECTION","TON_DNS_COLLECTION","TONCOIN","symbol","slug","decimals","chain","cmcSlug","TRX","MYCOIN","minterAddress","MYCOIN_TESTNET","CHAIN_CONFIG","ton","isMemoSupported","isDnsSupported","addressRegex","addressPrefixRegex","nativeToken","tron","mainnet","apiUrl","usdtAddress","testnet","TRC20_USDT_MAINNET_SLUG","TRC20_USDT_TESTNET_SLUG","TON_USDT_SLUG","STAKED_TON_SLUG","TRX_SWAP_COUNT_FEE_ADDRESS","TRC20_USDT","TON_USDT","tokenAddress","DEFAULT_ENABLED_TOKEN_SLUGS","DEFAULT_ENABLED_TOKEN_COUNT","PRIORITY_TOKEN_SLUGS","TOKEN_INFO","toncoin","quote","price","priceUsd","percentChange24h","trx","image","TOKEN_WITH_LABEL","INIT_SWAP_ASSETS","isPopular","DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG","DEFAULT_SWAP_FISRT_TOKEN_SLUG","DEFAULT_SWAP_SECOND_TOKEN_SLUG","DEFAULT_TRANSFER_TOKEN_SLUG","DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG","SWAP_DEX_LABELS","dedust","ston","MULTITAB_DATA_CHANNEL_NAME","ACTIVE_TAB_STORAGE_KEY","SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY","PORTRAIT_MIN_ASSETS_TAB_VIEW","LANDSCAPE_MIN_ASSETS_TAB_VIEW","DEFAULT_PRICE_CURRENCY","SHORT_CURRENCY_SYMBOL_MAP","USD","EUR","RUB","CNY","CURRENCY_LIST","BURN_ADDRESS","POPULAR_WALLET_VERSIONS","DEFAULT_TIMEOUT","DEFAULT_RETRIES","DEFAULT_ERROR_PAUSE","HISTORY_PERIODS","BROWSER_HISTORY_LIMIT","NFT_BATCH_SIZE","NOTCOIN_VOUCHERS_ADDRESS","BURN_CHUNK_DURATION_APPROX_SEC","NOTCOIN_EXCHANGERS","CLAIM_ADDRESS","CLAIM_AMOUNT","CLAIM_COMMENT","MINT_CARD_ADDRESS","MINT_CARD_COMMENT","STARS_SYMBOL","GIVEAWAY_CHECKIN_URL","AUTOLOCK_OPTIONS_LIST","selectedName","period","PRICELESS_TOKEN_HASHES","STAKED_TOKEN_SLUGS","DEFAULT_OUR_SWAP_FEE","DEFAULT_STAKING_STATE","id","tokenSlug","annualYield","yieldType","balance","pool","tokenBalance","unstakeRequestAmount","instantAvailable","DEFAULT_NOMINATORS_STAKING_STATE","start","end","pendingDepositAmount","JVAULT_URL","TON_DNS_ZONES","suffixes","baseFormat","resolver","collectionName","isTelemint","isUnofficial","MAX_DP","NAME","INVALID","INVALID_DP","INVALID_RM","DIV_BY_ZERO","P","UNDEFINED","NUMERIC","round","x","sd","rm","more","xc","c","RM","unshift","pop","doExponential","isNonzero","s","join","n","charAt","abs","cmp","y","isneg","yc","i","j","l","div","Big","a","b","dp","DP","bl","bt","ri","bz","ai","al","r","rl","q","qc","qi","shift","eq","gt","gte","lt","lte","minus","sub","t","xlty","plus","xe","ye","reverse","mod","ygtx","times","neg","add","pow","one","prec","sqrt","half","Math","toExponential","mul","toFixed","Symbol","for","toJSON","NE","PE","toNumber","Number","strict","toPrecision","valueOf","_Big_","TypeError","String","nl","test","search","substring","parse","prototype","roundDown","roundHalfUp","roundHalfEven","roundUp","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","runUpdatePassOnRaf","currentMeasureTasks","task","safeExec","setPhase","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","throttleWith","throttledFn","fastRaf","requestMeasure","cb","requestMutation","requestForcedReflow","Element","props","HTMLElement","VisualViewport","Document","HTMLInputElement","MouseEvent","Range","onError","nativeMethods","observer","phase","isStrict","newPhase","enableStrict","LAYOUT_CAUSES","_ref","causes","entity","_Object$getOwnPropert","nativeGetter","getOwnPropertyDescriptor","onMeasure","nativeMethod","apply","MutationObserver","mutations","_ref3","attributeName","contains","forcedMutationAllowedFor","contentEditable","startsWith","clear","observe","childList","attributes","subtree","characterData","suppressStrict","_observer","disconnect","_ref2","propName","Deferred","_defineProperty","resolved","deferred","ConnectorClass","shouldUseJson","targetOrigin","destroy","messageData","requestStates","requestStatesByCallback","generateUniqueId","payload","requestState","catch","finally","cancelCallback","progressCallback","bigintReviver","_requestState$callbac","_data$error","_data$error2","rawData","handleMessage","parseAccountId","accountId","parts","network","buildAccountId","account","animate","tick","schedulerFn","animateInstantly","timingFunctions","linear","easeIn","easeOut","easeInOut","sin","PI","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","animateNumber","timing","duration","onEnd","from","to","t0","t1","min","progress","f","applyStyles","element","css","style","AssertionError","metadata","BIGINT_PREFIX","bigintAbs","bigintDivideToNumber","num","fromDecimal","bigintMultiplyToNumber","bigintMax","value0","value1","bigintMin","SECOND","MINUTE","DAY","formatDayToStringWithCache","withCache","dayStartAt","noYear","monthFormat","noDay","withTime","toLocaleString","year","month","day","hour","minute","hourCycle","formatRelativeHumanDateTime","total","minutes","floor","hours","days","rtf","Intl","RelativeTimeFormat","localeMatcher","numeric","daysPlural","daysValue","formatToParts","hoursPlural","hoursValue","minutesPlural","minutesValue","formatHumanDay","lang","datetime","getDayStartAt","isToday","yesterday","setDate","getDate","isYesterday","formatFullDay","date","today","getDayStart","getFullYear","formatShortDay","todayStartAt","noDate","targetAt","setSeconds","getMinuteStart","getTime","formatTime","getHours","padStart","getMinutes","setHours","ten","toDecimal","noFloor","toBig","roundDecimal","isDnsDomain","zone","suffix","endsWith","base","getDnsDomainZone","IS_EXTENSION_PAGE_SCRIPT","location","protocol","random","userAgent","navigator","maxTouchPoints","shouldShowAlert","throttledAlert","throttle","alert","handleErrorEvent","ErrorEvent","preventDefault","buildCollectionByKey","collection","byKey","member","mapValues","newByKey","pick","object","pickTruthy","omit","stringKeys","filter","omitUndefined","stringKey","orderBy","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","sort","unique","array","compact","Boolean","areSortedArraysEqual","array1","array2","every","cloneDeep","isObject","isLiteralObject","findLast","predicate","cursor","extractKey","findDifference","set2","filterValues","uniqueByKey","shouldKeepFirst","values","MAX_WORKERS","hardwareConcurrency","instances","launchMediaWorkers","fill","requestMediaWorker","MAX_COMMENT_SIZE","BROKEN_CONNECTION_ERRORS","isValidLedgerComment","comment","charCodeAt","isAscii","isLedgerCommentLengthValid","isLedgerConnectionBroken","MAX_LOG_LENGTH","logs","errorReplacer","addLog","log","time","getLogs","logActionHandling","level","logDebug","obj1","obj2","debug","dir","logSelfXssWarnings","selfXssWarnings","es","zh","language","SAFE_EXEC_ENABLED","rescue","always","shouldIgnoreError","debounce","ms","waitingTimeout","shouldRunFirst","shouldRunLast","clearTimeout","interval","isPending","_args","setInterval","clearInterval","throttleWithTickEnd","onTickEnd","waiting","_len3","_key3","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","onTickEndCallbacks","withTimeoutFallback","requestAnimationFrame","currentCallbacks","currentTimeoutCallbacks","IDLE_TIMEOUT","onIdleCallbacks","beforeUnloadCallbacks","onIdle","requestIdleCallback","deadline","timeRemaining","concat","timeout","onBeforeUnload","isLast","waitFor","attempts","TELEGRAM_MOBILE_PLATFORM","IS_PWA","matchMedia","matches","standalone","referrer","PLATFORM_ENV","IS_MAC_OS","IS_WINDOWS","IS_LINUX","IS_ANDROID","IS_SAFARI","IS_OPERA","IS_EDGE","IS_FIREFOX","IS_TOUCH_ENV","IS_CHROME_EXTENSION","_window$chrome","chrome","system","IS_ELECTRON","electron","IS_WEB","DEFAULT_LANG_CODE","USER_AGENT_LANG_CODE","some","getBrowserLanguage","DPR","devicePixelRatio","IS_LEDGER_SUPPORTED","IS_LEDGER_EXTENSION_TAB","global","hash","IS_BIOMETRIC_AUTH_SUPPORTED","credentials","IS_DELEGATED_BOTTOM_SHEET","IS_DELEGATING_BOTTOM_SHEET","isIPad","IS_MULTITAB_SUPPORTED","IS_DAPP_SUPPORTED","IS_IOS_APP","IS_ANDROID_APP","IS_CLIPBOARDS_SUPPORTED","REM","parseInt","getComputedStyle","documentElement","fontSize","STICKY_CARD_INTERSECTION_THRESHOLD","setScrollbarWidthProperty","el","createElement","cssText","classList","appendChild","width","offsetWidth","clientWidth","setProperty","getIsMobileTelegramApp","_window$Telegram$WebA","_window$Telegram","Telegram","WebApp","SecureStoragePlugin","resolvePromise","capacitorStorageGetItem","_await$get$catch","capacitorStorageSetItem","capacitorStorageRemoveItem","capacitorStorageClear","capacitorStorageKeys","localStorageGetItem","localStorage","getItem","localStorageSetItem","setItem","localStorageRemoveItem","removeItem","localStorageClear","localStorageGetAll","localStorageGetMany","localStorageSetMany","items","cache","WeakMap","fnCache","cacheKey","cached","newValue","exports","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","arr","Arr","_byteLength","curByte","len","revLookup","fromByteArray","uint8","extraBytes","maxChunkLength","len2","encodeChunk","lookup","Uint8Array","base64","ieee754","customInspectSymbol","Buffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","setPrototypeOf","encodingOrOffset","allocUnsafe","string","encoding","isEncoding","actual","write","fromString","isView","arrayView","isInstance","copy","fromArrayBuffer","buffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","isBuffer","checked","numberIsNaN","fromObject","toPrimitive","assertSize","size","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","val","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","TYPED_ARRAY_SUPPORT","proto","foo","typedArraySupport","enumerable","poolSize","alloc","allocUnsafeSlow","_isBuffer","compare","list","pos","swap16","swap32","swap64","equals","inspect","max","thisStart","thisEnd","thisCopy","targetCopy","isFinite","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","ERR_BUFFER_OUT_OF_BOUNDS","input","received","isInteger","INVALID_BASE64_RE","Infinity","leadSurrogate","base64clean","src","dst","alphabet","table","i16","BufferBigIntNotDefined","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","NaN","rt","isNaN","LN2","cachedSetTimeout","cachedClearTimeout","module","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","argv","version","versions","on","once","off","emit","prependListener","prependOnceListener","binding","cwd","chdir","umask","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","getPrototypeOf","ns","create","def","current","getOwnPropertyNames","definition","o","chunkId","all","promises","u","miniCssF","Function","hasOwnProperty","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","prev","doneFns","parentNode","removeChild","head","toStringTag","scriptUrl","importScripts","currentScript","tagName","toUpperCase","baseURI","href","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","arePropsShallowEqual","currentProps","newProps","currentKeys","currentKeysLength","logUnequalProps","debugKey","KEYS_TO_IGNORE","counters","renderCountersThrottled","loggerEl","clearEl","innerText","setupOverlay","halfSecondAgo","maxRenders","maxDuration","innerHTML","lastUpdateAt","factor","incrementOverlayCounter","createCallbackManager","callbacks","removeCallback","runCallbacks","addCallback","hasCallbacks","SIGNAL_MARK","isSignal","unsubscribesByEffect","createSignal","defaultValue","state","effects","subscribe","effect","unsubscribe","unsubscribes","unsub","counter","counterBlocking","getIsAnimating","setIsAnimating","getIsBlockingAnimating","setIsBlockingAnimating","getIsHeavyAnimating","beginHeavyAnimation","isBlocking","hasEnded","onFullyIdle","VirtualType","MountState","Fragment","DEBUG_SILENT_RENDERS_FOR","renderingInstance","lastComponentId","isParentElement","$element","Tag","Component","source","children","buildChildren","buildFragmentElement","componentInstance","mountState","Unmounted","buildComponentElement","createComponentInstance","tag","buildTagElement","noEmpty","cleanChildren","isEmptyPlaceholder","dropEmptyTail","newChildren","child","buildChildElement","Empty","Text","DEBUG_components","TOTAL","renders","DEBUG_memos","avgRenderTime","calls","hitRate","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsCaptured","runImmediateEffects","captureImmediateEffects","instancesToUpdate","currentCleanups","currentEffects","prepareComponentForFrame","instance","currentElement","renderComponent","forceUpdateComponent","runCapturedImmediateEffects","currentLayoutCleanups","currentLayoutEffects","newRenderedValue","DEBUG_startAt","hooks","memos","refs","componentName","DEBUG_resolveComponentName","performance","renderedValue","Mounted","hasElementChanged","$old","$new","unmountComponent","_componentInstance$ho","byCursor","_effect$releaseSignal","cleanup","releaseSignals","hook","schedule","dependencies","nextValue","setter","onChange","helpGc","_componentInstance$ho2","useState","initial","useEffectBase","isLayout","effectConfig","_byCursor$cursor","cleanupsContainer","effectsContainer","effectId","runEffectCleanup","runEffect","scheduleEffect","dependency","causedBy","prevValue","cleanups","signal","setupSignals","useEffect","useLayoutEffect","useMemo","debugHitRateKey","DEBUG_state","instanceKey","misses","useCallback","newCallback","useRef","memo","TeactMemoWrapper","DEBUG_contentComponentName","useForceUpdate","setTrigger","trigger","useUniqueId","idRef","DEBUG_currentRandomId","currentGlobal","isInited","DEBUG_invalidateGlobalOnTickEnd","actionHandlers","container","containers","mapStateToProps","ownProps","mappedProps","forceUpdate","activateContainer","newMappedProps","DEBUG_componentName","DEBUG_updates","updateTime","actions","runCallbacksThrottled","forceOnHeavyAnimation","setUntypedGlobal","newGlobal","forceOutdated","DEBUG_randomId","forceSyncOnIOs","getUntypedGlobal","forceOnHeavyAnimationOnce","actionQueue","activationFn","stuckTo","stickTo","getGlobal","setGlobal","typed","TeactNContainer","useUnmountCleanup","React","_extends","getActions","addActionHandler","_actionHandlers$name","handleAction","withGlobal","memoize","ttlSeconds","isCacheDisabled","isDisabledUntil","isStale","lastTime","lastArgs","lastResult","disableCache","seconds","selectAccounts","_global$accounts","accounts","byId","selectNetworkAccountsMemoized","accountsById","fromEntries","selectNetworkAccounts","_global$accounts2","selectCurrentNetwork","settings","isTestnet","selectCurrentAccount","selectAccount","currentAccountId","_selectAccounts","selectCurrentAccountState","selectAccountState","byAccountId","selectFirstNonHardwareAccount","isHardware","selectAccountSettings","selectCurrentAccountSettings","selectIsHardwareAccount","selectAllHardwareAccounts","selectIsOneAccount","selectEnabledTokensCountMemoizedFor","tokens","isDisabled","selectAccountIdByAddress","address","requiredAccount","addressByChain","selectVestingPartsReadyToUnfreeze","_selectAccountState","vesting","info","currentVesting","part","partId","selectAccountNftByAddress","nftAddress","_selectAccountState2","nfts","byAddress","selectIsMultichainAccount","_selectAccount","selectIsBiometricAuthEnabled","authConfig","kind","selectIsNativeBiometricAuthEnabled","isNftTransferPayload","isTokenTransferPayload","selectCurrentDappTransferTotalsMemoized","transactions","amountsBySlug","addSlugAmount","amount","_amountsBySlug$tokenS","isScam","isDangerous","fullFee","nftCount","transaction","displayedAmount","selectCurrentDappTransferTotals","currentDappTransfer","precision","roundingMode","selectAccountTokensMemoizedFor","balancesBySlug","tokenInfo","accountSettings","isSortByValueEnabled","areTokensWithNoCostHidden","isNewAccount","bySlug","getIsNewAccount","_accountSettings$dele","deletedSlugs","_accountSettings$alwa","_accountSettings$alwa2","color","codeHash","balanceBig","totalValue","hasCost","isPricelessTokenWithBalance","alwaysShownSlugs","alwaysHiddenSlugs","change24h","tokenA","tokenB","orderedSlugs","priorityA","priorityB","selectCurrentAccountTokens","selectAccountTokens","selectCurrentAccountTokenBalance","_selectCurrentAccount","_selectCurrentAccount2","balances","selectCurrentToncoinBalance","_selectAccountSetting","selectTokenAddress","selectToken","selectMycoin","selectChainTokenWithMaxBalanceSlow","_selectCurrentAccount3","token","maxToken","currentToken","compareActivities","timestamp","shortenAddress","fromRight","FILLER","getKey","getFromCache","updatePoisoningCache","tx","fromAddress","addToCache","getIsTransactionWithPoisoning","clearPoisoningCache","TRANSACTION_TYPE_TITLES","stake","unstake","unstakeRequest","callContract","excess","contractDeploy","bounced","mint","burn","auctionBid","dnsChangeAddress","dnsChangeSite","dnsChangeSubdomains","dnsChangeStorage","dnsDelete","dnsRenew","liquidityDeposit","liquidityWithdraw","STAKING_TRANSACTION_TYPES","DNS_TRANSACTION_TYPES","parseTxId","txId","subId","getIsTxIdLocal","buildTxId","getActivityTokenSlugs","activity","getIsIdSuitableForFetchingTimestamp","getIsBackendSwapId","getTransactionTitle","isInProgress","translate","isIncoming","titles","isScamTransaction","_transaction$metadata","shouldShowTransactionComment","encryptedComment","getTransactionAmountDisplayMode","nft","shouldShowTransactionAddress","toAddress","selectNewestActivityTimestamps","activities","newestActivitiesBySlug","AppState","AuthState","BiometricsState","TransferState","SwapState","SwapInputSource","SwapErrorType","SwapType","DappConnectState","HardwareConnectState","StakingState","VestingUnfreezeState","SettingsState","MintCardState","ActiveTab","ContentTab","MediaType","LoadMoreDirection","getChainConfig","findChainConfig","chainByNativeSlug","getIsNativeToken","getIsTonToken","withNative","getNativeToken","getChainBySlug","buildUserToken","createTokenList","swapTokenInfo","sortFn","filterFn","_balancesBySlug$slug","keywords","canSwap","selectPopularTokensMemoizedFor","popularTokenOrder","orderMap","selectSwapTokensMemoizedFor","localeCompare","selectAccountTokensForSwapMemoizedFor","selectSwapTokens","_selectCurrentAccount4","selectCurrentSwapTokenIn","tokenInSlug","currentSwap","selectCurrentSwapTokenOut","tokenOutSlug","selectSwapType","_selectCurrentAccount5","tokenInChain","tokenOutChain","OnChain","CrosschainFromWallet","CrosschainToWallet","explainApiTransferFee","diesel","shouldUseDiesel","dieselKey","realFeeInDiesel","exampleFromAmount","exampleToAmount","exchangeRate","convertFee","realFee","nativeAmount","dieselRealFee","nativeRealFee","isGasless","canTransferFullBalance","terms","native","remainingFee","nativeSum","excessFee","explainGaslessTransferFee","fee","explainGasfullTransferFee","getMaxTransferAmount","_fullFee$token","_fullFee$native","getDieselTokenAmount","_diesel$amount","isValidAddressOrDomain","allowPrefix","selectCurrentTransferMaxAmount","currentTransfer","selectTokenMatchingCurrentTransferAddressSlow","currentTokenSlug","currentChain","isCheckingPrefix","availableChains","selectAccountStakingStatesMemoizedFor","stateDefault","stateById","states","selectAccountStakingStates","_selectAccountState$s","staking","stakingDefault","selectAccountStakingState","_selectAccountState$s2","stakingId","shouldUseNominators","selectAccountStakingHistory","accountState","stakingHistory","_URLSearchParams$get","apiUpdate","isElectron","isNativeBottomSheet","isIosApp","isAndroidApp","newestActivityTimestamps","isDefaultEnabled","areAllDisabled","toggleTonMagic","isEnabled","toggleTonProxy","toggleDeeplinkHook","changeBaseCurrency","currency","BiometryType","BiometricAuthError","NativeBiometric","NativeBiometricWeb","randomBytes","crypto","getRandomValues","WINDOW_RESIZE_THROTTLE_MS","WINDOW_ORIENTATION_CHANGE_THROTTLE_MS","SAFE_AREA_INITIALIZATION_DELAY","initialHeight","innerHeight","virtualKeyboardOpenListeners","currentWindowSize","updateSizes","patchVh","toggleSafeAreaClasses","getWindowSize","innerWidth","height","screenHeight","screen","safeAreaTop","getSafeAreaTop","safeAreaBottom","getSafeAreaBottom","Keyboard","adjustBodyPaddingForKeyboard","keyboardHeight","visualViewport","pageTop","vh","paddingBottom","getPropertyValue","toggle","webApp","isBiometricInited","isNativeBiometricAuthSupported","isFaceIdAvailable","isTouchIdAvailable","disableSwipeRequests","getIsTelegramBiometricsRestricted","_webApp2","biometricManager","BiometricManager","isBiometricAvailable","isAccessGranted","isAccessRequested","getTelegramApp","getTelegramAppAsync","updateSafeAreaProperties","top","left","right","bottom","safeAreaInset","contentTop","contentLeft","contentRight","contentBottom","contentSafeAreaInset","updateFullscreenState","isFullscreen","openFullscreen","disableTelegramMiniAppSwipeToClose","closeFullscreen","enableTelegramMiniAppSwipeToClose","onFullscreenFailed","_webApp3","disableVerticalSwipes","_webApp4","enableVerticalSwipes","requestBiometricAccess","requestAccess","accessGranted","setBiometricCredentials","password","_getTelegramApp","updateBiometricToken","updated","verifyIdentity","_getTelegramApp2","authenticate","success","PubkeyAlg","RP_NAME","USER_NAME","createCredential","rpId","hostname","userHandle","credBlob","publicKey","challenge","rp","user","displayName","pubKeyCredParams","alg","ES256","RS256","Ed25519","authenticatorSelection","requireResidentKey","userVerification","extensions","hmacCreateSecret","excludeCredentials","credential","getClientExtensionResults","verify","transports","getTransports","credentialId","rawId","allowCredentials","getCredBlob","assertion","getPassword","AbortController","aborted","_extensions$getCredBl","webAuthn","_window$electron","encryptedPassword","encryptPassword","setTelegramBiometricCredentials","setCredentials","username","server","deleteCredentials","_window$electron2","decryptPassword","isVerified","verifyTelegramBiometricsIdentity","subtitle","isWeakAuthenticatorAllowed","maxAttempts","getCredentials","App","AppWeb","SplashScreen","SplashScreenWeb","SafeArea","SafeAreaWeb","AppLauncher","AppLauncherWeb","URL_REGEX","VALID_PROTOCOLS","EXPLORER_CONFIGURATIONS","explorer","getHostnameFromUrl","getExplorerName","getExplorerBaseUrl","getExplorerTransactionUrl","transactionHash","getExplorerAddressUrl","getExplorerNftUrl","isTelegramUrl","getCardNftImageUrl","mtwCardId","openUrl","isExternal","couldOpenApp","completed","openAppSafe","open","openBrowser","handleOpenUrl","currentTarget","resolveRenderPromise","renderPromise","TON_PROTOCOL","SELF_PROTOCOL","SELF_UNIVERSAL_URLS","queriesMap","createQueryEntry","query","mql","dispatchers","passive","useMediaQuery","setState","_options$initializeWi","initializeWithValue","getInitialState","querySubscribe","queryUnsubscribe","isPortrait","useDeviceScreen","isSmallHeight","isLandscape","getIsPortrait","DeeplinkCommand","urlAfterSignIn","processDeeplink","isFromInAppBrowser","isTonConnectDeeplink","openLoadingOverlay","closeLoadingOverlay","returnUrl","processTonConnectDeeplink","isSelfDeeplink","deeplink","convertSelfDeeplinkToSelfUrl","pathname","searchParams","command","isLedger","ledger","CheckinWithR","_pathname$match","match","Giveaway","_pathname$match2","giveawayId","Swap","showError","startSwap","amountIn","toNumberOrEmptyString","BuyWithCrypto","BuyWithCard","openOnRampWidgetModal","Stake","startStaking","Transfer","processTonDeeplink","convertSelfUrlToTonDeeplink","Explore","closeSettings","openExplore","setActiveContentTab","tab","host","_getGlobal$exploreDat","matchingSite","exploreData","sites","processSelfDeeplink","isTonDeeplink","startTransferParams","parseTonDeeplink","startTransfer","setLandscapeActionsActiveTabIndex","adaptedDeeplink","getDeeplinkSearchParam","binPayload","jettonAddress","stateInit","replaceAllSpacesWithPlus","rawParseTonDeeplink","transferParams","globalToken","minter","selectTokenByMinterAddress","accountToken","accountTokens","selectAccountTokenBySlug","accountNft","selectCurrentAccountNftByAddress","omitProtocol","forceHttpsProtocol","parseDeeplinkTransferParams","tonDeeplink","selfUniversalUrl","param","_url$searchParams$get","PushNotifications","selectNotificationTonAddressesSlow","accountIds","getCapacitorPlatform","nextUpdatePushNotifications","handlePushNotificationActionPerformed","notification","showAnyAccountTx","showAnyAccountTokenActivity","openAnyAccountStakingInfo","switchAccountAndOpenUrl","notificationData","action","handlePushNotificationRegistration","userToken","registerNotifications","notificationAccounts","pushNotifications","enabledAccounts","addresses","capture","INAPP_BROWSER_OPTIONS","launchUrl","statusBarHeight","updateSafeAreaValues","safeAreaInsets","insets","getStatusBarHeight","getIsNativeBiometricAuthSupported","getIsFaceIdAvailable","getIsTouchIdAvailable","getDoesUsePinPad","ClipboardWeb","clipboard","writeText","ClipboardItem","clipboardItemInput","readText","clipboardItems","types","clipboardBlob","getType","_getBlobData","readAsText","onloadend","Clipboard","Haptics","HapticsWeb","vibrate","HapticFeedback","impactOccurred","impact","Light","vibrateOnError","notificationOccurred","Medium","vibrateOnSuccess","withPauseOnEnd","_getTelegramApp3","textCopyEl","tabIndex","className","copyTextToClipboard","readClipboardContent","readTextFromClipboard","isMnemonicPrivateKey","mnemonic","SIMPLE_MARKDOWN_REGEX","renderText","filters","entities","entityResult","splittenParts","line","trimmedLine","trimStart","indentLength","repeat","cacheApi","caches","cacheName","SHORT_SYMBOLS","formatNumber","fractionDigits","noTruncate","bigValue","wholePart","fractionPart","applyThousandsGrouping","formatCurrency","addCurrency","formatCurrencyExtended","noSign","formatCurrencySimple","getShortCurrencySymbol","_SHORT_CURRENCY_SYMBO","defaultLangPack","defaultLangPackJson","SUBSTITUTION_REGEX","PLURAL_OPTIONS","PLURAL_RULES","de","pl","th","tr","uk","zh-Hans","zh-Hant","langPack","currentLangCode","createLangFn","format","pluralValue","_langPack","cacheValue","langString","preferredPluralOption","optionIndex","getPluralOption","template","otherValue","formattedValue","translationSlices","initialValue","_value$index","processTemplate","processedParts","currentString","valueNode","processTemplateJsx","processTranslation","getTranslation","setLanguage","newLangPack","Request","remote","cacheData","Blob","Response","fetchRemote","langInfo","isRtl","langName","EQUAL","DELETE","__delete","DELETE_ALL_CHILDREN","__deleteAllChildren","deepDiff","value2","object1","object2","keys1","keys2","diff","subValue1","subValue2","subDiff","deepMerge","oldValue","reduceDiff","useStateRef","ref","useLastCallback","_ref$current","getIsInBackgroundLocal","setIsInBackground","hasFocus","getIsInBackground","handleBlur","handleFocus","useBackgroundMode","onBlur","onFocus","lastOnBlur","lastOnFocus","isBackgroundModeActive","telegramApp","onEvent","BroadcastChannel","initMultitab","noPubGlobal","onGlobalChange","handleGlobalChange","handleMultitabMessage","omitLocalOnlyKeys","callActionInMain","callActionInNative","INITIAL_STATE","appState","Auth","auth","none","biometrics","None","hardware","slippage","currentStaking","tokenPriceHistory","Initial","theme","animationLevel","areTinyTransfersHidden","canPlaySounds","dialogs","notifications","stateVersion","restrictions","isLimitedRegion","isSwapDisabled","isOnRampDisabled","isNftBuyingDisabled","mediaViewer","areDeepEqual","type1","isArray1","member1","key1","key2","isPartialDeepEqual","node","newPartial","updateAuth","authUpdate","updateAccounts","setIsPinAccepted","isPinAccepted","clearIsPinAccepted","createAccount","_partial","partial","titlePostfix","shouldForceAccountEdit","_partial$title","RegExp","accountAmount","isMainnet","updateAccount","createAccountsFromGlobal","firstNetworkAccount","secondNetworkAccount","updateCurrentAccountState","updateAccountState","withDeepCompare","updateHardware","hardwareUpdate","updateSettings","settingsUpdate","updateAccountSettings","updateCurrentAccountSettings","updateBiometrics","biometricsUpdate","updateCurrentAccountId","shouldAvoidSwapEstimation","isEstimating","Blockchain","Password","isSwapEstimateInputEqual","swap1","swap2","amountKey","inputSource","In","isMaxAmount","isSwapFormFilled","_currentSwap$amountKe","getSwapEstimateResetParams","amountOut","amountOutMin","priceImpact","limits","dieselStatus","estimates","bestRateDexLabel","networkFee","realNetworkFee","swapFee","swapFeePercent","ourFee","ourFeePercent","dieselFee","rawUpdateCurrentSwap","updateCurrentSwap","doAvoidEstimation","globalBefore","globalAfter","pairs","doesSwapChangeRequireEstimation","_ref4","_ref5","doesSwapChangeRequireDexUnselect","isDexLabelChanged","clearCurrentSwap","updateCurrentTransferByCheckResult","preserveMaxTransferAmount","updateCurrentTransfer","toAddressName","addressName","clearCurrentTransfer","prevGlobal","nextGlobal","previousMaxAmount","updateCurrentTransferLoading","isLoading","setCurrentTransferAddress","updateCurrentSignature","currentSignature","updateActivitiesIsLoading","updateActivitiesIsHistoryEndReached","isReached","_activities$isHistory","isHistoryEndReachedBySlug","isMainHistoryEndReached","updateActivitiesIsLoadingByAccount","updateCurrentStaking","updateAccountStaking","updateDappConnectRequest","dappConnectRequest","clearDappConnectRequest","updateCurrentDappTransfer","clearCurrentDappTransfer","addNewActivities","newActivities","lastMainListTimestamp","_idsMain2","_localActivities","idsBySlug","idsMain","localActivities","forMain","mergeSortedActivityIds","newIdsBySlug","_acc$slug","buildActivityIdsBySlug","replacedIdsBySlug","newIds","_idsBySlug$slug","_idsBySlug","getNewestActivitiesBySlug","setIsInitialActivitiesLoadedTrue","_byChain$chain","byChain","isFirstTransactionsLoaded","ids0","ids1","id0","id1","tokenSlugs","_idsBySlug$tokenSlug","newestActivityId","addNft","_nfts$orderedAddresse","orderedAddresses","updateAccountSettingsBackgroundNft","_settings$cardBackgro","cardBackgroundNft","updateVesting","updateMintCards","currentMintCard","switchAccount","newNetwork","switchAccountAndClearGlobal","clearSwapPairsCache","changeNetwork","selectMnemonicForCheck","worldsCount","rnd","reduceGlobalForDebug","reduced","_ref17","getIsTinyOrScamTransaction","_token$quote$priceUsd","resolveSwapAssetId","asset","_asset$tokenAddress","resolveSwapAsset","anyId","_bySlug$anyId","getIsSupportedChain","getIsInternalSwap","isMultichain","updateTokenInfo","Main","_mnemonic$length","isFirstAccount","isEmptyObject","firstNonHardwareAccount","nextAuthState","createBackup","createWallet","createPin","createBiometrics","createPassword","checkPassword","promiseCalls","mnemonicCheckIndexes","afterCreatePassword","requestConfetti","importWalletConfirmBiometrics","confirmBiometrics","biometricsStep","pin","isImporting","importWalletConfirmPin","confirmPin","importWalletCreateNativeBiometrics","createNativeBiometrics","skipCreateNativeBiometrics","importWalletCreatePin","isPasswordNumeric","createHardwareAccounts","withCredential","authApi","tonAddress","tronAddress","isAddAccountModalOpen","afterConfirmDisclaimer","disclaimer","_selectAccounts2","disclaimerAndBackup","_selectAccounts3","hardwareSelectedIndices","ledgerApi","wallets","wallet","importLedgerWallet","addHardwareAccounts","_ref6","_wallets$","nextActiveAccountId","updatedGlobal","walletInfo","driver","areSettingsOpen","hardwareWallet","tryAddNotificationAccount","afterSignIn","resetApiSettings","_ref7","isBackupRequired","importWalletCheckPassword","importWallet","about","_ref8","InvalidMnemonic","hasAccounts","importWalletCreateBiometrics","importWalletCreatePassword","confirmDisclaimer","ready","_ref9","_selectAccounts4","hardwareState","Connecting","hardwareWallets","isLedgerConnected","isTonAppConnected","connectLedger","transport","Failed","_selectAllHardwareAcc","waitLedgerTonApp","isRemoteTab","lastIndex","hardwareAccounts","hardwareAccountIndexes","selectLedgerAccountIndexToImport","currentHardwareAddresses","getNextLedgerWallets","ConnectedWithSingleWallet","ConnectedWithSeveralWallets","lastUsedTransport","isLedgerDisconnected","noRetry","connectHardwareWallet","_ref10","_global$hardware$hard","oldHardwareWallets","_ref11","Connect","_ref12","TurnOnRegistration","TurnOnVerification","TurnOnPasswordConfirmation","TurnOnComplete","_ref13","oldPassword","TurnOffComplete","TurnOffWarning","TurnOffBiometricConfirmation","TurnOffCreatePassword","_ref14","nativeBiometricsError","verifyTelegramBiometricIdentity","safetyRules","mnemonicPage","_selectAccounts5","checkWords","isBackupCreated","afterCheckMnemonic","accountConfigJson","storageData","showNotification","Unexpected","_ref15","_global$accounts$byId","existAccountId","currentWalletTitle","ledgerInfo","_ref16","shouldLoadWithBudget","shouldFetchMore","fetchedActivities","tokenIds","toTxId","toTimestamp","filteredResult","newById","newOrderedIds","currentActivities","fetchTokenTransactions","_selectAccountTxToken","_selectAccountState3","_currentActivities$id","tronTokenSlugs","selectAccountTxTokenSlugs","selectLastMainTxTimestamp","fetchAllTransactions","isMnemonicChecked","promiseId","isSigned","_global$tokenInfo","_settings$importedSlu","_accountSettings$orde","_token$price","_token$priceUsd","_token$change24h","importedSlugs","_global$tokenInfo$byS","_selectAccountState$b","_selectAccountState4","importToken","apiToken","shouldUpdateBalance","changeBalance","reconnectLedger","showDialog","verifyAddress","activeContentTab","apiSwapAsset","_global$walletVersion","currentVersion","walletVersions","getTonOperationFees","operation","gas","real","getTonStakingFees","claim","BottomSheet","buildClassName","stopEvent","stopPropagation","listenOnce","handleEvent","useLang","useEffectOnce","langProvider","isOpen","onCloseTransitionEnd","noFirstOpenTransition","noCloseTransition","closeDuration","noOpenTransition","isClosed","setIsClosed","closeTimeoutRef","hasOpenClassName","setHasOpenClassName","exec","shouldHaveOpenClassName","isClosing","shouldRender","transitionClassNames","hasShownClass","hasOpenClass","CONNECT_EVENT_ERROR_CODES","SEND_TRANSACTION_ERROR_CODES","tonConnectGetDeviceInfo","maxMessages","appName","appVersion","maxProtocolVersion","features","_navigator","userAgentData","devicePlatform","WebViewBridgeMessageType","getInjectableJsMessage","useDappBridge","endpoint","inAppBrowserRef","requestId","setRequestId","bridgeObject","deviceInfo","protocolVersion","isWalletBrowser","connect","_inAppBrowserRef$curr","_inAppBrowserRef$curr2","buildConnectError","BAD_REQUEST_ERROR","_request$items","manifestUrl","verifyConnectRequest","hide","buildDappRequest","show","_inAppBrowserRef$curr3","UNKNOWN_ERROR","restoreConnection","send","_global$byAccountId$d","dapps","dapp","UNKNOWN_APP_ERROR","dappRequest","_inAppBrowserRef$curr4","_inAppBrowserRef$curr5","callResponse","applyScrollPatch","_inAppBrowserRef$curr6","_inAppBrowserRef$curr7","_inAppBrowserRef$curr8","bridgeInjectionCode","sendEvent","useWebViewBridge","bridgeObj","objectToInjection","funcs","funcName","invokeCapFunc","functionResponse","executeScript","openDeeplinkOrUrl","close","methodName","invocationId","inAppBrowser","currentBrowserOptions","closeBrowser","useShowTransition","handleBrowserClose","enable","isShown","disable","browserTitle","browserSubtitle","ADDITIONAL_INAPP_BROWSER_OPTIONS","cordova","InAppBrowser","originalHide","originalClose","closedPromise","getInAppBrowser","closeAllOverlays","_getInAppBrowser","closeAnyModal","closeMediaViewer","ASSET_LOGO_PATHS","btc","usdt","my","buildStakingDropdownItems","tokenBySlug","hasNominatorsStake","getIsActiveStakingState","hasLiquidStake","stateToken","logoPath","icon","getStakingStateStatus","isUnstakeRequested","unclaimedRewards","StakeInitial","UnstakeInitial","isUnstaking","resetHardwareWalletConnect","UnstakeConnectHardware","UnstakePassword","tokenAmount","StakeConnectHardware","StakePassword","_global$stakingInfo","stakingInfo","liquid","available","unstakeAmount","isLongUnstakeRequested","UnstakeComplete","StakeComplete","UnstakeConfirmHardware","StakeConfirmHardware","_global$stakingInfo2","stakingBalance","submitLedgerUnstake","submitLedgerStake","clearCurrentStaking","changeCurrentStaking","openStakingInfo","isStakingInfoModalOpen","shouldReopenModal","openStakingInfoOrStart","ClaimConnectHardware","ClaimPassword","_getTonStakingFees$cl","stakingState","ClaimConfirmHardware","_getTonStakingFees$cl2","submitLedgerStakingClaim","clamp","isBetween","SwipeDirection","getDistance","hypot","pageX","pageY","getTouchCenter","lastClickTime","lethargy","stability","sensitivity","tolerance","delay","lastUpDeltas","lastDownDeltas","deltasTimestamp","check","lastDelta","originalEvent","wheelDelta","deltaY","detail","isInertia","direction","lastDeltas","lastDeltasOld","lastDeltasNew","oldSum","newSum","oldAverage","newAverage","captureEvents","_options$initialZoom","_options$minZoom","_options$maxZoom","captureEvent","hasMoved","hasSwiped","isZooming","initialDistance","wheelZoom","initialZoom","initialDragOffset","isDragCanceled","windowSize","initialSwipeAxis","initialTouchCenter","minZoom","maxZoom","onCapture","_options$onCapture","excludedClosestSelector","includedClosestSelector","withNativeDrag","withCursor","onDrag","closest","onMove","onRelease","touches","selectorToPreventScroll","querySelectorAll","scrollable","overflow","onDoubleClick","centerX","centerY","onClick","button","newWindowSize","onZoom","endDistance","touchCenter","dragOffsetX","dragOffsetY","zoomFactor","initialCenterX","initialCenterY","currentCenterX","currentCenterY","shouldPreventScroll","onSwipe","_options$swipeThresho","xAbs","yAbs","threshold","swipeThreshold","axis","currentSwipeAxis","offsets","Left","Right","Up","Down","processSwipe","releaseWheelDrag","releaseWheelZoom","onWheelCapture","onWheel","doubleTapZoom","is","deltaX","ctrlKey","metaKeyPressed","metaKey","shiftKey","delta","zoom","onWheelZoom","isUserEvent","sign","dx","dy","onWheelDrag","withWheelDrag","isNotPassive","keyToHandlerName","Enter","Backspace","Delete","Esc","Escape","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","handlers","onEnter","onDelete","onBackspace","onEsc","onUp","onDown","onLeft","onRight","onTab","captureKeyboardListeners","hasActiveHandlers","handleKeyDown","handlerName","option","currentEventHandlers","findIndex","releaseKeyboardListener","keyHandlers","handlerOrOptions","noStopPropagation","shouldPreventDefault","disableSwipeToClose","enableSwipeToClose","trapFocus","focusableElements","currentFocusedIndex","em","isSameNode","activeElement","newFocusedIndex","focus","cssColorToHex","cssColor","parseFloat","NavigationBarPluginEvents","NavigationBar","NavigationBarWeb","Style","Animation","StatusBar","prefersDark","currentTheme","forcedDarkStatusBarBackground","switchTheme","isInModal","setThemeValue","setStatusBarStyle","_document$querySelect","querySelector","isDarkTheme","colorScheme","handlePrefersColorSchemeChange","_getTelegramApp4","hexColor","setHeaderColor","setBackgroundColor","setBottomBarColor","forceDarkBackground","currentAppTheme","isSystemDark","isModalOpen","Dark","setStyle","setColor","darkButtons","switchStatusBar","onThemeChanged","useEffectWithPrevDeps","prevDepsRef","prevDeps","controlledByMain","textInputTypes","safeAreaCache","safeAreaPromise","getSafeAreaInsets","currentKey","isForcedFullSize","useOpenFromMainBottomSheet","isInput","isContentEditable","_controlledByMain$get","globalJson","dispatchEvent","Event","controlledByNative","prepare","_controlledByNative$g","closeCurrent","lastOpenCall","next","shouldSkipUndefined","useSyncEffect","usePrevious","cleanupRef","_cleanupRef$current","_effect","_cleanupRef$current2","runDebounce","isGlobalHandlerAttached","uniqueId","updateBackButtonState","backButton","BackButton","handleBackButtonClick","offClick","PATH_BASE","historyUniqueSessionId","historyState","historyCursor","isAlteringHistory","deferredHistoryOperations","deferredPopstateOperations","applyDeferredHistoryOperations","goOperations","op","stateOperations","goCount","history","go","processStateOperations","deferHistoryOperation","historyOperation","resetHistory","onBack","back","replaceState","cleanupClosed","countClosed","cleanupTrashedState","_historyState$i$onBac","_historyState$i","useHistoryBack","isActive","shouldBeReplaced","shouldIgnoreForTelegram","lastOnBack","indexRef","telegramIdRef","wasReplaced","isFirstRender","pushState","shouldReplace","previousRecord","_previousRecord$markR","markReplaced","processBack","prevIsActive","registerTelegramCallback","unregisterTelegramCallback","TEST_getHistoryState","TEST_getHistoryCursor","previousUniqueSessionId","alreadyClosedCount","_historyState$i$onBac2","_historyState$i2","isDoubled","styles","ariaLabel","forFormId","isSubmit","isPrimary","isSimple","isText","isRound","isSmall","isDestructive","shouldStopPropagation","isClicked","setIsClicked","handleClick","loadingClassName","loadingInit","loadingStart","sizeSmall","primary","disabled","destructive","clicked","LoadingDots","loadingDots","NON_BUBBLEABLE_EVENTS","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","resolveEventType","eventType","canUseEventDelegation","realEventType","asCapture","removeDelegatedListener","realEvent","events","furtherCallsPrevented","Reflect","documentListenersCount","delegatedHandlersCount1","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","delegationElementsCount","delegatedEventTypesCount","eventTypes","SVG_NAMESPACE","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoCapitalize","autoComplete","autoCorrect","autoPlay","spellCheck","INDEX_KEY_PREFIX","SELECTION_STATE_ATTRIBUTE","headsByElement","extraClasses","extraStyles","renderWithVirtual","parentEl","$current","$parent","currentContext","_$new","_$new2","_$new3","skipComponentUpdate","fragment","nextSibling","namespace","isCurrentComponent","isNewComponent","$newAsReal","isCurrentFragment","isNewFragment","xmlns","updateComponent","setupComponentUpdateListener","newTarget","_componentInstance$co","initComponent","context","mountChildren","firstChild","createNode","insertBefore","setElementRef","textContent","remount","getNextSibling","_componentInstance$co2","renderChildren","forceMoveToEnd","$currentAsReal","$newAsTag","processControlled","currentEntries","newEntries","currentValue","removeAttribute","updateAttributes","Mounting","mountComponent","$child","$renderedChild","createTextNode","createElementNS","defaultChecked","processUncontrolledOnMount","componentNextSibling","isComponent","isFragment","unmountChildren","replaceChild","unmountRealTree","removeAllDelegatedListeners","currentEl","DEBUG_checkKeyUniqueness","teactFastList","currentChildren","newKeys","$newChild","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","teactOrderKey","fragmentIndex","fragmentSize","currentPreservedIndex","currentChildInfo","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","childNodes","renderFastListChildren","currentChildrenLength","newChildrenLength","maxLength","createDocumentFragment","lastCurrentChild","fragmentNextSibling","_ref$onChange","isValueControlled","isCheckedControlled","onInput","dataset","selectionStart","selectionEnd","isCaretAtEnd","setSelectionRange","selectionState","updateClassName","inputEl","selectionStateJson","updateStyle","__html","resolveDelegationRegistry","existing","newSet","resolveDelegatedEventTypes","addDelegatedListener","htmlElement","extraArray","applyExtraStyles","addExtraClass","removeExtraClass","toggleExtraClass","force","_extraClasses$get","setExtraStyles","standardStyles","$head","containerId","elementRef","TeactDOM","CLOSE_DURATION","CLOSE_DURATION_PORTRAIT","getModalCloseSignal","setModalCloseSignal","dialogRef","dialogClassName","titleClassName","contentClassName","isCompact","nativeBottomSheetKey","forceFullNative","forceBottomSheet","noResetFullNativeOnBlur","noBackdrop","noBackdropClose","header","hasCloseButton","onClose","onCloseAnimationEnd","modalRef","localDialogRef","swipeDownDateRef","useHideBrowser","animationDuration","isSlideUp","prevIsOpen","toggleSelfFullSize","isFullSize","isBrowserHidden","setIsBrowserHidden","isDelegatingToNative","isDelegating","shouldOpen","prevShouldOpen","_closeCurrent","closeNext","delegate","release","useDelegatingBottomSheet","noResetHeightOnBlur","dialogEl","openSelf","offsetHeight","backgroundColor","closeSelf","isDelegatedAndOpen","safeArea","setSafeArea","maxHeight","prevForceFullNative","blurTimeout","opacity","scrollTop","useDelegatedBottomSheet","lastScrollRef","scrollEl","getCanCloseModal","fullClassName","modal","slideUpAnimation","backdropFullClass","backdrop","contentFullClassName","content","contentCompact","Portal","role","dialog","header_wideContent","header_noClose","singleTitle","Button","closeButton","closeIcon","explainSwapFee","shouldSwapBeGasless","_input$ourFee3","nativeTokenBalance","getBigNativeTokenInBalance","getExcessFee","shouldShowOurFee","isExact","networkTerms","addOurFeeToTerms","_input$ourFee4","networkFeeCoveredByDiesel","bigMax","realNetworkTerms","explainGaslessSwapFee","isNativeIn","_input$ourFee","_input$ourFee2","explainGasfullSwapFee","getMaxSwapAmount","_ourFeePercent","swapType","tokenInBalance","tokenIn","fullNetworkFee","maxAmount","_fullNetworkFee$token","_fullNetworkFee$nativ","isInsufficientNative","_findChainConfig3","nativeTokenInBalance","isOurFeeNative","_terms$native","_terms$token","permissions","isPasswordRequired","getDapps","connectAccountId","proof","ConfirmHardware","signature","signLedgerProof","submitDappConnectHardware","vestingAddress","signedMessages","signLedgerTransactions","isTonConnect","submitDappTransferHardware2","brokenDapp","deleteDapp","updateConnectedDapps","dappLastOpenedDatesByOrigin","clearConnectedDapps","connectedDapps","removeConnectedDapp","Info","isAddressRequired","addSiteToBrowserHistory","currentPromiseId","nextNewestActivityTimestamps","closeDappTransfer","WarningHardware","connectionType","isSse","_global$dappConnectRe","pairsCache","SERVER_ERRORS_MAP","NotEnoughLiquidity","InvalidPair","TooSmallAmount","buildSwapBuildRequest","_findChainConfig","currentDexLabel","tokenOut","fromAmount","toAmount","nativeTokenIn","toMinAmount","shouldTryDiesel","dexLabel","requiredState","swapId","requiredTokenInSlug","requiredTokenOutSlug","withResetAmount","shouldReset","_global$currentSwap$r","shouldResetOnClose","swapBuildRequest","buildResult","swapHistoryItem","hashes","Complete","transfers","activityId","msgHash","_account$addressByCha","isMutlichainAccount","supportedChains","getSupportedChains","shouldSendTonTransaction","shouldSendTronTransaction","shouldSendTransaction","shouldSendTokenToExternalWallet","swapTransactionRequest","swapItem","WaitTokens","payinAddress","cex","payoutAddress","payinExtraId","transferOptions","transferResult","_transferResult","newTokenInSlug","newTokenIn","adjustedAmountIn","newTokenOutSlug","newTokenOut","adjustedAmountOut","Out","initialGlobal","isEstimatingSwap","isEstimateInputIntact","swapUpdate","shouldStop","_global$currentSwap$p","_global$currentSwap$p2","pairsBySlug","_global$currentSwap$a2","_global$currentSwap$n","isFromAmountMax","_global$currentSwap$a","processNativeMaxSwap","estimateAmount","toncoinBalance","estimate","_SERVER_ERRORS_MAP","UnexpectedError","NotEnoughForFee","_estimate$other","other","buildSwapEstimates","currentEstimate","newEstimates","proposedBestDexLabel","_findChainConfig2","_availableEstimates$f","selectedEstimate","availableEstimates","variant","networkFeeBigint","dieselFeeBigint","canAffordSwapEstimateVariant","chooseSwapEstimate","estimateDexSwap","_global$currentSwap$a3","onLine","txDraft","convertTransferFeesToSwapFees","fromMin","fromMax","ChangellyMinSwap","ChangellyMaxSwap","estimateCexSwap","finalGlobal","estimateSwapConcurrently","_global$swapTokenInfo","_global$currentSwap$p4","shouldForceUpdate","assetId","_global$currentSwap$p3","isTonTokenIn","pair","isTonTokenOut","countTonTokens","isReverseProhibited","ids","swaps","nonExistentIds","shouldHide","nonExistentSwaps","newEstimate","baseCurrency","updateTokenPriceHistory","shouldEncrypt","withDiesel","isGaslessWithStars","isNftTransfer","isBase64Data","allowGasless","_result","_result2","Confirm","resolvedAddress","isToNewAddress","isToAddressNew","InsufficientBalance","_global$currentTransf","_global$currentTransf2","_explainedFee$fullFee","_explainedFee$realFee","explainedFee","fullNativeFee","realNativeFee","chunks","chunk","batchResult","sentNftsCount","dieselAmount","_result3","_explainedFee$realFee2","rawPayload","parsedPayload","signedMessage","currentResult","submitLedgerNftTransfer","submitLedgerTransfer","isDieselAuthorizationStarted","NBS_INIT_TIMEOUT","createTransferOptions","globalState","cardsInfo","cardInfo","handleTransferResult","Done","isCardMinting","isNotcoinVouchers","collectionAddress","submitTransferInitial","nftAddresses","blacklistedNftAddresses","whitelistedNftAddresses","isUnhideNftModalOpen","selectedNftToUnhide","isCollection","selectedNftsToHide","unfreezeRequestedIds","isConfirmRequested","openVestingModal","unfreezeState","_result$error","transferError","_settings$accentColor","cardBackgroundNftAddress","accentColorNftAddress","accentColorNft","isCardBackgroundNftOwned","isAccentColorNftOwned","accentColorIndex","createAbortableFunction","toReturnOnAbort","abort","deleteNotificationAccount","currentEnabledAccounts","deleted","newEnabledAccounts","deleteAllNotificationAccounts","createNotificationAccount","abortableSubscribeNotifications","abortableUnsubscribeNotifications","createResult","addressKeys","withAbort","pushNotificationsAccount","updateNotificationAccount","isAvailable","newAccountId","shouldLoadDetails","newActivity","updateActivity","chainBalances","_selectAccountSetting2","currentBalances","updateBalances","common","totalProfit","updateStakingInfo","updateStakingDefault","stateWithBiggestBalance","state0","state1","nominators","currentTokens","_currentTokens$token$","_currentTokens$token$2","updateTokens","updateSwapTokens","currentNfts","checkCardNftOwnership","newOwnerAddress","sentNft","_nfts$orderedAddresse2","_nfts$selectedAddress","_nfts$byAddress","selectedAddresses","removedNft","removeNft","ownerAddress","setCardBackgroundNft","installAccentColorFromNft","isOnSale","updateNft","isLimited","isCopyStorageEnabled","supportAccountsCount","countryCode","isAppUpdateRequired","shouldRestrictSwapsAndOnRamp","updateRestrictions","apiUpdateWalletVersions","isIncorrectTimeNotificationReceived","showIncorrectTimeError","vestingInfo","updateVestingInfo","isUpdating","secondAddress","secondAccountId","isTonProxyEnabled","isTonMagicEnabled","accountConfig","NativeAudio","NativeAudioWeb","DEBOUNCE_MS","audioContext","AudioContext","webkitAudioContext","audioBuffer","isSoundInitialized","initializeSounds","resume","preload","assetPath","audioChannelNum","isUrl","incomingTransactionSound","decodeAudioData","decodedAudioBuffer","playIncomingTransactionSound","play","createBufferSource","destination","doesLocalActivityMatch","localActivity","chainActivity","_localActivity$extra","withW5Gasless","normalizedAddress","externalMsgHash","mainActivities","_idsMain","allActivities","flat","fromTimestamp","mergeActivityIdsToMaxTime","_activities","putInitialActivities","fetchTransferDieselState","_selectLocalActivitie","noForward","incomingActivities","_global$byAccountId","_accountState$activit","selectLocalActivities","replacedLocalIds","incomingActivity","hasLocalMatch","splitReplacedAndNewActivities","replaceMap","currentActivityId","newActivityId","replaceCurrentActivityId","newSwapId","replaceCurrentSwapId","newTxId","replaceCurrentTransferId","_ids","_idsMain3","_localActivities2","affectedTokenSlugs","activityIds","getActivityListTokenSlugs","removeActivities","notifyAboutNewActivities","mintCardActivity","_activity$nft","processCardMintingActivity","dataHex","clearCurrentSignature","apiUpdateDappConnect","activeDappOrigin","apiUpdateDappLoading","apiUpdateDappCloseLoading","apiUpdateDappSendTransaction","ANIMATION_LEVEL_OPTIONS","switchAnimationLevel","levelClassName","currentLevel","BarcodeFormat","BarcodeValueType","LensFacing","GoogleBarcodeScannerModuleInstallState","afterInit","langCachePrefix","langCacheVersion","clearPreviousLangpacks","isNativeBiometricAuthEnabled","biometricsAvailableResult","useFallback","biometryType","FACE_ID","TOUCH_ID","isPushNotificationsAvailable","notificationStatus","checkPermissions","receive","requestPermissions","register","initNotificationsWithGlobal","initCapacitorWithGlobal","requestFullscreen","initTelegramWithGlobal","resetAuth","_global$settings$auth","newDialogs","existingMessageIndex","isToncoin","setDefaultSwapParams","changeTransferToken","currentActivityToken","isDefaultFirstTokenOutSwap","InvalidAmount","InvalidToAddress","StateInitWithoutBin","InvalidStateInit","DomainNotResolved","WalletNotInitialized","InvalidAddressFormat","PartialTransactionFailure","IncorrectDeviceTime","UnsuccesfulTransfer","InactiveContract","NotSupportedHardwareOperation","DebugError","newNotifications","existingNotificationIndex","toggleDeeplinkHandler","isDeeplinkHookEnabled","isFromAllAccounts","otherNetwork","otherNetworkAccountIds","nextAccountId","settingsById","afterSignOut","prevAccountId","settingsByAccountId","BarcodeScanner","BarcodeScannerWeb","APP_VERSION_REGEX","ledgerTabId","setTheme","setValue","IGNORE_TAGS","useHotkeys","hotkeys","shouldFireEvent","hotkey","alt","ctrl","meta","altKey","pressedKey","isExactHotkey","modifiers","reservedKeys","parseHotkey","getHotkeyMatcher","useThrottledCallback","deps","msOrSchedulerFn","noFirst","fnMemo","preloadedImageUrls","useMediaTransition","mediaData","isMediaReady","loading","imageClassName","isLoaded","markIsLoaded","useFlag","draggable","referrerPolicy","onLoad","handleLoad","ANIMATED_STICKERS_PATHS","hello","snitch","bill","thumbUp","holdTon","happy","noData","forge","wait","yeee","guard","helloPreview","snitchPreview","billPreview","thumbUpPreview","holdTonPreview","happyPreview","noDataPreview","forgePreview","waitPreview","runPreview","yeeePreview","guardPreview","coreWalletLogo","coreWalletLogoPreview","clockWhite","iconClockWhite","clockWhitePreview","iconClockPreviewWhite","light","iconAdd","iconAddLight","iconClock","iconClockLight","iconClockBlue","iconClockLightBlue","iconClockGray","iconClockLightGray","iconClockGreen","iconClockLightGreen","iconClockPurple","iconClockLightPurple","iconClockPurpleWhite","iconClockLightPurpleWhite","iconClockRed","iconClockLightRed","iconEarn","iconEarnLight","iconEarnPurple","iconEarnLightPurple","iconSend","iconSendLight","iconSwap","iconSwapLight","preview","iconClockPreviewLight","iconClockPreviewLightBlue","iconClockPreviewLightGray","iconClockPreviewLightGreen","iconClockPreviewLightPurple","iconClockPreviewLightPurpleWhite","iconClockPreviewLightRed","dark","iconAddDark","iconClockDark","iconClockDarkBlue","iconClockDarkGray","iconClockDarkGreen","iconClockDarkPurple","iconClockDarkPurpleWhite","iconClockDarkRed","iconEarnDark","iconEarnDarkPurple","iconSendDark","iconSwapDark","iconClockPreviewDark","iconClockPreviewDarkBlue","iconClockPreviewDarkGray","iconClockPreviewDarkGreen","iconClockPreviewDarkPurple","iconClockPreviewDarkPurpleWhite","iconClockPreviewDarkRed","useFocusAfterAnimation","getHideCounter","setHideCounter","showBottomBar","currentCounter","getIsBottomBarHidden","isExploreOpen","areAssetsActive","Assets","openSettings","closeSiteCategory","closeExplore","isHidden","setIsHidden","isWalletTabActive","handleWalletClick","handleExploreClick","handleSettingsClick","useHideBottomBar","hideBottomBar","buildStyle","RLottie","ensureRLottie","default","getRLottie","hex2rgb","hex","rgbToLab","rgb","z","startCallbacks","endCallbacks","useHeavyAnimation","onStart","lastOnStart","lastOnEnd","elementObserverMap","renderId","tgsUrl","playSegment","speed","noLoop","shouldStretch","quality","isLowPriority","forceInBackground","sharedCanvas","sharedCanvasCoords","onEnded","onLoop","containerRef","viewId","animation","setAnimation","animationRef","playKey","playRef","playSegmentRef","rgbColor","isUnmountedRef","newAnimation","coords","setSpeed","throttledInit","refOrElement","onIntersectionChange","onIntersectionChangeRef","callbackManager","IntersectionObserver","unobserve","useSharedIntersectionObserver","_animationRef$current","removeView","playAnimation","shouldRestart","isFrozen","playAnimationOnRaf","pauseAnimation","isPlaying","prevNoLoop","setNoLoop","prevSharedCanvasCoords","setSharedCanvasCoords","changeData","usePriorityPlaybackCheck","noTransition","nonInteractive","otherProps","isAnimationLoaded","markAnimationLoaded","setPlayKey","AnimatedSticker","loadedPreviewUrls","DEFAULT_SIZE","noAnimation","previewUrl","iconPreviewClass","thumbDataUri","noPreviewTransition","isPreviewLoaded","markPreviewLoaded","isAnimationReady","markAnimationReady","markAnimationNotReady","handlePreviewLoad","AnimatedIcon","label","placeholder","inputMode","isRequired","isMultiline","hasError","inputArg","wrapperClassName","onKeyDown","isPasswordVisible","setIsPasswordVisible","handleInput","finalType","inputFullClass","labelFullClass","htmlFor","scrollHeight","required","handleTogglePasswordVisibility","waitForAnimationEnd","animationName","fallbackMs","waitForEndEvent","detailedName","isHandled","handleAnimationEnd","TransitionEvent","propertyName","AnimationEvent","INERTIA_EASING","SWIPE_DISABLED_CLASS_NAME","swipeOffsets","cancelCurrentReleaseAnimation","isSwipeActive","captureControlledSwipe","_options$onSwipeLeftS","onSwipeLeftStart","_options$onSwipeRight","onSwipeRightStart","_onDrag","_onRelease","onCancel","updateAnimationProgress","elements","getAnimations","currentTime","getTiming","extractPositionFromTransform","transformRule","onMouseDown","DEFAULT_PIN_LENGTH","RESET_STATE_DELAY_MS","stickToFirst","resetStateDelayMs","isMinified","onBiometricsClick","onClearError","onSubmit","isFaceId","canRenderBackspace","isSuccess","prevIsPinAccepted","arePinButtonsDisabled","clearScrollPatch","timeoutId","char","handleBackspaceClick","dotsClassName","renderDots","PinPadButton","STICKER_SIZE","isBiometricAuthEnabled","operationType","cancelLabel","submitLabel","stickerSize","help","containerClassName","withCloseButton","noAnimatedIcon","inputWrapperClassName","forceBiometricsInMain","passwordRef","setPassword","localError","setLocalError","wrongAttempts","setWrongAttempts","isResetBiometricsWarningOpen","openResetBiometricsWarning","closeResetBiometricsWarning","isSubmitDisabled","canUsePinPad","handleBiometrics","biometricPassword","handleClearError","handleOpenSettings","handleSubmit","getPinPadTitle","actionName","modalStyles","AnimatedIconWithPreview","PinPad","shouldRenderFullWidthButton","footerButtonsClassName","footerButtons","footerButtonFullWidth","transitionContent","renderingError","renderBiometricPrompt","Input","buttonHalfWidth","buttonFullWidth","Modal","buttons","forceReflow","FALLBACK_ANIMATION_END","CLASSES","ACTIVE_SLIDE_CLASS_NAME","TO_SLIDE_CLASS_NAME","activeKey","nextKey","prevKey","renderCount","shouldRestoreHeight","shouldCleanup","cleanupExceptionKey","shouldWrap","wrapExceptionKey","slideClassName","withSwipeControl","onStop","onContainerClick","currentKeyRef","shouldDisableAnimation","rendersRef","prevActiveKey","isAnimatingRef","isSwipeJustCancelledRef","hasActiveKeyChanged","isBackwards","preservedRender","isSlideOptimized","prevActiveIndex","activeIndex","childElements","childElement","transition","transform","toSlide","fromSlide","endHeavyAnimation","clientHeight","performSlideOptimized","onAnimationEnd","watchedNode","giveUpAnimationEnd","currentSlide","nextSlide","onCancelForTransition","_cancelCurrentRelease","targetPosition","KeyframeEffect","keyframe","getKeyframes","position","extractAnimationEndPosition","currentDirection","animationTimingFunction","initialPositionPx","distance","dragOffset","newProgress","onCancelForClient","isRevertSwipe","cancel","releaseProgress","allowSwipeControlForTransition","flexBasis","asFastList","contents","render","rendered","ACTIVATION_EVENT_NAMES","ACTIVATION_EVENT_OPTIONS","SLIDES","getActivitySignal","setActivitySignal","autolockValue","isAppLockEnabled","isHardwareAccount","isNonNativeBiometricAuthEnabled","isManualLockActive","shouldHideBiometrics","appLockHideBiometrics","submitAppLockActivityEvent","setIsManualLockActive","appTheme","useAppTheme","coreWalletLogoPath","logoLightPath","logoDarkPath","isLocked","lock","unlock","shouldRenderUi","showUi","hideUi","lastActivityTime","slideForBiometricAuth","setSlideForBiometricAuth","passwordForm","passwordError","setPasswordError","handleActivity","handleActivityThrottled","afterUnlockCallback","autolockPeriod","forceLockApp","_getInAppBrowser2","handleLock","handleChangeSlideForBiometricAuth","handleSubmitPassword","handlePasswordChange","handleLockScreenHotkey","renderLogo","Image","transitionKey","Transition","isFixedSlide","PasswordForm","APP_VERSION_URL","connectLedgerAndGetHardwareState","newHardwareState","WaitingForBrowser","showActivityInfo","showTokenActivity","savedAddresses","currentTokenPeriod","isAuthFlow","isMnemonicImport","addAccount2","authState","startImportingWallet","startCreatingWallet","renameAccount","renameNotificationAccount","isBackupWalletModalOpen","isBluetoothAvailable","isUsbAvailable","detectAvailableTransports","availableTransports","initializeHardwareWalletConnection","shouldDelegateToNative","setHardwareStateToConnecting","tabs","active","windows","windowId","focused","createLedgerTab","popup","getCurrent","onRemoved","closedTabId","closeHardwareWalletModal","onLedgerTabClose","isHardwareModalOpen","LedgerConnectHardware","isInvestorViewEnabled","landscapeActionsActiveTabIndex","isSecurityWarningHidden","_ref18","_ref19","shouldShow","alwaysShownSlugsSet","alwaysHiddenSlugsSet","_ref20","_accountSettings$impo","remoteVersion","sanitizedRemoteVersion","getIsAppUpdateNeeded","isAppUpdateAvailable","latestAppVersion","confettiRequestedAt","showScanQrPopup","closeScanQrPopup","handleQrCode","currentQrScan","camera","isQrScannerOpen","_ref21","_linkParams$toAddress","linkParams","plainAddressData","qrData","newChain","getChainFromAddress","parsePlainAddressQr","_ref22","_ref23","chainForOnRampWidgetModal","_ref24","mediaId","mediaType","hiddenNfts","noGhostAnimation","isReceiveModalOpen","isInvoiceModalOpen","Ledger","isLoadingOverlayOpen","_ref25","isSensitiveDataHidden","clearDappConnectRequestError","transactionIdx","viewTransactionOnIdx","ConnectHardware","browserHistory","_accountState$browser","newHistory","currentUrl","currentSiteCategoryId","prevSettings","currentCollectionAddress","_nfts$selectedAddress2","addToSelectedAddresses","whitelistedNftAddressesSet","blacklistedNftAddressesSet","accountNfts","_nfts$selectedAddress3","removeFromSelectedAddresses","isVestingModalOpen","allSlugs","newOrderedSlugs","Activity","_payload$nfts","rest","nftTokenSlug","previousFeeTokenSlug","nextFeeTokenSlug","shouldClearFee","newToken","isExists","ACCENT_COLORS","useAccentColor","elementRefOrBody","accentColor","getAccentColorIndexFromNft","mtwCardType","mtwCardBorderShineType","UPDATE_THROTTLE","updateCacheThrottled","updateCache","updateCacheForced","unsubscribeFromBeforeUnload","preloadedData","isCaching","clearCaching","_unsubscribeFromBefor","reducedGlobal","reduceByAccountId","reducedSlugs","reducedIdsMain","pickVisibleActivities","reducedIdsBySlug","reducedNewestActivitiesBySlug","reducedIds","reduceAccountActivities","_Object$values$","reduceAccountStaking","visibleIdCount","initialState","timeEnd","_cached$tokenInfo","backupWallet","_accountState$balance","oldId","newId","testnetAccountId","clearActivities","areTokensWithNoBalanceHidden","areTokensWithNoPriceHidden","exceptionSlugs","migrateCache","loadMemoryCache","loadCache","initLedgerPage","selectHasSession","isImproved","testAndImprove","frames","lastFrameAt","mean","containerEl","boosterEl","improveView","ElectronEvent","focusScroller","originalFocus","isProgrammaticFocus","patchedFocus","_originalFocus","preventScroll","scrollToActiveElement","install","uninstall","createFocusScroller","enforceInstantScroll","_scrollTarget$dataset","scrollTarget","scrollPosition","focusScrollPosition","scrollIntoView","block","behavior","IS_DISABLED","tabKey","useSignalEffect","isFirstRun","_unsubscribesByEffect","cleanupEffect","resolverOrSignal","_dependencies","isAsync","valueRef","resolverRef","runCurrentResolver","isSync","currentResolver","useIntersectionObserver","rootCallback","rootRef","throttleMs","throttleScheduler","debounceMs","shouldSkipFirst","margin","controllerRef","rootCallbackRef","freezeFlagsRef","onUnfreezeRef","freeze","unfreeze","targetCallback","entriesAccumulator","observerCallback","observerCallbackSync","root","rootMargin","initController","controller","useGetIsIntersecting","targetRef","getIsIntersecting","setIsIntersecting","_signalRef$current","signalRef","useSignal","lastCallback","useOnIntersect","isIntersecting","observeIntersection","savedCallback","handleReload","reload","appInactivePathWebP","appInactivePathPng","app_name","useCurrentOrPrev","shouldForceCurrent","useScrolledState","isAtBeginning","setIsAtBeginning","isAtEnd","setIsAtEnd","isScrolled","handleScroll","PATH_BY_EMOJI","loadedImages","markLoaded","withNotch","closeClassName","onBackButtonClick","header_back","header_backIcon","handleBackClick","isInsideModal","handleContentScroll","aboutExtensionTitle","slide","ModalHeader","modalHeader","headerBack","iconChevron","headerTitle","content_noScroll","onScroll","logo","titleLink","rel","blockAbout","heading","Emoji","ninja","unicorn","extension_link","github","github_link","telegram","community_link","aboutFooterWrapper","aboutFooterContent","dotLarge","cleanAuthError","addAccount","container_scrollable","suggestions","onSelect","suggest","embedded","suggestion","nextId","labelText","suggestionsPosition","markFocus","unmarkFocus","setHasError","filteredSuggestions","setFilteredSuggestions","activeSuggestionIndex","setActiveSuggestionIndex","areSuggestionsShown","setAreSuggestionsShown","wordlist","setWordlist","shouldRenderSuggestions","words","noError","isCorrectMnemonic","processSuggestions","userInput","unLinked","handleEnter","suggestedValue","nextInput","getElementById","select","wrapper_focus","wrapper_error","SuggestionList","touched","blur","onPaste","pastedValue","clipboardData","getData","_checkIndexes$map","checkIndexes","descriptionClassName","formClassName","errorClassName","setWords","hasMnemonicError","setHasMnemonicError","handleMnemonicCheckSubmit","answer","handleSetWord","InputMnemonic","closeCheckWordsPage","CheckWordsForm","openMnemonicPage","headerBackBlock","CheckWordsContent","START_BIOMETRICS_CONFIRMATION_DELAY_MS","afterCreateBiometrics","cancelCreateBiometrics","useTimeout","shouldRenderSteps","shouldRenderError","sticker","biometricsError","buttons__inner","btn","btnHalfWidth","cancelConfirmPin","pinConfirm","setPinConfirm","setError","isConfirmed","setIsConfirmed","handleChange","containerFullSize","pinPadHeader","skipCheckMnemonic","openAuthBackupWalletModal","canSkipMnemonicCheck","info__space","btn_wide","btn_single","btn_push","startCreatingBiometrics","skipCreateBiometrics","btn_text","afterCreateNativeBiometrics","isTouchId","faceIdSvg","touchIdSvg","biometricsIcon","biometricsTitle","biometricsSubtitle","SPECIAL_CHARS_REGEX","formId","isMobile","firstInputRef","isJustSubmitted","setIsJustSubmitted","firstPassword","setFirstPassword","secondPassword","setSecondPassword","isPasswordFocused","markPasswordFocused","unmarkPasswordFocused","isWeakPasswordModalOpen","openWeakPasswordModal","closeWeakPasswordModal","isPasswordsNotEqual","setIsPasswordsNotEqual","isSecondPasswordFocused","markSecondPasswordFocused","unmarkSecondPasswordFocused","canSubmit","validation","requiredMinLength","requiredLength","isOnlyNumbers","invalidLength","setInvalidLength","noNumber","setNoNumber","noUpperCase","setNoUpperCase","noLowerCase","setNoLowerCase","noSpecialChar","setNoSpecialChar","noEqual","setNoEqual","isInvalidLength","usePasswordValidation","handleFirstPasswordChange","handleSecondPasswordChange","isWeakPassword","rule","formWidgets","passwordRules","getValidationRuleClass","renderErrors","buttonsNoExtraSpace","ruleHasError","passwordRule","invalid","valid","getFormId","withDescription","titleSmallMargin","CreatePasswordForm","setPin","INTERVAL","markOne","two","markTwo","three","markThree","oneClassNames","twoClassNames","threeClassNames","counterTitle","counterDigit","onSkip","handleBackupClick","disclaimerBackupDialog","backupNotice","backupNoticeButtons","btn_mini","isImport","cancelDisclaimer","isInformationConfirmed","markInformationConfirmed","unmarkInformationConfirmed","setIsInformationConfirmed","handleCloseBackupWarningModal","handleSkipMnemonic","stickerAndTitle","infoBlock","Checkbox","informationCheckbox","informationCheckboxContent","AuthBackupWarning","MNEMONIC_INPUTS","MAX_LENGTH","afterImportMnemonic","setMnemonic","handleMnemonicSet","pastedMnemonic","_document$activeEleme","handlePasteMnemonic","pastedText","_document$activeEleme2","parsePastedText","useClipboardPaste","handlePaste","mnemonicValues","handleCancel","title_afterSmallSticker","infoSmallFont","infoPull","importingContent","getSuggestPosition","footerError","footerButton","w","customStickerClassName","customButtonWrapperClassName","isFullSizeButton","isFirstCheckboxSelected","isSecondCheckboxSelected","isThirdCheckboxSelected","textFirst","textSecond","textThird","onFirstCheckboxClick","onSecondCheckboxClick","onThirdCheckboxClick","openCreateBackUpPage","firstChecked","setFirstChecked","secondChecked","setSecondChecked","thirdChecked","setThirdChecked","SafetyRulesContent","word","buttonText","SecretWordsList","openCheckWordsPage","wordsCount","containerAlignTop","SecretWordsContent","openAbout","openHardwareWalletModal","isLogoReady","markLogoReady","btn_about","importButtonsBlock","importText","importButtons","RENDER_COUNT","_useCurrentOrPrev","closeAbout","renderingAuthState","setPrevKey","setNextKey","updateRenderingKeys","renderAuthScreen","isFrom","AuthStart","AuthCreatingWallet","AuthCheckPassword","AuthCreatePin","AuthConfirmPin","AuthCreateBiometrics","AuthConfirmBiometrics","AuthCreateNativeBiometrics","AuthCreatePassword","AuthCreateBackup","AuthDisclaimer","AuthImportMnemonic","SettingsAbout","AuthSafetyRules","AuthSecretWords","AuthCheckWords","transitionContainer","transitionSlide","resolveSlideTransitionName","useModalTransitionKeys","renderingKey","updateNextKey","useCardCustomization","cardNft","mtwCardTextType","withTextGradient","mtwCardTextTypeClass","backgroundImageUrl","classNames","borderShineType","canEditAccount","onEdit","addressOrMultichain","mtwCardClassNames","withCheckbox","customCard","account_current","account_disabled","accountName","accountFooter","iconLedger","accountAddress","accountCheckMark","accountCheckMark_active","accountLength","accounts_single","accounts_two","ConfirmTransactionState","onTryAgain","activeState","setActiveState","Waiting","renderContent","isActiveSlide","textBlock","textBlock_small","actionBlock","actionBlock_single","button_single","renderWaitingConfirm","isErrorDetailed","declinedLabel","declinedLabelDetailed","renderTryAgain","usePrevDuringAnimationSimple","durationMs","setPrev","captureEscKeyListener","captureKeyboardListener","ANIMATION_DURATION","menuRef","bubbleClassName","positionX","positionY","transformOriginX","transformOriginY","autoClose","shouldSkipTransition","withPortal","noCloseOnBackdrop","onMouseEnter","onMouseLeave","bubbleRef","menu","useVirtualBackdrop","fullBubbleClassName","bubble","transformOriginYStyle","transformOriginXStyle","inPortal","selectedValue","anchorPosition","menuPosition","menuPositionHorizontal","menuStyle","shouldTranslateOptions","buttonClassName","iconClassName","fontIconClassName","menuLeft","setMenuLeft","menuWidth","windowWidth","prevMenuStyle","Menu","fullButtonClassName","item_with_icon","dangerous","withSeparator","separator","item_selected","handleItemClick","itemIcon","overlayIcon","itemOverlayIcon","fontIcon","itemName","description","itemDescription","spinner","inner","DEFAULT_ARROW","DEFAULT_MENU_POSITION_HORIZONTAL","itemClassName","menuClassName","arrow","isMenuOpen","openMenu","closeMenu","selectedItem","selectedItemName","_item$selectedName","handleSelect","buttonArrowIcon","buttonIcon","withMenu","isFullyInteractive","interactive","wide","buttonFullClassName","Spinner","insideButton","DropdownMenu","TRANSPORT_NAMES","usb","bluetooth","isStatic","onConnected","initializeHardwareWalletModal","selectedTransport","setSelectedTransport","isLedgerFailed","isTonAppFailed","isConnected","isConnecting","isWaitingForBrowser","shouldCloseOnCancel","renderingAvailableTransports","shouldRenderAvailableTransports","availableTransportsClassNames","handleConnected","isSingleWallet","handleCloseWithBrowserTab","closeAction","closeLedgerTab","getLedgerIconSrc","iconData","desktop","ledgerDesktopDarkSrc","ledgerDesktopSrc","mobileUsb","ledgerMobileUsbDarkSrc","ledgerMobileUsbSrc","ios","ledgerIosDarkSrc","ledgerIosSrc","mobileBluetooth","ledgerMobileBluetoothDarkSrc","ledgerMobileBluetoothSrc","settingsStyles","iconBlock","mobile","iconBlockSlide","ledgerIcon","textBlock_gap","textIcon","containerStatic","iconBlockSlideStatic","textBlock_success","text_failed","text_connected","text_success","dropdownBlock","Dropdown","item_small","isFailed","renderButtons","iconUrl","onDisconnect","shouldShowDisconnect","handleDisconnect","dappLogo","dappLogo_icon","dappIcon","dappInfo","dappName","dappUrl","dappDisconnect","hasConnectRequest","requiredPermissions","requiredProof","submitDappConnectRequestConfirm","submitDappConnectRequestConfirmHardware","cancelDappConnectRequestConfirm","setDappConnectRequestState","selectedAccount","setSelectedAccount","isConfirmOpen","openConfirm","closeConfirm","iterableAccounts","shouldRenderAccounts","handlePasswordCancel","submitDappConnectRequestHardware","handlePasswordSubmit","renderAccounts","AccountButtonWrapper","AccountButton","renderAccount","skeletonTransitionWrapper","dappInfoSkeleton","dapp_first","dappInfoIconSkeleton","dappInfoTextSkeleton","nameSkeleton","descSkeleton","accountWrapperSkeleton","DappInfo","dapp_push","footer","DappPassword","LedgerConnect","LedgerConfirmOperation","modalDialog","dappname","currentAccount","cancelDappTransfer","setDappTransferScreen","handleAgree","transactionDirection","transactionAccount","accountTitle","accountBalance","transactionDapp","descriptionContent","withTonExplorer","withMediaViewer","openMediaViewer","tonExplorerTitle","ton_explorer_name","handleClickInfo","Nft","thumbnail","Filesystem","FilesystemWeb","Share","ShareWeb","tryCapacitorShare","share","tryNavigatorShare","DEFAULT_THRESHOLD","removeFromSavedAddress","handleDeleteSavedAddress","MENU_ITEM_HEIGHT_PX","COMFORT_MARGIN_PX","isMultichainAccount","_addressUrl","addressUrl","isTransaction","spoiler","spoilerRevealText","spoilerCallback","copyNotification","noSavedAddress","noExplorer","textClassName","noDimming","withShareInMenu","addSavedAddress","addressNameRef","isSaveAddressModalOpen","openSaveAddressModal","closeSaveAddressModal","isDeleteSavedAddressModalOpen","openDeletedSavedAddressModal","closeDeleteSavedAddressModal","savedAddressName","setSavedAddressName","isConcealedWithSpoiler","revealSpoiler","isAddressAlreadySaved","savedAddress","saveAddressTitle","explorerTitle","withSavedAddresses","withExplorer","handleSaveAddressSubmit","handleCopy","handleShare","shareData","shareUrl","handleTonExplorerOpen","isActionsMenuOpen","menuItems","handleMenuShow","handleMenuItemSelect","closeActionsMenu","menuHandlers","setMenuPosition","setAnchorPosition","isWalletAddress","withShare","_menuHandlers","changedTouches","clientX","getBoundingClientRect","menuHeight","useDropdownMenu","addressBook","shouldUseMenu","menuBackdrop","longPressHandlers","isLongPressActive","isPressed","timerId","canProcessEvent","onMouseUp","onTouchStart","onTouchEnd","onTouchCancel","useLongPress","handleRevealSpoiler","renderedContent","MEANINGFUL_CHAR_LENGTH","prefix","suffixStart","middle","meaningfulPart","dimmedPart","scam","scamImg","scamImage","chainIcon","shortAddress","menuCustomBackdrop","menuCustomBackdropVisible","wrapperVisible","wrapperHide","onContextMenu","isConcealed","commentContainer","button_spoiler","renderContentOrSpoiler","iconCaretDown","menuItem","menuIcon","iconStar","iconShare","renderActions","nameInput","DeleteSavedAddressModal","tokensBySlug","amountTerms","payloadFieldTerm","_token$decimals","_token$symbol","totalCost","sum","getTotalCost","payloadField","PRECISION_PREFIX","exact","approximate","lessThan","STARS_TOKEN","UNKNOWN_TOKEN","TOKEN_ICONS","_findChainConfig$nati","shouldPreferIcons","termClassName","symbolClassName","termList","firstDefinedTerm","tokenType","term","_firstDefinedTerm","convertTermsObjectToList","symbolNode","restProps","FeeDetailsContent","realFeePrecision","excessFeePrecision","extraContent","Fee","full_fee","excess_symbol","chain_name","keepDetailsButtonWithoutFee","onDetailsClick","FeeLineContainer","detailsModalContent","detailsModalExplanation","fee_amount","received_amount","warningForPayload","isDetailsModalOpen","openDetailsModal","closeDetailsModal","FeeLine","FeeDetailsModal","explanationWarning","realReceived","DappReturnedDetailsModal","isPayloadExpanded","expandPayload","payloadElement","record","category","votingAddress","vote","renderPayload","NftInfo","InteractiveTextField","displayedToAddress","dataField","receivingAddress","DappAmountField","amountBySlug","renderAmount","_transaction$payload","renderPayloadLabel","payloadField_expanded","payloadFieldExpand","DappTransferFee","totalAmountsBySlug","totalFullFee","totalReceived","showDappTransfer","submitDappTransferConfirm","isSingleTransaction","renderingTransactions","sortedTransactions","sortingCost","getTransactionCostForSorting","transaction0","transaction1","sortTransactions","renderTransactionRow","amountText","transactionRow","transactionRowAmount","transactionRowAddress","transactionRowChevron","DappTransfer","hasAmount","transactionList","renderTransactions","buttonsAfterFee","tonAmount","cost","isMediaViewerOpen","_transactions$length","withPayloadWarning","clearDappTransferError","submitDappTransferPassword","submitDappTransferHardware","isDappLoading","needsExtraHeight","handleTransferPasswordSubmit","handleLedgerConnect","handleResetTransfer","renderRow","isLarge","rowContainerSkeleton","rowContainerLargeSkeleton","rowTextSkeleton","rowTextLargeSkeleton","rowSkeleton","rowLargeSkeleton","transactionDirectionLeftSkeleton","nameDappSkeleton","descDappSkeleton","transactionDirectionRightSkeleton","transactionDappIconSkeleton","dappInfoDataSkeleton","renderWaitForConnection","DappTransferInitial","DappLedgerWarning","renderSubTransaction","renderPassword","modalDialogExtraHeight","Dialog","DialogWeb","_dialog$title","dismissDialog","openModal","closeModal","isElectronUpdateDownloaded","setIsElectronUpdateDownloaded","isElectronAutoUpdateEnabled","setIsElectronAutoUpdateEnabled","_window$electron3","removeUpdateErrorListener","UPDATE_ERROR","removeUpdateDownloadedListener","UPDATE_DOWNLOADED","getIsAutoUpdateEnabled","_window$electron4","installUpdate","withTitle","isDragging","screenX","screenY","handleMousedown","handleDrag","handleDoubleClick","useElectronDrag","handleMinimize","minimize","handleMaximize","getIsMaximized","unmaximize","maximize","handleClose","_window$electron5","_window$electron6","UpdateApp","useTelegramMiniAppSwipeToClose","isSwipeDisabledRef","contentSelector","scrollLeft","usePrevious2","prevRef","lastRef","clickArg","isSeparator","openSiteCategory","bigSites","smallSites","handleCategoryClick","site","MEMO_EMPTY_ARRAY","RERENDER_DAPPS_FEED_DELAY_MS","ORIGIN_REPLACEMENTS_BY_ORIGIN","originalUrl","replacementUrl","updateDappLastOpenedAt","openDapp","dappStyles","renderIcon","HIDDEN_FROM_FEED_DAPP_ORIGINS","dappsFromState","openSettingsWithState","lastOpenedAt","compareDapps","isPillMode","iconWrapperClassName","useHorizontalScroll","exploreStyles","sectionHeader","DappFeedItem","renderDapp","Dapps","aLastOpened","bLastOpened","connectedAt","extendedIcon","withBorder","badgeText","isTrending","extended","trending","imageWrapper","imageWrapperScalable","trendingImage","infoWrapper","badge","_global$exploreData","categories","categoryId","CategoryHeader","Site","shouldRestrict","originalSites","loadExploreSites","removeSiteFromBrowserHistory","inputRef","suggestionsTimeoutRef","transitionRef","trendingContainerRef","searchValue","setSearchValue","isSearchFocused","markSearchFocused","unmarkSearchFocused","isSuggestionsVisible","showSuggestions","hideSuggestions","prevSiteCategoryIdRef","filteredSites","canBeRestricted","searchSuggestions","historyResult","sitesResult","isEmpty","trendingSites","allSites","isFeatured","trendingList","filteredCategories","_allSites$category$id","safeShowSuggestions","safeHideSuggestions","openSite","validProtocols","urlObject","isValidUrl","prevIsSearchFocused","handleSiteClick","handleSearchValueChange","handleMenuClose","_inputRef$current","handleSearchSubmit","isContentActive","main","searchWrapper","searchContainer","searchIcon","searchInput","suggestionsMenu","_searchSuggestions$hi","MenuItem","suggestionIcon","suggestionAddress","clearSuggestion","handleSiteClear","_searchSuggestions$si","DappFeed","trendingSection","landscapeList","Category","currentSiteCategory","SiteList","emptyList","emptyListLoading","emptyListTitle","rootSlide","afterSelectHardwareWallets","loadMoreHardwareWallets","selectedAccountIndices","setSelectedAccountIndices","handleAccountToggle","handleAddLedgerWallets","alreadyConnectedList","handleAddWalletClick","_list$index","_list","areAccountsSelected","isActiveAccount","accountCurrencyIcon","addAccountContainer","addAccountIcon","LedgerModalState","setCurrentSlide","SelectWallets","handleAddLedgerWallet","handleLedgerModalClose","LedgerSelectWallets","modalDialogInsideSettings","metaViewport","defaultViewportContent","allowedZoomViewportContent","formatTransferUrl","CHAIN_ICON_MAP","avalanche","avalancheBlockchainIcon","bitcoin","bitcoinBlockchainIcon","bitcoin_cash","bitcoincashBlockchainIcon","binance_smart_chain","bnbBlockchainIcon","binance_dex","cardano","cosmos","dash","doge","eos","ethereum","ethereum_classic","internet_computer","iota","litecoin","monero","polkadot","ripple","solana","stellar","zcash","getChainNetworkIcon","networkName","_CHAIN_ICON_MAP$netwo","withChainIcon","isLoadingError","markLoadingError","fallbackIcon","blockchainIcon","noChainIcon","minWidth","CHARACTER_WIDTH","BUTTON_WIDTH","useSelectorWidth","buttonTransitionKeyRef","tokenToRender","TokenIcon","getPseudoRandomNumber","seed","numberSeed","stringToNumberSeed","randomFraction","NETWORK_NAMES_EXCEPTIONS","getChainNetworkName","_NETWORK_NAMES_EXCEPT","resolverOrDependency","getValue","STEPS","FROM","SKIN_COLORS","lightTheme","darkTheme","cardLightText","cardDarkText","cardGoldText","purple","sample","cols","rows","cellSize","skin","canvasRef","cellSizeDpr","animationStateRef","opacityValues","steps","lastSpeedChangeAt","isRendered","getIsInBackground2","getShouldAnimate","useDerivedSignal","canvas","ctx","getContext","renderOptions","frameDuration","shouldChangeSpeed","clearRect","row","col","_state$steps","_row","_state$steps$_row","_state$opacityValues","_row2","_state$opacityValues$","_state$opacityValues$2","_state$steps$row","_col","_state$steps$row$_col","nextOpacity","fillStyle","fillRect","renderFrame","align","maskSkin","shouldHoldSize","maskClassName","setIsSensitiveDataHidden","contentRef","shouldRenderSpoiler","isSpoilerVisible","spoilerClassName","hidden","wrapperStyle","fixedWidth","SensitiveDataMask","SearchState","EMPTY_ARRAY","EMPTY_OBJECT","_global$settings$impo","_global$currentSwap","userTokens","selectAvailableUserForSwapTokens","popularTokens","selectPopularTokens","swapTokens","userTokensProp","popularTokensProp","shouldFilter","shouldUseSwapTokens","shouldHideMyTokens","shouldHideNotSupportedTokens","selectedChain","onTokenSelect","resetImportToken","shortBaseSymbol","scrollContainerRef","searchInputRef","isResetButtonVisible","setIsResetButtonVisible","setRenderingKey","searchTokenList","setSearchTokenList","filterTokens","_pairsBySlug$tokenInS","filterAndSortTokens","filterSupportedTokens","allTokens","userTokensWithFilter","popularTokensWithFilter","swapTokensWithFilter","filteredTokenList","_tokensToFilter$filte","tokensToFilter","untrimmedSearchValue","lowerCaseSearchValue","filteredTokens","isName","isSymbol","isKeyword","sortFactors","searchResultToken","factors","tickerExactMatch","tickerMatchLength","nameMatchLength","specialOrder","tokenSymbol","tokenName","comparisonResult","compareTokens","resetSearch","isValidAddress","newRenderingKey","Loading","TokenByAddress","Search","isSwap","handleTokenClick","selectedToken","_searchInputRef$curre","renderToken","descriptionText","tokenPrice","Token","renderTokenGroup","shouldShowSettings","tokenGroupContainer","tokenGroupHeader","tokenGroupTitle","tokenGroupAdditionalTitle","renderTokenSkeleton","tokenContainer","tokenContainerDisabled","tokenLogoContainer","logoContainer","tokenLogoSkeleton","tokenNetworkLogoSkeleton","nameContainer","tokenNameSkeleton","tokenValueSkeleton","tokenPriceContainer","rotateSkeleton","renderSearchResults","tokenToImport","tokenNotFound","tokenNotFoundTitle","tokenNotFoundDesc","tokenSelectInputWrapper","tokenSelectSearchIcon","tokenSelectInput","tokenSelectSearchResetWrapper","tokenSelectSearchReset","tokenSelectSearchResetIcon","tokenSelectContent","tokenLogo","tokenLogoDisabled","tokenTextDisabled","tokenNetwork","SensitiveData","tokenValue","isFilterActive","buildContentHtml","withRadix","hasDot","formattedWholePart","fractionStr","suffixStr","shouldGetParentWidth","isFontChangedRef","measureEl","updateFontScale","offsetParent","parentElement","paddingLeft","paddingRight","scrollWidth","clearText","_text$trim$replace$re","inputClassName","labelClassName","valueClassName","cornerClassName","onPressEnter","onInputClick","markHasFocus","unmarkHasFocus","useFontScale","textRef","updateHtml","newText","html","restoreCaretPosition","_clearedValue$","selection","getSelection","rangeCount","getRangeAt","setStart","clearedValue","NODE_TYPE","NodeFilter","SHOW_TEXT","createTreeWalker","elem","FILTER_REJECT","FILTER_ACCEPT","nextNode","getTextNodeAtPosition","removeAllRanges","newRange","setEnd","addRange","saveCaretPosition","inputWrapperFullClass","labelTextClassName","cornerFullClass","_e$currentTarget$text","_selectedToken$decima","closeInvoiceModal","isTokenSelectorOpen","openTokenSelector","closeTokenSelector","amountValue","setAmountValue","setComment","setSelectedToken","invoiceUrl","handleTokenSelect","contentTitle","RichNumberInput","SelectTokenButton","tokenButton","invoiceComment","labelForInvoice","invoiceLinkField","Selector","TokenSelector","stopById","EMPTY_RECT","useMenuPosition","anchor","getTriggerElement","getRootElement","getMenuElement","getLayout","setPositionX","setPositionY","setTransformOriginX","setTransformOriginY","withScroll","setWithScroll","setMenuStyle","triggerEl","anchorX","anchorY","menuEl","rootEl","marginTop","menuElWidth","menuElHeight","menuRect","rootRect","horizontalPosition","verticalPosition","triggerRect","addedYForPortalPositioning","addedXForPortalPositioning","leftWithPossibleNegative","menuMaxHeight","offsetX","offsetY","previousActiveTab","onMenuItemClick","tabRef","hasMenu","tabEl","prevTabEl","platformEl","prevPlatformEl","shiftLeft","offsetLeft","scaleFactor","SCROLL_DURATION","activeTab","big","onSwitchTab","activeTabElement","activeTabOffsetLeft","activeTabOffsetWidth","newLeft","containerWidth","scrollId","remainingPath","isStopped","scrollSnapType","startAt","currentPath","animateHorizontalScroll","openInvoiceModal","closeReceiveModal","isSwapAllowed","isOnRampAllowed","handleBuyFiat","handleSwapClick","handleReceiveClick","qrCode","useQrCode","hiddenClassName","hideLogo","withFormatTransferUrl","setIsInitialized","logoUrl","qrCodeRef","QrCodeStyling","dotsOptions","cornersSquareOptions","imageOptions","imageSize","crossOrigin","qrOptions","errorCorrectionLevel","_qrCode","_options","verifyHardwareAddress","qrCodeHidden","qrClassNames","qrCodeStatic","contentTitleQr","copyButtonStatic","addressWrapper","contentTitleLedger","contentTitleLedgerStatic","dottedLink","TonActions","canBuyWithCard","TronActions","setActiveTab","TonContent","TronContent","_tabs$activeTab","TabList","tabsInModal","contentWrapper","contentStatic","modalTitle","iosModalDialog","receiveHeader","receiveHeaderNoTabs","Content","imageUrl","secondText","tokenIcon","nftIcon","bold","firstButtonText","secondButtonText","onFirstButtonClick","onSecondButtonClick","amountString","amountFraction","amountSymbol","useTransitionActiveKey","didUpdate","isAllMode","onAmountClick","getNumberRegex","zeroValue","isSensitiveData","sensitiveDataMaskSkin","prevValueRef","renderValue","inputValue","noFallbackToPrev","contentEl","valueRegex","ACTIVE_STATES","runThrottled","_accountState$staking","apiError","_nativeToken$amount","submitStakingInitial","fetchStakingFee","cancelStaking","isSafeInfoModalOpen","openSafeInfoModal","closeSafeInfoModal","setAmount","isIncorrectAmount","setIsIncorrectAmount","isInsufficientBalance","setIsInsufficientBalance","isInsufficientFee","setIsInsufficientFee","isBelowMinimumAmount","setIsBelowMinimumAmount","shouldUseAllBalance","setShouldUseAllBalance","stakingType","tvl","dailyReward","apr","calcJettonStakingApr","isNativeToken","nativeSlug","nativeBalance","hasAmountError","minAmount","doubleNetworkFee","shouldLeaveForUnstake","validateAndSetAmount","newAmount","dropDownItems","handleMaxAmountClick","handleAmountChange","stringValue","handleChangeStaking","welcome","welcome_static","sticker_static","welcomeInformation","welcomeInformation_static","stakingApy","annual_yield","textButton","AmountFieldMaxButton","inputRichStatic","amountInput","tokenDropdown","tokenDropdownItem","amountBottomWrapper","amountBottomWrapper_static","amountBottom","_nativeToken$symbol","minAmountValue","balanceError","amountBottomRight","amountBottomRight_error","amountBottomRight_slide","renderBottomRight","balanceResult","RichNumberField","balanceResultWrapper","balanceResultInput","balanceResultLabel","renderStakingResult","stakingSafeDialog","jvault_link","renderSafeInfoModal","IS_OPEN_STATES","setStakingScreen","clearStakingError","submitStakingPassword","submitStakingHardware","renderedStakingAmount","setRenderedStakingAmount","handleTransferSubmit","handleViewStakingInfoClick","StakingInitial","TransactionBanner","transactionBanner","renderTransactionBanner","TransferResult","renderComplete","submitStakingClaim","submitStakingClaimHardware","cancelStakingClaim","isNativeEnough","withModalHeader","handleHardwareSubmit","feeClassName","renderInfo","useDebouncedCallback","noLast","useWindowSize","initialWidth","initialScreenHeight","setWidth","setHeight","setScreenHeight","isResizing","setIsResizing","setIsResizingDebounced","throttledSetIsResizing","throttledSetSize","newWidth","newHeight","newScreenHeight","handleResize","tonToken","profit","amountCols","endOfStakingCycle","selectAccountStakingTotalProfit","startUnstaking","startStakingClaim","fetchStakingHistory","hasHistory","shouldRenderSpinner","spinnerClassNames","shouldRenderTotalAmount","totalAmountClassNames","useInterval","handleStakeClick","handleUnstakeClick","handleClaimClick","stakingResult","stakingInfo_modal","stakingInfoNoHistory","stakingTransition","stakingInfoClose","balanceStakedLabel","balanceStakedResult","stakingInfoLoading","stakingInfoLoadingAnimation","tokenDropdownMenu","unstakeTime","unstakeTime_purple","unstakeTimeIcon","stakingInfoButtons","stakingInfoButtonsWithMargin","stakingInfoButton","rewardString","renderRewards","history_static","historyTotal","historyTotalValue","historyTitle","historyList","historyList_static","StakingProfitItem","withBackground","stakingInfoModalContent","StakingInfoContent","FULL_SIZE_NBS_STATES","isNominators","_stakingInfo$round","_stakingInfo$liquid$a","_stakingInfo$liquid","setHasAmountError","isLongUnstake","setIsLongUnstake","setUnstakeAmount","successUnstakeAmount","setSuccessUnstakeAmount","isInstantUnstake","unstakeDate","setUnstakeDate","amountInCurrency","renderingAmountInCurrency","isUnstakeDisabled","shouldRenderCurrency","currencyClassNames","refreshUnstakeDate","handleStartUnstakeClick","renderUnstakeTimer","tonIcon","tonName","shouldShowInfo","unstakeInfo","renderUnstakeInfo","newAppVersion","calcVestingAmountByStatus","statuses","currentAcc","isUnfreezeRequested","mycoin","closeVestingModal","startClaimingVesting","currentlyFrozenAmount","currentlyReadyToUnfreezeAmount","isDisabledUnfreeze","handleStartClaimingVesting","volume","initialAmount","isInteractive","endsAt","submitClaimingVesting","submitClaimingVestingHardware","cancelClaimingVesting","clearVestingError","claimAmount","BUTTON_ANIMATION_DURATION","_limits$fromMin","_tokenIn$symbol","_limits$fromMax","_tokenIn$symbol2","isSending","isNotEnoughNative","isPriceImpactError","isErrorExist","shouldSendingBeVisible","errorMsgByType","isTouched","textStr","transitionKeyRef","renderThrottled","throttledResolver","useThrottledResolver","useThrottledSignal","renderedText","swapArrowIcon","footerButtonWrapper","useDerivedState","BTC","FIAT","getCurrencyPriority","getSwapRate","fromToken","toToken","shouldTrimLargeNumber","firstCurrencySymbol","secondCurrencySymbol","fromAmountBig","toAmountBig","fromPriority","ratio","isLargeNumber","IS_WHOLE_PART_BIG_REGEX","setSwapDex","selectedDexLabel","setSelectedDexLabel","renderedDexItems","renderedCurrentDexLabel","renderedBestRateDexLabel","isBestRateSelected","confirmLabel","dex_name","handleDexConfirm","shouldRenderBenefit","benefitAmount","bestRateEstimate","otherEstimate","isDirectSwap","ourFeeValue","benefit","calculateBenefitAmount","renderedAmounts","formattedAmount","regex","getNumberParts","wholePartRaw","dotPart","formatDexItemAmount","buttonContent","rate","DedustPath","StonfiPath","renderedDexItem","ARROW_WIDTH","GAP","emoji","tooltipClassName","iconRef","tooltipRef","tooltipStyle","arrowStyle","randomTooltipKey","handleClickOutside","tooltipWidth","tooltipHeight","tooltipCenter","arrowPosition","horizontalOffset","tooltipVerticalStyle","tooltipHorizontalStyle","arrowHorizontalStyle","arrowVerticalStyle","SLIPPAGE_VALUES","SwapSettings","showFullNetworkFee","onNetworkFeeClick","setSlippage","canEditSlippage","isSlippageFocused","markSlippageFocused","unmarkSlippageFocused","currentSlippage","setCurrentSlippage","priceImpactError","slippageError","handleSave","handleInputChange","advancedInput","slippageList","advancedSlippageButton","balanceLink","dot","advancedSlippageContainer","advancedSlippage","renderSlippageValues","IconWithTooltip","advancedTooltipMessage","advancedTooltipContainer","advancedTooltip","advancedError","slippageLabel","advancedSlippageError","advancedBlock","advancedRow","advancedDescription","advancedValue","ValuePlaceholder","renderRate","actualFee","feeElement","advancedLink","advancedLinkIcon","renderNetworkFee","percent","SwapSettingsModal","advancedPlaceholder","_nativeUserTokenIn$am","_tokenIn$amount","_explainedFee$fullFee2","_explainedFee$fullFee3","setSwapAmountIn","setSwapAmountOut","switchSwapTokens","estimateSwap","setSwapScreen","loadSwapPairs","setSwapCexAddress","authorizeDiesel","inputInRef","inputOutRef","currentTokenInSlug","currentTokenOutSlug","accountIdPrev","nativeTokenInSlug","nativeUserTokenIn","amountInBigint","amountOutBigint","balanceIn","isEnoughBalance","_fullNetworkFee$nativ2","swapAmountInBigint","networkNativeFeeBigint","isBalanceSufficientForSwap","isEnoughNative","isDieselNotAuthorized","hasAmountInError","amountOutValue","hasInsufficientFeeError","isCrosschain","isBuyAmountInputDisabled","handleBuyAmountInputClick","_pairsBySlug$currentT","useReverseProhibited","handleEstimateSwap","debounceSetAmountIn","debounceSetAmountOut","currentSubModal","openSettingsModal","openFeeModal","closeSubModal","_explainedFee$realFee3","isFeeModalAvailable","currentModal","setCurrentModal","useSubModals","intervalId","handleAmountInChange","handleSelectTokenInModalOpen","SelectTokenFrom","handleSelectTokenOutModalOpen","SelectTokenTo","handleAmountOutChange","handleSwitchTokens","inputContainer","inputLabel","amountInputInner","swapCornerTop","swapCornerStaticTop","swapButtonWrapper","swapButtonWrapperStatic","AnimatedArrows","amountInputBuy","swapCornerBottom","swapCornerStaticBottom","SwapDexChooser","footerBlock","footerBlockStatic","feeLine","renderFee","priceImpactStatic","priceImpactSticker","priceImpactContent","priceImpactTitle","priceImpactArrow","priceImpactDescription","renderPriceImpactWarning","changellyInfo","changellyInfoStatic","changellyInfoTitle","changellyIcon","changellyInfoDescription","policy","kyc","renderChangellyInfo","SwapSubmitButton","shouldAnimate","hasAnimation","startAnimation","stopAnimation","renderArrow","isInverted","arrowContainer","arrowContainerInverted","arrowOld","animateDisappear","arrowNew","animateAppear","swapButton","isQrScannerSupported","useQrScannerSupport","isSupported","supported","isCollapsed","expand","shouldRenderExpander","LIMIT","renderedNfts","COMMENT_DROPDOWN_ITEMS","AUTHORIZE_DIESEL_INTERVAL_MS","INPUT_CLEAR_BUTTON_ID","doesSavedAddressFitSearch","searchQuery","isMemoRequired","isEncryptedCommentSupported","fetchTransferFee","fetchNftFee","setTransferAmount","setTransferToAddress","setTransferComment","setTransferShouldEncrypt","cancelTransfer","requestOpenQrScanner","toAddressRef","addressBookTimeoutRef","transferToken","shouldRenderPasteButton","setShouldRenderPasteButton","isAddressFocused","markAddressFocused","unmarkAddressFocused","isAddressBookOpen","openAddressBook","closeAddressBook","savedAddressForDeletion","setSavedAddressForDeletion","savedChainForDeletion","setSavedChainForDeletion","toAddressShort","SHORT_ADDRESS_SHIFT","isAddressValid","otherAccountIds","shouldUseAddressBook","shouldDisableClearButton","withPasteButton","withAddressClearButton","_fullFee$token2","_fullFee$native2","transferAmount","isFullTokenTransfer","tokenRequiredAmount","nativeTokenRequiredAmount","isBalanceSufficientForTransfer","isAmountMissing","isDisabledDebounce","authorizeDieselInterval","updateDieselState","runFunction","handleTokenChange","handleAddressBookClose","handleAddressFocus","caretPosition","newCaretPosition","handleAddressBlur","_e$relatedTarget","relatedTarget","handleAddressInput","newToAddress","handleAddressClearClick","handleQrScanClick","handleClear","handlePasteClick","handleAddressBookItemClick","handleDeleteSavedAddressClick","handleCommentChange","trimStringByMaxBytes","hasToAddressError","isAmountGreaterThanBalance","isCommentRequired","_amount","handleCommentOptionsChange","isFeeModalOpen","closeFeeModal","useFeeModal","renderedSavedAddresses","renderAddressItem","deleteLabel","onDeleteClick","renderedOtherAccounts","_savedAddresses$map","addressesToBeIgnored","uniqueAddresses","currentAddress","addressChain","withButton","shouldIgnoreErrors","NftChips","renderAddressBook","renderBalance","maxBytes","decoder","TextDecoder","encoded","TextEncoder","isSavedAddress","handleDeleteClick","TABS","Receive","activeTransferKey","isTransferWithComment","activeTabIndex","stakingStatus","setActiveTabIndex","isStaking","renderedBgHelpers","transferSlideClassName","contentBackgroundClassName","contentBgRef","contentFooterRef","lastHeightRef","adjustBg","_transitionRef$curren","_transitionRef$curren2","activeSlideSelector","transferQuery","rect","shouldRenderWithoutTransition","contentBgStyle","contentFooterStyle","componentObserver","ResizeObserver","contentBg","contentFooter","useTabHeightAnimation","slideContent","transferSlideContent","contentSlideStaked","isStakingAllowed","areNotAllTabs","isLastTab","transferKey","isAddBuyAnimating","playAddBuyAnimation","stopAddBuyAnimation","isSendAnimating","playSendAnimation","stopSendAnimation","isSwapAnimating","playSwapAnimation","stopSwapAnimation","isStakeAnimating","playStakeAnimation","stopStakeAnimation","stickerPaths","renderCurrentTab","isPrev","slideContentAddBuy","slideContentTransfer","TransferInitial","SwapInitial","handleSelectTab","notAllTabs","tabIcon","tabText","tabDecoration","tabDelimiter","tab_purple","tab_purpleText","inactive","unstakeRequested","contentHeader","firstActive","lastActive","contentHeaderInner","onEarnClick","openReceiveModal","addBuyButtonName","handleStartSwap","handleStartTransfer","handleAddBuyClick","handleEarnClick","calculateFullBalance","stakingStates","stakingStateBySlug","primaryValue","stakingAmount","primaryWholePart","primaryFractionPart","changeValue","currentPrice","changeFactor","changePercent","changeClassName","changeCourseUp","changeCourseDown","changePrefix","getSensitiveDataMaskSkinFromCardNft","useUpdateIndicator","updateStartedAt","setIsUpdating","timeElapsedSinceLastUpdateStarted","hasCardsInfo","openMintCardModal","shouldRenderMintCardsButton","mintCardsButtonClassNames","scheduledAnimationsCounter","resetCounterOnTickEnd","prevText","characters","_prevText$length","textLength","prevTextLength","charIndex","prevTextCharIndex","_text$charIndex","_text$charIndex2","_text$charIndex3","renderAnimatedCharacters","currentWalletVersion","canEdit","forceClose","accountClassName","accountSelectorClassName","menuButtonClassName","noSettingsButton","withAccountSelector","isInsideSticky","openAddAccountModal","openAccountSelector","closeAccountSelector","isEdit","openEdit","closeEdit","setInputValue","noSettingsOrQrSupported","withAddW5Button","accountsAmount","prevShouldForceAccountEdit","handleSensitiveDataToggle","handleSwitchAccount","handleSaveClick","handleAddV5WalletClick","WalletVersion","handleInputKeyDown","handleFullscreenToggle","exitFullscreen","handleManualLock","accountTitleClassName","handleOpenAccountSelector","_currentAccount$addre","dialogFullClassName","renderButton","renderAccountsSelector","chains","chainDropdownItems","handleCopyAddress","handleExplorerClick","addressContainer","menuStyles","menuItemName","menuFontIcon","menuExplorerIcon","explorerButton","currentCurrency","excludedCurrency","currencyList","handleBaseCurrencyChange","useCachedImage","useAsync","setIsLoading","setResult","wasCancelled","cachedResponse","createObjectURL","statusText","clone","getCachedImageUrl","revokeObjectURL","_nft$metadata","isSticky","noShowAnimation","onTransitionEnd","cardClassName","rootClassName","sticky","loaded","withShadow","shadow","onCardChange","prevNftRef","useLayoutEffectWithPrevDeps","useSyncEffectWithPrevDeps","prevNft","prevNftAddress","isMountRef","handleTransitionEnd","CustomCardBackground","TOKEN_CARD_COLORS","green","orange","pink","red","sea","tegro","blue","TOKEN_EXCEPTION_COLORS","prices","selectedIndex","imgClassName","onSelectIndex","boundingPoints","priceValues","points","scaleX","scaleY","getBasisPoint","indexesCount","point","tangent","firstPoint","getCurvePath","pCurrent","pMinus1","pMinus2","handleMouseMove","containerX","nextIndex","handleMouseLeave","onMouseMove","onTouchMove","activePoint","partialPath","getPath","renderSvg","ITEMS","currentPeriod","setCurrentTokenPeriod","handlePeriodChange","OFFLINE_TIMEOUT","DEFAULT_PERIOD","historyPeriods","_useMemo","_selectedHistoryPoint","onYieldClick","loadPriceHistory","isCurrencyMenuOpen","openCurrencyMenu","closeCurrencyMenu","isHistoryMenuOpen","openHistoryMenu","closeHistoryMenu","shouldUseDefaultCurrency","currencySymbol","selectedHistoryIndex","setSelectedHistoryIndex","prevHistoryIndex","lastPrice","bestState","tonUrl","refreshHistory","newPeriod","handleCurrencyChange","tokenLastUpdatedAt","tokenLastHistoryPrice","selectedHistoryPoint","tokenChangePrice","dateStr","initialPrice","_history$find","change","amountChange","withChange","historyStartDay","withExplorerButton","shouldHideChartPeriodSwitcher","closestColor","smallestDistance","tokenRgbColor","colorName","colorValue","rgbA","rgbB","l1","a1","b1","l2","a2","b2","c1","deltaC","deltaA","deltaB","deltaLKlsl","deltaCkcsc","deltaHkhsh","deltaE","calculateTokenCardColor","tokenCard","tokenInfoHeader","currencySwitcher","iconCaretSmall","CurrencySwitcher","tokenInfoSubheader","tokenTitle","apy","tokenChange","tokenChangeSensitiveData","tokenChangeSpoiler","TokenPriceChart","chart","chartImg","tokenHistoryPrice","tokenPriceDate","center","periodChooser","periodChooserHidden","ChartHistorySwitcher","tokenCurrentPrice","getTokenExplorerBaseUrl","getExplorerTokenUrl","tokenExplorerButton","renderExplorerLink","balanceUpdateStartedAt","forceCloseAccountSelector","onTokenCardClose","customCardClassName","setCustomCardClassName","setWithTextGradient","renderedToken","shouldRenderTokenCard","tokenCardTransitionClassNames","handleCardChange","hasGradient","dappDomain","renderingDappDomain","shouldRenderDappElement","dappClassNames","shouldRenderDapp","containerWrapper","loadingDotsContainer","backstage","CustomCardManager","containerInner","AccountSelector","iconCaretClassNames","iconCaretFraction","iconCaret","noAnimationCounter","balanceTransition","blurred","AnimatedCounter","changeSpoiler","CardAddress","MintCardButton","TokenCard","addNftsToBlacklist","closeNftCollection","closeHideNftModal","handleHide","number","getViewportSlice","sourceIds","listSlice","offsetId","indexForDirection","Forwards","newViewportIds","areSomeLocal","areAllLocal","Backwards","newIsOnTop","loadMoreBackwards","listIds","_currentStateRef$curr","withResetOnInactive","requestParamsRef","currentStateRef","viewportIds","isOnTop","prevSlug","resetScroll","prevListIds","prevIsDisabled","currentMiddleId","defaultOffsetId","getMore","DEFAULT_LIST_SELECTOR","DEFAULT_PRELOAD_BACKWARDS","DEFAULT_SENSITIVE_AREA","itemSelector","preloadBackwards","sensitiveArea","withAbsolutePositioning","noScrollRestore","noScrollRestoreOnTop","noFastList","cacheBuster","beforeChildren","scrollContainerClosest","onLoadMore","onDragOver","onDragLeave","stateRef","loadMoreForwards","scrollContainer","prevItems","listItemElements","newScrollTop","currentAnchor","newAnchorTop","currentAnchorTop","nextAnchor","isScrollTopJustUpdated","listLength","isNearTop","offsetTop","isNearBottom","isUpdated","nextAnchorTop","closestScrollContainer","handleNativeScroll","SWAP_HEIGHT","CHANGELLY_PENDING_STATUSES","CHANGELLY_EXPIRED_STATUSES","ONCHAIN_ERROR_STATUSES","_cex$status","_cex$status2","isError","isHold","isFromToncoin","isInternalSwap","statusClass","cexStatus","renderErrorMessage","priceWhole","priceFraction","renderCurrency","TRANSACTION_HEIGHT","NFT_EXTRA_HEIGHT","COMMENT_EXTRA_HEIGHT","ADDRESS_RELEASE_HEIGHT","doesNftExist","isStake","isDnsOperation","_savedAddresses$find","isLocal","doAttachmentsTakeAddressSpace","shouldGiveAddressSpaceToAttachment","operationColorClass","waitingIconName","handleNftClick","iconName","amountDisplayMode","isAddressShown","renderAddress","renderComment","THROTTLE_TIME","LIST_TOP_PADDING","DATE_HEADER_HEIGHT","_byChain","selectIsFirstTransactionsLoaded","isNewWallet","_activities$idsMain","selectIsNewWallet","swapTokensBySlug","activitiesUpdateStartedAt","nftsByAddress","totalTokensAmount","shouldShowSeparateAssetsPanel","idList","_bySlug$slug","activityList","_tokensBySlug$activit","activitiesById","activityIdList","activityMap","isHistoryEndReached","loadMore","FURTHER_SLICE","throttledLoadMore","useInfiniteScroll","isActivitiesEmpty","activityOffsetInfoById","offsetMap","lastActivityDayStart","isFirst","activityDayStart","isNewDay","isLastInDay","isFirstInDay","currentContainerHeight","lastViewportId","activityOffset","handleActivityClick","NewWalletGreeting","InfiniteScroll","activityInfo","isActivityActive","dateValue","formattedDate","dateWithLoader","renderDate","_stakingStateBySlug$a","_stakingStateBySlug$a2","Transaction","renderActivity","UNFREEZE_DANGER_DURATION","vestingStatus","unfreezeEndDate","isInvestorView","isVesting","renderedAmount","withYield","withLabel","fiatAmountCols","shouldRenderYield","renderYieldClassNames","renderYield","renderChangeIcon","renderStakingIcon","totalAmount","canRenderYield","renderDefaultView","_accountState$vesting","isSeparatePanel","onTokenClick","onStakedTokenClick","renderedTokens","renderedMycoin","userMycoin","activeStates","_states$filter","stakedTokens","shouldRenderStakedTokens","stakedTokenClassNames","shouldRenderVestingToken","vestingTokenClassNames","vestingAmount","onVestingTokenClick","loadMycoin","hasVesting","isMycoinLoaded","useVesting","viewportSlugs","viewportIndex","handleOpenTokenSettings","stateByTokenSlug","wrapperLoading","emptyListSeparate","indexInViewport","noTokens","noTokensText","noTokensHeader","noTokensDescription","openSettingsButton","MENU_ITEMS","selectNfts","burnNfts","openHideNftModal","nftFromCurrentCollection","renderedNft","handleMenuItemClick","collectionNfts","nftCollectionAddress","getExplorerNftCollectionUrl","handleMenuOpen","isChecked","ON_SALE_ITEM","TON_DNS_ITEM","SEND_ITEM","FRAGMENT_ITEM","GETGEMS_ITEM","TON_EXPLORER_ITEM","COLLECTION_ITEM","HIDE_ITEM","NOT_SCAM","UNHIDE","BURN_ITEM","SELECT_ITEM","INSTALL_CARD","RESET_CARD","INSTALL_ACCENT_COLOR","RESET_ACCENT_COLOR","useNftMenu","isNftBlacklisted","isNftWhitelisted","isNftInstalled","isNftAccentColorInstalled","openNftCollection","addNftsToWhitelist","openUnhideNftModal","clearCardBackgroundNft","clearAccentColorFromNft","getgemsBaseUrl","fragmentUrl","isOnFragment","isTonDns","isCard","onOpen","clearNftSelection","isLottie","shouldPlay","markHover","unmarkHover","lottie","useIsIntersecting","isHover","useLottie","isSelectionEnabled","isSelected","shouldRenderWarning","warningTransitionClassNames","handleOpenMenu","handleCloseMenu","Radio","NftMenu","clearNftsSelection","hasSelection","nft_marketplace","_selectedAddresses$le","selectAllNfts","handleSendClick","_map","handleBurnClick","_map2","handleHideClick","activeNftKey","_vesting$info","tokensCount","tabsRef","hasNftSelection","numberOfStaking","_states$filter$length","handleNftCollectionClick","handleNftsMenuButtonClick","HiddenNfts","nftCollections","collections","collentionAddresses","shouldRenderHiddenNftsSection","blacklistedAddressesSet","NotcoinVouchers","handleSwitchTab","stickyElm","rootMarginTop","intersectionRatio","handleClickAsset","Nfts","NftSelectionHeader","NftCollectionHeader","HideNftModal","getThemeColorMetaElement","isLight","metaThemeColor","onOpenBackupWallet","lightColor","darkColor","metaElementLight","metaElementDark","lightContent","darkContent","useBrowserUiColor","closeSecurityWarning","IS_UNSAFE_WEB","BackupWarning","SecurityWarning","_global$mediaViewer","openBackupWalletModal","closeStakingInfo","updatePendingSwaps","cardRef","portraitContainerRef","landscapeContainerRef","canRenderStickyCard","setCanRenderStickyCard","shouldRenderDarkStatusBar","setShouldRenderDarkStatusBar","isFocused","markIsFocused","unmarkIsFocused","usePreventPinchZoomGesture","shouldRenderStickyCard","stickyCardTransitionClassNames","boundingClientRect","cardTopSideObserver","cardElement","handleTokenCardClose","Warnings","Card","StickyCard","PortraitActions","LandscapeActions","StakeModal","StakingInfoModal","ReceiveModal","InvoiceModal","UnstakeModal","StakingClaimModal","VestingModal","VestingPasswordModal","UpdateAvailable","RenderingState","versionById","isOtherVersionsExist","clearAccountError","closeAddAccountModal","clearAccountLoading","isNewAccountImporting","setIsNewAccountImporting","handleModalClose","handleNewAccountClick","handleImportAccountClick","handleImportHardwareWalletClick","handleHardwareWalletConnected","SelectAccountsHardware","handleOpenSettingWalletVersion","renderSelector","AddAccountPasswordModal","buttonLabel","transitionContentWrapper","small","onNext","mnemonicContainer","privateKeyHex","privateKey","writedownAccepted","setWritedownAccepted","openWalletAccepted","setOpenWalletAccepted","canBeStolenAccepted","setCanBeStolenAccepted","modalSticker","setIsBackupRequired","confirm","setCheckIndexes","mnemonicRef","handleSafetyConfirm","handleBackupErrorUpdate","handleCheckMnemonic","_mnemonicRef$current","handleRestartCheckMnemonic","handleCheckMnemonicSubmit","SafetyRules","MnemonicPrivateKey","MnemonicList","MnemonicCheck","closeOnRampWidgetModal","animationTimeoutRef","isAnimationInProgress","setIsAnimationInProgress","iframeSrc","setIframeSrc","onIframeLoaded","frameBorder","allow","START_SCAN_DELAY_MS","MODAL_ANIMATION_DURATION_MS","DESTROY_SCANNER_DELAY_MS","isFlashlightAvailable","setIsFlashlightAvailable","isFlashlightEnabled","setIsFlashlightEnabled","isScannerStarted","setIsScannerStarted","scanSquareRef","isTorchAvailable","isTorchEnabled","enabled","stopScan","startScan","formats","QrCode","scanAreaCoordinates","scanSquareRect","scaledRect","getDomNodeDimensions","cornerPoints","qrCodeCoordinates","barcode","coordinates","topHalf","bottomHalf","sortCoordinatesClockwise","scanArea","isQrCodeOutsideScanArea","rawValue","startScanTimeoutId","documentClassModifyTimeoutId","handleFlashlightClick","disableTorch","enableTorch","flashlightButtonClassName","submitSignature","clearSignatureError","cancelSignature","complete","handleConfirm","transferStyles","renderPasswordForm","transitionContent_simple","usePrevDuringAnimation","timeoutRef","isCurrentPresent","isPrevPresent","onCompleted","initialSeconds","secondsLeft","setSecondsLeft","shouldShowWarning","pad","remainingSeconds","formattedTime","amountInCols","amountOutCols","renderTokenInfo","isReceived","amountWithSign","infoRow","noIcon","noCurrency","infoRowIcon","infoRowToken","chainLabel","infoRowAmount","infoRowAmountGreen","infoRowAmountError","infoRowChain","infoRowCurrency","infoRowCurrencyValue","infoSeparator","infoSeparatorIcon","infoSeparatorIconError","TransactionFee","CHANGELLY_EXPIRE_CHECK_STATUSES","CHANGELLY_ERROR_STATUSES","fetchActivityDetails","closeActivityInfo","renderedActivity","shouldRenderCexInfo","isCex","isCexError","isCexHold","isCexWaiting","isCexPending","isExpired","cexTransactionId","cexErrorMessage","isCountdownFinished","transactionId","_renderedActivity$cex","transactionUrl","shouldShowQrCode","renderMemo","textFieldWrapper","textFieldLabel","feeField","transactionHeader","headerDate","SwapTokensInfo","_fromToken$symbol","changellyInfoBlock","changellyDescription","changellyDescriptionBold","blockchain","Countdown","renderSwapInfo","email","swapSupportBlock","errorCexMessage","livechat","isButtonVisible","_renderedActivity$cex2","renderFooterButton","withStatus","_stakingInfo$round2","renderedTransaction","isTransactionWithPoisoning","decryptedComment","setDecryptedComment","withUnstakeTimer","setWithUnstakeTimer","shouldRenderTransactionId","transactionIdClassNames","startOfStakingCycle","shouldDisplayTimer","shouldRenderUnstakeTimer","unstakeTimerClassNames","clearPasswordError","openPasswordSlide","closePasswordSlide","openHiddenComment","handleStartStakingClick","handleUnstakeMoreClick","TransactionAmount","scamWarning","copyButtonWrapper","scamAddress","changellyTextField","canUnstake","buttonWide","renderFooter","renderTransactionContent","passwordFormContent","passwordFormContentInModal","unstakeModal","nftName","closeUnhideNftModal","handleUnhide","onDismiss","setIsOpen","timerRef","closeAndDismiss","handleMouseEnter","dismissNotification","Notification","OCCUPIED_HEIGHT","getNode","_container","createGhost","_source$parentElement","ghost","img","oncontextmenu","HTMLImageElement","applyShape","isOpening","isCustom","shouldAnimateFirstRender","prevChildren","fromChildrenRef","descriptionUrl","useSignalRef","getZoomChange","setZoomChange","useZoomChange","whitelistedMediaIds","isNftWhiteListed","SLIDES_GAP","cancelAnimation","cancelZoomAnimation","selectMedia","getMediaId","withAnimation","activeSlideRef","leftSlideRef","rightSlideRef","lastTransformRef","scale","swipeDirectionRef","initialContentRectRef","isReleasedRef","prevZoomChangeRef","isMouseDown","setIsMouseDown","getTransform","setTransform","transformRef","getActiveMediaId","setActiveMediaId","activeMediaIdRef","isScaled","activeMediaId","windowHeight","selectMediaDebounced","clearSwipeDirectionDebounced","clickXThreshold","getTransformStyle","changeSlide","dryRun","lastTransform","mId","handleNextSlide","handlePrevSlide","lastDragOffset","lastZoomCenter","panDelta","lastGestureTime","setLastGestureTime","changeSlideOnClick","calculateOffsetBoundaries","initialContentRect","inBoundsX","inBoundsY","minOffsetX","maxOffsetX","minOffsetY","maxOffsetY","absX","absY","s1","x1","y1","Vx","Vy","dirX","cancelDrag","absOffsetX","absOffsetY","Vertical","Horizontal","SWIPE_X_THRESHOLD","SWIPE_Y_THRESHOLD","MIN_ZOOM","MAX_ZOOM","scaledCenterX","scaledCenterY","scaleOffsetX","scaleOffsetY","isInThreshold","hasNextSlide","zoomChange","hasZoomChanged","wheelEvent","WheelEvent","nextMediaId","prevMediaId","hasPrev","hasNext","isMoving","Media","_global$settings","mediaUrl","mediaByIds","mediaIds","blacklistedIds","prevTxId","prevHiddenNfts","prevNoGhostAnimation","headerAnimation","shouldAnimateOpening","shouldAnimateClosing","renderedMediaIds","media","selectedMediaIndex","fromId","fromImage","mediaWidth","mediaHeight","getImageDimension","availableHeight","toWidth","toHeight","availableWidth","aspectRatio","calculatedWidth","calculateDimensions","toLeft","toTop","fromTop","fromLeft","fromWidth","fromHeight","fromTranslateX","fromTranslateY","fromScaleX","fromScaleY","clearShape","animateOpening","toImage","targetTop","display","isElementInViewport","existingGhost","ghostStyles","transformOrigin","animateClosing","ShowTransition","MediaInfo","Actions","Slides","startCardMinting","currencyIcon","CardSlides","TOTAL_SLIDES","tonBalance","closeMintCardModal","Standard","Silver","showNextSlide","Black","showPrevSlide","defaultProps","renderMediaCard","standard","silver","Gold","gold","Platinum","platinum","black","navigation","navigationLeft","navigationIcon","navigationRight","muted","loop","playsInline","poster","video","slideInner","dots","dotActive","cardType","notMinted","avaliability","soldOut","sold","leftAmount","soldAmount","amountInner","amountLeft","amountSold","renderAvailability","CardPros","clearMintCardError","submitMintCard","submitMintCardHardware","CardRoster","resultWithTime","resultTimeIcon","currentAccountState","hasManyAccounts","accountStates","signOut","isLogOutFromAllAccounts","setIsLogOutFromAllAccounts","accountsWithoutBackups","_accountStates$id","handleLogOut","shouldRenderWarningForAnotherAccounts","shouldRenderWarningForCurrentAccount","cancelButtonClassNames","shortButton","text_noExtraMargin","links","idx","onCheck","disableBiometrics","customSubmitButton","openBiometricsTurnOff","enableBiometrics","shouldDisablePasswordForm","customCancelButton","closeBiometricSettings","isTurnOnBiometricsOpened","isTurnOffBiometricsOpened","isTurnOffBiometricsWarningOpened","BiometricsTurnOn","BiometricsTurnOff","BiometricsTurnOffWarning","isNativeBiometricsEnabled","enableNativeBiometrics","clearNativeBiometricsError","pinPadType","pinTitle","prevIsEnabled","contentFullSize","stickerNativeBiometric","pinPadTitle","THEME_OPTIONS","darkThemeImg","isMintingCardsAvailable","isTrayIconEnabled","onTrayIconEnabledToggle","setAnimationLevel","isAvailableAccentLoading","setIsAvailableAccentLoading","availableAccentColorIds","setAvailableAccentColorIds","nftByColorIndexes","setNftsByColorIndex","nftCards","colors","nftsByColorIndex","colorIndex","getAccentColorsFromNfts","sortedColors","handleThemeChange","newTheme","handleAnimationLevelToggle","handleUnlockNewPalettesClick","renderColorButton","colorButton","colorButtonCurrent","iconLock","iconLockInverted","blockTitle","settingsBlock","themeWrapper","theme_active","themeIcon","themeIcon_active","themeImg","settingsBlockWithDescription","colorList","subBlockAsButton","blockDescription","Switcher","menuSwitcher","deleteToken","handleDeleteToken","ZERO_POINT","DEFAULT_OFFSET","EDGE_THRESHOLD","onDragEnd","externalStyle","knobStyle","parentRef","scrollRef","buttonRef","scrollIntervalId","translation","lastMousePosition","stopContinuousScroll","cancelAnimationFrame","startContinuousScroll","animateScroll","scrollBy","updateDraggablePosition","calculateConstrainedTranslation","setInitialState","_scrollRef$current$sc","_scrollRef$current","_ref$current2","getClientCoordinate","handleTouchStart","scrollRect","distanceFromTop","distanceFromBottom","scaledEase","handleMouseUp","dragButtonRef","cssStyles","clientY","lastScrollTop","draggableElement","parentRect","draggableRect","minX","maxX","minY","maxY","getOffsetBySlug","realIndex","getOffsetByIndex","_tokens$length","parentContainer","updateOrderedSlugs","rebuildOrderedSlugs","toggleTokenVisibility","tokensRef","sortableContainerRef","tokenToDelete","setTokenToDelete","orderedTokenSlugs","dragOrderTokenSlugs","draggedIndex","arr1","arr2","arraysAreEqual","handleOpenAddTokenPage","SelectTokenList","_state$orderedTokenSl","_state$orderedTokenSl2","_state$orderedTokenSl3","_orderedSlugs$length","handleDragEnd","handleTokenVisibility","contentRelative","sortableContainer","iconChevronRight","isDragged","draggedTop","isDeleteButtonVisible","isDragDisabled","Draggable","item_token","tokenDescription","deleteText","DeleteTokenModal","toggleTinyTransfersHidden","toggleInvestorView","toggleTokensWithNoCost","toggleSortByValue","setSettingsState","handleTinyTransfersHiddenToggle","handleInvestorViewToggle","handleOpenHiddenNfts","handleTokensWithNoPriceToggle","handleSortByValueToggle","localBaseCurrency","setLocalBaseCurrency","hiddenNftsCount","whitelistedAddressesSet","blockWithTooltip","tooltip","iconQuestion","tooltip_wide","itemInfo","SettingsTokens","deleteAllDapps","handleDeleteAllDapps","handleDeleteDapp","isDisconnectModalOpen","openDisconnectModal","closeDisconnectModal","dappToDelete","setDappToDelete","handleDisconnectDapp","handleDisconnectAll","dappList","disconnectAllBlock","disconnectButton","renderDapps","DisconnectDappModal","getBuildPlatform","NETWORK_OPTIONS","startChangingNetwork","copyStorageData","currentNetwork","handleNetworkChange","handleDownloadLogs","logsString","accountsInfo","mainLogs","bottomSheetLogs","apiLogs","timezoneOffset","getTimezoneOffset","timezone","environment","navigatorPlatform","build","flags","getLogsString","filename","toISOString","fileLocation","directory","Cache","file","writeFile","UTF8","uri","deleteFile","File","files","link","download","click","shareFile","developerTitle","logBlock","developerCloseButton","sideTitle","removeNftSpecialStatus","isNftHidden","unmarkNftHidden","areSettingsInModal","nftImage","nftPrimaryCell","nftCollection","nftButtonUnhide","isWhitelisted","handleSwitcherClick","hiddenByUserNfts","probablyScamNfts","HiddenByUserNft","ProbablyScamNft","changeLanguage","handleLanguageChange","newLangCode","languageHeader","lc","item_lang","languageInfo","languageMain","languageNative","checkmarkImg","arePushNotificationsAvailable","toggleNotifications","toggleNotificationAccount","toggleCanPlaySounds","arePushNotificationsEnabled","handlePushNotificationsToggle","handleCanPlaySoundToggle","count","accountDisabled","AndroidSettings","IOSSettings","NativeSettings","NativeSettingsWeb","isOpenRef","setShouldRender","prevIsShown","hideTimeoutRef","toggleOpen","hasMnemonicWallet","onBackClick","onOpenSecretWordsSafetyRules","onOpenPrivateKeySafetyRules","openSettingsSlide","secretWordsImg","privateKeyImg","enteredPassword","isBackupSlideActive","setPrivateKey","privateKeyResult","loadPrivateKey","PrivateKeyContent","backupType","mnemonicResult","loadMnemonic","onEnable","disableNativeBiometrics","isWarningModalOpen","openWarningModal","closeWarningModal","switcherTitle","warningTitle","warningDescription","faceIdImg","biometricsImg","handleConfirmDisableBiometrics","okButtonTitle","cancelButtonTitle","handleBiometricAuthToggle","renderDisableNativeBiometricsWarning","INITIAL_CHANGE_PASSWORD_SLIDE","createNewPin","newPassword","DEFAULT_AUTOLOCK_OPTION","isPasswordPresent","selectIsPasswordPresent","navigateBackToSettings","isAutoUpdateEnabled","onSettingsClose","onAutoUpdateEnabledToggle","openBiometricsTurnOffWarning","openBiometricsTurnOn","setAppLockValue","setIsAuthLoading","previousSlide","setBackupType","setHasMnemonicWallet","pinValue","setPinValue","confirmPinValue","setConfirmPinValue","shouldKeepCurrentPassword","handleBackToSettingsClick","openConfirmNewPinSlide","confirmNewPin","openBackupPage","backup","openNewPasswordSlide","openPasswordChangedSlide","passwordChanged","handleNewPasswordSubmit","handlePinSubmit","handleConfirmPinSubmit","handleChangePasswordClick","handleOpenPrivateKeySafetyRules","handleOpenSecretWordsSafetyRules","secretWords","handleOpenBackupWallet","handleOpenPrivateKey","handleOpenSecretWords","handleAppLockToggle","handleAutolockChange","handleNativeBiometricsTurnOnOpen","NativeBiometricsTurnOn","optionAndroid","ApplicationDetails","optionIOS","shouldRenderNativeBiometrics","shouldRenderMinifiedPinPad","isSlideActive","backupImg","NativeBiometricsToggle","changePasswordButton","itemSmall","Collapsible","pinPadHeaderMinified","onlyTextHeader","stickerHuge","Backup","BackupSafetyRules","BackupSecretWords","BackupPrivateKey","addToken","withTopSpace","headerInsideModal","importAccountByVersion","handleAddWallet","blockWalletVersionText","v","item_wallet_version","walletVersionInfo","walletVersionTitle","walletVersionAddress","walletVersionInfoRight","walletVersionTokens","walletVersionAmount","totalBalance","blockWalletVersionReadMore","ton_link","SUPPORT_ACCOUNTS_COUNT_DEFAULT","versionsById","openSettingsHardwareWallet","clicksAmount","setClicksAmount","prevRenderingKeyRef","isDeveloperModalOpen","openDeveloperModal","closeDeveloperModal","isLogOutModalOpened","openLogOutModal","closeLogOutModal","isInitialScreen","activeLang","_versions$map","_tonToken$symbol","_tonToken$price","balanceInCurrency","telegramLinkClassNames","isTelegramLinkRendered","handleSlideAnimationStop","handleCloseSettings","handlCloseDeveloperModal","handleConnectedDappsOpen","handleAppearanceOpen","Appearance","handlePushNotificationsOpen","handleSecurityOpen","Security","handleAssetsOpen","handleLanguageOpen","Language","handleAboutOpen","About","handleDisclaimerOpen","Disclaimer","handleBackClickToAssets","handleOpenWalletVersion","handleDeeplinkHookToggle","handleTonProxyToggle","handleTonMagicToggle","handleClickInstallApp","handleClickInstallOnDesktop","handleClickInstallOnMobile","handleLedgerConnected","setIsTrayIconEnabled","getIsTrayIconEnabled","handleTrayIconEnabledToggle","setIsAutoUpdateEnabled","handleAutoUpdateEnabledToggle","handleBackOrCloseAction","handleCloseLogOutModal","shouldCloseSettings","handleOpenHardwareModal","handleMultipleClick","renderHandleDeeplinkButton","tonLinksImg","withBottomSpace","upgradeImg","installAppImg","tonProxyImg","tonMagicImg","handleOpenTelegramWeb","telegramImg","appearanceImg","assetsActivityImg","securityImg","connectedDappsImg","languageImg","walletVersionImg","ledgerImg","mtwCardsImg","_MTW_TIPS_CHANNEL_NAM","tipsImg","_HELPCENTER_URL","helpcenterImg","supportImg","disclaimerImg","installDesktopImg","installMobileImg","aboutImg","item_red","exitImg","SettingsDeveloperOptions","SettingsPushNotifications","SettingsAppearance","SettingsAssets","SettingsSecurity","SettingsDapps","SettingsLanguage","SettingsDisclaimer","SettingsNativeBiometricsTurnOn","SettingsTokenList","SettingsWalletVersion","nestedTransition","SettingsHiddenNfts","LogOutModal","Biometrics","fullDialogClassName","modalDialogWeb","modalContent","cancelSwap","setHasToAddressError","canContinue","setCanContinue","handleCancelClick","validateToAddress","submitPassword","scrollContent","selectBlockchainBlock","inputAddress","inputAddressWrapper","inputButton","inputButtonShifted","blockchainHintWrapper","blockchainHintText","blockchainHintTextError","renderInputAddress","blockchainButtons","isFirstButtonDisabled","isToAddressInCurrentWallet","renderSticker","onInfoClick","onStartSwap","isDetailsDisabled","SwapResult","clearSwapError","setIsExpired","handleTimeout","_activity$cex","changellyImportantRed","textFieldWrapperFullWidth","activityById","submitSwap","submitSwapCex","addSwapToken","setSwapTokenIn","setSwapTokenOut","renderedSwapType","setRenderedSwapType","renderedTransactionAmountIn","setRenderedTransactionAmountIn","renderedTransactionAmountOut","setRenderedTransactionAmountOut","renderedTransactionTokenIn","setRenderedTransactionTokenIn","renderedTransactionTokenOut","setRenderedTransactionTokenOut","setRenderedActivity","handleTransactionInfoClick","handleModalCloseWithReset","SwapBlockchain","SwapWaitTokens","SwapPassword","_tokenOut$symbol","renderSwapShortInfo","SwapComplete","handleTransactionRepeatClick","buttonsAfterNft","feeText","submitTransferConfirm","isBurning","isNotcoinBurning","burningDurationMin","ceil","submitBtnText","stars_symbol","AmountWithFeeTextField","buttonsInsideContentWithScroll","clearTransferError","submitTransferPassword","submitTransferHardware","setTransferScreen","renderedTransactionAmount","_nfts$","TransferConfirm","TransferPassword","TransferComplete","TransferMultiNftProcess","CONFETTI_COLORS","lastRequestedAt","confettiRef","isRafStartedRef","defaultConfettiAmount","invokeGenerateConfetti","leftSide","randomX","velocity","randomColor","flicker","flickerFrequency","rotation","lastDrawnAt","frameCount","generateConfetti","updateCanvas","canvasWidth","canvasHeight","confettiToRemove","newPos","newVelocity","newFlicker","newRotation","newFrameCount","newLastDrawnAt","beginPath","ellipse","hideTimeout","prevConfettiTime","isDpppModalOpen","APP_STATES_WITH_BOTTOM_BAR","Settings","APP_UPDATE_INTERVAL","mainKey","APP_STATE_RENDER_COUNT","closeBackupWalletModal","cancelCaching","closeQrScanner","checkAppVersion","isInactive","markInactive","canPrerenderMain","prerenderMain","Inactive","withBottomBar","transitionName","slideFullClassName","LedgerModal","handleCloseBrowserTab","AppInactive","useAppIntersectionObserver","ElectronHeader","SettingsModal","AppLocked","MediaViewer","BackupModal","TransferModal","SwapModal","MintCardModal","SignatureModal","TransactionModal","SwapActivityModal","DappConnectModal","DappTransferModal","AddAccountModal","OnRampWidgetModal","UnhideNftModal","Notifications","QrScannerModal","Dialogs","ConfettiContainer","LoadingOverlay","BottomBar","_await$App$getLaunchU","newPlatform","fadeOutDuration","canGoBack","exitApp","getLaunchUrl","initCapacitor","DEEPLINK","lockOrientation","MainButton","SecondaryButton","SettingsButton","isStateStable","_webApp","biometricType","initTelegramAppBiometric","viewportHeight","handleViewportResize","hasAttribute","isFocusable","initForVisualViewport","storageMethods","isLocalStorageDataExists","isApiStorageDataExists","fixIosAppStorage","restoreStorage","forceLoadFonts","lastFocusAt","setupInterval","betterView"],"sourceRoot":""}